"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16987],{123799:function(e,a,t){t.d(a,{V:function(){return z}});var s=t(487954),i=t(155394),l=t(293168),r=t(682081),n=t(297693),d=t(764766),o=t(141819),c=t(415627),m=t(166659),u=t(784289);const h={type:"mutation",name:"clipRewardPromotionEngine",hash:"a8dc7824835bc1872e6fade3fadc9a95386447db8d8d79ef617abd5e420df4d0"};var x=t(194742),f=t(841063);var w=t(620769),v=t.n(w);const C=(e,a,t,s,i)=>{let l="";"CLIPPED"===e||"APPLIED"===e||a&&"UNCLIPPED"===e||(l=i?"product-border":"NOT_AVAILABLE"===e?"b--cyan ba":"b--navy ba");let r="";r=a?"bg-near-white-blue":i?"product-background":"NOT_AVAILABLE"===e?"bg-washed-cyan":"bg-washed-blue";const n=t?"":"dib";return v()("pa1 br2 relative z-1 ".concat("NOT_AVAILABLE"===e?"":"pr3"),s,l,n,r)};var p=t(191560),g=t(36194),b=t(972864),k=t(200421),j=t(444002);const N=(0,x.forwardRef)(((e,a)=>{let{baseClass:t,iconName:i,iconSize:l,iconClass:r,textClass:n,textMessage:d}=e;return(0,s.jsxs)("div",{className:t,children:[i&&(0,s.jsx)(j.J,{name:i,size:l,className:r,"aria-hidden":!0}),(0,s.jsx)("span",{className:n,ref:a,tabIndex:-1,children:d})]})}));var y=t(995433);const L=e=>{let{baseClass:a,src:t,alt:i,width:l,height:r,preload:n,fetchPriority:d,imageClass:o,textClass:c,textMessage:m}=e;return(0,s.jsxs)("div",{className:a,children:[(0,s.jsx)(y.Z,{src:t,alt:i,width:l,height:r,preload:n,fetchPriority:d,className:o}),(0,s.jsx)("span",{className:c,children:m})]})},A=e=>{let{conditionalStr:a,ctaChildren:t,CTALinkExtras:i,eventMultiplierStr:l,fullWidth:n,href:d,item:o,restriction:c,restrictionTextStyle:m,rewardAppliedMessage:u,rewardAvailableMessage:h,rewardStateWithoutContext:x,showMultiLineRestriction:w,signIn:C,enableProductRewardStyleUpdate:p}=e;const{authState:{isLoggedIn:j}}=(0,b.Eu)(),y=(0,s.jsx)(k.Z,{"data-dca-intent":"select","data-dca-name":"ItemBuyBoxSignInToClaimWalmartRewardButton",href:d,variant:"tertiary",size:"medium",className:v()("f6 pa0 h-auto",n?"ml-auto":"ml5"),onLinkName:"signInToClaimWalmartReward",onLinkExtras:i,style:{whiteSpace:"inherit"},onClick:e=>{e.preventDefault(),null===C||void 0===C||C()},"data-dca-id":"B:985F443723",children:t});return(0,s.jsx)("div",{children:"APPLIED"===x?(0,s.jsx)(N,{baseClass:"flex items-center",iconName:"MoneyCircleFill",iconSize:"small",iconClass:"navy",textClass:"f7 navy b ml1 lh-solid",textMessage:u}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:v()("flex",{"flex-column items-start":!n}),children:[p?(0,s.jsx)(L,{baseClass:"flex items-center",src:g.OC,preload:!0,height:j?g.QA:g.X$,width:j?g.ob:g.Ke,alt:(0,r.m)(f,"cashLogo"),textClass:"f7 navy b ml1",textMessage:h}):(0,s.jsx)(N,{baseClass:"flex items-center",iconName:"MoneyCircleFill",iconSize:j?"small":"medium",iconClass:"navy",textClass:"f7 navy b ml1",textMessage:h}),!j&&n&&y]}),(0,s.jsx)("div",{className:v()("sans-serif f7 dark-gray"),style:m||{marginLeft:30},id:"add-walmart-reward".concat(null===o||void 0===o?void 0:o.id),children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:l}),(0,s.jsx)("div",{children:c})]}):a||""}),!j&&!n&&y]})})};var I=t(563861);const S=t.n(I)()((()=>t.e(4024).then(t.bind(t,268090))),{loadableGenerated:{webpack:()=>[268090]},ssr:!1}),R=e=>{let{setShowErrorModal:a,sorryTextMessage:t}=e;const i=()=>{a(!1)};return(0,s.jsx)(S,{actions:(0,s.jsx)("div",{className:"center",children:(0,s.jsx)(k.Z,{className:"mb2",onClick:i,variant:"primary",size:"medium",onLinkName:"errorModalOk","data-dca-id":"B:6B63D1BA77","data-dca-intent":"__DCA_TBD__",children:(0,r.m)(f,"ok")})}),isOpen:!0,onClose:i,size:"small",title:(0,r.m)(f,"manufacturerOffersTitle"),children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"b",children:t}),(0,r.m)(f,"tryAgain")]})})};var P=t(976973),T=t(595042);const M=e=>{let{isOpen:a,onClose:t}=e;return(0,s.jsx)(P.Z,{isOpen:a,onClose:t,title:(0,r.m)(f,"walmartCashNotAvailable"),size:"small",children:(0,s.jsx)("span",{className:"f5 dark-gray lh-copy pre-wrap",children:(0,r.m)(f,"walmartCashNotAvailableInfoDescription")})})},E=()=>{const{0:e,1:a}=(0,x.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cyan",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(i.VisuallyHidden,{children:(0,r.m)(f,"warning")}),(0,s.jsx)(j.J,{name:"Warning",size:"small",className:"cyan","aria-hidden":!0}),(0,s.jsx)("span",{className:"f7 ml1 b",children:(0,r.m)(f,"walmartCashNotAvailable")})]}),(0,s.jsx)(T.C,{className:"bn no-underline pa0 ml1",onClick:()=>{a(!0)},"aria-label":(0,r.m)(f,"walmartCashNotAvailableInfo"),onLinkName:"walmartCashNotAvailableInfo",children:(0,s.jsx)(j.J,{name:"InfoCircle",size:"small",className:"cyan","aria-hidden":!0})})]}),(0,s.jsx)(M,{isOpen:e,onClose:()=>{a(!1)}})]})};var D=t(522037),B=t(237460),W=t(385074);const _=e=>{let{rewardStateWithoutContext:a,setRewardState:t,setRewardStateWithoutContext:i,rewardAmt:l,savedRewardsMessage:n,offer:d,secondaryText:o,onToggleCheckbox:c,onClipRewardClick:m,preventDefaultClipHandler:u,clipRewardPromotion:h,item:w,onLinkExtras:C,isDisabled:p,showDetails:b,onClickDetails:y,showMultiLineRestriction:L,eventMultiplierStr:A,restriction:I,offerId:S,selectionToken:R,usItemId:P,secondaryPrefix:T,detailsButtonADAText:M,checkBoxADAText:E,restrictionTextStyle:_,conditionalStr:J,checkboxCustomClassName:O}=e;const{0:z,1:U}=(0,x.useState)(!1),{0:Z,1:F}=(0,x.useState)(!1),V=(0,x.useRef)(null),H={...C,li:{ath:{athAssest:(0,D.OI)(null===w||void 0===w?void 0:w.canonicalUrl)}}};(0,x.useEffect)((()=>{var e;Z&&a===g.Jl.CLIPPED&&(null===V||void 0===V||null===(e=V.current)||void 0===e||e.focus(),F(!1))}),[Z,a]);const K=()=>{(0,B.cL)("digitalRewardsClick",Date.now().toString()),t&&t(g.Jl.CLIPPED),U(!0),i(g.Jl.CLIPPED),C&&C.pr&&(C.pr.wd="1"),m&&m(w),u||h({input:{cbOffer:"".concat(S),selectionToken:R,usItemId:P||(null===w||void 0===w?void 0:w.usItemId)}}),c&&c(),F(!0)},G=a===g.Jl.CLIPPED,X=d&&!G&&!b&&!p;return(0,s.jsxs)("div",{className:v()({pointer:X}),...X&&{onClick:K},children:[(0,s.jsxs)("div",{className:"flex items-center",...G&&z&&{role:"alert"},children:[G?(0,s.jsx)(N,{iconName:"Check",iconSize:"medium",textClass:"f7 navy b ml1",textMessage:l?"$".concat(l.toFixed(2)," ").concat(n):n,ref:V}):d&&(0,s.jsx)(W.Z,{"data-dca-id":"ui_product_tile:product_reward_toggle_clip:checkbox","data-dca-intent":"select","data-dca-name":"ItemBuyBoxaddWalmartReward",label:d,onChange:b?K:()=>{},onLinkName:"addWalmartReward",onLinkExtras:w?H:C,"aria-label":E||"".concat(d," ").concat((0,r.m)(f,"walmartPlus"),", ").concat(o),className:O||"f7 navy b lh-title",disabled:p,checkboxProps:{"aria-describedby":"add-walmart-reward".concat(null===w||void 0===w?void 0:w.id)}}),b&&!p&&(0,s.jsx)(k.Z,{"data-dca-intent":"select","data-dca-name":"ItemBuyBoxShowRewardDetailsButton",onClick:y,onLinkName:"showRewardDetails","aria-label":M||(0,r.m)(f,"showRewardDetails"),variant:"tertiary",size:"small",className:"bn pa0 no-underline ml2 h-inherit flex",disabled:p,"data-dca-id":"B:7986B01171",children:(0,s.jsx)(j.J,{name:"InfoCircle",size:"small","aria-hidden":!0})})]}),(0,s.jsx)("div",{className:v()("sans-serif f7 dark-gray"),style:_||{marginLeft:30},id:"add-walmart-reward".concat((null===w||void 0===w?void 0:w.id)||S),children:L?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:A}),(0,s.jsx)("div",{children:I})]}):J||""}),o&&(0,s.jsxs)("div",{className:"flex items-center mt1 mb2",style:{marginLeft:30},children:[T&&(0,s.jsx)(T,{}),(0,s.jsx)("span",{className:v()("f7 b ml2",{"dark-gray":p,blue:!p}),children:o})]})]})},J=e=>{let{conditionalStr:a,ctaChildren:t,CTALinkExtras:i,eventMultiplierStr:l,fullWidth:r,href:n,item:d,restriction:o,restrictionTextStyle:c,showMultiLineRestriction:m,signIn:u,unlockRewardIcon:h,unlockRewardMessage:x}=e;const f=(0,s.jsx)(k.Z,{href:n,variant:"tertiary",size:"medium",className:v()("f6 pa0 h-auto",r?"ml-auto":"ml5"),onLinkName:"signInToClaimWalmartReward",onLinkExtras:i,style:{whiteSpace:"inherit"},onClick:e=>{e.preventDefault(),null===u||void 0===u||u()},"data-dca-id":"B:105C68429C","data-dca-intent":"__DCA_TBD__",children:t});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:v()("flex",{"flex-column items-start":!r}),children:[(0,s.jsx)(N,{baseClass:"flex items-center",iconName:h,iconSize:"medium",iconClass:"navy",textClass:"f7 navy b ml1",textMessage:x}),r&&f]}),(0,s.jsx)("div",{className:v()("sans-serif f7 dark-gray"),style:c||{marginLeft:30},id:"add-walmart-reward".concat(null===d||void 0===d?void 0:d.id),children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:l}),(0,s.jsx)("div",{children:o})]}):a||""}),!r&&f]})},O=e=>{let{fullWidth:a,hideUnlockRewardIcon:t,unlockRewardIcon:i,unlockEarnRewardMessage:l,hideWalmartPlusBlueLogo:n,joinWPlusLinkExtras:d,joinWplus:o,ctaJoinWPlusChildren:c,secondaryText:m}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:v()("flex",{"flex-column items-start":!a}),children:[(0,s.jsxs)("div",{className:"flex items-center",children:[t?(0,s.jsx)(y.Z,{src:g.Xi,preload:!0,height:24,width:24,alt:(0,r.m)(f,"walmartPlus")}):i&&(0,s.jsx)(j.J,{name:i,size:"medium",className:"blue","aria-hidden":!0}),(0,s.jsx)("div",{className:"f7 navy b ml1",children:l}),!n&&a&&(0,s.jsx)(y.Z,{src:g.hE,alt:(0,r.m)(f,"walmartPlus"),preload:!1,width:54,height:18,"aria-hidden":!0,className:"ml1 mt1"})]}),(0,s.jsx)(k.Z,{variant:"tertiary",size:"medium",className:v()("f6 pa0 h-auto",a?"ml-auto":"ml5"),onLinkName:"joinWalmartPlus","aria-label":(0,r.m)(f,"joinWalmartPlus"),onLinkExtras:d,onClick:o,style:{whiteSpace:"inherit"},"data-dca-id":"B:5588ACB3A8","data-dca-intent":"__DCA_TBD__",children:c})]}),m&&(0,s.jsx)("div",{className:"f7 blue b mt1 mb2 ml5",children:m})]})},z=e=>{let{joinWplus:a,signIn:t,href:w,unlockRewardIcon:v="MoneyCircle",rewardAmt:b,unlockRewardMessage:k="".concat((0,r.m)(f,"unlockReward")),savedRewardsMessage:j="".concat((0,r.m)(f,"rewardAdded")),unlockEarnRewardMessage:N="".concat((0,r.m)(f,"earnReward",{rewardAmt:b})),rewardAppliedMessage:y=(0,r.m)(f,"rewardApplied"),rewardAvailableMessage:L=(0,r.m)(f,"rewardAvailable"),sorryTextMessage:I=(0,r.m)(f,"sorryText"),hideWalmartPlusBlueLogo:S,detailsButtonADAText:P,hideUnlockRewardIcon:T,ctaChildren:M="".concat((0,r.m)(f,"signIn")),ctaJoinWPlusChildren:D="".concat((0,r.m)(f,"joinWalmartPlus")),item:B,offerId:W,selectionToken:z,offer:U,state:Z,restriction:F="",eventMultiplierStr:V="",enableCashBackRebrand:H=!1,moduleContext:K="",pageTitle:G="",onToggleCheckbox:X=c.Z,showDetails:$,onClickDetails:q,onClipRewardClick:Q=c.Z,onClipRewardSuccess:Y=c.Z,onLinkExtras:ee={},usItemId:ae,joinWPlusLinkExtras:te,fullWidth:se=!1,secondaryText:ie="",secondaryPrefix:le,isDisabled:re,preventDefaultClipHandler:ne,showMultiLineRestriction:de,checkBoxADAText:oe="",restrictionTextStyle:ce,CTALinkExtras:me,className:ue,checkboxCustomClassName:he}=e;var xe;const fe=null===(xe=(0,l.iC)(o.YL).shared.values)||void 0===xe?void 0:xe.enableProductRewardStyleUpdate,{addSnack:we}=(0,i.useSnackbar)(),{router:ve}=(0,d.tv)(),{rewardState:Ce,setRewardState:pe}=(0,p.Kf)(),{0:ge,1:be}=(0,x.useState)(Ce||Z);(0,x.useEffect)((()=>{be(Ce||Z)}),[Ce,Z]);const{0:ke,1:je}=(0,x.useState)(!1),Ne=(0,n.wG)(),{clipRewardPromotion:ye,error:Le,errors:Ae}=(e=>{const a=(0,m.G)(),[t,{data:s,isError:i}]=(0,u.D)((e=>a(h,e)),e);return{clipRewardPromotion:t,error:Boolean(null===s||void 0===s?void 0:s.errors)||i,errors:null===s||void 0===s?void 0:s.errors}})({onSuccess:(e,a)=>{e.errors||(Y(a),we({message:(0,r.m)(f,"rewardItemSavedMessage2"),actionButtonProps:{children:(0,r.m)(f,"viewAll"),onClick:()=>{ve.push("/offer/claimed-offers")}}}))}}),Ie=((e,a,t)=>{let s="",i="",l="",n="";return a?(i="".concat(t?"".concat((0,r.m)(f,"manufacturerOffer")," | "):(0,r.m)(f,"manufacturerOffer")),l="",n="".concat(t).slice("".concat(t).indexOf(" "))):(i="",l=e&&t?"".concat(e," - "):e,n="".concat(t?"".concat(t):"")),s=s.concat(i,l,n).trimStart(),s})(V,H,F);if((0,x.useEffect)((()=>{var e,a,t,s,i,l,r,n;Le&&(Ne({context:K,name:"error",action:"error",payload:{er:{rn:Ae&&(null===(e=Ae[0])||void 0===e||null===(a=e.extensions)||void 0===a?void 0:a.code),ms:Ae&&(null===(t=Ae[0])||void 0===t?void 0:t.message),dt:Ae&&(null===(s=Ae[0])||void 0===s||null===(i=s.extensions)||void 0===i||null===(l=i.exception)||void 0===l?void 0:l.message),ec:Ae&&(null===(r=Ae[0])||void 0===r||null===(n=r.extensions)||void 0===n?void 0:n.status)},ta:{pt:G}}}),je(!0))}),[Le,Ne,Ae,K,G]),ge===g.Jl.UNKNOWN)return null;const Se=B?B.usItemId:"NullUsItemId";return(0,s.jsxs)(s.Fragment,{children:[!Le&&(0,s.jsx)("div",{className:"mt2 mb2",children:(0,s.jsxs)("div",{"data-testid":"qa-id-walmartReward-".concat(Se),className:C(ge,re,se,ue,fe),children:[(ge===g.Jl.UNCLIPPED||ge===g.Jl.CLIPPED)&&(0,s.jsx)(_,{rewardStateWithoutContext:ge,setRewardState:pe,setRewardStateWithoutContext:be,rewardAmt:b,savedRewardsMessage:j,offer:U,secondaryText:ie,onToggleCheckbox:X,onClipRewardClick:Q,preventDefaultClipHandler:ne,clipRewardPromotion:ye,item:B,onLinkExtras:ee,isDisabled:re,showDetails:$,onClickDetails:q,showMultiLineRestriction:de,eventMultiplierStr:V,restriction:F,offerId:W,selectionToken:z,usItemId:ae,secondaryPrefix:le,detailsButtonADAText:P,checkBoxADAText:oe,restrictionTextStyle:ce,conditionalStr:Ie,checkboxCustomClassName:he}),(ge===g.Jl.APPLIED||ge===g.Jl.AVAILABLE)&&(0,s.jsx)(A,{rewardStateWithoutContext:ge,rewardAppliedMessage:y,rewardAvailableMessage:L,href:w,signIn:t,ctaChildren:M,CTALinkExtras:me,restriction:F,restrictionTextStyle:ce,item:B,showMultiLineRestriction:de,eventMultiplierStr:V,conditionalStr:Ie,fullWidth:se,enableProductRewardStyleUpdate:fe}),ge===g.Jl.UNLOCK&&(0,s.jsx)(J,{fullWidth:se,unlockRewardIcon:v,unlockRewardMessage:k,href:w,signIn:t,ctaChildren:M,CTALinkExtras:me,restriction:F,restrictionTextStyle:ce,item:B,showMultiLineRestriction:de,eventMultiplierStr:V,conditionalStr:Ie}),ge===g.Jl.UNLOCK_WITH_W_PLUS&&(0,s.jsx)(O,{fullWidth:se,hideUnlockRewardIcon:T,unlockRewardIcon:v,unlockEarnRewardMessage:N,hideWalmartPlusBlueLogo:S,joinWPlusLinkExtras:te,joinWplus:a,ctaJoinWPlusChildren:D,secondaryText:ie}),ge===g.Jl.NOT_AVAILABLE&&(0,s.jsx)(E,{})]})}),ke&&(0,s.jsx)(R,{setShowErrorModal:je,sorryTextMessage:I})]})}}}]);