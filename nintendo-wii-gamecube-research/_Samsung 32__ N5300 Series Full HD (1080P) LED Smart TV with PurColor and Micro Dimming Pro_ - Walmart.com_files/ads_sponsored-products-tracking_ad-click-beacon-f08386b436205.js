"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17845],{761330:function(o,e,t){t.d(e,{g:function(){return a}});var n=t(44451);const a=()=>{var o,e,t;const a=null===(o=(0,n.S)())||void 0===o||null===(e=o.publicRuntimeConfig)||void 0===e||null===(t=e.ads)||void 0===t?void 0:t.host;let d=null!==a&&void 0!==a?a:"https://www.walmart.com";return d=window.location.origin,d}},510755:function(o,e,t){t.d(e,{Q9:function(){return I},TT:function(){return v},gI:function(){return m},lk:function(){return r},w0:function(){return p},yS:function(){return u}});var n=t(760865),a=t(752875),d=t(705770),i=t(636678),l=t(68411);const c=["BrandAmplifierAd","BuyBoxAd","MarqueeDisplayAd","POV2DisplayAd","POV3DisplayAd","POV4DisplayAd","SkylineDisplayAd","SponsoredProductCarousel","DynamicAdContainer","TileDisplayAd","TileTakeOverDisplayAd"];const r=(o,e)=>{if(e){const e=-1===o.indexOf("?")?"":o.slice(o.indexOf("?"));return"/swag/graphql".concat(e)}return o},s=(o,e,t)=>o&&""!==o.trim()?o:e&&""!==e.trim()?e:t,u=(o,e,t,a)=>{var r,u,p,v,m,f,g,y,C,S,b,h;const T=(o=>{let e={adsContext:{},pageContext:{},adRequestComposite:{},storeId:"",stateCode:"",zipCode:"",lazy:"",type:""};for(const a of Object.values(o))if(n=a.type,c.includes(n)&&a.configs){var t;const o=a.configs,n=(null===o||void 0===o?void 0:o.ad)||(null===o||void 0===o?void 0:o.adV1),d=null===o||void 0===o||null===(t=o._rawConfigs)||void 0===t?void 0:t.lazy;if("BuyBoxAd"===a.type&&(e.lazy=d,e.type=a.type),(null===d||void 0===d)&&n){const o=()=>{if(I(a.type)){const{clientCapabilities:o,...e}=n.adRequestComposite||{};return e}return n.adRequestComposite};e={adsContext:n.adsContext||{},pageContext:n.pageContext,adRequestComposite:o()||{},storeId:n.storeId,stateCode:n.stateCode,zipCode:n.zipCode,lazy:"",type:a.type};break}}var n;return e})(t),x=(null===a||void 0===a?void 0:a.pageId)||"",A=T.pageContext,{defaultLocationStateCode:L,defaultLocationZipCode:U,defaultStoreId:P,ipBbLazyLoadingEnable:N}=(0,n.v)(),w=null===a||void 0===a||null===(r=a.pageMetadata)||void 0===r?void 0:r.location,E=s(T.storeId,null===w||void 0===w?void 0:w.storeId,P),M=s(T.stateCode,null===w||void 0===w?void 0:w.stateOrProvinceCode,L),R=s(T.zipCode,null===w||void 0===w?void 0:w.postalCode,U);N&&"item"===a.pageType&&"mobile"===a.platform&&(o=>{let{adParamsFromAtf:e,adsContext:t,defaultLocationStateCode:n,defaultLocationZipCode:a,defaultStoreId:i,finalLocation:l}=o;var c,r,s,u,p,v;(0,d.cM)(["info","ads","location"],{type:"log",name:"ads-common-param",message:"ads common param",adParamsFromAtf:e,adsCtxt:t,adsContextLocation:{stateCode:null===t||void 0===t||null===(c=t.pageMetadata)||void 0===c||null===(r=c.location)||void 0===r?void 0:r.stateOrProvinceCode,zipCode:null===t||void 0===t||null===(s=t.pageMetadata)||void 0===s||null===(u=s.location)||void 0===u?void 0:u.postalCode,storeId:null===t||void 0===t||null===(p=t.pageMetadata)||void 0===p||null===(v=p.location)||void 0===v?void 0:v.storeId},defaultValues:{stateCode:n,zipCode:a,storeId:i},finalLocation:l})})({adParamsFromAtf:T,adsContext:a,defaultLocationStateCode:L,defaultLocationZipCode:U,defaultStoreId:P,finalLocation:{storeId:E,stateCode:M,zipCode:R}});const{publicRuntimeConfig:V}=(0,i.B)();var O;const B=null!==(O=null===V||void 0===V?void 0:V.tenant)&&void 0!==O?O:"WM_GLASS";return{adRequestComposite:T.adRequestComposite,adsContext:T.adsContext,pageContext:A&&!(0,l.Q)(A)?A:null===a||void 0===a||null===(u=a.pageMetadata)||void 0===u?void 0:u.pageContext,pageId:x,pageType:e,platform:o?"MOBILE_WEB":"DESKTOP",tenant:B,locationContext:{storeId:E,stateCode:M,zipCode:R,...(null===a||void 0===a||null===(p=a.pageMetadata)||void 0===p||null===(v=p.location)||void 0===v?void 0:v.accessType)&&{accessType:a.pageMetadata.location.accessType},...(null===a||void 0===a||null===(m=a.pageMetadata)||void 0===m||null===(f=m.location)||void 0===f?void 0:f.accessPointId)&&{accessPointId:a.pageMetadata.location.accessPointId},...(null===a||void 0===a||null===(g=a.pageMetadata)||void 0===g||null===(y=g.location)||void 0===y?void 0:y.spokeNodeId)&&{spokeNodeId:a.pageMetadata.location.spokeNodeId},...(null===a||void 0===a||null===(C=a.pageMetadata)||void 0===C||null===(S=C.location)||void 0===S?void 0:S.storeFrontIds)&&{storeFrontIds:a.pageMetadata.location.storeFrontIds},...(null===a||void 0===a||null===(b=a.pageMetadata)||void 0===b||null===(h=b.location)||void 0===h?void 0:h.intentStrength)&&{intentStrength:a.pageMetadata.location.intentStrength}}}},p=(o,e)=>{const t=o.type,d=o.configs._rawConfigs.adUuid;if((0,n.v)().enableAdsConfigInGql){const o=(0,a.M)();o&&(e.adRequestComposite={...e.adRequestComposite,adsConfig:o})}return{...e,...d&&{adRequestComposite:{...e.adRequestComposite,adUuid:d}},moduleConfigs:{moduleLocation:o.configs._rawConfigs.moduleLocation,lazy:o.configs._rawConfigs.lazy},moduleType:t}},v=o=>{let e={};try{e=JSON.parse(o)}catch(t){}return e},m=o=>o.endsWith("DisplayAd")||"TriplePack"===o||"PrismTriplePack"===o||"AdjustableBanner"===o||"PrismAdjustableBanner"===o||"GridPOVBanners"===o||"AdjustableCardCarousel"===o||"PrismAdjustableCardCarousel"===o,I=o=>"SponsoredProductCarousel"===o||"SponsoredVideoAd"===o||"BuyBoxAd"===o||"BrandAmplifierAd"===o},752875:function(o,e,t){t.d(e,{M:function(){return d}});var n=t(328596),a=t(500303);const d=()=>{const o=(0,n.ej)(a.R.ADSCONFIG)?(0,n.ej)(a.R.ADSCONFIG):null;try{return JSON.parse(null!==o&&void 0!==o?o:"{}")}catch(e){return{}}}},831538:function(o,e,t){t.d(e,{$t:function(){return u},Fh:function(){return v},I9:function(){return f},K_:function(){return p},eT:function(){return S},h5:function(){return y},iT:function(){return h},jg:function(){return s},o6:function(){return m}});var n=t(828160),a=t(760865),d=t(761330),i=t(554955),l=t(488308),c=t(384036),r=t(412274);const s=o=>{var e;return o&&o.length>0?null===(e=o[0])||void 0===e?void 0:e.products:[]},u=o=>{var e;return o&&o.length>0?null===(e=o[0])||void 0===e?void 0:e.logo:{}},p=(o,e,t,n,d)=>{var i;const{brands:r,lifestyleStr:s,isVideoAd:u}=(0,c.y_)(e,o.pageType,o.platform);let p,{ad:{placementId:v,taxonomy:m}}=(0,l.B0)(o,e,t);p=(null===e||void 0===e||null===(i=e.adContent)||void 0===i?void 0:i.dataV1)&&"brands"in e.adContent.dataV1?(0,l.NZ)(o,e,n,void 0,d):(0,l.B0)(o,e);const I=r&&r.length>0,f="".concat(p.ad.placementId).concat(s),{searchGenAIProps:g}=o,y=null===g||void 0===g?void 0:g.pagesource;return v=u?"sv".concat(v.slice(2)):v,v=(0,a.v)().spGenAiSearchEnable&&"GEN_AI"===y&&u?"".concat(v).concat(null===g||void 0===g?void 0:g.exploreAll):b(v,u,null===t||void 0===t?void 0:t.isModularSearch,null===t||void 0===t?void 0:t.modularMeta,null===t||void 0===t?void 0:t.isFullySpcarouselSearch),m=I?p.ad.taxonomy:m,{placementId:I?f:v,taxonomy:m}},v=(o,e,t)=>{let{ad:n,indexNo:a,eventType:d}=e;var i,c,r,s;const u=(null===n||void 0===n||null===(i=n.adContent)||void 0===i?void 0:i.data)||(null===n||void 0===n||null===(c=n.adContent)||void 0===c?void 0:c.dataV1)||{},{videos:p=[]}=u,v=(null===p||void 0===p||null===(r=p[0])||void 0===r||null===(s=r.products)||void 0===s?void 0:s[0])||{},{ad:{placementId:m,taxonomy:I}}=(0,l.B0)(o,n,t);let g=m;if((null===t||void 0===t?void 0:t.isModularSearch)&&(null===t||void 0===t?void 0:t.modularMeta)){const o=JSON.parse(null===t||void 0===t?void 0:t.modularMeta).interpretations[0],e="".concat(o.type,"-").concat(o.sub_type);g="".concat(m).concat(e)}return f(o,v,{indexNo:a,eventType:d,placementId:g,taxonomy:I})},m=(o,e)=>{let{ad:t,indexNo:n,eventType:a}=e;var d,i;const{products:l=[]}=(null===t||void 0===t||null===(d=t.adContent)||void 0===d?void 0:d.data)||{},c=(null===t||void 0===t||null===(i=t.adContent)||void 0===i?void 0:i.data)||{},{brands:r=[]}=c,u=s(r);return f(o,l&&l[n]||u&&u[n],{indexNo:n,eventType:a,...p(o,t)})};function I(o,e){return(0,a.v)().adSpBuyNowBeaconEnable?e?"0":o===r.Xe.CLICK||o===r.Xe.ATC||o===r.Xe.QUICKSHOPFIRST||o===r.Xe.CLIP||o===r.Xe.BUYNOW||o===r.Xe.PREORDER?"1":"0":o===r.Xe.CLICK||o===r.Xe.ATC||o===r.Xe.QUICKSHOPFIRST||o===r.Xe.CLIP||o===r.Xe.PREORDER?"1":"0"}const f=(o,e,t)=>{let{eventType:l,taxonomy:s,placementId:u,indexNo:p,isBeaconSent:v}=t;var m;const f="".concat((0,d.g)()).concat(null===e||void 0===e?void 0:e.canonicalUrl),g="".concat((0,d.g)(),"/ip//").concat(null===e||void 0===e?void 0:e.usItemId);let y=(null===e||void 0===e?void 0:e.canonicalUrl)?f:g;const{enableSponsoredRedirectParam:C}=(0,a.v)();C&&(y=(0,c.KL)(y));const S=null===e||void 0===e||null===(m=e.sponsoredProduct)||void 0===m?void 0:m.clickBeacon,b=(null===e||void 0===e?void 0:e.canonicalUrl)&&(null===e||void 0===e?void 0:e.canonicalUrl.split("?").pop());if(S){const t=new URL(S),d=t.origin,m=t.pathname,f=new URLSearchParams(t.search),g=f.get("bkt"),C=(0,c.cb)(o),{specificity:T,specificityScore:x}=(0,c.Hs)(o),A=(0,c.py)(o.pageType);var h;const L={bt:I(l,v),eventST:l||"",plmt:"".concat(u),pos:"".concat(p+1),tax:s,rdf:l===r.Xe.CLICK?"1":"0",rd:y,adUid:f.get("adUid")||"",mloc:f.get("mloc")||"",pltfm:o.platform,pgId:null!==(h=o.pageId)&&void 0!==h?h:"",pt:o.pageType,spQs:f.get("spQs")||"",storeId:f.get("storeId")||"",specificity:T,specificityScore:x,...A&&{templateId:A},...(0,a.v)().spIbottaEnable&&{couponState:(0,c.AH)(e)},...g&&{bkt:g||""},...C};return l!==r.Xe.CLIP&&l!==r.Xe.ATC&&l!==r.Xe.INCREASEQUANTITY&&l!==r.Xe.DECREASEQUANTITY&&l!==r.Xe.QUICKSHOPFIRST&&l!==r.Xe.QUICKSHOPANOTHER&&l!==r.Xe.BUYNOW&&l!==r.Xe.PREORDER||(0,i.ZR)("".concat(d).concat(m,"?").concat(n.stringify(L)),!0),(null===e||void 0===e?void 0:e.canonicalUrl)?"".concat(d).concat(m,"?").concat(n.stringify(L),"&").concat(b):"".concat(d).concat(m,"?").concat(n.stringify(L))}return""};function g(o){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o&&e&&!(0,a.v)().sbaLogoClickEventFixEnable){const e=o.split("|");return Array.isArray(e)&&e.length>2?"".concat(e[0],"|").concat(e[1],"~"):o}return o||""}const y=(o,e,t,n)=>{const a=(0,c.nX)(t,o.pageType,o.platform);return e.map(((e,d)=>({...e,externalInfoUrl:f(o,e,{...p(o,t,n),indexNo:d+("SponsoredVideos"===(null===a||void 0===a?void 0:a.__typename)?1:0),eventType:r.Xe.CLICK})})))};function C(o){const e=new URLSearchParams(o.baseUrl.search),t=e.get("bkt"),n=e.get("st"),a=e.get("et");var d;return{bt:I(o.eventType,o.isBeaconSent),eventST:o.eventType||"",plmt:o.placementId,pos:o.pos,tax:o.taxonomy,rdf:o.eventType===r.Xe.CLICK?"1":"0",rd:o.rdUrl,adUid:e.get("adUid")||"",mloc:e.get("mloc")||"",pltfm:o.adsContext.platform,pgId:null!==(d=o.adsContext.pageId)&&void 0!==d?d:"",pt:o.adsContext.pageType,spQs:e.get("spQs")||"",storeId:e.get("storeId")||"",...t&&{bkt:t||""},...n&&{st:n||""},...a&&{et:a||""}}}const S=(o,e,t,n,a,d)=>{var i,l,r,s,u;if(null===(null===a||void 0===a||null===(i=a.product)||void 0===i?void 0:i.sponsoredProduct))return;let v=(0,c.wC)(e,a,void 0,null===d||void 0===d?void 0:d.enableLineItemId);-1!==(null===d||void 0===d?void 0:d.index)&&(v=null===d||void 0===d?void 0:d.index);const m="SponsoredVideos"===(null===n||void 0===n||null===(l=n.adContent)||void 0===l||null===(r=l.data)||void 0===r?void 0:r.__typename)||"SponsoredVideos"===(null===n||void 0===n||null===(s=n.adContent)||void 0===s||null===(u=s.dataV1)||void 0===u?void 0:u.__typename);if(-1!==v){const a=e[v],{taxonomy:i,placementId:l}=p(o,n,d);f(o,a,{taxonomy:i,placementId:l,eventType:t,indexNo:m?v+1:v,isBeaconSent:null===d||void 0===d?void 0:d.isBeaconSent})}},b=(o,e,t,n,a)=>{let d=o;if(t&&n){const t=JSON.parse(n).interpretations[0];let i="".concat(t.type,"-").concat(t.sub_type);a&&(i="".concat(i,"~fs")),d=e?"".concat(o,"~").concat(i):"".concat(o).concat(i)}return d},h=function(o,e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!e)return"";const{brands:s,lifestyleStr:p}=(0,c.y_)(e,o.pageType,o.platform);if(!s.length)return"";const v=u(s),{ad:{placementId:m,taxonomy:I}}=(0,l.NZ)(o,e,d,void 0,i),{logoClickTrackUrl:f}=v;if(!f)return"";let{featuredUrl:y}=v;const S=(0,c.py)(o.pageType);(0,a.v)().enableSponsoredRedirectParam&&y&&(y=(0,c.KL)(y));const b=new URL(f),h=b.origin,T=b.pathname,x=new URLSearchParams(b.search),A={baseUrl:b,adsContext:o,eventType:r.Xe.CLICK,placementId:"".concat(m).concat(p),isBeaconSent:!1,pos:"1",rdUrl:y,taxonomy:I};let L=C(A);return L={...L,...S&&{templateId:S},addlInfo:g(x.get("addlInfo"),t)},"".concat(h).concat(T,"?").concat(n.stringify(L))}},488308:function(o,e,t){t.d(e,{B0:function(){return I},D7:function(){return h},MI:function(){return x},NZ:function(){return b},_P:function(){return y},a1:function(){return f},fU:function(){return L},gc:function(){return m},i8:function(){return A},je:function(){return v},ly:function(){return C},tF:function(){return U},tQ:function(){return S},ui:function(){return g}});var n=t(840118),a=t(760865),d=t(681589),i=t(510755),l=t(532130),c=t(705770),r=t(831538),s=t(384036),u=t(412274);const p={search:{top:"sb-search-top",middle:"sp-search-middle",bottom:"sp-search-bottom"},browse:{top:"sb-browse-top",middle:"sp-browse-middle",bottom:"sp-browse-bottom"},item:{top:"sp-item-top",middle:"sp-item-middle",bottom:"sp-item-bottom",car1:"sp-item-car1",car2:"sp-item-car2",tile1:"sp-item-tile1",tile2:"sp-item-tile2"},homepage:{top:"sp-homepage-p13n",middle:"sp-homepage-p13n",bottom:"sp-homepage-p13n"},thankYou:{top:"sp-thankyou-p13n",middle:"sp-thankyou-p13n",bottom:"sp-thankyou-p13n"},stockup:{middle:"sp-stockup-p13n"},myitems:{middle:"sp-myitems-p13n"},cart:{middle:"sp-cart-p13n"},pac:{middle:"sp-pac-p13n"},shop:{car1:"sp-shop-car1",middle:"sp-shop-middle"},topic:{top:"sb-topic-top",middle:"sp-topic-middle",bottom:"sp-topic-bottom"}},v=(o,e)=>{let t="bottom";"top"!==e&&"middle"!==e&&"car1"!==e&&"car2"!==e&&"tile1"!==e&&"tile2"!==e||(t=e);const n=p[o];return n&&n[t]||"sp-search-bottom"},m=(o,e)=>{let{adsContext:t,adUid:n,cloud:d="",products:i,moduleInfo:l,carouselType:c="",placementTitle:r="",modularMeta:u="",isModularSearch:p,isFullySpcarouselSearch:v}=e;var m;const{platform:I,pageId:f="",pageType:g,pageMetadata:y,pageNumber:C="",searchGenAIProps:S,mosaicPageNumber:b=""}=t;let h="";const T=null===S||void 0===S?void 0:S.pagesource;var x;(0,a.v)().spGenAiSearchEnable&&"GEN_AI"===T&&"sb-search-top"!==o&&"sp-search-bottom"!==o&&"sb-search-middle"!==o&&(h=null!==(x=null===S||void 0===S?void 0:S.exploreAll)&&void 0!==x?x:"");const A=(0,s.gk)(i,o);let L=r?"".concat(o,"~").concat(I).concat(h,"~").concat(r):"".concat(o,"~").concat(I).concat(h,"~");if(p&&u){const o=JSON.parse(u).interpretations[0],e="".concat(o.type,"-").concat(o.sub_type);L="".concat(L).concat(e),v&&(L+="~fs")}const{min:U,max:P}=(0,s.pC)(t,A,o,c);var N;const w=null!==(N=null===y||void 0===y||null===(m=y.location)||void 0===m?void 0:m.storeId)&&void 0!==N?N:t.storeId,E=(0,s.V6)(t),M=(0,s.jg)(t),{specificity:R,specificityScore:V}=(0,s.Hs)(t);return{ad:{adUid:n,cloud:d,items:A,min:U,max:P,moduleInfo:null!==l&&void 0!==l?l:"",moduleLocation:o,numAdsShown:A.length,p13nItemsShown:[],pageContext:M,pageId:f,pageNumber:"".concat("mosaic"===r?b:C),pageType:g,placementId:L,platform:I,storeId:w,taxonomy:E,specificity:R,specificityScore:V}}},I=function(o,e){let{moduleLocation:t,placementTitle:a,isFullySpcarouselSearch:d}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i,l,c,r,s,u,p;const I=(null===e||void 0===e||null===(i=e.adContent)||void 0===i?void 0:i.data)||{},f=null===e||void 0===e||null===(l=e.adContent)||void 0===l?void 0:l.model,{adUuid:g="",products:y=[],moduleInfo:C}=I;let S=t||v(o.pageType,(null===e||void 0===e||null===(c=e.moduleConfigs)||void 0===c?void 0:c.moduleLocation)||"top");const b="SponsoredVideos"===(null===e||void 0===e||null===(r=e.adContent)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.__typename)||"SponsoredVideos"===(null===e||void 0===e||null===(u=e.adContent)||void 0===u||null===(p=u.dataV1)||void 0===p?void 0:p.__typename);if(b){const o="sv".concat(S.slice(2));n.nB.includes(o)&&(S=o)}return m(S,{adsContext:o,adUid:g||"",products:null!==y&&void 0!==y?y:[],moduleInfo:C,carouselType:f,placementTitle:a,isFullySpcarouselSearch:d})},f=(o,e,t)=>{o.ad={...o.ad,eligible:e,pageViewUUID:t};return{context:u.IT,action:"ads",name:u.VG.ADS_ELIGIBILITY,payload:o}},g=(o,e,t,n,a,d,i)=>{const l=b(e,t,void 0,void 0,i),c="".concat(l.ad.placementId).concat(a);l.ad={...l.ad,placementId:c,eligible:o,pageViewUUID:n,lsi:d};return{context:u.IT,action:"ads",name:u.VG.ADS_ELIGIBILITY,payload:l}},y=(o,e,t,n,a,d,i)=>{var l,c;const r=t.placementTitle,s=t.platform,p=r?"".concat(o,"~").concat(s,"~").concat(r):"".concat(o,"~").concat(s);var v;const m=null!==(v=null===(l=t.pageMetadata)||void 0===l||null===(c=l.location)||void 0===c?void 0:c.storeId)&&void 0!==v?v:t.storeId,I={ad:{pageViewUUID:e,pageType:t.pageType,gicIntent:i?i.toLowerCase():null,platform:s,placementId:p,adUid:a||"",moduleLocation:o,storeId:m,moduleInfo:n,items:d?T(d):[],min:1,max:1}};return{context:u.IT,action:"ads",name:u.VG.ADS_ELIGIBILITY,payload:I}},C=(o,e,t,n,d,l,c)=>{const r={configs:{_rawConfigs:{moduleLocation:t.moduleLocation||"middle",lazy:t.lazy||"1000",adUuid:t.adUuid||""}},matchedTrigger:{zone:""},type:t.type||"SponsoredVideoAd"},p={data:{adUuid:t.adUuid}},v=(0,i.yS)(d,"SEARCH",{},e),m={adContent:p,adsContext:e,...(0,i.w0)(r,v)},I=S(e,t.moduleLocation||"middle",m,{isProductOnly:!1,isMobile:d}),f=(0,a.v)().spModularSearchAdEnable,g=(0,s.py)(e.pageType);let y=t.moduleInfo,C=I.ad.placementId;if(l&&f){const o=JSON.parse(l),e=o.interpretations[0],t="".concat(e.type,"-").concat(e.sub_type);C="".concat(C).concat(t),y=JSON.parse(JSON.stringify({modularModuleInfo:y,interpretations:o.interpretations,exact:o.exact}))}I.ad={...I.ad,moduleInfo:y,placementId:C,eligible:o,pageViewUUID:n,gicIntent:c?c.toLowerCase():null,...g&&{templateId:g}};return{context:u.IT,action:"ads",name:u.VG.ADS_ELIGIBILITY,payload:I}},S=(o,e,t,n,d,i)=>{var r,u,p,v;const I=(null===t||void 0===t||null===(r=t.adContent)||void 0===r?void 0:r.data)||(null===t||void 0===t||null===(u=t.adContent)||void 0===u?void 0:u.dataV1)||{},{adUuid:f="",videos:g=[],moduleInfo:y=""}=I,C=(null===g||void 0===g||null===(p=g[0])||void 0===p?void 0:p.products)||[],S=null===g||void 0===g||null===(v=g[0])||void 0===v?void 0:v.video,b="sv-".concat(o.pageType,"-").concat(e),h=(0,s.cb)(o),T=(0,a.v)().spModularSearchAdEnable,x=(0,s.py)(o.pageType);let A=y;if(i&&T)try{const o=JSON.parse(i);A=JSON.stringify({...JSON.parse(null!==y&&void 0!==y?y:"{}"),interpretations:o.interpretations,exact:o.exact})}catch(O){(0,c.cM)(["error","ads","beacon"],{type:"log",name:"ads-modular-parsing-sp-video",message:"failed to parse Modular search Interpretations for SpVideo"})}var L,U;const P=C[0]?C.map((o=>({usItemId:null!==(L=o.usItemId||o.id)&&void 0!==L?L:"",sponsoredProduct:null!==(U=o.sponsoredProduct)&&void 0!==U?U:null}))):[{usItemId:"",sponsoredProduct:null}],N=m(b,{adsContext:o,adUid:f||"",products:P,moduleInfo:A,modularMeta:i,isModularSearch:T}),w="1001~1~".concat((null===S||void 0===S?void 0:S.spqs)||""),E=N.ad.items||[],M=[],R=[],V=(0,l.z)(o,(0,a.v)());if(E.length>=1)if(V){const o=(null===n||void 0===n?void 0:n.usItemId)?E.filter((o=>o.split("~")[0]===(null===n||void 0===n?void 0:n.usItemId))):E;M.push(...o),R.push(w),R.push(...E)}else{const o=E[0].split("~");o[1]="2";const e=o.join("~");M.push(e),R.push(w),R.push(e)}return{...N,ad:{...N.ad,items:(null===n||void 0===n?void 0:n.isProductOnly)?M:R,adUid:f||"",moduleInfo:A,numAdsShown:M.length,numAdsAvailable:E.length,...h,...d,...x&&{templateId:x}}}},b=(o,e,t,n,d)=>{var i,l,c,u,p,v;const{spSbaDataV1Enable:m,bpSbaDataV1Enable:f,dpSbaDataV1Enable:g,spModularSearchAdEnable:y,SbaNumsAdShownFixEnable:C,spSbaNewBeaconAttributesEnable:S}=(0,a.v)();let b={};var h,T;m||f||g?b=null===e||void 0===e||null===(h=e.adContent)||void 0===h?void 0:h.dataV1:b=null===e||void 0===e||null===(T=e.adContent)||void 0===T?void 0:T.data;b||(b={});const x=(0,s.py)(o.pageType),{adUuid:A="",brands:L=[],moduleInfo:U=""}=b,P=(0,s.Zv)(U,n,y),N=(0,r.jg)(L),w=(0,r.$t)(L),{logoClickTrackUrl:E}=w,M=(0,s.gk)(N,d),R=(0,s.cb)(o),{specificity:V,specificityScore:O}=(0,s.Hs)(o),B="browse"===o.pageType?null===(i=o.pageMetadata)||void 0===i||null===(l=i.pageContext)||void 0===l||null===(c=l.browseContext)||void 0===c?void 0:c.verticalId:null===(u=o.pageMetadata)||void 0===u||null===(p=u.pageContext)||void 0===p||null===(v=p.searchNormalize)||void 0===v?void 0:v.verticalId;let _="";if(E){const o=new URL(E);_=new URLSearchParams(o.search).get("spQs")}M.length>0&&M.unshift("1001~1~".concat(_||""));const k=I(o,e,{moduleLocation:d});let D=M.length;return C&&M.length>1&&(D=M.length-1),{...k,ad:{...k.ad,items:M,adUid:A||"",moduleInfo:P,numAdsShown:D,...S&&!isNaN(t)&&{verticalId:B,placementId:"".concat(k.ad.placementId,"UXVar").concat(t)},specificity:V,specificityScore:O,...x&&{templateId:x},...R}}},h=(o,e,t,n,a)=>{if(!e)return o;const{adUuid:i,max:l,moduleInfo:c}=e,r=(0,d.D)(),u=(0,s.cb)(r);let p=o.ad.placementId,v=c;if(t&&n){const o=JSON.parse(n).interpretations[0];let e="".concat(o.type,"-").concat(o.sub_type);a&&(e="".concat(e,"~fs")),p="".concat(p).concat(e),v=(0,s.Zv)(v,n,t)}return{...o,ad:{...o.ad,max:l,moduleInfo:v,adUid:i,placementId:p,...u}}},T=o=>o.reduce(((o,e,t)=>{var n;e.sponsoredProduct&&o.push((0,s.qj)({usItemId:null!==(n=e.usItemId)&&void 0!==n?n:"",sponsoredProduct:e.sponsoredProduct},t));return o}),[]),x=o=>{let{adBeaconPayload:e,hasAds:t,items:n}=o;const a=T(n),i=(0,s.yG)(n,e.ad.moduleLocation),l=(0,d.D)(),c=(0,s.cb)(l);return{context:u.IT,action:u.om,name:t?u.VG.IMPRESSION:u.VG.NOT_AVAILABLE,payload:{...e,ad:{...e.ad,numAdsShown:a.length,items:a,p13nItemsShown:i,...c,brand:n.reduce(((o,e)=>(e.sponsoredProduct&&o.push(e.brand||""),o)),[]),sellerId:n.reduce(((o,e)=>(e.sponsoredProduct&&o.push(e.sellerId||""),o)),[])}}}},A=o=>{let{adBeaconPayload:e,item:t,index:n,items:a}=o;const i=(0,s.yG)(a,e.ad.moduleLocation),l=(0,d.D)(),c=(0,s.cb)(l);return t.sponsoredProduct?{context:u.IT,action:u.om,name:u.VG.IN_VIEW,payload:{...e,ad:{...e.ad,numAdsShown:1,p13nItemsShown:i,items:[(0,s.qj)({usItemId:null!==(r=t.usItemId)&&void 0!==r?r:"",sponsoredProduct:t.sponsoredProduct},n)],...c,brand:[(null===t||void 0===t?void 0:t.brand)||""],sellerId:[(null===t||void 0===t?void 0:t.sellerId)||""]}}}:null;var r},L=(o,e)=>{if(!Array.isArray(o)||0===o.length)return[];return o.filter((o=>o.key===e)).map((o=>{let{key:e,...t}=o;return t}))},U=(o,e,t,n,a)=>{const d=b(e,t);d.ad={...d.ad,eligible:o,moduleInfo:n,gicIntent:a};return{context:u.IT,action:"ads",name:u.VG.ADS_ELIGIBILITY,payload:d}}}}]);