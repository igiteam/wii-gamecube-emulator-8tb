"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92758],{822722:function(e,n,t){t.r(n),t.d(n,{closeBanner:function(){return u},closeDialog:function(){return L},defaultMessage:function(){return p},dialogTitle:function(){return a},dontRefresh:function(){return d},errorMessage:function(){return x},expired:function(){return V},hangOn:function(){return o},leave:function(){return g},leaveItem:function(){return v},leaveText:function(){return b},leaveTheLine:function(){return y},leaveTheLineText:function(){return m},leftToBuy:function(){return I},ok:function(){return f},otherItem:function(){return k},purchase:function(){return S},purchaseMultiple:function(){return j},purchaseSingle:function(){return M},purchaseTime:function(){return C},queueClosed:function(){return U},queueCtaText:function(){return s},queueDialog:function(){return E},queueItem:function(){return B},remove:function(){return N},snackbarExpiry:function(){return P},snackbarPending:function(){return q},snackbarValid:function(){return O},stayInLine:function(){return w},timerStartMessage:function(){return h},validItem:function(){return _},viewItem:function(){return c},wait:function(){return A},waitOver:function(){return F},warning:function(){return r},youAreInLine:function(){return T}});var i=t(806274),l=t(974630);const a=e=>"You're in line for "+e.queueTickets+" items",r=()=>"Warning",o=()=>"Hang on, we're getting you in line.",d=()=>"Please don't refresh or leave the line.",s=e=>i.Ys(e.isValid,{true:"Buy",other:"View"}),c=e=>"View the "+e.name,u=()=>"Close banner",m=()=>"Leave the line",x=()=>"Something went wrong. Please try again.",p=()=>"If you leave now, you'll lose your chance to purchase this item.",y=()=>"Leave the line?",f=()=>"Ok",w=()=>"Stay in line",g=()=>"Leave",v=e=>"Leave the line for "+e.name+" ",h=()=>"Complete your purchase before the timer ends.",E=e=>"Once it's your turn, you'll have "+e.queueTime+" minutes to complete your purchase.",L=()=>"Close dialog",b=()=>"Leave",S=()=>"to purchase",I=()=>"left to buy",A=()=>"estimated wait",N=()=>"Remove",V=()=>"Time expired",C=()=>"Less than 2 minutes to purchase",F=()=>"Whoo hoo- the wait is over!",j=()=>"Less than 2 minutes left for 1 or more items",M=()=>"Less than 2 minutes left for 1 item",k=e=>"You're in line for "+e.count+" other "+i.Ho(e.count,0,l.en,{"1":"item",other:"items"}),B=e=>"You're in line for "+e.queueTickets+" "+i.Ho(e.queueTickets,0,l.en,{"1":"item",other:"items"}),_=e=>e.validTickets+" "+i.Ho(e.validTickets,0,l.en,{"1":"item is",other:"items are"})+" ready to buy.",T=()=>"You're in line",P=e=>"Hurry! Less than 2 minutes left to check out for "+e.itemName,O=e=>"Woohoo - the wait is over for "+e.itemName,q=e=>"You just joined the line for "+e.itemName,U=e=>"Thank you for your patience\u2014the line for "+e.itemName+" is now closed. We appreciate your interest and encourage you to shop with us at future events!"},216299:function(e,n,t){t.d(n,{UI:function(){return r},di:function(){return s},q0:function(){return a},sY:function(){return o},xI:function(){return d}});var i=t(451575),l=t(941995);const a=(e,n,t)=>{var a;return{context:t,action:"onClick",name:"leaveLine",payload:{nm:{nm:"leaveLine"},li:{nm:"leaveLine"},ta:n?{ov:"lineDetails"}:{mn:"reservationTimer"},pr:{us:e.customMetadata.item.itemID,qp:(0,l.H)(null===e||void 0===e||null===(a=e.customMetadata)||void 0===a?void 0:a.admissionLikelihood),wt:"pending"===e.state||"paused"===e.state?1e3*(0,i.ok)(e.expectedTurnTimeUnixTimestamp):1e3*(0,i.ok)(e.expires)}}}},r=(e,n,t)=>{var a;return{context:t,action:"onClick",name:"viewItem",payload:{nm:{nm:"viewItem"},li:{nm:"viewItem"},ta:n?{ov:"lineDetails"}:{mn:"queueIt"},pr:{us:e.customMetadata.item.itemID,qp:(0,l.H)(null===e||void 0===e||null===(a=e.customMetadata)||void 0===a?void 0:a.admissionLikelihood),wt:"pending"===e.state||"paused"===e.state?1e3*(0,i.ok)(e.expectedTurnTimeUnixTimestamp):1e3*(0,i.ok)(e.expires)}}}},o=e=>({context:e,action:"onClick",name:"dismiss",payload:{nm:{nm:"dismiss"},li:{nm:"dismiss"},ta:{ov:"lineDetails"}}}),d=e=>({context:e||"queueing",action:"onClick",name:"stayInLine",payload:{nm:{nm:"stayInLine"},li:{nm:"stayInLine"},ta:{ov:"leaveLineConfirm",pt:e||"waitingRoom"}}}),s=e=>({context:e||"queueing",action:"onClick",name:"dismiss",payload:{nm:{nm:"dismiss"},li:{nm:"dismiss"},ta:{ov:"leaveLineConfirm",pt:e||"waitingRoom"}}})},611459:function(e,n,t){t.d(n,{i:function(){return m}});var i=t(293168),l=t(297693),a=t(362484),r=t(141819),o=t(558403),d=t(342040),s=t(194742),c=t(216299),u=t(135653);const m=()=>{var e;const n=null===(e=(0,i.iC)(r.YL).shared.values)||void 0===e?void 0:e.enableQueueSizeIncrease,{pageTitle:t}=(0,s.useContext)(a.z1),{0:m,1:x}=(0,s.useState)(!1),{0:p,1:y}=(0,s.useState)(null),{0:f,1:w}=(0,s.useState)(!1),{queueError:g,queueData:v,removeTicketByQueueValue:h,activeTicketsByExpiryTime:E,isErrorInQueueTickets:L,displayedQueueTicket:b}=(0,o.B)(),S=(0,l.wG)(),I=Boolean(g)||L,A=(e,n)=>{"error"!==e.state&&S((0,c.q0)(e,n,t)),y(e)},N=()=>{S((0,c.di)(t)),y(null)},[V,{status:C}]=(0,d.p)({onSuccess:(e,n)=>{h(n),N()},onError:()=>{w(!0)}}),F=()=>x(!0),j={isError:f,isLeaveDialogueLoading:"loading"===C,onDismissError:()=>w(!1),queueError:g,onConfirmLeaveQueue:async e=>{await V(e.queue)},onCloseLeaveQueue:N,onStayInLine:()=>{S((0,c.xI)(t)),y(null)},onOpenLeaveQueueDialog:A,onCloseQueueDialog:()=>{S((0,c.sY)(t)),x(!1)},displayedQueueTicket:b,queueTickets:E,queueData:v,isQueueDialogOpen:m,ticketToLeave:p,shouldRenderError:I};return b?{...j,...(0,u.Z)(b,{onOpenLeaveQueueDialog:A},t),footerProps:(0,u.u)(n,E,{onOpenQueueDialog:F})}:j}},922489:function(e,n,t){t.d(n,{Z:function(){return T}});var i=t(487954),l=t(764766),a=t(221910),r=t(620769),o=t.n(r),d=t(194742),s=t(976481),c=t(155394),u=t(425443),m=t(297693),x=t(362484),p=t(438989),y=t(976973),f=t(451575),w=t(941995),g=t(135653),v=t(611459);const h=(e,n)=>{const t=(0,g.Z)(e,{onOpenLeaveQueueDialog:n},""),{timerProps:i}=t,{name:l}=e.customMetadata.item;if(i){const e=i.endTime&&(0,f.ok)(i.endTime.getTime());return void 0===e?{valid:!1,alert:!1,message:"",timeRemaining:0,name:""}:"valid"===i.ticketState&&0===e?{valid:!0,alert:!0,message:"Time Expired to buy \" ".concat(l),timeRemaining:e,name:l}:e&&"valid"===i.ticketState&&e<300?{valid:!0,alert:!1,message:"".concat(E(e)," left to buy ").concat(l),timeRemaining:e,name:l}:e&&"valid"===i.ticketState&&300===e?{valid:!0,alert:!0,message:"".concat(E(e)," left to buy ").concat(l),timeRemaining:e,name:l}:{valid:!1,alert:!1,message:"",timeRemaining:0,name:l}}return{valid:!1,alert:!1,message:"",timeRemaining:0,name:""}},E=e=>{const n=Math.floor(e/60),t=e%60;return n>=1?"".concat(n,":").concat(t.toString().padStart(2,"0")," minutes"):"".concat(t," seconds")};var L=t(682081),b=t(444002),S=t(822722);const I=e=>{let{onClose:n,titleId:t,title:l}=e;return(0,i.jsxs)("div",{className:"white items-center flex flex-row-reverse justify-between ph4 pv3",children:[(0,i.jsx)("button",{"aria-label":(0,L.m)(S,"closeDialog"),className:"bg-dark-blue pa0 white bn pointer h1",onClick:n,"data-dca-id":"B:A8074388A8","data-dca-intent":"__DCA_TBD__",children:(0,i.jsx)(b.J,{name:"Close",size:"medium"})}),(0,i.jsx)("h2",{id:t,className:"f3 mv0",children:l})]})};var A=t(327650),N=t(200421);const V=(0,L.m)(S,"errorMessage"),C=(0,L.m)(S,"defaultMessage"),F=e=>{let{isError:n,isLeaveDialogueLoading:t,isOpen:l,onClose:a,onStayInLine:r,onDismissError:o,onLeaveQueue:s}=e;const{pageTitle:c}=(0,d.useContext)(x.z1),u=(0,m.wG)();return(0,d.useEffect)(()=>{l&&u({context:c||"queueing",action:"overlayView",name:"leaveLineConfirm",payload:{nm:{nm:"leaveLineConfirm"},ta:{ov:"leaveLineConfirm",pt:c||"waitingRoom"}}})},[l,u,c]),(0,i.jsx)(p.Z,{children:(0,i.jsx)(y.Z,{title:(0,L.m)(S,"leaveTheLine"),isOpen:l,onClose:a,size:"small",actions:n?(0,i.jsx)("div",{className:"flex flex-column flex-row-reverse-m w-100 w-auto-m",children:(0,i.jsx)(N.Z,{className:"mt4 pv0 f6-m pv2-m mt0-m",onClick:o,variant:"primary","data-dca-id":"B:B6B587A8F4","data-dca-intent":"__DCA_TBD__",children:(0,L.m)(S,"ok")})}):(0,i.jsx)("div",{className:"flex flex-column flex-row-reverse-m w-100 w-auto-m",children:t?(0,i.jsx)(A.N,{color:"neutral",size:"small",UNSAFE_className:"tc"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.Z,{variant:"primary",isFullWidth:!0,onClick:r,className:"f6-m","data-dca-id":"B:4F7AE81C7D","data-dca-intent":"__DCA_TBD__",children:(0,L.m)(S,"stayInLine")}),(0,i.jsx)(N.Z,{className:"mt4 pv0 f6-m pv2-m mt0-m",isFullWidth:!0,onClick:s,variant:"tertiary","data-dca-id":"B:5091277383","data-dca-intent":"__DCA_TBD__",children:(0,L.m)(S,"leave")})]})}),children:(0,i.jsx)("p",{className:"mv0 dark-gray tc f6 f5-m tl-m lh-copy",children:n?V:C})})})};F.DEFAULT_MESSAGE=C,F.ERROR_MESSAGE=V;var j=t(408694),M=t(995433);var k=t(84529);const B=e=>{let{className:n,children:t,float:r,isQueueDialogOpen:d}=e;const s=(0,a.M)(),{asPath:c}=(0,l.tv)().router,u=c.includes("/cart"),m=c.includes("/checkout"),x=r?_(s,c,d?"hidden":"visible",n):{className:o()("bg-dark-blue white",{"br3 br--top":!s&&(u||m),"nl3 nr3":!u&&!m},n),style:{padding:"1px",marginBottom:s?"18px":"inherit"}};return(0,i.jsx)("div",{...x,"data-testid":"queue-banner",children:t})},_=(e,n,t,i)=>{const l="fixed z-1 bg-dark-blue",a=n.includes("/ip");return e?{className:o()(l,"w-100 left-0 right-0",i),style:{bottom:a?"72px":"0",visibility:t}}:{className:o()(l,"br2 overflow-hidden shadow-3",i),style:{bottom:"24px",left:"24px",width:"400px",visibility:t}}};B.Body=e=>{let{children:n,isQueueDialog:t,onClick:a,text:r,queueTicket:d,className:s}=e;const{isMobile:c}=(0,u.vP)(),{asPath:m}=(0,l.tv)().router,x=m.includes("/cart"),p=m.includes("/checkout");return(0,i.jsxs)("div",{"data-testid":"queue-body",className:o()("flex",x||p?"bg-transparent":"bg-white br2 shadow-2",t?"mb3 pa3 br3 flex-column":"ma2 items-center",s),children:[n,a&&(!p||p&&c)&&(r?(0,i.jsx)(N.Z,{className:o()("h2",{"ml-auto":!t,"w-20 mb3 nt4 ml2":t}),onClick:a,variant:"tertiary","aria-label":(null===d||void 0===d?void 0:d.customMetadata.item.name)?(0,L.m)(S,"leaveItem",{name:null===d||void 0===d?void 0:d.customMetadata.item.name}):r,"data-dca-id":"B:F4E721513D","data-dca-intent":"__DCA_TBD__",children:t?(0,L.m)(S,"leaveTheLineText"):r}):(0,i.jsx)(N.Z,{"aria-label":(0,L.m)(S,"closeBanner"),className:o()("bg-transparent bn h2 pb0 pointer pt0 self-center w3 ml-auto grey"),onClick:a,type:"button",useLDButton:!1,"data-dca-id":"B:C22A77EBD3","data-dca-intent":"__DCA_TBD__",children:(0,i.jsx)(b.J,{className:"v-btm",name:"Close"})}))]})},B.Cta=e=>{let{onClick:n,isQueueDialog:t,queueTicket:l,className:a}=e;var r,d,s,c;const u="valid"===(null===l||void 0===l?void 0:l.state),m=u?null===l||void 0===l||null===(r=l.customMetadata)||void 0===r||null===(d=r.viewItemCtaLabel)||void 0===d?void 0:d.valid:null===l||void 0===l||null===(s=l.customMetadata)||void 0===s||null===(c=s.viewItemCtaLabel)||void 0===c?void 0:c.pending;return(0,i.jsx)(N.Z,{className:o()("".concat(t&&"flex self-end"),a),onClick:n,size:"small",variant:"".concat(t?"secondary":"tertiary"),"aria-label":(0,L.m)(S,"viewItem",{name:null===l||void 0===l?void 0:l.customMetadata.item.name}),"data-dca-id":"B:EAD14EF243","data-dca-intent":"__DCA_TBD__",children:m||(0,L.m)(S,"queueCtaText",{isValid:u})})},B.Image=e=>{let{className:n,isQueueDialog:t,isQueueFooterOpen:l,src:a,height:r,width:d,name:s}=e;const{isMobile:c}=(0,u.vP)(),{imageHeight:m,imageWidth:x}={imageHeight:(p={src:a,height:r,width:d}).height||40,imageWidth:p.width||40};var p;const y=(0,j.P)({src:a,height:m.toString(),width:x.toString()});return(0,i.jsx)("div",{className:o()("br2 overflow-hidden",{mr2:t},n),style:{maxWidth:x,maxHeight:m},children:(0,i.jsx)(M.Z,{alt:s,"data-testid":"queue-product-image",preload:!0,loading:"eager",src:y,srcSet:"".concat(y," 1x, ").concat(y," 2x"),height:"auto",width:"auto"})})},B.Dialog=e=>{let{children:n,isOpen:t,onClose:l,title:a,queueTickets:r}=e;const{pageTitle:o}=(0,d.useContext)(x.z1),{isMobile:g}=(0,u.vP)(),E=(0,m.wG)(),{TimerAnnouce:L}=(e=>{const{onOpenLeaveQueueDialog:n}=(0,v.i)(),t=e.map(e=>h(e,n)).filter(e=>e.valid).sort((e,n)=>e.timeRemaining-n.timeRemaining);return{TimerAnnouce:()=>{return 1===t.length?{alert:t[0].alert,message:t[0].message}:t.length>1?{alert:t[0].alert,message:"".concat(t[0].message,", ").concat((e=t.length-1,"".concat(e,1===e?" other item":" other items"))," will expire in less than 5 mins.")}:{alert:!1,message:""};var e}}})(r),{alert:b,message:S}=L();(0,d.useEffect)(()=>{if(t){const e=null===r||void 0===r?void 0:r.map(e=>{var n,t,i;return{us:null===e||void 0===e||null===(n=e.customMetadata)||void 0===n||null===(t=n.item)||void 0===t?void 0:t.itemID,qp:(0,w.H)(null===e||void 0===e||null===(i=e.customMetadata)||void 0===i?void 0:i.admissionLikelihood),wt:"pending"===e.state||"paused"===e.state?1e3*(0,f.ok)(null===e||void 0===e?void 0:e.expectedTurnTimeUnixTimestamp):1e3*(0,f.ok)(null===e||void 0===e?void 0:e.expires)}});E({context:o,action:"overlayView",name:"lineDetails",payload:{nm:{nm:"lineDetails"},pr:e}})}},[t,r,o,E]),(0,d.useEffect)(()=>{t&&setTimeout(()=>{const e=document.querySelector(".item-queue-bg div[role=\"dialog\"]");e&&e.classList.add("bg-dark-blue","scrollbar-queue-panel")},50)},[t]);const A=b?(0,i.jsx)(c.VisuallyHidden,{role:"alert","aria-live":"assertive",children:S}):(0,i.jsx)(c.VisuallyHidden,{"aria-live":"off",children:S});return(0,i.jsx)(p.Z,{children:(0,i.jsx)(y.Z,{closeButtonProps:{UNSAFE_className:"white"},title:g?(0,i.jsxs)(i.Fragment,{children:[A,(0,i.jsx)("span",{className:"white",children:a})]}):e=>{let{titleId:n}=e;return(0,i.jsxs)(i.Fragment,{children:[A,(0,i.jsx)(I,{title:a,onClose:l,titleId:n}),(0,i.jsx)(s.x,{})]})},isOpen:t,onClose:l,position:"right",desktopComponent:"panel",size:"medium",className:"item-queue-bg",children:n})})},B.Error=()=>(0,i.jsxs)("div",{className:"flex ma3 mv5-m","data-testid":"queue-error-banner",children:[(0,i.jsx)(b.J,{name:"Warning",size:"small",className:"gold mr2"}),(0,i.jsx)("p",{className:"f6 ma0 white lh-copy",children:"".concat((0,L.m)(S,"hangOn")," ").concat((0,L.m)(S,"dontRefresh"))})]}),B.LeaveQueueDialog=F,B.Footer=e=>{let{message:n,onClick:t}=e;return(0,i.jsx)("div",{className:"flex white items-start f6 justify-between items-center b--white ma2","data-testid":"queue-banner-footer",children:t&&(0,i.jsxs)(N.Z,{"aria-label":n,className:"white no-underline pr0 h1 justify-between w-100 pl0",onClick:t,variant:"tertiary",UNSAFE_style:{color:"white"},"data-dca-id":"B:0D1010C3C5","data-dca-intent":"__DCA_TBD__",children:[(0,i.jsx)("span",{children:n}),(0,i.jsx)(b.J,{name:"ChevronRight",size:"small"})]})})},B.Timer=e=>{const{asPath:n}=(0,l.tv)().router,t=n.includes("/ip"),a=n.includes("/cart"),r=n.includes("/checkout");return(0,i.jsx)("div",{className:"".concat((t||a||r)&&"ml2"),children:(0,i.jsx)(k.w,{...e})})},B.TimerMessage=e=>{let{className:n,isQueueDialog:t,message:a}=e;const{asPath:r}=(0,l.tv)().router,d=r.includes("/cart"),s=r.includes("/checkout");return(0,i.jsx)("p",{className:o()("f6 ml2",{black:!t,ma0:t,white:d||s},n),children:a})};var T=B},135653:function(e,n,t){t.d(n,{Z:function(){return o},u:function(){return d}});var i=t(682081),l=t(86758),a=t(822722),r=t(216299);const o=(e,n,t)=>{let{onOpenLeaveQueueDialog:o}=n;return"valid"===e.state?{leaveQueueProps:{text:(0,i.m)(a,"leaveText"),onClick:o},timerProps:{endTime:s(e.expires),message:(0,i.m)(a,"leftToBuy"),ticketState:e.state},ctaProps:{onClick:(n,i,l)=>()=>{i((0,r.UI)(e,l,t)),n(e.customMetadata.item.itemURL)}}}:"pending"===e.state||"paused"===e.state?{leaveQueueProps:{text:(0,i.m)(a,"leaveText"),onClick:o},timerProps:{endTime:s(e.expectedTurnTimeUnixTimestamp),message:(0,i.m)(a,"wait"),ticketState:e.state},ctaProps:{onClick:(n,i,a)=>()=>{i((0,r.UI)(e,a,t)),n((0,l.$)(e))}}}:"error"===e.state&&"TICKET_EXPIRED"===e.errorCode?{leaveQueueProps:{text:(0,i.m)(a,"remove"),onClick:o},timerProps:{message:(0,i.m)(a,"expired"),ticketState:e.state}}:{}},d=(e,n,t)=>{let{onOpenQueueDialog:l}=t;const r=n.length,o=n.filter(e=>"valid"===e.state).length,d=(0,i.m)(a,"queueItem",{queueTickets:r}),s=(0,i.m)(a,"validItem",{validTickets:o});if(!(r<2)){if(e)return{message:"".concat(d).concat(o>0?". ".concat(s):""),onClick:l};{const e=r-1;return{message:(0,i.m)(a,"otherItem",{count:e}),onClick:l}}}},s=e=>new Date(e)},342040:function(e,n,t){t.d(n,{p:function(){return s}});var i=t(297693),l=t(362484),a=t(179404),r=t(784289),o=t(194742),d=t(897463);const s=e=>{const{pageTitle:n}=(0,o.useContext)(l.z1),t=(0,a.Z)(),s=(0,i.wG)(),c=null===e||void 0===e?void 0:e.onSuccess,u=null===e||void 0===e?void 0:e.onError;return(0,r.D)(e=>(0,d.Ch)(t,"discardTicket",e),{onSuccess:(e,t,i)=>{s({context:n||"queueing",action:"onClick",name:"leaveLine",payload:{nm:{nm:"leaveLine"},li:{nm:"leaveLine"},ta:{ov:"leaveLineConfirm",pt:n||"waitingRoom"}}}),null===c||void 0===c||c(e,t,i)},onError:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s({context:n||"queueing",action:"onClick",name:"leaveLine",payload:{nm:{nm:"error"},li:{nm:"leaveLine"},ta:{ov:"leaveLineConfirm",pt:n||"waitingRoom"}}}),null===u||void 0===u||u(...t)}})}},558403:function(e,n,t){t.d(n,{B:function(){return a}});var i=t(194742),l=t(175995);const a=()=>{const{error:e,itemQueueData:n,setItemQueueData:t,...a}=(()=>{const e=(0,i.useContext)(l.e);if(!e)throw new Error("useQueueContext must be used within ItemQueueContextProvider");return e})(),r=(0,i.useCallback)(e=>{Array.isArray(e)?null===t||void 0===t||t(e):null===t||void 0===t||t([...n,e])},[n,t]),o=(0,i.useCallback)(e=>{const t=n.filter(n=>n.queue!==e);r(t)},[n,r]);return{...a,queueData:n,queueError:e,removeTicketByQueueValue:o,setQueueData:t,updateQueueData:r}}},941995:function(e,n,t){t.d(n,{H:function(){return i}});const i=e=>"guaranteed"===e?"1":"likely"===e?"2":"3"}}]);