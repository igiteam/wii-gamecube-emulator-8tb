"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61302],{327536:function(e,n,t){t.r(n),t.d(n,{asSoonAs:function(){return ae},checkoutBy:function(){return S},decouplingEvergreenDeliverySla:function(){return J},decouplingEvergreenDeliverySlaMobile:function(){return ee},decouplingExpressDeliverySla:function(){return ne},decouplingExpressDeliverySlaMobile:function(){return te},decouplingExpressStaticRange:function(){return Q},decouplingFastDeliverySla:function(){return le},decouplingInHomeTitle:function(){return q},droneDeliveryReservation:function(){return oe},evergreenDeliverySla:function(){return p},express:function(){return $},expressDelivery:function(){return u},expressDeliverySla:function(){return x},expressDeliverySlaHot:function(){return F},expressDiscount:function(){return L},expressPickup:function(){return K},expressRebrandedStaticRange:function(){return re},expressReservationStaticRange:function(){return Y},expressStaticRange:function(){return X},fastDeliverySla:function(){return de},fastIn:function(){return ie},formattedTime:function(){return U},freeDeliveryRsvnRedesign:function(){return H},freeDeliveryRsvnTitle:function(){return I},freeExpress:function(){return V},freeExpressDelivery:function(){return b},freePickupDelivery:function(){return v},freeWalmartPlusDelivery:function(){return g},holdReservation:function(){return P},holdReservationUntil:function(){return O},hotEvergreenDeliverySla:function(){return R},hotExpressDelivery:function(){return k},hotFreeDeliveryRsvnTitle:function(){return D},hotInHomeReservationTitle:function(){return _},hrOrLess:function(){return o},inHome:function(){return z},inHomeReservationTitle:function(){return E},inHomeRsvnTitleRedesign:function(){return W},minsOrLess:function(){return s},nearAddress:function(){return B},nextWeeklyDelivery:function(){return C},nextWeeklyPickup:function(){return M},pickUpAndDelivery:function(){return m},pickupDelivery:function(){return G},regularReservationTitle:function(){return f},regularRsvnTitleHot:function(){return Z},regularRsvnTitleRedesign:function(){return T},reservationExpired:function(){return j},slotDayLabel:function(){return A},today:function(){return c},tomorrow:function(){return y},unschdReservationTitle:function(){return h},wPlusWithInHome:function(){return N},weeklyNoReservation:function(){return w}});var i=t(806274),l=t(974630);const r=function(){var e=new Intl.DateTimeFormat("en-US",{hour:"numeric",hourCycle:"h12"});return function(n){return e.format(n)}}(),d=function(){var e=new Intl.DateTimeFormat("es-US",{hour:"numeric",hourCycle:"h12"});return function(n){return e.format(n)}}(),a=function(){var e=new Intl.DateTimeFormat("fr-CA",{hour:"numeric",hourCycle:"h23"});return function(n){return e.format(n)}}();const o=e=>e.hours+" hr or less",s=e=>e.minutes+" min or less",c=()=>"today",m=()=>"Reserve pickup or delivery",u=()=>"Express delivery in 2 hr or less",x=e=>"Express delivery in "+e.sla+" "+i.Ys(e.unit,{hour:"hr",minute:"min",other:""})+" or less",p=e=>i.Ys(e.slotType,{PICKUP:"Pickup",DELIVERY:"Delivery",other:""})+" in "+e.sla+" "+i.Ys(e.unit,{hour:"hr",minute:"min",other:""})+" or less",y=()=>"tomorrow",f=e=>i.Ys(e.slotType,{PICKUP:"Pickup",DELIVERY:"Delivery",other:""})+" "+e.day+", "+e.timeWindow,h=e=>i.Ys(e.slotType,{PICKUP:"Pickup",DELIVERY:"Delivery",other:""})+" "+e.day+" after "+e.time,E=e=>"InHome delivery "+e.day+", "+e.timeWindow,I=e=>"Free delivery "+e.day+", "+e.timeWindow,w=()=>"Reserve a pickup or delivery",g=()=>"Free delivery with Walmart+",b=()=>"Enjoy Express delivery free with W+ for a limited time",v=()=>"Reserve free pickup or delivery",N=()=>"Walmart+ with InHome",S=()=>"Check out by",L=()=>"For a limited time Members get $5 off Express Delivery!",V=()=>"For a limited time Members get a free Express Delivery",j=()=>"Your reservation has expired",P=()=>"We'll hold this reservation",O=()=>"We'll hold this reservation until",C=e=>"Your next delivery to "+e.addressLineOne+" is "+e.date,M=e=>"Next pickup at "+e.accessPointName+" is "+e.date,B=e=>"Near "+e.city+", "+e.state+" "+e.zipCode,A=e=>e.month+"/"+e.day,k=()=>"in 2 hr or less",F=e=>"in "+e.sla+" "+i.Ys(e.unit,{hour:"hr",minute:"min",other:""})+" or less",_=e=>e.day+", "+e.timeWindow,R=e=>e.day+", "+e.sla+" "+i.Ys(e.unit,{hour:"hr",minute:"min",other:""})+" or less",D=e=>e.day+", "+e.timeWindow,T=e=>i.Ys(e.slotType,{PICKUP:"Pickup",DELIVERY:"Delivery",other:""})+" "+e.day,U=e=>r(e.timeLabel),W=e=>"InHome delivery "+e.day,H=e=>"Free delivery "+e.day,X=e=>e.minimumSla+"-"+e.slaInMins+" min",Y=e=>"Express delivery in "+e.minimumSla+"-"+e.slaInMins+" min",K=e=>"Express pickup "+e.day+", "+e.timeWindow,G=e=>i.Ys(e.slotType,{PICKUP:"Pickup",DELIVERY:"Delivery",other:""}),z=()=>"InHome",q=e=>"InHome "+e.day,$=()=>"Express",Z=e=>e.day+", "+e.timeWindow,Q=e=>e.minimumSla+"-"+e.slaInMins+" "+i.Ys(e.isMobile,{true:"mins",other:"minutes"}),J=e=>e.sla+" "+i.Ys(e.unit,{hour:i.Ho(e.sla,0,l.en,{one:"hour",other:"hours"}),minute:i.Ho(e.sla,0,l.en,{one:"minute",other:"minutes"}),other:""})+" or less",ee=e=>e.sla+" "+i.Ys(e.unit,{hour:i.Ho(e.sla,0,l.en,{one:"hr",other:"hrs"}),minute:i.Ho(e.sla,0,l.en,{one:"min",other:"mins"}),other:""})+" or less",ne=e=>"Express "+e.sla+" "+i.Ys(e.unit,{hour:i.Ho(e.sla,0,l.en,{one:"hour",other:"hours"}),minute:i.Ho(e.sla,0,l.en,{one:"minute",other:"minutes"}),other:""})+" or less",te=e=>e.sla+" "+i.Ys(e.unit,{hour:i.Ho(e.sla,0,l.en,{one:"hr",other:"hrs"}),minute:i.Ho(e.sla,0,l.en,{one:"min",other:"mins"}),other:""})+" or less",ie=()=>"Fast in",le=e=>"Fast in "+e.sla+" "+i.Ys(e.unit,{hour:i.Ho(e.sla,0,l.en,{one:"hour",other:"hours"}),minute:i.Ho(e.sla,0,l.en,{one:"minute",other:"minutes"}),other:""})+" or less",re=e=>"Express Delivery in "+e.minimumSla+"-"+e.slaInMins+" min",de=e=>i.Ys(e.slotType,{PICKUP:"Pickup",DELIVERY:"Fast Delivery",other:""})+" in "+e.sla+" "+i.Ys(e.unit,{hour:"hr",minute:"min",other:""})+" or less",ae=e=>"As soon as "+e.slaInMins+" mins",oe=e=>"Drone delivery in as soon as "+e.slaInMins+" mins"},294606:function(e,n,t){t.d(n,{rJ:function(){return r}});t(487954);var i=t(194742);const l=(0,i.createContext)({}),r=()=>(0,i.useContext)(l)},187327:function(e,n,t){t.d(n,{IX:function(){return i},Ot:function(){return d},bM:function(){return a},oZ:function(){return l}});const i="00000000-0000-0000-0000-000000000000";var l,r,d;!function(e){e.CXO_BST_DEFAULT="CXO_BST_DEFAULT",e.CXO_BST_EXPRESS_DEFAULT="CXO_BST_EXPRESS_DEFAULT",e.CXO_BST_EVERGREEN="CXO_BST_EVERGREEN",e.CXO_BST_EXPRESS="CXO_BST_EXPRESS",e.CXO_BST_REGULAR="CXO_BST_REGULAR",e.CXO_BST_UNSCHEDULED="CXO_BST_UNSCHEDULED",e.CXO_BST_INHOME_DELIVERY="CXO_BST_INHOME_DELIVERY",e.CXO_BST_FREE_DELIVERY="CXO_BST_FREE_DELIVERY",e.CXO_BST_RESERVE_PICK_DEL="CXO_BST_RESERVE_PICK_DEL",e.CXO_BST_WKLY_NO_RES="CXO_BST_WKLY_NO_RES",e.CXO_BST_WPLUS_FREE_DEL="CXO_BST_WPLUS_FREE_DEL",e.CXO_BST_WPLUS_EXPRESS="CXO_BST_WPLUS_EXPRESS",e.CXO_BST_WPLUS_FREE="CXO_BST_WPLUS_FREE",e.CXO_BST_WPLUS_INHOME="CXO_BST_WPLUS_INHOME"}(l||(l={})),function(e){e.CXO_BSST_POP_SPOKE="CXO_BSST_POP_SPOKE",e.CXO_BSST_INSTORE_PICKUP="CXO_BSST_INSTORE_PICKUP",e.CXO_BSST_DELIVERY="CXO_BSST_DELIVERY",e.CXO_BSST_WEEKLY_DELIVERY="CXO_BSST_WEEKLY_DELIVERY",e.CXO_BSST_WEEKLY_PICKUP="CXO_BSST_WEEKLY_PICKUP",e.CXO_BSST_RESERVATION_NEAR="CXO_BSST_RESERVATION_NEAR",e.CXO_BSST_WPLUS_DELIVERY="CXO_BSST_WPLUS_DELIVERY"}(r||(r={})),function(e){e.CXO_BSET_CHECKOUT_BY="CXO_BSET_CHECKOUT_BY",e.CXO_BSET_EXPRESS_DISCOUNT="CXO_BSET_EXPRESS_DISCOUNT",e.CXO_BSET_EXPRESS_FREE="CXO_BSET_EXPRESS_FREE",e.CXO_BSET_RESERVATION_EXPD="CXO_BSET_RESERVATION_EXPD",e.CXO_BSET_RES_UNSCHD="CXO_BSET_RES_UNSCHD",e.CXO_BSET_RESERVATION_SLA="CXO_BSET_RESERVATION_SLA"}(d||(d={}));const a=[{id:"",nodeAccessType:"DELIVERY_ADDRESS",fulfillmentType:"DELIVERY",cartFulfillmentOption:"DELIVERY",address:{addressLineOne:"",addressLineTwo:null,city:"",state:"",postalCode:""},timeZone:"UTC",displayName:"",assortmentStoreId:"",isExpressEligible:null}]},300621:function(e,n,t){t.d(n,{s:function(){return p}});var i=t(91440),l=t(686261),r=t(224750),d=t(573922),a=t(674560),o=t(293168),s=t(141819),c=t(194742),m=t(187327),u=t(296383),x=t(986046);const p=e=>{let{cartFulfillmentOption:n,reservation:t,customQueryKey:p,maxAvailableSlotsCount:y,requestSource:f,fulfillmentOptionParam:h,queryFulfillment:E,initialCartId:I,startDate:w,isInstallWithLazyCartId:g,paginationInput:b,subscriptions:v,variant:N,mpDeliverySlots:S,programId:L,serviceType:V,droneDeliveryEligible:j}=e;var P;const O=(0,i.Dv)(),C=(0,o.iC)(u.Vq,s.YL,l.Tg),{enableExpressSla:M,enableWalmartPlusFreeDiscountedExpress:B,enableLawnAndGarden:A,enableHolidayFreeExpressDelivery:k,enablePetRxManualRefill:F,enableItemLevelCheckout:_,enablePreferredStore:R,enableExpressUnavailableInShortcuts:D,enableOnDemandShifting:T,enableHolidayFreeExpressDeliveryOptIn:U,enableFedBenefitOnSignup:W,enableDynamicExpressSlotType:H,enableDroneDeliveryPhase3:X,enableDroneDeliveryPhase3Dec:Y,enableOffPeakHoursDelivery:K,enableSparkStore:G,enableGICBookslot:z,enableCustomizableItemsPhase1:q}=C.shared.values||{},{enableDeliveryAddressFromSlotData:$,enableCartFulfillmentOption:Z,enablePassCartIdAcidCheck:Q,enableFulfillmentOptionURLParam:J,enableMultipleInhomeAddresses:ee,enableInstaCartSlots:ne,enableAccSlotExpansion:te,enableColdChainExpansion:ie,enableTempoBookslotSlotPromotionBanner:le,enableExpress6amBanner:re,enableMemberInfoFromCartCustomerContext:de}=C.bookslot.values||{},{enableVisionItems:ae,enableFulfillmentMajorAppliances:oe,enableFIGCartFulfillmentOption:se,enableBYOD:ce,enablePromiseDateRange:me}=C.cart.values||{},ue=(0,x.m)();let xe=(0,i.cF)();"ACC_SERVICE"===n||"SUBSCRIPTION"===N?xe=I:(Q&&ue||g)&&(xe=m.IX);let pe=(0,i.EN)();Y&&j&&((null===pe||void 0===pe?void 0:pe.includes("DRONE_DELIVERY"))||(pe=[...(pe||[]),"DRONE_DELIVERY"]));const ye={"x-o-in-home-slots":"true",...(Z?{"x-o-default-slot-intent":"true"}:{})},fe=(0,i.dt)(),he="INSTALL"===n||"ACC_SERVICE"===n,Ee="WIRELESS_SERVICE"===n,Ie=he||Ee?"PICKUP":n,{router:we}=(0,a.g4)(),ge=null===(P=we.query)||void 0===P?void 0:P.ffGroupId,be=(0,r.Er)(se||!1,he?"AutoCareCenter":ge,"SCGroup"),ve=null===be||void 0===be?void 0:be.cartFulfillmentOption,Ne=(e=>{let{reservation:n,cartFulfillmentOption:t,enableFulfillmentOptionURLParam:i,fulfillmentOptionParam:l,isBookslotFulfillmentOptionChanged:r,requestSource:d,enableCartFulfillmentOption:a,enableFIGCartFulfillmentOption:o,cartFIGFulfillmentOption:s,enableGICBookslot:c}=e,m=t;return!o||c&&"GIC"===d?["ACC_SERVICE","WIRELESS_SERVICE"].includes(t||"")?m=t:i&&l&&"INSTALL"!==t&&!r?m=l:!a||"INSTALL"===t||d||"SHIPPING"!==t&&(n||r)||(m=void 0):m=s,m})({enableCartFulfillmentOption:Z,enableFulfillmentOptionURLParam:J,isBookslotFulfillmentOptionChanged:fe,cartFulfillmentOption:n,fulfillmentOptionParam:h,requestSource:f,reservation:t,enableFIGCartFulfillmentOption:se,cartFIGFulfillmentOption:ve,enableGICBookslot:z}),Se=!(!X||"GIC"===f&&!Y);return(0,c.useMemo)(()=>({variables:{cartId:xe,fulfillmentOption:Ie,cartFulfillmentOption:Ne,isGuest:!!O,isExpressSla:!!M,enableDeliveryAddressFromSlotData:!!$,enableWalmartPlusFreeDiscountedExpress:!!B,maxAvailableSlotsCount:y,requestSource:f,itemFulfillmentTypes:A?pe:void 0,enableMultipleInhomeAddresses:ee,enableCartCustomerContext:"ACC_SERVICE"!==n,enableInstaCartSlots:ne,startDate:w,enableAccSlotExpansion:te,enableColdChainExpansion:ie,enableHolidayFreeExpressDelivery:k,enableExpressPricing:B||k,enablePromotionClaimStatus:U||W,enablePromotionType:le||T||U||W,enablePreferredStore:R,enableExpressUnavailableBanner:re||D,enableMemberInfoFromCartCustomerContext:de,...(b?{paginationInput:b}:{}),enableDynamicExpressSlotType:H,enableOffPeakHoursDelivery:K,enableSparkStore:null!==G&&void 0!==G&&G,enableCustomizableItemsPhase1:q,features:Ee?[]:(0,d.N)({enableVisionItems:ae,enablePetRxManualRefill:F,enableItemLevelCheckout:_,enableFulfillmentMajorAppliances:oe,enableLocalTimeForACCSlot:"ACC_OIL_SERVICE"===N,enableBYOD:ce,enableHolidayFreeExpressDeliveryOptIn:U,enableOnDemandShifting:T,enablePromiseDateRange:me,enableDroneDeliveryPhase3:Se}),subscriptions:v,...(S?{mpDeliverySlots:S}:{}),...(L?{programId:L}:{}),...(V?{serviceType:V}:{})},additionalHeaders:ye,customQueryKey:p}),[xe,Ie,O,n,$,B,Z,te,k,le,U,T,W,ae,F,_,ie,M,E,w,b,R,S,ge,L,H,K,G,V,j,q])}},467412:function(e,n,t){t.d(n,{w:function(){return l}});const i={type:"query",name:"getSlots",hash:"0d9f6b85cf9cb1acf203a9dbfc08617c68807c9b95b54d780d0d11386f75e266"},l=(e,n)=>{let{variables:t,additionalHeaders:l={},customQueryKey:r}=n;return{queryKey:[r||"get-slots",t],queryFn:()=>e.getGqlFetch("cecxo",e=>(n,t)=>(t&&Object.keys(l).forEach(e=>{t.headers[e]=l[e]}),e(n,t)))(i,t)}}},780644:function(e,n,t){t.d(n,{wM:function(){return b},w4:function(){return x},BS:function(){return p},K_:function(){return w},k2:function(){return I},Gm:function(){return g},sA:function(){return h},vk:function(){return f},$v:function(){return v},Dm:function(){return L},lm:function(){return N},at:function(){return u},nQ:function(){return E},ho:function(){return S}});var i=t(682081),l=t(705770),r=t(714),d=t(187327),a=t(327536);var o=t(827698);const s=(e,n,t)=>Boolean((("DELIVERY_ADDRESS"===n||"PICKUP_CURBSIDE"===n||"PICKUP_INSTORE"===n)&&"DynamicExpressSlot"===e||c(e,n))&&t&&t>0),c=(e,n)=>Boolean("DRONE_DELIVERY"===n&&("DynamicExpressSlot"===e||"DroneDeliverySlot"===e)),m=e=>e.filter(e=>{let{isAvailable:n}=e;return n}).length>0,u=(e,n,t,i)=>{var l;if((null===(l=e[0])||void 0===l?void 0:l.startTime)&&!i)return e[0].startTime;const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UTC",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const[t,i,l]=n.split("-");if(!t||!i||!l)return n;const r=new Date(Date.UTC(Number(t),Number(i)-1,Number(l))),d=new Date(r.toLocaleString("en-US",{timeZone:"UTC"})),a=new Date(r.toLocaleString("en-US",{timeZone:e})),o=d.getTime()-a.getTime();return r.setTime(r.getTime()+o),r.toISOString()}(t,n);return r},x=function(e,n){let t,l,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"UTC";(0,r.nl)(e,d)?(t="Today",l="Today"):(t=(0,r.Yx)(e,d),l=(0,r.Yx)(e,d,"long"));let[,o,s]=n.split("-");s=parseInt(s,10).toString(),o=parseInt(o,10).toString();const c=(0,i.m)(a,"slotDayLabel",{day:s,month:o});return{dayOfWeek:t,dayOfWeekLabel:l,dateLabel:c}},p=(e,n,t,i)=>{const l=[];return e.forEach(e=>{const{day:r,slots:d,hasPharmacyRestrictedSlots:a,hasAvailableSlots:o}=e,s=u(d,r,n),{dayOfWeek:c,dayOfWeekLabel:p,dateLabel:y}=x(s,r,n);l.push({dayOfWeek:c,dayOfWeekLabel:p,dateLabel:y,id:r,isSelected:r===t,isAvailable:i?!!o:m(d),hasPharmacyRestrictedSlots:a})}),l},y=e=>{var n,t,i,l,r,d,a,o,s,c,m,u;let x=null;"slaInMins"in e&&(x=e.slaInMins);const p=e.price,y=p.total||{displayValue:"",value:void 0},f=y.value||0,{totalSavings:h,totalSavingsValue:E}=(I=null===(n=p.totalSavings)||void 0===n?void 0:n.displayValue,w=null===(t=p.totalSavings)||void 0===t?void 0:t.value,{totalSavings:I||"",totalSavingsValue:w||0});var I,w;const g=(b=p.restaurantFee,v=p.memberRestaurantDiscount,{restaurantFee:(null===b||void 0===b?void 0:b.displayValue)||"",restaurantFeeValue:(null===b||void 0===b?void 0:b.value)||0,memberRestaurantDiscount:(null===v||void 0===v?void 0:v.displayValue)||"",memberRestaurantDiscountValue:(null===v||void 0===v?void 0:v.value)||0});var b,v;return{fee:y.displayValue,feeValue:f,expressFee:(null===(i=p.expressFee)||void 0===i?void 0:i.displayValue)||"",baseFee:(null===(l=p.baseFee)||void 0===l?void 0:l.displayValue)||"",totalValue:f,memberBaseFee:(null===(r=p.memberBaseFee)||void 0===r?void 0:r.displayValue)||"",optedInTotal:(null===(d=p.optedInTotal)||void 0===d?void 0:d.displayValue)||"",memberExpressDiscount:(null===(a=p.memberExpressDiscount)||void 0===a?void 0:a.displayValue)||"",memberExpressDiscountValue:(null===(o=p.memberExpressDiscount)||void 0===o?void 0:o.value)||0,expressFeeValue:(null===(s=p.expressFee)||void 0===s?void 0:s.value)||0,baseExpressFee:(null===(c=p.baseExpressFee)||void 0===c?void 0:c.displayValue)||"",originaltotal:(null===(m=p.originaltotal)||void 0===m?void 0:m.displayValue)||"",originaltotalValue:(null===(u=p.originaltotal)||void 0===u?void 0:u.value)||0,totalSavings:h,totalSavingsValue:E,slaInMins:x,...g}},f=(e,n,t,i)=>{const{startTime:l,endTime:d}=e;if(!n&&!l&&!d)throw new Error("startTime is required for slot");return l&&d?i?(0,r.Xw)(l,d,t,!0):"".concat(L(l,t),"-").concat(L(d,t)):""},h=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3?arguments[3]:void 0;var d;const{__typename:o,startTime:s,price:c,unscheduledHoldInDays:m,slotMetadata:u}=e;if(!u&&!t)throw new Error("startTime/slotMetadata/unscheduledHoldInDays are required for unscheduled pickup");if(!s||!m)throw new Error("startTime/unscheduledHoldInDays are required for unscheduled pickup");const x=(null===navigator||void 0===navigator?void 0:navigator.language)||"en-US",p=(0,r.nl)(s,n)?l?(0,i.m)(a,"today"):"today":(0,r.Yx)(s,n,void 0,l?x:void 0),y=(0,r._J)(s,n,!0),f=E(s);return{__typename:o,startTime:y,startDay:p,unScheduledPickupStartDate:f,fee:(null===(d=c.total)||void 0===d?void 0:d.displayValue)||"",unscheduledHoldInDays:m||null,slotMetadata:u||"",isUnscheduledPickUpSlot:!0}},E=e=>e.slice(0,10),I=(e,n,t)=>{const{__typename:i,id:l,startTime:d,endTime:a,slotMetadata:o,fulfillmentType:c,nodeAccessType:m}=e,u=s(i,m,e.slaInMins||0);if(!u&&(!d||!a))throw new Error("startTime/endTime are required for slot");return{id:l||"",startTime:d,endTime:a,fulfillmentType:c,slotMetadata:o||"",timeWindow:f(e,u,n,t),isExpressSlot:u,date:(0,r.dq)(d,n),dayId:d?E(d):a?E(a):""}},w=(e,n)=>({date:(0,r.dq)(e,n),dayId:E(e)}),g=(e,n,t)=>{const i=[];return Array.isArray(e)&&e.forEach(e=>{const{day:l,eachDaySlots:r,...d}=e,a=r.map(e=>((e,n,t,i)=>{var l;const{__typename:r,id:d,available:a,isAlcoholRestricted:m,isSelectable:u,fulfillmentType:x,nodeAccessType:p,price:f,slaInMins:h,sla:E,slotMetadata:I,slotExpiryTime:w="",maxItemAllowed:g,slotIndicator:b,startTime:v="",endTime:N="",isPrimary:S=!0,accessPointId:L,isPopular:V=!1,isEvergreen:j=!1,serviceType:P,ineligibleItemCount:O,serviceProvider:C=null,maxColdChainLimitReached:M=!1,maxColdChainItemLimit:B,pharmacyIneligibleItemCount:A,minimumSla:k,statusReason:F,type:_,isRestaurantDeliverySlot:R=!1}=e;if(!I)throw new Error("slotMetadata is required for slot");const D=s(r,p,h||0),T=(e=>"InHomeSlot"===e)(r),U=c(r,p),W=(0,o.Ib)({slaInMins:h,isExpressSlot:D,minimumSla:k,enableExpressStaticRange:t,isDroneSlot:U,enableDroneDeliveryPhase3:i});return{__typename:r,slotDay:n,...y(e),id:d||"",isAvailable:a||!1,isAlcoholRestricted:m||!1,isSelected:!1,slotMetadata:I||"",isExpressSlot:D,isEvergreen:!!j,isInHomeSlot:T,maxItemAllowed:g,isSelectable:u||!1,slotExpiryTime:w,slotIndicator:b,totalValue:(null===(l=f.total)||void 0===l?void 0:l.value)||0,startTime:v,endTime:N,isPrimary:S,accessPointId:L,fulfillmentType:x,nodeAccessType:p,slaDisplayValue:null===E||void 0===E?void 0:E.displayValue,isPopular:V,serviceType:P,slaShortDisplayValue:W,ineligibleItemCount:O,serviceProvider:C,maxColdChainLimitReached:M,maxColdChainItemLimit:B,pharmacyIneligibleItemCount:A,minimumSla:k,statusReason:F,type:_,isRestaurantDeliverySlot:R}})(e,l,n,t));i.push({...d,day:l,slots:a})}),i},b=e=>{var n;return null!==(n=null===e||void 0===e?void 0:e.timeZone)&&void 0!==n?n:""},v=(e,n,t,i,l)=>{const r=e.find(e=>{let{day:t}=e;return n===t});return((null===r||void 0===r?void 0:r.slots.filter(e=>e.isAvailable||!!i&&e.isPopular))||[]).map(e=>{const n=f(e,e.isExpressSlot,t,l);return{...e,timeWindow:n}})},N=(e,n)=>{const{assortmentStoreId:t,id:i,displayName:l,cartFulfillmentOption:r,fulfillmentType:d,address:a,timeZone:o,nodeAccessType:s,isExpressEligible:c,isSparkStore:m}=e[0];if(!a)throw new Error("Access Point Address is required.");return{assortmentStoreId:t,id:i,displayName:l,cartFulfillmentOption:r,fulfillmentType:d,timeZone:o,address:{...a,postalCode:n(null===a||void 0===a?void 0:a.postalCode)},nodeAccessType:s,isExpressEligible:c,isSparkStore:m}},S=(e,n,t,i,r,a,o,s)=>{var c,m,u,x,y,f,E,v,S;let L,V,j,P,O,C=[],M=[],B=[];const A=r?{...e.slots,accessPoints:(null===(c=e.slots)||void 0===c||null===(m=c.accessPoints)||void 0===m?void 0:m.length)?null===(u=e.slots)||void 0===u?void 0:u.accessPoints:d.bM}:e.slots;if(!A)throw new Error("No slot data");(null===(x=A.accessPoints)||void 0===x?void 0:x.length)||(0,l.cM)(["info","checkout","bookslot","getSlot query","empty_accessPoints"],{type:"log",message:A}),O=N(A.accessPoints,t);const k=b(O);C=g(A.slotDays,a,o),B=p(C,k,undefined,s);const F=A.customerLocationInfo,_=B.some(e=>e.isAvailable);return(null===(y=A.nextAvailableSlots)||void 0===y?void 0:y.unscheduledPickupSlot)&&(L=h(A.nextAvailableSlots.unscheduledPickupSlot,k,void 0,n)),(null===(f=A.nextAvailableSlots)||void 0===f?void 0:f.pickupSlot)&&(V=I(A.nextAvailableSlots.pickupSlot,k,i)),(null===(E=A.nextAvailableSlots)||void 0===E?void 0:E.deliverySlot)&&(j=I(A.nextAvailableSlots.deliverySlot,k,i)),M=((e,n)=>{if(!e[0])throw new Error("Slots AccessPoint is required");return e.map(e=>{const{assortmentStoreId:t,id:i,displayName:l,cartFulfillmentOption:r,fulfillmentType:d,address:a,timeZone:o,nodeAccessType:s,isExpressEligible:c,isSparkStore:m}=e;if(!a)throw new Error("Access Point Address is required.");return{assortmentStoreId:t,id:i,displayName:l,cartFulfillmentOption:r,fulfillmentType:d,timeZone:o,address:{...a,postalCode:n(null===a||void 0===a?void 0:a.postalCode)},nodeAccessType:s,isExpressEligible:c,isSparkStore:m}})})(A.accessPoints,t),O=N(A.accessPoints,t),(null===(v=A.nextAvailableSlots)||void 0===v?void 0:v.earliestPickupSlotTime)&&(P=w(A.nextAvailableSlots.earliestPickupSlotTime,k)),{accessPoint:O,days:B,guestReservationExtensionMessage:A.guestReservationExtensionMessage,isAnySlotsAvailable:_,nextDeliverySlot:j,nextPickupSlot:V,nextUnscheduledPickupSlot:L,slotDays:C,timeZone:k,earliestPickupSlotTime:P,allAccessPoints:M,cartCustomerContext:A.cartCustomerContext,scheduledEnabled:A.scheduledEnabled,hasFreeOfCostDeliverySlotsForWPlusUsers:A.hasFreeOfCostDeliverySlotsForWPlusUsers,customerLocationInfo:F,paginationData:A.paginationData,slotPromotionDetails:A.slotPromotionDetails,hasQuickServiceRestaurantItems:null===(S=e.slots)||void 0===S?void 0:S.hasQuickServiceRestaurantItems}},L=(e,n)=>(0,i.m)(a,"formattedTime",{timeLabel:new Date((0,r.mr)(e,n))}).replace(/[\s.]+/g,"").toLowerCase()},827698:function(e,n,t){t.d(n,{Gx:function(){return a},Ib:function(){return d},RK:function(){return o},WC:function(){return r}});var i=t(682081),l=t(327536);const r=e=>{let{enableExpressStaticRange:n,minimumSla:t,slaInMins:i}=e;return!!(n&&i&&t&&t<i)},d=e=>{let{slaInMins:n,isExpressSlot:t,minimumSla:d,enableExpressStaticRange:a,isDroneSlot:o,enableDroneDeliveryPhase3:s}=e;if(o&&s)return(0,i.m)(l,"asSoonAs",{slaInMins:n});if(t&&n){return r({enableExpressStaticRange:a,minimumSla:d,slaInMins:n})?(0,i.m)(l,"expressStaticRange",{minimumSla:d||null,slaInMins:n}):n%60?(0,i.m)(l,"minsOrLess",{minutes:n}):(0,i.m)(l,"hrOrLess",{hours:n/60})}return""},a=e=>{let{slot:n,enableExpressStaticRange:t,expressSlotSla:i}=e;return n.slaInMins&&"DroneDeliverySlot"===n.__typename?l.asSoonAs({slaInMins:n.slaInMins}):r({enableExpressStaticRange:t,minimumSla:n.minimumSla||null,slaInMins:n.slaInMins})?l.expressStaticRange({minimumSla:n.minimumSla||null,slaInMins:n.slaInMins}):i},o=e=>{let{slot:n,enableExpressStaticRange:t}=e;return t?{isr:"DynamicExpressSlot"===n.__typename&&r({enableExpressStaticRange:t,minimumSla:n.minimumSla,slaInMins:n.slaInMins})?1:0}:{}}},587701:function(e,n,t){t.d(n,{D:function(){return a}});var i=t(296383),l=t(293168),r=t(764766),d=t(855045);const a=()=>{var e;const{router:n}=(0,r.tv)(),t=(0,l.iC)(i.Vq),{enableFulfillmentOptionURLParam:a}=(null===(e=t.bookslot)||void 0===e?void 0:e.values)||{};return a?(0,d.z)(null,null===n||void 0===n?void 0:n.query):void 0}},114692:function(e,n,t){t.d(n,{d:function(){return g}});var i=t(293168),l=t(705770),r=t(179404),d=t(222830),a=t(141819),o=t(178668),s=t(924020),c=t(194742),m=t(296383),u=t(187327),x=t(467412),p=t(780644),y=t(162480),f=t(300621),h=t(986046);const E=(e,n,t)=>{let{cartId:E,cartFulfillmentOption:I,reservation:w,blockDelivery:g=!1,cacheTime:b=0,customQueryKey:v,maxAvailableSlotsCount:N,requestSource:S,enabled:L=!0,fulfillmentOptionParam:V,queryFulfillment:j,startDate:P,paginationInput:O,subscriptions:C,disableRefetchOnWindowFocus:M=!1,enableExpressStaticRange:B,showHoursAndMinutesInSlots:A,mpDeliverySlots:k,programId:F,serviceType:_,droneDeliveryEligible:R}=e;var D;const{zipCodeFormatter:T=o.y}=(0,c.useContext)(s.V),{0:U,1:W}=(0,c.useState)(!1),H=(0,i.iC)(m.Vq),X="INSTALL"===I&&E===u.IX,{enableUnauthorizedAccessToCartErrorFix:Y,enablePassCartIdAcidCheck:K,enableLocalizedStringInBookSlot:G,enableHourMinutesSlots:z,enableBookslotOptimization:q}=H.bookslot.values||{},$=null===(D=(0,i.iC)(a.YL))||void 0===D?void 0:D.shared,{enableDroneDeliveryPhase3:Z}=$.values,Q=(0,f.s)({cartFulfillmentOption:I,reservation:w,customQueryKey:v,maxAvailableSlotsCount:N,requestSource:S,fulfillmentOptionParam:V,queryFulfillment:j,initialCartId:E,startDate:P,isInstallWithLazyCartId:X,paginationInput:O,variant:t,subscriptions:C,mpDeliverySlots:k,programId:F,serviceType:_,droneDeliveryEligible:R}),J=(0,h.m)(),ee=K&&J,ne=(0,r.Z)(),te=n||(0,x.w)(ne,{...Q,...(U&&{variables:{...Q.variables,cartId:"ACC_SERVICE"===I?E:u.IX,enableCartCustomerContext:"ACC_SERVICE"!==I,startDate:P,paginationInput:O}})}),{data:ie,error:le,isFetching:re,refetch:de}=(0,d.a)({...te,config:{cacheTime:b,enabled:!!E&&!g&&L,refetchOnWindowFocus:!M}});(0,c.useEffect)(()=>{(e=>{let{data:n,hasCidAndAcid:t,cartId:i,refetch:r,setRefetch:d,enableUnauthorizedAccessToCartErrorFix:a}=e;var o,s;const c=null===n||void 0===n||null===(o=n.errors)||void 0===o?void 0:o.length;var m;t&&(0,l.cM)(["info","checkout","bookslot","getSlot query",c?"hasCidAndAcidError":"hasCidAndAcid"],{type:"log",message:c?JSON.stringify(null===n||void 0===n?void 0:n.errors):"cartId:".concat(i)}),a&&(null===n||void 0===n||null===(s=n.errors)||void 0===s?void 0:s.length)&&((0,y.e)(n)&&!r?((0,l.cM)(["info","checkout","bookslot","getSlot query","unauthorized-error"],{type:"log",message:"cartId:".concat(i)}),d(!0)):r&&(null===n||void 0===n||null===(m=n.errors)||void 0===m?void 0:m.length)&&(0,l.cM)(["info","checkout","bookslot","getSlot query","unauthorized-error-on-refetch"],{type:"log",message:JSON.stringify(null===n||void 0===n?void 0:n.errors)}))})({cartId:E,data:ie,enableUnauthorizedAccessToCartErrorFix:Y,hasCidAndAcid:ee,refetch:U,setRefetch:W})},[null===ie||void 0===ie?void 0:ie.errors,ee]);const ae=(0,c.useMemo)(()=>{const e=null===ie||void 0===ie?void 0:ie.data;if(null===e||void 0===e?void 0:e.slots)try{return((e,n)=>{if(!1===(null===n||void 0===n?void 0:n.expired)&&!1===(null===n||void 0===n?void 0:n.isUnscheduled)){var t,i,l,r;const a=null!==(r=null===(t=e.slots)||void 0===t?void 0:t.slotDays)&&void 0!==r?r:[],o=null===n||void 0===n||null===(i=n.reservedSlot)||void 0===i||null===(l=i.startTime)||void 0===l?void 0:l.slice(0,10),s=null===a||void 0===a?void 0:a.find(e=>e.day===o);if(s){var d;const e=null===(d=s.eachDaySlots)||void 0===d?void 0:d.find(e=>e.id===n.reservedSlot.id);e&&(e.available=!0)}}})(e,w),{parsedSlotsData:(0,p.ho)(e,!!G,T,z||A,!!C,B,Z,q)}}catch(n){return{dataErrors:[n]}}else if(!re&&!g)return{dataErrors:(null===ie||void 0===ie?void 0:ie.errors)||[new Error("Empty data response")]};return{}},[ie,w]),{parsedSlotsData:oe=null,dataErrors:se=[]}=ae;return{errors:[le,...se].filter(e=>e),isFetching:re,data:oe,retry:!se.length&&U,refetch:de}};var I=t(587701),w=t(701272);const g=(e,n)=>{let{cartId:t,cartFulfillmentOption:l,reservation:r,cacheTime:d,customQueryKey:a,maxAvailableSlotsCount:o,requestSource:s,enabled:u,queryFulfillment:x,startDate:p,paginationInput:y,variant:f,subscriptions:h,disableRefetchOnWindowFocus:g,enableExpressStaticRange:b,showHoursAndMinutesInSlots:v,mpDeliverySlots:N,programId:S,serviceType:L,droneDeliveryEligible:V}=e;const j=(0,I.D)(),{blockDelivery:P}=(e=>{var n;const{0:t,1:l}=(0,c.useState)(!1),r=(0,w.Jr)(),{isCAandESPAddressesSame:d,isCAandESPAddressesDifferent:a}=(0,w.w2)(),o=null===(n=(0,i.iC)(m.Vq).bookslot.values)||void 0===n?void 0:n.enableWirelessPostpaid;return{blockAddressChange:o&&r&&d,blockDelivery:"DELIVERY"===e&&o&&r&&a,showPostpaidAlertModal:t,setShowPostpaidAlertModal:l}})(l),{data:O,errors:C,isFetching:M,retry:B,refetch:A}=E({cartId:t,cartFulfillmentOption:l,reservation:r,blockDelivery:P,cacheTime:d,customQueryKey:a,maxAvailableSlotsCount:o,requestSource:s,enabled:u,fulfillmentOptionParam:j,queryFulfillment:x,startDate:p,paginationInput:y,subscriptions:h,disableRefetchOnWindowFocus:g,enableExpressStaticRange:b,showHoursAndMinutesInSlots:v,mpDeliverySlots:N,programId:S,serviceType:L,droneDeliveryEligible:V},n,f),k=O||{};return{accessPoint:k.accessPoint,allAccessPoints:k.allAccessPoints,days:k.days,errors:C,timeZone:k.timeZone,earliestPickupSlotTime:k.earliestPickupSlotTime,isAnySlotsAvailable:k.isAnySlotsAvailable||!1,nextDeliverySlot:k.nextDeliverySlot,nextPickupSlot:k.nextPickupSlot,nextUnscheduledPickupSlot:k.nextUnscheduledPickupSlot,slotDays:k.slotDays,isFetching:M,guestReservationExtensionMessage:k.guestReservationExtensionMessage,slotPromotionDetails:k.slotPromotionDetails,cartCustomerContext:k.cartCustomerContext,scheduledEnabled:k.scheduledEnabled,hasFreeOfCostDeliverySlotsForWPlusUsers:k.hasFreeOfCostDeliverySlotsForWPlusUsers||!1,customerLocationInfo:k.customerLocationInfo,paginationData:k.paginationData,retry:B,refetch:A,hasQuickServiceRestaurantItems:k.hasQuickServiceRestaurantItems}}},855045:function(e,n,t){t.d(n,{z:function(){return i}});const i=(e,n)=>{try{const t=n||(e=>{if(e)return new Proxy(new URLSearchParams(e),{get:(e,n)=>e.get(n)})})(e),i=(null===t||void 0===t?void 0:t.fulfillmentOption)?t.fulfillmentOption.toString().toUpperCase():void 0;return"DELIVERY"===i||"PICKUP"===i?i:void 0}catch(t){return}}}}]);