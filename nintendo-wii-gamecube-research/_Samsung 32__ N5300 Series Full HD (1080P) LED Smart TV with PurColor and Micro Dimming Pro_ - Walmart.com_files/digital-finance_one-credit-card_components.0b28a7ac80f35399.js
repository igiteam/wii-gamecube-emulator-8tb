"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44029,60670],{971134:function(e,t,n){n.r(t),n.d(t,{DONT_SHARE_PII_SCOPES:function(){return d.h},OneCreditCardApplicationModal:function(){return r.Z},OneCreditCardCTAButton:function(){return u},OneCreditCardLink:function(){return s.Z},SHARE_PII_SCOPES:function(){return d.b},default:function(){return a.Z},useOneCreditQuickScreenStatus:function(){return o.Z}});var a=n(584446),r=n(53802),o=n(599505),i=n(487954),c=n(200421),l=n(194742);var u=e=>{let{className:t,buttonCTA:n,onLinkExtras:r}=e;const{text:o,buttonSize:u,uid:s,link:d}=n,v=o.replace(/\s/g,""),p="".concat(s).concat(v),{0:C,1:f}=(0,l.useState)(void 0);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Z,{isOpen:C,onClose:()=>f(!1),source:"contentPage",showConfirmationOnSuccess:!0,preApprovalUrl:d}),(0,i.jsx)(c.Z,{variant:"primary",size:null!==u&&void 0!==u?u:"small",onClick:()=>f(!0),className:t,id:p,onLinkExtras:r,"data-dca-id":"B:5F3F042E18","data-dca-intent":"__DCA_TBD__",children:o})]})},s=n(483784),d=n(92726)},483784:function(e,t,n){var a=n(487954),r=n(91726),o=n(194742),i=n(584446);t.Z=e=>{let{className:t,buttonCTA:n,onLinkExtras:c}=e;const{text:l,uid:u,link:s}=n,d=l.replace(/\s/g,""),v="".concat(u).concat(d),{0:p,1:C}=(0,o.useState)(void 0),f=()=>{C(!0)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{isOpen:p,onClose:()=>C(!1),source:"contentPage",showConfirmationOnSuccess:!0,preApprovalUrl:s}),(0,a.jsx)(r.ZP,{onClick:f,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),f())},className:t,id:v,onLinkExtras:c,role:"link",tabIndex:0,"data-dca-id":"L:B006654BDB",children:l})]})}},599505:function(e,t,n){n.d(t,{Z:function(){return f}});var a=n(614172),r=n(166659),o=n(784289);const i={type:"mutation",name:"InitiateCreditQuickScreen",hash:"aa9dcebb92d90e8a95c7b84921b4784eddffa39cb6fec35b1a6249ed44a61ec5"};var c=n(179404),l=n(222830),u=n(936936);const s={type:"query",name:"OnePayCreditCardContentPages",hash:"7178f214ed16c86a49750f375a3ecf8822c60c566aef6c8ac42e8bc0a23c672d"},d=e=>{const t={contentPageId:"1660503",tenant:"WM_GLASS"};return{queryKey:["one-pay-credit-card-content-pages"],queryFn:()=>e.getGqlFetch()(s,t)}};var v=n(293168),p=n(465205),C=n(194742);var f=()=>{var e;const{quickScreenPollingIntervalMS:t=2e3,quickScreenMaxPolling:n=4}=(null===(e=(0,v.iC)(a.B).onecreditcard)||void 0===e?void 0:e.values)||{onecreditcard:{values:""}},{0:s,1:f}=(0,C.useState)(0),g=(0,C.useRef)(!1),m=(0,C.useRef)(null),A=(0,C.useCallback)((()=>{g.current=!1,f(0),m.current&&(clearTimeout(m.current),m.current=null)}),[]),S=(0,p.Zq)(),h=(0,C.useCallback)((()=>{S.invalidateQueries("content-page")}),[S]),b=(0,C.useCallback)((()=>{g.current=!0,f(n)}),[n]),k=(0,C.useCallback)((()=>{A(),h()}),[A,h]),[x]=(e=>{const t=(0,r.G)();return(0,o.D)((e=>t(i,e)),e)})({onSettled:e=>{var t;const n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.initiateCreditQuickScreen;!0===(null===n||void 0===n?void 0:n.success)&&b()}}),{isFetching:y,data:w,refetch:E}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=d((0,c.Z)()),{queryKey:n,queryFn:a}=t,{data:r,error:o,isFetching:i,isLoading:s,refetch:v}=(0,l.a)(n,a,{enabled:!1,...e});return{errors:(0,u.k)(null===r||void 0===r?void 0:r.errors,o),isFetching:i,isLoading:s,data:null===r||void 0===r?void 0:r.data,refetch:v}}();(0,C.useEffect)((()=>(g.current&&s>0&&!y&&(m.current=setTimeout((()=>{E(),f((e=>e-1))}),t)),()=>{m.current&&(clearTimeout(m.current),m.current=null)})),[s,y,E,t]),(0,C.useEffect)((()=>{var e,t,n;g.current&&!1===(null===w||void 0===w||null===(e=w.contentLayout)||void 0===e||null===(t=e.pageMetadata)||void 0===t||null===(n=t.genericPageContext)||void 0===n?void 0:n.initiateOnePayCreditQuickScreen)&&k()}),[w,k]),(0,C.useEffect)((()=>(x({input:{provider:"ONEPAY",source:"content-page"}}),()=>{A()})),[x,A])}},584446:function(e,t,n){n.d(t,{Z:function(){return y}});var a=n(487954),r=n(327650),o=n(972864),i=n(167695),c=n(155394),l=n(194742),u=n(53802),s=n(614172),d=n(171554),v=n(19102),p=n(293168),C=n(705770),f=n(1687),g=n(253273),m=n(197174),A=n(153984),S=n(257428),h=n(92726);var b=e=>{var t,n,r,o,i;const{isOpen:c,onClose:u,source:b,preApprovalUrl:k,showConfirmationOnSuccess:x,utmContent:y}=e,{0:w,1:E}=(0,l.useState)(""),{0:T,1:L}=(0,l.useState)(""),{0:M,1:O}=(0,l.useState)(!1),{0:P,1:R}=(0,l.useState)(null),B=(0,p.iC)(s.B),I=(0,S.ft)(y),{clientId:_,redirectUri:j}=(null===B||void 0===B?void 0:B.onecreditcard.values)||{};(0,l.useEffect)((()=>{c&&E((0,f.x0)(36))}),[c]);const{data:U,isFetching:Z}=(0,d.Q)(_||"",w,h.b,j||"",!!c&&!!w),D=null===U||void 0===U||null===(t=U.data)||void 0===t||null===(n=t.generateOauthAuthzCode)||void 0===n||null===(r=n.oauth)||void 0===r?void 0:r.authCode,N=null===U||void 0===U||null===(o=U.data)||void 0===o||null===(i=o.generateOauthAuthzCode)||void 0===i?void 0:i.errors,q=null===U||void 0===U?void 0:U.errors,F=(0,l.useCallback)((e=>{x&&"CREDIT_CARD_ADDED"===(null===e||void 0===e?void 0:e.status)?(R(e),O(!0)):u(e)}),[u,x]),W=(0,l.useCallback)((()=>{O(!1),P&&(u(P),R(null))}),[P,u]);return(0,l.useEffect)((()=>{(N||q)&&(0,C.cM)(["error","home","one-creditcard-pre-approval-gql-error"],{type:"log",message:N||q})}),[N,q]),(0,l.useEffect)((()=>{((null===N||void 0===N?void 0:N.length)||(null===q||void 0===q?void 0:q.length))&&F({status:"UNKNOWN"})}),[N,q,F]),(0,l.useEffect)((()=>{D&&L((0,v.f)(k,{code:D,transaction_id:w,source:b,utm_content:I.utmContent,utm_medium:I.utmMedium}))}),[D,b,k,w,I]),c?M&&P?(0,a.jsx)(A.Z,{isOpen:M,onClose:W,productType:P.cardType,source:b}):Z||!D?(0,a.jsx)(m.Z,{returnData:F}):D&&T?(0,a.jsx)(g.Z,{transactionId:w,iframeUrl:T,source:b,returnData:F}):null:null};var k=e=>{const{preApprovalUrl:t}=e;return(0,S.My)(t||"")?(0,a.jsx)(b,{...e}):(0,a.jsx)(u.Z,{...e})};const x=e=>{let{isOpen:t}=e;const{signIn:n}=(0,i.z)({returnToUrl:"".concat(window.location.pathname,"?occ=true")});return(0,l.useEffect)((()=>{t&&n()}),[n,t]),(0,a.jsx)(c.VisuallyHidden,{children:(0,a.jsx)(r.N,{})})};var y=e=>{let{isOpen:t,automaticOpen:n=!0,...r}=e;const{authState:{isLoggedIn:i}}=(0,o.Eu)(),c=function(){0;return"true"===new URLSearchParams(window.location.search).get("occ")}(),l=t||void 0===t&&n&&c;return!i&&!0===t?(0,a.jsx)(x,{isOpen:!0}):(0,a.jsx)(k,{...r,isOpen:l})}},614172:function(e,t,n){n.d(t,{B:function(){return c}});var a=n(239865),r=n(293168);const o=(0,r.AT)({categoryPageIds:"1660503",qsCategoryPageIds:"1660503",onePayCreditQuickScreenEnabled:!1,quickScreenPollingIntervalMS:2e3,quickScreenMaxPolling:4,clientId:"aca519b2-9d61-41bb-905d-068c5c0aa856",redirectUri:"https://stage-web.one.app/wlink/credit-card/ecom/join",walletPoweredByOneEnabled:!1}),i=(0,r.AT)({clientId:"aca519b2-9d61-41bb-905d-068c5c0aa856",redirectUri:"https://stage-web.one.app/wlink/credit-card/ecom/join"}),c={name:a.H,keyDefinitions:o,tenantOverrides:{"WALMART-US-B2C":i}}},235021:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(487954),r=n(978598),o=n.n(r),i=n(194742),c=n(601356);const l=/(pixlee)\.(com|net|io|ai)\b/,u=/(pixlee|googletagmanager)\.(com|net|io|ai)\b/,s={"WALMART-US-B2C":u,"WALMART-US-B2B":u,"LIDER-CL-B2C":l,"SAMS-US-B2C":l,"SAMS-MX-B2C":l,"WALMART-CA-B2C":l,"WALMART-MX-B2C":l,"BODEGA-MX-B2C":l,"ACUENTA-CL-B2C":l,"MAYORISTA-CL-B2C":l,"WALMART-US-SPARK":u,"WALMART-ZA-B2C":l,"WALMART-MX-SPARK":l,"WALMART-GTMP":u},d=()=>{var e;const t=(0,c.sx)(),{bu:n,mart:a}=(null===t||void 0===t||null===(e=t.publicRuntimeConfig)||void 0===e?void 0:e.tenantV2)||{bu:"WALMART-US",mart:"B2C"};return"".concat(n,"-").concat(a)};var v=(0,i.forwardRef)(((e,t)=>{let{html:n,data:r,dataType:c,dataAdComponentType:u,dataAdDetails:v,dataAdType:p,dataTestId:C,id:f,allowFullscreen:g=!1,title:m,initialHeight:A=0,classNames:S,skipSSR:h,safeframeURL:b,scrolling:k="no",sandbox:x="allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-forms allow-popups",onLoadHeight:y,allowPrivacyCookies:w,sandboxExtensions:E=[],role:T="",allow:L,onLoad:M}=e;const O=s[d()]||l,P=new RegExp(O,"gi"),R=(0,i.useMemo)((()=>P.test(n)?n.replace(P,"legalviolation.walmart.com"):n),[]),{height:B,name:I}=o()({initialHeight:A,html:R,id:f,data:r,dataType:c},{allowedCookies:[...w?["sod","apo"]:[]]}),_=[...new Set([...x.split(" "),...E])].join(" ");return(0,i.useEffect)((()=>{B&&y&&y()}),[B,y]),(0,a.jsx)("iframe",{id:f,"data-ad-type":p,"data-ad-component-type":u,"data-testid":C,"data-ad-details":v,className:S,height:B,name:I,title:m,sandbox:_,scrolling:k,src:b,ref:t,role:T,allow:L,onLoad:M,allowFullScreen:g})}))}}]);