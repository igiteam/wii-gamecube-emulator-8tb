"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44469],{563041:function(e,n,t){t.r(n),t.d(n,{noRecommendations:function(){return r},savedTo:function(){return a},viewRegistry:function(){return i}});const a=e=>"Saved to \""+e.name+"\"",i=()=>"View registry",r=()=>"No product recommendations"},500436:function(e,n,t){t.d(n,{k:function(){return Q}});var a=t(487954),i=t(972864),r=t(167695),l=t(729357),s=t(682081),o=t(200421),d=t(444002),c=t(194742),m=t(403464),u=t(155394),x=t(522037),p=t(764766),g=t(416095),y=t(908534),f=t(26797),h=t(192173),v=t(438989),w=t(160511),E=t(193006),b=t(563861),S=t.n(b),I=t(761050);const L=()=>(0,a.jsx)("ul",{className:"pa0 ma0",children:Array.from({length:4},(e,n)=>(0,a.jsxs)("li",{className:"list list-tile w-100 pb3 flex items-center ".concat(3===n?"":"bb b--near-white mb3"),children:[(0,a.jsx)("div",{className:"mr3",children:(0,a.jsx)(u.Skeleton,{variant:"rounded",height:"20px",width:"20px"})}),(0,a.jsx)(u.Skeleton,{height:"20px",width:"30%"})]},n))}),N=e=>{let{analyticsDetails:n,snackbarError:t,closeModal:i,setLoading:r,setNoBackButton:l,onSubmit:s,setPage:o}=e;return(0,a.jsx)(O,{analyticsDetails:n,setLoading:e=>r(e),handleError:()=>{t(),i()},handleNoReg:()=>{l("CREATE_NO_REG")},handleCreate:()=>{o("CREATE")},onSubmit:e=>s({setNextNavPage:e=>o(e),...e})})},T=e=>{let{isLoading:n}=e;return n?(0,a.jsx)(u.Skeleton,{variant:"rounded",width:"100%",height:"32px"}):(0,a.jsx)(o.Z,{form:"choose-registry",isFullWidth:!0,size:"medium",type:"submit",variant:"primary","data-dca-id":"B:7167AD858C","data-dca-intent":"__DCA_TBD__",children:(0,s.m)(m,"save")})},C=e=>{let{analyticsDetails:n,heading:t,itemType:i,usItemId:r}=e;return(0,a.jsx)(G,{analyticsDetails:n,heading:t,itemType:i,usItemId:r})},A=e=>{let{analyticsDetails:n,message:t}=e;return(0,a.jsx)(x.ZP,{moduleContext:n.context,name:"maxItemOverlay",pageTitle:n.pageTitle,shouldSetOverlay:!0,"data-dca-id":"M:773ED30571","data-dca-type":"module",children:t})},j=e=>{let{closeModal:n}=e;return(0,a.jsx)(o.Z,{isFullWidth:!0,onClick:n,onLinkName:"close",size:"medium",variant:"primary","data-dca-id":"B:F6E57BB0E7","data-dca-intent":"__DCA_TBD__",children:(0,s.m)(m,"close")})},R=S()(async()=>(await Promise.all([t.e(69902),t.e(54737),t.e(85062),t.e(42417),t.e(37372),t.e(38056),t.e(50176),t.e(49526),t.e(43972)]).then(t.bind(t,734438))).RegistryTypeSelector,{loadableGenerated:{webpack:()=>[734438]},ssr:!1,loading:()=>(0,a.jsx)(w.Z,{title:(0,s.m)(m,"loadingText")})}),M=()=>{const{addSnack:e}=(0,u.useSnackbar)();return()=>{setTimeout(()=>e({message:(0,s.m)(m,"itemNotsavedToastMessage")}),1e3)}},k=e=>{let{analyticsDetails:n,disableAction:t,initialAction:i,itemImage:r,itemName:l,itemPrice:o,itemType:d,onSuccess:u,updateCacheOnChoose:x,usItemId:p,title:g,pageId:f,pageType:h}=e;const v=M(),{0:E,1:b}=(0,c.useState)(i),[S,{isLoading:I}]=(0,y.Z)(n),L=e=>{let{maxItemsReached:n=!1,registryId:a,registryName:i,registryType:s,setNextNavPage:c=e=>b(e)}=e;S({input:{items:[{itemImage:r,itemName:l,itemPrice:o,itemType:d,usItemId:p}],registryId:a,registryType:s},name:i,maxItemsReached:n,handleMaxItem:()=>{c("MAX_ITEM_LIMIT")},handleError:()=>{v(),t()},handleSuccess:()=>{u(),t()}})};return"ADD"===E?(0,a.jsxs)(a.Fragment,{children:[I&&(0,a.jsx)(w.Z,{title:(0,s.m)(m,"loadingText")}),(0,a.jsx)(D,{handleChoose:()=>{b("CHOOSE")},isLoading:I,onSubmit:L,registryId:f,registryName:g,registryType:h})]}):(0,a.jsxs)(a.Fragment,{children:[I&&(0,a.jsx)(w.Z,{}),(0,a.jsx)(_,{analyticsDetails:n,closeModal:t,initialPage:E,itemType:d,onSubmit:L,updateCacheOnChoose:x,usItemId:p})]})},_=e=>{let{analyticsDetails:n,closeModal:t,initialPage:i,itemType:r,onSubmit:l,usItemId:o}=e;const d=M(),{0:x,1:p}=(0,c.useState)(i),{0:g,1:y}=(0,c.useState)(!0),f={CHOOSE:{pageTitle:(h=g,h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.VisuallyHidden,{children:(0,s.m)(m,"loadingChoose")}),(0,a.jsx)(u.SkeletonText,{lines:1})]}):(0,s.m)(m,"addItemReg")),component:V({analyticsDetails:n,snackbarError:d,closeModal:t,setLoading:y,setNoBackButton:p,onSubmit:l}),button:P({isLoading:g})},CREATE:{pageTitle:(0,s.m)(m,"createReg"),component:F({analyticsDetails:n,heading:(0,s.m)(m,"whatReg"),itemType:r,usItemId:o}),modalSize:"large"},CREATE_NO_REG:{pageTitle:(0,s.m)(m,"createReg"),component:F({analyticsDetails:n,heading:(0,s.m)(m,"createRegistryNoRegistry"),itemType:r,usItemId:o}),modalSize:"large"},MAX_ITEM_LIMIT:{pageTitle:(0,s.m)(m,"itemRegError"),component:B({analyticsDetails:n,message:(0,s.m)(m,"maxRegItems")}),button:Z({closeModal:t})}};var h;return(0,a.jsx)(v.Z,{children:(0,a.jsxs)(a.Fragment,{children:[g&&(0,a.jsx)(w.Z,{}),(0,a.jsx)(E.Z,{getActionButton:(e,n)=>{var t,a;return null===(a=(t=f[n]).button)||void 0===a?void 0:a.call(t)},getSize:e=>{var n;return(null===(n=f[e])||void 0===n?void 0:n.modalSize)||"medium"},initialPage:x,isOpen:!0,onClose:t,pageScope:f},x)]})})},D=e=>{let{handleChoose:n,isLoading:t,onSubmit:a,registryId:i,registryName:r,registryType:l}=e;return(0,c.useEffect)(()=>{t||(r&&i&&l?a({registryId:i,registryName:r,registryType:l}):n())},[]),null},V=e=>n=>{let{setPage:t}=n;return(0,a.jsx)(N,{analyticsDetails:e.analyticsDetails,snackbarError:e.snackbarError,closeModal:e.closeModal,setLoading:e.setLoading,setNoBackButton:e.setNoBackButton,onSubmit:e.onSubmit,setPage:t})},F=e=>()=>(0,a.jsx)(C,{analyticsDetails:e.analyticsDetails,heading:e.heading,itemType:e.itemType,usItemId:e.usItemId}),B=e=>()=>(0,a.jsx)(A,{analyticsDetails:e.analyticsDetails,message:e.message}),P=e=>()=>(0,a.jsx)(T,{isLoading:e.isLoading}),Z=e=>()=>(0,a.jsx)(j,{closeModal:e.closeModal}),O=e=>{let{analyticsDetails:n,handleCreate:t,handleError:i,handleNoReg:r,onSubmit:l,setLoading:d}=e;const{isFetchError:u,lists:p,showSpinner:g,isSuccess:y,refetch:h}=(0,f.Z)(),{0:v,1:w}=(0,c.useState)(p[0]),E=!!p.length;return(0,c.useEffect)(()=>(h(),()=>{g||d(g)}),[]),(0,c.useEffect)(()=>{d(g),u?i():y&&!E&&r()},[i,r,E,u,y,d,g]),g||!y?(0,a.jsx)(L,{}):(0,a.jsx)(x.ZP,{moduleContext:n.context,moduleViewExtras:n.overlayViewExtras(),name:"addToRegistryOverlayView",pageTitle:n.pageTitle,shouldSetOverlay:!0,"data-dca-id":"M:2B99BA031E","data-dca-type":"module",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"mb3 nl1 f6 sans-serif bg-white bw0 underline pointer",onClick:t,onLinkName:"createNewRegistry",useLDButton:!1,"data-dca-id":"B:60DF600300","data-dca-intent":"__DCA_TBD__",children:(0,s.m)(m,"createReg")}),(0,a.jsx)("form",{id:"choose-registry",onSubmit:e=>{e.preventDefault(),d(!0),l({registryId:v.id,registryName:v.name,registryType:v.type})},children:(0,a.jsx)(I.Z,{allowRadioNav:!1,analyticsDetails:n,lists:p,selectList:e=>w(e),selectedList:v||p[0]})})]})})},G=e=>{let{analyticsDetails:n,heading:t,itemType:i,usItemId:r}=e;const{router:l}=(0,p.tv)(),{enableRegistries:s}=(0,h.M)();return(0,a.jsx)(x.ZP,{moduleContext:n.context,name:"createSpecificRegistry",pageTitle:n.pageTitle,shouldSetOverlay:!0,"data-dca-id":"M:2F581F8904","data-dca-type":"module",children:(0,a.jsx)(R,{heading:t,onClick:e=>{const n=(0,g.i)({purpose:"CREATE",teachersRegistryEnable:!1,enableRegistries:s})[e],t=new URLSearchParams({usItemId:r,itemType:i}).toString(),a="".concat(n.url,"?").concat(t);l.push(a)},purpose:"CREATE",showTypeDescriptions:!0})})},q=e=>{const{initialElement:n,onLinkName:t,successElement:a,updateCacheOnChoose:i=!1}=(e=>{const n=e.action,t="SECONDARY"===e.variant?"secondary":"primary";switch(n){case"CHOOSE":return{initialElement:{action:n,text:e.text||(0,s.m)(m,"chooseRegMsg"),variant:t},successElement:null,onLinkName:"chooseRegistry"};case"CREATE":return{initialElement:{action:n,text:e.text||(0,s.m)(m,"createRegMsg"),variant:t},successElement:null,onLinkName:"createRegistry"};default:return{initialElement:{action:"ADD",text:e.text||(0,s.m)(m,"addReg"),variant:t},successElement:{leadingButtonIcon:"Check",text:e.buttonSuccessText||(0,s.m)(m,"addedReg")},onLinkName:"addToRegistry",updateCacheOnChoose:!0}}})(e),{0:{action:r,leadingButtonIcon:l,text:o,variant:d},1:u}=(0,c.useState)(n);return{action:r,leadingButtonIcon:l,onLinkName:t,onSuccessElement:()=>{a&&u(a)},text:o,updateCacheOnChoose:i,variant:d}},Q=e=>{let{action:n,buttonSuccessClassName:t="bg-white",buttonSuccessText:s,buttonText:m,buttonStyle:u,className:x="",context:p,isFullWidth:g,itemImage:y,itemName:f,itemPrice:h,itemType:v,pageId:w,pageTitle:E,pageType:b,title:S,usItemId:I,variant:L}=e;const N=(0,c.useRef)(null);(0,c.useEffect)(()=>{!N||T||_||setTimeout(()=>{var e;null===(e=N.current)||void 0===e||e.focus()},0)});const{action:T,leadingButtonIcon:C,onLinkName:A,onSuccessElement:j,text:R,updateCacheOnChoose:M,variant:_}=q({action:n,buttonSuccessText:s,text:m,variant:L}),D="ADD"===T?"".concat(R," ").concat(f):R,{onClick:V,isEnableAction:F,disableAction:B}=(()=>{const{0:e,1:n}=(0,c.useState)(!1),{authState:{isLoggedIn:t}}=(0,i.Eu)(),{signIn:a}=(0,r.z)();return{disableAction:()=>{n(!1)},onClick:()=>{t?n(!0):a()},isEnableAction:e}})(),P=b&&w?{ls:{id:w,lt:b,...(S&&{nm:S})}}:{},Z=(0,l.AP)({analyticsName:"addToRegistry",context:p,pageTitle:E,selectLinkName:"registryClick",usItemId:I,addLsExtras:P});return T&&_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{"aria-label":D,className:x,style:u,isFullWidth:g,onClick:V,onLinkExtras:Z.addItemsLabelClick,onLinkName:A,size:"small",variant:_,"data-dca-id":"B:5227338FDB","data-dca-intent":"__DCA_TBD__",children:R}),F&&(0,a.jsx)(k,{analyticsDetails:Z,disableAction:B,initialAction:T,itemImage:y,itemName:f,itemPrice:h,itemType:v,onSuccess:j,pageId:w,pageType:b,title:S,updateCacheOnChoose:M,usItemId:I})]}):(0,a.jsxs)("span",{className:"w-100 ".concat(t),children:[C&&(0,a.jsx)(d.J,{"aria-hidden":!0,name:C,size:"small"}),(0,a.jsx)("span",{className:"f6",ref:N,tabIndex:-1,children:R})]})}},761050:function(e,n,t){t.d(n,{b:function(){return x},Z:function(){return p}});var a=t(487954),i=t(714818),r=t(194742),l=t(302303),s=t(682081),o=t(444002),d=t(995433),c=t(408694),m=t(403464);const u=e=>{let{a11yId:n,list:t,selectList:i,groupName:r,isManageMode:u,showImageTile:x}=e;const p=u&&t.maxItemsReached;return(0,a.jsxs)("span",{className:"flex sans-serif bg-white bw0 w-100 pointer ph0",onClick:()=>i(t),children:[(0,a.jsxs)("span",{"aria-hidden":!0,className:"flex-grow-1 tl",children:[(0,a.jsx)("span",{id:"".concat(r,"name-id-").concat(n),className:"mid-gray f6 normal word-wrap",children:(0,a.jsx)(l.W,{lines:2,"data-qm-mask":!0,children:t.name})}),t.ownerName&&(0,a.jsxs)("span",{id:"owner-id-".concat(n),className:"gray f7 normal","data-qm-mask":!0,children:[(0,s.m)(m,"owner")," ",t.ownerName]}),t.showPrimary&&(0,a.jsxs)("span",{id:"favorite-id-".concat(n),className:"gray f7 normal flex items-center",children:[(0,a.jsx)(o.J,{"aria-hidden":!0,className:"mr2 primary",name:"HeartFill"}),(0,s.m)(m,"favorites")]}),p&&(0,a.jsxs)("span",{id:"max-list-id-".concat(n),className:"gray f7 normal flex items-center",children:[(0,a.jsx)(o.J,{"aria-hidden":!0,className:"mr1 blue",name:"InfoCircle"}),(0,s.m)(m,"maxListItemsInlineMessage")]})]}),x&&(0,a.jsx)(d.Z,{alt:t.recentItemName?"last added ".concat(t.recentItemName):"",className:"ml4",src:(0,c.P)({src:t.recentItemImage,height:"48",width:"48"}),height:48,width:48,preload:!0})]})};const x=e=>{let{allowRadioNav:n,analyticsDetails:t,lists:l,selectedList:s,selectList:o,isManageMode:d,groupName:c="",showImageTile:m=!0}=e;const x=(0,r.useRef)([]);x.current=l.map(()=>(0,r.createRef)());const p=(0,r.useCallback)(()=>l.findIndex(e=>e.id===s.id),[l,s]);return(0,r.useEffect)(()=>{if(n){const n=p();var e;if(n>=0)null===(e=x.current[n].current)||void 0===e||e.focus()}},[n,p]),(0,a.jsx)("ul",{className:"pa0 ma0",role:"radiogroup",children:l.map((e,n)=>{const r=x.current[n],l=d&&e.maxItemsReached;return(0,a.jsxs)("li",{"data-dca-id":"lists_add_items:select_a_list:list_tile_".concat(e.id),"data-dca-intent":"select","data-dca-name":"ItemAddToListAddItemsTile",className:"flex list w-100 pv3 b--near-white pointer ".concat(n?"bt":""),children:[(0,a.jsx)(i.Z,{a11yLabelledBy:"".concat(c,"name-id-").concat(n," favorite-id-").concat(n," owner-id-").concat(n," max-list-id-").concat(n),checked:e.id===s.id&&!l,className:"pr1 mr2",name:"list",onLinkName:t.selectLinkName,onChange:()=>o(e),onLinkExtras:t.onListSelect(e),ref:r,disabled:l}),(0,a.jsx)(u,{a11yId:n,list:e,selectList:o,isManageMode:d,showImageTile:m,groupName:c})]},"list-tile-".concat(e.id))})})};var p=x},153059:function(e,n,t){t.d(n,{I:function(){return i},l:function(){return r}});var a=t(633854);const i={get:()=>{var e,n;return null===(n=null===(e=(0,a.p)())||void 0===e?void 0:e.get())||void 0===n?void 0:n.listRegistry},set:e=>{var n;return null===(n=(0,a.p)())||void 0===n?void 0:n.set({listRegistry:e})},remove:()=>{var e;const n=null===(e=(0,a.p)())||void 0===e?void 0:e.get();if(n){var t;const{listRegistry:e,...i}=n;null===(t=(0,a.p)())||void 0===t||t.set(i)}}},r=e=>{let{pageId:n,pageType:t,title:a,scope:r="registry"}=e;return null===i||void 0===i?void 0:i.set({lastModified:Date.now(),moduleVariant:"CHOOSE_ADD",pageId:n,pageType:t,scope:r,title:a})}},908534:function(e,n,t){t.d(n,{Z:function(){return w}});var a=t(155394),i=t(682081),r=t(425443),l=t(297693),s=t(465205),o=t(179404),d=t(784289),c=t(764766),m=t(415627),u=t(717167),x=t(169110),p=t(505340);const g={type:"mutation",name:"addItemToRegistryLite",hash:"a961f4eb202d8d414fd4a677bed81aa6deb73bd6f650971abcf8ca98ef1b3279"},y=(e,n)=>{let{timeoutMs:t,loggingEnable:a,isMobile:i}=n;return{mutationFn:n=>e.getGqlFetch((0,x.d)(i),{timeoutMs:t})(g,n).then(e=>{const t=e.errors;if((0,p.jg)({apiName:"addItemToRegistryLite",gqlVariables:n,additionalTags:[(null===t||void 0===t?void 0:t.length)?p.Hi.TAGS.GQL_CALL_FAILURE:p.Hi.TAGS.GQL_CALL_SUCCESS],errors:t,loggingEnable:a}),t){var i;const e=new Error("Sorry, something went wrong. Try again later.");return e.name=(null===(i=t[0].extensions)||void 0===i?void 0:i.code)||"Non GQL Error",Promise.reject(e)}return e})}};var f=t(563041),h=t(192173);const v={landingPageQueryKey:u.vf,detailsPageQueryKey:u.gr,snackbarViewClickName:(0,i.m)(f,"viewRegistry"),snackbarViewAnalyticsName:"viewRegistry",successName:"addedToRegistry",getDetailsPage:(e,n)=>"/registry/".concat(e,"/").concat(n)};var w=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v;const x=(0,s.Zq)(),p=(0,o.Z)(),{router:g}=(0,c.tv)(),w=(0,l.wG)(),{addSnack:E}=(0,a.useSnackbar)(),{isMobile:b}=(0,r.vP)(),{timeoutMs:S,loggingEnable:I}=(0,h.M)(),{mutationFn:L}=y(p,{isMobile:b,timeoutMs:S,loggingEnable:I});return(0,d.D)(L,{onSuccess:(a,r)=>{let{input:{registryType:l,registryId:s},name:o,maxItemsReached:d,setShouldToggle:c=m.Z,reFetchDetailsPage:p=!0,handleSuccess:y=m.Z}=r;d&&c(!0),x.invalidateQueries(u.landingPageQueryKey),p&&x.invalidateQueries(u.detailsPageQueryKey);const h={name:o,type:l,id:s};if(t){const n=e.addItemsSuccess(h);w({context:e.context,action:"moduleView",name:u.successName,payload:n})}n&&setTimeout(()=>E({message:(0,i.m)(f,"savedTo",{name:o}),actionButtonProps:{children:u.snackbarViewClickName,onClick:()=>{const n=e.viewClick(h);w({context:e.context,action:"onLink",name:u.snackbarViewAnalyticsName,payload:n}),g.push(u.getDetailsPage(l,s))}},"data-qm-mask":"true"}),1e3),y()},onError:(e,n)=>{let{setPage:t=m.Z,openMaxItemModal:a=m.Z,handleMaxItem:i=m.Z,handleError:r=m.Z}=n;"LSE-4057"===e.name?(t("maxItemLimitContentKey"),a(),i()):g.query.type?t("errorAddItemContentKey"):r()}})}},26797:function(e,n,t){t.d(n,{Z:function(){return x}});var a=t(425443),i=t(179404),r=t(222830),l=t(169110),s=t(717167),o=t(505340),d=t(971960),c=t(473630);const m={type:"query",name:"getRegistries",hash:"78bdb638256537f036ca2fc5b7201cbef4715b39fa701562f52d56ea4e17a169"};var u=t(192173);var x=()=>{const e=(0,i.Z)(),{isMobile:n}=(0,a.vP)(),{timeoutMs:t,loggingEnable:x}=(0,u.M)(),p=((e,n)=>{let{timeoutMs:t,loggingEnable:a,isMobile:i}=n;return{queryFn:()=>(0,c.u)(e.getGqlFetch((0,l.d)(i),{timeoutMs:t})(m),d.ZP).then(e=>{const n=e.errors;return(0,o.jg)({apiName:"shoppingLists",queryKey:[s.vf,"add-items"],additionalTags:[(null===n||void 0===n?void 0:n.length)?o.Hi.TAGS.GQL_CALL_FAILURE:o.Hi.TAGS.GQL_CALL_SUCCESS],errors:n,loggingEnable:a}),e}),queryKey:[s.vf,"add-items"]}})(e,{isMobile:n,timeoutMs:t,loggingEnable:x}),{data:g,error:y,isFetching:f,isLoading:h,isStale:v,refetch:w,isSuccess:E}=(0,r.a)({...p,config:{enabled:!1,refetchOnWindowFocus:!1,staleTime:1/0}}),b=(null===g||void 0===g?void 0:g.data)||[],S=!!(null===g||void 0===g?void 0:g.errors)||!!y;return{isFetchError:S,lists:b,isSuccess:E,refetch:()=>{(v||S)&&w()},showSpinner:f||h}}}}]);