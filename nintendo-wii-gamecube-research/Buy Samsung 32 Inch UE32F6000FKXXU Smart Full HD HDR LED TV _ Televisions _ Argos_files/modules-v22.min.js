/*! argoscouk v3.1.0 | 2025-11-25T11:00:13 | 5aed998c3595be6971651fe8650d569326d823e9 | Copyright. All rights reserved. 2025. Digital Media Technologies Ltd. */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){if("function"==typeof window.CustomEvent)return;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),a}t.prototype=window.Event.prototype,window.CustomEvent=t}(),function(r){function n(){var t=w[q]||767,e="desktop";return window.innerWidth<=t&&(e="mobile"),e}function i(){return"mobile"===n()}function g(){function t(t){return t&&-1<x.indexOf(t)}var e=taggstar.$("body").data("tagg-insert-function"),a=taggstar.$("body").data("tagg-insert-function-m");return i()&&t(a)&&(e=a),t(e)||(e=P[q][n()]),e}function p(t,e){var a;switch(q){case"category":a=taggstar.$('[data-test="component-product-card"][data-product-id="'+t+'"]'),e||a.find(".tagg-category-page").remove()}return function(e){function t(t){return t&&D(t,e).length}var a=taggstar.$("body").data("tagg-anchor"),r=taggstar.$("body").data("tagg-anchor-m");return i()&&t(r)&&(a=r),t(a)||(a=I[q][n()]),D(a,e)}(a)}function o(t){var e={},a=taggstar.getVisitor();return e.version=1,e.visitor=a&&a.id,e.module=taggstar.config.module,taggstar.config.experienceRequired||t&&t.hasOwnProperty("experiment")&&t.experiment&&(e.experiment={id:t.experiment.id,group:t.experiment.group}),e.socialProof=function(t){var e,a,r,n,o,i,g,c=[],s=t.socialProof;if(s)for(e=0;e<s.length;e++)for(r=(n=s[e]).product&&n.product.id,o=n.messages,a=0;a<o.length;a++)g={productId:r,code:(i=o[a]).code,data:i.data,text:i.message},c.push(g);return c}(t),e}function c(a){return new Promise(function(t){try{var e=new CustomEvent("taggstar:response",{detail:o(a)});document.dispatchEvent(e),taggstar.analytics=taggstar.analytics||[],taggstar.analytics.push({data:o(a),timestamp:Date.now()})}catch(t){taggstar.log("error submitting tracking object")}finally{t(a)}})}function t(){taggstar.log("submitting ATB request");var t=document.getElementById("add-to-trolley-quantity").value,e=parseInt(t,10)||1,a={category:"basket",name:"add",data:{label:L(l,"productInfo","productID"),value:e}};taggstar.eventRequest(a).then(function(){delete a.eventGroupId,c({action:a})}).catch(B)}function u(r,n,o,t){var i=!1;n.css(o.animatePre),r.append(n),(r.hasClass("tagg-two-balloons")&&1==t||!r.hasClass("tagg-two-balloons"))&&(i=!0),o.closeButton&&0==n.find(".tagg-x").length&&n.append("<div class='tagg-x'></div>"),taggstar.log("i: "+t),setTimeout(function(){taggstar.log("Animating balloon: "+t),n.animate(o.animateIn,o.fade,function(){var t,e,a;t=o,e=n,a=function(t){t.animate(o.animateOut,o.fade,function(){i&&setTimeout(function(){r.remove()},o.fade)})},taggstar.keepUI||setTimeout(function(){a(e)},t.hold)})},1e3*t),n.find(".tagg-x").on("click",function(t){t.stopPropagation(),n.animate({opacity:0},0,function(){taggstar.log("fadeOut")})})}function a(){var t,e,a,r,n,o,i,g,c,s,u,d;if(b=A.experienceRequired?b||taggstar.params&&taggstar.params.taggExperienceId||taggstar.$("body").data("tagg-experience"):void 0,m||(m=L("page","category","subCategory3")||"-"),y={category:m,products:[]},h=document.querySelector('[data-test="product-list"]'))for(r=(t=h.querySelectorAll('[data-test="component-product-card"]')).length,n=0;n<r;n++)(a=t[n])&&(g=a.querySelector('[data-test="component-product-card-imageWrapper"]'),c=(s=a.querySelector('[data-test="component-badge"]'))&&"sponsored"===s.innerText.toLowerCase(),d=(u=a.querySelector('[data-test="component-product-card-contentBlock"] [class^="ProductCardstyles__BadgeContainer"] picture img'))&&-1<u.getAttribute("src").toLowerCase().indexOf("clearance_badge"),!g||c||d||(o=g.getAttribute("data-tagg-processed"),A.experienceRequired&&!b||!y.category||o||((e=a.getAttribute("data-product-id"))&&!a.querySelector('[data-test="component-badge"]')&&(e=""+e,y.products.indexOf(e)<0&&y.products.push(e)),(i=a.querySelector('[data-test="component-att-button"]'))&&(i.removeEventListener("click",F),i.addEventListener("click",F)),g.setAttribute("data-tagg-processed",!0))));return(!A.experienceRequired||b)&&y.category&&y.products.length&&p(R(y,"products.0"),!0).length}function d(t){var e=" tagg-"+(taggstar.getDetail("category")&&taggstar.getDetail("category").experienceId&&taggstar.getDetail("category").experienceId.replace(":","-"));taggstar.displayMessageBalloonsMulti(t,p,{extraClass:"tagg-category-page tagg-"+E+e,insertFunction:g()}).then(function(){taggstar.$(".tagg-balloons-wrapper").fadeIn(500)}).then(function(){taggstar.$(".tagg-balloons-wrapper").parents('[data-test="component-product-card"]').each(function(){var t=taggstar.$(this).find('[data-test="component-badge"]');t&&"sponsored"===t.text().toLowerCase()&&taggstar.$(this).find(".tagg-balloons-wrapper").css("display","none")})}).catch(B)}var e,l,f,m,y,h,v,b,x=["before","after","prepend","append"],P={category:{desktop:"before",mobile:"before"},product:{desktop:"append",mobile:"append"}},I={category:{desktop:'[data-test="component-product-card-imageContainer"]',mobile:'[data-test="component-product-card-imageContainer"]'},product:{desktop:".pdp-core .ac-slider",mobile:".pdp-core .ac-slider"}},w={product:767,category:991},C="data",q="",$=!0,O={},k=[],S={},A=taggstar.config,E=taggstar.config.key,B=taggstar.exception.handle,R=taggstar.util.getObjectByPath,T={rePrice:/\d+(?:\.\d{1,2})?/,reQtyClean:/\D/g,reConversionPage:/Reserve|Buy|Prepay/i,getPriceFromString:function(t){var e=t&&t.match(this.rePrice);if(e)return e[0]},getOmnitureVal:function(t){return window.s&&s[t]},getOmnitureProductJSON:function(t){var a=["cat","sku","qty","price","totalQty|totalPrice|units|unitPrice"],r=[];if(t){var e=t.split(",");taggstar.$(e).each(function(t,e){var i=e.split(";"),g={};r.push(g),taggstar.$(a).each(function(t,e){var a=i[t];if(a)if(e.indexOf("|")){var r=a.split("|"),n=e.split("|");taggstar.$(r).each(function(t,e){var a=e.indexOf("=");-1<a&&(r[t]=e.substr(a+1))});for(var o=0;o<n.length;o++)g[n[o]]=r[o]}else g[e]=a})})}return r},getOmnitureProducts:function(){var t,c,s=this,e=s.getOmnitureProductJSON(r.s&&r.s.products);return e&&Array.isArray(e)&&e.length?(c=[],taggstar.$(e).each(function(t,e){if(e.sku){var a=s.getPriceFromString(e.price||e.unitPrice),r=s.getPriceFromString(e.totalPrice),n=(e.qty||e.units||"").replace(s.reQtyClean,""),o=(e.totalQty||"").replace(s.reQtyClean,""),i=n||o,g=a;!g&&r&&(g=r,1<i&&(g=r/i)),c.push({displayId:e.sku,quantity:i+""||void 0,productPrice:g+""||void 0})}})):(t=L("transaction","item"))&&(c=[],taggstar.$(t).each(function(t,e){c.push({displayId:e.id,quantity:e.quantity+""||void 0,productPrice:e.price+""||void 0})})),c},getOrderId:function(){var t,e=this.getOmnitureVal("purchaseID");return e||(t=L("transaction","orderNumber"))&&Array.isArray(t)&&t.length&&(e=t[0].split("-")[0]||t[0]),e}},D=function(t,e){var a;return(a=e?e.is(t)?e:e.find(t):taggstar.$(t)).selector||(a.selector=t),a},L=function(t){var e,a=Array.prototype.slice.call(arguments);for(a.reverse(),"object"==(void 0===t?"undefined":_typeof(t))?a.pop():t=r.digitalData;t&&void 0!==(e=a.pop());)t=t[e];return t},F=function(){taggstar.log("category ATB Clicked");var t={category:"basket",name:"add",data:{label:taggstar.$(this).parents('[data-test="component-product-card"]')[0].getAttribute("data-product-id"),value:1}};taggstar.eventRequest(t).then(function(){delete t.eventGroupId,c({action:t})})},_={category:{condition:a,module:function(){var e;try{e=setInterval(function(){($||a())&&($=!1,function(){var t,e,a=[],r={};for(A.experienceRequired&&(S.experienceId=b),S.detail=!0,Object.keys(S).length&&taggstar.init(S),t=0;t<y.products.length;t++)e=y.products[t],k.indexOf(e)<0&&(k.push(e),a.push(e)),O[e]&&(r[e]=O[e]);a.length?(y.products=a,taggstar.categoryRequest(y).then(c).then(taggstar.handleResponseMulti).then(function(t){taggstar.$.extend(O,t),taggstar.$.extend(r,t),d(r)}).catch(B)):d(r)}())},3*A.interval)}catch(t){clearInterval(e)}}},product:{condition:function(){return l=l||L("product",0),(f={id:L(l,"productInfo","productID"),name:L(l,"productInfo","productName"),price:L(l,"attributes","unitPriceWithTax"),category:function(){var t=L("page","category"),e=L(t,"subCategory1"),a=L(t,"subCategory2");return a?"/"+e+"/"+a:e}()}).id&&p().length},module:function(){taggstar.init({deviceType:n(),detail:!0}),taggstar.productRequest(f).then(c).then(function(t){var e=t.products&&t.products.length&&t.products[0].tags;return e&&e.length&&"BLACK_FRIDAY"===e[0].id&&!0,taggstar.handleProductResponse(t)}).then(function(r){var n=" tagg-"+(taggstar.getDetail("product")&&taggstar.getDetail("product").experienceId&&taggstar.getDetail("product").experienceId.replace(":","-")),t=taggstar.$('[data-test="badge-image"][alt="CLEARANCE_BADGE"]').length||taggstar.$('[data-test="badge-image"][alt="clearance_badge"]').length;if("Currently unavailable"===taggstar.$(".h3.fulfilment-heading").html()||t)taggstar.log("product out of stock or is clearance, suppressing messages","info");else var o=setInterval(function(){var t=p(),e=t.offset().top+t.height()/2,a=taggstar.$(window);e>=a.scrollTop()&&e<=a.scrollTop()+a.height()?(clearInterval(o),taggstar.displayMessageBalloons(r,t.selector,{extraClass:"tagg-product-page tagg-"+E+(1<r.length?" tagg-two-balloons":"")+n,insertFunction:g(),closeButton:!0,hold:i()?3e3:3500,delayBetween:i()?3500:2500,customAnimation:!!i()&&u}).then(function(){var t=r.filter(function(t){return t.message&&t.message.match(/tagg-pdp-v1/i)}),e=r.filter(function(t){return t.message&&t.message.match(/tagg-pdp-ctrl/i)});t&&0<t.length?taggstar.$(".tagg-balloons-wrapper").addClass("tagg-pdp-v1"):e&&0<e.length&&taggstar.$(".tagg-balloons-wrapper").addClass("tagg-pdp-ctrl")}).catch(B)):taggstar.log("anchor not visible, waiting...")},500)}).catch(B),taggstar.$(".xs-8--none button").click(t)}},conversion:{condition:function(){var t,e,a,r,n=[],o=0;for(t=taggstar.$(".table-total-price > td.table-price").text()||taggstar.$("dd.totals").text()||taggstar.$("td.total-price").text(),T.getPriceFromString(t)&&(C="html"),e=T.getOmnitureProducts(),r=0;r<e.length;r++)a=e[r],n.push({id:a.displayId,unitPrice:parseFloat(a.productPrice),quantity:parseInt(a.quantity,10)}),o+=parseFloat(a.productPrice)*parseInt(a.quantity,10);return(v={id:T.getOrderId(),currency:"GBP",totalPrice:T.getPriceFromString(t)||o,orderItems:n}).id&&v.currency&&v.totalPrice&&v.orderItems.length},module:function(){taggstar.init({currencyCode:v.currency,deviceType:n()});var a={dim1:T.getOmnitureVal("eVar13")||L("transaction","type"),dim2:C},r=!0;taggstar.$(v.orderItems).each(function(t,e){if(1e3<e.quantity)return r=!1;"prepay"!==a.dim1&&e.quantity&&(v.orderItems[t].unitPrice=+(e.unitPrice/e.quantity).toFixed(2))}),r&&taggstar.conversionRequest(v,a).then(function(t){taggstar.log("conversion successful","info"),taggstar.log(t,"info")}).catch(B)}}};!function(){var t,e,a,r,n=taggstar.util.getCookie("_taggstar_dbg");if(n)for(taggstar.debug=!0,t=n.split("|"),e=0;e<t.length;e++)switch((a=t[e].split(":"))[0]){case"kui":taggstar.keepUI="true"===a[1];break;case"prd":r=a[1];break;case"id":"client"===r&&a[1]&&(taggstar.params.taggExperienceId=a[1]),"server"===r&&a[1]&&(taggstar.params.taggExperimentId=a[1]);break;case"grp":"server"===r&&a[1]&&(taggstar.params.taggExperimentGroup=a[1])}}(),taggstar.boot(function(){return e=L("product",0)||L("transaction","item","0")||T.getOmnitureVal("pageName")||T.getOmnitureVal("eVar13")||L("page","category","pageType"),q=e?"PLP"===L("page","category","pageType")||"PLPPLUS"===L("page","category","pageType")||"SLP"===L("page","category","pageType")?"category":0===window.location.pathname.indexOf("/product/")?"product":function(){var t=T.getOmnitureVal("pageName"),e=0===window.location.pathname.indexOf("/confirmation/"),a=L("transaction","collectionId");return!!(t&&-1<t.toLowerCase().indexOf("confirmation"))||(e||!!a)}()?"conversion":taggstar.constant.null:taggstar.constant.null},_).catch(B)}(window);