(function(l){var k=window.AmazonUIPageJS||window.P,w=k._namespace||k.attributeErrors,d=w?w("TradeInInstantSavingsAssets@launcher","TradeInInstantSavingsAssets"):k;d.guardFatal?d.guardFatal(l)(d,window):d.execute(function(){l(d,window)})})(function(l,k,w){l.when("A").register("trade-in-constants",function(d){return{unauthorizedCode:401,maxTradeInItemQuantityStatusCode:204,cacheExpiredStatusCode:409,autoCompleteUrl:"https://completion.amazon.com/api/2017/suggestions?",autoCompleteUrlSuffix:"/api/2017/suggestions?",
tradeInRouteBase:"/tradein/hzw/",appraisalInputName:"appraisal",customerIpPreferenceInputName:"instantPaymentPreference",appraisalReturn:"RETURN_WORSE",appraisalAccept:"ACCEPT_WORSE",itemSelectEligibleContext:"eligible",itemSelectSearchContext:"search",maximumTradeInItemsCount:5,tradeInSearchAlias:"ereaders",tradeInSearchPageSize:20,tanookiV2DesktopRowSize:3,tanookiV2MobileRowSize:2,tanookiV2DesktopSearchPageSize:15,tanookiV2MobileSearchPageSize:10,tradeInSearchResultsLoadContext:"onLoad",tradeInSearchResultsScrollContext:"onScroll",
sessionStorageAccessErrorMsg:"Session storage access blocked",AUTH_PORTAL_ASSOC_HANDLE:{com:"amzn_tradein_horizonte_us",uk:"amzn_tradein_horizonte_uk",de:"amzn_tradein_horizonte_de"},tradeInSecondaryViewName:"tradeInSecondaryView",tradeInModalName:"tradeInModal",tradeInSideSheetName:"tradeInSideSheet",csrfKeyMap:"csrfKeyMap",csrfQueryParam:"requestToken",csrfSearchRequestKey:"searchRequestKey",csrfReviewRequestKey:"reviewRequestKey",csrfRemoveRequestKey:"removeItemRequestKey",csrfSubmitRequestKey:"submitRequestKey",
csrfSaveGradedItemKey:"saveGradedItemRequestKey",csrfSearchAsinCategoryItemKey:"searchAsinCategoryRequestKey",validConditions:"N/A;Neutral;New;LikeNew;VeryGood;Good;Working;Acceptable;Damaged;NonFunctional;Unacceptable;Ruined;Wrong Item".split(";"),resetAllElementsEvent:"resetAllElementsEvent",priceBlockSessionStorageKey:"launchTradeInPriceBlock",tanookiSessionStorageKey:"launchTradeIn",tanookiV2SessionStorageKey:"launchAsinCategoryTradeIn",priceBlockTanookiV2SessionStorageKey:"launchAsinCategoryTradeInPriceBlock",
priceBlockIngressType:"tradein-price-block",recycleAndSaveIngressType:"tradein-recycle-save",tanookiBuyboxMetric:"tanooki_launch_buy_box",tanookiBuyboxMobileMetric:"tanooki_launch_buy_box_mobile",tanookiPriceblockMetric:"tanooki_launch_price_block",tanookiPriceblockMobileMetric:"tannoki_launch_price_block_mobile",tanookiV2PastPurchaseSelectedMetric:"tv2_past_purchase_item_selected",refTagPrefix:"dp_trdv2_is_",refTagPrefixMobile:"dp_trdv2_is_m_",refTagPriceBlockPrefix:"dp_price_block_",refTagPriceBlockPrefixMobile:"dp_price_block_m_",
refTagRecycleAndSaveTanookiPrefix:"dp_recycle_save_tanooki_ingress_",refTagRecycleAndSaveTanookiPrefixMobile:"dp_recycle_save_tanooki_ingress_m",refTagListItemsView:"list_items_view",refTagSearchItemsView:"search_items_view",refTagConditionView:"condition_view",refTagConfirmationView:"confirmation_view",refTagSuccessfulView:"success_view",refTagSearchTermRequest:"search_term_request_",refTagSearchItemRemoveClick:"search_remove_click",refTagBackClick:"back_click",refTagListItemsContinueClick:"list_items_continue_click",
refTagGradedConditionClick:"graded_condition_",refTagAppraisalAccept:"appraisal_accept",refTagAppraisalReturn:"appraisal_return",refTagConditionContinueClick:"condition_continue_click",refTagReviewInstantPaymentView:"review_ip_view",refTagReviewNonInstantPaymentView:"review_nip_view",refTagReviewMixedBagPaymentView:"review_mb_view",refTagChangeConditionClick:"change_condition_click",refTagDeleteClick:"delete_click",refTagReturnAddressUpdateRequest:"return_address_update_request",refTagReturnAddressUpdateView:"return_address_update_view",
refTagTradeInMoreItems:"trade_more_items",refTagReturnToShopping:"return_to_shopping_click",refTagLogInPrompt:"log_in_prompt",refTagWeWantYouToKnow:"we_want_you_to_know_expanded",refTagPromotionInformationPopoverView:"promotion_information_panel_view",refTagAppraisalLearnMorePopoverView:"appraisal_learn_more_panel_view",refTagRegisteredDevicesLearnMorePopoverView:"registered_devices_learn_more_panel_view",refTagViewDropOffLocations:"view_drop_off_locations",refTagDropOffLocationClick:"drop_off_loc_",
refTagChangeStoreClick:"change_store_",refTagViewUBIFLocations:"view_ubif_locations",refTagButtonExperimentPreFix:"tanooki_",refTagTanookiLaunchedWithBlue:"lwbl",refTagTanookiLaunchedWithBorder:"lwbo",refTagTermsAndConditions:"select_terms_and_conditions",refTagHowToLink:"select_how_to_link",refTagPrintShippingLabel:"tv2_print_shipping_label",refTagNearbyProcessorsMobile:"nearby_processors_m",refTagNearbyProcessorsDesktop:"nearby_processors",refTagShippingOptionClick:"ship_opt_",refTagShippingShowMoreClick:"ship_more",
refTagStorefront:"sf",refTagDetailPage:"detail_page",refTagTv2:"tv2_",refTagPriceBlockIngress:"pb_",refTagAuthRequired:"AuthReq",refTagAuthCompleted:"AuthComp",refTagBackButton:"Back_",refTagExit:"Exit_",refTagEnd:"End",refTagChangeCondition:"ChgCond",refTagRemoveCartItem:"RmvItm",refTagHazmatError:"HazmatError",refTagIPDowngrade:"IPDowngrade",refTagIPUpgrade:"IPUpgrade",refTagMFAFailure:"_mfaFailure",refTagMFASuccess:"_mfaSuccess",BIFURCATION_REF_TAG:["tradein-manufacturer","tradein-vg-type"],VIEW_REF_TAG:{manufacturer:"Man",
model:"Mod","model-family":"ModFam","storage-size":"Stor","product-category":"product_category",carrier:"Carr","Console-Generation":"ConGen","Console-generation":"ConGen",Games:"Games",Accessories:"Access",platform:"Plat","trade-in-item-type":"IT",".refinement-search-view":"Search","#conditionViewTemplate":"Cond",".submit-trade-in-content":"Review",".tradein-cart-view":"Cart","#tradeinReviewYourOrderNextStepTemplate":"NxtStp"},PRODUCT_GROUP_REF_TAG:{gl_wireless:"Wir",gl_electronics:"Elec",gl_video_games:"VG",
gl_digital_video_games:"VG",gl_digital_products_3:"AUCC"},PRODUCT_GROUP_SHORT_REF_TAG:{gl_wireless:"WL",gl_electronics:"WL",gl_video_games:"VG",gl_digital_video_games:"VG",gl_digital_text:"eink",gl_digital_text_2:"tablet",gl_digital_products_3:"efd",gl_digital_devices_4:"smp",gl_digital_products_9_accessory:"vicc_rg",gl_vdo_devices:"vicc_bl",gl_digital_products_22_accessory:"eero",gl_digital_products_18_accessory:"health"},APPRAISAL_REF_TAG:{ACCEPT_WORSE:"Accpt",RETURN_WORSE:"Dcln"},eligibleListViewClass:".tradein-eligible-list-view",
searchResultsListViewClass:".tradein-search-results-list-view",selectedItemConditionViewClass:".tradein-selected-item-condition-view",selectedItemsConfirmationViewClass:".tradein-selected-items-confirmation-view",successfulViewClass:".tradein-successful-view",tradeInWrapperClass:".tradein-wrapper",checkboxItemThumbTemplateId:"#checkboxItemThumbTemplate",eligibleItemTemplateId:"#eligibleItemTemplate",questionRadioButtonTemplateId:"#questionRadioButtonTemplate",questionRadioTemplateId:"#questionRadioTemplate",
radioButtonTemplateId:"#radioButtonTemplate",itemConfirmationTemplateId:"#itemConfirmationTemplate",asinDetailsViewTemplateId:"#asinDetailsViewTemplate",eligibleListViewTemplateId:"#eligibleListViewTemplate",pastPurchasedListViewTemplateId:"#pastPurchasedListViewTemplate",searchResultsListViewTemplateId:"#searchResultsListViewTemplate",searchResultItemTemplateId:"#searchResultItemTemplate",selectedItemConditionViewTemplateId:"#selectedItemConditionViewTemplate",selectedItemsConfirmationViewTemplateId:"#selectedItemsConfirmationViewTemplate",
successfulTradeInViewTemplateId:"#successfulTradeInViewTemplate",radioButtonRestrictionSelectionTemplateId:"#radioButtonRefinementSelectorViewTemplate",cardItemRestrictionSelectionViewTemplateId:"#searchRestrictionCardItemSelectionTemplate",conditionViewTemplateId:"#conditionViewTemplate",tradeinHeaderViewTemplateId:"#tradeinHeaderViewTemplate",tradeinCartHeaderTemplateId:"#tradeInCartHeaderTemplate",tradeinCartSubmitViewHeaderTemplateId:"#tradeInCartHeaderTemplateSubmitView",tradeInCartPromosTemplateId:"#tradeInCartPromosTemplate",
tradeInPromoPreviewViewTemplate:"#tradeInPromoPreviewViewTemplate",verticalComplexCardViewTemplateId:"#verticalComplexCardViewTemplate",appraisalSelectionComponentViewId:"#appraisalSelectionComponentView",promotionInformationComponentId:"#promotionInformationComponent",appraisalWrapperClass:".appraisal-wrapper",conditionAppraisalMaxTivClass:".appraisal-max-tiv",appraisalTivHeaderClass:".appraisal-tiv-header",appraisalTivPriceClass:".appraisal-tiv",termsAndAgreementViewTemplateId:"#termsAndAgreementViewTemplate",
multiItemTermsAndAgreementViewTemplateId:"#additionalItemTermsAndAgreementViewTemplate",multiItemTermsAndAgreementViewTemplateDevicesId:"#additionalItemTermsAndAgreementViewTemplateDevices",tradeinReviewYourOrderNextStepTemplateId:"#tradeinReviewYourOrderNextStepTemplate",mixedOfferNextStepsTemplateId:"#mixedOfferNextStepsTemplate",multiItemConfirmationOrderDetailsViewComponentClass:".multiItemConfirmationOrderDetailsViewComponent",wirelessHowToViewTemplateId:"#wirelessHowToViewTemplate",howToLinkHelperTitleId:"#categoryHelperTitle",
tradeinFooterComponentId:"#tradeinFooterComponent",successfulTradeInBannerComponentViewId:"#successfulTradeInBannerComponentView",restrictionSelectionViewTemplateId:"#restrictionSelectionViewTemplate",tradeInSubmitConditionButtonTemplateId:"#tradeInSubmitConditionButtonTemplate",conditionQuestionnaireListClass:".questionnaires-list",conditionQuestionContainerClass:".condition-question-container",conditionQuestionButtonSelectorClass:".question-selector-button",conditionPageEstimatedTivComponentsSelector:"#tradeinEstimateOfferComponent .estimate-component",
conditionPageFinalTivComponentsSelector:"#tradeinEstimateOfferComponent .final-component",conditionPageHeaderTivSelector:"#tradeinEstimateOfferComponent #tradeInValue",binaryQuestionnaireListViewTemplateId:"#binaryQuestionnaireListViewTemplate",searchRefinementItemSelectionTemplateId:"#searchRefinementItemSelectionTemplate",refinementSearchViewTemplateId:"#refinementSearchViewTemplate",refinementSearchInputSelector:".refinement-search-input",refinementSearchInputMobileSelector:".refinement-search-input input",
refinementSearchAllOffersCountId:"#searchAllOffersCount",refinementSearchOnlyOffersCountId:"#searchOnlyOffersCount",refinementSearchResultSelector:".refinement-selection-content .refinement-column",shipmentDetailViewComponentId:"#shipmentDetailViewComponent",dropOffBannerNoLinkComponentId:"#dropOffBannerNoLinkComponent",dropOffBannerNoLinkTemplateId:"#dropOffBannerNoLinkTemplate",dropOffLocationExpanderId:"#dropOffLocationExpander",dropOffLocationsTemplateId:"#dropOffLocationsTemplate",dropOffLocationListTemplateId:"#dropOffLocationListTemplate",
offlineMessageSectionClass:".offline-message-section",tradeInOfferOverviewTemplateId:"#tradeInOfferOverviewTemplate",categoryRefinementSelectionItemComponentId:"#categoryRefinementSelectionItemComponent",tradeinCartItemComponentId:"#tradeInCartItemComponent",shipmentDetailsHeaderComponentClass:".shipment-details-header-component",tradeinSubmitButtonComponentClass:".tradein-submit-button-container",tradeinSubmitWrapperComponentId:"#tradeinSubmitWrapper",refinementSelectionViewWrapperClass:".refinement-selection-view",
refinementContentWrapperClass:".refinement-content-wrapper",refinementSearchViewClass:".refinement-search-view",submitTradeInWrapperClass:".submit-trade-in-content",searchRestrictionWrapperClass:".search-restriction-wrapper",searchLoadMoreResultsWrapperClass:".load-more-results-wrapper",cardItemRestrictionSelectionViewClass:".restriction-selection-view",wirelessTradeInReviewYourOrderViewClass:".wireless-tradein-review-your-order-view",tradeInCartViewClass:".tradein-cart-view",tradeInCartTemplateId:"#tradeInCartViewTemplate",
tradeinCartTotalTivElement:".cart-total-tiv",tradeinCartGCValueIpElement:"#gcValueIp",tradeinCartGCValueNonIpElement:"#gcValueNonIp",tradeinCartIpItemsSection:".tradein-cart-view-ip-items",tradeinCartNonIpItemsSection:".tradein-cart-view-nip-items",tradeinCartIpItemsList:".tradein-cart-item-list-ip",tradeinCartNonIpItemsList:".tradein-cart-item-list-nip",continueConditionButtonViewClass:".continue-trigger",submitButtonViewClass:".handle-submit-your-tradein",reviewButtonViewClass:".handle-review-your-tradein",
tradeInMoreItemsButtonViewClass:".handle-trade-in-more-items",agreementCheckboxTarget:".agreement-checkbox-target",tradeInMoreItemsButtonContainerClass:".tradein-more-items-button-container",searchInputClass:".search-input",searchInputClassMobile:".search-input input",searchFormClass:".search-form",searchSuggestionsClass:".tradein-autocomplete-dropdown-menu",eligibleItemsCountId:"#eligibleItemsCount",dateRegisteredClass:".registered-date",eligibleItemListClass:".tradein-eligible-item-list",eligibleItemListWrapper:".tradein-eligible-item-list-wrapper",
searchResultListClass:".tradein-search-result-list",reviewTradeInItemsSubmitId:"#reviewTradeInItemsSubmit",customerPastDevicesPurchasesCarouselContainerId:"#customerPastDevicesPurchasesCarouselContainer",currentSelectedItemIndexId:"#currentSelectedItemIndex",selectedItemTotalCountId:"#selectedItemTotalCount",backButtonClass:".back-button",continueButtonClass:".continue-button",alertMaxItemQuantityClass:".tradein-error-quantity-limit",alertMaxItemsWarningClass:".tradein-warning-max-items",alertMaxItemsWarningClassMobile:".tradein-mobile-warning-max-items",
alertMaxGCValueWarningClass:".tradein-warning-max-gc-value",alertMaxGCValueWarningClassMobile:".tradein-mobile-warning-max-gc-value",alertPromptLoginClass:".tradein-prompt-log-in",alertItemAcceptableClass:".tradein-info-unacceptable-error",alertItemAcceptableClassMobile:".tradein-mobile-info-unacceptable-error",alertMaxItemQuantityBannerClass:".tradein-max-quantity-error",loadingSpinnerClass:".tradein-loading-spinner",loadingSideSheetSpinnerClass:".asin-selection-tradein-loading-spinner",searchLoadingSpinnerClass:".tradein-search-loading-spinner",
tradeinCartHeaderItemsSingularClass:".tradein-cart-header-items-singular",tradeinCartHeaderItemsPluralClass:".tradein-cart-header-items-plural",tradeInQuantityExceededErrorSelector:".tradein-templates .tradein-info-quantity-exceeded-error",tradeInAmountExceededErrorSelector:".tradein-templates .tradein-info-amount-exceeded-error",tradeInErrorExitButtonSelector:".tradein-templates .tradein-error-exit-button",tradeInMixHazmatErrorSelector:".tradein-templates .tradein-info-mix-hazmat-error",tradeInMixHazmatCartItemErrorSelector:".tradein-templates .tradein-info-mix-hazmat-error-cart-item",
tradeInHazmatItemList:".hazmat-item-list",tradeInHazmatListItemTemplate:".hazmat-asin-list-item-template",tradeInNonTradeableErrorSelector:".tradein-templates .tradein-info-non-tradeable-error",complexCardRefinementSelectionViewType:"COMPLEX_CARD_VIEW",simpleCardRefinementSelectionViewType:"SIMPLE_CARD_VIEW",containedButtonRefinementSelectionViewType:"CONTAINED_BUTTON_VIEW",searchRefinementViewType:"SEARCH_CARD_VIEW",tradeInItemTypeEcho:"US_Echo",tradeInEchoGl:"gl_digital_products_3",tradeInWirelessGl:"gl_wireless",
tradeInVGGl:"gl_video_games",tradeInDigitalVGGL:"gl_digital_video_games",tradeInElectronicsGL:"gl_electronics",tradeInVGProductGroups:["gl_video_games","gl_digital_video_games"],wirelessVgProductGroups:["gl_wireless","gl_video_games","gl_digital_video_games","gl_electronics"],tradeInCCCardEligibleGls:["gl_wireless"],tradeInLaunchButtonDeclarativeActionSelector:"#tradeInLaunchAction",instantPaymentPreferenceInputName:"instantPaymentPreference",instantPaymentNow:"PAID_NOW",instantPaymentLater:"PAID_LATER"}});
"use strict";l.when("A","trade-in-constants","tanooki-ingress-button-treatment").register("trade-in-common-utils",function(d,e,b){var c=d.$,f={locale:null,currencyCode:null,productGroup:null,deviceType:null,asin:null,selectedAsin:null,modalTitle:null,isStorefront:!1,refTagPrefix:null,refTagPrefixMobile:null,priceBlockEnabled:null,buyingPriceUpgradeAsin:null,promoDiscount:null,autoSearchTerm:"",captureTradeInContext:function(){var a=c("#tanookiWidgetState").data("tanookiWidgetState");a?(a.hasOwnProperty("productGroup")?
this.productGroup=a.productGroup:this.recordMetric("productGroupMissing"),a.hasOwnProperty("deviceType")?this.deviceType=a.deviceType:this.recordMetric("deviceTypeMissing"),a.hasOwnProperty("recycleAndSaveTitle")?this.modalTitle=a.recycleAndSaveTitle:a.hasOwnProperty("tanookiTitle")?this.modalTitle=a.tanookiTitle:this.recordMetric("deviceModalHeaderMissing"),a.hasOwnProperty("asin")&&(this.asin=a.asin),a.hasOwnProperty("buyingPrice")&&(this.buyingPriceUpgradeAsin=a.buyingPrice),a.hasOwnProperty("selectedAsin")&&
(this.selectedAsin=a.selectedAsin),a.hasOwnProperty("autoSearchTerm")&&(this.autoSearchTerm=a.autoSearchTerm)):this.recordMetric("widgetContextMissing")},updateTradeInContext:function(a){var b=c("#tanookiWidgetState").data("tanookiWidgetState");b.hasOwnProperty("productGroup")&&a.hasOwnProperty("productGroup")&&(b.productGroup=a.productGroup);b.hasOwnProperty("deviceType")&&a.hasOwnProperty("deviceType")&&(b.deviceType=a.deviceType);b.hasOwnProperty("tanookiTitle")&&a.hasOwnProperty("tanookiTitle")&&
(b.tanookiTitle=a.tanookiTitle);b.hasOwnProperty("asin")&&a.hasOwnProperty("asin")&&(b.asin=a.asin);b.hasOwnProperty("buyingPrice")&&a.hasOwnProperty("buyingPrice")&&(b.buyingPrice=a.buyingPrice);a.hasOwnProperty("selectedAsin")&&(b.selectedAsin=a.selectedAsin);a.hasOwnProperty("autoSearchTerm")&&(b.autoSearchTerm=a.autoSearchTerm);document.getElementById("tanookiWidgetState").dataset.tanookiWidgetState=JSON.stringify(b);this.captureTradeInContext()},setProductGroup:function(a){this.productGroup=
a},getProductGroup:function(){return this.productGroup},setRefTagPrefix:function(a){this.refTagPrefix=a},getRefTagPrefix:function(){return this.refTagPrefix?this.refTagPrefix:e.refTagPrefix},getUpgradeAsinBuyingPrice:function(){return this.buyingPriceUpgradeAsin},setRefTagPrefixMobile:function(a){this.refTagPrefixMobile=a},getRefTagPrefixMobile:function(){return this.refTagPrefixMobile?this.refTagPrefixMobile:e.refTagPrefixMobile},getCurrentAsin:function(){return this.asin},getSelectedAsin:function(){return this.selectedAsin},
getDeviceType:function(){return this.deviceType},getModalTitle:function(){return this.modalTitle||""},getIsStoreFront:function(){return this.isStorefront},setIsStoreFront:function(a){this.isStorefront=a},setLocale:function(a){this.locale=a},setPriceBlockEnabled:function(a){this.priceBlockEnabled=a},isPriceBlockEnabled:function(){return this.priceBlockEnabled},setPromoDiscount:function(a){this.promoDiscount=a},getPromoDiscount:function(){return this.promoDiscount},setCurrencyCode:function(a){this.currencyCode=
a},formatCurrency:function(a,b){this.currencyCode||this.recordError("Missing currency code","trade-in-common-utils");var e={style:"currency",currency:this.currencyCode};b&&c.extend(e,b);a=parseFloat(a);return a.toLocaleString(this.locale.replace("_","-"),e)},formatDate:function(a){if(!a)return"";a=a.split(" ");return a[0]+" "+a[1]+" "+a[2]},getRedirectAuthUrl:function(a){var b=k.location,c="https://"+b.host;b=b.pathname+b.search+b.hash;var e=c;-1<c.indexOf("aka.corp.amazon.com")&&(e="https://development.amazon.com");
return e+"/ap/signin?_encoding\x3dUTF8\x26openid.assoc_handle\x3d"+a+"\x26openid.claimed_id\x3dhttp://specs.openid.net/auth/2.0/identifier_select\x26openid.identity\x3dhttp://specs.openid.net/auth/2.0/identifier_select\x26openid.mode\x3dcheckid_setup\x26openid.ns\x3dhttp://specs.openid.net/auth/2.0\x26openid.return_to\x3d"+encodeURIComponent(c+b)},redirectToAuth:function(a,b){a=this.getRedirectAuthUrl(a);try{k.sessionStorage&&!this.hasStorefrontAutoLaunchParams()&&sessionStorage.setItem(b,!0)}catch(t){this.recordSessionStorageBlockedError(t)}k.location.href=
a},redirectToMFA:function(a){var b="https://"+k.location.host;-1<b.indexOf("aka.corp.amazon.com")&&(b="https://development.amazon.com");k.location.href=encodeURI(b+a)},getAuthPortalHandleFromHostname:function(){var a=k.location.hostname.match(/^(?:(?:(?:(\w\w)-)?pre-prod)|(?:(?:(\w\w)-)?development)|(?:.+))\.amazon.(?:(\w\w)|(com)|(?:co\.(?:(\w\w))))?$/);if(a)for(var b=1;b<a.length;b++)if(a[b])return e.AUTH_PORTAL_ASSOC_HANDLE[a[b]];return e.AUTH_PORTAL_ASSOC_HANDLE.com},recordError:function(a,b){k.ueLogError&&
k.ueLogError({message:a,logLevel:"ERROR",attribution:"tradein: "+b})},recordSessionStorageBlockedError:function(a){k.ueLogError&&k.ueLogError({message:a,logLevel:"WARN",attribution:"tradein: "+e.sessionStorageAccessErrorMsg})},recordMetric:function(a){k.ue&&k.ue.count&&(a="tradeIn_"+a,k.ue.count(a,(k.ue.count(a)||0)+1))},findMinMaxTivInContainer:function(a){var b,c;Object.keys(a).forEach(function(e,d){e=a[e];0===d?c=b=e.tiv:(d=e.tiv,b=d<b?d:b,c=d>c?d:c)});return[b,c]},getMashModalUrl:function(a){var b=
"https://"+k.location.host,c="\x26cb\x3d"+Math.round((new Date).getTime()/1E3);return b+a+c},getCsrfTokenByKey:function(a,b){return b.hasOwnProperty(e.csrfKeyMap)&&b[e.csrfKeyMap][a]?b[e.csrfKeyMap][a]:""},updateCsrfTokenByKey:function(a,b,c){b.hasOwnProperty(a)&&c.hasOwnProperty(e.csrfKeyMap)&&(c[e.csrfKeyMap][a]=b[a])},recordRefTag:function(a,b,c,e){a=b+c+this.getIngressPageRefTag()+"_"+a;e=a+"_"+this.deviceType+"_"+this.getProductGroupShortReftag(e);this.doRecordRefTag(a);this.doRecordRefTag(e)},
recordTv2RefTag:function(a,b,c){var e="";Array.isArray(c)&&0<c.length&&(e=c.join("_")+"_");a=b+this.getTv2RefTagPrefix()+"_"+e+a+"_"+this.getTv2RefTagPostfix();this.doRecordRefTag(a)},doRecordRefTag:function(a){d.get(a,{error:c.proxy(function(a,b,c){this.recordError(b+"::"+c,"Error encountered during refTag record request")},this)})},getIngressButtonRefTag:function(){return c(".tradein-price-block.blue").length?e.refTagTanookiLaunchedWithBlue:e.refTagTanookiLaunchedWithBorder},getIngressPageRefTag:function(){return this.isStorefront?
e.refTagStorefront:e.refTagDetailPage},getIngressTypeRefTag:function(){return this.isPriceBlockEnabled()?e.refTagPriceBlockIngress:""},getDRAMIngressRefTag:function(){var a=this.getRefTagPrefix(),b=c('input[name\x3d"tanookiPainterRefTag"]'),e=c('input[name\x3d"tanookiPainterSlotId"]');return a=b.length&&""!==b.val()?a+(b.val()+"_tile_launch"):e.length&&""!==e.val()?a+(e.val()+"_tile_launch"):a+"tile_launch"},isMobileVariant:function(a){return 0<=["mobile","mobileApp","mobileWeb"].indexOf(a)},getTanookiV2RowSize:function(a){return this.isMobileVariant(a)?
e.tanookiV2MobileRowSize:e.tanookiV2DesktopRowSize},getTanookiV2SearchPageSize:function(a){return this.isMobileVariant(a)?e.tanookiV2MobileSearchPageSize:e.tanookiV2DesktopSearchPageSize},isWirelessVgProductGroup:function(a){return-1!==e.wirelessVgProductGroups.indexOf(a)},isVGProductGroup:function(a){return-1!==e.tradeInVGProductGroups.indexOf(a)},shouldLaunchTanookiOnPageLoad:function(a){try{if(k.sessionStorage){var b=sessionStorage.getItem(a);this.updateWidgetStateFromSessionStorage();return b?
(sessionStorage.removeItem(a),this.resetSessionStorage(),!0):!1}}catch(t){return this.recordSessionStorageBlockedError(t),!1}},resetSessionStorage:function(){try{k.sessionStorage&&(sessionStorage.removeItem("storefront-product-group"),sessionStorage.removeItem("storefront-device-type"),sessionStorage.removeItem("storefront-modal-title"),sessionStorage.removeItem("is-storefront"))}catch(a){this.recordSessionStorageBlockedError(a)}},updateWidgetStateFromSessionStorage:function(){try{if(k.sessionStorage){var a=
{productGroup:sessionStorage.getItem("storefront-product-group"),deviceType:sessionStorage.getItem("storefront-device-type"),tanookiTitle:sessionStorage.getItem("storefront-modal-title")};a.productGroup&&this.updateTradeInContext(a)}}catch(v){this.recordSessionStorageBlockedError(v)}},hasStorefrontAutoLaunchParams:function(){var a=k.location.href;return-1!==a.indexOf("tipg\x3d")||-1!==a.indexOf("selectedAsin\x3d")?!0:!1},getStorefrontSessionStorage:function(){try{k.sessionStorage&&sessionStorage.getItem("is-storefront")&&
(this.isStorefront=!0)}catch(a){this.recordSessionStorageBlockedError(a)}return this.getIsStoreFront()},setStorefrontSessionStorage:function(a){try{k.sessionStorage&&(a&&sessionStorage.setItem("is-storefront",!0),sessionStorage.setItem("storefront-product-group",f.getProductGroup()),sessionStorage.setItem("storefront-device-type",f.getDeviceType()),sessionStorage.setItem("storefront-modal-title",f.getModalTitle()))}catch(v){this.recordSessionStorageBlockedError(v)}},getSortedConditionTradeInValues:function(a){var b=
[],d=a.conditionOfferMap,f=e.validConditions,m;for(m in d)if(d.hasOwnProperty(m))if(-1===c.inArray(m,f))this.recordError("Invalid condition",m+" was not found in validConditions array for type: "+a.tradeInItemType);else{var k=d[m];k.hasOwnProperty("tiv")&&b.push(k.tiv)}b.sort(function(a,b){return a-b});return b},getProductGroupShortReftag:function(a){return e.PRODUCT_GROUP_SHORT_REF_TAG[a]},getTv2RefTagPrefix:function(){return e.refTagTv2+this.getIngressPageRefTag()+"_"+this.getIngressTypeRefTag()+
this.getProductGroupShortReftag(this.productGroup)},getTv2RefTagPostfix:function(){return("web"===this.deviceType?"D_":"M_")+e.PRODUCT_GROUP_REF_TAG[this.productGroup]},generatePrettyTitle:function(a){return a.split("(Trade")[0]},getIngressTypeFromActionParams:function(a){return a&&a.hasOwnProperty("data")&&a.data.hasOwnProperty("ingressType")?a.data.ingressType:null},isGlEligibleForPastPurchases:function(a){return a===e.tradeInEchoGl},isGlEligibleForPromotions:function(a){return a===e.tradeInEchoGl},
isCETechGl:function(a){return a===e.tradeInWirelessGl||a===e.tradeInDigitalVGGL||a===e.tradeInVGGl||a===e.tradeInElectronicsGL},isTradeInLaunchedFromWisper:function(a){return["launch-tanooki-wireless","redirect-to-login-wireless"].includes(a)},isGlEligibleForCCCard:function(a){return e.tradeInCCCardEligibleGls.includes(a)},createNearbyProcessorsList:function(a,b,e){b.empty();c.each(a,c.proxy(function(a,d){a=c("\x3cdiv/\x3e");var f=c("\x3cdiv/\x3e"),k=c("\x3cdiv/\x3e"),g=c("\x3cdiv/\x3e"),p=d.processorAddress.line1+
" "+d.processorAddress.line2,h=d.processorAddress.city+" "+d.processorAddress.state+" "+d.processorAddress.postalCode+" "+d.processorAddress.countryCode;a.html(d.processorAddress.fullName).addClass("a-text-bold a-spacing-top-medium");f.html(p);k.html(h);b.append(a).append(f).append(k).append(g);e.append(b)},this))},renderPriceBlockRecommendationMessages:function(a,b,c){var e=f.getUpgradeAsinBuyingPrice();e=parseFloat(e);a.find("#selectedItemTotalCount").html(b);b=f.getPromoDiscount()?f.getPromoDiscount():
0;c=e-(e*b+c);0<=c?(a.find("#finalPriceLowTiv").html(f.formatCurrency(c)),a.find("#buyingPrice").html(f.formatCurrency(e)).wrap("\x3cs\x3e"),a.find(".low-tiv").show(),a.find(".high-tiv").hide()):(a.find("#finalPriceHighTiv").html(f.formatCurrency(0)),a.find("#buyingPrice").html(f.formatCurrency(e)).wrap("\x3cs\x3e"),a.find("#gcAmount").html(f.formatCurrency(-1*c)),a.find(".low-tiv").hide(),a.find(".high-tiv").show());a.show()}};d.on("a:tradein:record:reftag",function(a){f.doRecordRefTag(e.tradeInRouteBase+
"recordRefTag?ref_\x3d"+a.refTag)});d.on("a:pageUpdate",function(){d.state.parse();f.captureTradeInContext()});return f});"use strict";l.when("A","a-modal","trade-in-constants","trade-in-common-utils","tradein-desktop-side-sheet","tanooki-rebates-cx-launcher","recycle-and-save-helper","ready").execute(function(d,e,b,c,f,a,l){function t(a){-1<a.indexOf(b.refTagPriceBlockPrefix)&&c.setRefTagPrefix(b.refTagPriceBlockPrefix);if(!c.getIsStoreFront()){var h=b.tradeInRouteBase+"recordRefTag?deviceType\x3d"+
c.getDeviceType()+"\x26ref_\x3d",d=c.getIngressButtonRefTag();c.recordRefTag(d,h,b.refTagButtonExperimentPreFix,c.getProductGroup())}(h=c.getProductGroup())?(a=a+"_"+h,a={deviceType:c.getDeviceType(),currentAsin:c.getCurrentAsin(),buyingPrice:c.getUpgradeAsinBuyingPrice(),selectedAsin:c.getSelectedAsin(),productGroup:h,ref_:a},""!==c.autoSearchTerm&&(a.autoSearchTerm=c.autoSearchTerm,d=n("#tanookiWidgetState").data("tanookiWidgetState"),d.autoSearchTerm="",c.updateTradeInContext(d)),a=b.tradeInRouteBase+
"getCustomerItems?"+n.param(a)):a=b.tradeInRouteBase+"generalerror?ref_\x3d"+(a+"_pg_missing");(h=e.get(b.tradeInModalName+"_"+h))||(h=e.create(n("\x3cdiv /\x3e"),{url:a,name:b.tradeInModalName,header:c.getModalTitle(),width:700,cache:!1,padding:"none",timeout:3E4}));h.show()}function v(){h||c.recordTv2RefTag(b.refTagAuthRequired,p);var a=c.getAuthPortalHandleFromHostname();c.isPriceBlockEnabled()?c.redirectToAuth(a,b.priceBlockTanookiV2SessionStorageKey):c.redirectToAuth(a,b.tanookiV2SessionStorageKey);
c.setStorefrontSessionStorage(g)}function m(a){var e=c.getIngressButtonRefTag();c.recordTv2RefTag(e,p);a=b.refTagTv2+a;var d=c.getProductGroup(),g=c.getCurrentAsin();d?(e=a+"_"+d,e={deviceType:c.getDeviceType(),productGroup:d,ref_:e,currentAsin:g,buyingPrice:c.getUpgradeAsinBuyingPrice()},e=n.param(e),e=b.tradeInRouteBase+"wirelessTradeInSearchRefinements?"+e):e=b.tradeInRouteBase+"generalerror?ref_\x3d"+(a+"_pg_missing");q=n.get(e);f.initialize();n("body").addClass("scroll-disabled");f.show(q,function(){h=
!0;0<n("#tradein-desktop-side-sheet").find(".tradein-logged-out-view").length?c.recordTv2RefTag(b.refTagAuthRequired,p):0<=a.indexOf("auth_launch")&&c.recordTv2RefTag(b.refTagAuthCompleted,p)})}var n=d.$,q,g=c.getIsStoreFront(),p=b.tradeInRouteBase+"recordRefTag?deviceType\x3d"+c.getDeviceType()+"\x26ref_\x3d",h=!1,r=null;c.captureTradeInContext();g=c.getStorefrontSessionStorage();c.shouldLaunchTanookiOnPageLoad(b.tanookiV2SessionStorageKey)?m(b.refTagPrefix+"auth_launch"):c.shouldLaunchTanookiOnPageLoad(b.priceBlockTanookiV2SessionStorageKey)&&
(c.setPriceBlockEnabled(!0),m(b.refTagPrefix+"auth_launch"));d.on("a:popover:afterHide:tradeInModal",function(){r&&r.focus()});d.on("a:tradein:tanooki:launch",function(a){c.setIsStoreFront(!0);c.updateTradeInContext(a.widgetState);d.trigger("a:tradein:productgroup:update");var b=a.refTag?a.refTag:c.getDRAMIngressRefTag();c.isWirelessVgProductGroup(a.widgetState.productGroup)?m(b):t(b)});d.declarative("launch-tanooki-wireless","click",function(){m("launch")});d.declarative("launch-tanooki-v2","click",
function(a){c.getIngressTypeFromActionParams(a)===b.priceBlockIngressType&&c.setPriceBlockEnabled(!0);m("launch")});d.declarative("launch-tanooki-v2-storefront","click",function(a){c.setIsStoreFront(!0);c.updateTradeInContext(a.data);m("launch")});d.declarative("redirect-to-login-wireless","click",function(){v()});d.declarative("redirect-to-login-v2","click",function(a){c.getIngressTypeFromActionParams(a)===b.priceBlockIngressType&&c.setPriceBlockEnabled(!0);v()});d.declarative("launch-tanooki","click",
function(a){var e=c.getIngressTypeFromActionParams(a),h=b.refTagPrefix,d=b.tanookiBuyboxMetric;r=a.$target;e===b.priceBlockIngressType?(h=b.refTagPriceBlockPrefix,d=b.tanookiPriceblockMetric):e===b.recycleAndSaveIngressType&&(h=b.refTagRecycleAndSaveTanookiPrefix);c.setRefTagPrefix(h);t(h+"launch");c.recordMetric(d)});d.declarative("redirect-to-login","click",function(a){a=c.getIngressTypeFromActionParams(a);var e=c.getAuthPortalHandleFromHostname();c.getIsStoreFront()&&c.setStorefrontSessionStorage(!0);
var h=b.tanookiSessionStorageKey;a===b.priceBlockIngressType&&(h=b.priceBlockSessionStorageKey);c.redirectToAuth(e,h)});try{k.sessionStorage&&(c.shouldLaunchTanookiOnPageLoad(b.tanookiSessionStorageKey)&&t(b.refTagPrefix+"auth_launch"),sessionStorage.getItem(b.priceBlockSessionStorageKey)&&("launch-recycle-and-save"===n(b.tradeInLaunchButtonDeclarativeActionSelector).data("action")?l.launchRecycleAndSaveWeb(e,"_auth_launch"):t(b.refTagPriceBlockPrefix+"auth_launch"),sessionStorage.removeItem(b.priceBlockSessionStorageKey)))}catch(u){c.recordSessionStorageBlockedError(u)}d.trigger("a:tradein:tanooki:launcher:loaded")});
"use strict";l.when("A","ready").register("tradein-desktop-side-sheet",function(d){var e,b=d.$,c,f,a;return{initialize:function(){c=b("\x3cdiv id\x3d'a-popover-lgtbox' class\x3d'a-declarative attach-popover tradein-lgtbox' data-action\x3d'a-popover-floating-close'\x3e\x3c/div\x3e");c.hide();c.appendTo(document.body);c.click(this.close);a=b('\x3cdiv id\x3d"tradein-desktop-side-sheet" class\x3d"a-section"\x3e\x3c/div\x3e');a.addClass("aok-hidden");b('\x3cdiv class\x3d"a-spinner-wrapper sidesheet-spinner"\x3e\x3cspan class\x3d"a-spinner a-spinner-medium"\x3e\x3c/span\x3e\x3c/div\x3e').appendTo(a);
a.appendTo(document.body);b(document).unbind("keydown",this.onKeyDown);b(document).keydown(this.onKeyDown);e=this.close},onKeyDown:function(a){27===a.which&&e()},close:function(){d.trigger("tanooki-trade-in-desktop-side-sheet-close");c.hide();b(a).animate({right:f},{duration:500,complete:function(){b(a).remove();b(c).remove();b("body").removeClass("scroll-disabled")}})},show:function(e,d){b(a).removeClass("aok-hidden");b(a).animate({right:"0"},500,"linear");b(a).find(".sidesheet-spinner").addClass("active");
c.show();b.when(e).done(function(e){b(a).find(".sidesheet-spinner").remove("active");b("#tradein-desktop-side-sheet").html(e);d&&"function"===typeof d&&d()});f=b(a).css("right")}}});"use strict";l.when("trade-in-cc-device").register("trade-in-cc-constants",function(d){return{featureName:"tradeInInstantSavingsCC",featureAttribution:"Website/CETech/WirelessPlans",actions:{expand:"trade-in-cc-card:expanded",collapse:"trade-in-cc-card:collapse",atfRefresh:"PageRefresh:ATF",ingress:"trade-in-button:ingress",
postTradeInExp:"trade-in-cc:postTradeInExp"},selectors:{expanderIcon:".trade-in-cc-header-icon",expanderContentWrapper:".trade-in-cc-expander-content-wrapper",expanderContent:".trade-in-cc-expander-content",expanderContentPre:".trade-in-cc-expander-content-pre",tradeInCCCardTemplate:".trade-in-cc-card-template",successMessage:".trade-in-cc-card-template .trade-in-cc-success-message",tivMessage:".trade-in-cc-tiv-message",promoMessage:".trade-in-cc-promo-message",subtitleWrapper:".trade-in-cc-subtitle-wrapper",
subtitle:".trade-in-cc-subtitle",submittedMessage:".trade-in-cc-submitted-message",ccCardTotalTiv:".cc-card-total-tiv",ccCardIpTiv:".cc-card-ip-tiv",promoTitle:".trade-in-cc-promo-title",promoSubtitle:".trade-in-cc-promo-subtitle",ipPromoSubtitle:".trade-in-cc-ip-promo-subtitle",nipPromoSubtitle:".trade-in-cc-non-ip-promo-subtitle",promoTitleSingle:".trade-in-cc-promo-title-single",singlePromoTitle:".single-promo-title",promoTitleMultiple:".trade-in-cc-promo-title-multiple",lastPromoTitle:".last-promo-title",
remainingPromoAmount:".remaining-promo-amount",ccPostTradeInMessageTemplate:".cc-post-trade-in-message-template",ccTiMessageContent:".cc-post-trade-in-message-content",ccIpTiMessage:".trade-in-cc-ip-ti-message",ccNipTiMessage:".trade-in-cc-non-ip-ti-message",ccMixedTiMessage:".trade-in-cc-mix-ti-message",ccPromoMessageContent:".trade-in-cc-promo-message-content",defaultOptionSwatch:".tradein-twister-box-group-default-option",expandContentSuccessMessage:".trade-in-cc-expander-content .trade-in-cc-success-message",
container:".trade-in-cc-container"},classes:{hidden:"aok-hidden",rotate:"rotate",tradeInCCExpanded:"trade-in-cc-expander-content-wrapper-expanded",contentHidden:"content-hidden",selectedSwatch:"tradein-options-selected-box-group"}}});"use strict";l.when("A","trade-in-cc-constants").register("trade-in-cc-expander",function(d,e){var b=d.$,c=e.selectors,f=e.classes;return{toggleCard:function(a){b(c.expanderIcon).toggleClass(f.rotate,a);b(c.subtitleWrapper).toggleClass(f.hidden,a);b(c.expanderContent).toggleClass(f.contentHidden,
!a);return b(c.expanderContentWrapper).toggleClass(f.tradeInCCExpanded,a).hasClass(f.tradeInCCExpanded)}}});"use strict";l.when("A","cc-manager","trade-in-cc-constants").register("trade-in-cc-registration",function(d,e,b){var c={featureName:b.featureName,featureAttribution:b.featureAttribution};d.on(b.actions.expand,function(){0<d.$(b.selectors.container).length&&e.cardExpanded(b.featureName)});e.registerFeature(c,{init:function(){},validateInputParams:function(){return!0},cardCollapse:function(){d.trigger(b.actions.collapse)}})});
"use strict";l.when("A","trade-in-cc-constants","trade-in-cc-expander","trade-in-cc-registration").execute(function(d,e,b){var c=d.$,f=e.actions,a=e.selectors,k=e.classes;d.declarative("toggle-trade-in-cc-card","click",function(){var e=!c(a.expanderContentWrapper).hasClass(k.tradeInCCExpanded);b.toggleCard(e);e&&d.trigger(f.expand)});d.on(f.collapse,function(){b.toggleCard(!1)});d.on(f.atfRefresh,function(){b.toggleCard(!0)});b.toggleCard(!0)});"use strict";l.when("A","trade-in-cc-constants","trade-in-cc-registration").execute("trade-in-cc-metrics",
function(d,e){var b=e.actions,c=function(){var b=k.ue;return{incrementCount:function(a){b&&b.count&&a&&(a="twisterPlus_tradeIn_"+a+"."+e.featureName,b.count(a,(b.count(a)||0)+1))}}}();d.declarative("launch-tanooki-v2",function(){d.trigger(b.ingress)});d.on(b.expand,function(){c.incrementCount("ccExpanded")});d.on(b.ingress,function(){c.incrementCount("ccIngress")})});"use strict";l.register("trade-in-cc-device",function(){return{isMobile:!1}});"use strict";l.register("trade-in-cc-experiment-clean-up",
function(){return{isEnabled:!0}});"use strict";l.register("tanooki-ingress-button-treatment",function(){return{isEnabled:!1}});"use strict";l.register("tanooki-rebates-cx-launcher",function(){return{isEnabled:!1}});"use strict";l.register("upgrader-sp-page-migration",function(){return{isEnabled:!1}});"use strict";l.when("A","a-modal","trade-in-constants","trade-in-common-utils","recycle-and-save-constants","recycle-and-save-helper","upgrader-sp-page-migration","ready").execute(function(d,e,b,c,f,
a,k,l){function t(){var a=e.get("upgrader_claim_modal");a&&a.hide()}var m=d.$,n=null,q=!1;a.recordOneClickImpressionRefTags(m(".upgrader-button-wrapper"),!1);d.declarative("upgrader-claim","click",function(b){b=b.data;if(a.validateOneClickActionParams(b)){var c=a.getIngressPageType();b.pageIngressType=c;b.isMobile=!1;b.productGroup=a.getIngressProductGroup(b);var h=m(".upgrader-claim-button"),g=m(".upgrader-claim-button-disabled"),u=m(".upgrader-claimed-button");q=!1===u.hasClass("aok-hidden");q||
(a.toggleElementVisibility(h),a.toggleElementVisibility(g));a.recordOneClickOpenRefTags(q,b,!1);c="";c=k.isEnabled?f.upgraderRouteBase+f.upgraderClaimUrl:f.recycleAndSaveRouteBase+f.upgraderClaimUrl;var l={};l[f.shoppingPortalCsrfTokenName]=a.getCSRFToken();d.post(c,{params:b,headers:l,success:m.proxy(function(b){var c="";b.hasOwnProperty("popoverHeader")&&""!==b.popoverHeader&&(c=b.popoverHeader);var d="";b.hasOwnProperty("popoverContent")&&""!==b.popoverContent&&(d=b.popoverContent);var r="";b.hasOwnProperty("popoverLabel")&&
""!==b.popoverLabel&&(r=b.popoverLabel);e.create(m("\x3cdiv /\x3e"),{inlineContent:d,name:"upgrader_claim_modal",header:c.replace(/<[^>]*>/g,""),popoverLabel:r,cache:!1,padding:"none",timeout:3E4}).show();b.claimPromoSuccess?q||(a.toggleElementVisibility(g),a.toggleElementVisibility(u),a.toggleElementVisibility(m(".upgrade-offer-content"))):q||(a.toggleElementVisibility(g),a.toggleElementVisibility(h))},this),error:m.proxy(function(){q||(a.toggleElementVisibility(g),a.toggleElementVisibility(h));
d.trigger("a:upgrader:claim-error")},this)})}});d.declarative("upgrader-terms","click",function(b){b=b.data;b.isMobile=!1;b={params:b,success:m.proxy(function(a){var b="";a.hasOwnProperty("popoverLabel")&&""!==a.popoverLabel&&(b=a.popoverLabel);e.create(m("\x3cdiv /\x3e"),{inlineContent:a.popoverContent,name:"upgrader_terms_modal",header:a.popoverHeader.replace(/<[^>]*>/g,""),popoverLabel:b,cache:!1,padding:"none",timeout:3E4}).show()},this)};k.isEnabled?d.get(f.upgraderRouteBase+f.upgraderTermsUrl,
b):(b.headers={"anti-csrftoken-a2z":a.getCSRFToken()},d.post(f.recycleAndSaveRouteBase+f.upgraderTermsUrl,b))});d.declarative("upgrader-claim-close","click",function(a){a.$event.preventDefault();t()});d.declarative("launch-recycle-and-save-banyan","click",function(b){n=b.$target;b=b.data;var d=b.ingressProductGroup?b.ingressProductGroup:"gl_digital_products_3",h=b.ingressPriceSurfaced?b.ingressPriceSurfaced:"";a.setIngressAsin(b.ingressAsin?b.ingressAsin:"");a.setIsPageRenderTargetSPP(!0);a.setIsFixedPricePromo("FIXED"===
b.promoDiscountType);a.setIngressPriceSurfaced(h);c.setProductGroup(d);c.deviceType="web";a.launchRecycleAndSaveWeb(e)});d.declarative("launch-recycle-and-save","click",function(b){n=b.$target;a.setIngressAsin(a.getCurrentAsinFromDetailPage());a.setIngressPriceSurfaced(a.getIngressFppPriceSurfacedFromDetailPage());a.launchRecycleAndSaveWeb(e)});d.declarative("recycle-and-save-claim-promo","click",function(b){var c=e.get(f.recycleAndSaveModalName);a.claimRecycleAndSavePromo(b.data.csrfKey,c,!1)});
d.declarative("recycle-and-save-redirect-tanooki","click",function(a){a&&a.hasOwnProperty("data")&&a.data.hasOwnProperty("fromOneClick")?t():(a=e.get(f.recycleAndSaveModalName))&&a.hide();d.delay(function(){d.trigger("a:tradein:tanooki:launch",{widgetState:{productGroup:c.getProductGroup()},refTag:b.refTagRecycleAndSaveTanookiPrefix})},100)});d.on("a:popover:afterHide:recycleAndSaveModal",function(){n&&n.focus()})});l.when("recycle-and-save-helper","ready").execute(function(d){d.triggerRecycleAndSaveWeblab()});
"use strict";l.when("A").register("recycle-and-save-constants",function(d){return{recycleAndSaveModalName:"recycleAndSaveModal",recycleAndSaveSecondaryViewName:"recycleAndSaveSecondaryView",recycleAndSaveRouteBase:"/tradein/hzw/",recycleAndSaveRecordRefTagUrl:"/tradein/hzw/recordRefTag?ref_\x3d",recycleAndSavePrefix:"recycleAndSave/",recycleAndSaveViewUrl:"getView?",upgraderRouteBase:"/tradein/",upgraderClaimUrl:"upgrader/claimPromo",upgraderTermsUrl:"upgrader/terms",shoppingPortalCsrfTokenName:"anti-csrftoken-a2z",
recycleAndSaveClaimPromoUrl:"claimPromo?",recycleAndSavePriceblockMetric:"recycle_and_save_launch_price_block",recycleAndSavePriceblockMobileMetric:"recycle_and_save_launch_price_block_mobile",recycleAndSavePromoAccessErrorMetric:"recycle_and_save_promo_access_error",recycleAndSaveFixedPromoAccessErrorMetric:"rs_fpp_promo_access_error",refTagRecycleAndSavePrefix:"dp_recycle_save_price_block_",refTagRecycleAndSaveMobilePrefix:"dp_recycle_save_price_block_m_",refTagRecycleAndSaveReftagLaunch:"dp_rs_pb_launch",
refTagRecycleAndSaveReftagMobileLaunch:"dp_rs_pb_launch_m",refTagRecycleAndSaveOnSPPLaunch:"spp_recycle_save_upgrader_launch",refTagRecycleAndSaveOnSPPMobileLaunch:"spp_recycle_save_upgrader_launch_m",refTagRecycleAndSaveClaimPromo:"dp_recycle_save_price_claim_promo_",refTagRecycleAndSaveFixedClaimPromo:"dp_rs_pb_fpp_claim_promo_",refTagRecycleAndSaveSPPClaimPromo:"spp_recycle_save_price_claim_promo_",refTagRecycleAndSaveSPPFixedClaimPromo:"spp_rs_pb_fpp_claim_promo_",refTagRecycleAndSaveShortPrefixLaunch:"rs_la_",
refTagRecycleAndSaveShortPrefixClaimPromo:"rs_cl_",refTagUpgraderShortPrefix1ClickImpression:"uw_1c_im_",refTagUpgraderShortPrefix1ClickFixedImpression:"uw_1c_fim_",refTagUpgraderShortPrefix1ClickClaimPromo:"uw_1c_pcl_",refTagUpgraderShortPrefix1ClickFixedClaimPromo:"uw_1c_fcl_",refTagUpgraderShortPrefix1ClickOpenPromo:"uw_1c_po_",refTagUpgraderShortPrefix1ClickFixedOpenPromo:"uw_1c_fo_",refTagMobile:"m_",refTagFixedPromoSuffix:"_fpp",refTagPreFixDetailPage:"dp",refTagPreFixSppBanyan:"by",refTagPreFixEchoCategory:"ec",
refTagPreFixFireTVCategory:"ftvc",refTagPreFixUnknown:"unknown",promoAccessAvailable:"available",promoAccessClaimed:"claimed",promoAlreadyClaimed:"ALREADY_CLAIMED",fixedPromoDiscountType:"FIXED"}});"use strict";l.when("A","trade-in-common-utils","recycle-and-save-constants","ready").register("recycle-and-save-helper",function(d,e,b){function c(a,c){var h=e.getProductGroup(),d=p.getIngressAsin(),r=p.getIngressPageType();return h?(e.doRecordRefTag(b.recycleAndSaveRecordRefTagUrl+a+"_"+r),d.length&&
f(b.refTagRecycleAndSaveShortPrefixLaunch,c,r,d),a={deviceType:c?"mobile":e.getDeviceType(),productGroup:h,ref_:a,pageRenderTarget:p.getIsPageRenderTargetSPP()?"spp":"dp",pageIngressType:r,ips:p.getIngressPriceSurfaced(),currentAsin:d},b.recycleAndSaveRouteBase+b.recycleAndSavePrefix+b.recycleAndSaveViewUrl+g.param(a)):b.recycleAndSaveRouteBase+"generalerror?ref_\x3d"+(a+"_pg_missing")}function f(a,c,d,f){a+=c?b.refTagMobile:"";a=a+(d+"_")+(p.getIsFixedPricePromo()?"fpp_":"");a+=e.getProductGroup()+
"_"+f;e.doRecordRefTag(b.recycleAndSaveRecordRefTagUrl+a)}function a(){g(".recycleSaveErrorAlert").each(function(){g(this).removeClass("aok-hidden")})}function l(){g(".recycleSaveClaimAlert").each(function(){g(this).removeClass("aok-hidden")})}function t(){g("#recycleSaveClaimPromoDeclarAct").removeClass("a-declarative");g(".recycle-save-redeem-button").each(function(){g(this).removeClass("a-button-normal").addClass("a-button-disabled")})}function x(a){d.declarative.remove(g("#launch-recycle-and-save"),
"launchRecycleAndSave");var b=g(".tradein-instant-savings-launch-button"),c=g(a?".recycle-and-save-wrapper-mobile":".recycle-and-save-wrapper").find("#successfulRecycleAndSaveButtonText").first();g.each(b,function(){g(this).replaceWith(c.clone())});g(".tradein-price-block").each(function(){g(this).html(c.clone())});a=g(".tradein-price-block.blue");a.length&&a.removeClass("blue").addClass("green")}function m(a){g(a?".recycle-and-save-spp-ingress-fixed .ucw-cards-upgrader-btn-text":".recycle-and-save-spp-ingress-percent .ucw-cards-upgrader-btn-text").each(function(){var a=
g(this).clone().addClass("aok-hidden");g(this).replaceWith(a)});g(a?".recycle-and-save-spp-ingress-fixed #ucw-upgrader-offer-claimed-text":".recycle-and-save-spp-ingress-percent #ucw-upgrader-offer-claimed-text").each(function(){var a=g(this).clone().removeClass("aok-hidden").addClass("recycle-and-save-spp-ingress-success");g(this).replaceWith(a)})}function n(){var a=document.getElementById("recycleAndSavePromoData");if(a&&a.dataset)return a.dataset}function q(a){var c=n();return c&&c.promoDiscountType&&
b.fixedPromoDiscountType===c.promoDiscountType?(p.setIsFixedPricePromo(!0),a+b.refTagFixedPromoSuffix):a}var g=d.$,p={isPageRenderTargetSPP:!1,isFixedPricePromo:!1,ingressAsin:"",ingressPriceSurfaced:"",setIsPageRenderTargetSPP:function(a){this.isPageRenderTargetSPP=a},getIsPageRenderTargetSPP:function(){return this.isPageRenderTargetSPP},setIsFixedPricePromo:function(a){this.isFixedPricePromo=a},getIsFixedPricePromo:function(){return this.isFixedPricePromo},setIngressAsin:function(a){this.ingressAsin=
a},getIngressAsin:function(){return this.ingressAsin},setIngressPriceSurfaced:function(a){this.ingressPriceSurfaced=a},getIngressPriceSurfaced:function(){return this.ingressPriceSurfaced},launchRecycleAndSaveWeb:function(a,d){d=d||"";e.setRefTagPrefix(b.refTagRecycleAndSavePrefix);var h=this.getIsPageRenderTargetSPP()?b.refTagRecycleAndSaveOnSPPLaunch:b.refTagRecycleAndSaveReftagLaunch;h=q(h);d=h+"_"+e.getProductGroup()+d;d=c(d,!1);a.create(g("\x3cdiv /\x3e"),{url:d,name:b.recycleAndSaveModalName,
header:e.getModalTitle(),width:929,cache:!1,padding:"none",timeout:3E4}).show();e.recordMetric(b.recycleAndSavePriceblockMetric)},launchRecycleAndSaveMobile:function(a,d){d=d||"";e.setRefTagPrefix(b.refTagRecycleAndSaveMobilePrefix);var h=this.getIsPageRenderTargetSPP()?b.refTagRecycleAndSaveOnSPPMobileLaunch:b.refTagRecycleAndSaveReftagMobileLaunch;h=q(h);d=h+"_"+e.getProductGroup()+d;d=c(d,!0);a.create(g("\x3cdiv /\x3e"),{url:d,name:b.recycleAndSaveSecondaryViewName,cache:!1,backButtonText:"Close",
padding:"none",timeout:3E4}).show();e.recordMetric(b.recycleAndSavePriceblockMobileMetric)},triggerRecycleAndSaveWeblab:function(){var a=g("input[id^\x3d'recycleAndSaveWeblabToTrigger']");a&&a.length&&a.each(function(){var a=g(this).data("weblabname"),b=g(this).data("weblabtreatment");a&&a.length&&b&&b.length&&k.ue&&k.ue.trigger&&k.ue.trigger(a,b)})},getClaimRecycleAndSavePromoRefTagPrefix:function(a){return this.getIsPageRenderTargetSPP()?a?b.refTagRecycleAndSaveSPPFixedClaimPromo:b.refTagRecycleAndSaveSPPClaimPromo:
a?b.refTagRecycleAndSaveFixedClaimPromo:b.refTagRecycleAndSaveClaimPromo},claimRecycleAndSavePromo:function(c,k,u){var h=e.getProductGroup(),r=u?b.refTagMobile:"",n=this.getIsFixedPricePromo(),p=this.getIngressPageType();r=this.getClaimRecycleAndSavePromoRefTagPrefix(n)+r+h;e.doRecordRefTag(b.recycleAndSaveRecordRefTagUrl+r+"_"+p);var q=this.getIngressAsin();q.length&&f(b.refTagRecycleAndSaveShortPrefixClaimPromo,u,p,q);c={productGroup:h,requestToken:c,ref_:r,currentAsin:this.getIngressAsin(),pageIngressType:p};
c=b.recycleAndSaveRouteBase+b.recycleAndSavePrefix+b.recycleAndSaveClaimPromoUrl+g.param(c);d.post(c,{success:g.proxy(function(c){c.claimPromoSuccess?(k.hide(),this.getIsPageRenderTargetSPP()?m(n):x(u)):(c.claimPromoFailureReason&&c.claimPromoFailureReason===b.promoAlreadyClaimed?l():a(),t())},this),error:g.proxy(function(){e.recordMetric(n?b.recycleAndSaveFixedPromoAccessErrorMetric:b.recycleAndSavePromoAccessErrorMetric);a();t()},this),async:!1})},getIngressFppPriceSurfacedFromDetailPage:function(){var a=
n();return a&&a.ips?a.ips:""},getCurrentAsinFromDetailPage:function(){var a=n();return a&&a.ingressAsin?a.ingressAsin:""},getIngressPageType:function(){var a=k.location.href;return-1<a.indexOf("B0CXRRF584")||-1<a.indexOf("B0DCCNHWV5")?b.refTagPreFixSppBanyan:-1<a.indexOf("9818047011")?b.refTagPreFixEchoCategory:-1<a.indexOf("8521791011")?b.refTagPreFixFireTVCategory:(-1<a.indexOf("/dp/")||-1<a.indexOf("/gp/product/"))&&!this.getIsPageRenderTargetSPP()?b.refTagPreFixDetailPage:b.refTagPreFixUnknown},
getIngressProductGroup:function(a){a.hasOwnProperty("ingressProductGroup")&&a.ingressProductGroup&&""!==a.ingressProductGroup?a=a.ingressProductGroup:(e.captureTradeInContext(),a=e.getProductGroup());return a},toggleElementVisibility:function(a){a.hasClass("aok-hidden")?a.removeClass("aok-hidden"):a.addClass("aok-hidden")},recordOneClickImpressionRefTags:function(a,c){g.each(a,g.proxy(function(a,d){if((a=g(d).find('[data-action\x3d"upgrader-claim"]'))&&(a=a.data())&&a.hasOwnProperty("upgraderClaim")&&
a.upgraderClaim&&this.validateOneClickActionParams(a.upgraderClaim)){a=a.upgraderClaim;d=this.getIngressPageType();var h=a.hasOwnProperty("ingressProductGroup")&&""!==a.ingressProductGroup?a.ingressProductGroup:e.getProductGroup(),f="PERCENT"===a.promoDiscountType?b.refTagUpgraderShortPrefix1ClickImpression:b.refTagUpgraderShortPrefix1ClickFixedImpression;f+=this.appendRefTagMetaData(c,d,h,a.currentAsin);e.doRecordRefTag(b.recycleAndSaveRecordRefTagUrl+f)}},this))},recordOneClickOpenRefTags:function(a,
c,d){var h=c.hasOwnProperty("ingressProductGroup")&&""!==c.ingressProductGroup?c.ingressProductGroup:e.getProductGroup(),f=p.getIngressPageType(),g="FIXED"===c.promoDiscountType;a=a?g?b.refTagUpgraderShortPrefix1ClickFixedOpenPromo:b.refTagUpgraderShortPrefix1ClickOpenPromo:g?b.refTagUpgraderShortPrefix1ClickFixedClaimPromo:b.refTagUpgraderShortPrefix1ClickClaimPromo;a+=this.appendRefTagMetaData(d,f,h,c.currentAsin);e.doRecordRefTag(b.recycleAndSaveRecordRefTagUrl+a)},appendRefTagMetaData:function(a,
c,d,e){a=a?b.refTagMobile:"";return a=a+(c?c+"_":"")+(d?d+"_":"")+(e?e:"")},validateOneClickActionParams:function(a){if(!a)return!1;var b=!0;g.each(["currentAsin","promoDiscountType","ips"],function(c,d){if(!a.hasOwnProperty(d)||a[d]===w||""===a[d])return b=!1});return b},getCSRFToken:function(){var a=g("#tradeIn-anticsrf-token");return a.length?a.attr("content")||"":""}};return p})});