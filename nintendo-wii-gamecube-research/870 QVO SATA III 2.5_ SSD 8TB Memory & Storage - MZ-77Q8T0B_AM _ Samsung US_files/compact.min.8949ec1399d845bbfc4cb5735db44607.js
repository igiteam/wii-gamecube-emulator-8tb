window.Granite = window.Granite || {};

(function(Granite, $) {
    Granite.Util = (function() {

        var self = {
            patchText: function(text, snippets) {
                if (snippets) {
                    if (!$.isArray(snippets)) {
                        text = text.replace("{0}", snippets);
                    } else {
                        for (var i = 0; i < snippets.length; i++) {
                            text = text.replace(("{" + i + "}"), snippets[i]);
                        }
                    }
                }
                return text;
            }

        };

        return self;

    }());

}(Granite, jQuery));


(function (Granite, util, $) {
    Granite.HTTP = (function() {
        var contextPath = null,
            SCRIPT_URL_REGEXP = /^(?:http|https):\/\/[^\/]+(\/.*)\/(?:etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs).*\.js(\?.*)?$/,
            ENCODE_PATH_REGEXP = /[^1\w-\.!~\*'\(\)\/%;:@&=\$,]/,
            loginRedirected = false,
            self = {};
        self.getSchemeAndAuthority = function (url) {
            var end;

            try {
                if (url.indexOf("://") == -1) return ""; // e.g. url was /en.html
                end = url.indexOf("/", url.indexOf("://") + 3);

                return (end == -1) ?
                    url :   // e.g. url was http://www.day.com
                    url.substring(0, end);  // e.g. url was http://www.day.com/en.html
            }
            catch (e) {
                return "";
            }
        };
        self.getContextPath = function () {
            return contextPath;
        };
        self.detectContextPath = function () {
            try {
                if (window.CQURLInfo) {
                    contextPath = CQURLInfo.contextPath || "";
                } else {
                    var scripts = document.getElementsByTagName("script");
                    for (var i = 0; i < scripts.length; i++) {
                        // in IE the first script is not the expected widgets js: loop
                        // until it is found
                        var result = SCRIPT_URL_REGEXP.exec(scripts[i].src);
                        if (result) {
                            contextPath = result[1];
                            return;
                        }
                    }
                    contextPath = "";
                }
            } catch (e) {
            }
        };
        self.externalize = function (url) {
            try {
                if (url.indexOf("/") == 0 && contextPath &&
                    url.indexOf(contextPath + "/") != 0) {
                    url = contextPath + url;
                }
            }
            catch (e) {
            }
            return url;
        };
        self.internalize = function (url, doc) {
            if (url.charAt(0) == '/') {
                if (contextPath === url) {
                    return '';
                }
                else if (contextPath && url.indexOf(contextPath + "/") == 0) {
                    return url.substring(contextPath.length);
                } else {
                    return url;
                }
            }

            if (!doc) doc = document;
            var docHost = self.getSchemeAndAuthority(doc.location.href);
            var urlHost = self.getSchemeAndAuthority(url);
            if (docHost == urlHost) {
                return url.substring(urlHost.length + (contextPath ? contextPath.length : 0));
            }
            else {
                return url;
            }
        };
        self.getPath = function (url) {

            if (!url) {
                if (window.CQURLInfo && CQURLInfo.requestPath) {
                    return CQURLInfo.requestPath;
                } else {
                    url = window.location.pathname;
                }
            } else {
                url = self.removeParameters(url);
                url = self.removeAnchor(url);
            }

            url = self.internalize(url);
            var i = url.indexOf(".", url.lastIndexOf("/"));
            if (i != -1) {
                url = url.substring(0, i);
            }
            return url;
        };
        self.removeAnchor = function (url) {
            if (url.indexOf("#") != -1) {
                return url.substring(0, url.indexOf("#"));
            }
            return url;
        };
        self.removeParameters = function (url) {
            if (url.indexOf("?") != -1) {
                return url.substring(0, url.indexOf("?"));
            }
            return url;
        };
        self.encodePathOfURI = function (url) {
            var parts, delim;
            if (url.indexOf("?") != -1) {
                parts = url.split("?");
                delim = "?";
            }
            else if (url.indexOf("#") != -1) {
                parts = url.split("#");
                delim = "#";
            }
            else {
                parts = [url];
            }
            if (ENCODE_PATH_REGEXP.test(parts[0])) {
                parts[0] = self.encodePath(parts[0]);
            }
            return parts.join(delim);
        };
       self.encodePath = function (path) {
            path = encodeURI(path).replace(/%5B/g, '[').replace(/%5D/g, ']');
            path = path.replace(/\+/g, "%2B");
            path = path.replace(/\?/g, "%3F");
            path = path.replace(/;/g, "%3B");
            path = path.replace(/#/g, "%23");
            path = path.replace(/=/g, "%3D");
            path = path.replace(/\$/g, "%24");
            path = path.replace(/,/g, "%2C");
            path = path.replace(/'/g, "%27");
            path = path.replace(/"/g, "%22");
            return path;
       };
        self.handleLoginRedirect = function () {
            if (!loginRedirected) {
                loginRedirected = true;
                alert(Granite.I18n.get("Your request could not be completed because you have been signed out."));
                var l = util.getTopWindow().document.location;
                l.href = self.externalize(sling.LOGIN_URL) +
                    "?resource=" + encodeURIComponent(l.pathname + l.search + l.hash);
            }
        };
        self.getXhrHook = function (url, method, params) {
            method = method || "GET";
            if (window.G_XHR_HOOK && $.isFunction(G_XHR_HOOK)) {
                var p = {
                    "url": url,
                    "method": method
                };
                if (params) {
                    p["params"] = params;
                }
                return G_XHR_HOOK(p);
            }
            return null;
        };

        self.eval = function(response) {
            if (typeof response != "object") {
                response = $.ajax({
                    url: response,
                    type: 'get',
                    async: false
                });
            }
            try {
                return eval("(" + (response.body ? response.body :
                    response.responseText) + ")");
            } catch (e) {
            }
            return null;
        };

        return self;
    }());

}(Granite, Granite.Util, jQuery));

(function(document, Granite, util, http, $) {

    Granite.I18n = (function() {

         var dicts = {},

            urlPrefix = "",

            urlSuffix = ".json",

            manualLocale = undefined,

            pseudoTranslations = false,

            languages = null,

            self = {},

            manualDictionary = false,

            getDictionaryUrl = function(locale) {
                if (manualDictionary) {
                    return urlPrefix + locale + urlSuffix;
                }

                var dictionarySrc = $("html").attr("data-i18n-dictionary-src");

                if (!dictionarySrc) {
                    return urlPrefix + locale + urlSuffix;
                }

                return dictionarySrc.replace("{locale}", encodeURIComponent(locale)).replace("{+locale}", locale);
            };

        self.LOCALE_DEFAULT = "en";

        self.PSEUDO_LANGUAGE = "zz";

        self.PSEUDO_PATTERN_KEY = "_pseudoPattern_";

        self.init = function(config) {
            config = config || {};

            this.setLocale(config.locale);
            this.setUrlPrefix(config.urlPrefix);
            this.setUrlSuffix(config.urlSuffix);
        };

        self.setLocale = function(locale) {
            if (!locale) return;

            manualLocale = locale;
        };

        self.getLocale = function() {
            if ($.isFunction(manualLocale)) {
                manualLocale = manualLocale();
            }

            return manualLocale || document.documentElement.lang || self.LOCALE_DEFAULT;
        };

        self.setUrlPrefix = function(prefix) {
            if (!prefix) return;

            urlPrefix = prefix;
            manualDictionary = true;
        };

        self.setUrlSuffix = function(suffix) {
            if (!suffix) return;

            urlSuffix = suffix;
            manualDictionary = true;
        };

        self.getDictionary = function(locale) {
            locale = locale || self.getLocale();

            if (!dicts[locale]) {
                pseudoTranslations = (locale.indexOf(self.PSEUDO_LANGUAGE) == 0);

                try {
                    var response = $.ajax(getDictionaryUrl(locale), {
                        async: false,
                        dataType: "json"
                    });
                    dicts[locale] = $.parseJSON(response.responseText);
                } catch (e) {}
                if (!dicts[locale]) {
                    dicts[locale] = {};
                }
            }
            return dicts[locale];
        };

        self.get = function(text, snippets, note) {
            var dict, newText, lookupText;

            dict = self.getDictionary();

            lookupText = pseudoTranslations ? self.PSEUDO_PATTERN_KEY :
                note ? text + " ((" + note + "))" :
                text;
            if (dict) {
                newText = dict[lookupText];
            }
            if (!newText) {
                newText = text;
            }
            if (pseudoTranslations) {
                newText = newText.replace("{string}", text).replace("{comment}", note ? note : "");
            }
            return util.patchText(newText, snippets);
        };

        self.getVar = function(text, note) {
            if (!text) {
                return null;
            }
            return self.get(text, null, note);
        };

        self.getLanguages = function() {
            if (!languages) {
                try {
                    var json = http.eval("/libs/wcm/core/resources/languages.overlay.infinity.json");
                    $.each(json, function(name, lang) {
                        lang.title = self.getVar(lang.language);
                        if (lang.title && lang.country && lang.country != "*") {
                            lang.title += " (" + self.getVar(lang.country) + ")";
                        }
                    });
                    languages = json;
                } catch (e) {
                    languages = {};
                }
            }
            return languages;
        };

        self.parseLocale = function(langCode) {
            if (!langCode) {
                return null;
            }
            var pos = langCode.indexOf("_");
            if (pos < 0) {
                pos = langCode.indexOf("-");
            }

            var language, country;
            if (pos < 0) {
                language = langCode;
                country = null;
            } else {
                language = langCode.substring(0, pos);
                country = langCode.substring(pos + 1);
            }
            return {
                code: langCode,
                language: language,
                country: country
            };
        };

        return self;

    }());

}(document, Granite, Granite.Util, Granite.HTTP, jQuery));

Granite.HTTP.detectContextPath();

/*
Custom slick.smg.js
     _ _      _       _
 ___| (_) ___| | __  (_)___
/ __| | |/ __| |/ /  | / __|
\__ \ | | (__|   < _ | \__ \
|___/_|_|\___|_|\_(_)/ |___/
                   |__/

 Version: 1.5.9
  Author: Ken Wheeler
 Website: http://kenwheeler.github.io
    Docs: http://kenwheeler.github.io/slick
    Repo: http://github.com/kenwheeler/slick
  Issues: http://github.com/kenwheeler/slick/issues

@modify
    -. role="toolbar" remove
            COMMENT : modify - role="toolbar" remove

        	ORG
        		.find('button').attr('role', 'button').end()
            	.closest('div').attr('role', 'toolbar');

        	CUSTOM
        		.find('button').attr('role', 'button');

    -. draggable bug fix
            COMMENT : modify - draggable bug fix

            ORG
                if( !initial && triggerBreakpoint !== false ) {
                    _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);
                }

            CUSTOM
                if( !initial && triggerBreakpoint !== false ) {
                    _.touchObject.curX = undefined;
                    _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);
                }

 */
/* global window, document, define, jQuery, setInterval, clearInterval */
(function(factory) {
    'use strict';
    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else if (typeof exports !== 'undefined') {
        module.exports = factory(require('jquery'));
    } else {
        factory(jQuery);
    }

}(function($) {
    'use strict';
    var Slick = window.Slick || {};
    window.smg = window.smg || {};
    window.smg.aem = window.smg.aem || {};
	Granite.I18n.setLocale($('#siteCode').val());
    window.smg.aem.globaltext = {
    		_prev : Granite.I18n.get("Next", [],$('#siteCode').val()),
    		_next : Granite.I18n.get("Previous", [],$('#siteCode').val())
    };
    // i18n GlobalText
    var GLOBAL_TEXT = window.smg.aem.globaltext;

    Slick = (function() {

        var instanceUid = 0;

        function Slick(element, settings) {
            
            var _ = this, dataSettings;

            _.defaults = {
                accessibility: true,
                adaptiveHeight: false,
                appendArrows: $(element),
                appendDots: $(element),
                arrows: true,
                asNavFor: null,
                prevArrow: '<button type="button" data-role="none" class="slick-prev" aria-label="'+ GLOBAL_TEXT._prev +'" tabindex="0" role="button">'+ GLOBAL_TEXT._prev +'</button>',
                nextArrow: '<button type="button" data-role="none" class="slick-next" aria-label="'+ GLOBAL_TEXT._next +'" tabindex="0" role="button">'+ GLOBAL_TEXT._next +'</button>',
                autoplay: false,
                autoplaySpeed: 3000,
                centerMode: false,
                centerPadding: '50px',
                cssEase: 'ease',
                customPaging: function(slider, i) {
                    return $('<button type="button" data-role="none" role="button" tabindex="0" />').text('slide' + (i + 1));
                },
                dots: false,
                dotsClass: 'slick-dots',
                elements: 'div',
                draggable: true,
                easing: 'linear',
                edgeFriction: 0.35,
                fade: false,
                focusOnSelect: false,
                infinite: true,
                initialSlide: 0,
                lazyLoad: 'ondemand',
                mobileFirst: false,
                pauseOnHover: true,
                pauseOnFocus: true,
                pauseOnDotsHover: false,
                respondTo: 'window',
                responsive: null,
                rows: 1,
                rtl: false,
                slide: '',
                slidesPerRow: 1,
                slidesToShow: 1,
                slidesToScroll: 1,
                speed: 500,
                swipe: true,
                swipeToSlide: false,
                touchMove: true,
                touchThreshold: 5,
                useCSS: true,
                useTransform: true,
                variableWidth: false,
                vertical: false,
                verticalSwiping: false,
                waitForAnimate: true,
                zIndex: 1000
            };

            _.initials = {
                animating: false,
                dragging: false,
                autoPlayTimer: null,
                currentDirection: 0,
                currentLeft: null,
                currentSlide: 0,
                direction: 1,
                $dots: null,
                listWidth: null,
                listHeight: null,
                loadIndex: 0,
                $nextArrow: null,
                $prevArrow: null,
                slideCount: null,
                slideWidth: null,
                $slideTrack: null,
                $slides: null,
                sliding: false,
                slideOffset: 0,
                swipeLeft: null,
                $list: null,
                touchObject: {},
                transformsEnabled: false,
                unslicked: false
            };

            $.extend(_, _.initials);

            _.activeBreakpoint = null;
            _.animType = null;
            _.animProp = null;
            _.breakpoints = [];
            _.breakpointSettings = [];
            _.cssTransitions = false;
            _.focussed = false;
            _.interrupted = false;
            _.hidden = 'hidden';
            _.paused = true;
            _.positionProp = null;
            _.respondTo = null;
            _.rowCount = 1;
            _.shouldClick = true;
            _.$slider = $(element);
            _.$slidesCache = null;
            _.transformType = null;
            _.transitionType = null;
            _.visibilityChange = 'visibilitychange';
            _.windowWidth = 0;
            _.windowTimer = null;

            dataSettings = $(element).data('slick') || {};

            _.options = $.extend({}, _.defaults, settings, dataSettings);

            _.currentSlide = _.options.initialSlide;

            _.originalSettings = _.options;

            if (typeof document.mozHidden !== 'undefined') {
                _.hidden = 'mozHidden';
                _.visibilityChange = 'mozvisibilitychange';
            } else if (typeof document.webkitHidden !== 'undefined') {
                _.hidden = 'webkitHidden';
                _.visibilityChange = 'webkitvisibilitychange';
            }

            _.autoPlay = $.proxy(_.autoPlay, _);
            _.autoPlayClear = $.proxy(_.autoPlayClear, _);
            _.autoPlayIterator = $.proxy(_.autoPlayIterator, _);
            _.changeSlide = $.proxy(_.changeSlide, _);
            _.clickHandler = $.proxy(_.clickHandler, _);
            _.selectHandler = $.proxy(_.selectHandler, _);
            _.setPosition = $.proxy(_.setPosition, _);
            _.swipeHandler = $.proxy(_.swipeHandler, _);
            _.dragHandler = $.proxy(_.dragHandler, _);
            _.keyHandler = $.proxy(_.keyHandler, _);

            _.instanceUid = instanceUid++;

            // A simple way to check for HTML strings
            // Strict HTML recognition (must start with <)
            // Extracted from jQuery v1.11 source
            _.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/;


            _.registerBreakpoints();
            _.init(true);

        }

        return Slick;

    }());

    Slick.prototype.activateADA = function() {
        var _ = this;

        _.$slideTrack.find('.slick-active').attr({
            'aria-hidden': 'false'
        }).find('a, input, button, select').attr({
            'tabindex': '0'
        });

    };

    Slick.prototype.addSlide = Slick.prototype.slickAdd = function(markup, index, addBefore) {

        var _ = this;

        if (typeof(index) === 'boolean') {
            addBefore = index;
            index = null;
        } else if (index < 0 || (index >= _.slideCount)) {
            return false;
        }

        _.unload();

        if (typeof(index) === 'number') {
            if (index === 0 && _.$slides.length === 0) {
                $(markup).appendTo(_.$slideTrack);
            } else if (addBefore) {
                $(markup).insertBefore(_.$slides.eq(index));
            } else {
                $(markup).insertAfter(_.$slides.eq(index));
            }
        } else {
            if (addBefore === true) {
                $(markup).prependTo(_.$slideTrack);
            } else {
                $(markup).appendTo(_.$slideTrack);
            }
        }

        _.$slides = _.$slideTrack.children(this.options.slide);

        _.$slideTrack.children(this.options.slide).detach();

        _.$slideTrack.append(_.$slides);

        _.$slides.each(function(index, element) {
            $(element).attr('data-slick-index', index);
        });

        _.$slidesCache = _.$slides;

        _.reinit();

    };

    Slick.prototype.animateHeight = function() {
        var _ = this;
        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);
            _.$list.animate({
                height: targetHeight
            }, _.options.speed);
        }
    };

    Slick.prototype.animateSlide = function(targetLeft, callback) {

        var animProps = {},
            _ = this;

        _.animateHeight();

        if (_.options.rtl === true && _.options.vertical === false) {
            targetLeft = -targetLeft;
        }
        if (_.transformsEnabled === false) {
            if (_.options.vertical === false) {
                _.$slideTrack.animate({
                    left: targetLeft
                }, _.options.speed, _.options.easing, callback);
            } else {
                _.$slideTrack.animate({
                    top: targetLeft
                }, _.options.speed, _.options.easing, callback);
            }

        } else {

            if (_.cssTransitions === false) {
                if (_.options.rtl === true) {
                    _.currentLeft = -(_.currentLeft);
                }
                $({
                    animStart: _.currentLeft
                }).animate({
                    animStart: targetLeft
                }, {
                    duration: _.options.speed,
                    easing: _.options.easing,
                    step: function(now) {
                        now = Math.ceil(now);
                        if (_.options.vertical === false) {
                            animProps[_.animType] = 'translate(' +
                                now + 'px, 0px)';
                            _.$slideTrack.css(animProps);
                        } else {
                            animProps[_.animType] = 'translate(0px,' +
                                now + 'px)';
                            _.$slideTrack.css(animProps);
                        }
                    },
                    complete: function() {
                        if (callback) {
                            callback.call();
                        }
                    }
                });

            } else {

                _.applyTransition();
                targetLeft = Math.ceil(targetLeft);

                if (_.options.vertical === false) {
                    animProps[_.animType] = 'translate3d(' + targetLeft + 'px, 0px, 0px)';
                } else {
                    animProps[_.animType] = 'translate3d(0px,' + targetLeft + 'px, 0px)';
                }
                _.$slideTrack.css(animProps);

                if (callback) {
                    setTimeout(function() {

                        _.disableTransition();

                        callback.call();
                    }, _.options.speed);
                }

            }

        }

    };

    Slick.prototype.getNavTarget = function() {

        var _ = this,
            asNavFor = _.options.asNavFor;

        if ( asNavFor && asNavFor !== null ) {
            asNavFor = $(asNavFor).not(_.$slider);
        }

        return asNavFor;

    };

    Slick.prototype.asNavFor = function(index) {

        var _ = this,
            asNavFor = _.getNavTarget();

        if ( asNavFor !== null && typeof asNavFor === 'object' ) {
            asNavFor.each(function() {
                var target = $(this).slick('getSlick');
                if(!target.unslicked) {
                    target.slideHandler(index, true);
                }
            });
        }

    };

    Slick.prototype.applyTransition = function(slide) {

        var _ = this,
            transition = {};

        if (_.options.fade === false) {
            transition[_.transitionType] = _.transformType + ' ' + _.options.speed + 'ms ' + _.options.cssEase;
        } else {
            transition[_.transitionType] = 'opacity ' + _.options.speed + 'ms ' + _.options.cssEase;
        }

        if (_.options.fade === false) {
            _.$slideTrack.css(transition);
        } else {
            _.$slides.eq(slide).css(transition);
        }

    };

    Slick.prototype.autoPlay = function() {

        var _ = this;

        _.autoPlayClear();

        if ( _.slideCount > _.options.slidesToShow ) {
            _.autoPlayTimer = setInterval( _.autoPlayIterator, _.options.autoplaySpeed );
        }

    };

    Slick.prototype.autoPlayClear = function() {

        var _ = this;

        if (_.autoPlayTimer) {
            clearInterval(_.autoPlayTimer);
        }

    };

    Slick.prototype.autoPlayIterator = function() {

        var _ = this,
            slideTo = _.currentSlide + _.options.slidesToScroll;

        if ( !_.paused && !_.interrupted && !_.focussed ) {

            if ( _.options.infinite === false ) {

                if ( _.direction === 1 && ( _.currentSlide + 1 ) === ( _.slideCount - 1 )) {
                    _.direction = 0;
                }

                else if ( _.direction === 0 ) {

                    slideTo = _.currentSlide - _.options.slidesToScroll;

                    if ( _.currentSlide - 1 === 0 ) {
                        _.direction = 1;
                    }

                }

            }

            _.slideHandler( slideTo );

        }

    };

    Slick.prototype.buildArrows = function() {

        var _ = this;

        if (_.options.arrows === true ) {

            _.$prevArrow = $(_.options.prevArrow).addClass('slick-arrow');
            _.$nextArrow = $(_.options.nextArrow).addClass('slick-arrow');

            if( _.slideCount > _.options.slidesToShow ) {

                _.$prevArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');
                _.$nextArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');

                if (_.htmlExpr.test(_.options.prevArrow)) {
                    _.$prevArrow.prependTo(_.options.appendArrows);
                }

                if (_.htmlExpr.test(_.options.nextArrow)) {
                    _.$nextArrow.appendTo(_.options.appendArrows);
                }

                if (_.options.infinite !== true) {
                    _.$prevArrow
                        .addClass('slick-disabled')
                        .attr('aria-disabled', 'true');
                }

            } else {

                _.$prevArrow.add( _.$nextArrow )

                    .addClass('slick-hidden')
                    .attr({
                        'aria-disabled': 'true',
                        'tabindex': '-1'
                    });

            }

        }

    };

    Slick.prototype.buildDots = function() {

        var _ = this,
            i, dot;

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            _.$slider.addClass('slick-dotted');

            dot = $('<ul />').addClass(_.options.dotsClass);

            for (i = 0; i <= _.getDotCount(); i += 1) {
                dot.append($('<li />').append(_.options.customPaging.call(this, _, i)));
            }

            _.$dots = dot.appendTo(_.options.appendDots);

            _.$dots.find('li').first().addClass('slick-active').attr('aria-hidden', 'false');

        }

    };

    Slick.prototype.buildOut = function() {

        var _ = this;

        _.$slides = (_.options.elements === 'ul') ?
            _.$slider.find('>'+_.options.elements).children( _.options.slide + ':not(.slick-cloned)').addClass('slick-slide') :
            _.$slider.children( _.options.slide + ':not(.slick-cloned)').addClass('slick-slide');

        _.slideCount = _.$slides.length;

        _.$slides.each(function(index, element) {
            $(element)
                .attr('data-slick-index', index)
                .data('originalStyling', $(element).attr('style') || '');
        });

        _.$slider.addClass('slick-slider');

        if(_.options.elements === 'ul'){
            _.$slideTrack = _.$slider.find('>'+_.options.elements).addClass('slick-track');
        }else{
            _.$slideTrack = (_.slideCount === 0) ?
                $('<div class="slick-track"/>').appendTo(_.$slider) :
                _.$slides.wrapAll('<div class="slick-track"/>').parent();
        }

        _.$list = _.$slideTrack.wrap(
            '<div aria-live="polite" class="slick-list"/>').parent();
        _.$slideTrack.css('opacity', 0);

        if (_.options.centerMode === true || _.options.swipeToSlide === true) {
            _.options.slidesToScroll = 1;
        }

        $('img[data-lazy]', _.$slider).not('[src]').addClass('slick-loading');

        _.setupInfinite();

        _.buildArrows();

        _.buildDots();

        _.updateDots();


        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);

        if (_.options.draggable === true) {
            _.$list.addClass('draggable');
        }

    };

    Slick.prototype.buildRows = function() {

        var _ = this, a, b, c, newSlides, numOfSlides, originalSlides,slidesPerSection;

        newSlides = document.createDocumentFragment();
        originalSlides = (_.options.elements === 'ul') ? _.$slider.find('>'+_.options.elements).children() : _.$slider.children();

        if(_.options.rows > 1) {

            slidesPerSection = _.options.slidesPerRow * _.options.rows;
            numOfSlides = Math.ceil(
                originalSlides.length / slidesPerSection
            );

            for(a = 0; a < numOfSlides; a++){
                var slide = document.createElement('div');
                for(b = 0; b < _.options.rows; b++) {
                    var row = document.createElement('div');
                    for(c = 0; c < _.options.slidesPerRow; c++) {
                        var target = (a * slidesPerSection + ((b * _.options.slidesPerRow) + c));
                        if (originalSlides.get(target)) {
                            row.appendChild(originalSlides.get(target));
                        }
                    }
                    slide.appendChild(row);
                }
                newSlides.appendChild(slide);
            }

            _.$slider.empty().append(newSlides);
            _.$slider.children().children().children()
                .css({
                    'width':(100 / _.options.slidesPerRow) + '%',
                    'display': 'inline-block'
                });

        }

    };

    Slick.prototype.checkResponsive = function(initial, forceUpdate) {

        var _ = this,
            breakpoint, targetBreakpoint, respondToWidth, triggerBreakpoint = false;
        var sliderWidth = _.$slider.width();
        var windowWidth = window.innerWidth || $(window).width();

        if (_.respondTo === 'window') {
            respondToWidth = windowWidth;
        } else if (_.respondTo === 'slider') {
            respondToWidth = sliderWidth;
        } else if (_.respondTo === 'min') {
            respondToWidth = Math.min(windowWidth, sliderWidth);
        }

        if ( _.options.responsive &&
            _.options.responsive.length &&
            _.options.responsive !== null) {

            targetBreakpoint = null;

            for (breakpoint in _.breakpoints) {
                if (_.breakpoints.hasOwnProperty(breakpoint)) {
                    if (_.originalSettings.mobileFirst === false) {
                        if (respondToWidth < _.breakpoints[breakpoint]) {
                            targetBreakpoint = _.breakpoints[breakpoint];
                        }
                    } else {
                        if (respondToWidth > _.breakpoints[breakpoint]) {
                            targetBreakpoint = _.breakpoints[breakpoint];
                        }
                    }
                }
            }

            if (targetBreakpoint !== null) {
                if (_.activeBreakpoint !== null) {
                    if (targetBreakpoint !== _.activeBreakpoint || forceUpdate) {
                        _.activeBreakpoint =
                            targetBreakpoint;
                        if (_.breakpointSettings[targetBreakpoint] === 'unslick') {
                            _.unslick(targetBreakpoint);
                        } else {
                            _.options = $.extend({}, _.originalSettings,
                                _.breakpointSettings[
                                    targetBreakpoint]);
                            if (initial === true) {
                                _.currentSlide = _.options.initialSlide;
                            }
                            _.refresh(initial);
                        }
                        triggerBreakpoint = targetBreakpoint;
                    }
                } else {
                    _.activeBreakpoint = targetBreakpoint;
                    if (_.breakpointSettings[targetBreakpoint] === 'unslick') {
                        _.unslick(targetBreakpoint);
                    } else {
                        _.options = $.extend({}, _.originalSettings,
                            _.breakpointSettings[
                                targetBreakpoint]);
                        if (initial === true) {
                            _.currentSlide = _.options.initialSlide;
                        }
                        _.refresh(initial);
                    }
                    triggerBreakpoint = targetBreakpoint;
                }
            } else {
                if (_.activeBreakpoint !== null) {
                    _.activeBreakpoint = null;
                    _.options = _.originalSettings;
                    if (initial === true) {
                        _.currentSlide = _.options.initialSlide;
                    }
                    _.refresh(initial);
                    triggerBreakpoint = targetBreakpoint;
                }
            }

            // only trigger breakpoints during an actual break. not on initialize.
            if( !initial && triggerBreakpoint !== false ) {
                // modify - draggable bug fix
                _.touchObject.curX = undefined;
                _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);
            }
        }

    };

    Slick.prototype.changeSlide = function(event, dontAnimate) {

        var _ = this,
            $target = $(event.currentTarget),
            indexOffset, slideOffset, unevenOffset;

        // If target is a link, prevent default action.
        if($target.is('a')) {
            event.preventDefault();
        }

        // If target is not the <li> element (ie: a child), find the <li>.
        if(!$target.is('li')) {
            $target = $target.closest('li');
        }

        unevenOffset = (_.slideCount % _.options.slidesToScroll !== 0);
        indexOffset = unevenOffset ? 0 : (_.slideCount - _.currentSlide) % _.options.slidesToScroll;

        switch (event.data.message) {

            case 'previous':
                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : _.options.slidesToShow - indexOffset;
                if (_.slideCount > _.options.slidesToShow) {
                    _.slideHandler(_.currentSlide - slideOffset, false, dontAnimate);
                }
                break;

            case 'next':
                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : indexOffset;
                if (_.slideCount > _.options.slidesToShow) {
                    _.slideHandler(_.currentSlide + slideOffset, false, dontAnimate);
                }
                break;

            case 'index':
                var index = event.data.index === 0 ? 0 :
                    event.data.index || $target.index() * _.options.slidesToScroll;

                _.slideHandler(_.checkNavigable(index), false, dontAnimate);
                $target.children().trigger('focus');
                break;

            default:
                return;
        }

    };

    Slick.prototype.checkNavigable = function(index) {

        var _ = this,
            navigables, prevNavigable;

        navigables = _.getNavigableIndexes();
        prevNavigable = 0;
        if (index > navigables[navigables.length - 1]) {
            index = navigables[navigables.length - 1];
        } else {
            for (var n in navigables) {
                if (index < navigables[n]) {
                    index = prevNavigable;
                    break;
                }
                prevNavigable = navigables[n];
            }
        }

        return index;
    };

    Slick.prototype.cleanUpEvents = function() {

        var _ = this;

        if (_.options.dots && _.$dots !== null) {

            $('li', _.$dots)
                .off('click.slick', _.changeSlide)
                .off('mouseenter.slick', $.proxy(_.interrupt, _, true))
                .off('mouseleave.slick', $.proxy(_.interrupt, _, false));

        }

        _.$slider.off('focus.slick blur.slick');

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow && _.$prevArrow.off('click.slick', _.changeSlide);
            _.$nextArrow && _.$nextArrow.off('click.slick', _.changeSlide);
        }

        _.$list.off('touchstart.slick mousedown.slick', _.swipeHandler);
        _.$list.off('touchmove.slick mousemove.slick', _.swipeHandler);
        _.$list.off('touchend.slick mouseup.slick', _.swipeHandler);
        _.$list.off('touchcancel.slick mouseleave.slick', _.swipeHandler);

        _.$list.off('click.slick', _.clickHandler);

        $(document).off(_.visibilityChange, _.visibility);

        _.cleanUpSlideEvents();

        if (_.options.accessibility === true) {
            _.$list.off('keydown.slick', _.keyHandler);
        }

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().off('click.slick', _.selectHandler);
        }

        $(window).off('orientationchange.slick.slick-' + _.instanceUid, _.orientationChange);

        $(window).off('resize.slick.slick-' + _.instanceUid, _.resize);

        $('[draggable!=true]', _.$slideTrack).off('dragstart', _.preventDefault);

        $(window).off('load.slick.slick-' + _.instanceUid, _.setPosition);
        $(document).off('ready.slick.slick-' + _.instanceUid, _.setPosition);

    };

    Slick.prototype.cleanUpSlideEvents = function() {

        var _ = this;

        _.$list.off('mouseenter.slick', $.proxy(_.interrupt, _, true));
        _.$list.off('mouseleave.slick', $.proxy(_.interrupt, _, false));

    };

    Slick.prototype.cleanUpRows = function() {

        var _ = this, originalSlides;

        if(_.options.rows > 1) {
            originalSlides = _.$slides.children().children();
            originalSlides.removeAttr('style');
            _.$slider.empty().append(originalSlides);
        }

    };

    Slick.prototype.clickHandler = function(event) {

        var _ = this;

        if (_.shouldClick === false) {
            event.stopImmediatePropagation();
            event.stopPropagation();
            event.preventDefault();
        }

    };

    Slick.prototype.destroy = function(refresh) {

        var _ = this;

        _.autoPlayClear();

        _.touchObject = {};

        _.cleanUpEvents();

        $('.slick-cloned', _.$slider).detach();

        if (_.$dots) {
            _.$dots.remove();
        }


        if ( _.$prevArrow && _.$prevArrow.length ) {

            _.$prevArrow
                .removeClass('slick-disabled slick-arrow slick-hidden')
                .removeAttr('aria-hidden aria-disabled tabindex')
                .css('display','');

            if ( _.htmlExpr.test( _.options.prevArrow )) {
                _.$prevArrow.remove();
            }
        }

        if ( _.$nextArrow && _.$nextArrow.length ) {

            _.$nextArrow
                .removeClass('slick-disabled slick-arrow slick-hidden')
                .removeAttr('aria-hidden aria-disabled tabindex')
                .css('display','');

            if ( _.htmlExpr.test( _.options.nextArrow )) {
                _.$nextArrow.remove();
            }

        }


        if (_.$slides) {

            _.$slides
                .removeClass('slick-slide slick-active slick-center slick-visible slick-current')
                .removeAttr('aria-hidden')
                .removeAttr('data-slick-index')
                .each(function(){
                    $(this).attr('style', $(this).data('originalStyling'));
                });

            _.$slideTrack.children(this.options.slide).detach();

            _.$slideTrack.detach();

            _.$list.detach();

            _.$slider.append(_.$slides);
        }

        _.cleanUpRows();

        _.$slider.removeClass('slick-slider');
        _.$slider.removeClass('slick-initialized');
        _.$slider.removeClass('slick-dotted');

        _.unslicked = true;

        if(!refresh) {
            _.$slider.trigger('destroy', [_]);
        }

    };

    Slick.prototype.disableTransition = function(slide) {

        var _ = this,
            transition = {};

        transition[_.transitionType] = '';

        if (_.options.fade === false) {
            _.$slideTrack.css(transition);
        } else {
            _.$slides.eq(slide).css(transition);
        }

    };

    Slick.prototype.fadeSlide = function(slideIndex, callback) {

        var _ = this;

        if (_.cssTransitions === false) {

            _.$slides.eq(slideIndex).css({
                zIndex: _.options.zIndex
            });

            _.$slides.eq(slideIndex).animate({
                opacity: 1
            }, _.options.speed, _.options.easing, callback);

        } else {

            _.applyTransition(slideIndex);

            _.$slides.eq(slideIndex).css({
                opacity: 1,
                zIndex: _.options.zIndex
            });

            if (callback) {
                setTimeout(function() {

                    _.disableTransition(slideIndex);

                    callback.call();
                }, _.options.speed);
            }

        }

    };

    Slick.prototype.fadeSlideOut = function(slideIndex) {

        var _ = this;

        if (_.cssTransitions === false) {

            _.$slides.eq(slideIndex).animate({
                opacity: 0,
                zIndex: _.options.zIndex - 2
            }, _.options.speed, _.options.easing);

        } else {

            _.applyTransition(slideIndex);

            _.$slides.eq(slideIndex).css({
                opacity: 0,
                zIndex: _.options.zIndex - 2
            });

        }

    };

    Slick.prototype.filterSlides = Slick.prototype.slickFilter = function(filter) {

        var _ = this;

        if (filter !== null) {

            _.$slidesCache = _.$slides;

            _.unload();

            _.$slideTrack.children(this.options.slide).detach();

            _.$slidesCache.filter(filter).appendTo(_.$slideTrack);

            _.reinit();

        }

    };

    Slick.prototype.focusHandler = function() {

        var _ = this;

        _.$slider
            .off('focus.slick blur.slick')
            .on('focus.slick blur.slick',
                '*:not(.slick-arrow)', function(event) {

            event.stopImmediatePropagation();
            var $sf = $(this);

            setTimeout(function() {

                if( _.options.pauseOnFocus ) {
                    _.focussed = $sf.is(':focus');
                    _.autoPlay();
                }

            }, 0);

        });
    };

    Slick.prototype.getCurrent = Slick.prototype.slickCurrentSlide = function() {

        var _ = this;
        return _.currentSlide;

    };

    Slick.prototype.getDotCount = function() {

        var _ = this;

        var breakPoint = 0;
        var counter = 0;
        var pagerQty = 0;

        if (_.options.infinite === true) {
            while (breakPoint < _.slideCount) {
                ++pagerQty;
                breakPoint = counter + _.options.slidesToScroll;
                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
            }
        } else if (_.options.centerMode === true) {
            pagerQty = _.slideCount;
        } else {
            while (breakPoint < _.slideCount) {
                ++pagerQty;
                breakPoint = counter + _.options.slidesToScroll;
                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
            }
        }

        return pagerQty - 1;

    };

    Slick.prototype.getLeft = function(slideIndex) {

        var _ = this,
            targetLeft,
            verticalHeight,
            verticalOffset = 0,
            targetSlide;

        _.slideOffset = 0;
        verticalHeight = _.$slides.first().outerHeight(true);

        if (_.options.infinite === true) {
            if (_.slideCount > _.options.slidesToShow) {
                _.slideOffset = (_.slideWidth * _.options.slidesToShow) * -1;
                verticalOffset = (verticalHeight * _.options.slidesToShow) * -1;
            }
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                if (slideIndex + _.options.slidesToScroll > _.slideCount && _.slideCount > _.options.slidesToShow) {
                    if (slideIndex > _.slideCount) {
                        _.slideOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * _.slideWidth) * -1;
                        verticalOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * verticalHeight) * -1;
                    } else {
                        _.slideOffset = ((_.slideCount % _.options.slidesToScroll) * _.slideWidth) * -1;
                        verticalOffset = ((_.slideCount % _.options.slidesToScroll) * verticalHeight) * -1;
                    }
                }
            }
        } else {
            if (slideIndex + _.options.slidesToShow > _.slideCount) {
                _.slideOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * _.slideWidth;
                verticalOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * verticalHeight;
            }
        }

        if (_.slideCount <= _.options.slidesToShow) {
            _.slideOffset = 0;
            verticalOffset = 0;
        }

        if (_.options.centerMode === true && _.options.infinite === true) {
            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2) - _.slideWidth;
        } else if (_.options.centerMode === true) {
            _.slideOffset = 0;
            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2);
        }

        if (_.options.vertical === false) {
            targetLeft = ((slideIndex * _.slideWidth) * -1) + _.slideOffset;
        } else {
            targetLeft = ((slideIndex * verticalHeight) * -1) + verticalOffset;
        }

        if (_.options.variableWidth === true) {

            if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);
            } else {
                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow);
            }

            if (_.options.rtl === true) {
                if (targetSlide[0]) {
                    targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                } else {
                    targetLeft =  0;
                }
            } else {
                targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
            }

            if (_.options.centerMode === true) {
                if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);
                } else {
                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow + 1);
                }

                if (_.options.rtl === true) {
                    if (targetSlide[0]) {
                        targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                    } else {
                        targetLeft =  0;
                    }
                } else {
                    targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
                }

                targetLeft += (_.$list.width() - targetSlide.outerWidth()) / 2;
            }
        }

        return targetLeft;

    };

    Slick.prototype.getOption = Slick.prototype.slickGetOption = function(option) {

        var _ = this;

        return _.options[option];

    };

    Slick.prototype.getNavigableIndexes = function() {

        var _ = this,
            breakPoint = 0,
            counter = 0,
            indexes = [],
            max;

        if (_.options.infinite === false) {
            max = _.slideCount;
        } else {
            breakPoint = _.options.slidesToScroll * -1;
            counter = _.options.slidesToScroll * -1;
            max = _.slideCount * 2;
        }

        while (breakPoint < max) {
            indexes.push(breakPoint);
            breakPoint = counter + _.options.slidesToScroll;
            counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
        }

        return indexes;

    };

    Slick.prototype.getSlick = function() {

        return this;

    };

    Slick.prototype.getSlideCount = function() {

        var _ = this,
            slidesTraversed, swipedSlide, centerOffset;

        centerOffset = _.options.centerMode === true ? _.slideWidth * Math.floor(_.options.slidesToShow / 2) : 0;

        if (_.options.swipeToSlide === true) {
            _.$slideTrack.find('.slick-slide').each(function(index, slide) {
                if (slide.offsetLeft - centerOffset + ($(slide).outerWidth() / 2) > (_.swipeLeft * -1)) {
                    swipedSlide = slide;
                    return false;
                }
            });

            slidesTraversed = Math.abs($(swipedSlide).attr('data-slick-index') - _.currentSlide) || 1;

            return slidesTraversed;

        } else {
            return _.options.slidesToScroll;
        }

    };

    Slick.prototype.goTo = Slick.prototype.slickGoTo = function(slide, dontAnimate) {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'index',
                index: parseInt(slide)
            }
        }, dontAnimate);

    };

    Slick.prototype.init = function(creation) {

        var _ = this;

        if (!$(_.$slider).hasClass('slick-initialized')) {

            $(_.$slider).addClass('slick-initialized');

            _.buildRows();
            _.buildOut();
            _.setProps();
            _.startLoad();
            _.loadSlider();
            _.initializeEvents();
            _.updateArrows();
            _.updateDots();
            _.checkResponsive(true);
            _.focusHandler();

        }

        if (creation) {
            _.$slider.trigger('init', [_]);
        }

        if (_.options.accessibility === true) {
            _.initADA();
        }

        if ( _.options.autoplay ) {

            _.paused = false;
            _.autoPlay();

        }

    };

    Slick.prototype.initADA = function() {
        var _ = this;
        _.$slides.add(_.$slideTrack.find('.slick-cloned')).attr({
            'aria-hidden': 'true',
            'tabindex': '-1'
        }).find('a, input, button, select').attr({
            'tabindex': '-1'
        });

        _.$slideTrack.attr('role', 'listbox');

        _.$slides.not(_.$slideTrack.find('.slick-cloned')).each(function(i) {
            $(this).attr({
                'role': 'option',
                'aria-describedby': 'slick-slide' + _.instanceUid + i + ''
            });
        });

        if (_.$dots !== null) {
            // modify - role="toolbar" remove
            _.$dots.attr('role', 'tablist').find('li').each(function(i) {
                    $(this).attr({
                        'role': 'presentation',
                        'aria-selected': 'false',
                        'aria-controls': 'navigation' + _.instanceUid + i + '',
                        'id': 'slick-slide' + _.instanceUid + i + ''
                    });
                })
                .first().attr('aria-selected', 'true').end()
                .find('button').attr('role', 'button');

        }
        _.activateADA();

    };

    Slick.prototype.initArrowEvents = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow
               .off('click.slick')
               .on('click.slick', {
                    message: 'previous'
               }, _.changeSlide);
            _.$nextArrow
               .off('click.slick')
               .on('click.slick', {
                    message: 'next'
               }, _.changeSlide);
        }

    };

    Slick.prototype.initDotEvents = function() {

        var _ = this;

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {
            $('li', _.$dots).on('click.slick', {
                message: 'index'
            }, _.changeSlide);
        }

        if ( _.options.dots === true && _.options.pauseOnDotsHover === true ) {

            $('li', _.$dots)
                .on('mouseenter.slick', $.proxy(_.interrupt, _, true))
                .on('mouseleave.slick', $.proxy(_.interrupt, _, false));

        }

    };

    Slick.prototype.initSlideEvents = function() {

        var _ = this;

        if ( _.options.pauseOnHover ) {

            _.$list.on('mouseenter.slick', $.proxy(_.interrupt, _, true));
            _.$list.on('mouseleave.slick', $.proxy(_.interrupt, _, false));

        }

    };

    Slick.prototype.initializeEvents = function() {

        var _ = this;

        _.initArrowEvents();

        _.initDotEvents();
        _.initSlideEvents();

        _.$list.on('touchstart.slick mousedown.slick', {
            action: 'start'
        }, _.swipeHandler);
        _.$list.on('touchmove.slick mousemove.slick', {
            action: 'move'
        }, _.swipeHandler);
        _.$list.on('touchend.slick mouseup.slick', {
            action: 'end'
        }, _.swipeHandler);
        _.$list.on('touchcancel.slick mouseleave.slick', {
            action: 'end'
        }, _.swipeHandler);

        _.$list.on('click.slick', _.clickHandler);

        $(document).on(_.visibilityChange, $.proxy(_.visibility, _));

        if (_.options.accessibility === true) {
            _.$list.on('keydown.slick', _.keyHandler);
        }

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().on('click.slick', _.selectHandler);
        }

        $(window).on('orientationchange.slick.slick-' + _.instanceUid, $.proxy(_.orientationChange, _));

        $(window).on('resize.slick.slick-' + _.instanceUid, $.proxy(_.resize, _));

        $('[draggable!=true]', _.$slideTrack).on('dragstart', _.preventDefault);

        $(window).on('load.slick.slick-' + _.instanceUid, _.setPosition);
        $(document).on('ready.slick.slick-' + _.instanceUid, _.setPosition);

    };

    Slick.prototype.initUI = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {

            _.$prevArrow.show();
            _.$nextArrow.show();

        }

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            _.$dots.show();

        }

    };

    Slick.prototype.keyHandler = function(event) {

        var _ = this;
         //Dont slide if the cursor is inside the form fields and arrow keys are pressed
        if(!event.target.tagName.match('TEXTAREA|INPUT|SELECT')) {
            if (event.keyCode === 37 && _.options.accessibility === true) {
                _.changeSlide({
                    data: {
                        message: _.options.rtl === true ? 'next' :  'previous'
                    }
                });
            } else if (event.keyCode === 39 && _.options.accessibility === true) {
                _.changeSlide({
                    data: {
                        message: _.options.rtl === true ? 'previous' : 'next'
                    }
                });
            }
        }

    };

    Slick.prototype.lazyLoad = function() {

        var _ = this,
            loadRange, cloneRange, rangeStart, rangeEnd;

        function loadImages(imagesScope) {

            $('img[data-lazy]', imagesScope).each(function() {

                var image = $(this),
                    imageSource = $(this).attr('data-lazy'),
                    imageToLoad = document.createElement('img');

                imageToLoad.onload = function() {

                    image
                        .animate({ opacity: 0 }, 100, function() {
                            image
                                .attr('src', imageSource)
                                .animate({ opacity: 1 }, 200, function() {
                                    image
                                        .removeAttr('data-lazy')
                                        .removeClass('slick-loading');
                                });
                            _.$slider.trigger('lazyLoaded', [_, image, imageSource]);
                        });

                };

                imageToLoad.onerror = function() {

                    image
                        .removeAttr( 'data-lazy' )
                        .removeClass( 'slick-loading' )
                        .addClass( 'slick-lazyload-error' );

                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);

                };

                imageToLoad.src = imageSource;

            });

        }

        if (_.options.centerMode === true) {
            if (_.options.infinite === true) {
                rangeStart = _.currentSlide + (_.options.slidesToShow / 2 + 1);
                rangeEnd = rangeStart + _.options.slidesToShow + 2;
            } else {
                rangeStart = Math.max(0, _.currentSlide - (_.options.slidesToShow / 2 + 1));
                rangeEnd = 2 + (_.options.slidesToShow / 2 + 1) + _.currentSlide;
            }
        } else {
            rangeStart = _.options.infinite ? _.options.slidesToShow + _.currentSlide : _.currentSlide;
            rangeEnd = Math.ceil(rangeStart + _.options.slidesToShow);
            if (_.options.fade === true) {
                if (rangeStart > 0) rangeStart--;
                if (rangeEnd <= _.slideCount) rangeEnd++;
            }
        }

        loadRange = _.$slider.find('.slick-slide').slice(rangeStart, rangeEnd);
        loadImages(loadRange);

        if (_.slideCount <= _.options.slidesToShow) {
            cloneRange = _.$slider.find('.slick-slide');
            loadImages(cloneRange);
        } else
        if (_.currentSlide >= _.slideCount - _.options.slidesToShow) {
            cloneRange = _.$slider.find('.slick-cloned').slice(0, _.options.slidesToShow);
            loadImages(cloneRange);
        } else if (_.currentSlide === 0) {
            cloneRange = _.$slider.find('.slick-cloned').slice(_.options.slidesToShow * -1);
            loadImages(cloneRange);
        }

    };

    Slick.prototype.loadSlider = function() {

        var _ = this;

        _.setPosition();

        _.$slideTrack.css({
            opacity: 1
        });

        _.$slider.removeClass('slick-loading');

        _.initUI();

        if (_.options.lazyLoad === 'progressive') {
            _.progressiveLazyLoad();
        }

    };

    Slick.prototype.next = Slick.prototype.slickNext = function() {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'next'
            }
        });

    };

    Slick.prototype.orientationChange = function() {

        var _ = this;

        _.checkResponsive();
        _.setPosition();

    };

    Slick.prototype.pause = Slick.prototype.slickPause = function() {

        var _ = this;

        _.autoPlayClear();
        _.paused = true;

    };

    Slick.prototype.play = Slick.prototype.slickPlay = function() {

        var _ = this;

        _.autoPlay();
        _.options.autoplay = true;
        _.paused = false;
        _.focussed = false;
        _.interrupted = false;

    };

    Slick.prototype.postSlide = function(index) {

        var _ = this;

        if( !_.unslicked ) {

            _.$slider.trigger('afterChange', [_, index]);

            _.animating = false;

            _.setPosition();

            _.swipeLeft = null;

            if ( _.options.autoplay ) {
                _.autoPlay();
            }

            if (_.options.accessibility === true) {
                _.initADA();
            }

        }

    };

    Slick.prototype.prev = Slick.prototype.slickPrev = function() {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'previous'
            }
        });

    };

    Slick.prototype.preventDefault = function(event) {

        event.preventDefault();

    };

    Slick.prototype.progressiveLazyLoad = function( tryCount ) {

        tryCount = tryCount || 1;

        var _ = this,
            $imgsToLoad = $( 'img[data-lazy]', _.$slider ),
            image,
            imageSource,
            imageToLoad;

        if ( $imgsToLoad.length ) {

            image = $imgsToLoad.first();
            imageSource = image.attr('data-lazy');
            imageToLoad = document.createElement('img');

            imageToLoad.onload = function() {

                image
                    .attr( 'src', imageSource )
                    .removeAttr('data-lazy')
                    .removeClass('slick-loading');

                if ( _.options.adaptiveHeight === true ) {
                    _.setPosition();
                }

                _.$slider.trigger('lazyLoaded', [ _, image, imageSource ]);
                _.progressiveLazyLoad();

            };

            imageToLoad.onerror = function() {

                if ( tryCount < 3 ) {

                    /**
                     * try to load the image 3 times,
                     * leave a slight delay so we don't get
                     * servers blocking the request.
                     */
                    setTimeout( function() {
                        _.progressiveLazyLoad( tryCount + 1 );
                    }, 500 );

                } else {

                    image
                        .removeAttr( 'data-lazy' )
                        .removeClass( 'slick-loading' )
                        .addClass( 'slick-lazyload-error' );

                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);

                    _.progressiveLazyLoad();

                }

            };

            imageToLoad.src = imageSource;

        } else {

            _.$slider.trigger('allImagesLoaded', [ _ ]);

        }

    };

    Slick.prototype.refresh = function( initializing ) {

        var _ = this, currentSlide, lastVisibleIndex;

        lastVisibleIndex = _.slideCount - _.options.slidesToShow;

        // in non-infinite sliders, we don't want to go past the
        // last visible index.
        if( !_.options.infinite && ( _.currentSlide > lastVisibleIndex )) {
            _.currentSlide = lastVisibleIndex;
        }

        // if less slides than to show, go to start.
        if ( _.slideCount <= _.options.slidesToShow ) {
            _.currentSlide = 0;

        }

        currentSlide = _.currentSlide;

        _.destroy(true);

        $.extend(_, _.initials, { currentSlide: currentSlide });

        _.init();

        if( !initializing ) {

            _.changeSlide({
                data: {
                    message: 'index',
                    index: currentSlide
                }
            }, false);

        }

    };

    Slick.prototype.registerBreakpoints = function() {

        var _ = this, breakpoint, currentBreakpoint, l,
            responsiveSettings = _.options.responsive || null;

        if ( $.type(responsiveSettings) === 'array' && responsiveSettings.length ) {

            _.respondTo = _.options.respondTo || 'window';

            for ( breakpoint in responsiveSettings ) {

                l = _.breakpoints.length-1;
                currentBreakpoint = responsiveSettings[breakpoint].breakpoint;

                if (responsiveSettings.hasOwnProperty(breakpoint)) {

                    // loop through the breakpoints and cut out any existing
                    // ones with the same breakpoint number, we don't want dupes.
                    while( l >= 0 ) {
                        if( _.breakpoints[l] && _.breakpoints[l] === currentBreakpoint ) {
                            _.breakpoints.splice(l,1);
                        }
                        l--;
                    }

                    _.breakpoints.push(currentBreakpoint);
                    _.breakpointSettings[currentBreakpoint] = responsiveSettings[breakpoint].settings;

                }

            }

            _.breakpoints.sort(function(a, b) {
                return ( _.options.mobileFirst ) ? a-b : b-a;
            });

        }

    };

    Slick.prototype.reinit = function() {

        var _ = this;

        _.$slides =
            _.$slideTrack
                .children(_.options.slide)
                .addClass('slick-slide');

        _.slideCount = _.$slides.length;

        if (_.currentSlide >= _.slideCount && _.currentSlide !== 0) {
            _.currentSlide = _.currentSlide - _.options.slidesToScroll;
        }

        if (_.slideCount <= _.options.slidesToShow) {
            _.currentSlide = 0;
        }

        _.registerBreakpoints();

        _.setProps();
        _.setupInfinite();
        _.buildArrows();
        _.updateArrows();
        _.initArrowEvents();
        _.buildDots();
        _.updateDots();
        _.initDotEvents();
        _.cleanUpSlideEvents();
        _.initSlideEvents();

        _.checkResponsive(false, true);

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().on('click.slick', _.selectHandler);
        }

        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);

        _.setPosition();
        _.focusHandler();

        _.paused = !_.options.autoplay;
        _.autoPlay();

        _.$slider.trigger('reInit', [_]);

    };

    Slick.prototype.resize = function() {

        var _ = this;

        if ($(window).width() !== _.windowWidth) {
            clearTimeout(_.windowDelay);
            _.windowDelay = window.setTimeout(function() {
                _.windowWidth = $(window).width();
                _.checkResponsive();
                if( !_.unslicked ) { _.setPosition(); }
            }, 50);
        }
    };

    Slick.prototype.removeSlide = Slick.prototype.slickRemove = function(index, removeBefore, removeAll) {

        var _ = this;

        if (typeof(index) === 'boolean') {
            removeBefore = index;
            index = removeBefore === true ? 0 : _.slideCount - 1;
        } else {
            index = removeBefore === true ? --index : index;
        }

        if (_.slideCount < 1 || index < 0 || index > _.slideCount - 1) {
            return false;
        }

        _.unload();

        if (removeAll === true) {
            _.$slideTrack.children().remove();
        } else {
            _.$slideTrack.children(this.options.slide).eq(index).remove();
        }

        _.$slides = _.$slideTrack.children(this.options.slide);

        _.$slideTrack.children(this.options.slide).detach();

        _.$slideTrack.append(_.$slides);

        _.$slidesCache = _.$slides;

        _.reinit();

    };

    Slick.prototype.setCSS = function(position) {

        var _ = this,
            positionProps = {},
            x, y;

        if (_.options.rtl === true) {
            position = -position;
        }
        x = _.positionProp == 'left' ? Math.ceil(position) + 'px' : '0px';
        y = _.positionProp == 'top' ? Math.ceil(position) + 'px' : '0px';

        positionProps[_.positionProp] = position;

        if (_.transformsEnabled === false) {
            _.$slideTrack.css(positionProps);
        } else {
            positionProps = {};
            if (_.cssTransitions === false) {
                positionProps[_.animType] = 'translate(' + x + ', ' + y + ')';
                _.$slideTrack.css(positionProps);
            } else {
                positionProps[_.animType] = 'translate3d(' + x + ', ' + y + ', 0px)';
                _.$slideTrack.css(positionProps);
            }
        }

    };

    Slick.prototype.setDimensions = function() {

        var _ = this;

        if (_.options.vertical === false) {
            if (_.options.centerMode === true) {
                _.$list.css({
                    padding: ('0px ' + _.options.centerPadding)
                });
            }
        } else {
            _.$list.height(_.$slides.first().outerHeight(true) * _.options.slidesToShow);
            if (_.options.centerMode === true) {
                _.$list.css({
                    padding: (_.options.centerPadding + ' 0px')
                });
            }
        }

        _.listWidth = _.$list.width();
        _.listHeight = _.$list.height();


        if (_.options.vertical === false && _.options.variableWidth === false) {
            _.slideWidth = Math.ceil(_.listWidth / _.options.slidesToShow);
            _.$slideTrack.width(Math.ceil((_.slideWidth * _.$slideTrack.children('.slick-slide').length)));

        } else if (_.options.variableWidth === true) {
            _.$slideTrack.width(5000 * _.slideCount);
        } else {
            _.slideWidth = Math.ceil(_.listWidth);
            _.$slideTrack.height(Math.ceil((_.$slides.first().outerHeight(true) * _.$slideTrack.children('.slick-slide').length)));
        }

        var offset = _.$slides.first().outerWidth(true) - _.$slides.first().width();
        if (_.options.variableWidth === false) _.$slideTrack.children('.slick-slide').width(_.slideWidth - offset);

    };

    Slick.prototype.setFade = function() {

        var _ = this,
            targetLeft;

        _.$slides.each(function(index, element) {
            targetLeft = (_.slideWidth * index) * -1;
            if (_.options.rtl === true) {
                $(element).css({
                    position: 'relative',
                    right: targetLeft,
                    top: 0,
                    zIndex: _.options.zIndex - 2,
                    opacity: 0
                });
            } else {
                $(element).css({
                    position: 'relative',
                    left: targetLeft,
                    top: 0,
                    zIndex: _.options.zIndex - 2,
                    opacity: 0
                });
            }
        });

        _.$slides.eq(_.currentSlide).css({
            zIndex: _.options.zIndex - 1,
            opacity: 1
        });

    };

    Slick.prototype.setHeight = function() {

        var _ = this;

        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);
            _.$list.css('height', targetHeight);
        }

    };

    Slick.prototype.setOption =
    Slick.prototype.slickSetOption = function() {

        /**
         * accepts arguments in format of:
         *
         *  - for changing a single option's value:
         *     .slick("setOption", option, value, refresh )
         *
         *  - for changing a set of responsive options:
         *     .slick("setOption", 'responsive', [{}, ...], refresh )
         *
         *  - for updating multiple values at once (not responsive)
         *     .slick("setOption", { 'option': value, ... }, refresh )
         */

        var _ = this, l, item, option, value, refresh = false, type;

        if( $.type( arguments[0] ) === 'object' ) {

            option =  arguments[0];
            refresh = arguments[1];
            type = 'multiple';

        } else if ( $.type( arguments[0] ) === 'string' ) {

            option =  arguments[0];
            value = arguments[1];
            refresh = arguments[2];

            if ( arguments[0] === 'responsive' && $.type( arguments[1] ) === 'array' ) {

                type = 'responsive';

            } else if ( typeof arguments[1] !== 'undefined' ) {

                type = 'single';

            }

        }

        if ( type === 'single' ) {

            _.options[option] = value;


        } else if ( type === 'multiple' ) {

            $.each( option , function( opt, val ) {

                _.options[opt] = val;

            });


        } else if ( type === 'responsive' ) {

            for ( item in value ) {

                if( $.type( _.options.responsive ) !== 'array' ) {

                    _.options.responsive = [ value[item] ];

                } else {

                    l = _.options.responsive.length-1;

                    // loop through the responsive object and splice out duplicates.
                    while( l >= 0 ) {

                        if( _.options.responsive[l].breakpoint === value[item].breakpoint ) {

                            _.options.responsive.splice(l,1);

                        }

                        l--;

                    }

                    _.options.responsive.push( value[item] );

                }

            }

        }

        if ( refresh ) {

            _.unload();
            _.reinit();

        }

    };

    Slick.prototype.setPosition = function() {

        var _ = this;

        _.setDimensions();

        _.setHeight();

        if (_.options.fade === false) {
            _.setCSS(_.getLeft(_.currentSlide));
        } else {
            _.setFade();
        }

        _.$slider.trigger('setPosition', [_]);

    };

    Slick.prototype.setProps = function() {

        var _ = this,
            bodyStyle = document.body.style;

        _.positionProp = _.options.vertical === true ? 'top' : 'left';

        if (_.positionProp === 'top') {
            _.$slider.addClass('slick-vertical');
        } else {
            _.$slider.removeClass('slick-vertical');
        }

        if (bodyStyle.WebkitTransition !== undefined ||
            bodyStyle.MozTransition !== undefined ||
            bodyStyle.msTransition !== undefined) {
            if (_.options.useCSS === true) {
                _.cssTransitions = true;
            }
        }

        if ( _.options.fade ) {
            if ( typeof _.options.zIndex === 'number' ) {
                if( _.options.zIndex < 3 ) {
                    _.options.zIndex = 3;
                }
            } else {
                _.options.zIndex = _.defaults.zIndex;
            }
        }

        if (bodyStyle.OTransform !== undefined) {
            _.animType = 'OTransform';
            _.transformType = '-o-transform';
            _.transitionType = 'OTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.MozTransform !== undefined) {
            _.animType = 'MozTransform';
            _.transformType = '-moz-transform';
            _.transitionType = 'MozTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.MozPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.webkitTransform !== undefined) {
            _.animType = 'webkitTransform';
            _.transformType = '-webkit-transform';
            _.transitionType = 'webkitTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.msTransform !== undefined) {
            _.animType = 'msTransform';
            _.transformType = '-ms-transform';
            _.transitionType = 'msTransition';
            if (bodyStyle.msTransform === undefined) _.animType = false;
        }
        if (bodyStyle.transform !== undefined && _.animType !== false) {
            _.animType = 'transform';
            _.transformType = 'transform';
            _.transitionType = 'transition';
        }
        _.transformsEnabled = _.options.useTransform && (_.animType !== null && _.animType !== false);
    };


    Slick.prototype.setSlideClasses = function(index) {

        var _ = this,
            centerOffset, allSlides, indexOffset, remainder;

        allSlides = _.$slider
            .find('.slick-slide')
            .removeClass('slick-active slick-center slick-current')
            .attr('aria-hidden', 'true');

        _.$slides
            .eq(index)
            .addClass('slick-current');

        if (_.options.centerMode === true) {

            centerOffset = Math.floor(_.options.slidesToShow / 2);

            if (_.options.infinite === true) {

                if (index >= centerOffset && index <= (_.slideCount - 1) - centerOffset) {

                    _.$slides
                        .slice(index - centerOffset, index + centerOffset + 1)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                } else {

                    indexOffset = _.options.slidesToShow + index;
                    allSlides
                        .slice(indexOffset - centerOffset + 1, indexOffset + centerOffset + 2)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                }

                if (index === 0) {

                    allSlides
                        .eq(allSlides.length - 1 - _.options.slidesToShow)
                        .addClass('slick-center');

                } else if (index === _.slideCount - 1) {

                    allSlides
                        .eq(_.options.slidesToShow)
                        .addClass('slick-center');

                }

            }

            _.$slides
                .eq(index)
                .addClass('slick-center');

        } else {

            if (index >= 0 && index <= (_.slideCount - _.options.slidesToShow)) {

                _.$slides
                    .slice(index, index + _.options.slidesToShow)
                    .addClass('slick-active')
                    .attr('aria-hidden', 'false');

            } else if (allSlides.length <= _.options.slidesToShow) {

                allSlides
                    .addClass('slick-active')
                    .attr('aria-hidden', 'false');

            } else {

                remainder = _.slideCount % _.options.slidesToShow;
                indexOffset = _.options.infinite === true ? _.options.slidesToShow + index : index;

                if (_.options.slidesToShow == _.options.slidesToScroll && (_.slideCount - index) < _.options.slidesToShow) {

                    allSlides
                        .slice(indexOffset - (_.options.slidesToShow - remainder), indexOffset + remainder)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                } else {

                    allSlides
                        .slice(indexOffset, indexOffset + _.options.slidesToShow)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                }

            }

        }

        if (_.options.lazyLoad === 'ondemand') {
            _.lazyLoad();
        }

    };

    Slick.prototype.setupInfinite = function() {

        var _ = this,
            i, slideIndex, infiniteCount;

        if (_.options.fade === true) {
            _.options.centerMode = false;
        }

        if (_.options.infinite === true && _.options.fade === false) {

            slideIndex = null;

            if (_.slideCount > _.options.slidesToShow) {

                if (_.options.centerMode === true) {
                    infiniteCount = _.options.slidesToShow + 1;
                } else {
                    infiniteCount = _.options.slidesToShow;
                }

                for (i = _.slideCount; i > (_.slideCount -
                        infiniteCount); i -= 1) {
                    slideIndex = i - 1;
                    $(_.$slides[slideIndex]).clone(true).attr('id', '')
                        .attr('data-slick-index', slideIndex - _.slideCount)
                        .prependTo(_.$slideTrack).addClass('slick-cloned');
                }
                for (i = 0; i < infiniteCount; i += 1) {
                    slideIndex = i;
                    $(_.$slides[slideIndex]).clone(true).attr('id', '')
                        .attr('data-slick-index', slideIndex + _.slideCount)
                        .appendTo(_.$slideTrack).addClass('slick-cloned');
                }
                _.$slideTrack.find('.slick-cloned').find('[id]').each(function() {
                    $(this).attr('id', '');
                });

            }

        }

    };

    Slick.prototype.interrupt = function( toggle ) {

        var _ = this;

        if( !toggle ) {
            _.autoPlay();
        }
        _.interrupted = toggle;

    };

    Slick.prototype.selectHandler = function(event) {

        var _ = this;

        var targetElement =
            $(event.target).is('.slick-slide') ?
                $(event.target) :
                $(event.target).parents('.slick-slide');

        var index = parseInt(targetElement.attr('data-slick-index'));

        if (!index) index = 0;

        if (_.slideCount <= _.options.slidesToShow) {

            _.setSlideClasses(index);
            _.asNavFor(index);
            return;

        }

        _.slideHandler(index);

    };

    Slick.prototype.slideHandler = function(index, sync, dontAnimate) {

        var targetSlide, animSlide, oldSlide, slideLeft, targetLeft = null,
            _ = this, navTarget;

        sync = sync || false;

        if (_.animating === true && _.options.waitForAnimate === true) {
            return;
        }

        if (_.options.fade === true && _.currentSlide === index) {
            return;
        }

        if (_.slideCount <= _.options.slidesToShow) {
            return;
        }

        if (sync === false) {
            _.asNavFor(index);
        }

        targetSlide = index;
        targetLeft = _.getLeft(targetSlide);
        slideLeft = _.getLeft(_.currentSlide);

        _.currentLeft = _.swipeLeft === null ? slideLeft : _.swipeLeft;

        if (_.options.infinite === false && _.options.centerMode === false && (index < 0 || index > _.getDotCount() * _.options.slidesToScroll)) {
            if (_.options.fade === false) {
                targetSlide = _.currentSlide;
                if (dontAnimate !== true) {
                    _.animateSlide(slideLeft, function() {
                        _.postSlide(targetSlide);
                    });
                } else {
                    _.postSlide(targetSlide);
                }
            }
            return;
        } else if (_.options.infinite === false && _.options.centerMode === true && (index < 0 || index > (_.slideCount - _.options.slidesToScroll))) {
            if (_.options.fade === false) {
                targetSlide = _.currentSlide;
                if (dontAnimate !== true) {
                    _.animateSlide(slideLeft, function() {
                        _.postSlide(targetSlide);
                    });
                } else {
                    _.postSlide(targetSlide);
                }
            }
            return;
        }

        if ( _.options.autoplay ) {
            clearInterval(_.autoPlayTimer);
        }

        if (targetSlide < 0) {
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                animSlide = _.slideCount - (_.slideCount % _.options.slidesToScroll);
            } else {
                animSlide = _.slideCount + targetSlide;
            }
        } else if (targetSlide >= _.slideCount) {
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                animSlide = 0;
            } else {
                animSlide = targetSlide - _.slideCount;
            }
        } else {
            animSlide = targetSlide;
        }

        _.animating = true;

        _.$slider.trigger('beforeChange', [_, _.currentSlide, animSlide]);

        oldSlide = _.currentSlide;
        _.currentSlide = animSlide;

        _.setSlideClasses(_.currentSlide);

        if ( _.options.asNavFor ) {

            navTarget = _.getNavTarget();
            navTarget = navTarget.slick('getSlick');

            if ( navTarget.slideCount <= navTarget.options.slidesToShow ) {
                navTarget.setSlideClasses(_.currentSlide);
            }

        }

        _.updateDots();
        _.updateArrows();

        if (_.options.fade === true) {
            if (dontAnimate !== true) {

                _.fadeSlideOut(oldSlide);

                _.fadeSlide(animSlide, function() {
                    _.postSlide(animSlide);
                });

            } else {
                _.postSlide(animSlide);
            }
            _.animateHeight();
            return;
        }

        if (dontAnimate !== true) {
            _.animateSlide(targetLeft, function() {
                _.postSlide(animSlide);
            });
        } else {
            _.postSlide(animSlide);
        }

    };

    Slick.prototype.startLoad = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {

            _.$prevArrow.hide();
            _.$nextArrow.hide();

        }

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            _.$dots.hide();

        }

        _.$slider.addClass('slick-loading');

    };

    Slick.prototype.swipeDirection = function() {

        var xDist, yDist, r, swipeAngle, _ = this;

        xDist = _.touchObject.startX - _.touchObject.curX;
        yDist = _.touchObject.startY - _.touchObject.curY;
        r = Math.atan2(yDist, xDist);

        swipeAngle = Math.round(r * 180 / Math.PI);
        if (swipeAngle < 0) {
            swipeAngle = 360 - Math.abs(swipeAngle);
        }

        if ((swipeAngle <= 45) && (swipeAngle >= 0)) {
            return (_.options.rtl === false ? 'left' : 'right');
        }
        if ((swipeAngle <= 360) && (swipeAngle >= 315)) {
            return (_.options.rtl === false ? 'left' : 'right');
        }
        if ((swipeAngle >= 135) && (swipeAngle <= 225)) {
            return (_.options.rtl === false ? 'right' : 'left');
        }
        if (_.options.verticalSwiping === true) {
            if ((swipeAngle >= 35) && (swipeAngle <= 135)) {
                return 'down';
            } else {
                return 'up';
            }
        }

        return 'vertical';

    };

    Slick.prototype.swipeEnd = function(event) {

        var _ = this,
            slideCount,
            direction;

        _.dragging = false;
        _.interrupted = false;
        _.shouldClick = ( _.touchObject.swipeLength > 10 ) ? false : true;

        if ( _.touchObject.curX === undefined ) {
            return false;
        }

        if ( _.touchObject.edgeHit === true ) {
            _.$slider.trigger('edge', [_, _.swipeDirection() ]);
        }

        if ( _.touchObject.swipeLength >= _.touchObject.minSwipe ) {

            direction = _.swipeDirection();

            switch ( direction ) {

                case 'left':
                case 'down':

                    slideCount =
                        _.options.swipeToSlide ?
                            _.checkNavigable( _.currentSlide + _.getSlideCount() ) :
                            _.currentSlide + _.getSlideCount();

                    _.currentDirection = 0;

                    break;

                case 'right':
                case 'up':

                    slideCount =
                        _.options.swipeToSlide ?
                            _.checkNavigable( _.currentSlide - _.getSlideCount() ) :
                            _.currentSlide - _.getSlideCount();

                    _.currentDirection = 1;

                    break;

                default:


            }

            if( direction != 'vertical' ) {

                _.slideHandler( slideCount );
                _.touchObject = {};
                _.$slider.trigger('swipe', [_, direction ]);

            }

        } else {

            if ( _.touchObject.startX !== _.touchObject.curX ) {

                _.slideHandler( _.currentSlide );
                _.touchObject = {};

            }

        }

    };

    Slick.prototype.swipeHandler = function(event) {

        var _ = this;

        if ((_.options.swipe === false) || ('ontouchend' in document && _.options.swipe === false)) {
            return;
        } else if (_.options.draggable === false && event.type.indexOf('mouse') !== -1) {
            return;
        }

        _.touchObject.fingerCount = event.originalEvent && event.originalEvent.touches !== undefined ?
            event.originalEvent.touches.length : 1;

        _.touchObject.minSwipe = _.listWidth / _.options
            .touchThreshold;

        if (_.options.verticalSwiping === true) {
            _.touchObject.minSwipe = _.listHeight / _.options
                .touchThreshold;
        }

        switch (event.data.action) {

            case 'start':
                _.swipeStart(event);
                break;

            case 'move':
                _.swipeMove(event);
                break;

            case 'end':
                _.swipeEnd(event);
                break;

        }

    };

    Slick.prototype.swipeMove = function(event) {

        var _ = this,
            edgeWasHit = false,
            curLeft, swipeDirection, swipeLength, positionOffset, touches;

        touches = event.originalEvent !== undefined ? event.originalEvent.touches : null;

        if (!_.dragging || touches && touches.length !== 1) {
            return false;
        }

        curLeft = _.getLeft(_.currentSlide);

        _.touchObject.curX = touches !== undefined ? touches[0].pageX : event.clientX;
        _.touchObject.curY = touches !== undefined ? touches[0].pageY : event.clientY;

        _.touchObject.swipeLength = Math.round(Math.sqrt(
            Math.pow(_.touchObject.curX - _.touchObject.startX, 2)));

        if (_.options.verticalSwiping === true) {
            _.touchObject.swipeLength = Math.round(Math.sqrt(
                Math.pow(_.touchObject.curY - _.touchObject.startY, 2)));
        }

        swipeDirection = _.swipeDirection();

        if (swipeDirection === 'vertical') {
            return;
        }

        if (event.originalEvent !== undefined && _.touchObject.swipeLength > 4) {
            event.preventDefault();
        }

        positionOffset = (_.options.rtl === false ? 1 : -1) * (_.touchObject.curX > _.touchObject.startX ? 1 : -1);
        if (_.options.verticalSwiping === true) {
            positionOffset = _.touchObject.curY > _.touchObject.startY ? 1 : -1;
        }


        swipeLength = _.touchObject.swipeLength;

        _.touchObject.edgeHit = false;

        if (_.options.infinite === false) {
            if ((_.currentSlide === 0 && swipeDirection === 'right') || (_.currentSlide >= _.getDotCount() && swipeDirection === 'left')) {
                swipeLength = _.touchObject.swipeLength * _.options.edgeFriction;
                _.touchObject.edgeHit = true;
            }
        }

        if (_.options.vertical === false) {
            _.swipeLeft = curLeft + swipeLength * positionOffset;
        } else {
            _.swipeLeft = curLeft + (swipeLength * (_.$list.height() / _.listWidth)) * positionOffset;
        }
        if (_.options.verticalSwiping === true) {
            _.swipeLeft = curLeft + swipeLength * positionOffset;
        }

        if (_.options.fade === true || _.options.touchMove === false) {
            return false;
        }

        if (_.animating === true) {
            _.swipeLeft = null;
            return false;
        }

        _.setCSS(_.swipeLeft);

    };

    Slick.prototype.swipeStart = function(event) {

        var _ = this,
            touches;

        _.interrupted = true;

        if (_.touchObject.fingerCount !== 1 || _.slideCount <= _.options.slidesToShow) {
            _.touchObject = {};
            return false;
        }

        if (event.originalEvent !== undefined && event.originalEvent.touches !== undefined) {
            touches = event.originalEvent.touches[0];
        }

        _.touchObject.startX = _.touchObject.curX = touches !== undefined ? touches.pageX : event.clientX;
        _.touchObject.startY = _.touchObject.curY = touches !== undefined ? touches.pageY : event.clientY;

        _.dragging = true;

    };

    Slick.prototype.unfilterSlides = Slick.prototype.slickUnfilter = function() {

        var _ = this;

        if (_.$slidesCache !== null) {

            _.unload();

            _.$slideTrack.children(this.options.slide).detach();

            _.$slidesCache.appendTo(_.$slideTrack);

            _.reinit();

        }

    };

    Slick.prototype.unload = function() {

        var _ = this;

        $('.slick-cloned', _.$slider).remove();

        if (_.$dots) {
            _.$dots.remove();
        }

        if (_.$prevArrow && _.htmlExpr.test(_.options.prevArrow)) {
            _.$prevArrow.remove();
        }

        if (_.$nextArrow && _.htmlExpr.test(_.options.nextArrow)) {
            _.$nextArrow.remove();
        }

        _.$slides
            .removeClass('slick-slide slick-active slick-visible slick-current')
            .attr('aria-hidden', 'true')
            .css('width', '');

    };

    Slick.prototype.unslick = function(fromBreakpoint) {

        var _ = this;
        _.$slider.trigger('unslick', [_, fromBreakpoint]);
        _.destroy();

    };

    Slick.prototype.updateArrows = function() {

        var _ = this,
            centerOffset;

        centerOffset = Math.floor(_.options.slidesToShow / 2);

        if ( _.options.arrows === true &&
            _.slideCount > _.options.slidesToShow &&
            !_.options.infinite ) {

            _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');
            _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            if (_.currentSlide === 0) {

                _.$prevArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            } else if (_.currentSlide >= _.slideCount - _.options.slidesToShow && _.options.centerMode === false) {

                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            } else if (_.currentSlide >= _.slideCount - 1 && _.options.centerMode === true) {

                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            }

        }

    };

    Slick.prototype.updateDots = function() {

        var _ = this;

        if (_.$dots !== null) {

            _.$dots
                .find('li')
                .removeClass('slick-active')
                .attr('aria-hidden', 'true');

            _.$dots
                .find('li')
                .eq(Math.floor(_.currentSlide / _.options.slidesToScroll))
                .addClass('slick-active')
                .attr('aria-hidden', 'false');

        }

    };

    Slick.prototype.visibility = function() {

        var _ = this;

        if ( _.options.autoplay ) {

            if ( document[_.hidden] ) {

                _.interrupted = true;

            } else {

                _.interrupted = false;

            }

        }

    };

    $.fn.slick = function() {
        var _ = this,
            opt = arguments[0],
            args = Array.prototype.slice.call(arguments, 1),
            l = _.length,
            i,
            ret;
        for (i = 0; i < l; i++) {
            if (typeof opt == 'object' || typeof opt == 'undefined')
                _[i].slick = new Slick(_[i], opt);
            else
                ret = _[i].slick[opt].apply(_[i].slick, args);
            if (typeof ret != 'undefined') return ret;
        }
        return _;
    };

}));

/*!
jquery.animate-enhanced plugin v1.05
---
http://github.com/benbarnett/jQuery-Animate-Enhanced
http://benbarnett.net
@benpbarnett
*/
/*
jquery.animate-enhanced plugin v1.05
---
http://github.com/benbarnett/jQuery-Animate-Enhanced
http://benbarnett.net
@benpbarnett
---
Copyright (c) 2012 Ben Barnett

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
---
Extends jQuery.animate() to automatically use CSS3 transformations where applicable.
Tested with jQuery 1.3.2+

Supports -moz-transition, -webkit-transition, -o-transition, transition

Targetted properties (for now):
	- left
	- top
	- opacity
	- width
	- height

Usage (exactly the same as it would be normally):

	jQuery(element).animate({left: 200},  500, function() {
		// callback
	});

Changelog:
	1.05 (14/08/2013):
		- Merging PR #124 fix for highcharts clash. Thanks @bensonc!

	1.04 (14/08/2013):
		- Using fix from issue #69 by @rickyk586 to support percentages

	1.03 (19/7/2013):
		- Merge PR #129 (Use originalAnimateMethod if a step callback function is provided.) /thx @lehni

	1.02 (8/5/2013):
		- Fixing use3D default flags. It must explicitly be set to false to disable 3d now, the plugin by default will use it if available.

	1.01 (8/5/2013):
		- Adding appropriate display value for wider range of elements (issue #121 - thanks smacky)

	1.0 (8/5/2103):
		- Fix avoidTransforms: true behaviour for directional transitions

	0.99.1 (3/4/2013):
		- Add Set or unset the 'disabled by default' value (PR #117)

	0.99 (5/12/2012):
		- PR #109 Added support for list-item nodes. FadeIn on tags was omitting the list-style support. (thx @SeanCannon)
		
	0.98 (12/11/2012):
		- Merging pull request #106 thx @gboysko - checking for ownerDocument before using getComputedStyle

	0.97 (6/11/2012):
		- Merging pull request #104 thx @gavrochelegnou - .bind instead of .one

	0.96a (20/08/2012):
		- Checking event is from dispatch target (issue #58)

	0.96 (20/08/2012):
		- Fixes for context, all elements returned as context (issue #84)
		- Reset position with leaveTransforms !== true fixes (issue #93)
		

	0.95 (20/08/2012):
		- If target opacity == current opacity, pass back to jquery native to get callback firing (#94)

	0.94 (20/08/2012):
		- Addresses Firefox callback mechanisms (issue #94)
		- using $.one() to bind to CSS callbacks in a more generic way

	0.93 (6/8/2012):
		- Adding other Opera 'transitionend' event (re: issue #90)

	0.92 (6/8/2012):
		- Seperate unbinds into different threads (re: issue #91)

	0.91 (2/4/2012):
		- Merge Pull Request #74 - Unit Management

	0.90 (7/3/2012):
		- Adding public $.toggleDisabledByDefault() feature to disable entire plugin by default (Issue #73)

	0.89 (24/1/2012):
		- Adding 'avoidCSSTransitions' property. Set to true to disable entire plugin. (Issue #47)

	0.88 (24/1/2012):
		- Fix Issue #67 for HighchartsJS compatibility

	0.87 (24/1/2012):
		- Fix Issue #66 selfCSSData.original is undefined

	0.86 (9/1/2012):
		- Strict JS fix for undefined variable

	0.85 (20/12/2011):
		- Merge Pull request #57 from Kronuz
		- Codebase cleaned and now passes jshint.
		- Fixed a few bugs (it now saves and restores the original css transition properties).
		- fadeOut() is fixed, it wasn't restoring the opacity after hiding it.

	0.80 (13/09/2011):
		- Issue #28 - Report $(el).is(':animated') fix

	0.79 (06/09/2011):
		- Issue #42 - Right negative position animation: please see issue notes on Github.

	0.78 (02/09/2011):
		- Issue #18 - jQuery/$ reference joys

	0.77 (02/09/2011):
		- Adding feature on Github issue #44 - Use 3D Transitions by default

	0.76 (28/06/2011):
		- Fixing issue #37 - fixed stop() method (with gotoEnd == false)

	0.75 (15/06/2011):
		- Fixing issue #35 to pass actual object back as context for callback

	0.74 (28/05/2011):
		- Fixing issue #29 to play nice with 1.6+

	0.73 (05/03/2011):
		- Merged Pull Request #26: Fixed issue with fadeOut() / "hide" shortcut

	0.72 (05/03/2011):
		- Merged Pull Request #23: Added Penner equation approximations from Matthew Lein's Ceaser, and added failsafe fallbacks

	0.71 (05/03/2011):
		- Merged Pull Request #24: Changes translation object to integers instead of strings to fix relative values bug with leaveTransforms = true

	0.70 (17/03/2011):
		- Merged Pull Request from amlw-nyt to add bottom/right handling

	0.68 (15/02/2011):
		- width/height fixes & queue issues resolved.

	0.67 (15/02/2011):
		- Code cleanups & file size improvements for compression.

	0.66 (15/02/2011):
		- Zero second fadeOut(), fadeIn() fixes

	0.65 (01/02/2011):
		- Callbacks with queue() support refactored to support element arrays

	0.64 (27/01/2011):
		- BUGFIX #13: .slideUp(), .slideToggle(), .slideDown() bugfixes in Webkit

	0.63 (12/01/2011):
		- BUGFIX #11: callbacks not firing when new value == old value

	0.62 (10/01/2011):
		- BUGFIX #11: queue is not a function issue fixed

	0.61 (10/01/2011):
		- BUGFIX #10: Negative positions converting to positive

	0.60 (06/01/2011):
		- Animate function rewrite in accordance with new queue system
		- BUGFIX #8: Left/top position values always assumed relative rather than absolute
		- BUGFIX #9: animation as last item in a chain - the chain is ignored?
		- BUGFIX: width/height CSS3 transformation with left/top working

	0.55 (22/12/2010):
		- isEmptyObject function for <jQuery 1.4 (requires 1.3.2)

	0.54a (22/12/2010):
		- License changed to MIT (http://www.opensource.org/licenses/mit-license.php)

	0.54 (22/12/2010):
		- Removed silly check for 'jQuery UI' bailouts. Sorry.
		- Scoping issues fixed - Issue #4: $(this) should give you a reference to the selector being animated.. per jquery's core animation funciton.

	0.53 (17/11/2010):
		- New $.translate() method to easily calculate current transformed translation
		- Repeater callback bug fix for leaveTransforms:true (was constantly appending properties)

	0.52 (16/11/2010):
		- leaveTransforms: true bug fixes
		- 'Applying' user callback function to retain 'this' context

	0.51 (08/11/2010):
		- Bailing out with jQuery UI. This is only so the plugin plays nice with others and is TEMPORARY.

	0.50 (08/11/2010):
		- Support for $.fn.stop()
		- Fewer jQuery.fn entries to preserve namespace
		- All references $ converted to jQuery
		- jsDoc Toolkit style commenting for docs (coming soon)

	0.49 (19/10/2010):
		- Handling of 'undefined' errors for secondary CSS objects
		- Support to enhance 'width' and 'height' properties (except shortcuts involving jQuery.fx.step, e.g slideToggle)
		- Bugfix: Positioning when using avoidTransforms: true (thanks Ralf Santbergen reports)
		- Bugfix: Callbacks and Scope issues

	0.48 (13/10/2010):
		- Checks for 3d support before applying

	0.47 (12/10/2010);
		- Compatible with .fadeIn(), .fadeOut()
		- Use shortcuts, no duration for jQuery default or "fast" and "slow"
		- Clean up callback event listeners on complete (preventing multiple callbacks)

	0.46 (07/10/2010);
		- Compatible with .slideUp(), .slideDown(), .slideToggle()

	0.45 (06/10/2010):
		- 'Zero' position bug fix (was originally translating by 0 zero pixels, i.e. no movement)

	0.4 (05/10/2010):
		- Iterate over multiple elements and store transforms in jQuery.data per element
		- Include support for relative values (+= / -=)
		- Better unit sanitization
		- Performance tweaks
		- Fix for optional callback function (was required)
		- Applies data[translateX] and data[translateY] to elements for easy access
		- Added 'easeInOutQuint' easing function for CSS transitions (requires jQuery UI for JS anims)
		- Less need for leaveTransforms = true due to better position detections
*/

(function(jQuery, originalAnimateMethod, originalStopMethod) {

	// ----------
	// Plugin variables
	// ----------
	var	cssTransitionProperties = ['top', 'right', 'bottom', 'left', 'opacity', 'height', 'width'],
		directions = ['top', 'right', 'bottom', 'left'],
		cssPrefixes = ['-webkit-', '-moz-', '-o-', ''],
		pluginOptions = ['avoidTransforms', 'useTranslate3d', 'leaveTransforms'],
		rfxnum = /^([+-]=)?([\d+-.]+)(.*)$/,
		rupper = /([A-Z])/g,
		defaultEnhanceData = {
			secondary: {},
			meta: {
				top : 0,
				right : 0,
				bottom : 0,
				left : 0
			}
		},
		valUnit = 'px',

		DATA_KEY = 'jQe',
		CUBIC_BEZIER_OPEN = 'cubic-bezier(',
		CUBIC_BEZIER_CLOSE = ')',

		originalAnimatedFilter = null,
		pluginDisabledDefault = false;


	// ----------
	// Check if this browser supports CSS3 transitions
	// ----------
	var thisBody = document.body || document.documentElement,
		thisStyle = thisBody.style,
		transitionEndEvent = 'webkitTransitionEnd oTransitionEnd transitionend',
		cssTransitionsSupported = thisStyle.WebkitTransition !== undefined || thisStyle.MozTransition !== undefined || thisStyle.OTransition !== undefined || thisStyle.transition !== undefined,
		has3D = ('WebKitCSSMatrix' in window && 'm11' in new WebKitCSSMatrix()),
		use3DByDefault = has3D;



	// ----------
	// Extended :animated filter
	// ----------
	if ( jQuery.expr && jQuery.expr.filters ) {
		originalAnimatedFilter = jQuery.expr.filters.animated;
		jQuery.expr.filters.animated = function(elem) {
			return jQuery(elem).data('events') && jQuery(elem).data('events')[transitionEndEvent] ? true : originalAnimatedFilter.call(this, elem);
		};
	}


	/**
		@private
		@name _getUnit
		@function
		@description Return unit value ("px", "%", "em" for re-use correct one when translating)
		@param {variant} [val] Target value
	*/
	function _getUnit(val){
		return val.match(/\D+$/);
	}


	/**
		@private
		@name _interpretValue
		@function
		@description Interpret value ("px", "+=" and "-=" sanitisation)
		@param {object} [element] The Element for current CSS analysis
		@param {variant} [val] Target value
		@param {string} [prop] The property we're looking at
		@param {boolean} [isTransform] Is this a CSS3 transform?
	*/
	function _interpretValue(e, val, prop, isTransform) {
		// this is a nasty fix, but we check for prop == 'd' to see if we're dealing with SVG, and abort
		if (prop == "d") return;
		if (!_isValidElement(e)) return;
		
		var parts = rfxnum.exec(val),
			start = e.css(prop) === 'auto' ? 0 : e.css(prop),
			cleanCSSStart = typeof start == 'string' ? _cleanValue(start) : start,
			cleanTarget = typeof val == 'string' ? _cleanValue(val) : val,
			cleanStart = isTransform === true ? 0 : cleanCSSStart,
			hidden = e.is(':hidden'),
			translation = e.translation();

		if (prop == 'left') cleanStart = parseInt(cleanCSSStart, 10) + translation.x;
		if (prop == 'right') cleanStart = parseInt(cleanCSSStart, 10) + translation.x;
		if (prop == 'top') cleanStart = parseInt(cleanCSSStart, 10) + translation.y;
		if (prop == 'bottom') cleanStart = parseInt(cleanCSSStart, 10) + translation.y;

		// deal with shortcuts
		if (!parts && val == 'show') {
			cleanStart = 1;
			if (hidden) e.css({'display': _domElementVisibleDisplayValue(e.context.tagName), 'opacity': 0});
		} else if (!parts && val == "hide") {
			cleanStart = 0;
		}

		if (parts) {
			var end = parseFloat(parts[2]);

			// If a +=/-= token was provided, we're doing a relative animation
			if (parts[1]) end = ((parts[1] === '-=' ? -1 : 1) * end) + parseInt(cleanStart, 10);

			// check for unit  as per issue #69
			if (parts[3] == '%') end = end + '%';

			return end;
		} else {
			return cleanStart;
		}
	}

	/**
		@private
		@name _getTranslation
		@function
		@description Make a translate or translate3d string
		@param {integer} [x]
		@param {integer} [y]
		@param {boolean} [use3D] Use translate3d if available?
	*/
	function _getTranslation(x, y, use3D) {
		return ((use3D === true || ((use3DByDefault === true && use3D !== false)) && has3D)) ? 'translate3d(' + x + 'px, ' + y + 'px, 0)' : 'translate(' + x + 'px,' + y + 'px)';
	}


	/**
		@private
		@name _applyCSSTransition
		@function
		@description Build up the CSS object
		@param {object} [e] Element
		@param {string} [property] Property we're dealing with
		@param {integer} [duration] Duration
		@param {string} [easing] Easing function
		@param {variant} [value] String/integer for target value
		@param {boolean} [isTransform] Is this a CSS transformation?
		@param {boolean} [isTranslatable] Is this a CSS translation?
		@param {boolean} [use3D] Use translate3d if available?
	*/
	function _applyCSSTransition(e, property, duration, easing, value, isTransform, isTranslatable, use3D) {
		var eCSSData = e.data(DATA_KEY),
			enhanceData = eCSSData && !_isEmptyObject(eCSSData) ? eCSSData : jQuery.extend(true, {}, defaultEnhanceData),
			offsetPosition = value,
			isDirection = jQuery.inArray(property, directions) > -1;


		if (isDirection) {
			var meta = enhanceData.meta,
				cleanPropertyValue = _cleanValue(e.css(property)) || 0,
				stashedProperty = property + '_o';

			offsetPosition = value - cleanPropertyValue;


			meta[property] = offsetPosition;
			meta[stashedProperty] = e.css(property) == 'auto' ? 0 + offsetPosition : cleanPropertyValue + offsetPosition || 0;
			enhanceData.meta = meta;

			// fix 0 issue (transition by 0 = nothing)
			if (isTranslatable && offsetPosition === 0) {
				offsetPosition = 0 - meta[stashedProperty];
				meta[property] = offsetPosition;
				meta[stashedProperty] = 0;
			}
		}

		// reapply data and return
		return e.data(DATA_KEY, _applyCSSWithPrefix(e, enhanceData, property, duration, easing, offsetPosition, isTransform, isTranslatable, use3D));
	}

	/**
		@private
		@name _applyCSSWithPrefix
		@function
		@description Helper function to build up CSS properties using the various prefixes
		@param {object} [cssProperties] Current CSS object to merge with
		@param {string} [property]
		@param {integer} [duration]
		@param {string} [easing]
		@param {variant} [value]
		@param {boolean} [isTransform] Is this a CSS transformation?
		@param {boolean} [isTranslatable] Is this a CSS translation?
		@param {boolean} [use3D] Use translate3d if available?
	*/
	function _applyCSSWithPrefix(e, cssProperties, property, duration, easing, value, isTransform, isTranslatable, use3D) {
		var saveOriginal = false,
			transform = isTransform === true && isTranslatable === true;


		cssProperties = cssProperties || {};
		if (!cssProperties.original) {
			cssProperties.original = {};
			saveOriginal = true;
		}
		cssProperties.properties = cssProperties.properties || {};
		cssProperties.secondary = cssProperties.secondary || {};

		var meta = cssProperties.meta,
			original = cssProperties.original,
			properties = cssProperties.properties,
			secondary = cssProperties.secondary;

		for (var i = cssPrefixes.length - 1; i >= 0; i--) {
			var tp = cssPrefixes[i] + 'transition-property',
				td = cssPrefixes[i] + 'transition-duration',
				tf = cssPrefixes[i] + 'transition-timing-function';

			property = (transform ? cssPrefixes[i] + 'transform' : property);

			if (saveOriginal) {
				original[tp] = e.css(tp) || '';
				original[td] = e.css(td) || '';
				original[tf] = e.css(tf) || '';
			}

			secondary[property] = transform ? _getTranslation(meta.left, meta.top, use3D) : value;

			properties[tp] = (properties[tp] ? properties[tp] + ',' : '') + property;
			properties[td] = (properties[td] ? properties[td] + ',' : '') + duration + 'ms';
			properties[tf] = (properties[tf] ? properties[tf] + ',' : '') + easing;
		}

		return cssProperties;
	}

	/**
		@private
		@name _isBoxShortcut
		@function
		@description Shortcut to detect if we need to step away from slideToggle, CSS accelerated transitions (to come later with fx.step support)
		@param {object} [prop]
	*/
	function _isBoxShortcut(prop) {
		for (var property in prop) {
			if ((property == 'width' || property == 'height') && (prop[property] == 'show' || prop[property] == 'hide' || prop[property] == 'toggle')) {
				return true;
			}
		}
		return false;
	}


	/**
		@private
		@name _isEmptyObject
		@function
		@description Check if object is empty (<1.4 compatibility)
		@param {object} [obj]
	*/
	function _isEmptyObject(obj) {
		for (var i in obj) {
			return false;
		}
		return true;
	}

	/**
	 * Fetch most appropriate display value for element types
	 * @see  https://github.com/benbarnett/jQuery-Animate-Enhanced/issues/121
	 * @private
	 * @param  {[type]} tagName [description]
	 * @return {[type]}         [description]
	 */
	function _domElementVisibleDisplayValue(tagName) {
		tagName = tagName.toUpperCase();
		var displayValues = {
			'LI'       : 'list-item',
			'TR'       : 'table-row',
			'TD'       : 'table-cell',
			'TH'       : 'table-cell',
			'CAPTION'  : 'table-caption',
			'COL'      : 'table-column',
			'COLGROUP' : 'table-column-group',
			'TFOOT'      : 'table-footer-group',
			'THEAD'      : 'table-header-group',
			'TBODY'      : 'table-row-group'
		};

		return typeof displayValues[tagName] == 'string' ? displayValues[tagName] : 'block';
	}


	/**
		@private
		@name _cleanValue
		@function
		@description Remove 'px' and other artifacts
		@param {variant} [val]
	*/
	function _cleanValue(val) {
		return parseFloat(val.replace(_getUnit(val), ''));
	}


	function _isValidElement(element) {
		var allValid=true;
		element.each(function(index, el) {
			allValid = allValid && el.ownerDocument;
			return allValid;
		});
		return allValid;
	}

	/**
		@private
		@name _appropriateProperty
		@function
		@description Function to check if property should be handled by plugin
		@param {string} [prop]
		@param {variant} [value]
	*/
	function _appropriateProperty(prop, value, element) {
		if (!_isValidElement(element)) {
			return false;
		}

		var is = jQuery.inArray(prop, cssTransitionProperties) > -1;
		if ((prop == 'width' || prop == 'height' || prop == 'opacity') && (parseFloat(value) === parseFloat(element.css(prop)))) is = false;
		return is;
	}


	jQuery.extend({
		/**
			@public
			@name toggle3DByDefault
			@function
			@description Toggle for plugin settings to automatically use translate3d (where available). Usage: $.toggle3DByDefault
		*/
		toggle3DByDefault: function() {
			return use3DByDefault = !use3DByDefault;
		},
		
		
		/**
			@public
			@name toggleDisabledByDefault
			@function
			@description Toggle the plugin to be disabled by default (can be overridden per animation with avoidCSSTransitions)
		*/
		toggleDisabledByDefault: function() {
			return pluginDisabledDefault = !pluginDisabledDefault;
		},


		/**
			@public
			@name setDisabledByDefault
			@function
			@description Set or unset the 'disabled by default' value
		*/
		setDisabledByDefault: function(newValue) {
			return pluginDisabledDefault = newValue;
		}
	});


	/**
		@public
		@name translation
		@function
		@description Get current X and Y translations
	*/
	jQuery.fn.translation = function() {
		if (!this[0]) {
			return null;
		}

		var	elem = this[0],
			cStyle = window.getComputedStyle(elem, null),
			translation = {
				x: 0,
				y: 0
			};

		if (cStyle) {
			for (var i = cssPrefixes.length - 1; i >= 0; i--) {
				var transform = cStyle.getPropertyValue(cssPrefixes[i] + 'transform');
				if (transform && (/matrix/i).test(transform)) {
					var explodedMatrix = transform.replace(/^matrix\(/i, '').split(/, |\)$/g);
					translation = {
						x: parseInt(explodedMatrix[4], 10),
						y: parseInt(explodedMatrix[5], 10)
					};

					break;
				}
			}
		}

		return translation;
	};



	/**
		@public
		@name jQuery.fn.animate
		@function
		@description The enhanced jQuery.animate function
		@param {string} [property]
		@param {string} [speed]
		@param {string} [easing]
		@param {function} [callback]
	*/
	/*
	jQuery.fn.animate = function(prop, speed, easing, callback) {
		prop = prop || {};
		var isTranslatable = !(typeof prop['bottom'] !== 'undefined' || typeof prop['right'] !== 'undefined'),
			optall = jQuery.speed(speed, easing, callback),
			callbackQueue = 0,
			propertyCallback = function() {
				callbackQueue--;
				if (callbackQueue === 0) {
					// we're done, trigger the user callback
					if (typeof optall.complete === 'function') {
						optall.complete.apply(this, arguments);
					}
				}
			},
			bypassPlugin = (typeof prop['avoidCSSTransitions'] !== 'undefined') ? prop['avoidCSSTransitions'] : pluginDisabledDefault;

		if (bypassPlugin === true || !cssTransitionsSupported || _isEmptyObject(prop) || _isBoxShortcut(prop) || optall.duration <= 0 || optall.step) {
			return originalAnimateMethod.apply(this, arguments);
		}

		return this[ optall.queue === true ? 'queue' : 'each' ](function() {
			var self = jQuery(this),
				opt = jQuery.extend({}, optall),
				cssCallback = function(e) {
					var selfCSSData = self.data(DATA_KEY) || { original: {} },
						restore = {};

					if (e.eventPhase != 2)  // not at dispatching target (thanks @warappa issue #58)
						return;

					// convert translations to left & top for layout
					if (prop.leaveTransforms !== true) {
						for (var i = cssPrefixes.length - 1; i >= 0; i--) {
							restore[cssPrefixes[i] + 'transform'] = '';
						}
						if (isTranslatable && typeof selfCSSData.meta !== 'undefined') {
							for (var j = 0, dir; (dir = directions[j]); ++j) {
								restore[dir] = selfCSSData.meta[dir + '_o'] + valUnit;
								jQuery(this).css(dir, restore[dir]);
							}
						}
					}

					// remove transition timing functions
					self.
						unbind(transitionEndEvent).
						css(selfCSSData.original).
						css(restore).
						data(DATA_KEY, null);

					// if we used the fadeOut shortcut make sure elements are display:none
					if (prop.opacity === 'hide') {
						self.css({'display': 'none', 'opacity': ''});
					}

					// run the main callback function
					propertyCallback.call(this);
				},
				easings = {
					bounce: CUBIC_BEZIER_OPEN + '0.0, 0.35, .5, 1.3' + CUBIC_BEZIER_CLOSE,
					linear: 'linear',
					swing: 'ease-in-out',

					// Penner equation approximations from Matthew Lein's Ceaser: http://matthewlein.com/ceaser/
					easeInQuad:     CUBIC_BEZIER_OPEN + '0.550, 0.085, 0.680, 0.530' + CUBIC_BEZIER_CLOSE,
					easeInCubic:    CUBIC_BEZIER_OPEN + '0.550, 0.055, 0.675, 0.190' + CUBIC_BEZIER_CLOSE,
					easeInQuart:    CUBIC_BEZIER_OPEN + '0.895, 0.030, 0.685, 0.220' + CUBIC_BEZIER_CLOSE,
					easeInQuint:    CUBIC_BEZIER_OPEN + '0.755, 0.050, 0.855, 0.060' + CUBIC_BEZIER_CLOSE,
					easeInSine:     CUBIC_BEZIER_OPEN + '0.470, 0.000, 0.745, 0.715' + CUBIC_BEZIER_CLOSE,
					easeInExpo:     CUBIC_BEZIER_OPEN + '0.950, 0.050, 0.795, 0.035' + CUBIC_BEZIER_CLOSE,
					easeInCirc:     CUBIC_BEZIER_OPEN + '0.600, 0.040, 0.980, 0.335' + CUBIC_BEZIER_CLOSE,
					easeInBack:     CUBIC_BEZIER_OPEN + '0.600, -0.280, 0.735, 0.045' + CUBIC_BEZIER_CLOSE,
					easeOutQuad:    CUBIC_BEZIER_OPEN + '0.250, 0.460, 0.450, 0.940' + CUBIC_BEZIER_CLOSE,
					easeOutCubic:   CUBIC_BEZIER_OPEN + '0.215, 0.610, 0.355, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutQuart:   CUBIC_BEZIER_OPEN + '0.165, 0.840, 0.440, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutQuint:   CUBIC_BEZIER_OPEN + '0.230, 1.000, 0.320, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutSine:    CUBIC_BEZIER_OPEN + '0.390, 0.575, 0.565, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutExpo:    CUBIC_BEZIER_OPEN + '0.190, 1.000, 0.220, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutCirc:    CUBIC_BEZIER_OPEN + '0.075, 0.820, 0.165, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutBack:    CUBIC_BEZIER_OPEN + '0.175, 0.885, 0.320, 1.275' + CUBIC_BEZIER_CLOSE,
					easeInOutQuad:  CUBIC_BEZIER_OPEN + '0.455, 0.030, 0.515, 0.955' + CUBIC_BEZIER_CLOSE,
					easeInOutCubic: CUBIC_BEZIER_OPEN + '0.645, 0.045, 0.355, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutQuart: CUBIC_BEZIER_OPEN + '0.770, 0.000, 0.175, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutQuint: CUBIC_BEZIER_OPEN + '0.860, 0.000, 0.070, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutSine:  CUBIC_BEZIER_OPEN + '0.445, 0.050, 0.550, 0.950' + CUBIC_BEZIER_CLOSE,
					easeInOutExpo:  CUBIC_BEZIER_OPEN + '1.000, 0.000, 0.000, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutCirc:  CUBIC_BEZIER_OPEN + '0.785, 0.135, 0.150, 0.860' + CUBIC_BEZIER_CLOSE,
					easeInOutBack:  CUBIC_BEZIER_OPEN + '0.680, -0.550, 0.265, 1.550' + CUBIC_BEZIER_CLOSE
				},
				domProperties = {},
				cssEasing = easings[opt.easing || 'swing'] ? easings[opt.easing || 'swing'] : opt.easing || 'swing';

			// seperate out the properties for the relevant animation functions
			for (var p in prop) {
				if (jQuery.inArray(p, pluginOptions) === -1) {
					var isDirection = jQuery.inArray(p, directions) > -1,
						cleanVal = _interpretValue(self, prop[p], p, (isDirection && prop.avoidTransforms !== true));


					if (_appropriateProperty(p, cleanVal, self)) {
						_applyCSSTransition(
							self,
							p,
							opt.duration,
							cssEasing,
							cleanVal, //isDirection && prop.avoidTransforms === true ? cleanVal + valUnit : cleanVal,
							isDirection && prop.avoidTransforms !== true,
							isTranslatable,
							prop.useTranslate3d);

					}
					else {
						domProperties[p] = prop[p];
					}
				}
			}

			self.unbind(transitionEndEvent);

			var selfCSSData = self.data(DATA_KEY);


			if (selfCSSData && !_isEmptyObject(selfCSSData) && !_isEmptyObject(selfCSSData.secondary)) {
				callbackQueue++;

				self.css(selfCSSData.properties);

				// store in a var to avoid any timing issues, depending on animation duration
				var secondary = selfCSSData.secondary;

				// has to be done in a timeout to ensure transition properties are set
				setTimeout(function() {
					self.bind(transitionEndEvent, cssCallback).css(secondary);
				});
			}
			else {
				// it won't get fired otherwise
				opt.queue = false;
			}

			// fire up DOM based animations
			if (!_isEmptyObject(domProperties)) {
				callbackQueue++;
				originalAnimateMethod.apply(self, [domProperties, {
					duration: opt.duration,
					easing: jQuery.easing[opt.easing] ? opt.easing : (jQuery.easing.swing ? 'swing' : 'linear'),
					complete: propertyCallback,
					queue: opt.queue
				}]);
			}

			// strict JS compliance
			return true;
		});
	};

    jQuery.fn.animate.defaults = {};
  */

	/**
		@public
		@name jQuery.fn.stop
		@function
		@description The enhanced jQuery.stop function (resets transforms to left/top)
		@param {boolean} [clearQueue]
		@param {boolean} [gotoEnd]
		@param {boolean} [leaveTransforms] Leave transforms/translations as they are? Default: false (reset translations to calculated explicit left/top props)
	*/
	jQuery.fn.stop = function(clearQueue, gotoEnd, leaveTransforms) {
		if (!cssTransitionsSupported) return originalStopMethod.apply(this, [clearQueue, gotoEnd]);

		// clear the queue?
		if (clearQueue) this.queue([]);

		// route to appropriate stop methods
		this.each(function() {
			var self = jQuery(this),
				selfCSSData = self.data(DATA_KEY);

			// is this a CSS transition?
			if (selfCSSData && !_isEmptyObject(selfCSSData)) {
				var i, restore = {};

				if (gotoEnd) {
					// grab end state properties
					restore = selfCSSData.secondary;

					if (!leaveTransforms && typeof selfCSSData.meta['left_o'] !== undefined || typeof selfCSSData.meta['top_o'] !== undefined) {
						restore['left'] = typeof selfCSSData.meta['left_o'] !== undefined ? selfCSSData.meta['left_o'] : 'auto';
						restore['top'] = typeof selfCSSData.meta['top_o'] !== undefined ? selfCSSData.meta['top_o'] : 'auto';

						// remove the transformations
						for (i = cssPrefixes.length - 1; i >= 0; i--) {
							restore[cssPrefixes[i]+'transform'] = '';
						}
					}
				} else if (!_isEmptyObject(selfCSSData.secondary)) {
					var cStyle = window.getComputedStyle(self[0], null);
					if (cStyle) {
						// grab current properties
						for (var prop in selfCSSData.secondary) {
							if(selfCSSData.secondary.hasOwnProperty(prop)) {
								prop = prop.replace(rupper, '-$1').toLowerCase();
								restore[prop] = cStyle.getPropertyValue(prop);

								// is this a matrix property? extract left and top and apply
								if (!leaveTransforms && (/matrix/i).test(restore[prop])) {
									var explodedMatrix = restore[prop].replace(/^matrix\(/i, '').split(/, |\)$/g);

									// apply the explicit left/top props
									restore['left'] = (parseFloat(explodedMatrix[4]) + parseFloat(self.css('left')) + valUnit) || 'auto';
									restore['top'] = (parseFloat(explodedMatrix[5]) + parseFloat(self.css('top')) + valUnit) || 'auto';

									// remove the transformations
									for (i = cssPrefixes.length - 1; i >= 0; i--) {
										restore[cssPrefixes[i]+'transform'] = '';
									}
								}
							}
						}
					}
				}

				// Remove transition timing functions
				// Moving to seperate thread (re: Animation reverts when finished in Android - issue #91)
				self.unbind(transitionEndEvent);
				self.
					css(selfCSSData.original).
					css(restore).
					data(DATA_KEY, null);
			}
			else {
				// dom transition
				originalStopMethod.apply(self, [clearQueue, gotoEnd]);
			}
		});

		return this;
	};
})(jQuery, jQuery.fn.animate, jQuery.fn.stop);
/*!
Waypoints - 4.0.0
Copyright  2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
(function() {
  'use strict'

  var keyCounter = 0
  var allWaypoints = {}

  /* http://imakewebthings.com/waypoints/api/waypoint */
  function Waypoint(options) {
    if (!options) {
      throw new Error('No options passed to Waypoint constructor')
    }
    if (!options.element) {
      throw new Error('No element option passed to Waypoint constructor')
    }
    if (!options.handler) {
      throw new Error('No handler option passed to Waypoint constructor')
    }

    this.key = 'waypoint-' + keyCounter
    this.options = Waypoint.Adapter.extend({}, Waypoint.defaults, options)
    this.element = this.options.element
    this.adapter = new Waypoint.Adapter(this.element)
    this.callback = options.handler
    this.axis = this.options.horizontal ? 'horizontal' : 'vertical'
    this.enabled = this.options.enabled
    this.triggerPoint = null
    this.group = Waypoint.Group.findOrCreate({
      name: this.options.group,
      axis: this.axis
    })
    this.context = Waypoint.Context.findOrCreateByElement(this.options.context)

    if (Waypoint.offsetAliases[this.options.offset]) {
      this.options.offset = Waypoint.offsetAliases[this.options.offset]
    }
    this.group.add(this)
    this.context.add(this)
    allWaypoints[this.key] = this
    keyCounter += 1
  }

  /* Private */
  Waypoint.prototype.queueTrigger = function(direction) {
    this.group.queueTrigger(this, direction)
  }

  /* Private */
  Waypoint.prototype.trigger = function(args) {
    if (!this.enabled) {
      return
    }
    if (this.callback) {
      this.callback.apply(this, args)
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/destroy */
  Waypoint.prototype.destroy = function() {
    this.context.remove(this)
    this.group.remove(this)
    delete allWaypoints[this.key]
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/disable */
  Waypoint.prototype.disable = function() {
    this.enabled = false
    return this
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/enable */
  Waypoint.prototype.enable = function() {
    this.context.refresh()
    this.enabled = true
    return this
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/next */
  Waypoint.prototype.next = function() {
    return this.group.next(this)
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/previous */
  Waypoint.prototype.previous = function() {
    return this.group.previous(this)
  }

  /* Private */
  Waypoint.invokeAll = function(method) {
    var allWaypointsArray = []
    for (var waypointKey in allWaypoints) {
      allWaypointsArray.push(allWaypoints[waypointKey])
    }
    for (var i = 0, end = allWaypointsArray.length; i < end; i++) {
      allWaypointsArray[i][method]()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/destroy-all */
  Waypoint.destroyAll = function() {
    Waypoint.invokeAll('destroy')
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/disable-all */
  Waypoint.disableAll = function() {
    Waypoint.invokeAll('disable')
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/enable-all */
  Waypoint.enableAll = function() {
    Waypoint.invokeAll('enable')
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/refresh-all */
  Waypoint.refreshAll = function() {
    Waypoint.Context.refreshAll()
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/viewport-height */
  Waypoint.viewportHeight = function() {
    return window.innerHeight || document.documentElement.clientHeight
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/viewport-width */
  Waypoint.viewportWidth = function() {
    return document.documentElement.clientWidth
  }

  Waypoint.adapters = []

  Waypoint.defaults = {
    context: window,
    continuous: true,
    enabled: true,
    group: 'default',
    horizontal: false,
    offset: 0
  }

  Waypoint.offsetAliases = {
    'bottom-in-view': function() {
      return this.context.innerHeight() - this.adapter.outerHeight()
    },
    'right-in-view': function() {
      return this.context.innerWidth() - this.adapter.outerWidth()
    }
  }

  window.Waypoint = Waypoint
}())
;(function() {
  'use strict'

  function requestAnimationFrameShim(callback) {
    window.setTimeout(callback, 1000 / 60)
  }

  var keyCounter = 0
  var contexts = {}
  var Waypoint = window.Waypoint
  var oldWindowLoad = window.onload

  /* http://imakewebthings.com/waypoints/api/context */
  function Context(element) {
    this.element = element
    this.Adapter = Waypoint.Adapter
    this.adapter = new this.Adapter(element)
    this.key = 'waypoint-context-' + keyCounter
    this.didScroll = false
    this.didResize = false
    this.oldScroll = {
      x: this.adapter.scrollLeft(),
      y: this.adapter.scrollTop()
    }
    this.waypoints = {
      vertical: {},
      horizontal: {}
    }

    element.waypointContextKey = this.key
    contexts[element.waypointContextKey] = this
    keyCounter += 1

    this.createThrottledScrollHandler()
    this.createThrottledResizeHandler()
  }

  /* Private */
  Context.prototype.add = function(waypoint) {
    var axis = waypoint.options.horizontal ? 'horizontal' : 'vertical'
    this.waypoints[axis][waypoint.key] = waypoint
    this.refresh()
  }

  /* Private */
  Context.prototype.checkEmpty = function() {
    var horizontalEmpty = this.Adapter.isEmptyObject(this.waypoints.horizontal)
    var verticalEmpty = this.Adapter.isEmptyObject(this.waypoints.vertical)
    if (horizontalEmpty && verticalEmpty) {
      this.adapter.off('.waypoints')
      delete contexts[this.key]
    }
  }

  /* Private */
  Context.prototype.createThrottledResizeHandler = function() {
    var self = this

    function resizeHandler() {
      self.handleResize()
      self.didResize = false
    }

    this.adapter.on('resize.waypoints', function() {
      if (!self.didResize) {
        self.didResize = true
        Waypoint.requestAnimationFrame(resizeHandler)
      }
    })
  }

  /* Private */
  Context.prototype.createThrottledScrollHandler = function() {
    var self = this
    function scrollHandler() {
      self.handleScroll()
      self.didScroll = false
    }

    this.adapter.on('scroll.waypoints', function() {
      if (!self.didScroll || Waypoint.isTouch) {
        self.didScroll = true
        Waypoint.requestAnimationFrame(scrollHandler)
      }
    })
  }

  /* Private */
  Context.prototype.handleResize = function() {
    Waypoint.Context.refreshAll()
  }

  /* Private */
  Context.prototype.handleScroll = function() {
    var triggeredGroups = {}
    var axes = {
      horizontal: {
        newScroll: this.adapter.scrollLeft(),
        oldScroll: this.oldScroll.x,
        forward: 'right',
        backward: 'left'
      },
      vertical: {
        newScroll: this.adapter.scrollTop(),
        oldScroll: this.oldScroll.y,
        forward: 'down',
        backward: 'up'
      }
    }

    for (var axisKey in axes) {
      var axis = axes[axisKey]
      var isForward = axis.newScroll > axis.oldScroll
      var direction = isForward ? axis.forward : axis.backward

      for (var waypointKey in this.waypoints[axisKey]) {
        var waypoint = this.waypoints[axisKey][waypointKey]
        var wasBeforeTriggerPoint = axis.oldScroll < waypoint.triggerPoint
        var nowAfterTriggerPoint = axis.newScroll >= waypoint.triggerPoint
        var crossedForward = wasBeforeTriggerPoint && nowAfterTriggerPoint
        var crossedBackward = !wasBeforeTriggerPoint && !nowAfterTriggerPoint
        if (crossedForward || crossedBackward) {
          waypoint.queueTrigger(direction)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
      }
    }

    for (var groupKey in triggeredGroups) {
      triggeredGroups[groupKey].flushTriggers()
    }

    this.oldScroll = {
      x: axes.horizontal.newScroll,
      y: axes.vertical.newScroll
    }
  }

  /* Private */
  Context.prototype.innerHeight = function() {
    /*eslint-disable eqeqeq */
    if (this.element == this.element.window) {
      return Waypoint.viewportHeight()
    }
    /*eslint-enable eqeqeq */
    return this.adapter.innerHeight()
  }

  /* Private */
  Context.prototype.remove = function(waypoint) {
    delete this.waypoints[waypoint.axis][waypoint.key]
    this.checkEmpty()
  }

  /* Private */
  Context.prototype.innerWidth = function() {
    /*eslint-disable eqeqeq */
    if (this.element == this.element.window) {
      return Waypoint.viewportWidth()
    }
    /*eslint-enable eqeqeq */
    return this.adapter.innerWidth()
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-destroy */
  Context.prototype.destroy = function() {
    var allWaypoints = []
    for (var axis in this.waypoints) {
      for (var waypointKey in this.waypoints[axis]) {
        allWaypoints.push(this.waypoints[axis][waypointKey])
      }
    }
    for (var i = 0, end = allWaypoints.length; i < end; i++) {
      allWaypoints[i].destroy()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-refresh */
  Context.prototype.refresh = function() {
    /*eslint-disable eqeqeq */
    var isWindow = this.element == this.element.window
    /*eslint-enable eqeqeq */
    var contextOffset = isWindow ? undefined : this.adapter.offset()
    var triggeredGroups = {}
    var axes

    this.handleScroll()
    axes = {
      horizontal: {
        contextOffset: isWindow ? 0 : contextOffset.left,
        contextScroll: isWindow ? 0 : this.oldScroll.x,
        contextDimension: this.innerWidth(),
        oldScroll: this.oldScroll.x,
        forward: 'right',
        backward: 'left',
        offsetProp: 'left'
      },
      vertical: {
        contextOffset: isWindow ? 0 : contextOffset.top,
        contextScroll: isWindow ? 0 : this.oldScroll.y,
        contextDimension: this.innerHeight(),
        oldScroll: this.oldScroll.y,
        forward: 'down',
        backward: 'up',
        offsetProp: 'top'
      }
    }

    for (var axisKey in axes) {
      var axis = axes[axisKey]
      for (var waypointKey in this.waypoints[axisKey]) {
        var waypoint = this.waypoints[axisKey][waypointKey]
        var adjustment = waypoint.options.offset
        var oldTriggerPoint = waypoint.triggerPoint
        var elementOffset = 0
        var freshWaypoint = oldTriggerPoint == null
        var contextModifier, wasBeforeScroll, nowAfterScroll
        var triggeredBackward, triggeredForward

        if (waypoint.element !== waypoint.element.window) {
          elementOffset = waypoint.adapter.offset()[axis.offsetProp]
        }

        if (typeof adjustment === 'function') {
          adjustment = adjustment.apply(waypoint)
        }
        else if (typeof adjustment === 'string') {
          adjustment = parseFloat(adjustment)
          if (waypoint.options.offset.indexOf('%') > - 1) {
            adjustment = Math.ceil(axis.contextDimension * adjustment / 100)
          }
        }

        contextModifier = axis.contextScroll - axis.contextOffset
        waypoint.triggerPoint = elementOffset + contextModifier - adjustment
        wasBeforeScroll = oldTriggerPoint < axis.oldScroll
        nowAfterScroll = waypoint.triggerPoint >= axis.oldScroll
        triggeredBackward = wasBeforeScroll && nowAfterScroll
        triggeredForward = !wasBeforeScroll && !nowAfterScroll

        if (!freshWaypoint && triggeredBackward) {
          waypoint.queueTrigger(axis.backward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
        else if (!freshWaypoint && triggeredForward) {
          waypoint.queueTrigger(axis.forward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
        else if (freshWaypoint && axis.oldScroll >= waypoint.triggerPoint) {
          waypoint.queueTrigger(axis.forward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
      }
    }

    Waypoint.requestAnimationFrame(function() {
      for (var groupKey in triggeredGroups) {
        triggeredGroups[groupKey].flushTriggers()
      }
    })

    return this
  }

  /* Private */
  Context.findOrCreateByElement = function(element) {
    return Context.findByElement(element) || new Context(element)
  }

  /* Private */
  Context.refreshAll = function() {
    for (var contextId in contexts) {
      contexts[contextId].refresh()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-find-by-element */
  Context.findByElement = function(element) {
    return contexts[element.waypointContextKey]
  }

  window.onload = function() {
    if (oldWindowLoad) {
      oldWindowLoad()
    }
    Context.refreshAll()
  }

  Waypoint.requestAnimationFrame = function(callback) {
    var requestFn = window.requestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      requestAnimationFrameShim
    requestFn.call(window, callback)
  }
  Waypoint.Context = Context
}())
;(function() {
  'use strict'

  function byTriggerPoint(a, b) {
    return a.triggerPoint - b.triggerPoint
  }

  function byReverseTriggerPoint(a, b) {
    return b.triggerPoint - a.triggerPoint
  }

  var groups = {
    vertical: {},
    horizontal: {}
  }
  var Waypoint = window.Waypoint

  /* http://imakewebthings.com/waypoints/api/group */
  function Group(options) {
    this.name = options.name
    this.axis = options.axis
    this.id = this.name + '-' + this.axis
    this.waypoints = []
    this.clearTriggerQueues()
    groups[this.axis][this.name] = this
  }

  /* Private */
  Group.prototype.add = function(waypoint) {
    this.waypoints.push(waypoint)
  }

  /* Private */
  Group.prototype.clearTriggerQueues = function() {
    this.triggerQueues = {
      up: [],
      down: [],
      left: [],
      right: []
    }
  }

  /* Private */
  Group.prototype.flushTriggers = function() {
    for (var direction in this.triggerQueues) {
      var waypoints = this.triggerQueues[direction]
      var reverse = direction === 'up' || direction === 'left'
      waypoints.sort(reverse ? byReverseTriggerPoint : byTriggerPoint)
      for (var i = 0, end = waypoints.length; i < end; i += 1) {
        var waypoint = waypoints[i]
        if (waypoint.options.continuous || i === waypoints.length - 1) {
          waypoint.trigger([direction])
        }
      }
    }
    this.clearTriggerQueues()
  }

  /* Private */
  Group.prototype.next = function(waypoint) {
    this.waypoints.sort(byTriggerPoint)
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    var isLast = index === this.waypoints.length - 1
    return isLast ? null : this.waypoints[index + 1]
  }

  /* Private */
  Group.prototype.previous = function(waypoint) {
    this.waypoints.sort(byTriggerPoint)
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    return index ? this.waypoints[index - 1] : null
  }

  /* Private */
  Group.prototype.queueTrigger = function(waypoint, direction) {
    this.triggerQueues[direction].push(waypoint)
  }

  /* Private */
  Group.prototype.remove = function(waypoint) {
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    if (index > -1) {
      this.waypoints.splice(index, 1)
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/first */
  Group.prototype.first = function() {
    return this.waypoints[0]
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/last */
  Group.prototype.last = function() {
    return this.waypoints[this.waypoints.length - 1]
  }

  /* Private */
  Group.findOrCreate = function(options) {
    return groups[options.axis][options.name] || new Group(options)
  }

  Waypoint.Group = Group
}())
;(function() {
  'use strict'

  var $ = window.jQuery
  var Waypoint = window.Waypoint

  function JQueryAdapter(element) {
    this.$element = $(element)
  }

  $.each([
    'innerHeight',
    'innerWidth',
    'off',
    'offset',
    'on',
    'outerHeight',
    'outerWidth',
    'scrollLeft',
    'scrollTop'
  ], function(i, method) {
    JQueryAdapter.prototype[method] = function() {
      var args = Array.prototype.slice.call(arguments)
      return this.$element[method].apply(this.$element, args)
    }
  })

  $.each([
    'extend',
    'inArray',
    'isEmptyObject'
  ], function(i, method) {
    JQueryAdapter[method] = $[method]
  })

  Waypoint.adapters.push({
    name: 'jquery',
    Adapter: JQueryAdapter
  })
  Waypoint.Adapter = JQueryAdapter
}())
;(function() {
  'use strict'

  var Waypoint = window.Waypoint

  function createExtension(framework) {
    return function() {
      var waypoints = []
      var overrides = arguments[0]

      if (framework.isFunction(arguments[0])) {
        overrides = framework.extend({}, arguments[1])
        overrides.handler = arguments[0]
      }

      this.each(function() {
        var options = framework.extend({}, overrides, {
          element: this
        })
        if (typeof options.context === 'string') {
          options.context = framework(this).closest(options.context)[0]
        }
        waypoints.push(new Waypoint(options))
      })

      return waypoints
    }
  }

  if (window.jQuery) {
    window.jQuery.fn.waypoint = createExtension(window.jQuery)
  }
  if (window.Zepto) {
    window.Zepto.fn.waypoint = createExtension(window.Zepto)
  }
}())
;
/*!
Waypoints Inview Shortcut - 4.0.0
Copyright  2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
!function(){"use strict";function t(){}function e(t){this.options=i.Adapter.extend({},e.defaults,t),this.axis=this.options.horizontal?"horizontal":"vertical",this.waypoints=[],this.element=this.options.element,this.createWaypoints()}var i=window.Waypoint;e.prototype.createWaypoints=function(){for(var t={vertical:[{down:"enter",up:"exited",offset:"100%"},{down:"entered",up:"exit",offset:"bottom-in-view"},{down:"exit",up:"entered",offset:0},{down:"exited",up:"enter",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:"enter",left:"exited",offset:"100%"},{right:"entered",left:"exit",offset:"right-in-view"},{right:"exit",left:"entered",offset:0},{right:"exited",left:"enter",offset:function(){return-this.adapter.outerWidth()}}]},e=0,i=t[this.axis].length;i>e;e++){var n=t[this.axis][e];this.createWaypoint(n)}},e.prototype.createWaypoint=function(t){var e=this;this.waypoints.push(new i({context:this.options.context,element:this.options.element,enabled:this.options.enabled,handler:function(t){return function(i){e.options[t[i]].call(e,i)}}(t),offset:t.offset,horizontal:this.options.horizontal}))},e.prototype.destroy=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].destroy();this.waypoints=[]},e.prototype.disable=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].disable()},e.prototype.enable=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].enable()},e.defaults={context:window,enabled:!0,enter:t,entered:t,exit:t,exited:t},i.Inview=e}();
/*!
 * jQuery outside events - v1.1 - 3/16/2010
 * http://benalman.com/projects/jquery-outside-events-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery outside events
//
// *Version: 1.1, Last updated: 3/16/2010*
//
// Project Home - http://benalman.com/projects/jquery-outside-events-plugin/
// GitHub       - http://github.com/cowboy/jquery-outside-events/
// Source       - http://github.com/cowboy/jquery-outside-events/raw/master/jquery.ba-outside-events.js
// (Minified)   - http://github.com/cowboy/jquery-outside-events/raw/master/jquery.ba-outside-events.min.js (0.9kb)
//
// About: License
//
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
//
// About: Examples
//
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
//
// clickoutside - http://benalman.com/code/projects/jquery-outside-events/examples/clickoutside/
// dblclickoutside - http://benalman.com/code/projects/jquery-outside-events/examples/dblclickoutside/
// mouseoveroutside - http://benalman.com/code/projects/jquery-outside-events/examples/mouseoveroutside/
// focusoutside - http://benalman.com/code/projects/jquery-outside-events/examples/focusoutside/
//
// About: Support and Testing
//
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
//
// jQuery Versions - 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.6, Safari 3-4, Chrome, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-outside-events/unit/
//
// About: Release History
//
// 1.1 - (3/16/2010) Made "clickoutside" plugin more general, resulting in a
//       whole new plugin with more than a dozen default "outside" events and
//       a method that can be used to add new ones.
// 1.0 - (2/27/2010) Initial release
//
// Topic: Default "outside" events
//
// Note that each "outside" event is powered by an "originating" event. Only
// when the originating event is triggered on an element outside the element
// to which that outside event is bound will the bound event be triggered.
//
// Because each outside event is powered by a separate originating event,
// stopping propagation of that originating event will prevent its related
// outside event from triggering.
//
//  OUTSIDE EVENT     - ORIGINATING EVENT
//  clickoutside      - click
//  dblclickoutside   - dblclick
//  focusoutside      - focusin
//  bluroutside       - focusout
//  mousemoveoutside  - mousemove
//  mousedownoutside  - mousedown
//  mouseupoutside    - mouseup
//  mouseoveroutside  - mouseover
//  mouseoutoutside   - mouseout
//  keydownoutside    - keydown
//  keypressoutside   - keypress
//  keyupoutside      - keyup
//  changeoutside     - change
//  selectoutside     - select
//  submitoutside     - submit
//  touchstartoutside - touchstart
//  touchendoutside   - touchend

(function($,doc,outside){
  '$:nomunge'; // Used by YUI compressor.

  $.map(
    // All these events will get an "outside" event counterpart by default.
    'click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup touchstart touchend'.split(' '),
    function( event_name ) { jq_addOutsideEvent( event_name ); }
  );

  // The focus and blur events are really focusin and focusout when it comes
  // to delegation, so they are a special case.
  jq_addOutsideEvent( 'focusin',  'focus' + outside );
  jq_addOutsideEvent( 'focusout', 'blur' + outside );

  // Method: jQuery.addOutsideEvent
  //
  // Register a new "outside" event to be with this method. Adding an outside
  // event that already exists will probably blow things up, so check the
  // <Default "outside" events> list before trying to add a new one.
  //
  // Usage:
  //
  // > jQuery.addOutsideEvent( event_name [, outside_event_name ] );
  //
  // Arguments:
  //
  //  event_name - (String) The name of the originating event that the new
  //    "outside" event will be powered by. This event can be a native or
  //    custom event, as long as it bubbles up the DOM tree.
  //  outside_event_name - (String) An optional name for the new "outside"
  //    event. If omitted, the outside event will be named whatever the
  //    value of `event_name` is plus the "outside" suffix.
  //
  // Returns:
  //
  //  Nothing.

  $.addOutsideEvent = jq_addOutsideEvent;

  function jq_addOutsideEvent( event_name, outside_event_name ) {

    // The "outside" event name.
    outside_event_name = outside_event_name || event_name + outside;

    // A jQuery object containing all elements to which the "outside" event is
    // bound.
    var elems = $(),

      // The "originating" event, namespaced for easy unbinding.
      event_namespaced = event_name + '.' + outside_event_name + '-special-event';

    // Event: outside events
    //
    // An "outside" event is triggered on an element when its corresponding
    // "originating" event is triggered on an element outside the element in
    // question. See the <Default "outside" events> list for more information.
    //
    // Usage:
    //
    // > jQuery('selector').bind( 'clickoutside', function(event) {
    // >   var clicked_elem = $(event.target);
    // >   ...
    // > });
    //
    // > jQuery('selector').bind( 'dblclickoutside', function(event) {
    // >   var double_clicked_elem = $(event.target);
    // >   ...
    // > });
    //
    // > jQuery('selector').bind( 'mouseoveroutside', function(event) {
    // >   var moused_over_elem = $(event.target);
    // >   ...
    // > });
    //
    // > jQuery('selector').bind( 'focusoutside', function(event) {
    // >   var focused_elem = $(event.target);
    // >   ...
    // > });
    //
    // You get the idea, right?

    $.event.special[ outside_event_name ] = {

      // Called only when the first "outside" event callback is bound per
      // element.
      setup: function(){

        // Add this element to the list of elements to which this "outside"
        // event is bound.
        elems = elems.add( this );

        // If this is the first element getting the event bound, bind a handler
        // to document to catch all corresponding "originating" events.
        if ( elems.length === 1 ) {
          $(doc).bind( event_namespaced, handle_event );
        }
      },

      // Called only when the last "outside" event callback is unbound per
      // element.
      teardown: function(){

        // Remove this element from the list of elements to which this
        // "outside" event is bound.
        elems = elems.not( this );

        // If this is the last element removed, remove the "originating" event
        // handler on document that powers this "outside" event.
        if ( elems.length === 0 ) {
          $(doc).unbind( event_namespaced );
        }
      },

      // Called every time a "outside" event callback is bound to an element.
      add: function( handleObj ) {
        var old_handler = handleObj.handler;

        // This function is executed every time the event is triggered. This is
        // used to override the default event.target reference with one that is
        // more useful.
        handleObj.handler = function( event, elem ) {

          // Set the event object's .target property to the element that the
          // user interacted with, not the element that the "outside" event was
          // was triggered on.
          event.target = elem;

          // Execute the actual bound handler.
          old_handler.apply( this, arguments );
        };
      }
    };

    // When the "originating" event is triggered..
    function handle_event( event ) {

      // Iterate over all elements to which this "outside" event is bound.
      $(elems).each(function(){
        var elem = $(this);

        // If this element isn't the element on which the event was triggered,
        // and this element doesn't contain said element, then said element is
        // considered to be outside, and the "outside" event will be triggered!
        if ( this !== event.target && !elem.has(event.target).length ) {

          // Use triggerHandler instead of trigger so that the "outside" event
          // doesn't bubble. Pass in the "originating" event's .target so that
          // the "outside" event.target can be overridden with something more
          // meaningful.
          elem.triggerHandler( outside_event_name, [ event.target ] );
        }
      });
    };

  };

})(jQuery,document,"outside");

/*!
 * samsung.com - Phase2 - Javascript Namespace Defined
 * src : js/src/smg/aem/namespace.js
 *
 * @version 1.0.0
 * @since 2016.02.01
 */
;(function(win) {
	'use strict';

	if('undefined' === typeof win.smg) {
		/**
		 * samsung.com namespace
		 * @name  window.smg
		 * @namespace
		 */
		win.smg = {};
	}

	/**
	 * Phase2 AEM Namespace
	 * @name  window.smg.aem
	 * @namespace
	 */
	win.smg.aem = win.smg.aem || {};

	/**
	 * Phase2 AEM Static Values Defined
	 */
	win.smg.aem.varStatic = win.smg.aem.varStatic || {};

	/**
	 * Phase2 AEM Custom Events Defined
	 */
	win.smg.aem.customEvent = win.smg.aem.customEvent || {};

	/**
	 * Phase2 AEM Utility Script Defined
	 */
	win.smg.aem.util = win.smg.aem.util || {};

	/**
	 * Phase2 AEM Common Script Defined
	 */
	win.smg.aem.common = win.smg.aem.common || {};

	/**
	 * Phase2 AEM Components Namespace
	 * @name  window.smg.aem.components
	 * @namespace
	 */
	win.smg.aem.components = win.smg.aem.components || {};

	/**
	 * Phase2 Home Components Namespace
	 * @name  window.smg.aem.components.home
	 * @namespace
	 */
	win.smg.aem.components.home = win.smg.aem.components.home || {};

	/**
	 * Phase2 AboutSamsung Components Namespace
	 * @name  window.smg.aem.components.aboutsamsung
	 * @namespace
	 */
	win.smg.aem.components.aboutsamsung = win.smg.aem.components.aboutsamsung || {};

	/**
	 * Phase2 AEM Templates Namespace
	 * @name  window.smg.aem.templates
	 * @namespace
	 */
	win.smg.aem.templates = win.smg.aem.templates || {};

	/**
	 * Phase2 Home Templates Namespace
	 * @name  window.smg.aem.templates.home
	 * @namespace
	 */
	win.smg.aem.templates.home = win.smg.aem.templates.home || {};
})(window);
/*!
 * samsung.com - Phase2 - Utility Script Defined
 * src : js/src/smg/aem/static/smg.aem.util.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
    'use strict';

    if('undefined' === typeof win.smg) {
        win.smg = {};
    }

    if('undefined' === typeof win.smg.aem) {
        win.smg.aem = {};
    }

    if('undefined' === typeof win.smg.aem.util) {
        win.smg.aem.util = {};
    }

    var hasOwnProperty = Object.prototype.hasOwnProperty,
        doc = win.document;

    // window safari check
    (function(){
        var anNetscape = (navigator.appName == "Netscape"),
            avMac = (navigator.appVersion.indexOf("Mac") != -1),
            uaSafari = (navigator.userAgent.indexOf("Safari") != -1),
            uaChrome = (navigator.userAgent.indexOf("Chrome") != -1);
        win.isPcSafari = ( anNetscape && !avMac && uaSafari && !uaChrome ) ? true : false;
    })();

    /**
     * @name window.smg.aem.util
     * @namespace
     * @requires jQuery
     * @requires namespace.js
     */
    win.smg.aem.util = (function() {
        return {
            isArray : function(arr) {
                return 'array' === $.type(arr);
            },
            def : function(org, src) {
                for (var prop in src) {
                    if (!hasOwnProperty.call(src, prop)) continue;
                    if ('object' === $.type(org[prop])) {
                        org[prop] = (this.isArray(org[prop]) ? src[prop].slice(0) : this.def(org[prop], src[prop]));
                    } else {
                        org[prop] = src[prop];
                    }
                }
                return org;
            },
            winSize : function() {
                var win_wh = {
                    w : (!win.isPcSafari) ? win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth : $(win).width(),
                    h : (!win.isPcSafari) ? win.innerHeight || doc.documentElement.clientHeight || doc.body.clientHeight : $(win).height()
                };
                return win_wh;
            },
            getQueryStr : function(href) {
                href = href || win.location.href;

                var vars = {};
                href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                    vars[key] = value;
                });
                return vars;
            },
            winOpener : function(args) {
                var defParams =   {
                    url 		: 'http://www.samsung.com',
                    name 		: 'smg_opener_' + new Date().getTime(),
                    width 		: 400,
                    height 		: 400,
                    left 		: null,
                    top 		: null,
                    scrollbars	: 'no',
                    toolbar 	: 'no',
                    location 	: 'no',
                    directories : 'no',
                    status 		: 'no',
                    menubar 	: 'no',
                    resizable 	: 'no'
                }, opener, setting, options;

                options 		= win.smg.util.def(defParams, (args || {}));
                options.left 	= options.left || ( screen.width / 2 - options.width / 2 );
                options.top 	= options.top || ( screen.height / 2 - options.height / 2 );
                setting = '';

                for( var prop in options ) {
                    if( prop != 'url' && prop != 'name' ) {
                        setting += ',' + prop + '=' + options[ prop ];
                    }
                }
                setting = setting.substr( 1, setting.length );
                opener = window.open( options.url, options.name, setting );
                return opener;
            },
            imgLoader : function(img, callback) {
                img.each(function() {
                    var cb = (callback || function() {});
					/*for IE 10-*/
                    if (this.complete || $(this).height() > 0) {
                        cb.apply(img);
                    } else {
                        $(this).load(function() {
                            cb.apply(img);
                        });
                    }
                });
            },
            vwOrientationUpdate : function(css) {
                $(win).on('orientationchange', function() {
                    var vwElem = $(css || '.js-vw');
                    if (!vwElem.size()) {
                        return;
                    }
                    vwElem.css('display', 'none').height();
                    vwElem.css('display', '');
                });
            },
            iPadVWRender : function() {
                if (navigator.userAgent.match(/iPad/i)) {
                    this.vwOrientationUpdate('.js-vw');
                }
            },
            Cookie : function() {
                var defParams = {
                    expires : '', path: '/', domain : '', secure : ''
                };

                return {
                    setCookie : function(cname, cvalue, exdays) {
                        var d = new Date();
                        d.setTime(d.getTime() + ((exdays || 0) * 24 * 60 * 60 * 1000));

                        var opt = win.smg.aem.util.def(defParams, { expires : d });
                        document.cookie = [
                            cname, '=', cvalue,
                            opt.expires ? '; expires=' + opt.expires.toUTCString() : '',
                            opt.path    ? '; path=' + opt.path : '',
                            opt.domain  ? '; domain=' + opt.domain : '',
                            opt.secure  ? '; secure' : ''
                        ].join('');
                    },
                    getCookie : function(cname) {
                        var name = cname + '=',
                            ca = document.cookie.split(';'),
                            c;

                        for(var i=0, leng=ca.length; i<leng; i++) {
                            c = ca[i];
                            while (c.charAt(0)==' ') {
                                c = c.substring(1);
                            }
                            if (c.indexOf(name) != -1) {
                                return c.substring(name.length,c.length);
                            }
                        }
                        return '';
                    }
                };
            },
            loadCSS : function(urls, cb, nocache) {
                if (!urls || 'string' === $.type(urls)) urls = [urls];

                var head = $('head'), dfds = [];
                $.map(urls, function(url) {
                    var _dfd = $.Deferred();
                    dfds.push(_dfd);
                    $('<link>').attr({
                        'rel' : 'stylesheet', type : 'text/css',
                        href : url + (!!nocache ? '?_ts=' + new Date().getTime() : '')
                    }).appendTo(head).load(function() {
                        _dfd.resolve();
                    });
                });

                $.when.apply($, dfds).done(function() {
                    if ($.isFunction(cb)) cb();
                });
            },
            getServerTime : function(callBack, serverUrl) {
                serverUrl = serverUrl || window.location.href.toString();
                callBack = callBack || function() {};

                $.ajax({
                    url : serverUrl,
                    async : false,
                    cashe : false
                })
                    .done(function(res, status, xhr) {
                        callBack(new Date(xhr.getResponseHeader('Date')));
                    });
            },
            getRestrictBytes : function(str, maxBytes) {
                var strLeng = str.length,
                    rByte = 0,
                    rLen = 0,
                    strChar = '';

                maxBytes = maxBytes || 100;

                for (var i=0; i<strLeng; i++) {
                    strChar = str.charAt(i);
                    if (escape(strChar).length > 4) {
                        rByte += 2;
                    } else {
                        rByte++;
                    }

                    if(rByte <= maxBytes) {
                        rLen = i+1;
                    }
                }

                return {
                    bytes : rByte,
                    rectLeng : rLen
                }
            },
            isAemEditMode : function() {
                var flag = false;
                if (win.parent && win.frameElement && $(win.parent.document).find('.foundation-authoring-ui-mode').size()) {
                    flag = true;
                }
                return flag;
            }
        };
    })();

    win.smg.aem.util.cookie = new win.smg.aem.util.Cookie();

    $(function() {
        win.smg.aem.util.iPadVWRender();
    });
})(window, window.jQuery);
/*!
 * samsung.com - Phase2 - Static Values Defined
 * src : js/src/smg/aem/static/smg.aem.static.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.varStatic) {
		win.smg.aem.varStatic = {};
	}

	/**
	 * @name window.smg.aem.varStatic
	 * @namespace
	 * @requires namespace.js
	 */
	win.smg.aem.varStatic = {
		CSS : {
			VIDEO_OPEN : 'video-open',

			SEARCH_POS : 'search-pos',
			NAV_OPEN : 'nav-open',
			NAV_CLOSE : 'nav-close',

			HAS_ANIMATED : 'has-animated',

			IS_SHOW : 'is-show',
			IS_HIDE : 'is-hide',
			IS_OPEN : 'is-open',
			IS_SELECT : 'is-select',

			JS_IMG_SRC : 'js-img-src',
			JS_IMG_LAZY : 'js-img-lazy',
			JS_IMG_LAZY_LOADED : 'js-img-lazy-loaded',

			LAZY_LOADED : 'lazy-loaded',

			SWITCH_MOBILE : 'switch-mobile',
			SWITCH_TABLET : 'switch-tablet'
		},
		DATA_ATTR : {
			SRC_PC : 'data-src-pc',
			SRC_MOBILE : 'data-src-mobile',
			DATA_SRC : 'data-src'
		},
		SUPPORT : {
			NO_SVG : 'no-svg',
			NO_CSS3 : 'no-css3',
			IE_LT_8 : 'lt-ie8',
			COOKIE_WARNING : 'cookie-warning',
			TOUCH_DEVICE : 'touch-device'
		},
		RESPONSIVE : {
			DESKTOP : {
				NAME : 'desktop'
			},
			TABLET : {
				NAME : 'tablet',
				WIDTH : 1280
			},
			MOBILE : {
				NAME : 'mobile',
				WIDTH : 768
			},
			MIN_MOBILE : {
				NAME : 'min_mobile',
				WIDTH : 320
			},
			GNB : {
				NAME : 'gnb_reponsive',
				WIDTH : 1024
			}
		},
		BACKTOTOP : {
			TOP_POSITION : 'top_position'
		}
	};

})(window);

/*!
 * samsung.com - Phase2 - Custom Events Defined
 * src : js/src/smg/aem/event/smg.aem.event.js
 *
 * @version 1.0.0
 * @since 2016.10.10
 */
;(function(win) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.customEvent) {
		win.smg.aem.customEvent = {};
	}

	/**
	 * @name window.smg.aem.customEvent
	 * @namespace
	 * @requires namespace.js
	 */
	win.smg.aem.customEvent = {
		CONNECT : {},
		VIDEO : {
			PLAY : 'AEM_VIDEO_PLAY',
			CLOSE : 'AEM_VIDEO_CLOSE'
		},
		RESPONSIVE : {
			GET_STATUS : 'AEM_RESPONSIVE_GET_STATUS',
			CHANGE : 'AEM_RESPONSIVE_CHANGE'
		},
		BACKTOTOP : {
			POSITION_CHANGE : 'AEM_POSITION_CHANGE'
		}
	};

})(window);

/*!
 * samsung.com - Phase2 - Common Script Defined
 * src : js/src/smg/aem/common/smg.aem.common.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.common) {
		win.smg.aem.common = {};
	}

	// Static Values
	var V_STATIC = win.smg.aem.varStatic,
	// Utility Script
	UTIL = win.smg.aem.util,
	// Custom Events
	CST_EVENT = win.smg.aem.customEvent;

	/**
	 * @name window.smg.aem.common
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 * @requires window.smg.aem.static.js
	 * @requires window.smg.aem.util.js
	 * @requires window.smg.aem.event.js
	 */
	win.smg.aem.common = (function() {
		return {
			init : function() {
				this.detection();

				this.responsiveName = '';
				this.responsiveNameEx = '';
				this.responsiveGNB = '';
				this.responsiveGNBEx = '';


				$('body').on(CST_EVENT.RESPONSIVE.GET_STATUS, $.proxy(this.resizeListener, this));
				$(win).on('resize', $.proxy(this.resizeListener, this));
				this.resizeListener();

				this.skipNavgation =  $(".s-skip-content").children();
				this.skipNavgation.on('click', $.proxy(this.skipNavgationFunc, this));

				return this;
			},
			detection : function() {
				// SVG Support Check
				if (!document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image', '1.1')) {
					$('body').addClass(V_STATIC.SUPPORT.NO_SVG);
				}

				// IE lt 8 Check
				if (document.all && !document.addEventListener) {
					$('body').addClass(V_STATIC.SUPPORT.IE_LT_8);
				}

				// CSS3 Support Check
				var thisBody = document.body || document.documentElement,
				thisStyle = thisBody.style,
				css3support = thisStyle.transition !== undefined || thisStyle.WebkitTransition !== undefined || thisStyle.MozTransition !== undefined || thisStyle.MsTransition !== undefined || thisStyle.OTransition !== undefined;
				if (!css3support) {
					$('body').addClass(V_STATIC.SUPPORT.NO_CSS3);
				}

				// Touch Support Check
				var supportsTouch = (('ontouchstart' in window) || (navigator.MaxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0));
				if (supportsTouch) {
					$('body').addClass(V_STATIC.SUPPORT.TOUCH_DEVICE);
				}
			},
			resizeListener : function(e) {
				var winWidth = UTIL.winSize().w;

				if (winWidth <= V_STATIC.RESPONSIVE.MOBILE.WIDTH) {
					this.responsiveName = V_STATIC.RESPONSIVE.MOBILE.NAME;
				} else if (winWidth <= V_STATIC.RESPONSIVE.TABLET.WIDTH) {
					this.responsiveName = V_STATIC.RESPONSIVE.TABLET.NAME;
				} else {
					this.responsiveName = V_STATIC.RESPONSIVE.DESKTOP.NAME;
				}

				if (winWidth <= V_STATIC.RESPONSIVE.GNB.WIDTH) {
					this.responsiveGNB = V_STATIC.RESPONSIVE.GNB.NAME;
				} else {
					this.responsiveGNB = '';
				}

				if (this.responsiveName !== this.responsiveNameEx || this.responsiveGNB !== this.responsiveGNBEx) {
					this.responsiveNameEx = this.responsiveName;
					this.responsiveGNBEx = this.responsiveGNB;
					$('body').trigger(CST_EVENT.RESPONSIVE.CHANGE, { RESPONSIVE_NAME : this.responsiveName, RESPONSIVE_GNB_NAME : this.responsiveGNB, isMobile : winWidth <= V_STATIC.RESPONSIVE.MOBILE.WIDTH });
				}

				if (e && e.type === CST_EVENT.RESPONSIVE.GET_STATUS) {
					$('body').trigger(CST_EVENT.RESPONSIVE.CHANGE, { RESPONSIVE_NAME : this.responsiveName, RESPONSIVE_GNB_NAME : this.responsiveGNB, isMobile : winWidth <= V_STATIC.RESPONSIVE.MOBILE.WIDTH });
				}
			},
			skipNavgationFunc : function(e) {
				if (!$('body').hasClass(V_STATIC.SUPPORT.TOUCH_DEVICE)) {
					e.preventDefault();
				}
				var targetObjectSelector = $(e.currentTarget).attr("href");
				if (targetObjectSelector == '#accHelp') {
					$(targetObjectSelector).focus();
				} else {
					$(targetObjectSelector).attr('tabindex', -1).focus().removeAttr('tabindex','');
				}
			}
		};
	})();

	var common;
	$(function() {
		common = win.smg.aem.common.init();
	});

	// confrict samsung.min.js - resize
	$(win).on('resize', function(e) {
		if (!common || !common.resizeListener) return;
		common.resizeListener.call(common, e);
	});
})(window, window.jQuery);

// contents height matching
;(function (win, $) {
	'use strict';

	// Static Values
	var V_STATIC = win.smg.aem.varStatic,
	// Utility Script
	UTIL = win.smg.aem.util,
	// Custom Events
	CST_EVENT = win.smg.aem.customEvent;

	if( typeof $.fn.heightMatch === 'function') $.fn.heightMatch = function() {};
	win._heightMatch = function (container, options) {
		var defParams = {
			compType : 'list',
			listWrap : '',
			isListMatch : true,
			targetElements : [],
			matchAlignIgnore : '',
			matchAlign : 0,
			matchAttr : 'height',
			forceMobile: false
		};
		this.container = container;
		this.opts = UTIL.def(defParams, (options || {}));

		this.init();
	};
	win._heightMatch.prototype = {
		init : function () {
			this.setElements();
			this.bindEvents();
			this.maxHeightBuildChk();
		},
		setElements : function () {
			this.$body = $('body');
			this.IS_MOBILE_MODE = false;
			this.obj = this.getTargetElement();
			this.isColumns = this.obj.hasClass('cm-columns__item');
			this.columnLineClass = 'is-active-line';
			this.opts.matchAlign = (this.opts.matchAlign > 0) ? this.opts.matchAlign : this.obj.length;
			this.maxLine = Math.ceil(this.obj.length / this.opts.matchAlign);
			this.setTime = 500;
		},
		getTargetElement : function () {
			if(this.container.hasClass(this.opts.targetElements.substring(1))) {
				return this.container;
			} else {
				return this.container.find(this.opts.targetElements);
			}
		},
		bindEvents : function () {
			this.$body.on(CST_EVENT.RESPONSIVE.CHANGE, $.proxy(this.onResponsiveChange, this));
			this.$body.trigger(CST_EVENT.RESPONSIVE.GET_STATUS);
			$(win).on('resize orientationchange', $.proxy(this.resizeFunc, this));
		},
		resizeFunc : function () {
			this.maxHeightBuildChk();
		},
		maxHeightBuildChk : function () {
			if(this.IS_MOBILE_MODE){
				this.maxHeightBuild(false);
			}else{
				this.maxHeightBuild(true);
			}
		},
		maxHeightBuild : function (type) {
			var setTime = this.setTime;
			if(this.opts.compType == 'carousel' && !this.IS_MOBILE_MODE) {
				setTime = 800;
			}
			if(this.isColumns) {
				setTime += 1000;
			}

			if (this.opts.forceMobile) {
				type = true;
			}

			if(type){
				setTimeout($.proxy(function() {
					var heightArray = [];
					for (var i = 0; i < this.maxLine; i++) {
						heightArray[i] = [];
					}
					for (var i = 0, max = this.obj.length; i < max; i++) {
						this.obj.eq(i).outerHeight('');
						var _arrayIndex = parseInt((i / this.opts.matchAlign), 10),
						_height   = this.obj.eq(i).outerHeight();
						heightArray[_arrayIndex].push(_height);
					}
					for (var i = 0; i < this.maxLine; i++) {
						heightArray[i] = Math.max.apply(null, heightArray[i]);
					}
					for (var i = 0, max = this.obj.length; i < max; i++) {
						var _arrayIndex = parseInt((i / this.opts.matchAlign), 10);
						var current   = this.obj.eq(i);
						if(heightArray[_arrayIndex] > 0) {
							current.css(this.opts.matchAttr, heightArray[_arrayIndex]);
						}
					}
					this.obj.closest('.cm-columns--separation-line').addClass(this.columnLineClass);
					if(this.opts.compType == 'carousel') {
						if(this.container.closest('.s-slick').hasClass('slick-initialized')) this.container.closest('.s-slick').slick('setPosition');
					}
				}, this), setTime);
			} else {
				for (var i = 0, max = this.obj.length; i < max; i++) {
					this.obj.eq(i).outerHeight('');
				}
				setTimeout($.proxy(function() {
					if(this.IS_MOBILE_MODE) {
						if(this.container.closest('.s-slick').hasClass('slick-initialized')) this.container.closest('.s-slick').slick('setPosition');
					}
				}, this), setTime);
			}
		},
		onResponsiveChange : function(e, data) {
			if (data.RESPONSIVE_NAME === V_STATIC.RESPONSIVE.MOBILE.NAME) {
				this.IS_MOBILE_MODE = true;
			} else {
				this.IS_MOBILE_MODE = false;
			}
		}
	};

	$.fn.heightMatch = function (options) {

		if(!options.matchElements || !$(this).length) return;

		var cardWrap    = $(this),
			child       = cardWrap.find(options.listWrap);

		if(!options.listWrap) child = cardWrap;

		if(options.compType == 'list' && child.length <= 1) return;

		if(options.compType == 'carousel') options.isListMatch = false;

		if(options.forceMobile) {
			this.IS_MOBILE_MODE = true;
		}

		if(options.isListMatch) options.matchElements.push(options.listWrap);

		if(options.matchAlignIgnore) {
			if(cardWrap.children(options.matchAlignIgnore).length) {
				options.matchAlign = 0;
			}
		}
		for(var prop in options.matchElements) {
			options.targetElements = options.matchElements[prop];
			new win._heightMatch(child, options);
		}
	};
})(window, window.jQuery);

;(function (win, $) {
	'use strict';

	// Static Values
	var V_STATIC = win.smg.aem.varStatic,
	// Utility Script
	UTIL = win.smg.aem.util,
	// Custom Events
	CST_EVENT = win.smg.aem.customEvent;

	if( typeof $.fn.listSeeMore === 'function') $.fn.listSeeMore = function() {};
	$.fn.listSeeMore = function (options) {
		var defParams = {
			useSeeMore : 's-use-seemore',
			component : '',
			listItems : '',
			moreBtn : '.s-btn-encased',
			appendType : false,
			itemVisible : '',
			itemActive : 'is-item-active',
			itemInterval : 100,
			perPageDefault : {
				pc : 'data-default-pc-conut',
				mo : 'data-default-mo-conut'
			},
			perPageNum : {
				pc : 'data-pc-per-page',
				mo : 'data-mo-per-page'
			},
			heightMatch : {
				hasComponent : [],
				matchElements : [],
				matchAlign : 3
			},
			masonry : {
				hasComponent : [],
				itemWrap : '',
				items : '',
				options : {
					ltr : {
						itemSelector: null,
						percentPosition: true,
						horizontalOrder: true
					},
					rtl : {
						itemSelector: null,
						horizontalOrder: true,
						originLeft: false
					}
				}
			},
			scrollView : true,
			scrollViewIgnore : [],
			moreIntervalView : true,
			moreIntervalViewIgnore : [],
			beforeFunc : null,
			afterFunc : null,
			seemoreAfterFunc : null,
			apiCall : ''
		};
		var opts = UTIL.def(defParams, (options || {}));
		var $components = $(opts.component);
		var $body = $('body');
		var isMobile = null;

		var setBindEvents = function() {
			$body.on(CST_EVENT.RESPONSIVE.CHANGE, onResponsiveChange);
			$body.trigger(CST_EVENT.RESPONSIVE.GET_STATUS);
			$components.on('click', opts.moreBtn, onViewMore);
		}
		var setMasonry = (function() {

			var $html = $('html');

			var eventList = {

				masonry : function( el ){
					var options = {
						itemSelector: eventList.items
					};
					var opt = {};
					if ( $html.hasClass('rtl') ) {

						opt = UTIL.def(opts.masonry.options.rtl, (options || {}));
						el.addClass('js-masonry-load').masonry({
							itemSelector: eventList.items,
							horizontalOrder: true,
							originLeft: false
						});

					} else {

						opt = UTIL.def(opts.masonry.options.ltr, (options || {}));
						el.addClass('js-masonry-load').masonry({
							itemSelector: eventList.items,
							percentPosition: true,
							horizontalOrder: true
						});

					}
					el.addClass('js-masonry-load').masonry(opt);

		
				},

				loadCheck: function( el, container, cb ){

					var loadCount = 0;
					var elLength = el.length;

					for (var i = 0; i < elLength; i++){

						var img = new Image();
						
						img.src = el.eq(i).attr('src');

						img.onload = function(){

							loadCount += 1;
							
							if ( loadCount == elLength ) cb(container);
							
						}

					};

				},

				actMasonry: function( container, $items ){

					var itemsImage = $items.find('img');

					if(!container.length) return;

					eventList.loadCheck(itemsImage, container, eventList.masonry);

				}

			};

			var init = function(mComponent, itemWrap, items){

				var $components = mComponent;
				var $componentList = $components.find(itemWrap);
				var $items = $components.find(items);

				if ( UTIL.isAemEditMode() ) return;
				if (!$components.length) return;
				if (!$items.length) return;
				if (typeof $.fn.masonry != 'function') return;
				
				eventList.items = items;
				eventList.actMasonry( $componentList, $items );

			};

			return {

				init: init
				
			}
		})();
		var onResponsiveChange = function(e, data) {
			if (data.RESPONSIVE_NAME === V_STATIC.RESPONSIVE.MOBILE.NAME) {
				isMobile = true;
			} else {
				isMobile = false;
			}
		}

		var onViewMore = function(e) {
			e.preventDefault();
			var $current = $(e.currentTarget),
				$component = $current.closest(opts.component);
			var isPromoFeed = true,
				isViewMore = true;

			if($component.length) {
				if(opts.apiCall) {
					opts.apiCall.promise().done(function() {
						setTimeout(function() {
							setViewMoreCTA.init({
								component : $component, 
								isViewMore : isViewMore,
								isPromoFeed : isPromoFeed
							});
						}, 500);
					});
				} else {
					setViewMoreCTA.init({
						component : $component, 
						isViewMore : isViewMore,
						isPromoFeed : isPromoFeed
					});
				}
			}
		}

		var setViewMoreCTA = {
			getIsInterval : function($component) {

				var isInterval = opts.moreIntervalView;
				
				if(opts.moreIntervalViewIgnore.length > 1) {
					for(var a = 0; a < opts.moreIntervalViewIgnore.length; a++) {
						if(opts.moreIntervalViewIgnore[a]) {
							if($component.hasClass(opts.moreIntervalViewIgnore[a])) {
								isInterval = false;
							}
						}
					}
				} else {
					if(opts.moreIntervalViewIgnore[0]) {
						if($component.hasClass(opts.moreIntervalViewIgnore[0])) {
							isInterval = false;
						}
					}
				}
				return isInterval;
			},
			getViewCnt : function($component, isViewMore) {
				var viewCnt = 0;
				if(isViewMore) {
					if(isMobile) {
						if($component.attr(opts.perPageNum.mo)) {
							if($component.attr(opts.perPageNum.mo) == 'all') {
								viewCnt = $component.find(opts.listItems + ':not(:visible)').length;
							} else {
								viewCnt = parseInt($component.attr(opts.perPageNum.mo));
							}
						} else {
							viewCnt = 0;
						}
					} else {
						if($component.attr(opts.perPageNum.pc)) {
							if($component.attr(opts.perPageNum.pc) == 'all') {
								viewCnt = $component.find(opts.listItems + ':not(:visible)').length;
							} else {
								viewCnt = parseInt($component.attr(opts.perPageNum.pc));
							}
						} else {
							viewCnt = 0;
						}
					}
				} else {
					if(isMobile) {
						if($component.attr(opts.perPageDefault.mo)) {
							viewCnt = parseInt($component.attr(opts.perPageDefault.mo));
						} else {
							if($component.attr(opts.perPageNum.mo)) {
								viewCnt = parseInt($component.attr(opts.perPageNum.mo));
							} else {
								viewCnt = 0;
							}
						}
					} else {
						if($component.attr(opts.perPageDefault.pc)) {
							viewCnt = parseInt($component.attr(opts.perPageDefault.pc));
						} else {
							if($component.attr(opts.perPageNum.pc)) {
								viewCnt = parseInt($component.attr(opts.perPageNum.pc));
							} else {
								viewCnt = 0;
							}
						}
					}
				}
				return viewCnt;
			},
			setItemActive : function($component, cnt) {
				$component.find(opts.listItems + ':lt(' + (cnt) + ')').addClass(opts.itemActive);
			},
			hideMoreCTA : function($component, $cta) {
				if(opts.appendType) {

				} else {
					if(!$component.find(opts.listItems + ':not(:visible)').length && $cta.length && $cta.is(':visible')) {
						$cta.css('display', 'none');
					}
				}
			},
			getIsMathchHeight : function($component) {
				var hComponent = '';
				if(opts.heightMatch.hasComponent && opts.heightMatch.matchElements) {
					for(var i = 0; i < opts.heightMatch.hasComponent.length; i++) {
						if(opts.heightMatch.hasComponent[i]) {
							if($component.hasClass(opts.heightMatch.hasComponent[i])) {
								hComponent = true;
							}
						}
					}
				}
				return hComponent;
			},
			getIsMasonry : function($component) {
				var mComponent = '';
				if(opts.masonry.hasComponent && opts.masonry.itemWrap && opts.masonry.items) {
					for(var a = 0; a < opts.masonry.hasComponent.length; a++) {
						if(opts.masonry.hasComponent[a]) {
							if($component.hasClass(opts.masonry.hasComponent[a])) {
								mComponent = true;
							}
						}
					}
				}
				return mComponent;
			},
			init : function(info) {
				var $cta = info.component.find(opts.moreBtn),
					$items = info.component.find(opts.listItems),
					$viewList;
				var viewCnt = this.getViewCnt(info.component, info.isViewMore),
					isInterval = this.getIsInterval(info.component),
					mComponent = this.getIsMasonry(info.component),
					hComponent = this.getIsMathchHeight(info.component);



				if(!UTIL.isAemEditMode()) {

					var cnt = viewCnt,
						visibleLength = info.component.find(opts.listItems + ':visible').length;

					if(info.component.hasClass(opts.useSeeMore) && info.isViewMore) {
						cnt = visibleLength + viewCnt;
					}

					this.setItemActive(info.component, cnt);
					this.hideMoreCTA(info.component, $cta);

					if(opts.beforeFunc != null) opts.beforeFunc(info.component, isMobile);

					if(isInterval) {

						setTimeout(function() {

							if(hComponent) columnMatch(info, (cnt - viewCnt - 1));

							setTimeout(function() {
								var k = visibleLength;
								var interval = setInterval(function() {
									if(k == cnt) {
										clearInterval(interval);
										if(mComponent) {
											setTimeout(function() {
												if(opts.afterFunc != null) opts.afterFunc(info.component, isMobile);
												setMasonry.init(info.component, opts.masonry.itemWrap, opts.masonry.items);
											}, 100);
										} else {
											if(opts.afterFunc != null) opts.afterFunc(info.component, isMobile);
										}
										$(win).trigger('resize');
									} else {
										$items.eq(k).addClass(opts.itemVisible);
										k++;
									}
								}, opts.itemInterval);
							}, 400);

						}, 100);

					} else {
						
						if(mComponent || hComponent) {
							for(var k = visibleLength; k <= cnt; k++) {
								if(k == cnt) {
									setTimeout(function() {
										if(mComponent) {
											setMasonry.init(info.component, opts.masonry.itemWrap, opts.masonry.items);
										}
										if(hComponent) {
											columnMatch(info, (cnt - viewCnt - 1));
										}
										if(opts.afterFunc != null) opts.afterFunc(info.component, isMobile);
										$(win).trigger('resize');
									}, 100);
								} else {
									$items.eq(k).addClass(opts.itemVisible);
								}
							}
						} else {
							$items.addClass(opts.itemVisible);
							if(opts.afterFunc != null) opts.afterFunc(info.component, isMobile);
							$(win).trigger('resize');
						}
					}
					if(info.isViewMore && opts.seemoreAfterFunc != null) opts.seemoreAfterFunc(info.component, isMobile);
				}
			}
		}

		var columnMatch = function(info, cnt){
			var cnt = parseInt(cnt) || 0;
			var listWrap = opts.listItems;


			if(info.component.hasClass('cm-columns--separation-line')) {
				if(info.component.hasClass('cm-columns--2columns')) {
					opts.heightMatch.matchAlign = 2;
				} else if(info.component.hasClass('cm-columns--3columns')) {
					opts.heightMatch.matchAlign = 3;
				} else if(info.component.hasClass('cm-columns--4columns')) {
					opts.heightMatch.matchAlign = 4;
				} else if(info.component.hasClass('cm-columns--5columns')) {
					opts.heightMatch.matchAlign = 5;
				}
			}

			if(info.isViewMore) {
				listWrap = opts.listItems + ':gt(' + cnt + ')';
			}

			info.component.heightMatch({
				listWrap      : listWrap,
				matchAlignIgnore  : '.slick-initialized',
				matchElements     : opts.heightMatch.matchElements,
				matchAlign : opts.heightMatch.matchAlign
			});
		}

		var initDA = function($component, isScroll) {
			if(isScroll && (typeof $.fn.feature == 'function') && $component.hasClass(opts.useSeeMore)) {
				$component.feature({
					onVisible : function($target) {
						if(!$target.hasClass('js-feature-loaded')) {
							var isPromoFeed = true;
							var isViewMore = false;
							$target.addClass('js-feature-loaded');
							setViewMoreCTA.init({
								component : $target, 
								isViewMore : isViewMore,
								isPromoFeed : isPromoFeed
							});
						}
					}
				});
			} else {
				if(!$component.hasClass('js-feature-loaded')) {
					var isPromoFeed = true;
					var isViewMore = false;
					$component.addClass('js-feature-loaded');
					setViewMoreCTA.init({
						component : $component, 
						isViewMore : isViewMore,
						isPromoFeed : isPromoFeed
					});
				}
			}
		}

		var getIsScroll = function($component) {

			var isScroll = opts.scrollView;
			
			if(opts.scrollViewIgnore.length > 1) {
				for(var a = 0; a < opts.scrollViewIgnore.length; a++) {
					if(opts.scrollViewIgnore[a]) {
						if($component.hasClass(opts.scrollViewIgnore[a])) {
							isScroll = false;
						}
					}
				}
			} else {
				if(opts.scrollViewIgnore[0]) {
					if($component.hasClass(opts.scrollViewIgnore[0])) {
						isScroll = false;
					}
				}
			}
			return isScroll;
		}


		var init = function() {

			var $component;
			var isScroll = opts.scrollView;

			setBindEvents();
			if(opts.scrollView) {
				for(var i = 0; i < $components.length; i++) {
					$component = $components.eq(i);
					isScroll = getIsScroll($component);
					initDA($component, isScroll);
				}
			} else {
				for(var i = 0; i < $components.length; i++) {
					$component = $components.eq(i);
					initDA($component, false);
				}
			}
		}
		init();
	}

	if( typeof $.changeScene7domain === 'function') $.changeScene7domain = function() {};
	$.changeScene7domain = (function () {
		return {
			isLive : function() {
				var $runModeInfo = $('#gnbRunmodeInfo');
				var valInfo = ($runModeInfo.length) ? $runModeInfo.val() : 'dev';
				if(valInfo == 'live' || valInfo == 'qa') {
					return true;
				} else {
					return false;
				}
			},
			getScene7domain : function() {
				var $scene7domain = $('#scene7domain');
				var scDomain = ($scene7domain.length) ? $scene7domain.val() : '';
				return scDomain;
			},
			replaceAll : function(markup, org, dest) {
				return markup.split(org).join(dest);
			},
			getChangeLiveLinkPath : function(link) {
				var url = link;
				var linkPath = '/content/samsung';
				if (url && (url.indexOf(linkPath) > -1)) {
					url = url.replace(linkPath, '');
				}
				return url;
			},
			getCurrentMode : function() {
				var crunObj = {
					crunmode : '',
					crunmode2 : ''
				}
				var $crunmode = $("#currentRunmode");
				var $crunmode2 = $("#currentRunmode2");
				crunObj.crunmode = ($crunmode.length) ? $crunmode.val() : '';
				crunObj.crunmode2 = ($crunmode2.length) ? $crunmode2.val() : '';
				return crunObj;
			},
			getChangeLiveImagePath : function(imagePath) {
				var imgPath = imagePath;
				var crunObj = this.getCurrentMode();
				var damPath = '/content/dam/samsung';
				var scene7domain = '';
				var replacePath = '';
				var scDomain = '';
				var isLive = false;
				if(imgPath && (imgPath.indexOf(damPath) > -1)) {
					if(crunObj.crunmode && crunObj.crunmode2) { // page-article-list, page-offer-list template
						if(crunObj.crunmode == 'qa') {
							scDomain = '//stg-images.samsung.com';
						} else if(crunObj.crunmode == 'live') {
							scDomain = '//images.samsung.com';
						}
						if(scDomain) {
							if(crunObj.crunmode2 === 'stg') {
								replacePath = scDomain + '/is/image/samsungstg/p5';
							} else if(crunObj.crunmode2 === 'prod') {
								replacePath = scDomain + '/is/image/samsung/p5';
							} else {
								replacePath = scDomain + '/is/image/samsungdev/p5';
							}
							imgPath = this.replaceAll(imgPath, damPath, replacePath);
						}
					} else {
						scene7domain = this.getScene7domain();
						isLive = this.isLive();
						if(isLive && scene7domain) {
							replacePath = scene7domain.replace('http:', '') + 'p5';
							imgPath = this.replaceAll(imgPath, damPath, replacePath);
						}
					}
				}
				return imgPath;
			},
			getChangeLiveContentPath : function(contentPath) {
				var conPath = contentPath;
				var crunObj = this.getCurrentMode();
				var damPath = '/content/dam/samsung';
				var scene7domain = '';
				var replacePath = '';
				var scDomain = '';
				var isLive = false;
				if(conPath && (conPath.indexOf(damPath) > -1)) {
					if(crunObj.crunmode && crunObj.crunmode2) { // page-article-list, page-offer-list template
						if(crunObj.crunmode == 'qa') {
							scDomain = '//stg-images.samsung.com';
						} else if(crunObj.crunmode == 'live') {
							scDomain = '//images.samsung.com';
						}
						if(scDomain) {
							if(crunObj.crunmode2 === 'stg') {
								replacePath = scDomain + '/is/content/samsungstg/p5';
							} else if(crunObj.crunmode2 === 'prod') {
								replacePath = scDomain + '/is/content/samsung/p5';
							} else {
								replacePath = scDomain + '/is/content/samsungdev/p5';
							}
							conPath = this.replaceAll(conPath, damPath, replacePath);
						}
					} else {
						scene7domain = this.getScene7domain();
						isLive = this.isLive();
						if(isLive && scene7domain) {
							replacePath = scene7domain.replace('/is/image', '/is/content').replace('http:', '') + 'p5';
							conPath = this.replaceAll(conPath, damPath, replacePath);
						}
					}
				}
				return conPath;
			}
		}
	})();

	if( typeof $.getI18nDiction === 'function') $.getI18nDiction = function() {};
	$.getI18nDiction = function (key, text) {

		if ('undefined' === typeof Granite) {
			return text;
		}
		if ('undefined' === typeof Granite.I18n) {
			return text;
		}

		Granite.I18n.setLocale($('#siteCode').val());
		return Granite.I18n.get(key, [], $('#siteCode').val()) || text;

	}
	
	if( typeof $.requestTagAPI === 'function') $.requestTagAPI = function() {};
	$.requestTagAPI = function(info) {

		if(typeof info === 'object') {

			info.successFunc || function(){},
			info.errorFunc || function(){};
			var apiCall = $.ajax({
				url : '/us/api/tag/data',
				type: 'GET',
				data : info.jsonDatas,
				success : function(rep) {
					if(rep.resultCode == 200) {
						info.successFunc(rep, apiCall);
					} else {
						info.errorFunc();
					}
				},
				error : function() {
					info.errorFunc();
				}
			});
		}
	}

	if( typeof $.CDPCommonFunc === 'function') $.CDPCommonFunc = function() {};
	$.CDPCommonFunc = (function() {

		return {
			init : function(selector) {
				this.selector = selector;
				this.defaultVal = {
					selector : {
						templateWraps : '.st-hub-article, .st-hub-list',
						articleTemplate : '.st-hub-article',
						articleLink : '.js-article-link',
						eyebrowLink : '.js-eyebrow-link',
						moreLinkWrap : '.js-more-link-wrap',
						scene7domain : '#scene7domain',
						runModeInfo : '#gnbRunmodeInfo',
						siteCd : '#siteCode',
						textMotion : 
							'[class$=__eyebrow],' +
							'[class$=__headline],' +
							'[class$=__sub-headline],' +
							'[class$=__description],' +
							'[class$=__disclaimer],' +
							'[class$=__number],' +
							'[class$=__hashtag_wrap],' +
							'[class*=__eyebrow ],' +
							'[class*=__headline ],' +
							'[class*=__sub-headline ],' +
							'[class*=__description ],' +
							'[class*=__disclaimer ],' +
							'[class*=__number ],' +
							'[class*=__hashtag_wrap ]'
					},
					class : {
						compVisible : 's-visible',
						compMotion : 's-motion',
						textMotion : 's-text-move'
					},
					attr : {
						pagePath : 'data-page-path',
						tags : 'data-page-tags',
						tagOption : 'data-page-option',
						tagSort : 'data-page-sort',
						pageTrack : 'data-page-track',
						useAPI : 'data-use-api',
						useSearchTag : 'data-use-tag',
						useHashTag : 'data-hashtag-show'
					},
					datas : {
						resultData : null,
						products : null,
						contentPerPage : 9999,
						pageNum : 1,
						apiNum : 0
					}
				};
				this.templateCodes = {
					tagID : '[[CDP-tag-id]]',
					linkUrl : '[[CDP-link]]',
					linkOmniType : '[[CDP-omni-type]]',
					linkTitle : '[[CDP-link-title]]',
					gaCa : '[[CDP-ga-ca]]',
					imgOmni : '[[CDP-img-omni]]',
					imgGaLa : '[[CDP-img-ga-la]]',
					eyebrowOmni : '[[CDP-eyebrow-omni]]',
					eyebrowGaLa : '[[CDP-eyebrow-ga-la]]',
					eyebrowLink : '[[CDP-eyebrow-link]]',
					eyebrowLinkTitle : '[[CDP-eyebrow-link-title]]',
					eyebrowText : '[[CDP-eyebrow-text]]',
					headlineOmni : '[[CDP-headline-omni]]',
					headlineGaLa : '[[CDP-headline-ga-la]]',
					headlineText : '[[CDP-headline-text]]',
					subHeadlineOmni : '[[CDP-sub-headline-omni]]',
					subHeadlineGaLa : '[[CDP-sub-headline-ga-la]]',
					subHeadlineText : '[[CDP-sub-headline-text]]',
					hastagOmni : '[[CDP-hashtag-omni]]',
					hastagGaLa : '[[CDP-hashtag-ga-la]]',
					hashtagLink : '[[CDP-hashtag-link]]',
					hashtagText : '[[CDP-hashtag-text]]',
					moreOmni : '[[CDP-more-omni]]',
					moreText : '[[CDP-more-text]]',
				};
				this.scene7domain = $(this.defaultVal.selector.scene7domain).val();
				this.isLive = ($(this.defaultVal.selector.runModeInfo).val() == 'live' || $(this.defaultVal.selector.runModeInfo).val() == 'qa') ? true : false;
				this.siteCd = $(this.defaultVal.selector.siteCd).val();
				this.isAemEditMode = UTIL.isAemEditMode();
				this.isTemplates = ($(this.defaultVal.selector.templateWraps).length) ? true : false;
				this.pageInfoJSON = (this.isLive) ? win.location.href + 'jcr:content.json' : win.location.href.replace('/editor.html', '').split('.html')[0] + '/jcr:content.json';
				this.tagArr = [];
			},
			setDefaultValue : function(args) {
				this.defaultVal = UTIL.def(this.defaultVal, (args || {}));
			},
			setTemplateCodes : function(args) {
				this.templateCodes = UTIL.def(this.templateCodes, (args || {}));
			},
			getPageInfo : function(callback) {
				return $.ajax({
					url : this.pageInfoJSON,
					type: 'GET',
					success : function(rep) {
						callback(rep);
					},
					error : function() {
					}
				});
			},
			getTags : function($wrap, info, callback) {
				var tagArr = [];
				if($wrap.attr(this.defaultVal.attr.useSearchTag) == 'true') {
					$.ajax({
						url : this.pageInfoJSON,
						type: 'GET',
						success : $.proxy(function(rep) {
							if(rep) {
								var tags = rep['cq:tags'];
								var i = 0;
								if(tags && tags.length) {
									for(; i < tags.length; i++) {
										tagArr[i] = tags[i].replace(tags[i].split('/')[0], '').substring(1);
									}
								}
							}
							callback($wrap, info, tagArr);
						}, this),
						error : function() {
							callback($wrap, info, tagArr);
						}
					});
				} else {
					callback($wrap, info, tagArr);
				}
			},
			requestCDPAPI : function($wrap, info) {

				if(typeof info === 'object') {

					this.getTags($wrap, info, $.proxy(function($wrap, info, tagArr) {

						var $list = $wrap.find(this.selector.list);
						info.successFunc = info.successFunc || function(){};
						info.errorFunc = info.errorFunc || function(){};
						info.prop = info.prop || 0;
	
						if(tagArr.length) {
							info.jsonDatas.tag = tagArr;
							info.jsonDatas.tagOption = 'or';
						}
						
						var apiCall = $.ajax({
								url : '/us/api/tag/data',
								type: 'GET',
								data : info.jsonDatas,
								success : function(rep) {
									if(rep.resultCode == 200) {
										info.successFunc(rep, apiCall, $wrap, $list, info.prop);
									} else {
										info.errorFunc($list);
									}
								},
								error : function() {
									info.errorFunc($list);
								}
							});
					}, this));
				}
			},
			replaceAll : function(markup, org, dest) {
				return markup.split(org).join(dest);
			},
			getUrl : function(url) {
				var linkUrl = '';
				if(url) {
					if(this.isLive) {
						linkUrl = $.changeScene7domain.getChangeLiveLinkPath(url);
					} else {
						linkUrl = url + '.html?wcmmode=disabled';
					}
				}
				return linkUrl;
			},
			getEyebrowData : function(eyebrow) {
				var data = {title : '', url : '', tagID : ''};
				var eyebrowIndex = 0;
				if(eyebrow && eyebrow.length > 0) {
					if(this.isTemplates && eyebrow.length > 1) {
						eyebrowIndex = 1;
					}
					data.title = eyebrow[eyebrowIndex].title;
					data.url = eyebrow[eyebrowIndex].url;
					data.tagID = eyebrow[eyebrowIndex].tagID;
					if(!data.title) {
						if(eyebrowIndex == 1) {
							eyebrowIndex = 0;
						} else {
							if(eyebrow.length > 1) {
								eyebrowIndex = 1;
							} else {
								eyebrowIndex = 0;
							}
						}
						data.title = eyebrow[eyebrowIndex].title;
						data.url = eyebrow[eyebrowIndex].url;
						data.tagID = eyebrow[eyebrowIndex].tagID;
					}
				}
				return data;
			},
			setReinitInteraction : function($wrap) {
				var that = this;
				var $textMotionTarget = $wrap.find(that.defaultVal.selector.textMotion);
				$wrap.promise().done(function() {
					if(!that.isAemEditMode) {
						$wrap.feature({
							on : function($target) {
								$target.addClass(that.defaultVal.class.compMotion);
							},
							onVisible : function($target) {
								$target.addClass(that.defaultVal.class.compVisible);
							},
							off : function($target) {
								$target.removeClass(that.defaultVal.class.compMotion);
							},
							offVisible : function($target) {
								$target.removeClass(that.defaultVal.class.compVisible);
							}
						});
						$textMotionTarget.each(function(){
							$(this).feature({
								onVisible : function($target) {
									$target.addClass(that.defaultVal.class.textMotion);
								},
								offVisible : function($target) {
									$target.removeClass(that.defaultVal.class.textMotion);
								}
							});
						});
					} else {
						$wrap.each(function(){
							$(this).addClass(that.defaultVal.class.compMotion + ' ' + that.defaultVal.class.compVisible);
						});
						$textMotionTarget.each(function(){
							$(this).addClass(that.defaultVal.class.textMotion);
						});
					}
				});
			},
			noDataRemoveNode : function($selector, data) {
				if(!data) $selector.remove();
			},
			getHashTagUrl : function(tagID) {
				var tagIDArr = tagID.split('/');
				var linkUrl = null;
				if(tagID.indexOf('/event/categories/') > -1) {
					linkUrl = tagID.replace('samsung:', '/content/samsung/').replace('/' + tagIDArr[3], '').replace(tagIDArr[1], 'explore').replace(tagIDArr[2], 'tag');
					linkUrl = linkUrl + '.' + tagIDArr[1] + '&' + tagIDArr[2] + '&' + tagIDArr[3];
				} else if(tagID.indexOf('/event/products/') > -1) {
					linkUrl = tagID.replace('samsung:', '/content/samsung/').replace('/' + tagIDArr[3], '').replace('/' + tagIDArr[4], '').replace(tagIDArr[1], 'explore').replace(tagIDArr[2], 'tag');
					linkUrl = linkUrl + '.' + tagIDArr[1] + '&' + tagIDArr[2] + '&' + tagIDArr[3] + '&' + tagIDArr[4];
				} else if(tagID.indexOf('/primary/') > -1) {
					if(tagIDArr.length == 5) {
						linkUrl = tagID.replace('samsung:', '/content/samsung/').replace('/' + tagIDArr[3], '').replace('/' + tagIDArr[4], '').replace(tagIDArr[2], 'tag');
						linkUrl = linkUrl + '.' + tagIDArr[1] + '&' + tagIDArr[2] + '&' + tagIDArr[3] + '&' + tagIDArr[4];
					} else {
						linkUrl = tagID.replace('samsung:', '/content/samsung/').replace('/' + tagIDArr[3], '').replace(tagIDArr[2], 'tag');
						linkUrl = linkUrl + '.' + tagIDArr[1] + '&' + tagIDArr[2] + '&' + tagIDArr[3];
					}
				} else {
					linkUrl = tagID.replace('samsung:', '/content/samsung/').replace('/' + tagIDArr[3], '').replace(tagIDArr[2], 'tag');
					linkUrl = linkUrl + '.' + tagIDArr[1] + '&' + tagIDArr[2] + '&' + tagIDArr[3];
				}
				return this.getUrl((this.isLive) ? linkUrl + '/' : linkUrl);
			},
			getScene7ImagePath : function(imagePath) {
				var imagePath = $.changeScene7domain.getChangeLiveImagePath(imagePath);
				var srcPcArr = '';
				srcPcArr = imagePath.split('.');
				if(srcPcArr[srcPcArr.length - 1] == 'jpg') {
					imagePath = imagePath + '?$ORIGIN_JPG$';
				} else if(srcPcArr[srcPcArr.length - 1] == 'png') {
					imagePath = imagePath + '?$ORIGIN_PNG$';
				}
				return imagePath;
			},
			defaultTempleteReplace : function($wrap, $innerHTML, product, etcFunc) {

				var eyebrow = this.getEyebrowData(product.eyebrow);
				var etcFunc = etcFunc || function($wrap, $innerHTML, product, templateCodes) { };

				product.tagID = eyebrow.tagID || 'null';
				product.pageTrack = ($wrap.attr(this.defaultVal.attr.pageTrack) ? $wrap.attr(this.defaultVal.attr.pageTrack) : (typeof win.digitalData !== "undefined") ? ((win.digitalData.page.pageInfo.pageTrack) ? win.digitalData.page.pageInfo.pageTrack : 'null') : 'null').toLowerCase();
				product.thumbnailOmni = product.thumbnail.alt || 'null';
				product.titleOmni = (product.title || 'null').toLowerCase();
				product.eyebrowOmni = eyebrow.title || 'null';
				product.eyebrowTitle = eyebrow.title;
				product.linkUrl = this.getUrl(product.url);
				product.eyebrowUrl = this.getUrl(eyebrow.url);
				product.moreText = 'more';
				product.linkOmniType = 'microsite_contentinter';

				$innerHTML = this.replaceAll($innerHTML, this.templateCodes.linkOmniType, product.linkOmniType);
				$innerHTML = this.replaceAll($innerHTML, this.templateCodes.linkUrl, product.linkUrl);
				$innerHTML = this.replaceAll($innerHTML, this.templateCodes.linkTitle, product.title);
				$innerHTML = this.replaceAll($innerHTML, this.templateCodes.gaCa, product.pageTrack);
				$innerHTML = $innerHTML.replace(this.templateCodes.tagID, product.tagID);
				$innerHTML = $innerHTML.replace(this.templateCodes.imgOmni, product.pageTrack + ':' + product.titleOmni + '_image');
				$innerHTML = $innerHTML.replace(this.templateCodes.imgGaLa, product.titleOmni + '_image');
				$innerHTML = $innerHTML.replace(this.templateCodes.eyebrowOmni, product.pageTrack + ':' + product.titleOmni + '_' + product.eyebrowOmni);
				$innerHTML = $innerHTML.replace(this.templateCodes.eyebrowGaLa, product.titleOmni + '_' + product.eyebrowOmni);
				$innerHTML = $innerHTML.replace(this.templateCodes.eyebrowLink, product.eyebrowUrl);
				$innerHTML = $innerHTML.replace(this.templateCodes.eyebrowText, product.eyebrowTitle);
				$innerHTML = $innerHTML.replace(this.templateCodes.eyebrowLinkTitle, product.eyebrowTitle + ' title');
				$innerHTML = $innerHTML.replace(this.templateCodes.headlineOmni, product.pageTrack + ':' + product.titleOmni + '_title');
				$innerHTML = $innerHTML.replace(this.templateCodes.headlineGaLa, product.titleOmni + '_title');
				$innerHTML = $innerHTML.replace(this.templateCodes.headlineText, product.title);
				$innerHTML = $innerHTML.replace(this.templateCodes.subHeadlineOmni, product.pageTrack + ':' + product.titleOmni + '_subtitle');
				$innerHTML = $innerHTML.replace(this.templateCodes.subHeadlineGaLa, product.titleOmni + '_subtitle');
				$innerHTML = $innerHTML.replace(this.templateCodes.subHeadlineText, product.description);
				$innerHTML = $innerHTML.replace(this.templateCodes.moreOmni, product.pageTrack + ':' + product.titleOmni + '_learn more');
				$innerHTML = $innerHTML.replace(this.templateCodes.moreText, product.moreText);
				
				etcFunc($wrap, $innerHTML, product, this.templateCodes);

				return $innerHTML;
			},
			setMarkupChange : function(info) {
				var $eyebrow = info.wrap.find(this.selector.eyebrow);
				var $headline = info.wrap.find(this.selector.headline);
				var $subHeadline = info.wrap.find(this.selector.subHeadline);
				
				this.setImageMarkupChange(info.product, info.imageWrap);
				this.setLinkMarkupChange(info.product.linkUrl, info.product.eyebrowUrl, info.wrap);
				this.noDataRemoveNode($eyebrow, info.product.eyebrowTitle);
				this.noDataRemoveNode($headline, info.product.title);
				this.noDataRemoveNode($subHeadline, info.product.description);

				info.etcFunc = info.etcFunc || function() {};
				info.etcFunc(info);
			},
			setLinkMarkupChange : function(linkUrl, eyebrowUrl, $wrap) {
				var $alticleLinks = $wrap.find(this.defaultVal.selector.articleLink);
				var $eyebrowLinks = $wrap.find(this.defaultVal.selector.eyebrowLink);
				var alticleLen = $alticleLinks.length;
				var eyebrowLen = $eyebrowLinks.length;
				var $current;
				var $parent;
				if(!linkUrl) {
					for(var i = 0; i < alticleLen; i++) {
						$current = $alticleLinks.eq(i);
						$parent = $current.parent(this.defaultVal.selector.moreLinkWrap);
						if($parent.length) {
							$parent.remove();
						} else {
							$current[0].outerHTML = $current.html();
						}
					}
				}
				if(!eyebrowUrl) {
					for(i = 0; i < eyebrowLen; i++) {
						$current = $eyebrowLinks.eq(i);
						$current[0].outerHTML = $current.html();
					}
				}
			},
			setImageMarkupChange : function(product, $imageWrap) {
				if(!product.thumbnail.pc && !product.thumbnail.mo) {
					$imageWrap.html('');
				} else {
					if(this.isLive) {
						if(product.thumbnail.pc) {
							product.thumbnail.pc = this.getScene7ImagePath(product.thumbnail.pc);
						}
						if(product.thumbnail.mo) {
							product.thumbnail.mo = this.getScene7ImagePath(product.thumbnail.mo);
						}
					}
					$imageWrap.find('source').attr('srcset', product.thumbnail.mo);
					$imageWrap.find('img').attr({
						'src' : product.thumbnail.pc,
						'data-src-pc' : product.thumbnail.pc,
						'data-src-mobile' : product.thumbnail.mo,
						'alt' : product.thumbnail.alt
					});
				}
			}
		}
	})();

	if( typeof $.fn.globalFeature === 'function') $.fn.globalFeature = function() {};
	$.fn.globalFeature = function(opts) {
		var defaults = {
			initLine : null,
			reinitLine : null,
			heightIgnore : '',
			on : function() {},
			off : function() {},
			onVisible : function() {},
			offVisible : function() {},
			onLazyLoad : function() {},
			onBeforeFunc : function() {}
		}
		defaults = $.extend({}, defaults, opts);
		var $targets = $(this);
		var onMotion = false;
		var onVisibleMotion = false;
		var offMotion = false;
		var imgLoaded = false;
		var saveScrollTop = 0;
		var optsCheck = function() {
			if(!$targets.length) {
				return 'container : ' + $targets.selector + ' => not found container';
			}
			return true;
		}
		var setScrollAni = function() {

			var $current = $targets;
			var winHeight = $(win).height(),
				scrollTop = $(win).scrollTop(),
				scrollInfo = getScrollInfo($current, winHeight, scrollTop);


			if(saveScrollTop <= scrollTop) { // down
				if(scrollInfo.down.isOnLazyLoad && !imgLoaded) {// lazy loading
					defaults.onLazyLoad($current);
					imgLoaded = true;
				}
				if(scrollInfo.down.isOnVisibleMotion && !onVisibleMotion && !offMotion) {
					defaults.onVisible($current);
					onVisibleMotion = true;
				}
				if(scrollInfo.down.isOnMotion && !onMotion && !offMotion) {
					defaults.on($current);
					onMotion = true;
					offMotion = false;
				}
			} else if(saveScrollTop > scrollTop) { // up
				if(scrollInfo.up.isOnMotion && !onMotion && offMotion) {
					defaults.on($current);
					defaults.onVisible($current);
					onMotion = true;
					offMotion = false;
				}
				if(scrollInfo.up.isOffMotion && onMotion && !offMotion) {
					defaults.off($current);
					onMotion = false;
					offMotion = false;
				}
				if(scrollInfo.up.isOffVisibleMotion && !onMotion && !offMotion) {
					defaults.offVisible($current);
					onVisibleMotion = false;
				}
			}
			saveScrollTop = scrollTop;
		}
		var onScroll = function() {
			$(win).on('load scroll', $.proxy(function() {
				setScrollAni();
			}));
		}
		var getScrollInfo = function(current, winHeight, scrollTop) {

			var initLine = 0,
				reinitLine = 0,
				currentHeight = current.outerHeight(true),
				currentOffsetTop = current.offset().top || current.closest('.section') || current.closest('section') || 0;

			if(defaults.initLine != null) {
				if(!isNaN(defaults.initLine)) {
					initLine = defaults.initLine;
				} else {
					if(current.find(defaults.initLine).length) {
						initLine = current.find(defaults.initLine).offset().top;
					}
				}
			} else {
				initLine = currentOffsetTop - winHeight + (currentHeight * 0.8);
			}
			if(defaults.heightIgnore) {
				if(typeof defaults.heightIgnore == 'object') {
					var sum = 0;
					for(var i = 0; i < defaults.heightIgnore.length; i++) {
						sum += $(defaults.heightIgnore[i]).outerHeight();
					}
					initLine -= sum;
				} else if(typeof defaults.heightIgnore == 'string') {
					initLine -= ($(defaults.heightIgnore).length) ? $(defaults.heightIgnore).outerHeight() : 0;
				}
			}
			if(defaults.reinitLine != null) {
				if(!isNaN(defaults.reinitLine)) {
					reinitLine = defaults.reinitLine;
				} else {
					if(current.find(defaults.reinitLine).length) {
						reinitLine = current.find(defaults.reinitLine).offset().top;
					}
				}
			} else {
				reinitLine = currentOffsetTop + (winHeight * 1.3);
			}
			var scrollInfo = {
				down : {
					isOnMotion : (scrollTop > initLine) ? true : false,
					isOnVisibleMotion : (scrollTop > (currentOffsetTop - winHeight + (currentHeight * 0.1))) ? true : false,
					isOffMotion : (scrollTop > (currentOffsetTop + (currentHeight * 1.1))) ? true : false,
					isOnLazyLoad : (scrollTop > (currentOffsetTop - winHeight)) ? true : false
				},
				up : {
					isOnMotion : (scrollTop < reinitLine) ? true : false,
					isOffVisibleMotion : (scrollTop < (currentOffsetTop - (winHeight * 1.1))) ? true : false,
					isOffMotion : (scrollTop < (currentOffsetTop - (winHeight * 1.1))) ? true : false
				}
			}
			return scrollInfo;
		}
		var run = function() {
			onScroll();
			setScrollAni();
		}
		var checkMessage = optsCheck();
		if(checkMessage === true) {
			defaults.onBeforeFunc($targets);
			run();
		} else {
		}
	}
	
	if( typeof $.fn.otherImgLazyload === 'function') $.fn.otherImgLazyload = function() {};
	// PD Zoom Thumbnail opacity animate
	$.fn.otherImgLazyload = function(info) {
		if(!$(this).length) return;
		var $lazyImg = $(this),
			lazyImgClass = {
				ing : 'js-image-lazyloading',
				end : 'js-image-lazyloaded',
				block : 'js-image-block',
				hover : 'hover-img'
			},
			lazyImgPathData = {
				pc : 'data-lazy-pc',
				mobile : 'data-lazy-mobile'
			},
			lazyTime = 600,
			loaded = false;
		var changeImg = function() {
			var pcResSrc = $lazyImg.attr(lazyImgPathData.pc),
				moResSrc = $lazyImg.attr(lazyImgPathData.mobile),
				currSrc = $lazyImg.attr('src'),
				currAlt = $lazyImg.attr('alt'),
				currTitle = $lazyImg.attr('title'),
				isPicture = $lazyImg.parent('picture').length,
				imgPath = null,
				isMobile = (UTIL.winSize().w <= V_STATIC.RESPONSIVE.MOBILE.WIDTH) ? true : false;

			if(isMobile) {
				if(moResSrc) {
					imgPath = moResSrc;
				} else {
					imgPath = pcResSrc;
				}
			} else {
				imgPath = pcResSrc;
			}
			if(isPicture) {
				if(moResSrc) $lazyImg.prev('source').attr('srcset', moResSrc);
			}
			imgPath = $.changeScene7domain.getChangeLiveImagePath(imgPath);
			if(imgPath && (currSrc != imgPath)) {
				var cImage = document.createElement('img');
				cImage.onload = function() {
					if(loaded) return false;
					var $wrap = $lazyImg.parent();
					var $afterImg = $(cImage);
					if(!$wrap.find($afterImg).length) {
						if(!$afterImg.hasClass(lazyImgClass.hover)) $afterImg.addClass(lazyImgClass.block);
						if($lazyImg.attr('style')) {
							$afterImg.attr('style', $lazyImg.attr('style'));
						}
						$afterImg.removeClass(lazyImgClass.ing)
						.addClass(lazyImgClass.end)
						.attr(lazyImgPathData.pc, pcResSrc)
						.attr(lazyImgPathData.mobile, moResSrc)
						.attr('src', imgPath)
						.attr('alt', currAlt || '')
						.attr('title', currTitle || '')
						.css({ 
							opacity: 0
						});

						if (!!!currTitle) {
							$afterImg.removeAttr('title');
						}

						$wrap.append($afterImg);
						$afterImg.on('load', function() {
							$lazyImg.stop().animate({ opacity: 0 }, lazyTime);
							$afterImg.stop().animate({ opacity: 1 }, lazyTime, function() {
								$lazyImg.remove();
								$afterImg.removeClass(lazyImgClass.block);
								if(info && (typeof info.callbackFunc == 'function')) info.callbackFunc(info._this || '');
							});
						});
						loaded = true;
					}
				}
				cImage.src = imgPath;
			} else {
				if(info && (typeof info.callbackFunc == 'function')) info.callbackFunc(info._this || '');
			}
		}
		changeImg();
	}

	if( typeof $.fn.commonImgLazyload === 'function') $.fn.commonImgLazyload = function() {};
	$.fn.commonImgLazyload = function(info, isPageLoad) {
		// info(object) parameter : Use PD Zoom Thumbnail opacity animate
		if(!$(this).length) return;
		var info = info || false,
			isPageLoad = isPageLoad || false,
			$wrap = $(this),
			runMode = $('#gnbRunmodeInfo').val(),
			isLive = (runMode == 'live' || runMode == 'qa') ? true : false,
			scene7domain = (isLive) ? $('#scene7domain').val() : '',
			i = 0, isMobile = (UTIL.winSize().w <= V_STATIC.RESPONSIVE.MOBILE.WIDTH) ? true : false,
			lazyImgClass = {
				ing : 'js-image-lazyloading',
				end : 'js-image-lazyloaded',
				block : 'js-image-block',
				hover : 'hover-img'
			},
			lazyType = {
				pcIgnore : '.ma-g-product-tile__slide-list-wrap',
				moIgnore : '.ma-g-product-tile__slide-list-wrap,.js-sample-carousel-div',
				pcLazyTime : 600,
				moLazyTime : 600
			},
			lazyImgPathData = {
				pc : 'data-lazy-pc',
				mobile : 'data-lazy-mobile'
			},
			carouselClass = {
				initialize : '.s-slick, .s-new-slick, .s-view-slick, .swiper-container',
				initialized : '.slick-initialized, .swiper-container-initialized',
				activeSlide : '.slick-current, .slick-active, .swiper-slide-active',
				cloneSlide : '.slick-cloned, .swiper-slide-duplicate',
				ignoreCaorusel : '.ho-product-card__tab-list, .ho-product-ribbon__list-wrap',
				endCarousel : 'js-lazyLoaded-carousel',
				centerModeEnded : 'js-center-ended'
			},
			$fLazyImgs = (info) ? $wrap.find('img') : $wrap.find('.' + lazyImgClass.ing),
			fLazyImgLength = $fLazyImgs.length,
			firstLoad = true,
			prevMode = isMobile;

		var setBindEvents = function() {
			$(win).on('load', function() {
				setTimeout(function() {
					$(win).on('resize orientationchange', onResize);
				}, 1000);
			});
		}
		var imagesChangeInWrap = function($images, callback) {
			var imageLength = $images.length;
			var callback = callback || function() {};
			if(imageLength) {
				for(var i = 0; i < imageLength; i++) {
					if($images.eq(i).hasClass(lazyImgClass.ing)) {
						changeImg($images.eq(i), false);
					}
				}
			}
			callback($images.closest(carouselClass.initialized));
		}
		var reInitSlickAddFunc = function($carousel) {
			if(isPageLoad) {
				if(!$carousel.hasClass(carouselClass.endCarousel)) {
					if(!$carousel.hasClass(carouselClass.endCarousel)) $carousel.addClass(carouselClass.endCarousel);
					carouselBindEvents($carousel);
				}
			} else {
				carouselBindEvents($carousel);
			}
		};
		var carouselBindEvents = function($carousel) {
			var carouselClassArr = carouselClass.initialized.split(', ');
			if ($carousel.hasClass((carouselClassArr[0]).replace('.', ''))) {
				$carousel.off('beforeChange.commonLazyLoad').on('beforeChange.commonLazyLoad', function(e, slick, currentSlide, nextSlide) {
					if (currentSlide === nextSlide) return;
					changeSlide($carousel);
				});
			} else if ($carousel.hasClass((carouselClassArr[1]).replace('.', ''))){
				$carousel[0].swiper.on('slideChange', function() {
					changeSlide($carousel);
				});
			}
		};
		var cloneSlideImageChange = function($carousel) {
			var $cloneSlides = $carousel.find(carouselClass.cloneSlide),
				$cloneImgs = $cloneSlides.find('.' + lazyImgClass.ing);

			imagesChangeInWrap($cloneImgs);
		}
		var onResize = function() {
			var resChangeImage = function(isMobile) {
				var $lazyImgs = $wrap.find('.' + lazyImgClass.ing + ', .' + lazyImgClass.end),
					$lazyImg = null,
					setTimeImageChange = null,
					setTimeCarousel = null,
					lazyImgLength = $lazyImgs.length;
	
				if(lazyImgLength && prevMode != isMobile) {
					clearTimeout(setTimeImageChange);
					setTimeImageChange = null;
					setTimeImageChange = setTimeout(function() {
						for(i = 0; i < lazyImgLength; i++) {
							$lazyImg = $lazyImgs.eq(i);
							changeImg($lazyImg, true, function($lazyImg) {
								if(prevMode != isMobile) {
									clearTimeout(setTimeCarousel);
									setTimeCarousel = null;
									setTimeCarousel = setTimeout(function() {
										var $carousel = $lazyImg.closest(carouselClass.initialized);
										if($carousel.length) {
											reInitSlickAddFunc($carousel);
											cloneSlideImageChange($carousel);
										}
									}, 550);
								}
								prevMode = isMobile;
							});
						}
					}, 50);
				}
			}
			var winWidth = UTIL.winSize().w;
			if (winWidth <= V_STATIC.RESPONSIVE.MOBILE.WIDTH) {
				isMobile = true;
			} else {
				isMobile = false;
			}
			
			if(!firstLoad) {
				resChangeImage(isMobile);
			}
		}
		var setScene7domainImage = function($lazyImg) {
			var pcResSrc = $lazyImg.attr(lazyImgPathData.pc),
				moResSrc = $lazyImg.attr(lazyImgPathData.mobile);

			if(pcResSrc) {
				$lazyImg.attr(lazyImgPathData.pc, $.changeScene7domain.getChangeLiveImagePath(pcResSrc));
			}
			if(moResSrc) {
				$lazyImg.attr(lazyImgPathData.mobile, $.changeScene7domain.getChangeLiveImagePath(moResSrc));
			}
		}
		var changeImg = function($lazyImg, isResize, callback) {
			var $wrap = $lazyImg.parent(),
				pcResSrc = $lazyImg.attr(lazyImgPathData.pc),
				moResSrc = $lazyImg.attr(lazyImgPathData.mobile),
				currSrc = $lazyImg.attr('src'),
				currAlt = $lazyImg.attr('alt'),
				currTitle = $lazyImg.attr('title'),
				isPicture = $lazyImg.parent('picture').length,
				imgPath = null,
				callback = callback || function() {};

			if(isMobile) {
				if(moResSrc) {
					imgPath = moResSrc;
				} else {
					imgPath = pcResSrc;
				}
			} else {
				imgPath = pcResSrc;
			}
			if(isPicture) {
				if(moResSrc) $lazyImg.prev('source').attr('srcset', moResSrc);
			}
			imgPath = $.changeScene7domain.getChangeLiveImagePath(imgPath);
			
			if(imgPath && (currSrc != imgPath)) {
				if($lazyImg.hasClass(lazyImgClass.hover)
				|| (!isMobile && lazyType.pcIgnore && $lazyImg.closest(lazyType.pcIgnore).length)
				|| isMobile && lazyType.moIgnore && $lazyImg.closest(lazyType.moIgnore).length
				|| isResize) { 
					$lazyImg.removeClass(lazyImgClass.block)
					.removeClass(lazyImgClass.ing)
					.addClass(lazyImgClass.end)
					.attr('src', imgPath)
					.removeAttr('style');
				} else {
					if($lazyImg.is(':visible')) {
						var cImage = document.createElement('img');
						cImage.onload = function() {
							var $afterImg = $(cImage);
							if(!$wrap.find($afterImg).length && !$wrap.find('img[src="' + imgPath + '"]').length) {
								$afterImg.removeClass(lazyImgClass.ing)
								.addClass(lazyImgClass.block)
								.addClass(lazyImgClass.end)
								.attr(lazyImgPathData.pc, pcResSrc)
								.attr(lazyImgPathData.mobile, moResSrc)
								.attr('alt', currAlt || '')
								.attr('title', currTitle || '');

								if (!!!currTitle) {
									$afterImg.removeAttr('title');
								}

								$lazyImg.before($afterImg);
								$lazyImg.stop().animate({ opacity: 0 }, ((isMobile) ? lazyType.moLazyTime : lazyType.pcLazyTime));
								$afterImg.stop().animate({ opacity: 1 }, ((isMobile) ? lazyType.moLazyTime : lazyType.pcLazyTime), function() {
									$lazyImg.remove();
									$afterImg.removeAttr('style');
									$afterImg.removeClass(lazyImgClass.block);
									cImage = null;
								});
							}
						}
						cImage.src = imgPath;
					}
				}
			}
			callback($lazyImg);
		}
		var changeSlide = function($carousel) {
			setTimeout(function() {
				var $nextSlideImgs = $carousel.find(carouselClass.activeSlide).find('.' + lazyImgClass.ing);
				imagesChangeInWrap($nextSlideImgs);
				cloneSlideImageChange($carousel);
			}, 200);
		};
		var CarouselChangeImage = function($carousel, $lazyImg) {
			var inter = null;
				
			clearTimeout(inter);
			inter = setTimeout(function() {
				if($carousel.is(carouselClass.initialized) && !$carousel.is(carouselClass.ignoreCaorusel)) {
					var $currentSlide = $lazyImg.closest(carouselClass.activeSlide);
					if($currentSlide.length) {
						changeImg($lazyImg, false, function($lazyImg) {
							setTimeout(function() {
								var $carousel = $lazyImg.closest(carouselClass.initialized);
								reInitSlickAddFunc($carousel);
							}, 550);
						});
					} else {
						reInitSlickAddFunc($carousel);
					}
				} else {
					changeImg($lazyImg, false);
				}
			}, 500);
		}
		var originImageChange = function($lazyImg) {
			var $carousel = $lazyImg.closest(carouselClass.initialize);
			CarouselChangeImage($carousel, $lazyImg);
		}
		var run = function() {
			var $lazyImg = null,
				imgOffsetTop = 0;
			if(fLazyImgLength) {
				if(scene7domain) {
					for(var i = 0; i < fLazyImgLength; i++) {
						setScene7domainImage($fLazyImgs.eq(i));
					}
				}
				if(info) {
					if(info.isSingle) {
						// PD Zoom Thumbnail opacity animate
						$fLazyImgs.otherImgLazyload(info);
					} else {
						imagesChangeInWrap($fLazyImgs);
					}
				} else {
					if(UTIL.isAemEditMode()) {
						imagesChangeInWrap($fLazyImgs);
					} else {
						// general image lazyload
						for(i = 0; i < fLazyImgLength; i++) {
							$lazyImg = $fLazyImgs.eq(i);
							imgOffsetTop = $lazyImg.offset().top;
							if((imgOffsetTop > 0) && (imgOffsetTop < UTIL.winSize().h)) {
								originImageChange($lazyImg);
							} else {
								$lazyImg.globalFeature({
									onLazyLoad : function($lazyImg) {
										originImageChange($lazyImg);
									}
								});
							}
						}
						if(firstLoad) firstLoad = false;
					}
					setBindEvents();
				}
			}
		}
		if(isPageLoad && ($('#siteCode').val() != 'sec')) {
			run();
		} else {
			var pageTimeout = ($('#siteCode').val() == 'sec' && $('.st-home').length) ? 500 : 1500;
			win.lazytime = null;
			clearTimeout(win.lazytime);
			win.lazytime = setTimeout(function() {
				run();
			}, pageTimeout);
		}
	}
	var $content = $('#wrap');
	if($content.length) $('#wrap').commonImgLazyload(false, true);
	else $('body').commonImgLazyload(false, true);

	if( typeof $.globalImgSrcChange === 'function') $.globalImgSrcChange = (function() {})();
	$.globalImgSrcChange = (function() {
		// js-img-src responsive logic
		return {
			init : function(componentSelector) {
				if(componentSelector) {
					this.setElements($(componentSelector));
					if(this.resImgs.length) this.setBindEvents();
				}
			},
			setElements : function(component) {
				this.container = $('body');
				this.resImgs = component.find('.' + V_STATIC.CSS.JS_IMG_SRC);
				this.resDataAttr = V_STATIC.DATA_ATTR.SRC_MOBILE;
			},
			setBindEvents : function() {
				this.container.on(CST_EVENT.RESPONSIVE.CHANGE, $.proxy(this.onResponsiveChange, this));
				this.container.trigger(CST_EVENT.RESPONSIVE.GET_STATUS);
			},
			onResponsiveChange : function(e, data) {
				var _this = this;

				switch(data.RESPONSIVE_NAME) {
					case V_STATIC.RESPONSIVE.DESKTOP.NAME:
						this.resDataAttr = V_STATIC.DATA_ATTR.SRC_PC;
						break;
					case V_STATIC.RESPONSIVE.MOBILE.NAME:
						this.resDataAttr = V_STATIC.DATA_ATTR.SRC_MOBILE;
						break;
					default:
						this.resDataAttr = V_STATIC.DATA_ATTR.SRC_PC;
						break;
				}

				$.each(this.resImgs, function() {
					var el = $(this),
					src = el.attr('src'),
					resSrc = el.attr(_this.resDataAttr);

					if (src !== resSrc) {
						el.attr('src', resSrc);
					}
				});
			}
		};
	})();
})(window, window.jQuery);

/*!
 * samsung.com - Phase2 - Accessibility Checkbox Script
 * src : js/src/smg/aem/accessibility/placehoder/smg.aem.acc.checkbox.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.accessibility) {
		win.smg.aem.accessibility = {};
	}

	// Utility Script
	var UTIL = win.smg.aem.util;

	var namespace = win.smg.aem.accessibility;

	/**
	 * @name window.smg.aem.accessibility.checkbox
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 * @requires window.smg.aem.static.js
	 * @requires window.smg.aem.util.js
	 * @requires window.smg.aem.event.js
	 */
	namespace.checkbox = (function() {
		/**
		 * @description Default Options
		 * @private
		 * @type {Object}
		 */
		var defParams = {
			targets : '[data-accessibility=\'checkbox\']',
			targetsValue : 'data-acc-checkbox-value',
			holder : 'data-acc-checkbox',
			holderTarget : 'data-acc-checkbox-target',
			onClass : 'data-acc-onclass'
		};
		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;

				this.opts = UTIL.def(defParams, (args || {}));

				this.setElements();
				this.setBindEvents();
			},
			setElements : function() {
				this.targets = this.container.find(this.opts.targets);
				this.holders = $('[' + this.opts.holder + ']');

				$.each(this.targets, $.proxy(function(idx, elm) {
					$(elm).attr(this.opts.targetsValue, $(elm).attr('checked'));
				}, this));
			},
			setBindEvents : function() {
				this.holders.on('click', $.proxy(this.onHolderClick, this));
				this.targets.on('change', $.proxy(this.onTargetChange, this));
			},
			unElements : function() {
				var target,
				targetInfo;
				$.each(this.targets, $.proxy(function(idx, elm) {
					target = $(elm);
					targetInfo = this.getTargetInfo(target);

					target.removeAttr('checked', 'checked');
					target.prop('checked', false);
					if (targetInfo.onClass) {
						targetInfo.holder.removeClass(targetInfo.onClass);
					}
				}, this));
				this.targets = [];
				this.holders = [];
			},
			unBindEvents : function() {
				this.holders.off('click', $.proxy(this.onHolderClick, this));
				this.targets.off('change', $.proxy(this.onTargetChange, this));
			},
			onHolderClick : function(e) {
				var target = $(e.currentTarget);
				target = $('[' + this.opts.holderTarget + '=\'' + target.attr(this.opts.holder) + '\']');

				if (target.size()) {
					target.trigger('click').focus();
				}
			},
			onTargetChange : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass,
				isChecked = target.attr('checked');

				if (!isChecked) {
					target.attr('checked', 'checked');
					target.prop('checked', true);
					if (onClass) {
						holder.addClass(onClass);
					}
				} else {
					target.removeAttr('checked', 'checked');
					target.prop('checked', false);
					if (onClass) {
						holder.removeClass(onClass);
					}
				}
			},
			getTargetInfo : function(target) {
				target = $('[' + this.opts.holder + '=\'' + target.attr(this.opts.holderTarget) + '\']');

				if (target.size()) {
					return { holder : target, onClass : target.attr(this.opts.onClass) };
				}
				return { holder : '', onClass : '' };
			},
			destroy: function() {
				this.unBindEvents();
				this.unElements();
			},
			refresh : function(container, args) {
				container = container || this.container;

				this.destroy();
				this.init(container, args);
			}
		};
	})();

	$(function() {
		namespace.checkbox.init($('body'));
	});

})(window, window.jQuery);
/*!
 * samsung.com - Phase2 - Accessibility Placeholder Script
 * src : js/src/smg/aem/accessibility/placehoder/smg.aem.acc.placeholder.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.accessibility) {
		win.smg.aem.accessibility = {};
	}

	// Utility Script
	var UTIL = win.smg.aem.util;

	var namespace = win.smg.aem.accessibility;

	/**
	 * @name window.smg.aem.accessibility.placeholder
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 * @requires window.smg.aem.static.js
	 * @requires window.smg.aem.util.js
	 * @requires window.smg.aem.event.js
	 */
	namespace.placeholder = (function() {
		/**
		 * @description Default Options
		 * @private
		 * @type {Object}
		 */
		var defParams = {
			targets : '[data-accessibility=\'placeholder\']',
			targetsValue : 'data-acc-placeholder-value',
			holder : 'data-acc-placeholder',
			holderTarget : 'data-acc-placeholder-target',
			onClass : 'data-acc-onclass'
		};
		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;

				this.opts = UTIL.def(defParams, (args || {}));

				this.setElements();
				this.setBindEvents();
			},
			setElements : function() {
				this.targets = this.container.find(this.opts.targets);

				$.each(this.targets, $.proxy(function(idx, elm) {
					$(elm).attr(this.opts.targetsValue, $(elm).val());
				}, this));
			},
			setBindEvents : function() {
				this.targets.on('focus', $.proxy(this.onTargetsFocus, this))
							.on('blur', $.proxy(this.onTargetsBlur, this))
							.on('keydown keyup', $.proxy(this.onTargetsChange, this));
			},
			unElements : function() {
				$.each(this.targets, $.proxy(function(idx, elm) {
					$(elm).val($(elm).attr(this.opts.targetsValue));
				}, this));

				var target,
				targetInfo;
				$.each($('[' + this.opts.holder + ']'), $.proxy(function(idx, elm) {
					target = $(elm);
					targetInfo = this.getTargetInfo(target);

					if (targetInfo.onClass) {
						target.removeClass(targetInfo.onClass);
					} else {
						target.show();
					}
				}, this));

				this.targets = [];
			},
			unBindEvents : function() {
				this.targets.off('focus', $.proxy(this.onTargetsFocus, this))
							.off('blur', $.proxy(this.onTargetsBlur, this));
			},
			onTargetsFocus : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass;

				if (!holder) {
					return;
				}

				if (target.val()) {
					if (onClass) {
						holder.addClass(onClass);
					} else {
						holder.css({ 'visibility' : 'hidden' });
					}
				}
			},
			onTargetsBlur : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass;

				if (!holder) {
					return;
				}

				if (!target.val()) {
					if (onClass) {
						holder.removeClass(onClass);
					} else {
						holder.css({ 'visibility' : 'visible' });
					}
				}
			},
			onTargetsChange : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass;

				if (!holder) {
					return;
				}

				if (target.val()) {
					if (onClass) {
						holder.addClass(onClass);
					} else {
						holder.css({ 'visibility' : 'hidden' });
					}
				} else {
					if (onClass) {
						holder.removeClass(onClass);
					} else {
						holder.css({ 'visibility' : 'visible' });
					}
				}
			},
			getTargetInfo : function(target) {
				target = $('[' + this.opts.holder + '=\'' + target.attr(this.opts.holderTarget) + '\']');

				if (target.size()) {
					return { holder : target, onClass : target.attr(this.opts.onClass) };
				}
				return { holder : '', onClass : '' };
			},
			destroy: function() {
				this.unBindEvents();
				this.unElements();
			},
			refresh : function(container, args) {
				container = container || this.container;

				this.destroy();
				this.init(container, args);
			}
		};
	})();

	$(function() {
		namespace.placeholder.init($('body'));
	});

})(window, window.jQuery);
/*!
 * samsung.com - Phase2 - Product Templates
 * src : js/src/smg/aem/templates/product/product-backtotop.js
 *
 * @version 1.0.0
 * @since 2016.10.10
 */
;(function (win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.templates) {
		win.smg.aem.templates = {};
	}

	if('undefined' === typeof win.smg.aem.templates.product) {
		win.smg.aem.templates.product = {};
	}

	// V_STATIC Values
	var V_STATIC = win.smg.aem.varStatic,
	// Utility Script
	UTIL = win.smg.aem.util,
	// Custom Events
	CST_EVENT = win.smg.aem.customEvent;

	var namespace = win.smg.aem.templates.product;

	/**
	 * @name window.smg.aem.templates.product.details
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 */
	namespace.backtotop = (function() {
		/**
		 * @description Default Options
		 * @private
		 * @type {Object}
		 */
		var defParams = {
			topBtn : {
				wrap : '.s-gotop-wrap',
				btn : '.s-btn-gotop',
				onClass : 's-show',
				speed : 1000
			},
			footer : {
				target : '#footer'
			}
		};
		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;

				this.opts = UTIL.def(defParams, (args || {}));
				this.setElements();
				this.onBindEvent();
				this.defSetup();
			},
			setElements : function() {
				this.htmlBody = $('html, body');
				this.footer = $(this.opts.footer.target);
				this.topBtnWrap = this.container.find(this.opts.topBtn.wrap);
				this.topBtn = this.topBtnWrap.find(this.opts.topBtn.btn);
			},
			onBindEvent : function() {
				this.topBtn.on('click', $.proxy(this.onTopBtnClick, this));

				$(win).on('scroll touchmove', $.proxy(this.onScrollListener, this));
				this.onScrollListener();

				$(CST_EVENT.CONNECT).on(CST_EVENT.BACKTOTOP.POSITION_CHANGE, $.proxy(this.setPosition, this));
			},
			defSetup : function() {
				$(win).on('load', function(e) {
					$(win).trigger('scroll');
				});
			},
			onTopBtnClick : function() {
				this.htmlBody.animate({scrollTop : 0}, this.opts.topBtn.speed);
			},
			setPosition : function(e, data) {
				if(this.topPosition === data.TOP_POSITION) return;
				this.topPosition = data.TOP_POSITION;
			},
			onScrollListener : function() {
				var winTop = $(win).scrollTop(),
				winHeight = UTIL.winSize().h,
				footerTop = (this.footer.size()) ? this.footer.offset().top : 0;

				if(typeof this.topPosition === 'undefined') this.topPosition = winTop;

				if (winTop > this.topPosition && (winTop + winHeight) < footerTop) {
					if(!this.topBtnWrap.hasClass(this.opts.topBtn.onClass)) this.topBtnWrap.addClass(this.opts.topBtn.onClass);
				} else {
					if(this.topBtnWrap.hasClass(this.opts.topBtn.onClass)) this.topBtnWrap.removeClass(this.opts.topBtn.onClass);
				}
			}
		};
	})();

	$(function() {
		namespace.backtotop.init($('body'));
	});
})(window, window.jQuery);


!function(e,t,i){"use strict";"undefined"==typeof e.smg&&(e.smg={}),"undefined"==typeof e.smg.aem&&(e.smg.aem={}),"undefined"==typeof e.smg.aem.components&&(e.smg.aem.components={}),"undefined"==typeof e.smg.aem.components.video&&(e.smg.aem.components.video={}),t().jquery!==i().jquery&&i.fn.bcChromePlayer&&(t=i);var o=(e.smg.aem.varStatic,e.smg.aem.util),s=e.smg.aem.components;s.video=function(){var i={videos:".js-video",youtube:{iframe:"<iframe src='about:blank' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>",embedSrc:"https://www.youtube.com/embed/{{VIDEO_ID}}?wmode=opaque&rel=0&enablejsapi=1&version=3",autoPlay:"false"},brightcove:{playerType:"",countryCode:"",divID:"",videoTagID:"",videoID:"",videoWidth:"100%",videoHeight:"100%",autoPlay:"false",captionURL:""},mp4:{videoElement:'<video playsinline title="" class="s-video"><source src="" type="video/mp4"></video>',title:"",videoURL:"",imgURL:"",autoplay:"false",mute:"false",controls:"false",playBtn:".s-mp4-video-play, .js-pop-btn"},aparat:{iframe:"<iframe src='about:blank' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>",embedSrc:"https://www.aparat.com/video/video/embed/vt/frame/pid/0/showadstart/no/showvideo/yes/videohash/{{VIDEO_ID}}",autoPlay:"false"}};return{init:function(e,s){(this.container=e).size()&&(i.brightcove.templateReadyHandler=t.proxy(this.onBrightCoveTemplateReadyHandler,this),this.opts=o.def(i,s||{}),this.youtubeOpt=this.opts.youtube,this.brightcoveOpt=this.opts.brightcove,this.mp4Opt=this.opts.mp4,this.aparatOpt=this.opts.aparat,this._brightcoveOpt=null,this.youtubeIframe=null,this.aparatIframe=null,this.mp4VideoElement=null,this.setElements(),this.bindEventHandlers(),this.setCreateEmbedVideo(),this.ie8HidePlayButton())},setElements:function(){this.videosEmbed=this.container.find(this.opts.videos).filter(function(){return"embed"===t(this).attr("data-vid-view")}),this.videosLayer=this.container.find(this.opts.videos).filter(function(){return"layer"===t(this).attr("data-vid-view")})},bindEventHandlers:function(){t(document).on("click",this.opts.videos,t.proxy(this.setCreateLayerVideo,this))},ie8HidePlayButton:function(){8===document.documentMode&&(t(this.opts.mp4.playBtn).filter('[data-vid-type="mp4"]').css("display","none"),t(this.opts.videos).filter('[data-vid-type="mp4"]').find(this.opts.mp4.playBtn).css("display","none"))},setCreateEmbedVideo:function(){for(var e=this,t=0,i=this.videosEmbed.length;i>t;t++)!function(i){var o=e.videosEmbed.eq(i),s=o.data("vid-view"),a=o.data("vid-type"),n=o.data("vid-data");switch(a){case"youtube":e.setYoutube(n);break;case"brightcove":e.setBrightCove(n);break;case"mp4":e.setMp4Player(n,s,o,t);break;case"aparat":e.setAparat(n)}}(t)},setCreateLayerVideo:function(e){e.stopPropagation();var i=t(e.currentTarget),o=i.data("vid-view"),s=i.data("vid-type"),a=i.data("vid-data"),n=i.closest(".js-home-components");if("embed"!==o){switch(i.attr("data-vid-btn-idx",this.videosLayer.index(i)),t("#"+a.divID).attr("data-vid-btn-idx",i.attr("data-vid-btn-idx")),s){case"youtube":this.setYoutube(a);break;case"brightcove":this.setBrightCove(a);break;case"mp4":this.setMp4Player(a,o,i,i.attr("data-vid-btn-idx"));break;case"aparat":this.setAparat(a)}n.size()&&n.addClass("s-video-open"),"layer"===o&&this.container.addClass("video-layer-open"),t("#"+a.divID).closest(".video-area_5").off("aem_hide",t.proxy(this.onAemHide,this)),t("#"+a.divID).closest(".video-area_5").on("aem_hide",t.proxy(this.onAemHide,this))}},setYoutube:function(e){this.youtubeIframe=t(this.youtubeOpt.iframe),this.youtubeIframe.attr({id:"youtubePlayer_"+e.videoID.split("-").join("_"),src:this.youtubeOpt.embedSrc.replace("{{VIDEO_ID}}",e.videoID)+"&autoplay="+(e.autoPlay&&"true"===e.autoPlay.toLowerCase()?"1":"0")}),t("#"+e.divID).prepend(this.youtubeIframe).closest(".video-area_5").show().closest(".js-video-area").show(),t("#"+e.divID).closest(".video-area_5").on("click",".js-pop-close",t.proxy(this.onCloseBtnClick,this)),this.container.addClass("video-open")},setAparat:function(e){this.aparatIframe=t(this.aparatOpt.iframe),this.aparatIframe.attr({id:"aparatPlayer_"+e.videoID.split("-").join("_"),src:this.aparatOpt.embedSrc.replace("{{VIDEO_ID}}",e.videoID)+(e.autoPlay&&"true"===e.autoPlay.toLowerCase()?"?data[as]=1":"")}),t("#"+e.divID).closest(".video-area_5").addClass("s-aparat-area"),t("#"+e.divID).prepend(this.aparatIframe).closest(".video-area_5").show().closest(".js-video-area").show(),t("#"+e.divID).closest(".video-area_5").on("click",".js-pop-close",t.proxy(this.onCloseBtnClick,this)),this.container.addClass("video-open")},onCloseBtnClick:function(e){var i=t(e.currentTarget),o=i.closest(".video-area_5"),s=o.find(".brightCoveArea"),a=t("#"+i.data("div-id")).attr("data-vid-btn-idx"),n=t('[data-vid-view="layer"][data-vid-btn-idx="'+a+'"]'),r=n.closest(".js-home-components");if(n.size())if(n.length>1){var d=n.length-1,c=t(n[d]).closest(".slick-slide");"undefined"!=typeof c?n.each(function(e,i){d===e?t(c).hasClass("slick-cloned")||t(i).focus():t(i).focus()}):n.focus()}else n.focus();r.size()&&r.removeClass("s-video-open"),this.container.removeClass("video-layer-open"),o.css("display","none"),o.hasClass("s-aparat-area")&&o.find("iframe").attr("src","about:blank"),s.html(""),i.off("click",t.proxy(this.onCloseBtnClick,this))},onAemHide:function(e){var i=t(e.currentTarget).find(".brightcove-bcc-btn-close, .brightcove-bc5-btn-close"),o=t("#"+i.data("div-id")).attr("data-vid-btn-idx"),s=t('[data-vid-view="layer"][data-vid-btn-idx="'+o+'"]'),a=s.closest(".js-home-components");if(s.size()&&!t(e.target).hasClass("vjs-big-play-button"))if(s.length>1){var n=s.length-1,r=t(s[n]).closest(".slick-slide");"undefined"!=typeof r?s.each(function(e,i){n===e?t(r).hasClass("slick-cloned")||t(i).focus():t(i).focus()}):s.focus()}else s.focus();i.closest(".s-video-area").is(":visible")||a.removeClass("s-video-open")},setBrightCove:function(i){switch(this._brightcoveOpt=t.extend({},this.brightcoveOpt,i),this._brightcoveOpt.playerType){case"brightcoveBc5PlayerLayer":e.brightcoveBc5PlayerLayer(this._brightcoveOpt.countryCode,this._brightcoveOpt.divID,this._brightcoveOpt.videoTagID,this._brightcoveOpt.videoID,this._brightcoveOpt.videoWidth,this._brightcoveOpt.videoHeight,this._brightcoveOpt.autoPlay,this._brightcoveOpt.captionURL);break;case"bcHtml5Player":t("#"+this._brightcoveOpt.divID).bcHtml5Player(this._brightcoveOpt.countryCode,this._brightcoveOpt.videoTagID,this._brightcoveOpt.videoID,this._brightcoveOpt.videoWidth,this._brightcoveOpt.videoHeight,this._brightcoveOpt.autoPlay,this._brightcoveOpt.captionURL);break;case"brightcoveBccPlayerLayer":e.brightcoveBccPlayerLayer(this._brightcoveOpt.divID,this._brightcoveOpt.countryCode,this._brightcoveOpt.videoID,this._brightcoveOpt.videoWidth,this._brightcoveOpt.videoHeight,this._brightcoveOpt.autoPlay);break;case"bcChromePlayer":t("#"+this._brightcoveOpt.divID).bcChromePlayer(this._brightcoveOpt.countryCode,this._brightcoveOpt.videoID,this._brightcoveOpt.videoWidth,this._brightcoveOpt.videoHeight,this._brightcoveOpt.autoPlay)}},setMp4Player:function(e,i,o,s){var a=o,n=null;if(this.mp4VideoElement=t(this.mp4Opt.videoElement),this.mp4VideoElement.attr({title:e.title,width:e.videoWidth,height:e.videoHeight}),this.mp4VideoElement.find("source").attr("src",this.getScene7Path(e.videoURL,t(o))),n=a.find(this.mp4Opt.playBtn),8!==document.documentMode&&n.off("click.mp4Play").on("click.mp4Play",function(e){var i=t(e.currentTarget),o=t("#"+i.closest(".js-video").find(".s-video-player, .s-show-video").attr("id"));e.preventDefault(),e.stopPropagation(),o.find("video")[0].play(),o.find("video").prop("controls",!0),i.css("display","none")}),"true"===e.autoPlay&&this.mp4VideoElement.prop("autoplay",!0),"layer"===i&&("false"===e.controls?this.mp4VideoElement.prop("controls",!1):this.mp4VideoElement.prop("controls",!0)),"embed"===i&&"true"===e.scrollPlay&&n.css("display","none"),"embed"===i&&"true"===e.autoPlay&&this.mp4VideoElement.prop("controls",!0),t("#"+e.divID).prepend(this.mp4VideoElement).closest(".video-area_5").show().closest(".js-video-area").show(),t("#"+e.divID).closest(".video-area_5").on("click",".js-pop-close",t.proxy(this.onCloseBtnClick,this)),this.container.addClass("video-open"),8===document.documentMode){var r=null;a.parent().find(".js-img-src").length?r=a.parent().find(".js-img-src"):a.closest("figure").find(".s-img-mo").length&&(r=a.closest("figure").find(".s-img-mo")),r.length&&r.eq(0).hasClass("s-img-mo")&&r.eq(0).removeClass("s-img-mo")}o.trigger("bgMp4Ready",s)},getScene7Path:function(e,i){var o=t("#gnbRunmodeInfo"),s=t("#scene7domain").val(),a=e||"",n="";if(o.length)if("qa"===o.val()||"live"===o.val()){n=a.replace("/content/dam/samsung/",s+"p5/"),n=n.replace("/is/image/","/is/content/");var r=i.attr("data-vid-data").toString();r=r.replace(a,n),i.attr("data-vid-data",r)}else n=a;else n=a;return n}}}(),t(function(){t.each(["show","hide"],function(e,i){var o=t.fn[i];t.fn[i]=function(){return this.trigger("aem_"+i),o.apply(this,arguments)}}),s.video.init(t("body"))})}(window,window.$,window.jQuery),function(e,t){"use strict";"undefined"==typeof e.smg&&(e.smg={}),"undefined"==typeof e.smg.aem&&(e.smg.aem={}),"undefined"==typeof e.smg.aem.components&&(e.smg.aem.components={}),"undefined"==typeof e.smg.aem.components.video&&(e.smg.aem.components.video={});var i=e.smg.aem.components.video;i.mp4AutoPlay=function(){var i={body:"body",evt:{connect:{},responsiveMgr:{responsiveChange:"responsiveChange"}}},o={getObjectInfo:function(){return{responsiveName:this.responsiveName,device:this.device}},init:function(){this.constants(),this.bindEvts(),this.defSetup()},constants:function(){this.device={mobile:{support:!0,name:"mobile",width:768},tablet:{support:!1,name:"tablet",width:1280},desktop:{support:!0,name:"desktop"}},this.evt=i.evt.responsiveMgr},bindEvts:function(){this.resizeListener()},defSetup:function(){this.responsiveChange()},resizeListener:function(){t(e).on("resize",t.proxy(this.responsiveChange,this))},responsiveChange:function(){var o,s=e.document,a=e.innerWidth||s.documentElement.clientWidth||s.body.clientWidth;if(this.device.mobile.support&&a<=this.device.mobile.width)o=this.device.mobile.name;else if(this.device.tablet.support&&a<=this.device.tablet.width)o=this.device.tablet.name;else{if(!this.device.desktop.support)return;o=this.device.desktop.name}var n={responsiveName:""};this.responsiveName?this.responsiveName!==o&&(this.responsiveName=o,n.responsiveName=this.responsiveName,t(i.evt.connect).trigger(this.evt.responsiveChange,n)):(this.responsiveName=o,n.responsiveName=this.responsiveName,t(i.evt.connect).trigger(this.evt.responsiveChange,n))}},s={init:function(){this.orientationchangeListener()},orientationchangeListener:function(){t(e).on("orientationchange",function(i){t(e).trigger("resize.mp4AutoPlay")})}},a={init:function(){this.setElmts(),this.videos&&(s.init(),o.init(),this.defSetup(),this.bindEvts())},setElmts:function(){var e=this;this.videos=null,t(".mp4-video").each(function(i){var o=t(this),s=o.data("vid-data");"true"===s.scrollPlay&&(e.videos=e.videos?e.videos.add(t("#"+s.divID).find("video")):t("#"+s.divID).find("video"),"true"===s.playOnce&&e.videos.eq(i).data("play-once",!0))}),this.playStatus=[]},bindEvts:function(){this.responsiveListener(),this.videos.each(function(e){var i=t(this);i.on("loadedmetadata",function(){i.attr("data-loaded-metadata",!0),a.matching()})})},defSetup:function(){this.responsiveSupport()},responsiveListener:function(){t(i.evt.connect).on(i.evt.responsiveMgr.responsiveChange,t.proxy(this.responsiveSupport,this))},triggerResponse:function(){t(i.evt.connect).trigger(i.evt.responsiveMgr.responsiveChange)},support:{mobile:!1,desktop:!0},responsiveSupport:function(){var e=this,t=o.getObjectInfo(),i=function(t){t?(e.bindResizeListener(),e.bindScrollListener()):(e.unbindResizeListener(),e.unbindScrollListener())};switch(t.responsiveName){case t.device.mobile.name:i(this.support.mobile);break;case t.device.desktop.name:i(this.support.desktop)}},bindScrollListener:function(){t(e).off("scroll.mp4AutoPlay").on("scroll.mp4AutoPlay",t.proxy(this.matching,this))},bindResizeListener:function(){t(e).off("scroll.mp4AutoPlay").on("resize.mp4AutoPlay",t.proxy(this.matching,this))},unbindScrollListener:function(){t(e).off("scroll.mp4AutoPlay",t.proxy(this.matching,this))},unbindResizeListener:function(){t(e).off("resize.mp4AutoPlay",t.proxy(this.matching,this))},matching:function(){var i=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,o=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+i,s=this;this.videos.each(8===document.documentMode?function(a){var n=t(this),r=n.outerHeight(),d=n.offset().top,c=d+r;c>=i&&o>=d?s.playStatus[a]||e.videojs&&(s.playStatus[a]=!0):s.playStatus[a]&&e.videojs&&(s.playStatus[a]=!1)}:function(e){var a=t(this),n=a.outerHeight(),r=a.offset().top,d=r+n;a.data("play-once")&&s.playStatus[e]||(d>=i&&o>=r?s.playStatus[e]||a.data("loaded-metadata")&&(a[0].currentTime=0,a[0].play(),s.playStatus[e]=!0):s.playStatus[e]&&a.data("loaded-metadata")&&(a[0].pause(),s.playStatus[e]=!1))})},stateChangeListener:function(){t(".ma-g-c-halftext .ma-g-c-halftext__video .s-video").each(function(e,t){t.attachEvent("playStateChange",function(){if(2===t.PlayState){var e=1e3*Math.floor(t.Duration);setTimeout(function(){t.pause()},e)}})})}},n=function(e){(this.container=e).size()&&a.init()};return{init:n,videoManager:a}}(),t(function(){t("body").hasClass("touch-device")||i.mp4AutoPlay.init(t("body"))})}(window,window.jQuery);
function onBcVideoSize(){var e=$(bccDiv).parent().width(),a=$(bccDiv).parent().height();bcCLog("onBcVideoSize width:"+e+" / height:"+a),bccModExp&&"html"===bccModExp.experience.type&&bccModExp.setSize(e,a)}function bccTemplateLoaded(e){bcCLog("]]bccTemplateLoaded"),bcBrowser?(bccModVP=brightcove.getExperience(e).getModule(APIModules.VIDEO_PLAYER),bccModExp=brightcove.getExperience(e).getModule(APIModules.EXPERIENCE)):(bccModVP=brightcove.api.getExperience(e).getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER),bccModExp=brightcove.api.getExperience(e).getModule(brightcove.api.modules.APIModules.EXPERIENCE)),bccModVP.addEventListener(BCMediaEvent.CHANGE,onBccVideoLoad),bccModVP.addEventListener(BCMediaEvent.BEGIN,onBccVideoReady),bccModVP.addEventListener(BCMediaEvent.PLAY,onBccVideoPlay),bccModVP.addEventListener(BCMediaEvent.STOP,onBccVideoStop)}function onDFXPStyle(e){bcCLog("]]onDFXPStyle")}function onBccVideoLoad(e){bcCLog("]]onBccVideoLoad"),bccStatusCcFlag[e.media.id]=!1,null!=e.media.captions&&(bccStatusCcFlag[e.media.id]=!0)}function onBccVideoReady(e){if(bcCLog("]]onBccVideoReady"),0==e.media.lineupId)bcjQuery("#myExperience"+e.media.id).length&&(bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").attr("nowVideo",e.media.id),null!=e.media.captions&&bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").find(".bc-cc").attr("tabindex","0"),bccStatusCcFlag[e.media.id]?bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("over").addClass("on"):bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("on").removeClass("over"));else{{brightcove.getExperience("myExperience"+e.media.lineupId).getModule(APIModules.VIDEO_PLAYER)}null!=e.media.captions&&(bccStatusCcFlag[e.media.id]=!0),bcjQuery("#myExperience"+e.media.lineupId).length&&(bcjQuery("#myExperience"+e.media.lineupId).parents(".bc-cplayer-control-area").attr("nowVideo",e.media.id),null!=e.media.captions&&bcjQuery("#myExperience"+e.media.lineupId).parents(".bc-cplayer-control-area").find(".bc-cc").attr("tabindex","0"),bccStatusCcFlag[e.media.lineupId]?bcjQuery("#myExperience"+e.media.lineupId).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("on").addClass("over"):bcjQuery("#myExperience"+e.media.lineupId).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("over").addClass("on"))}}function onBccVideoPlay(e){bcCLog("]] onBccVideoPlay "+e.media.id);var a=bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").attr("id").split("bc-cplayer-control-area_");bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").find(".play").removeClass("play").addClass("pause").attr({title:bccMsg.text_02,id:"pause-"+a[1]}).text(bccMsg.text_02)}function onBccVideoStop(e){bcCLog("]] onBccVideoStop "+e.media.id);var a=bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").attr("id").split("bc-cplayer-control-area_");bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").find(".pause").removeClass("pause").addClass("play").attr({title:bccMsg.text_01,id:"play-"+a[1]}).text(bccMsg.text_01)}function brightcoveBccPlayerLayer(e,a,t,c,r,o){bcjQuery("#"+e).bcChromePlayer(a,t,c,r,o),bcjQuery("#"+e).attr("style","width:"+c+"; height:"+r+";position:absolute;top:0px;bottom:0px;right:0px;left: 0px;"),area=bcjQuery("#"+e).parents(".video-area_5").wrapAll("<div/>").parent(),area.find(".video-area_5").show(),area.find(".brightCoveArea").show(),bcjQuery("body").addClass("video-open"),_video_wrap_5=area.find(".video-wrap_5");var d=Math.max(0,(bcjQuery(window).height()-_video_wrap_5.outerHeight())/2+bcjQuery(window).scrollTop()),n=Math.max(0,(bcjQuery(window).width()-_video_wrap_5.outerWidth())/2+bcjQuery(window).scrollLeft());_video_wrap_5.css({left:n+"px",top:d+"px"}).show().focus()}function bccLayerClose(e){var a=bcjQuery("#"+bcjQuery(e).data(void 0===bcjQuery(e).data("div-id")?"video-id":"div-id")),t=a.closest(".video-area_5"),c=(a.closest(".video-wrap"),!1);if(window.videojs){var r=a.find(".video-js").attr("id");r&&videojs(document.getElementById(r)).dispose()}t.hide(0),a.html(""),$.each(bcjQuery(".video-area_5"),function(){return $(this).is(":visible")?(c=!0,!1):void 0}),bcjQuery(".video-wrap .vjs-big-play-button").focus(),c||(bcjQuery("body").removeClass("video-open"),bcjQuery("body").removeClass("video-layer-open"))}function brightcoveBc5PlayerLayer(e,a,t,c,r,o,d,n){if(!bcjQuery("body").hasClass("video-layer-open")){bcjQuery("#"+a).bcHtml5Player(e,t,c,r,o,d,n),area=bcjQuery("#"+a).parents(".video-area_5").wrapAll("<div/>").parent(),area.find(".video-area_5").show(),area.find(".brightCoveArea").show(),bcjQuery("body").addClass("video-open"),_video_wrap_5=area.find(".video-wrap_5");var l=Math.max(0,(bcjQuery(window).height()-_video_wrap_5.outerHeight())/2+bcjQuery(window).scrollTop()),i=Math.max(0,(bcjQuery(window).width()-_video_wrap_5.outerWidth())/2+bcjQuery(window).scrollLeft());_video_wrap_5.css({left:i+"px",top:l+"px"}).show().focus()}}function bc5LayerClose(e){var a=bcjQuery("#"+bcjQuery(e).data(void 0===bcjQuery(e).data("div-id")?"video-id":"div-id")),t=a.closest(".video-area_5"),c=(a.closest(".video-wrap"),!1);if(window.videojs){var r=a.find(".video-js").attr("id");r&&videojs(document.getElementById(r)).dispose()}t.hide(0),a.html(""),$.each(bcjQuery(".video-area_5"),function(){return $(this).is(":visible")?(c=!0,!1):void 0}),bcjQuery(".video-wrap .vjs-big-play-button").focus(),c||(bcjQuery("body").removeClass("video-open"),bcjQuery("body").removeClass("video-layer-open"))}function getIeVersion(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var a=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=t.exec(a)&&(e=parseFloat(RegExp.$1))}return e}function bcCLog(e){}var bcc_idx=0,areaLiveTimer,bcjQuery=window.$,bccMsg=new Array,bcBrowser=null;bcBrowser=navigator.userAgent.match(/Android|Mobile|iP(hone|od|ad)|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/)?!1:!0;var bcProtocol=null;bcProtocol="http:"==location.protocol?!0:!1,BcHashMap=function(){this.map=new Array},BcHashMap.prototype={put:function(e,a){this.map[e]=a},get:function(e){return this.map[e]}},window.SITE_CD&&"sec"==window.SITE_CD?(bccMsg.text_01="",bccMsg.text_02=" ",bccMsg.text_03=" ",bccMsg.text_04="",bccMsg.text_05="",bccMsg.text_06="",bccMsg.text_07=" ",bccMsg.text_08=" ",bccMsg.text_09="    ",bccMsg.text_10="   ",bccMsg.text_12="  ",bccMsg.text_13=" ",bccMsg.text_14="",bccMsg.text_20="",bccMsg.text_21="",bccMsg.text_22="",bccMsg.text_23="",bccMsg.text_24=" ",bccMsg.text_25="  "):(bccMsg.text_01="Play",bccMsg.text_02="Pause",bccMsg.text_03="Stop",bccMsg.text_04="Rewind",bccMsg.text_05="Forward",bccMsg.text_06="Mute",bccMsg.text_07="Volume up",bccMsg.text_08="Volume down",bccMsg.text_09="No more video list",bccMsg.text_10="End of brightcove player",bccMsg.text_12="Player content ready",bccMsg.text_13="Previous",bccMsg.text_14="Next",bccMsg.text_20="Closed caption on",bccMsg.text_21="Closed caption off",bccMsg.text_22="No Closed caption",bccMsg.text_23="Caption",bccMsg.text_24="fullscreen",bccMsg.text_25="Non-Fullscreen");var bccStatusCcFlag=new Array,bcChromePlayerData={DEV:{playerId:"2487224303001",playerKey:"AQ~~,AAAA0gEd3vk~,UZmnOpR2YpEfDjzgdcc7b8EnQirJFTfn"},LIVE:{playerId:"2474494486001",playerKey:"AQ~~,AAAA0gHQkRE~,ddRZn78L8shi6Jrn-WVLALuE0paPt520"},GLOBAL:{playerId:"2937405510001",playerKey:"AQ~~,AAACqvvPXZk~,73mGUHxCIIQhsQ1kvmok_IBzGMhHprit"},EG:{playerId:"926210542001",playerKey:"AQ~~,AAAA1vDImsE~,cmf9fQlzDEX60Ap9x_kSo3zfwvzYk9fg"},CN:{playerId:"926210307001",playerKey:"AQ~~,AAAA1vc34eE~,kItzOdTai_fzjaKuIxIg8DV223Iq6cvi"},PK:{playerId:"926251521001",playerKey:"AQ~~,AAAA1vSqgEE~,wOnUwNgORxX5Lx7vj1pm6XhYLoDcEM4_"},LEVANT:{playerId:"926251519001",playerKey:"AQ~~,AAAA1vSqfFk~,wpJou2CBGiTHSgG-P42Xe63FMRD6TyXo"},CO:{playerId:"926210505001",playerKey:"AQ~~,AAAA1vDIWFk~,-osp2UwmJkSayIBzpe-fiWWjFetpHFs9"},SG:{playerId:"926210509001",playerKey:"AQ~~,AAAA1vDIYCk~,zKw77YEpCQO0r9qz-sEytHx3lFErk4ss"},VN:{playerId:"926196171001",playerKey:"AQ~~,AAAA1u88Qek~,6VFss6TVSqtCkDpG6h2Uh4I4PD0GLZLq"},US:{playerId:"924336519001",playerKey:"AQ~~,AAAA1vSqNgk~,TETY7sgK5kwNobvkqdSXY02JjkGuDmIc"},HR:{playerId:"926210332001",playerKey:"AQ~~,AAAA1vc4CPE~,snrDcnWtt4VES1PU9mYW_mbeNmOz1bG8"},RS:{playerId:"926210534001",playerKey:"AQ~~,AAAA1vDIiyE~,1l625wgL4J5inOw1R1uIHQ2AI0mBhVFr"},SI:{playerId:"3855497514001",playerKey:"AQ~~,AAADga3gQqE~,ighS4vLAqw7aEJSfMheNEQNl3lgkikCf"},AT:{playerId:"924336545001",playerKey:"AQ~~,AAAA1vSqZOk~,hp4Wt3zVjWc2whDUvqDH9CGlKil8OyNx"},CH_FR:{playerId:"926251507001",playerKey:"AQ~~,AAAA1vSqaNE~,EQ78wh6EYWdP_mwBFB3IbXxs7JLIAwqv"},CH:{playerId:"926210526001",playerKey:"AQ~~,AAAA1vDIf2k~,iVoVKzdFbeHQvN-Pf_SvWToP7TwoRgPA"},AR:{playerId:"926210303001",playerKey:"AQ~~,AAAA1vc32hE~,GuUbplf11bKwpRy4EAYNGiU2J4b_cVdU"},PY:{playerId:"4456565107001",playerKey:"AQ~~,AAAEDVSMUYE~,3yoQrflDnSf82zbeen7sVq1mwoAwGDlQ"},UR:{playerId:"4456565111001",playerKey:"AQ~~,AAAEDVSMWVE~,nHKELpWrD9QyFGjGFsIleAdaHKQNcHX7"},AU:{playerId:"926210511001",playerKey:"AQ~~,AAAA1vDIZBE~,8Qxfn_gGqXQWmvXHrUz4r05jOuPCLzUa"},NZ:{playerId:"926196169001",playerKey:"AQ~~,AAAA1u88PgE~,GmWzarV2MErCAUzi5b8t5EKcBnk6E8yV"},EE:{playerId:"926251513001",playerKey:"AQ~~,AAAA1vSqcKE~,pLfhI1aol64198gOZquO36bmCItlna-V"},LV:{playerId:"926210326001",playerKey:"AQ~~,AAAA1vc4ASE~,axBlmjdcgk_FU76yezkFgm_XktjFJsfJ"},LT:{playerId:"926251515001",playerKey:"AQ~~,AAAA1vSqdIk~,FfPsfAjtZCPUWwnff6eUCf5dSEQmz-kJ"},BE:{playerId:"926196191001",playerKey:"AQ~~,AAAA1u88bOE~,jLxL4xeWUGVW0JUPGna3w8uSmCNmlptZ"},BE_FR:{playerId:"926210528001",playerKey:"AQ~~,AAAA1vDIg1E~,MkoiW9FH-nnG4ZUl3DOpygEFQNnhP-uI"},NL:{playerId:"926196193001",playerKey:"AQ~~,AAAA1u88cMk~,aJXrrmXqcmSiDmFHqX1rl8jwuB1XCwGA"},JP:{playerId:"926210515001",playerKey:"AQ~~,AAAA1vDIa-E~,E6N35iQp8jDwx86w-tUgYVHCLPSCiARX"},sec:{playerId:"926196177001",playerKey:"AQ~~,AAAA1u88TaE~,H1f81zC57BUdqLYj69bNcK1mnWR6NNTp"},CA:{playerId:"924384217001",playerKey:"AQ~~,AAAA1vc30kE~,cbXkIMRl2tur-XePkk1yLTgjdi2k0-MS"},CA_FR:{playerId:"924336521001",playerKey:"AQ~~,AAAA1vSqOfE~,sZkSFUdTS6eUK64OErxusx96DKJNIbJi"},CL:{playerId:"924336527001",playerKey:"AQ~~,AAAA1vSqRak~,EnrWLy5bVf2utzcUFuidrHPW6lZMMy2X"},CZ:{playerId:"926210321001",playerKey:"AQ~~,AAAA1vc3-VE~,q0UeQmlKWUjB8EFbz1b9FLjEfqJ84u3l"},SK:{playerId:"924336543001",playerKey:"AQ~~,AAAA1vSqYQE~,ri_moVr2zWAxhVn98njnuti412uSoK-x"},BR:{playerId:"926210501001",playerKey:"AQ~~,AAAA1vDIUIk~,LHrzhhIkh5_rkM4qIaeYSJ61GOZoclmv"},FR:{playerId:"924336541001",playerKey:"AQ~~,AAAA1vSqXRk~,4Gh2JxitIlZ5MuGnkuyrS7FZ60fKqZ6m"},GR:{playerId:"926196187001",playerKey:"AQ~~,AAAA1u88YSk~,vxFU_YgYcCL89X9Qwe1s7rnR0bJNIE-M"},DE:{playerId:"924336537001",playerKey:"AQ~~,AAAA1vSqVUk~,Ij_lFfu7jRUnSOIVjtgLuFNXLbFsKk9w"},HU:{playerId:"926210309001",playerKey:"AQ~~,AAAA1vc35ck~,MU-_2j7kl_JrhjFN8O5yPCelm0A90oNf"},HK:{playerId:"924336535001",playerKey:"AQ~~,AAAA1vSqUWE~,2V3Gfvyx2SIdZnODa2GsXGASlNJYJB_E"},HK_EN:{playerId:"926196179001",playerKey:"AQ~~,AAAA1u88UYk~,XDIlg6GcmdvGAbMXEj4cy62aA8fWZ7Rg"},IT:{playerId:"926196185001",playerKey:"AQ~~,AAAA1u88XUE~,fft8jN67dHT3bQ4T-YR299dVUUW2Wq13"},ID:{playerId:"926210513001",playerKey:"AQ~~,AAAA1vDIZ_k~,nr0_v_QukmUrfpAfwd6syDNAutP_lYjB"},KZ_UR:{playerId:"926210334001",playerKey:"AQ~~,AAAA1vc4DNk~,qbZrUsiJtsTqPJmQELpgpisg96XC54ai"},LATIN:{playerId:"926196165001",playerKey:"AQ~~,AAAA1u88Ohk~,v-_KXguDfE5YT_ue64VtxZK0J-pcj-0C"},LATIN_EN:{playerId:"924336525001",playerKey:"AQ~~,AAAA1vSqQcE~,BgcEcsklFLovEoVnOt9RPKJB5s7msCEw"},VE:{playerId:"926210503001",playerKey:"AQ~~,AAAA1vDIVHE~,OedBXOLjIJrH7dJYXr4eGBbyQ_PYA65j"},MX:{playerId:"924336523001",playerKey:"AQ~~,AAAA1vSqPdk~,0hHIlIMEKBPQrwDwbHYwzm2SiuZ5pER1"},N_AFRICA:{playerId:"926251523001",playerKey:"AQ~~,AAAA1vSqhCk~,tjW3A2k5zkQthYBV9Dwp5Qie2wZvGoF-"},DK:{playerId:"926210311001",playerKey:"AQ~~,AAAA1vc36bE~,FiLtJnouWb44elliFsUPMk5UTMEBLc10"},FI:{playerId:"926210524001",playerKey:"AQ~~,AAAA1vDIe4E~,lKlcTymj-FAv5_CC2dxasn2HZF-vT7a1"},NO:{playerId:"924336539001",playerKey:"AQ~~,AAAA1vSqWTE~,NIYuVb4Yj1W-Vy50_tEzbsb7GSNBGjUu"},SE:{playerId:"926210522001",playerKey:"AQ~~,AAAA1vDId5k~,wl2s5WAZVZQm20Pfrgap3hb8Pb_GhmS2"},PT:{playerId:"926210317001",playerKey:"AQ~~,AAAA1vc38YE~,E3RfSFCBgebLJXrs8gqIapjCZAgtmC6W"},PH:{playerId:"926196175001",playerKey:"AQ~~,AAAA1u88Sbk~,WIP_y9MCYC_2l3T_Wm3nrg1cmQbpBrij"},PL:{playerId:"926210319001",playerKey:"AQ~~,AAAA1vc39Wk~,VQ1_fYOWigV90NMn7kDlwSpB5fr6HAHC"},PE:{playerId:"926210507001",playerKey:"AQ~~,AAAA1vDIXEE~,y0ET89E0lhD6DaPPu4E_3SyvFnevN5ut"},RU:{playerId:"926196195001",playerKey:"AQ~~,AAAA1u88dLE~,N1tbZZomcgAsb_PfXERrXa4VDTt73bow"},BG:{playerId:"926210323001",playerKey:"AQ~~,AAAA1vc3_Tk~,mISXqRtx5TCJSuRDXFAyj0wgMMFj3s4q"},RO:{playerId:"926196189001",playerKey:"AQ~~,AAAA1u88aPk~,81hqJ9oLX0Eod2XeyfzxgoAGCbN2YRcH"},ES:{playerId:"926210519001",playerKey:"AQ~~,AAAA1vDIc7E~,HUeD8rCqt9P3_ICbpxGIpFVTu2PVdhqe"},TW:{playerId:"926210305001",playerKey:"AQ~~,AAAA1vc33fk~,LaoPq8X-3PefH08VUXN2EctTZqxgCTWv"},TR:{playerId:"926196201001",playerKey:"AQ~~,AAAA1u88gGk~,tmBYuNAdVdgtccZMqQiemGQppaBGQ4_z"},UA:{playerId:"926210538001",playerKey:"AQ~~,AAAA1vDIkvE~,i2xeGsQLR673hBz63dg10Ip937VIAfWE"},UA_RU:{playerId:"926210536001",playerKey:"AQ~~,AAAA1vDIjwk~,A2lOutVBN3UbEUcePOvvpHzT5fzY9DPx"},IE:{playerId:"926196183001",playerKey:"AQ~~,AAAA1u88WVk~,uCEaQuZ8nzgtayb6cqEcyT1RHclkJG_9"},UK:{playerId:"926196181001",playerKey:"AQ~~,AAAA1u88VXE~,x0_28B_6Zvk93nAEavFzIk_lfMgOCrDt"},AE:{playerId:"926251517001",playerKey:"AQ~~,AAAA1vSqeHE~,sL-qYGp5vDs9lvQC58LpmsrAdgrnDt-w"},AE_ARABIC:{playerId:"926196197001",playerKey:"AQ~~,AAAA1u88eJk~,S0yiLpxyHQcCakj-7HKFJS5XjwgkAXtx"},IN:{playerId:"926210517001",playerKey:"AQ~~,AAAA1vDIb8k~,lUaeNA43HwiHGbg_2NeUs3hiAJaenQDK"},MY:{playerId:"926196173001",playerKey:"AQ~~,AAAA1u88RdE~,kPQQqwrYdp4bxmwR-nZmYOOY7ci7Pwgy"},ZA:{playerId:"2573241961001",playerKey:"AQ~~,AAACVrpFDvk~,goA5RG4suySVUwJKOuX3yfgABbX2fkrD"},AFRICA_EN:{playerId:"926210336001",playerKey:"AQ~~,AAAA1vc4EME~,Mr9Hje7LqNftSlNIaKpcSkhnqcpbbP89"},AFRICA_FR:{playerId:"926251525001",playerKey:"AQ~~,AAAA1vSqiBE~,Qp5WvJFrHi_K02EFeBsQgtJ5MwsmpUMX"},AFRICA_PT:{playerId:"926196207001",playerKey:"AQ~~,AAAA1u88iDk~,ccsEg19-CbJkk_zJ9c6aFicBsNvJsIn8"},IRAN:{playerId:"926210340001",playerKey:"AQ~~,AAAA1vc4GJE~,YM3AHViBVn9RFzwbP1jQ_aE5oeVo1AqU"},IL:{playerId:"926210540001",playerKey:"AQ~~,AAAA1vDIltk~,IPAPGgmj_6fc11IflU32LkXpdx93feNU"},SA:{playerId:"926196199001",playerKey:"AQ~~,AAAA1u88fIE~,O2m1MLoG_muG7KThKuLs8ABApukPd0cJ"},SA_EN:{playerId:"2573241962001",playerKey:"AQ~~,AAACVrpFEuE~,IGsISVlCgs-KnLEUg3gHYj5oez9ODaU5"},TH:{playerId:"924336529001",playerKey:"AQ~~,AAAA1vSqSZE~,QkYUAXu3lHXJWLnyQOCo2M0yp2LeVm6X"}},bccPlayer,bccModVP,bccModExp,bccModCc,bccDiv,bcChromePlayer=new function(){var bccPlayerMap=new BcHashMap,target=this;this.myBccplayerData,this.bccPlayerData,this.onChangeCC=new Object,function($){$.fn.bcChromePlayer=function(alais){var bcExperiencesAPI;bcExperiencesAPI=bcProtocol?"//admin.brightcove.com/js/BrightcoveExperiences.js":"//sadmin.brightcove.com/js/BrightcoveExperiences.js";var bcc=bcChromePlayer,arr=Array.prototype.slice.call(arguments,1);bcc.checkNull(arr[1])&&(arr[1]="100%"),bcc.checkNull(arr[2])&&(arr[2]="100%"),bcc.checkNull(arr[3])&&(arr[3]="false"),alais=alais.toUpperCase();var bccType="LIVE"==alais?"videoList":"videoPlayer";if(myBccplayerData=eval("bcChromePlayerData."+alais),"undefined"!=typeof myBccplayerData){bccPlayerData={alais:alais,playerId:myBccplayerData.playerId,playerKey:myBccplayerData.playerKey,videoId:arr[0],width:arr[1],height:arr[2],autoplay:arr[3],type:bccType},bcCLog(bccPlayerData),bccPlayerMap.put(bccPlayerData.videoId,bccPlayerData),bccDiv="#myExperience"+bccPlayerData.videoId,arr=[$(this)].concat(arr);var s=document.createElement("script");s.type="text/javascript",s.src=bcExperiencesAPI,s.readyState?(document.getElementsByTagName("head")[0].appendChild(s),s.onreadystatechange=function(){if("8.0"==getIeVersion()){if("loaded"==s.readyState||"complete"==s.readyState)return s.onreadystatechange=null,bcc.run.apply(bcc,arr)}else if("loaded"==s.readyState||"complete"==s.readyState)return bcc.run.apply(bcc,arr)}):(document.body.appendChild(s),s.onload=function(){return bcc.run.apply(bcc,arr)})}}}(bcjQuery),this.run=function(e,a){var t=bccPlayerMap.get(a);if(e.html(this.markup(a)).show(),e.attr("style","position:absolute;width:"+t.width+";height:"+t.height+";top:0px;bottom:0px;right:0px;left:0px;"),brightcove.createExperiences(),bcBrowser)e.find("object").bccPlayerControls(t.videoId,t.width,t.height);else{var c,r,o,d=".bc-cplayer-area{display: block; position: relative; padding-top: 56.25%;}";o=document.getElementsByTagName("head")[0],document.createStyleSheet?(c=document.createStyleSheet(),c.cssText=d):(r=document.createElement("style"),r.type="text/css",r.styleSheet?r.styleSheet.cssText=d:r.appendChild(document.createTextNode(d)),o.appendChild(r))}return-1!=getIeVersion()&&e.children("span").css("display",""),e},this.markup=function(e){var a=bccPlayerMap.get(e),t="";return t+='<object id="myExperience'+a.videoId+'" class="BrightcoveExperience">',t+='<param name="bgcolor" value="#FFFFFF" />',t+='<param name="width" value="'+a.width+'" />',t+='<param name="height" value="'+a.height+'" />',t+='<param name="playerID" value="'+a.playerId+'" />',t+='<param name="playerKey" value="'+a.playerKey+'" />',t+='<param name="wmode" value="transparent">',t+='<param name="isVid" value="true" />',t+='<param name="isUI" value="true" />',t+='<param name="autoStart" value="'+a.autoplay+'" />',t+='<param name="includeAPI" value="true" />',t+='<param name="templateLoadHandler" value="myTemplateLoaded" />',t+='<param name="dynamicStreaming" value="true" />',t+='<param name="@'+a.type+'" value="'+a.videoId+'" />',bcProtocol||(t+='<param name="secureConnections" value="true" />',t+='<param name="secureHTMLConnections" value="true" /> '),t+="</object>"},this.getValue=function(e){var a=[];return null==a?null:"string"==typeof e?a[e]:a},this.setValue=function(e,a){var t=[];for(var c in a)t[c]=a[c]},this.checkNull=function(e){return null==e||""==e}};bcjQuery(window).resize(function(){void 0!=bccModExp&&onBcVideoSize()}),function(e){e.fn.bccPlayerControls=function(a,t,c){var r,o,d,n=".bc-cplayer-area{display: block; position: relative; max-width: 100%;padding-top: 56.25%;}.bc-cplayer-control-area{overflow:hidden}.bc-cplayer-control{position:relative;opacity:0.01;z-index:0;background-image:url(/common/brightcove/img/bg_panel.gif);width:100%;height:40px;overflow:hidden}.bc-cplayer-control.show {opacity:1 !important;z-index:4000 !important;}.bc-cplayer-control .leftPanel {float:left}.bc-cplayer-control .rightPanel {float:right}.bc-cplayer-container .video{position:relative;	top:-40px;z-index:3000;width:100%;height:100%}.bc-cplayer-control button {float:left;width:50px;height:40px;overflow:hidden;padding-top:40px;font-family: Arial, verdana, sans-serif;color: #000;font-size: 1.1em;background-repeat: no-repeat; border:none;}.bc-cplayer-control button:focus{border:white solid 1px}.bc-cplayer-control .rewind {background-image: url(/common/brightcove/img/btn_rewind.gif); }    .bc-cplayer-control .play {background-image: url(/common/brightcove/img/btn_play.gif);}    .bc-cplayer-control .pause {background-image: url(/common/brightcove/img/btn_pause.gif); }    .bc-cplayer-control .forward {background-image: url(/common/brightcove/img/btn_forward.gif); }.bc-cplayer-control .mute {background-image: url(/common/brightcove/img/btn_volon.gif); }.bc-cplayer-control .volume-down {background-image: url(/common/brightcove/img/btn_voldown.gif); }.bc-cplayer-control .volume-up {background-image: url(/common/brightcove/img/btn_volup.gif); }.bc-cplayer-control .muted{background-image: url(/common/brightcove/img/btn_volmute.gif);}.bc-cplayer-control .rightPanel a {overflow:hidden;display:inline-block;float:left;height:40px;}.bc-cplayer-control .rightPanel button.bc-cc {width:34px;background-image:url(/common/brightcove/img/btn_bc_cc.png);}.bc-cplayer-control .rightPanel button.bc-cc.over {background-image:url(/common/brightcove/img/btn_bc_cc_over.png) !important;}.bc-cplayer-control .rightPanel button.bc-cc.on {background-image:url(/common/brightcove/img/btn_bc_cc_on.png) !important;}.end-of-bc{overflow:hidden;width:0px;height:0px;position:absolute}";d=document.getElementsByTagName("head")[0],document.createStyleSheet?(r=document.createStyleSheet(),r.cssText=n):(o=document.createElement("style"),o.type="text/css",o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n)),d.appendChild(o));var l={id:"bc"+bcc_idx},i=null,y=null,p=null,s=null,u=0,b=.1,I=!1,A=e(this),v=A.attr("width"),m=A.attr("height"),g=e("<div />",{id:"bc-cplayer-control-area_"+bcc_idx}).addClass("bc-cplayer-control-area");"undefined"!=typeof v&&g.width(v).height(m);var h=e('<div class="bc-cplayer-container" style="width:'+t+";height:"+c+'"/>'),f=e('<div class="video" />'),C=e("<div />").addClass("bc-cplayer-control"),E=e("<div />").addClass("leftPanel"),_=e("<div />").addClass("rightPanel"),S=e("<div />",{"class":"end-of-bc"}).html("<a href='#' onclick='return false;'>"+bccMsg.text_10+"</a>");A.after(g),g.append(h),C.append(E),C.append(_),h.append(C),h.append(f),A.appendTo(f),g.after(S),g.parent("div").length&&"100%"==m&&g.parent("div").height("100%");var x=function(){return i?i:(i=brightcove.getExperience("myExperience"+a).getModule(APIModules.VIDEO_PLAYER),y=brightcove.getExperience("myExperience"+a).getModule(APIModules.MENU),p=brightcove.getExperience("myExperience"+a).getModule(APIModules.CAPTIONS),s=brightcove.getExperience("myExperience"+a).getModule(APIModules.EXPERIENCE),_chromelessPlayer=s.getElementByID("videoPlayer"),_chromelessControls=_chromelessPlayer.getControls(),i)},j=function(a,t){var c=[a,l.id].join("-"),r=e("<button />").append(t).addClass(a).attr({title:t,id:c});return r},Q=function(){var e=x();return y.closeMenuPage(),e.play(),!1},M=function(){var e=x();return e.isPlaying()?e.pause():y.closeMenuPage(),!1},k=function(){var e=x(),a=e.getVolume();return a?(u=a,V.addClass("muted"),e.setVolume(0),e.mute()):(V.hasClass("muted")&&V.removeClass("muted"),e.setVolume(u?u:b)),!1},w=function(){var e=x(),a=e.getVolume();return 10*a+10*b>10?(u=1,e.setVolume(u)):(u=10*a+10*b,e.setVolume(Math.round(u)/10)),V.hasClass("muted")&&V.removeClass("muted"),!1},P=function(){var e=x(),a=e.getVolume();return 0>=10*a-10*b?(u=0,V.addClass("muted"),e.setVolume(u),e.mute()):(u=10*a-10*b,e.setVolume(Math.round(u)/10)),!1},B=j("play",bccMsg.text_01).attr({"aria-live":"assertive"}).bind({"click.fe_brightcove":function(){e(this).hasClass("play")?(e(this).removeClass("play").addClass("pause").attr({title:bccMsg.text_02,id:"pause-"+l.id}).text(bccMsg.text_02),Q()):(e(this).removeClass("pause").addClass("play").attr({title:bccMsg.text_01,id:"play-"+l.id}).text(bccMsg.text_01),M())},"focusin.fe_brightcove":function(){C.addClass("show")},"keydown.fe_brightcove":function(e){9===e.keyCode&&e.shiftKey&&C.removeClass("show")}});B.appendTo(E);var V=j("mute",bccMsg.text_06).bind("click.fe_brightcove",function(){k()}),L=j("volume-down",bccMsg.text_08).bind("click.fe_brightcove",function(){P()}),K=j("volume-up",bccMsg.text_07).bind({"click.fe_brightcove":function(){w()},"focusin.fe_brightcove":function(){C.addClass("show")},"keydown.fe_brightcove":function(e){9!==e.keyCode||e.shiftKey||(C.removeClass("show"),I=!0,S.find("a").trigger("focus"))}}),N=e("<button />",{"class":"bc-cc",tabindex:"-1"});N.text(bccMsg.text_22),N.appendTo(_);var H=!1;N.unbind("click.fe_brightcove").bind("click.fe_brightcove",function(){{var a=e(".bc-cplayer-control-area").attr("nowvideo");x()}return bccStatusCcFlag[a]?(N.hasClass("over")?(H=!1,N.removeClass("over").addClass("on").attr({title:bccMsg.text_21}).text(bccMsg.text_21)):(H=!0,N.removeClass("on").addClass("over").attr({title:bccMsg.text_20}).text(bccMsg.text_20)),p.setCaptionsEnabled(H),_chromelessControls.setVisible(1==H?!1:!0)):N.attr({title:bccMsg.text_22}).text(bccMsg.text_22),!1}),V.appendTo(_),L.appendTo(_),K.appendTo(_);var R=navigator.userAgent.toLowerCase(),U=!1;return U="Netscape"==navigator.appName&&-1!=navigator.userAgent.search("Trident")||-1!=R.indexOf("msie")?!0:!1,S.find("a").bind(1==U?"onfocusin.fe_brightcove":"focusin.fe_brightcove",function(){return I?void(I=!1):(K.trigger("focus"),I=!1,!1)}),S.find("a").bind("keydown.fe_brightcove",function(e){return 9===e.keyCode&&e.shiftKey?(K.trigger("focus"),!1):void 0}),bcc_idx++,!1}}(bcjQuery),bcjQuery(document).ready(function(){"undefined"==typeof APIModules&&$("body").append(bcProtocol?'<script type="text/javascript" src="//admin.brightcove.com/js/APIModules_all.js"></script>':'<script type="text/javascript" src="//sadmin.brightcove.com/js/APIModules_all.js"></script>'),bcjQuery(document).on("click",".brightcove-bcc-btn-close",function(){bccLayerClose(this)})});var bc5playerData={DEV:{accountId:"901961867001",playerId:"Skefq0fEUZ"},DEV2:{accountId:"901961867001",playerId:"Vylv7fdWKl"},LIVE:{accountId:"901973578001",playerId:"rkHiJmE8b"},GLOBAL:{accountId:"2933392367001",playerId:"HyinAQ4IW"},EG:{accountId:"923162680001",playerId:"r1Wa9zBQ8Z"},CN:{accountId:"923270636001",playerId:"SylXp4rXLb"},PK:{accountId:"923227816001",playerId:"rkx4vzBm8b"},LEVANT:{accountId:"923227815001",playerId:"BkuGfH7IZ"},CO:{accountId:"923162663001",playerId:"H1R4Pm7UW"},SG:{accountId:"923162665001",playerId:"Syz3FXQLW"},VN:{accountId:"923136705001",playerId:"ryMuHjmm8W"},US:{accountId:"923227797001",playerId:"B1lhu4BX8Z"},HR:{accountId:"923270646001",playerId:"rJ0SpNX8W"},RS:{accountId:"923162676001",playerId:"Skf0W64mUW"},SI:{accountId:"3855502820001",playerId:"ryKYpN7Lb"},AT:{accountId:"923227809001",playerId:"SJqA5VQUb"},CH_FR:{accountId:"923227810001",playerId:"SJH8oEQIW"},CH:{accountId:"923162673001",playerId:"SyIfiVmUZ"},AR:{accountId:"923270634001",playerId:"SkoYw7mLZ"},PY:{accountId:"4455299568001",playerId:"SyZFOmXIZ"},UR:{accountId:"4455299570001",playerId:"ryezNOmXUZ"},AU:{accountId:"923162666001",playerId:"H12xqm7Ub"},NZ:{accountId:"923136704001",playerId:"BJ7brcXm8W"},EE:{accountId:"923227812001",playerId:"rytC3E7LW"},LV:{accountId:"923270644001",playerId:"rylCU2NmLW"},LT:{accountId:"923227813001",playerId:"BkR5nNXUW"},BE:{accountId:"923136716001",playerId:"H1gxqi4Q8b"},BE_FR:{accountId:"923162674001",playerId:"rkERsVX8Z"},NL:{accountId:"923136717001",playerId:"SklAMhEQ8Z"},JP:{accountId:"923162668001",playerId:"H1elEC7Q8W"},SEC:{accountId:"923136708001",playerId:"BJmCHrmIb"},CA:{accountId:"923270632001",playerId:"BJ04MQXLb"},CA_FR:{accountId:"923227798001",playerId:"rkjclX78W"},CL:{accountId:"923227801001",playerId:"Sy8mK7Q8Z"},CZ:{accountId:"923270642001",playerId:"rJ1TKEXLW"},SK:{accountId:"923227808001",playerId:"rylQe94mIb"},BR:{accountId:"923162661001",playerId:"rkrg7XmUW"},FR:{accountId:"923227807001",playerId:"SkXZOV7Ub"},GR:{accountId:"923136713001",playerId:"HJZ0dEmUZ"},DE:{accountId:"923227805001",playerId:"HylzJLVQLW"},HU:{accountId:"923270637001",playerId:"H14LrEQLb"},HK:{accountId:"923227804001",playerId:"S1e6xSr7Ib"},HK_EN:{accountId:"923136709001",playerId:"BJnNrrmLZ"},IT:{accountId:"923136712001",playerId:"rkgapeE78W"},ID:{accountId:"923162667001",playerId:"ryx3c97XUZ"},KZ_UR:{accountId:"923270647001",playerId:"HJZfeBQLZ"},LATIN:{accountId:"923136703001",playerId:"BJxSu7XQUb"},LATIN_EN:{accountId:"923227800001",playerId:"r1WoKH7QIW"},VE:{accountId:"923162662001",playerId:"rJhxEsPMz"},MX:{accountId:"923227799001",playerId:"SJX05MXQUb"},N_AFRICA:{accountId:"923227817001",playerId:"ByImXr78W"},DK:{accountId:"923270638001",playerId:"Hyb1DEQ8W"},FI:{accountId:"923162672001",playerId:"HkUXD4XUZ"},NO:{accountId:"923227806001",playerId:"B1I2PVmLb"},SE:{accountId:"923162671001",playerId:"B1jKIVQ8b"},PT:{accountId:"923270640001",playerId:"SJburdEmUZ"},PH:{accountId:"923136707001",playerId:"r1Mnk67XUZ"},PL:{accountId:"923270641001",playerId:"BkjYdNQUZ"},PE:{accountId:"923162664001",playerId:"rkXuK77UZ"},RU:{accountId:"923136718001",playerId:"BkZBHJrXUW"},BG:{accountId:"923270643001",playerId:"r1cK5EmIW"},RO:{accountId:"923136715001",playerId:"r1gR45NXIZ"},ES:{accountId:"923162670001",playerId:"H1xJrNQUW"},TW:{accountId:"923270635001",playerId:"BywFHHmUZ"},TR:{accountId:"923136721001",playerId:"r175Zrm8Z"},UA:{accountId:"923162678001",playerId:"S1SKkrQIb"},UA_RU:{accountId:"923162677001",playerId:"B1Ba1rX8Z"},IE:{accountId:"923136711001",playerId:"B1DVe4m8Z"},UK:{accountId:"923136710001",playerId:"SycJx4QLW"},AE:{accountId:"923227814001",playerId:"BygNUlrX8b"},AE_ARABIC:{accountId:"923136719001",playerId:"BJjKlS7UZ"},IN:{accountId:"923162669001",playerId:"S1KRCQX8W"},MY:{accountId:"923136706001",playerId:"B1EqjmQIW"},ZA:{accountId:"2571515531001",playerId:"S1fb7VSQUb"},AFRICA_EN:{accountId:"923270648001",playerId:"HJKv7H7UZ"},AFRICA_FR:{accountId:"923227818001",playerId:"SkmimH7LZ"},AFRICA_PT:{accountId:"923136723001",playerId:"S1b8yEBXLb"},IRAN:{accountId:"923270650001",playerId:"r1YRZSmIZ"},IL:{accountId:"923162679001",playerId:"ryloagBXLb"},SA:{accountId:"923136720001",playerId:"HyItbbS7Ub"},SA_EN:{accountId:"2571515532001",playerId:"SJpHbr7Ub"},TH:{accountId:"923227802001",playerId:"ryoyiQXIZ"},AL:{accountId:"5395474900001",playerId:"S1WPmS4Rg"},LB:{accountId:"5359769185001",playerId:"By5uztNAe"},MM:{accountId:"5395474902001",playerId:"BJWPXt4Al"},GCS:{accountId:"1852113008001",playerId:"B1HX3oXbG"},SC:{accountId:"1275380501001",playerId:"rJUZMbBZG"},LED:{accountId:"2172563229001",playerId:"SJEqMbSWM"},UK_CS:{accountId:"5675787969001",playerId:"Hkmjd40bM"},DE_CS:{accountId:"5675787970001",playerId:"ByxCBuECZG"},BE_CS:{accountId:"5675787971001",playerId:"r1SZIVRWf"},BE_FR_CS:{accountId:"5675787972001",playerId:"r16xOECbz"},NL_CS:{accountId:"5675788007001",playerId:"HymXOVAWf"},ACE:{accountId:"5685289444001",playerId:"Byn7wEUzz"},US_CS:{accountId:"5709700875001",playerId:"SJC96gsNf"},CA_FR_CS:{accountId:"5709700876001",playerId:"rye60eiNG"},CA_CS:{accountId:"5709700877001",playerId:"BJJnCxi4z"},MX_CS:{accountId:"5709700878001",playerId:"SyFThbi4G"},BR_CS:{accountId:"5709700879001",playerId:"rypXhbjEf"},LATIN_CS:{accountId:"5709700880001",playerId:"rJ3qnZoVz"},LATIN_EN_CS:{accountId:"5709700881001",playerId:"rJSnnZjNz"},VE_CS:{accountId:"5709700882001",playerId:"HyyTnWo4M"},CO_CS:{accountId:"5709700883001",playerId:"B1sd6ejEf"},AR_CS:{accountId:"5709700884001",playerId:"ByGBCloVz"},CL_CS:{accountId:"5709700885001",playerId:"HyjTClsVf"},PE_CS:{accountId:"5709700887001",playerId:"H1qXpZs4z"},SG_CS:{accountId:"5709700888001",playerId:"BywY6goNz"},AU_CS:{accountId:"5709700889001",playerId:"rkZZPClsEf"},NZ_CS:{accountId:"5709700890001",playerId:"H1jD0xsVf"},ID_CS:{accountId:"5709700891001",playerId:"rJnOhZi4f"},TH_CS:{accountId:"5711373553001",playerId:"SkiJkGsNG"},VN_CS:{accountId:"5711373555001",playerId:"rJmcTxiEz"},MY_CS:{accountId:"5711373556001",playerId:"SJxYtAZiVG"},PH_CS:{accountId:"5711373557001",playerId:"BJ8M6Wj4M"},TW_CS:{accountId:"5711373558001",playerId:"rJxptpbo4f"},JP_CS:{accountId:"5711373559001",playerId:"Bk4j0ljVG"},IN_CS:{accountId:"5711373560001",playerId:"Sk7CdCZjNG"},CN_CS:{accountId:"5711373561001",playerId:"S1xr6gsNz"},HK_CS:{accountId:"5711373562001",playerId:"HJsUhboVf"},HK_EN_CS:{accountId:"5711373563001",playerId:"H1vvhboNf"},IE_CS:{accountId:"5711373564001",playerId:"HJgpICZjVM"},IT_CS:{accountId:"5711373565001",playerId:"H1Md2boEf"},ES_CS:{accountId:"5711373566001",playerId:"By1FaWoNG"},HU_CS:{accountId:"5711373567001",playerId:"Bye0rnZoVG"},SE_CS:{accountId:"5711373568001",playerId:"Skhl6biEf"},DK_CS:{accountId:"5711373569001",playerId:"HkxTRhWjVG"},FI_CS:{accountId:"5711373571001",playerId:"Bydk6ZiNM"},NO_CS:{accountId:"5711373572001",playerId:"rkMeTWjEz"},FR_CS:{
accountId:"5711373573001",playerId:"S1ONnWs4G"},PT_CS:{accountId:"5711373574001",playerId:"rkZwWaWiVz"},PL_CS:{accountId:"5711373575001",playerId:"HyxXTWiVG"},GR_CS:{accountId:"5711373576001",playerId:"Hkx7S3WsNM"},CZ_CS:{accountId:"5711373577001",playerId:"SJOfnWjEf"},SK_CS:{accountId:"5711373578001",playerId:"rkm7hZoNG"},RO_CS:{accountId:"5711373579001",playerId:"Sk2D6ZoEG"},BG_CS:{accountId:"5711373580001",playerId:"BkzvaZjVG"},AT_CS:{accountId:"5711373581001",playerId:"SkaMRgjEz"},CH_CS:{accountId:"5711373582001",playerId:"SJumAxjEG"},CH_FR_CS:{accountId:"5711373583001",playerId:"BylOVAxoVM"},LV_CS:{accountId:"5711373584001",playerId:"B1CFCloEG"},LT_CS:{accountId:"5711373585001",playerId:"rytcRljEz"},EE_CS:{accountId:"5711373586001",playerId:"ryfYAljEG"},RS_CS:{accountId:"5711373587001",playerId:"Skmu3agsEf"},HR_CS:{accountId:"5711373588001",playerId:"Bkcials4G"},RU_CS:{accountId:"5711373589001",playerId:"BJxrLabiNz"},UA_CS:{accountId:"5711373590001",playerId:"SylNBRZiVG"},UA_RU_CS:{accountId:"5711373592001",playerId:"rygURWsNM"},KZ_RU_CS:{accountId:"5711373593001",playerId:"BJq31zoVG"},AE_CS:{accountId:"5711373594001",playerId:"HJgEORWiNz"},AE_ARABIC_CS:{accountId:"5711373595001",playerId:"H1ecP0biEG"},IL_CS:{accountId:"5711373596001",playerId:"SyyCCZs4G"},SA_CS:{accountId:"5711373597001",playerId:"Skd0AboVz"},SA_EN_CS:{accountId:"5711373598001",playerId:"BJfkyGoEM"},TR_CS:{accountId:"5711373599001",playerId:"Hku9aWi4M"},IRAN_CS:{accountId:"5711373600001",playerId:"HkVTCWjVz"},LEVANT_CS:{accountId:"5711373601001",playerId:"HkHwplo4M"},PK_CS:{accountId:"5711373602001",playerId:"S12rTgoEG"},EG_CS:{accountId:"5711373603001",playerId:"SkoQTljVG"},N_AFRICA_CS:{accountId:"5711373604001",playerId:"SyeMCnZjNG"},AFRICA_EN_CS:{accountId:"5711373605001",playerId:"By1sAbiVM"},AFRICA_FR_CS:{accountId:"5711373606001",playerId:"S1MhiRbjEf"},AFRICA_PT_CS:{accountId:"5711373607001",playerId:"SyZtnCbs4M"},ZA_CS:{accountId:"5711373608001",playerId:"SJNq0Wi4G"},SI_CS:{accountId:"5711373609001",playerId:"rJzfRxsVf"},PY_CS:{accountId:"5711373610001",playerId:"SkTHCgo4f"},UR_CS:{accountId:"5711373612001",playerId:"ByII0eiNf"},LB_CS:{accountId:"5711373613001",playerId:"HJK8TlsVz"},AL_CS:{accountId:"5711373614001",playerId:"HJjongoEf"},MM_CS:{accountId:"5711373615001",playerId:"rkyO6xiNM"}},bcHtml5Player=new function(){function ie9CallBack(vodId){bcCLog("html5 ie9 callback !!!!!!!"+vodId);var bc5Info=bc5PlayerMap.get(vodId);bcCLog(bc5Info),bcCLog("html5 ie9 callback End !!!!!!!"+bc5Info.id),videojs(bc5Info.id).ready(function(){bc5MyPlayer=this,bc5MyPlayer.autoplay(eval(bc5Info.autoplay)),bc5MyPlayer.on("play",function(){bcjQuery("#"+bc5Info.id).find(".vjs-big-play-button").hide()}),bcjQuery(bc5Info.targetId+" .vjs-volume-menu-button").keydown(function(e){if(32==e.keyCode){var a=bc5MyPlayer.muted();bc5MyPlayer.muted(1==a?!1:!0)}}),bcjQuery(".video-area").find(".vjs-big-play-button").on("keydown",function(e){return 9==e.which&&e.shiftKey?!1:void 0})})}function fnTabIndexSort(e){bcCLog("html5 fnTabIndexSort !!!!!!!"+e);var a=bc5PlayerMap.get(e);bcCLog(a),bcCLog("html5 fnTabIndexSort End !!!!!!!");var t=navigator.userAgent.toLowerCase();"Netscape"==navigator.appName&&-1!=navigator.userAgent.search("Trident")||-1!=t.indexOf("msie")||(bcjQuery(a.targetId+" .vjs-captions-button").keydown(function(e){13==e.keyCode&&bcjQuery(a.targetId+" .vjs-modal-overlay").hide()}),bcjQuery(a.targetId+" .vjs-texttrack-settings").keydown(function(){bcjQuery(a.targetId+" .vjs-modal-overlay").css("style","")}))}var bc5PlayerMap=new BcHashMap;this.myBc5playerData,this.html5playerData,this.bc5MyPlayer,function($){$.fn.bcHtml5Player=function(alais){var bc5=bcHtml5Player,arr=Array.prototype.slice.call(arguments,1);return bc5.checkNull(arr[0])&&(arr[0]=""),bc5.checkNull(arr[1])&&(arr[1]=""),bc5.checkNull(arr[2])&&(arr[2]="100%"),bc5.checkNull(arr[3])&&(arr[3]="100%"),bc5.checkNull(arr[4])&&(arr[4]="false"),bc5.checkNull(arr[5])&&(arr[5]="false"),myBc5playerData=eval("bc5playerData."+alais.toUpperCase()),"undefined"!=typeof myBc5playerData?(html5playerData={targetId:this.selector,alais:alais,id:arr[0]+"_videoTagID",videoId:arr[1],width:arr[2],height:arr[3],autoplay:arr[4],ccUrl:arr[5],accountId:myBc5playerData.accountId,playerId:myBc5playerData.playerId},bc5PlayerMap.put(html5playerData.videoId,html5playerData),arr=[bcjQuery(this)].concat(arr),bc5.run.apply(bc5,arr)):void 0}}(bcjQuery),this.run=function(e,a,t){bcCLog("html5 Run!! "+t);var c=bc5PlayerMap.get(t);bcCLog(c),bcCLog("html5 Run End!! ");var r=".vjs-menu li:focus{border:white dashed 1px}.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-control,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-control-bar,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-progress-control,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-time-divider {transition-delay: 0s!important;-webkit-transition-delay: 0s!important;-moz-transition-delay: 0s!important;-ms-transition-delay: 0s!important;-o-transition-delay: 0s!important;}.vjs-big-play-button {top:0px!important; left:0px!important; right:0px!important; bottom:0px!important; margin:auto!important;}.vjs-big-play-button:focus { border:white dashed 1px }.vjs-play-control:focus{ border:white dashed 1px }.vjs-progress-holder:focus { border:white dashed 1px }.vjs-volume-menu-button:focus { border:white dashed 1px }.vjs-captions-button:focus { border:white dashed 1px }.vjs-fullscreen-control:focus { border:white dashed 1px }.vjs-volume-bar:focus{ border:white dashed 1px }.vjs-control-bar.ie8 {display:none !important;}.vjs-fade-out {display: block;visibility: hidden;opacity: 0;-webkit-transition: visibility 1.5s, opacity 1.5s;-moz-transition: visibility 1.5s, opacity 1.5s;-ms-transition: visibility 1.5s, opacity 1.5s;-o-transition: visibility 1.5s, opacity 1.5s;transition: visibility 1.5s, opacity 1.5s;-webkit-transition-delay: 2s;-moz-transition-delay: 2s;-ms-transition-delay: 2s;-o-transition-delay: 2s;transition-delay: 2s;}";r+="/* for IE */ #brightCoveArea2 span {display:inline !important}/* fix bc html5 player */#brightCoveArea2 .vjs-control-text{display:none !important;}.single-area.video-KV.on {max-height: 810px; overflow: hidden;}.vjs-big-play-button{left:0 !important; right:0 !important; top:0 !important; bottom:0 !important; margin: auto;}.vjs-playing .vjs-big-play-button{display:none !important;}.rtl .vjs-control-bar, .rtl .vjs-control-bar *{direction:ltr !important;}";var o,d,n;n=document.getElementsByTagName("head")[0],document.createStyleSheet?(o=document.createStyleSheet(),o.cssText=r):(d=document.createElement("style"),d.type="text/css",d.styleSheet?d.styleSheet.cssText=r:d.appendChild(document.createTextNode(r)),n.appendChild(d)),"8.0"==getIeVersion()&&(document.createElement("video"),document.createElement("track"));var l=this;bcjQuery(e).append(this.markup(t));var i=document.createElement("script");i.type="text/javascript",i.src="//players.brightcove.net/"+c.accountId+"/"+c.playerId+"_default/index.min.js",-1===getIeVersion()?(i.onload=function(){setTimeout(function(){l.callback(t)},500)},document.body.appendChild(i)):8===getIeVersion()?(i.onreadystatechange=function(){("loaded"==i.readyState||"complete"==i.readyState)&&setTimeout(function(){l.callback(t)},500)},document.body.appendChild(i)):9===getIeVersion()?(i.onload=function(){setTimeout(function(){l.callback(t)},500)},bcjQuery(c.targetId).append(i)):10===getIeVersion()&&(i.onload=function(){setTimeout(function(){l.callback(t)},500)},document.body.appendChild(i))},this.markup=function(e){bcCLog("html5 markup !!!!!!!");var a=bc5PlayerMap.get(e);bcCLog(a),bcCLog("html5 markup End !!!!!!!");var t="";return t+='<div style="display:block;position:relative;max-width:100%;width:'+a.width+";height:"+a.height+';">',t+='<div style="padding-top: 56.25%;">',t+='<video id="'+a.id+'"',t+=' data-video-id="'+a.videoId+'"',t+=' data-account="'+a.accountId+'"',t+=' data-player="'+a.playerId+'"',t+=' data-embed="default"',t+=' class="video-js"',t+=' style="width: '+a.width+"; height: "+a.height+';  position: absolute; top: 0px; bottom: 0px; right: 0px; left: 0px;"',t+=" controls>","false"!=a.ccUrl&&(t+=' <track kind="captions" src="'+a.ccUrl+'" srclang="en" label="English" default>'),t+=" </video>",t+=" </div></div>"},this.callback=function(e){bcCLog("html5 callback !!!!!!!"+e);var a=bc5PlayerMap.get(e);bcCLog(a.id),bcCLog("html5 callback End !!!!!!!"),videojs(a.id).ready(function(){bc5MyPlayer=this;var e="true"===a.autoplay;bcCLog(bc5MyPlayer),bcCLog("html5 callback bc5MyPlayer !!!!!!!");var t=bcjQuery("#"+a.id),c=(t.find(".vjs-dock-text"),t.find(".vjs-dock-title"),t.find(".vjs-control-text"),t.find(".vjs-control-bar"),t.find(".vjs-big-play-button")),r=t.find(".vjs-progress-holder"),o=t.find(".vjs-tooltip-progress-bar"),d=t.find(".vjs-menu-button"),n=t.find(".vjs-text-track-display");if(r.attr({"aria-valuenow":"0"}),o.attr({role:"slider","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0"}),d.attr("role","menu"),n.attr("tabIndex",0),(9===getIeVersion()||10===getIeVersion())&&t.find(".vjs-captions-button").on("mouseenter",function(e){e.stopPropagation(),bcjQuery(e.currentTarget).find(".vjs-menu-content").css("background-color","rgba(43, 51, 63, 0.7)")}),navigator.userAgent.toLowerCase().indexOf("firefox")>-1){var l=t.closest(".video-area_5").find(".brightcove-bcc-btn-close, .brightcove-bc5-btn-close");l.length&&(l.off("ffoutline").on("focusin.ffoutline",function(e){l.css("outline","1px solid #4d90fe")}),l.off("ffoutline").on("focusout.ffoutline",function(e){l.css("outline","unset")}))}if(t.hasClass("vjs-v5")){var i="",y="",p="",s=null;i=".vjs-control-bar button { font-family: VideoJS !important; } .vjs-big-play-button { font-family: VideoJS !important; }",s=document.getElementsByTagName("head")[0],document.createStyleSheet?(y=document.createStyleSheet(),y.cssText=i):(p=document.createElement("style"),p.type="text/css",p.styleSheet?p.styleSheet.cssText=i:p.appendChild(document.createTextNode(i)),s.appendChild(p))}var u=!1;n.length&&(n.off("DOMSubtreeModified.indexable propertychange.indexable").on("DOMSubtreeModified.indexable propertychange.indexable",function(e){e.stopPropagation(),n.find("div").length>2?u||(n.attr("tabindex",0),u=!0):u&&(u=!1,n.removeAttr("tabindex"))}),n.trigger("DOMSubtreeModified.indexable propertychange.indexable")),e&&c.trigger("click"),bcjQuery(a.targetId+" .vjs-volume-menu-button").keydown(function(e){if(32==e.keyCode){var a=bc5MyPlayer.muted();bc5MyPlayer.muted(1==a?!1:!0)}}),bcjQuery(".video-area").find(".vjs-big-play-button").on("keydown",function(e){return 9==e.which&&e.shiftKey?!1:void 0});/iphone|ipad|ipod|android/i.test(navigator.userAgent.toLowerCase())})},this.checkNull=function(e){return null==e||""==e},bcjQuery(document).on("click",".brightcove-bc5-btn-close",function(){bc5LayerClose(this)})};
window.Modal=function(){function t(){var t,o,s;t="string"==typeof this.options.content?this.options.content:this.options.content.innerHTML,s=document.createDocumentFragment(),this.modal=document.createElement("div"),this.modal.className="samsung-common-modal "+this.options.className,this.modal.style.minWidth=this.options.minWidth+"px",this.modal.style.maxWidth=this.options.maxWidth+"px",this.options.closeButton===!0&&(this.closeButton=document.createElement("span"),this.closeButton.className="samsung-common-x icon-x",this.closeButton.innerHTML="",this.closeButton.setAttribute("data-link_cat","wishlist modal"),this.closeButton.setAttribute("data-link_id","wishlist_modal"),this.closeButton.setAttribute("data-link_meta","link_name:close button"),this.closeButton.setAttribute("data-link_position","wishlist modal"),this.modal.appendChild(this.closeButton)),this.options.overlay===!0&&(this.overlay=document.createElement("div"),this.overlay.className="samsung-common-overlay "+this.options.className,s.appendChild(this.overlay)),o=document.createElement("div"),o.className="samsung-common-content",o.innerHTML=t,this.modal.appendChild(o),s.appendChild(this.modal),document.body.appendChild(s)}function o(t,o){var s;for(s in o)o.hasOwnProperty(s)&&(t[s]=o[s]);return t}function s(){this.closeButton&&this.closeButton.addEventListener("click",this.close.bind(this)),$(".close-modal",this.modal).click(function(){this.close()}.bind(this)),this.overlay&&this.overlay.addEventListener("click",this.close.bind(this))}function n(){var t=document.createElement("div");return t.style.WebkitTransition?"webkitTransitionEnd":t.style.OTransition?"oTransitionEnd":"transitionend"}return Modal=function(){this.closeButton=null,this.modal=null,this.overlay=null,this.transitionEnd=n();var e={autoOpen:!1,className:"fade-and-drop",closeButton:!0,content:"",maxWidth:600,minWidth:280,overlay:!0};arguments[0]&&"object"==typeof arguments[0]&&(this.options=o(e,arguments[0])),t.call(this),s.call(this),this.options.autoOpen===!0&&this.open()},Modal.prototype.close=function(){this.modal.className=this.modal.className.replace(" samsung-common-open",""),this.overlay.className=this.overlay.className.replace(" samsung-common-open","")},Modal.prototype.open=function(){window.getComputedStyle(this.modal).height,this.modal.className=this.modal.className+(this.modal.offsetHeight>window.innerHeight?" samsung-common-open samsung-common-anchored":" samsung-common-open"),this.overlay.className=this.overlay.className+" samsung-common-open"},Modal}();
/*
 *  jQuery dotdotdot 1.8.3
 *
 *  Copyright (c) Fred Heusschen
 *  www.frebsite.nl
 *
 *  Plugin website:
 *  dotdotdot.frebsite.nl
 *
 *  Licensed under the MIT license.
 *  http://en.wikipedia.org/wiki/MIT_License
 */
!function(t,e){function n(t,e,n){var r=t.children(),o=!1;t.empty();for(var i=0,d=r.length;d>i;i++){var l=r.eq(i);if(t.append(l),n&&t.append(n),a(t,e)){l.remove(),o=!0;break}n&&n.detach()}return o}function r(e,n,i,d,l){var s=!1,c="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",u="script, .dotdotdot-keep";return e.contents().detach().each(function(){var h=this,f=t(h);if("undefined"==typeof h)return!0;if(f.is(u))e.append(f);else{if(s)return!0;e.append(f),!l||f.is(d.after)||f.find(d.after).length||e[e.is(c)?"after":"append"](l),a(i,d)&&(s=3==h.nodeType?o(f,n,i,d,l):r(f,n,i,d,l)),s||l&&l.detach()}}),n.addClass("is-truncated"),s}function o(e,n,r,o,d){var c=e[0];if(!c)return!1;var h=s(c),f=-1!==h.indexOf(" ")?" ":"",p="letter"==o.wrap?"":f,g=h.split(p),v=-1,w=-1,b=0,m=g.length-1;for(o.fallbackToLetter&&0==b&&0==m&&(p="",g=h.split(p),m=g.length-1);m>=b&&(0!=b||0!=m);){var y=Math.floor((b+m)/2);if(y==w)break;w=y,l(c,g.slice(0,w+1).join(p)+o.ellipsis),r.children().each(function(){t(this).toggle().toggle()}),a(r,o)?(m=w,o.fallbackToLetter&&0==b&&0==m&&(p="",g=g[0].split(p),v=-1,w=-1,b=0,m=g.length-1)):(v=w,b=w)}if(-1==v||1==g.length&&0==g[0].length){var x=e.parent();e.detach();var C=d&&d.closest(x).length?d.length:0;if(x.contents().length>C?c=u(x.contents().eq(-1-C),n):(c=u(x,n,!0),C||x.detach()),c&&(h=i(s(c),o),l(c,h),C&&d)){var T=d.parent();t(c).parent().append(d),t.trim(T.html())||T.remove()}}else h=i(g.slice(0,v+1).join(p),o),l(c,h);return!0}function a(t,e){return t.innerHeight()>e.maxHeight}function i(e,n){for(;t.inArray(e.slice(-1),n.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),n.lastCharacter.noEllipsis)<0&&(e+=n.ellipsis),e}function d(t){return{width:t.innerWidth(),height:t.innerHeight()}}function l(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function s(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function c(t){do t=t.previousSibling;while(t&&1!==t.nodeType&&3!==t.nodeType);return t}function u(e,n,r){var o,a=e&&e[0];if(a){if(!r){if(3===a.nodeType)return a;if(t.trim(e.text()))return u(e.contents().last(),n)}for(o=c(a);!o;){if(e=e.parent(),e.is(n)||!e.length)return!1;o=c(e[0])}if(o)return u(t(o),n)}return!1}function h(e,n){return e?"string"==typeof e?(e=t(e,n),e.length?e:!1):e.jquery?e:!1:!1}function f(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],r=0,o=n.length;o>r;r++){var a=parseInt(t.css(n[r]),10);isNaN(a)&&(a=0),e-=a}return e}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(e){if(0==this.length)return t.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(e)});var o=this,i=o.contents();o.data("dotdotdot")&&o.trigger("destroy.dot"),o.data("dotdotdot-style",o.attr("style")||""),o.css("word-wrap","break-word"),"nowrap"===o.css("white-space")&&o.css("white-space","normal"),o.bind_events=function(){return o.bind("update.dot",function(e,d){switch(o.removeClass("is-truncated"),e.preventDefault(),e.stopPropagation(),typeof l.height){case"number":l.maxHeight=l.height;break;case"function":l.maxHeight=l.height.call(o[0]);break;default:l.maxHeight=f(o)}l.maxHeight+=l.tolerance,"undefined"!=typeof d&&(("string"==typeof d||"nodeType"in d&&1===d.nodeType)&&(d=t("<div />").append(d).contents()),d instanceof t&&(i=d)),g=o.wrapInner('<div class="dotdotdot" />').children(),g.contents().detach().end().append(i.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var c=!1,u=!1;return s.afterElement&&(c=s.afterElement.clone(!0),c.show(),s.afterElement.detach()),a(g,l)&&(u="children"==l.wrap?n(g,l,c):r(g,o,g,l,c)),g.replaceWith(g.contents()),g=null,t.isFunction(l.callback)&&l.callback.call(o[0],u,i),s.isTruncated=u,u}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],i),i}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),o.unwatch().unbind_events().contents().detach().end().append(i).attr("style",o.data("dotdotdot-style")||"").removeClass("is-truncated").data("dotdotdot",!1)}),o},o.unbind_events=function(){return o.unbind(".dot"),o},o.watch=function(){if(o.unwatch(),"window"==l.watch){var e=t(window),n=e.width(),r=e.height();e.bind("resize.dot"+s.dotId,function(){n==e.width()&&r==e.height()&&l.windowResizeFix||(n=e.width(),r=e.height(),u&&clearInterval(u),u=setTimeout(function(){o.trigger("update.dot")},100))})}else c=d(o),u=setInterval(function(){if(o.is(":visible")){var t=d(o);c.width==t.width&&c.height==t.height||(o.trigger("update.dot"),c=t)}},500);return o},o.unwatch=function(){return t(window).unbind("resize.dot"+s.dotId),u&&clearInterval(u),o};var l=t.extend(!0,{},t.fn.dotdotdot.defaults,e),s={},c={},u=null,g=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=t.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=t.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),s.afterElement=h(l.after,o),s.isTruncated=!1,s.dotId=p++,o.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&o.watch(),o},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},t.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","",",",";",".","!","?"],noEllipsis:[]}},t.fn.dotdotdot.debug=function(t){};var p=1,g=t.fn.html;t.fn.html=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?this.trigger("update",[n]):g.apply(this,arguments)};var v=t.fn.text;t.fn.text=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?(n=t("<div />").text(n).html(),this.trigger("update",[n])):v.apply(this,arguments)}}}(jQuery),jQuery(document).ready(function(t){t(".dot-ellipsis").each(function(){var e=t(this).hasClass("dot-resize-update"),n=t(this).hasClass("dot-timer-update"),r=0,o=t(this).attr("class").split(/\s+/);t.each(o,function(t,e){var n=e.match(/^dot-height-(\d+)$/);null!==n&&(r=Number(n[1]))});var a=new Object;n&&(a.watch=!0),e&&(a.watch="window"),r>0&&(a.height=r),t(this).dotdotdot(a)})}),jQuery(window).on("load",function(){jQuery(".dot-ellipsis.dot-load-update").trigger("update.dot")});
/*global jQuery*/

(function($) {
  'use strict';

  $('img.svg').each(function() {
    var $img = jQuery(this);
    var imgID = $img.attr('id');
    var imgClass = $img.attr('class');
    var imgURL = $img.attr('src');

    jQuery.get(imgURL, function(data) {
      // Get the SVG tag, ignore the rest
      var $svg = jQuery(data).find('svg');

      // Add replaced image's ID to the new SVG
      if (typeof imgID !== 'undefined') {
        $svg = $svg.attr('id', imgID);
      }
      // Add replaced image's classes to the new SVG
      if (typeof imgClass !== 'undefined') {
        $svg = $svg.attr('class', imgClass + ' replaced-svg');
      }

      // Remove any invalid XML tags as per http://validator.w3.org
      $svg = $svg.removeAttr('xmlns:a');

      // Replace image with new SVG
      $img.replaceWith($svg);

    }, 'xml');

  });
})(jQuery);

;(function($, window, document, undefined) {
  'use strict';

  var pluginName = 'tooltip',
    defaults = {
      color: '#fff',
      tipSize: 8,
      iconSize: 24
    };

  function Plugin(element, options) {
    this.el = element;
    this.$el = $(this.el);
    this.options = $.extend({}, defaults, options) ;
    this._defaults = defaults;
    this._name = pluginName;


    this.init();
  }

  $.extend(Plugin.prototype, {
    init: function() {
      this.$el.addClass('tooltip-root');

      var vid = 'radio' + Math.floor(Math.random() * 1000);
      var tipSize = this.options.tipSize;
      var iconSize = this.options.iconSize;
      this.tooltip = this.$el.attr('data-tooltip');
      var window_width = $(window).width();
      var that = this;
      
      var max_width = function(){ 
        if(that.$el.closest('.spec-details').length > 0){       
          if(! that.$el.closest('.sub-specs').length){
                return (window_width * that.$el.closest('.spec-name').width())/100;
          }else{
            return (window_width * that.$el.closest('.sub-specs').width())/100;
          }
        }
        return window_width * 0.8;
      }();
      

      //console.log('Max width : '+  max_width);
            
      /*var sub_spec_column = function(icon){
          var no_of_specs  = (icon.closest('.sub-specs').find('.sub-specs__item').length);
          var current_spec = function(){
            if(icon.closest('.sub-specs__item').prevAll('.sub-specs__item').length === 0)
              return 1;
            else
              return icon.closest('.sub-specs__item').prevAll('.sub-specs__item').length + 1 ;
          }

          var column_no = ((current_spec() % 3) != 0) ? (current_spec() % 3) : 3 ;
            return column_no ;
      }*/

      var $radio = $('<input>', {
        'type': 'checkbox',
        'id': vid,
        'class': 'tooltip__radio',
        'disabled':'disabled'
      }).appendTo(this.$el);
      var $icon = $('<label>', {
        'for': vid,
        'class': 'tooltip__icon'
      }).insertAfter($radio);
      var $box = $('<div>', {
        'class': 'tooltip__box'
      }).css({
        'max-width': function(){
              if(window_width > 768)
                 return max_width/2;     
                 return max_width;
        }
      }).html('<p class="type-p2">' + this.tooltip + '</p>')
        .css({
          'background-color': this.options.color
        })
        .appendTo(this.$el).hide();
      var $tip = $('<span>', {
        'class': 'tooltip__box__tip'
      }).css({
        'border-bottom-width': tipSize + 'px',
        'border-bottom-color': this.options.color,
        'border-right-width': tipSize + 'px',
        'border-left-width': tipSize + 'px',
        'margin-top': -tipSize + 'px',

      })
      .appendTo($box);
      $icon.click(function() {
        $radio.prop('checked',!$radio.prop('checked')); 
        $tip.css({
          'left': ($icon.position().left - $icon.parent().position().left + (iconSize / 2) - 28) + 'px'
        });
      });
    }
  });

  $.fn[pluginName] = function(options) {
    return this.each(function() {
      if (!$.data(this, 'plugin_' + pluginName)) {
        $.data(this, 'plugin_' + pluginName,
            new Plugin(this, options));
      }
    });
  };

})(jQuery, window, document);

/* globals brightcove */
;(function($, window, document, undefined) {
  'use strict';

  var slice = [].slice;
  var pluginName = 'brightcovePlayer';
  var unifiedVideoInterface = 'unifiedVideoInterface';
  var samsungDefaults = {
    playerKey: 'AQ~~,AAAA1vSqNgk~,TETY7sgK5kx998ss6xOOxY9f39BcciT1',
    playerID: '3785614295001',
    'bgcolor': '#000000',
    'wmode': 'transparent',
    'autoStart': false,
    '@videoPlayer': 3902294787001,
    'secureConnections': window.location.protocol === 'https:',
    'secureHTMLConnections': window.location.protocol === 'https:'
  };
  var loadDependency = false;
  var BCdeferred = $.Deferred();
  // The actual plugin constructor
  function Plugin(element, options, selector) {
    var _this = this;
    _this.start = true;
    if (typeof brightcove !== 'object' || !brightcove.createExperiences) {
      if (!loadDependency) {
        var apiUrl = window.location.protocol === 'https:' ? 'https://sadmin.brightcove.com/js/BrightcoveExperiences.js': 'http://admin.brightcove.com/js/BrightcoveExperiences.js'
        $.getScript(apiUrl, function() {//not used: data, textStatus, jqxhr
          BCdeferred.resolve();
        });
        loadDependency = true;
      }
      BCdeferred.done(function() {
        selector.click(function(){if (_this.start) {_this.init(element, options); _this.start = false;}});
        if (options.autoplay == 'Y') selector.trigger('click');
      });
    } else {
      selector.click(function(){if (_this.start) {_this.init(element, options); _this.start = false;}});
      if (options.autoplay == 'Y') selector.trigger('click');
    }
  }

  // Avoid Plugin.prototype conflicts
  $.extend(Plugin.prototype, {
    init: function(element, options) {
      this.el = element;
      this.$el = $(this.el);
      options['@videoPlayer'] = options.videoID;
      delete options.videoID;
      this.settings = $.extend(true, {}, $.fn[pluginName].defaults, samsungDefaults, options);
      this._defaults = $.fn[pluginName].defaults;
      this._name = pluginName;
      this.createPlayer();
    },
    createPlayer: function() {
      this.$el.html(this._createPlayerObject());
      brightcove.createExperiences();
    },
    destroy: function() {
      this.$el.empty();
      this.$el.data('plugin_' + pluginName, null);
    },
    pause: function() {
      this.player.postMessage("pauseVideo", location.protocol + "//players.brightcove.net");
    },
    play: function() {
      this.player.postMessage("playVideo", location.protocol + "//players.brightcove.net");
    },
    reset: function() {
      this.pause();
    },
    windowResize: function() {

    },
    _createPlayerObject: function() {
      var $playerObject = $('<object>', {
        'class': 'BrightcoveExperience'
      });

      if(this.settings.autoplay == 'Y') {
        this.settings.autoStart = true;
      }

      var $params = $.map(this.settings, function(value, key) {
        return $('<param>', {
          name: key,
          value: value
        });
      });

      $playerObject.append($params);

      var _this = this;
      function checkIframeLoaded() {
        var iframe = document.getElementById('bcExperienceObj0');
        var iframeContent = iframe ? iframe.contentWindow : null;
        // Check if loading is complete
        if (iframeContent !== null) {
          setTimeout(function() {
            _this.player = iframeContent;
            iframe.src += 'autoplay=true&muted';
            _this.$el.trigger('playerReady.' + unifiedVideoInterface);
          },950);
          return;
        } else {
          setTimeout(checkIframeLoaded, 100);
        }
      }
      checkIframeLoaded();

      return $playerObject;
    },
  });

  // A really lightweight plugin wrapper around the constructor,
  // preventing against multiple instantiations
  $.fn[pluginName] = function() {
    var params = slice.call(arguments);
    var options;
    var method;
    var args;
    var selector;
    if (params.length === 1) {
      if (typeof params[0] === 'object') {
        options = params.shift();
      } else if (typeof params[0] === 'string') {
        method = params.shift();
      }
    } else if (params.length === 2) {
      options = params.shift();
      selector = params[0];
    } else {
      method = params.shift();
      args = params;
    }

    this.each(function() {
      var pluginInstance = $.data(this, 'plugin_' + pluginName);
      if (!pluginInstance) {
        if (typeof options !== 'object') {
          $.error(pluginName + ' has not been initialized yet');
        }
        $.data(this, 'plugin_' + pluginName, new Plugin(this, options, selector));
      } else {
        if (!pluginInstance[method]) {
          $.error('Method name "' + method + '" missing');
        } else {
          pluginInstance[method].apply(pluginInstance, args);
        }
      }
    });

    // chain jQuery functions
    return this;
  };

  $.fn[pluginName].defaults = {
    'bgcolor': 'transparent',
    'width': '100%',
    'height': '100%',
    'playerID': null,
    'playerKey': null,
    'isVid': true,
    'isUI': true,
    'dynamicStreaming': true,
    'includeAPI': true
  };

})(jQuery, window, document);
/*globals MP4*/

;(function($, window, document, undefined) {
  'use strict';
  var slice = [].slice;
  var pluginName = 'samsungMp4Player';
  var unifiedVideoInterface = 'unifiedVideoInterface';

  var defaultSettings = {
    autoplay: 0,
    loop: 0
  };

  function Plugin(element, options, selector) {
    var _this = this;
    this.el = element;
    this.$el = $(this.el);
    this.options = $.extend({}, defaultSettings, options);
    this.selector = selector;
    this.windowSize = window.innerWidth > 768? 'D': 'M';
    _this.init();
  }

  $.extend(Plugin.prototype, {
    init: function() {
      var _this = this;
      var playerID = Math.round(Math.random() * 1000000);
      function onPlayerEnd(event) {
        _this.$el.trigger('mediaComplete.' + unifiedVideoInterface);
      }
      function onPlayerStart(event) {
        _this.$el.trigger('mediaBegin.' + unifiedVideoInterface);
      }
      console.log($.param(defaultSettings));
      var videoSrc = window.innerWidth > 768? _this.options.videoID: _this.options.videoIDMob;
      var videoControls = _this.options.videoControls === 'Y'? 'controls': '';
      if (_this.options.autoplay == 'N' && this.selector) {
        var self = this;
        var loopVal = _this.options.videoLoop == 'Y'? 'loop': '';
        setTimeout(function(){
          var videoObj = '<video ' + videoControls + ' width='+ self.$el.width() +' height="auto"' + ' id="player'+ playerID +'" class="mp4-video-player" playsinline '+ loopVal +'><source type="video/mp4" src="'+ videoSrc +'"></source></video>';
          $(videoObj).appendTo(self.$el)
          .ready(function() {
            setTimeout(function () {
              _this.$el.trigger('playerReady.' + unifiedVideoInterface);
              if(_this.options.videoLoop !== 'Y') {
                self.$el.find('.mp4-video-player').get(0).addEventListener('ended',onPlayerEnd,false);
              }
              self.$el.find('.mp4-video-player').get(0).addEventListener('play',onPlayerStart,false);
            }, 500);
          });
        }, 500);

      } else {
        var self = this;
          var loopVal = _this.options.videoLoop == 'Y'? 'loop': '';
          var autoplayVal = _this.options.autoplay == 'Y'? 'autoplay': '';
          var videoObj = '<video ' + videoControls + ' width='+ self.$el.width() +' height="100%"' + ' id="player'+ playerID +'" class="mp4-video-player" '+ autoplayVal +' muted playsinline '+ loopVal +'><source type="video/mp4" src="'+ videoSrc +'"></source></video>';

          $(videoObj).appendTo(this.$el)
          .ready(function() {
            _this.$el.trigger('playerReady.' + unifiedVideoInterface);
            if(_this.options.videoLoop !== 'Y') {
              self.$el.find('.mp4-video-player').get(0).addEventListener('ended',onPlayerEnd,false);
            }
            self.$el.find('.mp4-video-player').get(0).addEventListener('play',onPlayerStart,false);
          });
      }
    },
    play: function() {
      if (this.$el.find('.mp4-video-player').length) {
        this.$el.find('.mp4-video-player').get(0).play();
      }
    },
    pause: function() {
      this.$el.find('.mp4-video-player').get(0).pause();
    },
    destroy: function() {
      //this.unbindTriggers();
      this.$el.empty();
      this.$el.data('plugin_' + pluginName, null);
    },
    windowResize: function() {
      var self = this;
      var currentWindowWidth = window.innerWidth > 768? 'D': 'M';
      if(currentWindowWidth !== self.windowSize && self.$el.find('.mp4-video-player').get(0)) {
        var videoSrc = currentWindowWidth == 'D' ? self.options.videoID: self.options.videoIDMob;
        self.$el.find('.mp4-video-player source').attr('src', videoSrc);
        self.$el.find('.mp4-video-player').attr({width: '100%', height: '100%'});
        self.$el.find('.mp4-video-player').get(0).load();
        self.$el.find('.mp4-video-player').get(0).pause();
        self.windowSize = currentWindowWidth;
      }
    },
    reset: function() {
      var self = this;
      self.$el.find('.mp4-video-player').get(0).pause();
      self.$el.find('.mp4-video-player').get(0).currentTime = 0;
    }
  });
  $.fn[pluginName] = function() {
    var params = slice.call(arguments);
    var options;
    var method;
    var args;
    var selector;
    if (params.length === 1) {
      if (typeof params[0] === 'object') {
        options = params.shift();
      } else if (typeof params[0] === 'string') {
        method = params.shift();
      }
    } else if (params.length === 2) {
      options = params.shift();
      selector = params[0];
    } else {
      method = params.shift();
      args = params;
    }

    this.each(function() {
      var pluginInstance = $.data(this, 'plugin_' + pluginName);
      if (!pluginInstance) {
        if (typeof options !== 'object') {
          $.error(pluginName + ' has not been initialized yet');
        }
        $.data(this, 'plugin_' + pluginName, new Plugin(this, options, selector));
      } else {
        if (!pluginInstance[method]) {
          $.error('Method name "' + method + '" missing');
        } else {
          pluginInstance[method].apply(pluginInstance, args);
        }
      }
    });

    // chain jQuery functions
    return this;
  };
}(jQuery, window, document));

/*globals YT*/

;(function($, window, document, undefined) {
  'use strict';
  var slice = [].slice;
  var pluginName = 'samsungvrPlayer';
  var unifiedVideoInterface = 'unifiedVideoInterface';

  var defaults = {
    videoID: 'qNlrkvgxvLp',
  };

  var defaultSettings = {
    autoplay: false,
    st : '0'
  };

  $.ajaxSetup({
    cache: true
  });
  var loadDependency = false

  function Plugin(element, options, selector) {
    var _this = this;
    this.start = true;
    this.el = element;
    this.$el = $(this.el);
    this.options = $.extend({}, defaults, options);
    this.selector = selector;
    if (this.options.autoplay == 'Y') {
      defaultSettings.autoplay = true;
    }
    selector.click(function(){if (_this.start) {_this.init(); _this.start = false;}});
  }

  $.extend(Plugin.prototype, {
    init: function() {
      var _this = this;
      var playerID = Math.round(Math.random() * 1000000);
      console.log($.param(defaultSettings));
      var ua = window.navigator.userAgent;
      var msie = ua.indexOf('MSIE');
      var msie11 = ua.indexOf('Trident/');
      if (msie > 0 || msie11 > 0) {
        this.$el.append('<p id="vr-message" style="color: white; position:absolute; z-index:2000; left:0; right:0; text-align:center;">Please use Chrome/Firefox to have full experience for Samsung VR 360 videos</p>');
      }

      var vriframe = $('<iframe />', {
        'id': 'player' + playerID,
        'class': 'yt-video-player',
        'src': 'https://samsungvr.com/watch/' + this.options.videoID + '?' + $.param(defaultSettings)
      })
          .attr({width: this.$el.width(), height: '100%', frameborder: '0', allowfullscreen: true})
          .css('border', 'none')
          .appendTo(this.$el);

        var iframeId = '#player' + playerID;
       var iframe = document.querySelector(iframeId);
       this.player = iframe.contentWindow;
       vriframe.on('load', function() {
        _this.$el.trigger('playerReady.' + unifiedVideoInterface);
       });
    },
    play: function() {
      var _this = this;
      var message = [this.options.videoID, 'samsungvr_message_play'].join(':');
      this.player.postMessage(message, 'https://samsungvr.com');
    },
    pause: function() {
      var _this = this;
      var message = [this.options.videoID, 'samsungvr_message_pause'].join(':');
      this.player.postMessage(message, 'https://samsungvr.com');
    },
    destroy: function() {
      //this.unbindTriggers();
      this.$el.empty();
      this.$el.data('plugin_' + pluginName, null);
    },
    windowResize: function() {

    },
    reset: function() {
      var _this = this;
      var message = [this.options.videoID, 'samsungvr_message_pause'].join(':');
      this.player.postMessage(message, 'https://samsungvr.com');
    }
  });
  $.fn[pluginName] = function() {
    var params = slice.call(arguments);
    var options;
    var method;
    var args;
    var selector;
    if (params.length === 1) {
      if (typeof params[0] === 'object') {
        options = params.shift();
      } else if (typeof params[0] === 'string') {
        method = params.shift();
      }
    } else if (params.length === 2) {
      options = params.shift();
      selector = params[0];
    } else {
      method = params.shift();
      args = params;
    }

    this.each(function() {
      var pluginInstance = $.data(this, 'plugin_' + pluginName);
      if (!pluginInstance) {
        if (typeof options !== 'object') {
          $.error(pluginName + ' has not been initialized yet');
        }
        $.data(this, 'plugin_' + pluginName, new Plugin(this, options, selector));
      } else {
        if (!pluginInstance[method]) {
          $.error('Method name "' + method + '" missing');
        } else {
          pluginInstance[method].apply(pluginInstance, args);
        }
      }
    });

    // chain jQuery functions
    return this;
  };
}(jQuery, window, document));

//jquery plugin that provide a unified interface for rendering youtube and brightcove videos

;(function ($, window, document, undefined) {
    'use strict';

    var pluginName = 'videoController';
    var defaultRenderOptions = {
        style: 'overlay',
        el: null
    };
    var defaults = {};
    //var unifiedVideoInterface = 'unifiedVideoInterface';// not used
    // The actual plugin constructor
    function Plugin(element, renderOptions, options) {
        this.el = element;
        this.$el = $(this.el);
        this.options = $.extend({}, defaults, options);
        this.renderOptions = $.extend({}, defaultRenderOptions, renderOptions);
        this._defaults = defaults;
        this._name = pluginName;
        this.playerReady = false;
        this.playerReadyDeferred = jQuery.Deferred();
        this.windowSize = window.innerWidth > 768? 'D': 'M';
        this.init();
    }

    $.extend(Plugin.prototype, {
        init: function () {
            this.videoType = this.$el.attr('data-vidtype');
            if (!!this.videoType) {
                //only execute initilization logic if vidtype is specified
                //console.log('initializing video controller');
                var videoID = this.$el.attr('data-vidid');
                var videoIDMob = this.$el.attr('data-vidid-mobile');
                var videoTitle = this.$el.attr('data-vidtitle');
                if (videoID) {
                    this.options.videoID = videoID;
                }
                if (videoTitle) {
                    this.options.videoTitle = videoTitle;
                }
                this.options.videoIDMob = videoIDMob? videoIDMob: videoID;

                var videoControls = this.$el.attr('data-videoControls');
                if (videoControls) {
                    this.options.videoControls = videoControls;
                }

                var videoLoop = this.$el.attr('data-vidloop');
                if (videoLoop) {
                    this.options.videoLoop = videoLoop;
                }
                var ua = window.navigator.userAgent;
                var msie = ua.indexOf('MSIE');
                var msie11 = ua.indexOf('Trident/');
                this.options.autoplay = this.$el.attr('data-vidautoplay') || 'N';
                if (this.videoType === 'vr' && (msie > 0 || msie11 > 0)) {
                    this.options.autoplay = 'Y';
                }
                this.createContainer();
                this.setListeners();
                this.setUnifiedPlayer();
                this.$videoContainer.unifiedPlayer(this.options, this.renderOptions.el || this.$el);
            }
        },
        setUnifiedPlayer: function () {
            var base = this;
            this.$videoContainer.unifiedPlayer = function () {
                if (base.videoType === 'yt') {
                    $.fn.youtubePlayer.apply(this, arguments);
                } else if (base.videoType === 'bc') {
                    $.fn.brightcovePlayer.apply(this, arguments);
                } else if (base.videoType === 'vr') {
                    $.fn.samsungvrPlayer.apply(this, arguments);
                } else if (base.videoType === 'mp4') {
                    $.fn.samsungMp4Player.apply(this, arguments);
                }
            };
        },
        _createLoader: function () {
            var base = this;
            if (this.renderOptions.style === 'inline') {
                base.$loader = $('<div>').addClass('loader inline-video-container').appendTo(base.$el);
            } else if (this.renderOptions.style === 'overlay') {
                base.$loader = $('<div>').addClass('loader overlay-video-container').appendTo(base.$overlayBg);
            }
            var tmpTxt = '<div class="loader-circle"></div>';
            tmpTxt += '<div class="loader-line-mask">';
            tmpTxt += '<div class="loader-line"></div>';
            tmpTxt += '</div>';
            $(tmpTxt).appendTo(base.$loader);
        },
        createContainer: function () {
            if (this.renderOptions.style === 'inline') {
                this.$videoContainer = $('<div>').addClass('inline-video-container').appendTo(this.$el);
                if (this.options.autoplay == 'N') {
                    this.$videoContainer.css('visibility', 'hidden');
                }
            } else if (this.renderOptions.style === 'overlay') {
                this.$overlayBg = $('<div>').addClass('video-overlay-background').appendTo(this.$el).css('display', 'none');
                this.$videoContainer = $('<div>').addClass('overlay-video-container').appendTo(this.$overlayBg).css('visibility', 'hidden');
                var tmpTxt = '<svg fill="#fff" class="close-button">';
                tmpTxt += '<use xmlns:xlink="http://www.w3.org/1999/xlink"';
                tmpTxt += 'xlink:href="' + AEMapp.addDomain + '/etc.clientlibs/samsung/clientlibs/us/common/clientlib-dependencies/resources/images/checkout/sprite.symbol.svg#cross">';
                tmpTxt += '</use>';
                tmpTxt += '</svg>';

                this.$closeBtn = $(tmpTxt)
                    .appendTo(this.$videoContainer);
            }
        },
        setListeners: function () {
            var base = this;
            if (base.renderOptions.el != null) {
                base.renderOptions.el.on('click', function (evt) {
                    evt.stopPropagation();
                    evt.preventDefault();
                    base.$overlayBg && base.$overlayBg.addClass('active').css('display', 'block');
                    if (!base.playerReady) {
                        base._createLoader();
                        base.playerReadyDeferred.done(function () {
                            base._playVideo();
                            base.$loader.css('opacity', '0');
                            setTimeout(function () {
                                base.$loader.remove();
                            }, 700);
                        });
                    } else {
                        base._playVideo();
                    }
                });
            } else {
                base.$el.on('click', function (evt) {
                    evt.stopPropagation();
                    evt.preventDefault();
                    base.$overlayBg && base.$overlayBg.addClass('active').css('display', 'block');
                    if (!base.playerReady) {
                        base._createLoader();
                        base.playerReadyDeferred.done(function () {
                            base._playVideo();
                            base.$loader.css('opacity', '0');
                            setTimeout(function () {
                                base.$loader.remove();
                            }, 700);
                        });
                    } else {
                        base._playVideo();
                    }
                });
            }

            base.$videoContainer.on('playerReady.unifiedVideoInterface', function (evt) {
                evt.stopPropagation();
                evt.preventDefault();
                base.playerReadyDeferred.resolve();
                base.playerReady = true;
                if (typeof utag != "undefined" && base.renderOptions.productVideo && base.renderOptions.productVideo === true) {
                utag.link({
                    link_cat: 'samsung video',
                    link_id: 'play',
                    event_name: 'play',
                    link_position: base.renderOptions.videotagposition 
                });
            }
            });
            base.$videoContainer.on('mediaComplete.unifiedVideoInterface', function (evt) {
                console.log('finished');
                evt.stopPropagation();
                evt.preventDefault();
                base._closeVideo();
                if (typeof utag != "undefined" && base.renderOptions.productVideo && base.renderOptions.productVideo === true) {
                utag.link({
                    link_cat: 'samsung video',
                    link_id: 'complete',
                    event_name: 'complete',
                    link_position: base.renderOptions.videotagposition 
                });
            }
            });
            base.$videoContainer.on('mediaStop.unifiedVideoInterface', function (evt) {
                console.log('stop captured');
                evt.stopPropagation();
                evt.preventDefault();
                base._closeVideo();
                if (typeof utag != "undefined" && base.renderOptions.productVideo && base.renderOptions.productVideo === true) {
                utag.link({
                    link_cat: 'samsung video',
                    link_id: 'stop',
                    event_name: 'stop',
                    link_position: base.renderOptions.videotagposition 
                });
            }
            });
            base.$videoContainer.on('mediaBegin.unifiedVideoInterface', function () {
                console.log('video begin');
                var titleText = document.getElementsByTagName("title")[0].innerHTML;
                if (typeof utag != "undefined" && base.renderOptions.productVideo && base.renderOptions.productVideo === true) {
                utag.link({
                    link_cat: 'samsung video',
                    link_id: 'resume',
                    event_name: 'resume',
                    link_position: base.renderOptions.videotagposition 
                });
            }
                if (typeof utag != "undefined" && base.renderOptions.answerPage && base.renderOptions.answerPage === true) {
                    utag.link({
                        link_cat: 'solutions marquee video',
                        link_id: 'marquee_video_solutions',
                        link_meta: 'link_name:' + titleText + '>video play',
                        link_position: 'marquee'
                    });
                }
            });
            if (base.renderOptions.style == 'overlay') {
                base.$overlayBg.on('click', function (evt) {
                    evt.stopPropagation();
                    evt.preventDefault();
                    base._closeVideo();
                });
                base.$closeBtn.on('click', function (evt) {
                    evt.stopPropagation();
                    evt.preventDefault();
                    base._closeVideo();
                });
            }
            $(window).on('resize', function() {
              base.$videoContainer.unifiedPlayer('windowResize');
            });
        },
        _playVideo: function () {
            var base = this;
            base.$overlayBg && base.$overlayBg.css('display', 'block');
            base.$videoContainer.css('visibility', 'visible');
            base.$videoContainer.unifiedPlayer('play');
        },
        _pauseVideo: function () {
            var base = this;
            base.$overlayBg && base.$overlayBg.css('display', 'none');
            base.$videoContainer.css('visibility', 'hidden');
            base.$videoContainer.unifiedPlayer('pause');
        },
        _closeVideo: function () {
            var base = this;
            if (base.$el.attr('data-vidloop') === 'Y') {
                base.$videoContainer.unifiedPlayer('play');
            } else {
                if (base.$overlayBg) {
                    base.$overlayBg.removeClass('active');
                }
                base.$overlayBg && base.$overlayBg.css('display', 'none');
                base.$videoContainer.css('visibility', 'hidden').css('opacity', '1');

                //ss-690 additional checker for video cover check
                if (base.$videoContainer.parent().css('height') === '0px') {
                    base.$overlayBg && base.$overlayBg.css('display', 'block');
                    base.$videoContainer.css('visibility', 'visible');
                }
                // OPS-423
                if ($('.video-cta-overlay').length) {
                    if ($('.header_post_video_cta').length) {
                        $('.header_post_video_cta').show();
                    }
                    if ($('.header_pre_video_cta').length) {
                        $('.header_pre_video_cta').hide();
                    }
                }
                var videoExpID = $('.ns-feature-benefit-video-trigger').attr("data-vidid");
                if (videoExpID != '5205030053001') {
                  setTimeout(function () {
                    base.$videoContainer.unifiedPlayer('reset');
                  }, 500);
                }
            }
        }
    });

    // A really lightweight plugin wrapper around the constructor,
    // preventing against multiple instantiations
    $.fn[pluginName] = function (renderOptions, options) {
        return this.each(function () {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName,
                    new Plugin(this, renderOptions, options));
            }
        });
    };

})(jQuery, window, document);
/*globals YT*/

;(function($, window, document, undefined) {
  'use strict';
  var slice = [].slice;
  var pluginName = 'youtubePlayer';
  var unifiedVideoInterface = 'unifiedVideoInterface';
  // jscs:disable requireCamelCaseOrUpperCaseIdentifiers
  /*jshint camelcase: false */
  var defaultSettings = {
    autoplay: 0,
    autohide: 1,
    loop: 0,
    border: 0,
    wmode: 'opaque',
    enablejsapi: 1,
    version: 3,
    hl: 'en_US',
    rel: 0,
    showinfo: 0,
    hd: 1,
    iv_load_policy: 3, // add origin
    lazyload: true,
    mute: 1
  };
  /*jshint camelcase: true */
  // jscs:enable requireCamelCaseOrUpperCaseIdentifiers
  $.ajaxSetup({
    cache: true
  });
  var loadDependency = false;
  var YTdeferred = $.Deferred();

  function Plugin(element, options, selector) {
    var _this = this;
    this.el = element;
    this.$el = $(this.el);
    this.options = $.extend({}, defaultSettings, options);
    this.selector = selector;
    if (typeof window.YT !== 'object') {
      if (!loadDependency) {
        $.getScript('https://www.youtube.com/iframe_api', function() {//not used: data, textStatus, jqxhr
          window.onYouTubeIframeAPIReady = function() {
            YTdeferred.resolve();
          };
        });
        loadDependency = true;
      }
      YTdeferred.done(function() {
        _this.init();
      });
    } else if (typeof window.YT.player !== 'function') {
      window.onYouTubeIframeAPIReady = function() {
        YTdeferred.resolve();
      }();
      YTdeferred.done(function() {
        _this.init();
      });
    } else {
      _this.init();
    }
  }

  $.extend(Plugin.prototype, {
    init: function() {
      var _this = this;
      var playerID = Math.round(Math.random() * 1000000);
      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.ENDED) {
          _this.$el.trigger('mediaComplete.' + unifiedVideoInterface);
        }
        if (event.data == YT.PlayerState.PLAYING) {
          _this.$el.trigger('mediaBegin.' + unifiedVideoInterface);
        }
      }

      function onPlayerReady() {//not used: event
        _this.$el.trigger('playerReady.' + unifiedVideoInterface);
        if (_this.options.autoplay == 'Y') {
          _this.player.playVideo();
        }
      }
      console.log($.param(defaultSettings));
      if (defaultSettings.lazyload && _this.options.autoplay == 'N' && this.selector) {
        var self = this;
        self.selector.click(function(){
          if (!self.$el.find('.yt-video-player').length) {
            $('<iframe />', {
              'id': 'player' + playerID,
              'class': 'yt-video-player',
              'src': 'https://www.youtube.com/embed/' + self.options.videoID + '?' + $.param(self.options)
            })
              .attr({width: self.$el.width(), height: self.$el.height(), seamless: 'seamless', allow: 'autoplay; fullscreen'})
              .css('border', 'none')
              .appendTo(self.$el);
            self.player = new YT.Player('player' + playerID, {
              events: {
                'onStateChange': onPlayerStateChange,
                'onReady': onPlayerReady
              }
            });
          }
        });
      } else {
        var self = this;
        $('<iframe />', {
          'id': 'player' + playerID,
          'class': 'yt-video-player',
          'src': 'https://www.youtube.com/embed/' + this.options.videoID + '?' + $.param(self.options)
        })
          .attr({width: this.$el.width(), height: this.$el.height(), seamless: 'seamless', allow: 'autoplay; fullscreen'})
          .css('border', 'none')
          .appendTo(this.$el);
        this.player = new YT.Player('player' + playerID, {
          events: {
            'onStateChange': onPlayerStateChange,
            'onReady': onPlayerReady
          }
        });
      }
    },
    play: function() {
      if (this.$el.find('.yt-video-player').length) {
        this.player.playVideo();
      }
    },
    pause: function() {
      this.player.pauseVideo();
    },
    destroy: function() {
      //this.unbindTriggers();
      this.$el.empty();
      this.$el.data('plugin_' + pluginName, null);
    },
    windowResize: function() {

    },
    reset: function() {
      this.player.seekTo(0, true);
      this.player.pauseVideo();
    }
  });
  $.fn[pluginName] = function() {
    var params = slice.call(arguments);
    var options;
    var method;
    var args;
    var selector;
    if (params.length === 1) {
      if (typeof params[0] === 'object') {
        options = params.shift();
      } else if (typeof params[0] === 'string') {
        method = params.shift();
      }
    } else if (params.length === 2) {
      options = params.shift();
      selector = params[0];
    } else {
      method = params.shift();
      args = params;
    }

    this.each(function() {
      var pluginInstance = $.data(this, 'plugin_' + pluginName);
      if (!pluginInstance) {
        if (typeof options !== 'object') {
          $.error(pluginName + ' has not been initialized yet');
        }
        $.data(this, 'plugin_' + pluginName, new Plugin(this, options, selector));
      } else {
        if (!pluginInstance[method]) {
          $.error('Method name "' + method + '" missing');
        } else {
          pluginInstance[method].apply(pluginInstance, args);
        }
      }
    });

    // chain jQuery functions
    return this;
  };
}(jQuery, window, document));

/*!
 Zoom 1.7.15
 license: MIT
 http://www.jacklmoore.com/zoom
 */
(function ($) {
  var defaults = {
    url: false,
    callback: false,
    target: false,
    eventTarget: false,
    duration: 120,
    on: 'mouseover', // other options: grab, click, toggle
    touch: true, // enables a touch fallback
    onZoomIn: false,
    onZoomOut: false,
    magnify: 1
  };

  if (!window.is_touch_device) {
    window.is_touch_device = function() {
      var prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');
      var mq = function(query) {
        return window.matchMedia(query).matches;
      }

      if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {
        return true;
      }

      var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');
      return mq(query);
    }
  }

  // Core Zoom Logic, independent of event listeners.
  $.zoom = function(target, source, img, canvas, icon, magnify, eventTarget) {
    var targetHeight,
      targetWidth,
      sourceHeight,
      sourceWidth,
      xRatio,
      yRatio,
      offset,
      $target = $(target),
      position = $target.css('position'),
      overflow = $target.css('overflow'),
      $source = $(source),
      $eventTarget = $(eventTarget);

    // The parent element needs positioning so that the zoomed element can be correctly positioned within.
    $target.css('position', /(absolute|fixed)/.test(position) ? position : 'relative');
    $target.css('overflow', 'hidden');

    img.style.width = img.style.height = '';
    $(img)
      .addClass('zoomImg')
      .css({
        position: 'absolute',
        top: Math.min(($target.height() - 1200)/2, 0),
        left: Math.min(($target.width() - 1600)/2, 0),
        width: 1600,//img.width * magnify,
        height: 1200,//img.height * magnify,
        border: 'none',
        maxWidth: 'none',
        maxHeight: 'none',
        cursor: 'zoom-out'
      })
      .appendTo(canvas);

    $(icon)
      .addClass('icon-zoom-out')
      .css({
        position: 'absolute',
        right: 15,
        bottom: 15,
        fontSize: 20,
        padding: 5,
        cursor: 'pointer'
      })
      .appendTo(canvas);

    if (!window.is_touch_device()) {
      $(icon)
        .css({
          display: 'none'
        });
    }

    $(canvas)
      .addClass('zoomCanvas')
      .css({
        position: 'absolute',
        top: 0,
        left: 0,
        opacity: 1,
        backgroundColor: '#f7f7f7',
        width: '100%',
        height: '100%',
        border: 'none',
        maxWidth: 'none',
        maxHeight: 'none',
        zIndex: 99
      })
      .appendTo(target);

    if (window.is_touch_device()) {
      $(icon).on('touchend click', function(e) {
        $source.off(".zoom");
        $target.css('position', position);
        $target.css('overflow', overflow);
        $(canvas).remove();
        e.preventDefault();
        e.stopPropagation();
      });
    } else {
      $(img).on('click', function(e) {
        $source.off(".zoom");
        $target.css('position', position);
        $target.css('overflow', overflow);
        $(canvas).remove();
        e.preventDefault();
        e.stopPropagation();
      });
    }

    return {
      init: function() {
        targetWidth = $target.outerWidth();
        targetHeight = $target.outerHeight();

        if (source === $target[0]) {
          sourceWidth = targetWidth;
          sourceHeight = targetHeight;
        } else {
          sourceWidth = $source.outerWidth();
          sourceHeight = $source.outerHeight();
        }

        xRatio = (img.width - targetWidth) / sourceWidth;
        yRatio = (img.height - targetHeight) / sourceHeight;

        offset = $source.offset();
      },
      move: function (e) {
        var left = (e.pageX - offset.left),
          top = (e.pageY - offset.top);

        top = Math.max(Math.min(top, sourceHeight), 0);
        left = Math.max(Math.min(left, sourceWidth), 0);

        img.style.left = (left * -xRatio) + 'px';
        img.style.top = (top * -yRatio) + 'px';
      }
    };
  };

  $.fn.zoom = function (options) {
    return this.each(function () {
      var
        settings = $.extend({}, defaults, options || {}),
        eventTarget = settings.eventTarget,
        $eventTarget = $(eventTarget),
      //target will display the zoomed image
        target = settings.target || this,
      //source will provide zoom location info (thumbnail)
        source = this,
        $source = $(source),
        $target = $(target),
        img = document.createElement('img'),
        canvas = document.createElement('div'),
        icon = document.createElement('span'),
        $img = $(img),
        $canvas = $(canvas),
        mousemove = 'mousemove.zoom',
        clicked = false,
        touched = false,
        $urlElement;

      // If a url wasn't specified, look for an image element.
      if (!settings.url) {
        $urlElement = $source.find('img');
        if ($urlElement[0]) {
          settings.url = $urlElement.data('src') || $urlElement.attr('src');
        }
        if (!settings.url) {
          return;
        }
      }

      (function(){
        var position = $target.css('position');
        var overflow = $target.css('overflow');

        $target.on('zoom.destroy', function(){
          $source.off(".zoom");
          $target.css('position', position);
          $target.css('overflow', overflow);
          $canvas.remove();
        });

      }());

      img.onload = function () {
        var zoom = $.zoom(target, source, img, canvas, icon, settings.magnify, settings.eventTarget);

        function start(e) {
          zoom.init();
          zoom.move(e);

          // Skip the fade-in for IE8 and lower since it chokes on fading-in
          // and changing position based on mousemovement at the same time.
          $canvas.stop()
            .fadeTo($.support.opacity ? settings.duration : 0, 1, $.isFunction(settings.onZoomIn) ? settings.onZoomIn.call(img) : false);
        }

        function stop() {
          $canvas.stop()
            .fadeTo(settings.duration, 0, $.isFunction(settings.onZoomOut) ? settings.onZoomOut.call(img) : false);
        }

        // Mouse events
        if (settings.on === 'grab') {
          $target
            .on('mousedown.zoom',
            function (e) {
              if (e.which === 1) {
                $(document).on('mouseup.zoom',
                  function () {
                    stop();

                    $(document).off(mousemove, zoom.move);
                  }
                );

                start(e);

                $(document).on(mousemove, zoom.move);

                e.preventDefault();
              }
            }
          );
        } else if (settings.on === 'click') {
          $target.on('click.zoom',
            function (e) {
              if (clicked) {
                // bubble the event up to the document to trigger the unbind.
                return;
              } else {
                clicked = true;
                start(e);
                $(document).on(mousemove, zoom.move);
                $(document).on('click.zoom',
                  function () {
                    stop();
                    clicked = false;
                    $(document).off(mousemove, zoom.move);
                  }
                );
                return false;
              }
            }
          );
        } else if (settings.on === 'toggle') {
          $target.on('click.zoom',
            function (e) {
              if (clicked) {
                stop();
              } else {
                start(e);
              }
              clicked = !clicked;
            }
          );
        } else if (settings.on === 'mouseover') {
          zoom.init(); // Preemptively call init because IE7 will fire the mousemove handler before the hover handler.
          $target
            //.on('mouseenter.zoom', start)
            //.on('mouseleave.zoom', stop)
            .on(mousemove, zoom.move);
        }

        // Touch fallback
        if (settings.touch) {
          $target.find('.zoomCanvas')
            .on('touchstart.zoom', function (e) {
              e.preventDefault();
              if (touched) {
                touched = false;
                //stop();
              } else {
                touched = true;
                start( e.originalEvent.touches[0] || e.originalEvent.changedTouches[0] );
              }
            })
            .on('touchmove.zoom', function (e) {
              e.preventDefault();
              zoom.move( e.originalEvent.touches[0] || e.originalEvent.changedTouches[0] );
            })
            .on('touchend.zoom', function (e) {
              e.preventDefault();
              if (touched) {
                touched = false;
                //stop();
              }
            });
        }

        if ($.isFunction(settings.callback)) {
          settings.callback.call(img);
        }
      };
      settings.url = settings.url.replace('$product-details-png$', '$product-details-zoomed-png$');
      img.src = settings.url;
    });
  };

  $.fn.zoom.defaults = defaults;
}(window.jQuery));

/*!
 * 360 degree Image Slider v2.0.4
 * http://gaurav.jassal.me
 *
 * Copyright 2015, gaurav@jassal.me
 * Dual licensed under the MIT or GPL Version 3 licenses.
 *
 */
(function($) {
  'use strict';
  /**
   * @class ThreeSixty
   * **The ThreeSixty slider class**.
   *
   * This as jQuery plugin to create 360 degree product image slider.
   * The plugin is full customizable with number of options provided. The plugin
   * have the power to display images in any angle 360 degrees. This feature can be
   * used successfully in many use cases e.g. on an e-commerce site to help customers
   * look products in detail, from any angle they desire.
   *
   * **Features**
   *
   * - Smooth Animation
   * - Plenty of option parameters for customization
   * - Api interaction
   * - Simple mouse interaction
   * - Custom behavior tweaking
   * - Support for touch devices
   * - Easy to integrate
   * - No flash
   *
   * Example code:
   *      var product1 = $('.product1').ThreeSixty({
   *        totalFrames: 72,
   *        endFrame: 72,
   *        currentFrame: 1,
   *        imgList: '.threesixty_images',
   *        progress: '.spinner',
   *        imagePath:'/assets/product1/',
   *        filePrefix: 'ipod-',
   *        ext: '.jpg',
   *        height: 265,
   *        width: 400,
   *        navigation: true
   *      });
   * **Note:** There are loads other options that you can override to customize
   * this plugin.

   * @extends jQuery
   * @singleton
   * @param {String} [el] jQuery selector string for the parent container
   * @param {Object} [options] An optional config object
   *
   * @return this
   */
  $.ThreeSixty = function(el, options) {
    // To avoid scope issues, use 'base' instead of 'this'
    // to reference this class from internal events and functions.
    var base = this,
      AppConfig, frames = [],
      VERSION = '2.0.5';
    // Access to jQuery and DOM versions of element
    /**
     * @property {$el}
     * jQuery Dom node attached to the slider inherits all jQuery public functions.
     */
    base.$el = $(el);
    base.el = el;
    // Add a reverse reference to the DOM object
    base.$el.data('ThreeSixty', base);
    /**
     * @method init
     * The function extends the user options with default settings for the
     * slider and initilize the slider.
     * **Style Override example**
     *
     *      var product1 = $('.product1').ThreeSixty({
     *        totalFrames: 72,
     *        endFrame: 72,
     *        currentFrame: 1,
     *        imgList: '.threesixty_images',
     *        progress: '.spinner',
     *        imagePath:'/assets/product1/',
     *        filePrefix: 'ipod-',
     *        ext: '.jpg',
     *        height: 265,
     *        width: 400,
     *        navigation: true,
     *        styles: {
     *          border: 2px solide #b4b4b4,
     *          background: url(http://example.com/images/loader.gif) no-repeat
     *        }
     *      });
     */
    base.init = function() {
      AppConfig = $.extend({}, $.ThreeSixty.defaultOptions, options);
      if(AppConfig.disableSpin) {
        AppConfig.currentFrame = 1;
        AppConfig.endFrame = 1;
      }
      base.initProgress();
      base.loadImages();
    };

    /*
     * Function to resize the height of responsive slider.
     */
    base.resize = function() {
      // calculate height
    };
    /**
     * @method initProgress
     * The function sets initial styles and start the progress indicator
     * to show loading of images.
     *
     * @private
     */
    base.initProgress = function() {
      base.$el.css({
        width: AppConfig.width + 'px',
        height: AppConfig.height + 'px',
        'background-image': 'none !important'
      });
      if(AppConfig.styles) {
        base.$el.css(AppConfig.styles);
      }

      base.responsive();

      //base.$el.find(AppConfig.progress).css({
      //  marginTop: ((AppConfig.height / 2) - 15) + 'px'
      //});
      base.$el.find(AppConfig.progress).fadeIn('slow');
      base.$el.find(AppConfig.imgList).hide();
    };

    /**
     * @method loadImages
     * @private
     * The function asynchronously loads images and inject into the slider.
     */
    base.loadImages = function() {
      var li, imageName, image, host, baseIndex;
      li = document.createElement('li');
      baseIndex = AppConfig.zeroBased ? 0 : AppConfig.startFrame;
      imageName = !AppConfig.imgArray ?
      AppConfig.domain + AppConfig.imagePath + AppConfig.filePrefix + base.zeroPad((AppConfig.loadedImages + baseIndex)) + AppConfig.ext + ((base.browser.isIE()) ? '?' + new Date().getTime() : '') :
        AppConfig.imgArray[AppConfig.loadedImages];
      image = $('<img>').attr('src', imageName).attr('alt', '360-degree image view ' + base.zeroPad((AppConfig.loadedImages + 1)) + ' out of ' + AppConfig.totalFrames).addClass('previous-image').appendTo(li);

      frames.push(image);

      base.$el.find(AppConfig.imgList).append(li);

      $(image).load(function () {
        base.imageLoaded();
      });
    };

    /**
     * @method loadImages
     * @private
     * The function gets triggers once the image is loaded. We also update
     * the progress percentage in this function.
     */
    base.imageLoaded = function () {
      AppConfig.loadedImages += 1;
      base.$el.find(AppConfig.progress + ' span').text(Math.floor(AppConfig.loadedImages / AppConfig.totalFrames * 100) + '%');
      if (AppConfig.loadedImages >= AppConfig.totalFrames) {
        if(AppConfig.disableSpin) {
          frames[0].removeClass('previous-image').addClass('current-image');
        }
        base.$el.find(AppConfig.progress).fadeOut('slow', function () {
          $(this).hide();
          base.showImages();
          base.showNavigation();
        });
      } else {
        base.loadImages();
      }
    };

    /**
     * @method loadImages
     * @private
     * This function is called when all the images are loaded.
     * **The function does following operations**
     * - Removes background image placeholder
     * - Displays the 360 images
     * - Initilizes mouse intraction events
     */
    base.showImages = function () {
      base.$el.find('.txtC').fadeIn();
      base.$el.find(AppConfig.imgList).fadeIn();
      base.ready = true;
      AppConfig.ready = true;

      if (AppConfig.drag) {
        base.initEvents();
      }
      base.refresh();
      base.initPlugins();
      AppConfig.onReady();

      setTimeout(function() { base.responsive(); }, 50);
    };

    /**
     * The function to initilize external plugin
     */
    base.initPlugins = function () {
      $.each(AppConfig.plugins, function(i, plugin) {
        if(typeof $[plugin] === 'function') {
          $[plugin].call(base, base.$el, AppConfig);
        } else {
          throw new Error(plugin + ' not available.');
        }
      });
    };

    /**
     * @method showNavigation
     * Creates a navigation panel if navigation is set to true in the
     * settings.
     */
    base.showNavigation = function() {
      if (AppConfig.navigation && !AppConfig.navigation_init) {
        var nav_bar, next, previous, play_stop;

        nav_bar = $('<div/>').attr('class', 'nav_bar');

        next = $('<a/>').attr({
          'href': '#',
          'class': 'nav_bar_next'
        }).html('next');

        previous = $('<a/>').attr({
          'href': '#',
          'class': 'nav_bar_previous'
        }).html('previous');

        play_stop = $('<a/>').attr({
          'href': '#',
          'class': 'nav_bar_play'
        }).html('play');

        nav_bar.append(previous);
        nav_bar.append(play_stop);
        nav_bar.append(next);

        base.$el.prepend(nav_bar);

        next.bind('mousedown touchstart', base.next);
        previous.bind('mousedown touchstart', base.previous);
        play_stop.bind('mousedown touchstart', base.play_stop);
        AppConfig.navigation_init = true;
      }
    };

    /**
     * @method play_stop
     * @private
     * Function toggles the autoplay rotation of 360 slider
     * @param {Object} [event] jQuery events object.
     *
     */

    base.play_stop = function(event) {
      event.preventDefault();

      if (!AppConfig.autoplay) {
        AppConfig.autoplay = true;
        AppConfig.play = setInterval(base.moveToNextFrame, AppConfig.playSpeed);
        $(event.currentTarget).removeClass('nav_bar_play').addClass('nav_bar_stop');
      } else {
        AppConfig.autoplay = false;
        $(event.currentTarget).removeClass('nav_bar_stop').addClass('nav_bar_play');
        clearInterval(AppConfig.play);
        AppConfig.play = null;
      }
    };

    /**
     * @method next
     * Using this function you can rotate 360 to next 5 frames.
     * @param {Object} [event] jQuery events object.
     *
     */

    base.next = function(event) {
      if (event) { event.preventDefault(); }
      AppConfig.endFrame -= 5;
      base.refresh();
    };

    /**
     * @method previous
     * Using this function you can rotate 360 to previous 5 frames.
     * @param {Object} [event] jQuery events object.
     *
     */
    base.previous = function(event) {
      if (event) { event.preventDefault(); }
      AppConfig.endFrame += 5;
      base.refresh();
    };

    /**
     * @method play
     * You are start the auto rotaion for the slider with this function.
     *
     */
    base.play = function(speed, direction) {
      var _speed = speed || AppConfig.playSpeed;
      var _direction = direction || AppConfig.autoplayDirection;
      AppConfig.autoplayDirection = _direction

      if (!AppConfig.autoplay) {
        AppConfig.autoplay = true;
        AppConfig.play = setInterval(base.moveToNextFrame, _speed);
      }
    };

    /**
     * @method stop
     * You can stop the auto rotation of the 360 slider with this function.
     *
     */

    base.stop = function() {
      if (AppConfig.autoplay) {
        AppConfig.autoplay = false;
        clearInterval(AppConfig.play);
        AppConfig.play = null;
      }
    };

    /**
     * @method endFrame
     * @private
     * Function animates to previous frame
     *
     */
    base.moveToNextFrame = function () {
      if (AppConfig.autoplayDirection === 1) {
        AppConfig.endFrame -= 1;
      } else {
        AppConfig.endFrame += 1;
      }
      base.refresh();
    };

    /**
     * @method gotoAndPlay
     * @public
     * Function animates to previous frame
     *
     */
    base.gotoAndPlay = function (n) {
      if( AppConfig.disableWrap ) {
        AppConfig.endFrame = n;
        base.refresh();
      } else {
        // Since we could be looped around grab the multiplier
        var multiplier = Math.ceil(AppConfig.endFrame / AppConfig.totalFrames);
        if(multiplier === 0) {
          multiplier = 1;
        }

        // Figure out the quickest path to the requested frame
        var realEndFrame = (multiplier > 1) ?
        AppConfig.endFrame - ((multiplier - 1) * AppConfig.totalFrames) :
          AppConfig.endFrame;

        var currentFromEnd = AppConfig.totalFrames - realEndFrame;

        // Jump past end if it's faster
        var newEndFrame = 0;
        if(n - realEndFrame > 0) {
          // Faster to move the difference ahead?
          if(n - realEndFrame < realEndFrame + (AppConfig.totalFrames - n)) {
            newEndFrame = AppConfig.endFrame + (n - realEndFrame);
          } else {
            newEndFrame = AppConfig.endFrame - (realEndFrame + (AppConfig.totalFrames - n));
          }
        } else {
          // Faster to move the distance back?
          if(realEndFrame - n < currentFromEnd + n) {
            newEndFrame = AppConfig.endFrame - (realEndFrame - n);
          } else {
            newEndFrame = AppConfig.endFrame + (currentFromEnd + n);
          }
        }

        // Now set the end frame
        if(realEndFrame !== n) {
          AppConfig.endFrame = newEndFrame;
          base.refresh();
        }
      }
    };


    /**
     * @method initEvents
     * @private
     * Function initilizes all the mouse and touch events for 360 slider movement.
     *
     */
    base.initEvents = function () {
      base.$el.bind('mousedown touchstart touchmove touchend mousemove click', function (event) {

        event.preventDefault();

        if ((event.type === 'mousedown' && event.which === 1) || event.type === 'touchstart') {
          AppConfig.pointerStartPosX = base.getPointerEvent(event).pageX;
          AppConfig.dragging = true;
          AppConfig.onDragStart(AppConfig.currentFrame);
        } else if (event.type === 'touchmove') {
          base.trackPointer(event);
        } else if (event.type === 'touchend') {
          AppConfig.dragging = false;
          AppConfig.onDragStop(AppConfig.endFrame);
        }
      });

      $(document).bind('mouseup', function (event) {
        AppConfig.dragging = false;
        AppConfig.onDragStop(AppConfig.endFrame);
        $(this).css('cursor', 'none');
      });

      $(window).bind('resize', function (event) {
        base.responsive();
      });

      $(document).bind('mousemove', function (event) {
        if (AppConfig.dragging) {
          event.preventDefault();
          if(!base.browser.isIE && AppConfig.showCursor) {
            base.$el.css('cursor', 'url(assets/images/hand_closed.png), auto');
          }
        } else {
          if(!base.browser.isIE && AppConfig.showCursor) {
            base.$el.css('cursor', 'url(assets/images/hand_open.png), auto');
          }
        }
        base.trackPointer(event);

      });

      $(window).resize(function() {
        base.resize();
      });
    };

    /**
     * @method getPointerEvent
     * @private
     * Function returns touch pointer events
     *
     * @params {Object} [event]
     */
    base.getPointerEvent = function (event) {
      return event.originalEvent.targetTouches ? event.originalEvent.targetTouches[0] : event;
    };

    /**
     * @method trackPointer
     * @private
     * Function calculates the distance between the start pointer and end pointer/
     *
     * @params {Object} [event]
     */
    base.trackPointer = function (event) {
      if (AppConfig.ready && AppConfig.dragging) {
        AppConfig.pointerEndPosX = base.getPointerEvent(event).pageX;
        if (AppConfig.monitorStartTime < new Date().getTime() - AppConfig.monitorInt) {
          AppConfig.pointerDistance = AppConfig.pointerEndPosX - AppConfig.pointerStartPosX;
          if(AppConfig.pointerDistance > 0){
            AppConfig.endFrame = AppConfig.currentFrame + Math.ceil((AppConfig.totalFrames - 1) * AppConfig.speedMultiplier * (AppConfig.pointerDistance / base.$el.width()));
          }else{
            AppConfig.endFrame = AppConfig.currentFrame + Math.floor((AppConfig.totalFrames - 1) * AppConfig.speedMultiplier * (AppConfig.pointerDistance / base.$el.width()));
          }

          if( AppConfig.disableWrap ) {
            AppConfig.endFrame = Math.min(AppConfig.totalFrames - (AppConfig.zeroBased ? AppConfig.startFrame : 0), AppConfig.endFrame);
            AppConfig.endFrame = Math.max((AppConfig.zeroBased ? 0 : AppConfig.startFrame), AppConfig.endFrame);
          }
          base.refresh();
          AppConfig.monitorStartTime = new Date().getTime();
          AppConfig.pointerStartPosX = base.getPointerEvent(event).pageX;
        }
      }
    };

    /**
     * @method refresh
     * @public
     * Function refeshes the timer and set interval for render cycle.
     *
     */

    base.refresh = function () {
      if (AppConfig.ticker === 0) {
        AppConfig.ticker = setInterval(base.render, Math.round(1000 / AppConfig.framerate));
      }
    };

    /**
     * @method refresh
     * @private
     * Function render the animation frames on the screen with easing effect.
     */

    base.render = function () {
      var frameEasing;
      if (AppConfig.currentFrame !== AppConfig.endFrame) {
        frameEasing = AppConfig.endFrame < AppConfig.currentFrame ? Math.floor((AppConfig.endFrame - AppConfig.currentFrame) * 0.1) : Math.ceil((AppConfig.endFrame - AppConfig.currentFrame) * 0.1);
        base.hidePreviousFrame();
        AppConfig.currentFrame += frameEasing;
        base.showCurrentFrame();
        base.$el.trigger('frameIndexChanged', [base.getNormalizedCurrentFrame(), AppConfig.totalFrames]);
      } else {
        window.clearInterval(AppConfig.ticker);
        AppConfig.ticker = 0;
      }
    };

    /**
     * @method hidePreviousFrame
     * @private
     * Function hide the previous frame in the animation loop.
     */

    base.hidePreviousFrame = function () {
      frames[base.getNormalizedCurrentFrame()].removeClass('current-image').addClass('previous-image');
    };

    /**
     * @method showCurrentFrame
     * @private
     * Function shows the current frame in the animation loop.
     */
    base.showCurrentFrame = function () {
      frames[base.getNormalizedCurrentFrame()].removeClass('previous-image').addClass('current-image');
    };

    /**
     * @method getNormalizedCurrentFrame
     * @private
     * Function normalize and calculate the current frame once the user release the mouse and release touch event.
     */

    base.getNormalizedCurrentFrame = function () {
      var c, e;

      if ( !AppConfig.disableWrap ) {
        c = Math.ceil(AppConfig.currentFrame % AppConfig.totalFrames);
        if (c < 0) {
          c += AppConfig.totalFrames - (AppConfig.zeroBased ? AppConfig.startFrame : 0);
        }
      } else {
        c = Math.min(AppConfig.currentFrame, AppConfig.totalFrames - (AppConfig.zeroBased ? AppConfig.startFrame : 0));
        e = Math.min(AppConfig.endFrame, AppConfig.totalFrames - (AppConfig.zeroBased ? AppConfig.startFrame : 0));
        c = Math.max(c, (AppConfig.zeroBased ? 0 : AppConfig.startFrame));
        e = Math.max(e, (AppConfig.zeroBased ? 0 : AppConfig.startFrame));
        AppConfig.currentFrame = c;
        AppConfig.endFrame = e;
      }

      return c;
    };

    /*
     * @method getCurrentFrame
     * Function returns the current active frame.
     *
     * @return Number
     */

    base.getCurrentFrame = function() {
      return AppConfig.currentFrame;
    };

    /*
     * @method responsive
     * Function calculates and set responsive height and width
     *
     */

    base.responsive = function() {
      if(AppConfig.responsive) {
        base.$el.css({
          height: 'auto', // base.$el.find('.current-image').first().css('height')
          width: '100%'
        });
      }
    };

    /**
     * Function to return with zero padding.
     */
    base.zeroPad = function (num) {
      function pad(number, length) {
        var str = number.toString();
        if(AppConfig.zeroPadding) {
          while (str.length < length) {
            str = '0' + str;
          }
        }
        return str;
      }

      var approximateLog = Math.log(AppConfig.totalFrames + AppConfig.startFrame) / Math.LN10;
      var roundTo = 1e3;
      var roundedLog = Math.round(approximateLog * roundTo) / roundTo;
      var numChars = Math.floor(roundedLog) + 1;
      return pad(num, numChars);
    };

    base.browser = {};

    /**
     * Function to detect if the brower is IE
     * @return {boolean}
     *
     * http://msdn.microsoft.com/en-gb/library/ms537509(v=vs.85).aspx
     */
    base.browser.isIE = function () {
      var rv = -1;
      if (navigator.appName === 'Microsoft Internet Explorer')
      {
        var ua = navigator.userAgent;
        var re  = new RegExp('MSIE ([0-9]{1,}[\\.0-9]{0,})');
        if (re.exec(ua) !== null){
          rv = parseFloat( RegExp.$1 );
        }
      }

      return rv !== -1;
    };


    /**
     * @method getConfig
     * The function returns the extended version of config object the plugin is going to
     * user.
     *
     * @public
     *
     * @return Object
     */
    base.getConfig = function() {
      return AppConfig;
    };

    $.ThreeSixty.defaultOptions = {
      /**
       * @cfg {Boolean} dragging [dragging=false]
       * @private
       * Private propery contains a flags if users is in dragging mode.
       */
      dragging: false,
      /**
       * @cfg {Boolean} ready [ready=false]
       * @private
       * Private propery is set to true is all assets are loading and application is
       * ready to render 360 slider.
       */
      ready: false,
      /**
       * @cfg {Number} pointerStartPosX
       * @private
       * private property mouse pointer start x position when user starts dragging slider.
       */
      pointerStartPosX: 0,
      /**
       * @cfg {Number} pointerEndPosX
       * @private
       * private property mouse pointer start x position when user end dragging slider.
       */
      pointerEndPosX: 0,
      /**
       * @cfg {Number} pointerDistance
       * @private
       * private property contains the distance between the pointerStartPosX and pointerEndPosX
       */
      pointerDistance: 0,
      /**
       * @cfg {Number} monitorStartTime
       * @private
       * private property contains time user took in dragging mouse from pointerStartPosX and pointerEndPosX
       */
      monitorStartTime: 0,
      monitorInt: 10,
      /**
       * @cfg {Number} ticker
       * @private
       * Timer event that renders the 360
       */
      ticker: 0,
      /**
       * @cfg {Number} speedMultiplier
       * This property controls the sensitivity for the 360 slider
       */
      speedMultiplier: 7,
      /**
       * @cfg {Number} totalFrames
       * Set total number for frames used in the 360 rotation
       */
      totalFrames: 180,
      /**
       * @cfg {Number} currentFrame
       * Current frame of the slider.
       */
      currentFrame: 0,
      /**
       * @cfg {Array} endFrame
       * Private perperty contains information about the end frame when user slides the slider.
       */
      endFrame: 0,

      /**
       * start frame
       */
      startFrame: 0,

      /**
       * @cfg {Number} loadedImages
       * Private property contains count of loaded images.
       */
      loadedImages: 0,
      /**
       * @cfg {Array} framerate
       * Set framerate for the slider animation
       */
      framerate: 60,
      /**
       * @cfg {String} domains
       * Set comma seprated list of all parallel domain from where 360 assets needs to be loaded.
       */
      domains: null,
      /**
       * @cfg {String} domain
       * Domain from where assets needs to be loaded. Use this propery is you want to load all assets from
       * single domain.
       */
      domain: '',
      /**
       * @cfg {Boolean} parallel
       * Set to true if you want to load assets from parallel domain. Default false
       */
      parallel: false,
      /**
       * @cfg {Number} queueAmount
       * Set number of calls to be made on parallel domains.
       */
      queueAmount: 8,
      /**
       * @cfg {Number} idle
       * Mouse Inactivite idle time in seconds. If set more than 0 will auto spine the slider
       */
      idle: 0,
      /**
       * @cfg {String} filePrefix
       * Prefix for the image file name before the numeric value.
       */
      filePrefix: '',
      /**
       * @cfg {String} ext [ext=.png]
       * Slider image extension.
       */
      ext: 'png',
      /**
       * @cfg {Object} height [300]
       * Height of the slider
       */
      height: 300,
      /**
       * @cfg {Number} width [300]
       * Width of the slider
       */
      width: 300,
      /**
       * @cfg {Object} styles
       * CSS Styles for the 360 slider
       */
      styles: {},
      /**
       * @cfg {Boolean} navigation[false]
       * State if navigation controls are visible or not.
       */
      navigation: false,
      /**
       * @cfg {Boolean} autoplay[false]
       * Autoplay the 360 animation
       */
      autoplay: false,
      /**
       * @cfg {number} autoplayDirection [1]
       * Direction for autoplay the 360 animation. 1 for right spin, and -1 for left spin.
       */
      autoplayDirection: 1,
      /**
       * Property to disable auto spin
       * @type {Boolean}
       */
      disableSpin: false,
      /**
       * Property to disable infinite wrap
       * @type {Boolean}
       */
      disableWrap: false,
      /**
       * Responsive width
       * @type {Boolean}
       */
      responsive: false,
      /**
       * Zero Padding for filenames
       * @type {Boolean}
       */
      zeroPadding: false,
      /**
       * Zero based for image filenames starting at 0
       * @type {Boolean}
       */
      zeroBased: false,
      /**
       * @type {Array}
       * List of plugins
       */
      plugins: [],
      /**
       * @type {Boolean}
       * Show hand cursor on drag
       */
      showCursor: false,
      /**
       * @cfg {Boolean} drag
       * Set it to false if you want to disable mousedrag or touch events
       */
      drag: true,
      /**
       * @cfg {Function} onReady
       * Callback triggers once all images are loaded and ready to render on the screen
       */
      onReady: function() {},
      /**
       * @cfg {Function} onDragStart
       * Callback triggers when a user initiates dragging
       */
      onDragStart: function() {},
      /**
       * @cfg {Function} onDragStop
       * Callback triggers when a user releases after dragging
       */
      onDragStop: function() {},
      /**
       * @cfg {String} imgList
       * Set ul element where image will be loaded
       */
      imgList: '.threesixty_images',
      /**
       * @cfg {Array} imgArray
       * Use set of images in array to load images
       */
      imgArray: null,
      /**
       * @cfg {Number} playSpeed
       * Value to control the speed of play button rotation
       */
      playSpeed: 100
    };
    base.init();
  };

  $.fn.ThreeSixty = function(options) {
    return Object.create(new $.ThreeSixty(this, options));
  };
}(jQuery));
/**
 *
 * Object.create method for perform as a fallback if method not available.
 * The syntax just takes away the illusion that JavaScript uses Classical Inheritance.
 */
if(typeof Object.create !== 'function') {
  Object.create = function(o) {
    'use strict';

    function F() {}
    F.prototype = o;
    return new F();
  };
}
/*!
 * Knockout JavaScript library v3.4.0
 * (c) Steven Sanderson - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

(function() {(function(n){var x=this||(0,eval)("this"),u=x.document,M=x.navigator,v=x.jQuery,F=x.JSON;(function(n){"function"===typeof define&&define.amd?define(["exports","require"],n):"object"===typeof exports&&"object"===typeof module?n(module.exports||exports):n(x.ko={})})(function(N,O){function J(a,c){return null===a||typeof a in T?a===c:!1}function U(b,c){var d;return function(){d||(d=a.a.setTimeout(function(){d=n;b()},c))}}function V(b,c){var d;return function(){clearTimeout(d);d=a.a.setTimeout(b,c)}}function W(a,
c){c&&c!==I?"beforeChange"===c?this.Kb(a):this.Ha(a,c):this.Lb(a)}function X(a,c){null!==c&&c.k&&c.k()}function Y(a,c){var d=this.Hc,e=d[s];e.R||(this.lb&&this.Ma[c]?(d.Pb(c,a,this.Ma[c]),this.Ma[c]=null,--this.lb):e.r[c]||d.Pb(c,a,e.s?{ia:a}:d.uc(a)))}function K(b,c,d,e){a.d[b]={init:function(b,g,k,l,m){var h,r;a.m(function(){var q=a.a.c(g()),p=!d!==!q,A=!r;if(A||c||p!==h)A&&a.va.Aa()&&(r=a.a.ua(a.f.childNodes(b),!0)),p?(A||a.f.da(b,a.a.ua(r)),a.eb(e?e(m,q):m,b)):a.f.xa(b),h=p},null,{i:b});return{controlsDescendantBindings:!0}}};
a.h.ta[b]=!1;a.f.Z[b]=!0}var a="undefined"!==typeof N?N:{};a.b=function(b,c){for(var d=b.split("."),e=a,f=0;f<d.length-1;f++)e=e[d[f]];e[d[d.length-1]]=c};a.G=function(a,c,d){a[c]=d};a.version="3.4.0";a.b("version",a.version);a.options={deferUpdates:!1,useOnlyNativeEvents:!1};a.a=function(){function b(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function c(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a,b){a.__proto__=b;return a}function e(b,c,d,e){var h=b[c].match(r)||
[];a.a.q(d.match(r),function(b){a.a.pa(h,b,e)});b[c]=h.join(" ")}var f={__proto__:[]}instanceof Array,g="function"===typeof Symbol,k={},l={};k[M&&/Firefox\/2/i.test(M.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];k.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");b(k,function(a,b){if(b.length)for(var c=0,d=b.length;c<d;c++)l[b[c]]=a});var m={propertychange:!0},h=u&&function(){for(var a=3,b=u.createElement("div"),c=
b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",c[0];);return 4<a?a:n}(),r=/\S+/g;return{cc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],q:function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)},o:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},Sb:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d))return a[d];
return null},La:function(b,c){var d=a.a.o(b,c);0<d?b.splice(d,1):0===d&&b.shift()},Tb:function(b){b=b||[];for(var c=[],d=0,e=b.length;d<e;d++)0>a.a.o(c,b[d])&&c.push(b[d]);return c},fb:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;d<e;d++)c.push(b(a[d],d));return c},Ka:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;d<e;d++)b(a[d],d)&&c.push(a[d]);return c},ra:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},pa:function(b,c,d){var e=
a.a.o(a.a.zb(b),c);0>e?d&&b.push(c):d||b.splice(e,1)},ka:f,extend:c,Xa:d,Ya:f?d:c,D:b,Ca:function(a,b){if(!a)return a;var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=b(a[d],d,a));return c},ob:function(b){for(;b.firstChild;)a.removeNode(b.firstChild)},jc:function(b){b=a.a.V(b);for(var c=(b[0]&&b[0].ownerDocument||u).createElement("div"),d=0,e=b.length;d<e;d++)c.appendChild(a.$(b[d]));return c},ua:function(b,c){for(var d=0,e=b.length,h=[];d<e;d++){var m=b[d].cloneNode(!0);h.push(c?a.$(m):m)}return h},
da:function(b,c){a.a.ob(b);if(c)for(var d=0,e=c.length;d<e;d++)b.appendChild(c[d])},qc:function(b,c){var d=b.nodeType?[b]:b;if(0<d.length){for(var e=d[0],h=e.parentNode,m=0,l=c.length;m<l;m++)h.insertBefore(c[m],e);m=0;for(l=d.length;m<l;m++)a.removeNode(d[m])}},za:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.splice(0,1);for(;1<a.length&&a[a.length-1].parentNode!==b;)a.length--;if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)a.push(c),
c=c.nextSibling;a.push(d)}}return a},sc:function(a,b){7>h?a.setAttribute("selected",b):a.selected=b},$a:function(a){return null===a||a===n?"":a.trim?a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},nd:function(a,b){a=a||"";return b.length>a.length?!1:a.substring(0,b.length)===b},Mc:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;a&&a!=
b;)a=a.parentNode;return!!a},nb:function(b){return a.a.Mc(b,b.ownerDocument.documentElement)},Qb:function(b){return!!a.a.Sb(b,a.a.nb)},A:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},Wb:function(b){return a.onError?function(){try{return b.apply(this,arguments)}catch(c){throw a.onError&&a.onError(c),c;}}:b},setTimeout:function(b,c){return setTimeout(a.a.Wb(b),c)},$b:function(b){setTimeout(function(){a.onError&&a.onError(b);throw b;},0)},p:function(b,c,d){var e=a.a.Wb(d);d=h&&m[c];if(a.options.useOnlyNativeEvents||
d||!v)if(d||"function"!=typeof b.addEventListener)if("undefined"!=typeof b.attachEvent){var l=function(a){e.call(b,a)},f="on"+c;b.attachEvent(f,l);a.a.F.oa(b,function(){b.detachEvent(f,l)})}else throw Error("Browser doesn't support addEventListener or attachEvent");else b.addEventListener(c,e,!1);else v(b).bind(c,e)},Da:function(b,c){if(!b||!b.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var d;"input"===a.a.A(b)&&b.type&&"click"==c.toLowerCase()?(d=b.type,d="checkbox"==
d||"radio"==d):d=!1;if(a.options.useOnlyNativeEvents||!v||d)if("function"==typeof u.createEvent)if("function"==typeof b.dispatchEvent)d=u.createEvent(l[c]||"HTMLEvents"),d.initEvent(c,!0,!0,x,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(d);else throw Error("The supplied element doesn't support dispatchEvent");else if(d&&b.click)b.click();else if("undefined"!=typeof b.fireEvent)b.fireEvent("on"+c);else throw Error("Browser doesn't support triggering events");else v(b).trigger(c)},c:function(b){return a.H(b)?
b():b},zb:function(b){return a.H(b)?b.t():b},bb:function(b,c,d){var h;c&&("object"===typeof b.classList?(h=b.classList[d?"add":"remove"],a.a.q(c.match(r),function(a){h.call(b.classList,a)})):"string"===typeof b.className.baseVal?e(b.className,"baseVal",c,d):e(b,"className",c,d))},Za:function(b,c){var d=a.a.c(c);if(null===d||d===n)d="";var e=a.f.firstChild(b);!e||3!=e.nodeType||a.f.nextSibling(e)?a.f.da(b,[b.ownerDocument.createTextNode(d)]):e.data=d;a.a.Rc(b)},rc:function(a,b){a.name=b;if(7>=h)try{a.mergeAttributes(u.createElement("<input name='"+
a.name+"'/>"),!1)}catch(c){}},Rc:function(a){9<=h&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},Nc:function(a){if(h){var b=a.style.width;a.style.width=0;a.style.width=b}},hd:function(b,c){b=a.a.c(b);c=a.a.c(c);for(var d=[],e=b;e<=c;e++)d.push(e);return d},V:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},Yb:function(a){return g?Symbol(a):a},rd:6===h,sd:7===h,C:h,ec:function(b,c){for(var d=a.a.V(b.getElementsByTagName("input")).concat(a.a.V(b.getElementsByTagName("textarea"))),
e="string"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},h=[],m=d.length-1;0<=m;m--)e(d[m])&&h.push(d[m]);return h},ed:function(b){return"string"==typeof b&&(b=a.a.$a(b))?F&&F.parse?F.parse(b):(new Function("return "+b))():null},Eb:function(b,c,d){if(!F||!F.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");
return F.stringify(a.a.c(b),c,d)},fd:function(c,d,e){e=e||{};var h=e.params||{},m=e.includeFields||this.cc,l=c;if("object"==typeof c&&"form"===a.a.A(c))for(var l=c.action,f=m.length-1;0<=f;f--)for(var g=a.a.ec(c,m[f]),k=g.length-1;0<=k;k--)h[g[k].name]=g[k].value;d=a.a.c(d);var r=u.createElement("form");r.style.display="none";r.action=l;r.method="post";for(var n in d)c=u.createElement("input"),c.type="hidden",c.name=n,c.value=a.a.Eb(a.a.c(d[n])),r.appendChild(c);b(h,function(a,b){var c=u.createElement("input");
c.type="hidden";c.name=a;c.value=b;r.appendChild(c)});u.body.appendChild(r);e.submitter?e.submitter(r):r.submit();setTimeout(function(){r.parentNode.removeChild(r)},0)}}}();a.b("utils",a.a);a.b("utils.arrayForEach",a.a.q);a.b("utils.arrayFirst",a.a.Sb);a.b("utils.arrayFilter",a.a.Ka);a.b("utils.arrayGetDistinctValues",a.a.Tb);a.b("utils.arrayIndexOf",a.a.o);a.b("utils.arrayMap",a.a.fb);a.b("utils.arrayPushAll",a.a.ra);a.b("utils.arrayRemoveItem",a.a.La);a.b("utils.extend",a.a.extend);a.b("utils.fieldsIncludedWithJsonPost",
a.a.cc);a.b("utils.getFormFields",a.a.ec);a.b("utils.peekObservable",a.a.zb);a.b("utils.postJson",a.a.fd);a.b("utils.parseJson",a.a.ed);a.b("utils.registerEventHandler",a.a.p);a.b("utils.stringifyJson",a.a.Eb);a.b("utils.range",a.a.hd);a.b("utils.toggleDomNodeCssClass",a.a.bb);a.b("utils.triggerEvent",a.a.Da);a.b("utils.unwrapObservable",a.a.c);a.b("utils.objectForEach",a.a.D);a.b("utils.addOrRemoveItem",a.a.pa);a.b("utils.setTextContent",a.a.Za);a.b("unwrap",a.a.c);Function.prototype.bind||(Function.prototype.bind=
function(a){var c=this;if(1===arguments.length)return function(){return c.apply(a,arguments)};var d=Array.prototype.slice.call(arguments,1);return function(){var e=d.slice(0);e.push.apply(e,arguments);return c.apply(a,e)}});a.a.e=new function(){function a(b,g){var k=b[d];if(!k||"null"===k||!e[k]){if(!g)return n;k=b[d]="ko"+c++;e[k]={}}return e[k]}var c=0,d="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=a(c,!1);return e===n?n:e[d]},set:function(c,d,e){if(e!==n||a(c,!1)!==n)a(c,!0)[d]=
e},clear:function(a){var b=a[d];return b?(delete e[b],a[d]=null,!0):!1},I:function(){return c++ +d}}};a.b("utils.domData",a.a.e);a.b("utils.domData.clear",a.a.e.clear);a.a.F=new function(){function b(b,c){var e=a.a.e.get(b,d);e===n&&c&&(e=[],a.a.e.set(b,d,e));return e}function c(d){var e=b(d,!1);if(e)for(var e=e.slice(0),l=0;l<e.length;l++)e[l](d);a.a.e.clear(d);a.a.F.cleanExternalData(d);if(f[d.nodeType])for(e=d.firstChild;d=e;)e=d.nextSibling,8===d.nodeType&&c(d)}var d=a.a.e.I(),e={1:!0,8:!0,9:!0},
f={1:!0,9:!0};return{oa:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},pc:function(c,e){var l=b(c,!1);l&&(a.a.La(l,e),0==l.length&&a.a.e.set(c,d,n))},$:function(b){if(e[b.nodeType]&&(c(b),f[b.nodeType])){var d=[];a.a.ra(d,b.getElementsByTagName("*"));for(var l=0,m=d.length;l<m;l++)c(d[l])}return b},removeNode:function(b){a.$(b);b.parentNode&&b.parentNode.removeChild(b)},cleanExternalData:function(a){v&&"function"==typeof v.cleanData&&v.cleanData([a])}}};
a.$=a.a.F.$;a.removeNode=a.a.F.removeNode;a.b("cleanNode",a.$);a.b("removeNode",a.removeNode);a.b("utils.domNodeDisposal",a.a.F);a.b("utils.domNodeDisposal.addDisposeCallback",a.a.F.oa);a.b("utils.domNodeDisposal.removeDisposeCallback",a.a.F.pc);(function(){var b=[0,"",""],c=[1,"<table>","</table>"],d=[3,"<table><tbody><tr>","</tr></tbody></table>"],e=[1,"<select multiple='multiple'>","</select>"],f={thead:c,tbody:c,tfoot:c,tr:[2,"<table><tbody>","</tbody></table>"],td:d,th:d,option:e,optgroup:e},
g=8>=a.a.C;a.a.ma=function(c,d){var e;if(v)if(v.parseHTML)e=v.parseHTML(c,d)||[];else{if((e=v.clean([c],d))&&e[0]){for(var h=e[0];h.parentNode&&11!==h.parentNode.nodeType;)h=h.parentNode;h.parentNode&&h.parentNode.removeChild(h)}}else{(e=d)||(e=u);var h=e.parentWindow||e.defaultView||x,r=a.a.$a(c).toLowerCase(),q=e.createElement("div"),p;p=(r=r.match(/^<([a-z]+)[ >]/))&&f[r[1]]||b;r=p[0];p="ignored<div>"+p[1]+c+p[2]+"</div>";"function"==typeof h.innerShiv?q.appendChild(h.innerShiv(p)):(g&&e.appendChild(q),
q.innerHTML=p,g&&q.parentNode.removeChild(q));for(;r--;)q=q.lastChild;e=a.a.V(q.lastChild.childNodes)}return e};a.a.Cb=function(b,c){a.a.ob(b);c=a.a.c(c);if(null!==c&&c!==n)if("string"!=typeof c&&(c=c.toString()),v)v(b).html(c);else for(var d=a.a.ma(c,b.ownerDocument),e=0;e<d.length;e++)b.appendChild(d[e])}})();a.b("utils.parseHtmlFragment",a.a.ma);a.b("utils.setHtml",a.a.Cb);a.M=function(){function b(c,e){if(c)if(8==c.nodeType){var f=a.M.lc(c.nodeValue);null!=f&&e.push({Lc:c,cd:f})}else if(1==c.nodeType)for(var f=
0,g=c.childNodes,k=g.length;f<k;f++)b(g[f],e)}var c={};return{wb:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);c[b]=a;return"\x3c!--[ko_memo:"+b+"]--\x3e"},xc:function(a,b){var f=c[a];if(f===n)throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return f.apply(null,b||[]),
!0}finally{delete c[a]}},yc:function(c,e){var f=[];b(c,f);for(var g=0,k=f.length;g<k;g++){var l=f[g].Lc,m=[l];e&&a.a.ra(m,e);a.M.xc(f[g].cd,m);l.nodeValue="";l.parentNode&&l.parentNode.removeChild(l)}},lc:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}();a.b("memoization",a.M);a.b("memoization.memoize",a.M.wb);a.b("memoization.unmemoize",a.M.xc);a.b("memoization.parseMemoText",a.M.lc);a.b("memoization.unmemoizeDomNodeAndDescendants",a.M.yc);a.Y=function(){function b(){if(e)for(var b=
e,c=0,m;g<e;)if(m=d[g++]){if(g>b){if(5E3<=++c){g=e;a.a.$b(Error("'Too much recursion' after processing "+c+" task groups."));break}b=e}try{m()}catch(h){a.a.$b(h)}}}function c(){b();g=e=d.length=0}var d=[],e=0,f=1,g=0;return{scheduler:x.MutationObserver?function(a){var b=u.createElement("div");(new MutationObserver(a)).observe(b,{attributes:!0});return function(){b.classList.toggle("foo")}}(c):u&&"onreadystatechange"in u.createElement("script")?function(a){var b=u.createElement("script");b.onreadystatechange=
function(){b.onreadystatechange=null;u.documentElement.removeChild(b);b=null;a()};u.documentElement.appendChild(b)}:function(a){setTimeout(a,0)},Wa:function(b){e||a.Y.scheduler(c);d[e++]=b;return f++},cancel:function(a){a-=f-e;a>=g&&a<e&&(d[a]=null)},resetForTesting:function(){var a=e-g;g=e=d.length=0;return a},md:b}}();a.b("tasks",a.Y);a.b("tasks.schedule",a.Y.Wa);a.b("tasks.runEarly",a.Y.md);a.ya={throttle:function(b,c){b.throttleEvaluation=c;var d=null;return a.B({read:b,write:function(e){clearTimeout(d);
d=a.a.setTimeout(function(){b(e)},c)}})},rateLimit:function(a,c){var d,e,f;"number"==typeof c?d=c:(d=c.timeout,e=c.method);a.cb=!1;f="notifyWhenChangesStop"==e?V:U;a.Ta(function(a){return f(a,d)})},deferred:function(b,c){if(!0!==c)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");b.cb||(b.cb=!0,b.Ta(function(c){var e;return function(){a.Y.cancel(e);e=a.Y.Wa(c);b.notifySubscribers(n,"dirty")}}))},notify:function(a,c){a.equalityComparer=
"always"==c?null:J}};var T={undefined:1,"boolean":1,number:1,string:1};a.b("extenders",a.ya);a.vc=function(b,c,d){this.ia=b;this.gb=c;this.Kc=d;this.R=!1;a.G(this,"dispose",this.k)};a.vc.prototype.k=function(){this.R=!0;this.Kc()};a.J=function(){a.a.Ya(this,D);D.rb(this)};var I="change",D={rb:function(a){a.K={};a.Nb=1},X:function(b,c,d){var e=this;d=d||I;var f=new a.vc(e,c?b.bind(c):b,function(){a.a.La(e.K[d],f);e.Ia&&e.Ia(d)});e.sa&&e.sa(d);e.K[d]||(e.K[d]=[]);e.K[d].push(f);return f},notifySubscribers:function(b,
c){c=c||I;c===I&&this.zc();if(this.Pa(c))try{a.l.Ub();for(var d=this.K[c].slice(0),e=0,f;f=d[e];++e)f.R||f.gb(b)}finally{a.l.end()}},Na:function(){return this.Nb},Uc:function(a){return this.Na()!==a},zc:function(){++this.Nb},Ta:function(b){var c=this,d=a.H(c),e,f,g;c.Ha||(c.Ha=c.notifySubscribers,c.notifySubscribers=W);var k=b(function(){c.Mb=!1;d&&g===c&&(g=c());e=!1;c.tb(f,g)&&c.Ha(f=g)});c.Lb=function(a){c.Mb=e=!0;g=a;k()};c.Kb=function(a){e||(f=a,c.Ha(a,"beforeChange"))}},Pa:function(a){return this.K[a]&&
this.K[a].length},Sc:function(b){if(b)return this.K[b]&&this.K[b].length||0;var c=0;a.a.D(this.K,function(a,b){"dirty"!==a&&(c+=b.length)});return c},tb:function(a,c){return!this.equalityComparer||!this.equalityComparer(a,c)},extend:function(b){var c=this;b&&a.a.D(b,function(b,e){var f=a.ya[b];"function"==typeof f&&(c=f(c,e)||c)});return c}};a.G(D,"subscribe",D.X);a.G(D,"extend",D.extend);a.G(D,"getSubscriptionsCount",D.Sc);a.a.ka&&a.a.Xa(D,Function.prototype);a.J.fn=D;a.hc=function(a){return null!=
a&&"function"==typeof a.X&&"function"==typeof a.notifySubscribers};a.b("subscribable",a.J);a.b("isSubscribable",a.hc);a.va=a.l=function(){function b(a){d.push(e);e=a}function c(){e=d.pop()}var d=[],e,f=0;return{Ub:b,end:c,oc:function(b){if(e){if(!a.hc(b))throw Error("Only subscribable things can act as dependencies");e.gb.call(e.Gc,b,b.Cc||(b.Cc=++f))}},w:function(a,d,e){try{return b(),a.apply(d,e||[])}finally{c()}},Aa:function(){if(e)return e.m.Aa()},Sa:function(){if(e)return e.Sa}}}();a.b("computedContext",
a.va);a.b("computedContext.getDependenciesCount",a.va.Aa);a.b("computedContext.isInitial",a.va.Sa);a.b("ignoreDependencies",a.qd=a.l.w);var E=a.a.Yb("_latestValue");a.N=function(b){function c(){if(0<arguments.length)return c.tb(c[E],arguments[0])&&(c.ga(),c[E]=arguments[0],c.fa()),this;a.l.oc(c);return c[E]}c[E]=b;a.a.ka||a.a.extend(c,a.J.fn);a.J.fn.rb(c);a.a.Ya(c,B);a.options.deferUpdates&&a.ya.deferred(c,!0);return c};var B={equalityComparer:J,t:function(){return this[E]},fa:function(){this.notifySubscribers(this[E])},
ga:function(){this.notifySubscribers(this[E],"beforeChange")}};a.a.ka&&a.a.Xa(B,a.J.fn);var H=a.N.gd="__ko_proto__";B[H]=a.N;a.Oa=function(b,c){return null===b||b===n||b[H]===n?!1:b[H]===c?!0:a.Oa(b[H],c)};a.H=function(b){return a.Oa(b,a.N)};a.Ba=function(b){return"function"==typeof b&&b[H]===a.N||"function"==typeof b&&b[H]===a.B&&b.Vc?!0:!1};a.b("observable",a.N);a.b("isObservable",a.H);a.b("isWriteableObservable",a.Ba);a.b("isWritableObservable",a.Ba);a.b("observable.fn",B);a.G(B,"peek",B.t);a.G(B,
"valueHasMutated",B.fa);a.G(B,"valueWillMutate",B.ga);a.la=function(b){b=b||[];if("object"!=typeof b||!("length"in b))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");b=a.N(b);a.a.Ya(b,a.la.fn);return b.extend({trackArrayChanges:!0})};a.la.fn={remove:function(b){for(var c=this.t(),d=[],e="function"!=typeof b||a.H(b)?function(a){return a===b}:b,f=0;f<c.length;f++){var g=c[f];e(g)&&(0===d.length&&this.ga(),d.push(g),c.splice(f,1),f--)}d.length&&
this.fa();return d},removeAll:function(b){if(b===n){var c=this.t(),d=c.slice(0);this.ga();c.splice(0,c.length);this.fa();return d}return b?this.remove(function(c){return 0<=a.a.o(b,c)}):[]},destroy:function(b){var c=this.t(),d="function"!=typeof b||a.H(b)?function(a){return a===b}:b;this.ga();for(var e=c.length-1;0<=e;e--)d(c[e])&&(c[e]._destroy=!0);this.fa()},destroyAll:function(b){return b===n?this.destroy(function(){return!0}):b?this.destroy(function(c){return 0<=a.a.o(b,c)}):[]},indexOf:function(b){var c=
this();return a.a.o(c,b)},replace:function(a,c){var d=this.indexOf(a);0<=d&&(this.ga(),this.t()[d]=c,this.fa())}};a.a.ka&&a.a.Xa(a.la.fn,a.N.fn);a.a.q("pop push reverse shift sort splice unshift".split(" "),function(b){a.la.fn[b]=function(){var a=this.t();this.ga();this.Vb(a,b,arguments);var d=a[b].apply(a,arguments);this.fa();return d===a?this:d}});a.a.q(["slice"],function(b){a.la.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.b("observableArray",a.la);a.ya.trackArrayChanges=function(b,
c){function d(){if(!e){e=!0;var c=b.notifySubscribers;b.notifySubscribers=function(a,b){b&&b!==I||++k;return c.apply(this,arguments)};var d=[].concat(b.t()||[]);f=null;g=b.X(function(c){c=[].concat(c||[]);if(b.Pa("arrayChange")){var e;if(!f||1<k)f=a.a.ib(d,c,b.hb);e=f}d=c;f=null;k=0;e&&e.length&&b.notifySubscribers(e,"arrayChange")})}}b.hb={};c&&"object"==typeof c&&a.a.extend(b.hb,c);b.hb.sparse=!0;if(!b.Vb){var e=!1,f=null,g,k=0,l=b.sa,m=b.Ia;b.sa=function(a){l&&l.call(b,a);"arrayChange"===a&&d()};
b.Ia=function(a){m&&m.call(b,a);"arrayChange"!==a||b.Pa("arrayChange")||(g.k(),e=!1)};b.Vb=function(b,c,d){function m(a,b,c){return l[l.length]={status:a,value:b,index:c}}if(e&&!k){var l=[],g=b.length,t=d.length,G=0;switch(c){case "push":G=g;case "unshift":for(c=0;c<t;c++)m("added",d[c],G+c);break;case "pop":G=g-1;case "shift":g&&m("deleted",b[G],G);break;case "splice":c=Math.min(Math.max(0,0>d[0]?g+d[0]:d[0]),g);for(var g=1===t?g:Math.min(c+(d[1]||0),g),t=c+t-2,G=Math.max(g,t),P=[],n=[],Q=2;c<G;++c,
++Q)c<g&&n.push(m("deleted",b[c],c)),c<t&&P.push(m("added",d[Q],c));a.a.dc(n,P);break;default:return}f=l}}}};var s=a.a.Yb("_state");a.m=a.B=function(b,c,d){function e(){if(0<arguments.length){if("function"===typeof f)f.apply(g.pb,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}a.l.oc(e);(g.S||g.s&&e.Qa())&&e.aa();return g.T}"object"===typeof b?d=b:(d=d||{},b&&(d.read=
b));if("function"!=typeof d.read)throw Error("Pass a function that returns the value of the ko.computed");var f=d.write,g={T:n,S:!0,Ra:!1,Fb:!1,R:!1,Va:!1,s:!1,jd:d.read,pb:c||d.owner,i:d.disposeWhenNodeIsRemoved||d.i||null,wa:d.disposeWhen||d.wa,mb:null,r:{},L:0,bc:null};e[s]=g;e.Vc="function"===typeof f;a.a.ka||a.a.extend(e,a.J.fn);a.J.fn.rb(e);a.a.Ya(e,z);d.pure?(g.Va=!0,g.s=!0,a.a.extend(e,$)):d.deferEvaluation&&a.a.extend(e,aa);a.options.deferUpdates&&a.ya.deferred(e,!0);g.i&&(g.Fb=!0,g.i.nodeType||
(g.i=null));g.s||d.deferEvaluation||e.aa();g.i&&e.ba()&&a.a.F.oa(g.i,g.mb=function(){e.k()});return e};var z={equalityComparer:J,Aa:function(){return this[s].L},Pb:function(a,c,d){if(this[s].Va&&c===this)throw Error("A 'pure' computed must not be called recursively");this[s].r[a]=d;d.Ga=this[s].L++;d.na=c.Na()},Qa:function(){var a,c,d=this[s].r;for(a in d)if(d.hasOwnProperty(a)&&(c=d[a],c.ia.Uc(c.na)))return!0},bd:function(){this.Fa&&!this[s].Ra&&this.Fa()},ba:function(){return this[s].S||0<this[s].L},
ld:function(){this.Mb||this.ac()},uc:function(a){if(a.cb&&!this[s].i){var c=a.X(this.bd,this,"dirty"),d=a.X(this.ld,this);return{ia:a,k:function(){c.k();d.k()}}}return a.X(this.ac,this)},ac:function(){var b=this,c=b.throttleEvaluation;c&&0<=c?(clearTimeout(this[s].bc),this[s].bc=a.a.setTimeout(function(){b.aa(!0)},c)):b.Fa?b.Fa():b.aa(!0)},aa:function(b){var c=this[s],d=c.wa;if(!c.Ra&&!c.R){if(c.i&&!a.a.nb(c.i)||d&&d()){if(!c.Fb){this.k();return}}else c.Fb=!1;c.Ra=!0;try{this.Qc(b)}finally{c.Ra=!1}c.L||
this.k()}},Qc:function(b){var c=this[s],d=c.Va?n:!c.L,e={Hc:this,Ma:c.r,lb:c.L};a.l.Ub({Gc:e,gb:Y,m:this,Sa:d});c.r={};c.L=0;e=this.Pc(c,e);this.tb(c.T,e)&&(c.s||this.notifySubscribers(c.T,"beforeChange"),c.T=e,c.s?this.zc():b&&this.notifySubscribers(c.T));d&&this.notifySubscribers(c.T,"awake")},Pc:function(b,c){try{var d=b.jd;return b.pb?d.call(b.pb):d()}finally{a.l.end(),c.lb&&!b.s&&a.a.D(c.Ma,X),b.S=!1}},t:function(){var a=this[s];(a.S&&!a.L||a.s&&this.Qa())&&this.aa();return a.T},Ta:function(b){a.J.fn.Ta.call(this,
b);this.Fa=function(){this.Kb(this[s].T);this[s].S=!0;this.Lb(this)}},k:function(){var b=this[s];!b.s&&b.r&&a.a.D(b.r,function(a,b){b.k&&b.k()});b.i&&b.mb&&a.a.F.pc(b.i,b.mb);b.r=null;b.L=0;b.R=!0;b.S=!1;b.s=!1;b.i=null}},$={sa:function(b){var c=this,d=c[s];if(!d.R&&d.s&&"change"==b){d.s=!1;if(d.S||c.Qa())d.r=null,d.L=0,d.S=!0,c.aa();else{var e=[];a.a.D(d.r,function(a,b){e[b.Ga]=a});a.a.q(e,function(a,b){var e=d.r[a],l=c.uc(e.ia);l.Ga=b;l.na=e.na;d.r[a]=l})}d.R||c.notifySubscribers(d.T,"awake")}},
Ia:function(b){var c=this[s];c.R||"change"!=b||this.Pa("change")||(a.a.D(c.r,function(a,b){b.k&&(c.r[a]={ia:b.ia,Ga:b.Ga,na:b.na},b.k())}),c.s=!0,this.notifySubscribers(n,"asleep"))},Na:function(){var b=this[s];b.s&&(b.S||this.Qa())&&this.aa();return a.J.fn.Na.call(this)}},aa={sa:function(a){"change"!=a&&"beforeChange"!=a||this.t()}};a.a.ka&&a.a.Xa(z,a.J.fn);var R=a.N.gd;a.m[R]=a.N;z[R]=a.m;a.Xc=function(b){return a.Oa(b,a.m)};a.Yc=function(b){return a.Oa(b,a.m)&&b[s]&&b[s].Va};a.b("computed",a.m);
a.b("dependentObservable",a.m);a.b("isComputed",a.Xc);a.b("isPureComputed",a.Yc);a.b("computed.fn",z);a.G(z,"peek",z.t);a.G(z,"dispose",z.k);a.G(z,"isActive",z.ba);a.G(z,"getDependenciesCount",z.Aa);a.nc=function(b,c){if("function"===typeof b)return a.m(b,c,{pure:!0});b=a.a.extend({},b);b.pure=!0;return a.m(b,c)};a.b("pureComputed",a.nc);(function(){function b(a,f,g){g=g||new d;a=f(a);if("object"!=typeof a||null===a||a===n||a instanceof RegExp||a instanceof Date||a instanceof String||a instanceof
Number||a instanceof Boolean)return a;var k=a instanceof Array?[]:{};g.save(a,k);c(a,function(c){var d=f(a[c]);switch(typeof d){case "boolean":case "number":case "string":case "function":k[c]=d;break;case "object":case "undefined":var h=g.get(d);k[c]=h!==n?h:b(d,f,g)}});return k}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[];this.Ib=[]}a.wc=function(c){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");
return b(c,function(b){for(var c=0;a.H(b)&&10>c;c++)b=b();return b})};a.toJSON=function(b,c,d){b=a.wc(b);return a.a.Eb(b,c,d)};d.prototype={save:function(b,c){var d=a.a.o(this.keys,b);0<=d?this.Ib[d]=c:(this.keys.push(b),this.Ib.push(c))},get:function(b){b=a.a.o(this.keys,b);return 0<=b?this.Ib[b]:n}}})();a.b("toJS",a.wc);a.b("toJSON",a.toJSON);(function(){a.j={u:function(b){switch(a.a.A(b)){case "option":return!0===b.__ko__hasDomDataOptionValue__?a.a.e.get(b,a.d.options.xb):7>=a.a.C?b.getAttributeNode("value")&&
b.getAttributeNode("value").specified?b.value:b.text:b.value;case "select":return 0<=b.selectedIndex?a.j.u(b.options[b.selectedIndex]):n;default:return b.value}},ha:function(b,c,d){switch(a.a.A(b)){case "option":switch(typeof c){case "string":a.a.e.set(b,a.d.options.xb,n);"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__;b.value=c;break;default:a.a.e.set(b,a.d.options.xb,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"===typeof c?c:""}break;case "select":if(""===c||
null===c)c=n;for(var e=-1,f=0,g=b.options.length,k;f<g;++f)if(k=a.j.u(b.options[f]),k==c||""==k&&c===n){e=f;break}if(d||0<=e||c===n&&1<b.size)b.selectedIndex=e;break;default:if(null===c||c===n)c="";b.value=c}}}})();a.b("selectExtensions",a.j);a.b("selectExtensions.readValue",a.j.u);a.b("selectExtensions.writeValue",a.j.ha);a.h=function(){function b(b){b=a.a.$a(b);123===b.charCodeAt(0)&&(b=b.slice(1,-1));var c=[],d=b.match(e),r,k=[],p=0;if(d){d.push(",");for(var A=0,y;y=d[A];++A){var t=y.charCodeAt(0);
if(44===t){if(0>=p){c.push(r&&k.length?{key:r,value:k.join("")}:{unknown:r||k.join("")});r=p=0;k=[];continue}}else if(58===t){if(!p&&!r&&1===k.length){r=k.pop();continue}}else 47===t&&A&&1<y.length?(t=d[A-1].match(f))&&!g[t[0]]&&(b=b.substr(b.indexOf(y)+1),d=b.match(e),d.push(","),A=-1,y="/"):40===t||123===t||91===t?++p:41===t||125===t||93===t?--p:r||k.length||34!==t&&39!==t||(y=y.slice(1,-1));k.push(y)}}return c}var c=["true","false","null","undefined"],d=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,
e=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),f=/[\])"'A-Za-z0-9_$]+$/,g={"in":1,"return":1,"typeof":1},k={};return{ta:[],ea:k,yb:b,Ua:function(e,m){function h(b,e){var m;if(!A){var l=a.getBindingHandler(b);if(l&&l.preprocess&&!(e=l.preprocess(e,b,h)))return;if(l=k[b])m=e,0<=a.a.o(c,m)?m=!1:(l=m.match(d),m=null===l?!1:l[1]?"Object("+l[1]+")"+l[2]:m),l=m;l&&g.push("'"+b+"':function(_z){"+m+"=_z}")}p&&(e=
"function(){return "+e+" }");f.push("'"+b+"':"+e)}m=m||{};var f=[],g=[],p=m.valueAccessors,A=m.bindingParams,y="string"===typeof e?b(e):e;a.a.q(y,function(a){h(a.key||a.unknown,a.value)});g.length&&h("_ko_property_writers","{"+g.join(",")+" }");return f.join(",")},ad:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},Ea:function(b,c,d,e,f){if(b&&a.H(b))!a.Ba(b)||f&&b.t()===e||b(e);else if((b=c.get("_ko_property_writers"))&&b[d])b[d](e)}}}();a.b("expressionRewriting",a.h);a.b("expressionRewriting.bindingRewriteValidators",
a.h.ta);a.b("expressionRewriting.parseObjectLiteral",a.h.yb);a.b("expressionRewriting.preProcessBindings",a.h.Ua);a.b("expressionRewriting._twoWayBindings",a.h.ea);a.b("jsonExpressionRewriting",a.h);a.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",a.h.Ua);(function(){function b(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function c(a){return 8==a.nodeType&&k.test(f?a.text:a.nodeValue)}function d(a,d){for(var e=a,f=1,l=[];e=e.nextSibling;){if(c(e)&&(f--,0===f))return l;l.push(e);
b(e)&&f++}if(!d)throw Error("Cannot find closing comment tag to match: "+a.nodeValue);return null}function e(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=u&&"\x3c!--test--\x3e"===u.createComment("test").text,g=f?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,k=f?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};a.f={Z:{},childNodes:function(a){return b(a)?d(a):a.childNodes},xa:function(c){if(b(c)){c=a.f.childNodes(c);for(var d=
0,e=c.length;d<e;d++)a.removeNode(c[d])}else a.a.ob(c)},da:function(c,d){if(b(c)){a.f.xa(c);for(var e=c.nextSibling,f=0,l=d.length;f<l;f++)e.parentNode.insertBefore(d[f],e)}else a.a.da(c,d)},mc:function(a,c){b(a)?a.parentNode.insertBefore(c,a.nextSibling):a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)},gc:function(c,d,e){e?b(c)?c.parentNode.insertBefore(d,e.nextSibling):e.nextSibling?c.insertBefore(d,e.nextSibling):c.appendChild(d):a.f.mc(c,d)},firstChild:function(a){return b(a)?!a.nextSibling||
c(a.nextSibling)?null:a.nextSibling:a.firstChild},nextSibling:function(a){b(a)&&(a=e(a));return a.nextSibling&&c(a.nextSibling)?null:a.nextSibling},Tc:b,pd:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},kc:function(d){if(l[a.a.A(d)]){var h=d.firstChild;if(h){do if(1===h.nodeType){var f;f=h.firstChild;var g=null;if(f){do if(g)g.push(f);else if(b(f)){var k=e(f,!0);k?f=k:g=[f]}else c(f)&&(g=[f]);while(f=f.nextSibling)}if(f=g)for(g=h.nextSibling,k=0;k<f.length;k++)g?d.insertBefore(f[k],
g):d.appendChild(f[k])}while(h=h.nextSibling)}}}}})();a.b("virtualElements",a.f);a.b("virtualElements.allowedBindings",a.f.Z);a.b("virtualElements.emptyNode",a.f.xa);a.b("virtualElements.insertAfter",a.f.gc);a.b("virtualElements.prepend",a.f.mc);a.b("virtualElements.setDomNodeChildren",a.f.da);(function(){a.Q=function(){this.Fc={}};a.a.extend(a.Q.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=b.getAttribute("data-bind")||a.g.getComponentNameForNode(b);case 8:return a.f.Tc(b);
default:return!1}},getBindings:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b):null;return a.g.Ob(d,b,c,!1)},getBindingAccessors:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b,{valueAccessors:!0}):null;return a.g.Ob(d,b,c,!0)},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute("data-bind");case 8:return a.f.pd(b);default:return null}},parseBindingsString:function(b,c,d,e){try{var f=this.Fc,g=b+(e&&e.valueAccessors||
""),k;if(!(k=f[g])){var l,m="with($context){with($data||{}){return{"+a.h.Ua(b,e)+"}}}";l=new Function("$context","$element",m);k=f[g]=l}return k(c,d)}catch(h){throw h.message="Unable to parse bindings.\nBindings value: "+b+"\nMessage: "+h.message,h;}}});a.Q.instance=new a.Q})();a.b("bindingProvider",a.Q);(function(){function b(a){return function(){return a}}function c(a){return a()}function d(b){return a.a.Ca(a.l.w(b),function(a,c){return function(){return b()[c]}})}function e(c,e,h){return"function"===
typeof c?d(c.bind(null,e,h)):a.a.Ca(c,b)}function f(a,b){return d(this.getBindings.bind(this,a,b))}function g(b,c,d){var e,h=a.f.firstChild(c),f=a.Q.instance,m=f.preprocessNode;if(m){for(;e=h;)h=a.f.nextSibling(e),m.call(f,e);h=a.f.firstChild(c)}for(;e=h;)h=a.f.nextSibling(e),k(b,e,d)}function k(b,c,d){var e=!0,h=1===c.nodeType;h&&a.f.kc(c);if(h&&d||a.Q.instance.nodeHasBindings(c))e=m(c,null,b,d).shouldBindDescendants;e&&!r[a.a.A(c)]&&g(b,c,!h)}function l(b){var c=[],d={},e=[];a.a.D(b,function Z(h){if(!d[h]){var f=
a.getBindingHandler(h);f&&(f.after&&(e.push(h),a.a.q(f.after,function(c){if(b[c]){if(-1!==a.a.o(e,c))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+e.join(", "));Z(c)}}),e.length--),c.push({key:h,fc:f}));d[h]=!0}});return c}function m(b,d,e,h){var m=a.a.e.get(b,q);if(!d){if(m)throw Error("You cannot apply bindings multiple times to the same element.");a.a.e.set(b,q,!0)}!m&&h&&a.tc(b,e);var g;if(d&&"function"!==typeof d)g=d;else{var k=a.Q.instance,r=k.getBindingAccessors||
f,p=a.B(function(){(g=d?d(e,b):r.call(k,b,e))&&e.P&&e.P();return g},null,{i:b});g&&p.ba()||(p=null)}var u;if(g){var v=p?function(a){return function(){return c(p()[a])}}:function(a){return g[a]},s=function(){return a.a.Ca(p?p():g,c)};s.get=function(a){return g[a]&&c(v(a))};s.has=function(a){return a in g};h=l(g);a.a.q(h,function(c){var d=c.fc.init,h=c.fc.update,f=c.key;if(8===b.nodeType&&!a.f.Z[f])throw Error("The binding '"+f+"' cannot be used with virtual elements");try{"function"==typeof d&&a.l.w(function(){var a=
d(b,v(f),s,e.$data,e);if(a&&a.controlsDescendantBindings){if(u!==n)throw Error("Multiple bindings ("+u+" and "+f+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");u=f}}),"function"==typeof h&&a.B(function(){h(b,v(f),s,e.$data,e)},null,{i:b})}catch(m){throw m.message='Unable to process binding "'+f+": "+g[f]+'"\nMessage: '+m.message,m;}})}return{shouldBindDescendants:u===n}}function h(b){return b&&b instanceof a.U?b:new a.U(b)}
a.d={};var r={script:!0,textarea:!0,template:!0};a.getBindingHandler=function(b){return a.d[b]};a.U=function(b,c,d,e){var h=this,f="function"==typeof b&&!a.H(b),m,g=a.B(function(){var m=f?b():b,l=a.a.c(m);c?(c.P&&c.P(),a.a.extend(h,c),g&&(h.P=g)):(h.$parents=[],h.$root=l,h.ko=a);h.$rawData=m;h.$data=l;d&&(h[d]=l);e&&e(h,c,l);return h.$data},null,{wa:function(){return m&&!a.a.Qb(m)},i:!0});g.ba()&&(h.P=g,g.equalityComparer=null,m=[],g.Ac=function(b){m.push(b);a.a.F.oa(b,function(b){a.a.La(m,b);m.length||
(g.k(),h.P=g=n)})})};a.U.prototype.createChildContext=function(b,c,d){return new a.U(b,this,c,function(a,b){a.$parentContext=b;a.$parent=b.$data;a.$parents=(b.$parents||[]).slice(0);a.$parents.unshift(a.$parent);d&&d(a)})};a.U.prototype.extend=function(b){return new a.U(this.P||this.$data,this,null,function(c,d){c.$rawData=d.$rawData;a.a.extend(c,"function"==typeof b?b():b)})};var q=a.a.e.I(),p=a.a.e.I();a.tc=function(b,c){if(2==arguments.length)a.a.e.set(b,p,c),c.P&&c.P.Ac(b);else return a.a.e.get(b,
p)};a.Ja=function(b,c,d){1===b.nodeType&&a.f.kc(b);return m(b,c,h(d),!0)};a.Dc=function(b,c,d){d=h(d);return a.Ja(b,e(c,d,b),d)};a.eb=function(a,b){1!==b.nodeType&&8!==b.nodeType||g(h(a),b,!0)};a.Rb=function(a,b){!v&&x.jQuery&&(v=x.jQuery);if(b&&1!==b.nodeType&&8!==b.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");b=b||x.document.body;k(h(a),b,!0)};a.kb=function(b){switch(b.nodeType){case 1:case 8:var c=a.tc(b);if(c)return c;
if(b.parentNode)return a.kb(b.parentNode)}return n};a.Jc=function(b){return(b=a.kb(b))?b.$data:n};a.b("bindingHandlers",a.d);a.b("applyBindings",a.Rb);a.b("applyBindingsToDescendants",a.eb);a.b("applyBindingAccessorsToNode",a.Ja);a.b("applyBindingsToNode",a.Dc);a.b("contextFor",a.kb);a.b("dataFor",a.Jc)})();(function(b){function c(c,e){var m=f.hasOwnProperty(c)?f[c]:b,h;m?m.X(e):(m=f[c]=new a.J,m.X(e),d(c,function(b,d){var e=!(!d||!d.synchronous);g[c]={definition:b,Zc:e};delete f[c];h||e?m.notifySubscribers(b):
a.Y.Wa(function(){m.notifySubscribers(b)})}),h=!0)}function d(a,b){e("getConfig",[a],function(c){c?e("loadComponent",[a,c],function(a){b(a,c)}):b(null,null)})}function e(c,d,f,h){h||(h=a.g.loaders.slice(0));var g=h.shift();if(g){var q=g[c];if(q){var p=!1;if(q.apply(g,d.concat(function(a){p?f(null):null!==a?f(a):e(c,d,f,h)}))!==b&&(p=!0,!g.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.");}else e(c,d,f,h)}else f(null)}
var f={},g={};a.g={get:function(d,e){var f=g.hasOwnProperty(d)?g[d]:b;f?f.Zc?a.l.w(function(){e(f.definition)}):a.Y.Wa(function(){e(f.definition)}):c(d,e)},Xb:function(a){delete g[a]},Jb:e};a.g.loaders=[];a.b("components",a.g);a.b("components.get",a.g.get);a.b("components.clearCachedDefinition",a.g.Xb)})();(function(){function b(b,c,d,e){function g(){0===--y&&e(k)}var k={},y=2,t=d.template;d=d.viewModel;t?f(c,t,function(c){a.g.Jb("loadTemplate",[b,c],function(a){k.template=a;g()})}):g();d?f(c,d,function(c){a.g.Jb("loadViewModel",
[b,c],function(a){k[l]=a;g()})}):g()}function c(a,b,d){if("function"===typeof b)d(function(a){return new b(a)});else if("function"===typeof b[l])d(b[l]);else if("instance"in b){var e=b.instance;d(function(){return e})}else"viewModel"in b?c(a,b.viewModel,d):a("Unknown viewModel value: "+b)}function d(b){switch(a.a.A(b)){case "script":return a.a.ma(b.text);case "textarea":return a.a.ma(b.value);case "template":if(e(b.content))return a.a.ua(b.content.childNodes)}return a.a.ua(b.childNodes)}function e(a){return x.DocumentFragment?
a instanceof DocumentFragment:a&&11===a.nodeType}function f(a,b,c){"string"===typeof b.require?O||x.require?(O||x.require)([b.require],c):a("Uses require, but no AMD loader is present"):c(b)}function g(a){return function(b){throw Error("Component '"+a+"': "+b);}}var k={};a.g.register=function(b,c){if(!c)throw Error("Invalid configuration for "+b);if(a.g.ub(b))throw Error("Component "+b+" is already registered");k[b]=c};a.g.ub=function(a){return k.hasOwnProperty(a)};a.g.od=function(b){delete k[b];
a.g.Xb(b)};a.g.Zb={getConfig:function(a,b){b(k.hasOwnProperty(a)?k[a]:null)},loadComponent:function(a,c,d){var e=g(a);f(e,c,function(c){b(a,e,c,d)})},loadTemplate:function(b,c,f){b=g(b);if("string"===typeof c)f(a.a.ma(c));else if(c instanceof Array)f(c);else if(e(c))f(a.a.V(c.childNodes));else if(c.element)if(c=c.element,x.HTMLElement?c instanceof HTMLElement:c&&c.tagName&&1===c.nodeType)f(d(c));else if("string"===typeof c){var l=u.getElementById(c);l?f(d(l)):b("Cannot find element with ID "+c)}else b("Unknown element type: "+
c);else b("Unknown template value: "+c)},loadViewModel:function(a,b,d){c(g(a),b,d)}};var l="createViewModel";a.b("components.register",a.g.register);a.b("components.isRegistered",a.g.ub);a.b("components.unregister",a.g.od);a.b("components.defaultLoader",a.g.Zb);a.g.loaders.push(a.g.Zb);a.g.Bc=k})();(function(){function b(b,e){var f=b.getAttribute("params");if(f){var f=c.parseBindingsString(f,e,b,{valueAccessors:!0,bindingParams:!0}),f=a.a.Ca(f,function(c){return a.m(c,null,{i:b})}),g=a.a.Ca(f,function(c){var e=
c.t();return c.ba()?a.m({read:function(){return a.a.c(c())},write:a.Ba(e)&&function(a){c()(a)},i:b}):e});g.hasOwnProperty("$raw")||(g.$raw=f);return g}return{$raw:{}}}a.g.getComponentNameForNode=function(b){var c=a.a.A(b);if(a.g.ub(c)&&(-1!=c.indexOf("-")||"[object HTMLUnknownElement]"==""+b||8>=a.a.C&&b.tagName===c))return c};a.g.Ob=function(c,e,f,g){if(1===e.nodeType){var k=a.g.getComponentNameForNode(e);if(k){c=c||{};if(c.component)throw Error('Cannot use the "component" binding on a custom element matching a component');
var l={name:k,params:b(e,f)};c.component=g?function(){return l}:l}}return c};var c=new a.Q;9>a.a.C&&(a.g.register=function(a){return function(b){u.createElement(b);return a.apply(this,arguments)}}(a.g.register),u.createDocumentFragment=function(b){return function(){var c=b(),f=a.g.Bc,g;for(g in f)f.hasOwnProperty(g)&&c.createElement(g);return c}}(u.createDocumentFragment))})();(function(b){function c(b,c,d){c=c.template;if(!c)throw Error("Component '"+b+"' has no template");b=a.a.ua(c);a.f.da(d,b)}
function d(a,b,c,d){var e=a.createViewModel;return e?e.call(a,d,{element:b,templateNodes:c}):d}var e=0;a.d.component={init:function(f,g,k,l,m){function h(){var a=r&&r.dispose;"function"===typeof a&&a.call(r);q=r=null}var r,q,p=a.a.V(a.f.childNodes(f));a.a.F.oa(f,h);a.m(function(){var l=a.a.c(g()),k,t;"string"===typeof l?k=l:(k=a.a.c(l.name),t=a.a.c(l.params));if(!k)throw Error("No component name specified");var n=q=++e;a.g.get(k,function(e){if(q===n){h();if(!e)throw Error("Unknown component '"+k+
"'");c(k,e,f);var g=d(e,f,p,t);e=m.createChildContext(g,b,function(a){a.$component=g;a.$componentTemplateNodes=p});r=g;a.eb(e,f)}})},null,{i:f});return{controlsDescendantBindings:!0}}};a.f.Z.component=!0})();var S={"class":"className","for":"htmlFor"};a.d.attr={update:function(b,c){var d=a.a.c(c())||{};a.a.D(d,function(c,d){d=a.a.c(d);var g=!1===d||null===d||d===n;g&&b.removeAttribute(c);8>=a.a.C&&c in S?(c=S[c],g?b.removeAttribute(c):b[c]=d):g||b.setAttribute(c,d.toString());"name"===c&&a.a.rc(b,
g?"":d.toString())})}};(function(){a.d.checked={after:["value","attr"],init:function(b,c,d){function e(){var e=b.checked,f=p?g():e;if(!a.va.Sa()&&(!l||e)){var m=a.l.w(c);if(h){var k=r?m.t():m;q!==f?(e&&(a.a.pa(k,f,!0),a.a.pa(k,q,!1)),q=f):a.a.pa(k,f,e);r&&a.Ba(m)&&m(k)}else a.h.Ea(m,d,"checked",f,!0)}}function f(){var d=a.a.c(c());b.checked=h?0<=a.a.o(d,g()):k?d:g()===d}var g=a.nc(function(){return d.has("checkedValue")?a.a.c(d.get("checkedValue")):d.has("value")?a.a.c(d.get("value")):b.value}),k=
"checkbox"==b.type,l="radio"==b.type;if(k||l){var m=c(),h=k&&a.a.c(m)instanceof Array,r=!(h&&m.push&&m.splice),q=h?g():n,p=l||h;l&&!b.name&&a.d.uniqueName.init(b,function(){return!0});a.m(e,null,{i:b});a.a.p(b,"click",e);a.m(f,null,{i:b});m=n}}};a.h.ea.checked=!0;a.d.checkedValue={update:function(b,c){b.value=a.a.c(c())}}})();a.d.css={update:function(b,c){var d=a.a.c(c());null!==d&&"object"==typeof d?a.a.D(d,function(c,d){d=a.a.c(d);a.a.bb(b,c,d)}):(d=a.a.$a(String(d||"")),a.a.bb(b,b.__ko__cssValue,
!1),b.__ko__cssValue=d,a.a.bb(b,d,!0))}};a.d.enable={update:function(b,c){var d=a.a.c(c());d&&b.disabled?b.removeAttribute("disabled"):d||b.disabled||(b.disabled=!0)}};a.d.disable={update:function(b,c){a.d.enable.update(b,function(){return!a.a.c(c())})}};a.d.event={init:function(b,c,d,e,f){var g=c()||{};a.a.D(g,function(g){"string"==typeof g&&a.a.p(b,g,function(b){var m,h=c()[g];if(h){try{var r=a.a.V(arguments);e=f.$data;r.unshift(e);m=h.apply(e,r)}finally{!0!==m&&(b.preventDefault?b.preventDefault():
b.returnValue=!1)}!1===d.get(g+"Bubble")&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}})})}};a.d.foreach={ic:function(b){return function(){var c=b(),d=a.a.zb(c);if(!d||"number"==typeof d.length)return{foreach:c,templateEngine:a.W.sb};a.a.c(c);return{foreach:d.data,as:d.as,includeDestroyed:d.includeDestroyed,afterAdd:d.afterAdd,beforeRemove:d.beforeRemove,afterRender:d.afterRender,beforeMove:d.beforeMove,afterMove:d.afterMove,templateEngine:a.W.sb}}},init:function(b,c){return a.d.template.init(b,
a.d.foreach.ic(c))},update:function(b,c,d,e,f){return a.d.template.update(b,a.d.foreach.ic(c),d,e,f)}};a.h.ta.foreach=!1;a.f.Z.foreach=!0;a.d.hasfocus={init:function(b,c,d){function e(e){b.__ko_hasfocusUpdating=!0;var f=b.ownerDocument;if("activeElement"in f){var g;try{g=f.activeElement}catch(h){g=f.body}e=g===b}f=c();a.h.Ea(f,d,"hasfocus",e,!0);b.__ko_hasfocusLastValue=e;b.__ko_hasfocusUpdating=!1}var f=e.bind(null,!0),g=e.bind(null,!1);a.a.p(b,"focus",f);a.a.p(b,"focusin",f);a.a.p(b,"blur",g);a.a.p(b,
"focusout",g)},update:function(b,c){var d=!!a.a.c(c());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===d||(d?b.focus():b.blur(),!d&&b.__ko_hasfocusLastValue&&b.ownerDocument.body.focus(),a.l.w(a.a.Da,null,[b,d?"focusin":"focusout"]))}};a.h.ea.hasfocus=!0;a.d.hasFocus=a.d.hasfocus;a.h.ea.hasFocus=!0;a.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Cb(b,c())}};K("if");K("ifnot",!1,!0);K("with",!0,!1,function(a,c){return a.createChildContext(c)});var L={};
a.d.options={init:function(b){if("select"!==a.a.A(b))throw Error("options binding applies only to SELECT elements");for(;0<b.length;)b.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return a.a.Ka(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(c,e){if(A&&h)a.j.ha(b,a.a.c(d.get("value")),!0);else if(p.length){var f=0<=a.a.o(p,a.j.u(e[0]));a.a.sc(e[0],f);A&&!f&&a.l.w(a.a.Da,null,[b,
"change"])}}var k=b.multiple,l=0!=b.length&&k?b.scrollTop:null,m=a.a.c(c()),h=d.get("valueAllowUnset")&&d.has("value"),r=d.get("optionsIncludeDestroyed");c={};var q,p=[];h||(k?p=a.a.fb(e(),a.j.u):0<=b.selectedIndex&&p.push(a.j.u(b.options[b.selectedIndex])));m&&("undefined"==typeof m.length&&(m=[m]),q=a.a.Ka(m,function(b){return r||b===n||null===b||!a.a.c(b._destroy)}),d.has("optionsCaption")&&(m=a.a.c(d.get("optionsCaption")),null!==m&&m!==n&&q.unshift(L)));var A=!1;c.beforeRemove=function(a){b.removeChild(a)};
m=g;d.has("optionsAfterRender")&&"function"==typeof d.get("optionsAfterRender")&&(m=function(b,c){g(0,c);a.l.w(d.get("optionsAfterRender"),null,[c[0],b!==L?b:n])});a.a.Bb(b,q,function(c,e,g){g.length&&(p=!h&&g[0].selected?[a.j.u(g[0])]:[],A=!0);e=b.ownerDocument.createElement("option");c===L?(a.a.Za(e,d.get("optionsCaption")),a.j.ha(e,n)):(g=f(c,d.get("optionsValue"),c),a.j.ha(e,a.a.c(g)),c=f(c,d.get("optionsText"),g),a.a.Za(e,c));return[e]},c,m);a.l.w(function(){h?a.j.ha(b,a.a.c(d.get("value")),
!0):(k?p.length&&e().length<p.length:p.length&&0<=b.selectedIndex?a.j.u(b.options[b.selectedIndex])!==p[0]:p.length||0<=b.selectedIndex)&&a.a.Da(b,"change")});a.a.Nc(b);l&&20<Math.abs(l-b.scrollTop)&&(b.scrollTop=l)}};a.d.options.xb=a.a.e.I();a.d.selectedOptions={after:["options","foreach"],init:function(b,c,d){a.a.p(b,"change",function(){var e=c(),f=[];a.a.q(b.getElementsByTagName("option"),function(b){b.selected&&f.push(a.j.u(b))});a.h.Ea(e,d,"selectedOptions",f)})},update:function(b,c){if("select"!=
a.a.A(b))throw Error("values binding applies only to SELECT elements");var d=a.a.c(c()),e=b.scrollTop;d&&"number"==typeof d.length&&a.a.q(b.getElementsByTagName("option"),function(b){var c=0<=a.a.o(d,a.j.u(b));b.selected!=c&&a.a.sc(b,c)});b.scrollTop=e}};a.h.ea.selectedOptions=!0;a.d.style={update:function(b,c){var d=a.a.c(c()||{});a.a.D(d,function(c,d){d=a.a.c(d);if(null===d||d===n||!1===d)d="";b.style[c]=d})}};a.d.submit={init:function(b,c,d,e,f){if("function"!=typeof c())throw Error("The value for a submit binding must be a function");
a.a.p(b,"submit",function(a){var d,e=c();try{d=e.call(f.$data,b)}finally{!0!==d&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}})}};a.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Za(b,c())}};a.f.Z.text=!0;(function(){if(x&&x.navigator)var b=function(a){if(a)return parseFloat(a[1])},c=x.opera&&x.opera.version&&parseInt(x.opera.version()),d=x.navigator.userAgent,e=b(d.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),f=b(d.match(/Firefox\/([^ ]*)/));
if(10>a.a.C)var g=a.a.e.I(),k=a.a.e.I(),l=function(b){var c=this.activeElement;(c=c&&a.a.e.get(c,k))&&c(b)},m=function(b,c){var d=b.ownerDocument;a.a.e.get(d,g)||(a.a.e.set(d,g,!0),a.a.p(d,"selectionchange",l));a.a.e.set(b,k,c)};a.d.textInput={init:function(b,d,g){function l(c,d){a.a.p(b,c,d)}function k(){var c=a.a.c(d());if(null===c||c===n)c="";v!==n&&c===v?a.a.setTimeout(k,4):b.value!==c&&(u=c,b.value=c)}function y(){s||(v=b.value,s=a.a.setTimeout(t,4))}function t(){clearTimeout(s);v=s=n;var c=
b.value;u!==c&&(u=c,a.h.Ea(d(),g,"textInput",c))}var u=b.value,s,v,x=9==a.a.C?y:t;10>a.a.C?(l("propertychange",function(a){"value"===a.propertyName&&x(a)}),8==a.a.C&&(l("keyup",t),l("keydown",t)),8<=a.a.C&&(m(b,x),l("dragend",y))):(l("input",t),5>e&&"textarea"===a.a.A(b)?(l("keydown",y),l("paste",y),l("cut",y)):11>c?l("keydown",y):4>f&&(l("DOMAutoComplete",t),l("dragdrop",t),l("drop",t)));l("change",t);a.m(k,null,{i:b})}};a.h.ea.textInput=!0;a.d.textinput={preprocess:function(a,b,c){c("textInput",
a)}}})();a.d.uniqueName={init:function(b,c){if(c()){var d="ko_unique_"+ ++a.d.uniqueName.Ic;a.a.rc(b,d)}}};a.d.uniqueName.Ic=0;a.d.value={after:["options","foreach"],init:function(b,c,d){if("input"!=b.tagName.toLowerCase()||"checkbox"!=b.type&&"radio"!=b.type){var e=["change"],f=d.get("valueUpdate"),g=!1,k=null;f&&("string"==typeof f&&(f=[f]),a.a.ra(e,f),e=a.a.Tb(e));var l=function(){k=null;g=!1;var e=c(),f=a.j.u(b);a.h.Ea(e,d,"value",f)};!a.a.C||"input"!=b.tagName.toLowerCase()||"text"!=b.type||
"off"==b.autocomplete||b.form&&"off"==b.form.autocomplete||-1!=a.a.o(e,"propertychange")||(a.a.p(b,"propertychange",function(){g=!0}),a.a.p(b,"focus",function(){g=!1}),a.a.p(b,"blur",function(){g&&l()}));a.a.q(e,function(c){var d=l;a.a.nd(c,"after")&&(d=function(){k=a.j.u(b);a.a.setTimeout(l,0)},c=c.substring(5));a.a.p(b,c,d)});var m=function(){var e=a.a.c(c()),f=a.j.u(b);if(null!==k&&e===k)a.a.setTimeout(m,0);else if(e!==f)if("select"===a.a.A(b)){var g=d.get("valueAllowUnset"),f=function(){a.j.ha(b,
e,g)};f();g||e===a.j.u(b)?a.a.setTimeout(f,0):a.l.w(a.a.Da,null,[b,"change"])}else a.j.ha(b,e)};a.m(m,null,{i:b})}else a.Ja(b,{checkedValue:c})},update:function(){}};a.h.ea.value=!0;a.d.visible={update:function(b,c){var d=a.a.c(c()),e="none"!=b.style.display;d&&!e?b.style.display="":!d&&e&&(b.style.display="none")}};(function(b){a.d[b]={init:function(c,d,e,f,g){return a.d.event.init.call(this,c,function(){var a={};a[b]=d();return a},e,f,g)}}})("click");a.O=function(){};a.O.prototype.renderTemplateSource=
function(){throw Error("Override renderTemplateSource");};a.O.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock");};a.O.prototype.makeTemplateSource=function(b,c){if("string"==typeof b){c=c||u;var d=c.getElementById(b);if(!d)throw Error("Cannot find template with ID "+b);return new a.v.n(d)}if(1==b.nodeType||8==b.nodeType)return new a.v.qa(b);throw Error("Unknown template type: "+b);};a.O.prototype.renderTemplate=function(a,c,d,e){a=this.makeTemplateSource(a,
e);return this.renderTemplateSource(a,c,d,e)};a.O.prototype.isTemplateRewritten=function(a,c){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,c).data("isRewritten")};a.O.prototype.rewriteTemplate=function(a,c,d){a=this.makeTemplateSource(a,d);c=c(a.text());a.text(c);a.data("isRewritten",!0)};a.b("templateEngine",a.O);a.Gb=function(){function b(b,c,d,k){b=a.h.yb(b);for(var l=a.h.ta,m=0;m<b.length;m++){var h=b[m].key;if(l.hasOwnProperty(h)){var r=l[h];if("function"===typeof r){if(h=
r(b[m].value))throw Error(h);}else if(!r)throw Error("This template engine does not support the '"+h+"' binding within its templates");}}d="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a.h.Ua(b,{valueAccessors:!0})+" } })()},'"+d.toLowerCase()+"')";return k.createJavaScriptEvaluatorBlock(d)+c}var c=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,d=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Oc:function(b,
c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.Gb.dd(b,c)},d)},dd:function(a,f){return a.replace(c,function(a,c,d,e,h){return b(h,c,d,f)}).replace(d,function(a,c){return b(c,"\x3c!-- ko --\x3e","#comment",f)})},Ec:function(b,c){return a.M.wb(function(d,k){var l=d.nextSibling;l&&l.nodeName.toLowerCase()===c&&a.Ja(l,b,k)})}}}();a.b("__tr_ambtns",a.Gb.Ec);(function(){a.v={};a.v.n=function(b){if(this.n=b){var c=a.a.A(b);this.ab="script"===c?1:"textarea"===c?2:"template"==c&&
b.content&&11===b.content.nodeType?3:4}};a.v.n.prototype.text=function(){var b=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.n[b];var c=arguments[0];"innerHTML"===b?a.a.Cb(this.n,c):this.n[b]=c};var b=a.a.e.I()+"_";a.v.n.prototype.data=function(c){if(1===arguments.length)return a.a.e.get(this.n,b+c);a.a.e.set(this.n,b+c,arguments[1])};var c=a.a.e.I();a.v.n.prototype.nodes=function(){var b=this.n;if(0==arguments.length)return(a.a.e.get(b,c)||{}).jb||(3===this.ab?
b.content:4===this.ab?b:n);a.a.e.set(b,c,{jb:arguments[0]})};a.v.qa=function(a){this.n=a};a.v.qa.prototype=new a.v.n;a.v.qa.prototype.text=function(){if(0==arguments.length){var b=a.a.e.get(this.n,c)||{};b.Hb===n&&b.jb&&(b.Hb=b.jb.innerHTML);return b.Hb}a.a.e.set(this.n,c,{Hb:arguments[0]})};a.b("templateSources",a.v);a.b("templateSources.domElement",a.v.n);a.b("templateSources.anonymousTemplate",a.v.qa)})();(function(){function b(b,c,d){var e;for(c=a.f.nextSibling(c);b&&(e=b)!==c;)b=a.f.nextSibling(e),
d(e,b)}function c(c,d){if(c.length){var e=c[0],f=c[c.length-1],g=e.parentNode,k=a.Q.instance,n=k.preprocessNode;if(n){b(e,f,function(a,b){var c=a.previousSibling,d=n.call(k,a);d&&(a===e&&(e=d[0]||b),a===f&&(f=d[d.length-1]||c))});c.length=0;if(!e)return;e===f?c.push(e):(c.push(e,f),a.a.za(c,g))}b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.Rb(d,b)});b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.M.yc(b,[d])});a.a.za(c,g)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(b,
e,f,k,q){q=q||{};var p=(b&&d(b)||f||{}).ownerDocument,n=q.templateEngine||g;a.Gb.Oc(f,n,p);f=n.renderTemplate(f,k,q,p);if("number"!=typeof f.length||0<f.length&&"number"!=typeof f[0].nodeType)throw Error("Template engine must return an array of DOM nodes");p=!1;switch(e){case "replaceChildren":a.f.da(b,f);p=!0;break;case "replaceNode":a.a.qc(b,f);p=!0;break;case "ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e);}p&&(c(f,k),q.afterRender&&a.l.w(q.afterRender,null,[f,k.$data]));
return f}function f(b,c,d){return a.H(b)?b():"function"===typeof b?b(c,d):b}var g;a.Db=function(b){if(b!=n&&!(b instanceof a.O))throw Error("templateEngine must inherit from ko.templateEngine");g=b};a.Ab=function(b,c,h,k,q){h=h||{};if((h.templateEngine||g)==n)throw Error("Set a template engine before calling renderTemplate");q=q||"replaceChildren";if(k){var p=d(k);return a.B(function(){var g=c&&c instanceof a.U?c:new a.U(a.a.c(c)),n=f(b,g.$data,g),g=e(k,q,n,g,h);"replaceNode"==q&&(k=g,p=d(k))},null,
{wa:function(){return!p||!a.a.nb(p)},i:p&&"replaceNode"==q?p.parentNode:p})}return a.M.wb(function(d){a.Ab(b,c,h,d,"replaceNode")})};a.kd=function(b,d,g,k,q){function p(a,b){c(b,s);g.afterRender&&g.afterRender(b,a);s=null}function u(a,c){s=q.createChildContext(a,g.as,function(a){a.$index=c});var d=f(b,a,s);return e(null,"ignoreTargetNode",d,s,g)}var s;return a.B(function(){var b=a.a.c(d)||[];"undefined"==typeof b.length&&(b=[b]);b=a.a.Ka(b,function(b){return g.includeDestroyed||b===n||null===b||!a.a.c(b._destroy)});
a.l.w(a.a.Bb,null,[k,b,u,g,p])},null,{i:k})};var k=a.a.e.I();a.d.template={init:function(b,c){var d=a.a.c(c());if("string"==typeof d||d.name)a.f.xa(b);else{if("nodes"in d){if(d=d.nodes||[],a.H(d))throw Error('The "nodes" option must be a plain, non-observable array.');}else d=a.f.childNodes(b);d=a.a.jc(d);(new a.v.qa(b)).nodes(d)}return{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var g=c(),s;c=a.a.c(g);d=!0;e=null;"string"==typeof c?c={}:(g=c.name,"if"in c&&(d=a.a.c(c["if"])),d&&"ifnot"in
c&&(d=!a.a.c(c.ifnot)),s=a.a.c(c.data));"foreach"in c?e=a.kd(g||b,d&&c.foreach||[],c,b,f):d?(f="data"in c?f.createChildContext(s,c.as):f,e=a.Ab(g||b,f,c,b)):a.f.xa(b);f=e;(s=a.a.e.get(b,k))&&"function"==typeof s.k&&s.k();a.a.e.set(b,k,f&&f.ba()?f:n)}};a.h.ta.template=function(b){b=a.h.yb(b);return 1==b.length&&b[0].unknown||a.h.ad(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"};a.f.Z.template=!0})();a.b("setTemplateEngine",a.Db);a.b("renderTemplate",
a.Ab);a.a.dc=function(a,c,d){if(a.length&&c.length){var e,f,g,k,l;for(e=f=0;(!d||e<d)&&(k=a[f]);++f){for(g=0;l=c[g];++g)if(k.value===l.value){k.moved=l.index;l.moved=k.index;c.splice(g,1);e=g=0;break}e+=g}}};a.a.ib=function(){function b(b,d,e,f,g){var k=Math.min,l=Math.max,m=[],h,n=b.length,q,p=d.length,s=p-n||1,u=n+p+1,t,v,x;for(h=0;h<=n;h++)for(v=t,m.push(t=[]),x=k(p,h+s),q=l(0,h-1);q<=x;q++)t[q]=q?h?b[h-1]===d[q-1]?v[q-1]:k(v[q]||u,t[q-1]||u)+1:q+1:h+1;k=[];l=[];s=[];h=n;for(q=p;h||q;)p=m[h][q]-
1,q&&p===m[h][q-1]?l.push(k[k.length]={status:e,value:d[--q],index:q}):h&&p===m[h-1][q]?s.push(k[k.length]={status:f,value:b[--h],index:h}):(--q,--h,g.sparse||k.push({status:"retained",value:d[q]}));a.a.dc(s,l,!g.dontLimitMoves&&10*n);return k.reverse()}return function(a,d,e){e="boolean"===typeof e?{dontLimitMoves:e}:e||{};a=a||[];d=d||[];return a.length<d.length?b(a,d,"added","deleted",e):b(d,a,"deleted","added",e)}}();a.b("utils.compareArrays",a.a.ib);(function(){function b(b,c,d,k,l){var m=[],
h=a.B(function(){var h=c(d,l,a.a.za(m,b))||[];0<m.length&&(a.a.qc(m,h),k&&a.l.w(k,null,[d,h,l]));m.length=0;a.a.ra(m,h)},null,{i:b,wa:function(){return!a.a.Qb(m)}});return{ca:m,B:h.ba()?h:n}}var c=a.a.e.I(),d=a.a.e.I();a.a.Bb=function(e,f,g,k,l){function m(b,c){w=q[c];v!==c&&(D[b]=w);w.qb(v++);a.a.za(w.ca,e);u.push(w);z.push(w)}function h(b,c){if(b)for(var d=0,e=c.length;d<e;d++)c[d]&&a.a.q(c[d].ca,function(a){b(a,d,c[d].ja)})}f=f||[];k=k||{};var r=a.a.e.get(e,c)===n,q=a.a.e.get(e,c)||[],p=a.a.fb(q,
function(a){return a.ja}),s=a.a.ib(p,f,k.dontLimitMoves),u=[],t=0,v=0,x=[],z=[];f=[];for(var D=[],p=[],w,C=0,B,E;B=s[C];C++)switch(E=B.moved,B.status){case "deleted":E===n&&(w=q[t],w.B&&(w.B.k(),w.B=n),a.a.za(w.ca,e).length&&(k.beforeRemove&&(u.push(w),z.push(w),w.ja===d?w=null:f[C]=w),w&&x.push.apply(x,w.ca)));t++;break;case "retained":m(C,t++);break;case "added":E!==n?m(C,E):(w={ja:B.value,qb:a.N(v++)},u.push(w),z.push(w),r||(p[C]=w))}a.a.e.set(e,c,u);h(k.beforeMove,D);a.a.q(x,k.beforeRemove?a.$:
a.removeNode);for(var C=0,r=a.f.firstChild(e),F;w=z[C];C++){w.ca||a.a.extend(w,b(e,g,w.ja,l,w.qb));for(t=0;s=w.ca[t];r=s.nextSibling,F=s,t++)s!==r&&a.f.gc(e,s,F);!w.Wc&&l&&(l(w.ja,w.ca,w.qb),w.Wc=!0)}h(k.beforeRemove,f);for(C=0;C<f.length;++C)f[C]&&(f[C].ja=d);h(k.afterMove,D);h(k.afterAdd,p)}})();a.b("utils.setDomNodeChildrenFromArrayMapping",a.a.Bb);a.W=function(){this.allowTemplateRewriting=!1};a.W.prototype=new a.O;a.W.prototype.renderTemplateSource=function(b,c,d,e){if(c=(9>a.a.C?0:b.nodes)?
b.nodes():null)return a.a.V(c.cloneNode(!0).childNodes);b=b.text();return a.a.ma(b,e)};a.W.sb=new a.W;a.Db(a.W.sb);a.b("nativeTemplateEngine",a.W);(function(){a.vb=function(){var a=this.$c=function(){if(!v||!v.tmpl)return 0;try{if(0<=v.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,e,f,g){g=g||u;f=f||{};if(2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var k=b.data("precompiled");
k||(k=b.text()||"",k=v.template(null,"{{ko_with $item.koBindingContext}}"+k+"{{/ko_with}}"),b.data("precompiled",k));b=[e.$data];e=v.extend({koBindingContext:e},f.templateOptions);e=v.tmpl(k,b,e);e.appendTo(g.createElement("div"));v.fragments={};return e};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"};this.addTemplate=function(a,b){u.write("<script type='text/html' id='"+a+"'>"+b+"\x3c/script>")};0<a&&(v.tmpl.tag.ko_code={open:"__.push($1 || '');"},
v.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};a.vb.prototype=new a.O;var b=new a.vb;0<b.$c&&a.Db(b);a.b("jqueryTmplTemplateEngine",a.vb)})()})})();})();
/// Knockout Mapping plugin v2.4.1
/// (c) 2013 Steven Sanderson, Roy Jacobs - http://knockoutjs.com/
/// License: MIT (http://www.opensource.org/licenses/mit-license.php)
(function(e){"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?e(require("knockout"),exports):"function"===typeof define&&define.amd?define(["knockout","exports"],e):e(ko,ko.mapping={})})(function(e,f){function y(b,c){var a,d;for(d in c)if(c.hasOwnProperty(d)&&c[d])if(a=f.getType(b[d]),d&&b[d]&&"array"!==a&&"string"!==a)y(b[d],c[d]);else if("array"===f.getType(b[d])&&"array"===f.getType(c[d])){a=b;for(var e=d,l=b[d],n=c[d],t={},g=l.length-1;0<=g;--g)t[l[g]]=l[g];for(g=
n.length-1;0<=g;--g)t[n[g]]=n[g];l=[];n=void 0;for(n in t)l.push(t[n]);a[e]=l}else b[d]=c[d]}function E(b,c){var a={};y(a,b);y(a,c);return a}function z(b,c){for(var a=E({},b),e=L.length-1;0<=e;e--){var f=L[e];a[f]&&(a[""]instanceof Object||(a[""]={}),a[""][f]=a[f],delete a[f])}c&&(a.ignore=h(c.ignore,a.ignore),a.include=h(c.include,a.include),a.copy=h(c.copy,a.copy),a.observe=h(c.observe,a.observe));a.ignore=h(a.ignore,j.ignore);a.include=h(a.include,j.include);a.copy=h(a.copy,j.copy);a.observe=h(a.observe,
j.observe);a.mappedProperties=a.mappedProperties||{};a.copiedProperties=a.copiedProperties||{};return a}function h(b,c){"array"!==f.getType(b)&&(b="undefined"===f.getType(b)?[]:[b]);"array"!==f.getType(c)&&(c="undefined"===f.getType(c)?[]:[c]);return e.utils.arrayGetDistinctValues(b.concat(c))}function F(b,c,a,d,k,l,n){var t="array"===f.getType(e.utils.unwrapObservable(c));l=l||"";if(f.isMapped(b)){var g=e.utils.unwrapObservable(b)[p];a=E(g,a)}var j=n||k,h=function(){return a[d]&&a[d].create instanceof
Function},x=function(b){var f=G,g=e.dependentObservable;e.dependentObservable=function(a,b,c){c=c||{};a&&"object"==typeof a&&(c=a);var d=c.deferEvaluation,M=!1;c.deferEvaluation=!0;a=new H(a,b,c);if(!d){var g=a,d=e.dependentObservable;e.dependentObservable=H;a=e.isWriteableObservable(g);e.dependentObservable=d;d=H({read:function(){M||(e.utils.arrayRemoveItem(f,g),M=!0);return g.apply(g,arguments)},write:a&&function(a){return g(a)},deferEvaluation:!0});d.__DO=g;a=d;f.push(a)}return a};e.dependentObservable.fn=
H.fn;e.computed=e.dependentObservable;b=e.utils.unwrapObservable(k)instanceof Array?a[d].create({data:b||c,parent:j,skip:N}):a[d].create({data:b||c,parent:j});e.dependentObservable=g;e.computed=e.dependentObservable;return b},u=function(){return a[d]&&a[d].update instanceof Function},v=function(b,f){var g={data:f||c,parent:j,target:e.utils.unwrapObservable(b)};e.isWriteableObservable(b)&&(g.observable=b);return a[d].update(g)};if(n=I.get(c))return n;d=d||"";if(t){var t=[],s=!1,m=function(a){return a};
a[d]&&a[d].key&&(m=a[d].key,s=!0);e.isObservable(b)||(b=e.observableArray([]),b.mappedRemove=function(a){var c="function"==typeof a?a:function(b){return b===m(a)};return b.remove(function(a){return c(m(a))})},b.mappedRemoveAll=function(a){var c=C(a,m);return b.remove(function(a){return-1!=e.utils.arrayIndexOf(c,m(a))})},b.mappedDestroy=function(a){var c="function"==typeof a?a:function(b){return b===m(a)};return b.destroy(function(a){return c(m(a))})},b.mappedDestroyAll=function(a){var c=C(a,m);return b.destroy(function(a){return-1!=
e.utils.arrayIndexOf(c,m(a))})},b.mappedIndexOf=function(a){var c=C(b(),m);a=m(a);return e.utils.arrayIndexOf(c,a)},b.mappedGet=function(a){return b()[b.mappedIndexOf(a)]},b.mappedCreate=function(a){if(-1!==b.mappedIndexOf(a))throw Error("There already is an object with the key that you specified.");var c=h()?x(a):a;u()&&(a=v(c,a),e.isWriteableObservable(c)?c(a):c=a);b.push(c);return c});n=C(e.utils.unwrapObservable(b),m).sort();g=C(c,m);s&&g.sort();s=e.utils.compareArrays(n,g);n={};var J,A=e.utils.unwrapObservable(c),
y={},z=!0,g=0;for(J=A.length;g<J;g++){var r=m(A[g]);if(void 0===r||r instanceof Object){z=!1;break}y[r]=A[g]}var A=[],B=0,g=0;for(J=s.length;g<J;g++){var r=s[g],q,w=l+"["+g+"]";switch(r.status){case "added":var D=z?y[r.value]:K(e.utils.unwrapObservable(c),r.value,m);q=F(void 0,D,a,d,b,w,k);h()||(q=e.utils.unwrapObservable(q));w=O(e.utils.unwrapObservable(c),D,n);q===N?B++:A[w-B]=q;n[w]=!0;break;case "retained":D=z?y[r.value]:K(e.utils.unwrapObservable(c),r.value,m);q=K(b,r.value,m);F(q,D,a,d,b,w,
k);w=O(e.utils.unwrapObservable(c),D,n);A[w]=q;n[w]=!0;break;case "deleted":q=K(b,r.value,m)}t.push({event:r.status,item:q})}b(A);a[d]&&a[d].arrayChanged&&e.utils.arrayForEach(t,function(b){a[d].arrayChanged(b.event,b.item)})}else if(P(c)){b=e.utils.unwrapObservable(b);if(!b){if(h())return s=x(),u()&&(s=v(s)),s;if(u())return v(s);b={}}u()&&(b=v(b));I.save(c,b);if(u())return b;Q(c,function(d){var f=l.length?l+"."+d:d;if(-1==e.utils.arrayIndexOf(a.ignore,f))if(-1!=e.utils.arrayIndexOf(a.copy,f))b[d]=
c[d];else if("object"!=typeof c[d]&&"array"!=typeof c[d]&&0<a.observe.length&&-1==e.utils.arrayIndexOf(a.observe,f))b[d]=c[d],a.copiedProperties[f]=!0;else{var g=I.get(c[d]),k=F(b[d],c[d],a,d,b,f,b),g=g||k;if(0<a.observe.length&&-1==e.utils.arrayIndexOf(a.observe,f))b[d]=g(),a.copiedProperties[f]=!0;else{if(e.isWriteableObservable(b[d])){if(g=e.utils.unwrapObservable(g),b[d]()!==g)b[d](g)}else g=void 0===b[d]?g:e.utils.unwrapObservable(g),b[d]=g;a.mappedProperties[f]=!0}}})}else switch(f.getType(c)){case "function":u()?
e.isWriteableObservable(c)?(c(v(c)),b=c):b=v(c):b=c;break;default:if(e.isWriteableObservable(b))return q=u()?v(b):e.utils.unwrapObservable(c),b(q),q;h()||u();b=h()?x():e.observable(e.utils.unwrapObservable(c));u()&&b(v(b))}return b}function O(b,c,a){for(var d=0,e=b.length;d<e;d++)if(!0!==a[d]&&b[d]===c)return d;return null}function R(b,c){var a;c&&(a=c(b));"undefined"===f.getType(a)&&(a=b);return e.utils.unwrapObservable(a)}function K(b,c,a){b=e.utils.unwrapObservable(b);for(var d=0,f=b.length;d<
f;d++){var l=b[d];if(R(l,a)===c)return l}throw Error("When calling ko.update*, the key '"+c+"' was not found!");}function C(b,c){return e.utils.arrayMap(e.utils.unwrapObservable(b),function(a){return c?R(a,c):a})}function Q(b,c){if("array"===f.getType(b))for(var a=0;a<b.length;a++)c(a);else for(a in b)c(a)}function P(b){var c=f.getType(b);return("object"===c||"array"===c)&&null!==b}function T(){var b=[],c=[];this.save=function(a,d){var f=e.utils.arrayIndexOf(b,a);0<=f?c[f]=d:(b.push(a),c.push(d))};
this.get=function(a){a=e.utils.arrayIndexOf(b,a);return 0<=a?c[a]:void 0}}function S(){var b={},c=function(a){var c;try{c=a}catch(e){c="$$$"}a=b[c];void 0===a&&(a=new T,b[c]=a);return a};this.save=function(a,b){c(a).save(a,b)};this.get=function(a){return c(a).get(a)}}var p="__ko_mapping__",H=e.dependentObservable,B=0,G,I,L=["create","update","key","arrayChanged"],N={},x={include:["_destroy"],ignore:[],copy:[],observe:[]},j=x;f.isMapped=function(b){return(b=e.utils.unwrapObservable(b))&&b[p]};f.fromJS=
function(b){if(0==arguments.length)throw Error("When calling ko.fromJS, pass the object you want to convert.");try{B++||(G=[],I=new S);var c,a;2==arguments.length&&(arguments[1][p]?a=arguments[1]:c=arguments[1]);3==arguments.length&&(c=arguments[1],a=arguments[2]);a&&(c=E(c,a[p]));c=z(c);var d=F(a,b,c);a&&(d=a);if(!--B)for(;G.length;){var e=G.pop();e&&(e(),e.__DO.throttleEvaluation=e.throttleEvaluation)}d[p]=E(d[p],c);return d}catch(f){throw B=0,f;}};f.fromJSON=function(b){var c=e.utils.parseJson(b);
arguments[0]=c;return f.fromJS.apply(this,arguments)};f.updateFromJS=function(){throw Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!");};f.updateFromJSON=function(){throw Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!");};f.toJS=function(b,c){j||f.resetDefaultOptions();if(0==arguments.length)throw Error("When calling ko.mapping.toJS, pass the object you want to convert.");
if("array"!==f.getType(j.ignore))throw Error("ko.mapping.defaultOptions().ignore should be an array.");if("array"!==f.getType(j.include))throw Error("ko.mapping.defaultOptions().include should be an array.");if("array"!==f.getType(j.copy))throw Error("ko.mapping.defaultOptions().copy should be an array.");c=z(c,b[p]);return f.visitModel(b,function(a){return e.utils.unwrapObservable(a)},c)};f.toJSON=function(b,c){var a=f.toJS(b,c);return e.utils.stringifyJson(a)};f.defaultOptions=function(){if(0<arguments.length)j=
arguments[0];else return j};f.resetDefaultOptions=function(){j={include:x.include.slice(0),ignore:x.ignore.slice(0),copy:x.copy.slice(0)}};f.getType=function(b){if(b&&"object"===typeof b){if(b.constructor===Date)return"date";if(b.constructor===Array)return"array"}return typeof b};f.visitModel=function(b,c,a){a=a||{};a.visitedObjects=a.visitedObjects||new S;var d,k=e.utils.unwrapObservable(b);if(P(k))a=z(a,k[p]),c(b,a.parentName),d="array"===f.getType(k)?[]:{};else return c(b,a.parentName);a.visitedObjects.save(b,
d);var l=a.parentName;Q(k,function(b){if(!(a.ignore&&-1!=e.utils.arrayIndexOf(a.ignore,b))){var j=k[b],g=a,h=l||"";"array"===f.getType(k)?l&&(h+="["+b+"]"):(l&&(h+="."),h+=b);g.parentName=h;if(!(-1===e.utils.arrayIndexOf(a.copy,b)&&-1===e.utils.arrayIndexOf(a.include,b)&&k[p]&&k[p].mappedProperties&&!k[p].mappedProperties[b]&&k[p].copiedProperties&&!k[p].copiedProperties[b]&&"array"!==f.getType(k)))switch(f.getType(e.utils.unwrapObservable(j))){case "object":case "array":case "undefined":g=a.visitedObjects.get(j);
d[b]="undefined"!==f.getType(g)?g:f.visitModel(j,c,a);break;default:d[b]=c(j,a.parentName)}}});return d}});
/*
     _ _      _       _
 ___| (_) ___| | __  (_)___
/ __| | |/ __| |/ /  | / __|
\__ \ | | (__|   < _ | \__ \
|___/_|_|\___|_|\_(_)/ |___/
                   |__/

 Version: 1.5.9
  Author: Ken Wheeler
 Website: http://kenwheeler.github.io
    Docs: http://kenwheeler.github.io/slick
    Repo: http://github.com/kenwheeler/slick
  Issues: http://github.com/kenwheeler/slick/issues

 */
/* global window, document, define, jQuery, setInterval, clearInterval */
(function(factory) {
    'use strict';
    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else if (typeof exports !== 'undefined') {
        module.exports = factory(require('jquery'));
    } else {
        factory(jQuery);
    }

}(function($) {
    'use strict';
    var Slick = window.Slick || {};

    Slick = (function() {

        var instanceUid = 0;

        function Slick(element, settings) {

            var _ = this, dataSettings;

            _.defaults = {
                enableAnchor: false,
                accessibility: true,
                adaptiveHeight: false,
                appendArrows: $(element).closest('.container'),
                appendDots: $(element).closest('.container'),
                searchForLinks: $(element).closest('.container'),
                arrows: true,
                arrowsPlain: false,
                asNavFor: null,
                prevArrow: '<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"><span class="icon-left-carat slick-arrow__icon"></span></button>',
                nextArrow: '<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"><span class="icon-right-carat slick-arrow__icon"></span></button>',
                autoplay: false,
                autoplaySpeed: 3000,
                centerMode: false,
                centerPadding: '50px',
                cssEase: 'ease-out',
                customPaging: function(slider, i) {
                    return '<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">' + (i + 1) + '</button>';
                },
                dots: false,
                dotsClass: 'slick-dots',
                links: false,
                linkClass: 'slick-links',
                draggable: true,
                easing: 'ease-out',
                edgeFriction: 0.35,
                fade: false,
                focusOnSelect: false,
                infinite: true,
                initialSlide: 0,
                lazyLoad: 'ondemand',
                mobileFirst: false,
                pauseOnHover: true,
                pauseOnDotsHover: false,
                respondTo: 'window',
                responsive: null,
                rows: 1,
                rtl: false,
                slide: '',
                slidesPerRow: 1,
                slidesToShow: 1,
                slidesToScroll: 1,
                speed: 1000,
                swipe: true,
                swipeToSlide: false,
                touchMove: true,
                touchThreshold: 5,
                useCSS: true,
                useTransform: false,
                variableWidth: false,
                vertical: false,
                verticalSwiping: false,
                waitForAnimate: true,
                zIndex: 1000,
                shiftAnimate: false,
                shiftPecentage: 0.5,
                scaleAnimate: false,
                setClassToContainer: false,
                mixMode: []
            };

            _.initials = {
                $ele: $(element),
                animating: false,
                dragging: false,
                autoPlayTimer: null,
                currentDirection: 0,
                currentLeft: null,
                currentSlide: 0,
                direction: 1,
                $dots: null,
                $links: null,
                listWidth: null,
                listHeight: null,
                loadIndex: 0,
                $nextArrow: null,
                $prevArrow: null,
                slideCount: null,
                slideWidth: null,
                $slideTrack: null,
                $slides: null,
                sliding: false,
                slideOffset: 0,
                swipeLeft: null,
                $list: null,
                touchObject: {},
                transformsEnabled: false,
                unslicked: false
            };

            $.extend(_, _.initials);

            _.activeBreakpoint = null;
            _.animType = null;
            _.animProp = null;
            _.breakpoints = [];
            _.breakpointSettings = [];
            _.cssTransitions = false;
            _.hidden = 'hidden';
            _.paused = false;
            _.positionProp = null;
            _.respondTo = null;
            _.rowCount = 1;
            _.shouldClick = true;
            _.$slider = $(element);
            _.$slidesCache = null;
            _.transformType = null;
            _.transitionType = null;
            _.visibilityChange = 'visibilitychange';
            _.windowWidth = 0;
            _.windowTimer = null;

            dataSettings = $(element).data('slick') || {};

            _.options = $.extend({}, _.defaults, dataSettings, settings);

            _.currentSlide = _.options.initialSlide;

            _.originalSettings = _.options;

            if (typeof document.mozHidden !== 'undefined') {
                _.hidden = 'mozHidden';
                _.visibilityChange = 'mozvisibilitychange';
            } else if (typeof document.webkitHidden !== 'undefined') {
                _.hidden = 'webkitHidden';
                _.visibilityChange = 'webkitvisibilitychange';
            }

            _.autoPlay = $.proxy(_.autoPlay, _);
            _.autoPlayClear = $.proxy(_.autoPlayClear, _);
            _.changeSlide = $.proxy(_.changeSlide, _);
            _.clickHandler = $.proxy(_.clickHandler, _);
            _.selectHandler = $.proxy(_.selectHandler, _);
            _.setPosition = $.proxy(_.setPosition, _);
            _.swipeHandler = $.proxy(_.swipeHandler, _);
            _.dragHandler = $.proxy(_.dragHandler, _);
            _.keyHandler = $.proxy(_.keyHandler, _);
            _.autoPlayIterator = $.proxy(_.autoPlayIterator, _);

            _.instanceUid = instanceUid++;

            // A simple way to check for HTML strings
            // Strict HTML recognition (must start with <)
            // Extracted from jQuery v1.11 source
            _.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/;


            _.registerBreakpoints();
            _.init(true);
            _.checkResponsive(true);

        }

        return Slick;

    }());

    Slick.prototype.addSlide = Slick.prototype.slickAdd = function(markup, index, addBefore) {

        var _ = this;

        if (typeof(index) === 'boolean') {
            addBefore = index;
            index = null;
        } else if (index < 0 || (index >= _.slideCount)) {
            return false;
        }

        _.unload();

        if (typeof(index) === 'number') {
            if (index === 0 && _.$slides.length === 0) {
                $(markup).appendTo(_.$slideTrack);
            } else if (addBefore) {
                $(markup).insertBefore(_.$slides.eq(index));
            } else {
                $(markup).insertAfter(_.$slides.eq(index));
            }
        } else {
            if (addBefore === true) {
                $(markup).prependTo(_.$slideTrack);
            } else {
                $(markup).appendTo(_.$slideTrack);
            }
        }

        _.$slides = _.$slideTrack.children(this.options.slide);

        _.$slideTrack.children(this.options.slide).detach();

        _.$slideTrack.append(_.$slides);

        _.$slides.each(function(index, element) {
            $(element).attr('data-slick-index', index);
        });

        _.$slidesCache = _.$slides;

        _.reinit();

    };

    Slick.prototype.animateHeight = function() {
        var _ = this;
        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);
            _.$list.velocity({
                height: targetHeight
            }, _.options.speed);
        }
    };

    Slick.prototype.animateSlide = function(targetLeft, callback) {

        var animProps = {},
            _ = this;

        _.animateHeight();

        if (_.options.rtl === true && _.options.vertical === false) {
            targetLeft = -targetLeft;
        }
        if (_.transformsEnabled === false) {
            if (_.options.vertical === false) {
                _.$slideTrack.velocity({
                    left: targetLeft
                }, _.options.speed, _.options.easing, callback);
            } else {
                _.$slideTrack.velocity({
                    top: targetLeft
                }, _.options.speed, _.options.easing, callback);
            }

        } else {

            if (_.cssTransitions === false) {
                if (_.options.rtl === true) {
                    _.currentLeft = -(_.currentLeft);
                }
                $({
                    animStart: _.currentLeft
                }).animate({
                    animStart: targetLeft
                }, {
                    duration: _.options.speed,
                    easing: _.options.easing,
                    step: function(now) {
                        now = Math.ceil(now);
                        if (_.options.vertical === false) {
                            animProps[_.animType] = 'translate(' +
                                now + 'px, 0px)';
                            _.$slideTrack.css(animProps);
                        } else {
                            animProps[_.animType] = 'translate(0px,' +
                                now + 'px)';
                            _.$slideTrack.css(animProps);
                        }
                    },
                    complete: function() {
                        if (callback) {
                            callback.call();
                        }
                    }
                });

            } else {

                _.applyTransition();
                targetLeft = Math.ceil(targetLeft);

                if (_.options.vertical === false) {
                    animProps[_.animType] = 'translate3d(' + targetLeft + 'px, 0px, 0px)';
                } else {
                    animProps[_.animType] = 'translate3d(0px,' + targetLeft + 'px, 0px)';
                }
                _.$slideTrack.css(animProps);

                if (callback) {
                    setTimeout(function() {

                        _.disableTransition();

                        callback.call();
                    }, _.options.speed);
                }

            }

        }

    };

    Slick.prototype.asNavFor = function(index) {

        var _ = this,
            asNavFor = _.options.asNavFor;

        if ( asNavFor && asNavFor !== null ) {
            asNavFor = $(asNavFor).not(_.$slider);
        }

        if ( asNavFor !== null && typeof asNavFor === 'object' ) {
            asNavFor.each(function() {
                var target = $(this).slick('getSlick');
                if(!target.unslicked) {
                    target.slideHandler(index, true);
                }
            });
        }

    };

    Slick.prototype.applyTransition = function(slide, speed) {
        var _ = this,
            transition = {};

        speed = speed || _.options.speed;



        if (_.options.fade === false) {
            transition[_.transitionType] = _.transformType + ' ' + _.options.speed + 'ms ' + _.options.cssEase;
        } else {
            transition[_.transitionType] = 'opacity ' + speed + 'ms ' + _.options.cssEase;
        }

        if (_.options.fade === false) {
            _.$slideTrack.css(transition);
        } else {
            _.$slides.eq(slide).css(transition);
        }

    };

    Slick.prototype.autoPlay = function() {

        var _ = this;

        if (_.autoPlayTimer) {
            clearInterval(_.autoPlayTimer);
        }

        if (_.slideCount > _.options.slidesToShow && _.paused !== true) {
            _.autoPlayTimer = setInterval(_.autoPlayIterator,
                _.options.autoplaySpeed);
        }

    };

    Slick.prototype.autoPlayClear = function() {

        var _ = this;
        if (_.autoPlayTimer) {
            clearInterval(_.autoPlayTimer);
        }

    };

    Slick.prototype.autoPlayIterator = function() {

        var _ = this;

        if (_.options.infinite === false) {

            if (_.direction === 1) {

                if ((_.currentSlide + 1) === _.slideCount -
                    1) {
                    _.direction = 0;
                }

                _.slideHandler(_.currentSlide + _.options.slidesToScroll);

            } else {

                if ((_.currentSlide - 1 === 0)) {

                    _.direction = 1;

                }

                _.slideHandler(_.currentSlide - _.options.slidesToScroll);

            }

        } else {

            _.slideHandler(_.currentSlide + _.options.slidesToScroll);

        }

    };

    Slick.prototype.buildArrows = function() {

        var _ = this;
        console.log('enter build arrows');

        if (_.options.arrows === true ) {

            _.$prevArrow = $(_.options.prevArrow).addClass('slick-arrow');
            _.$nextArrow = $(_.options.nextArrow).addClass('slick-arrow');

            if(_.options.arrowsPlain === true) {
                 _.$prevArrow.addClass('slick-arrow--plain');
                 _.$nextArrow.addClass('slick-arrow--plain');
            }

            if( _.slideCount > _.options.slidesToShow ) {

                _.$prevArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');
                _.$nextArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');

                if (_.htmlExpr.test(_.options.prevArrow)) {
                    console.log(_.options.appendArrows);
                    _.$prevArrow.prependTo(_.options.appendArrows);
                }

                if (_.htmlExpr.test(_.options.nextArrow)) {
                    _.$nextArrow.appendTo(_.options.appendArrows);
                }

                if (_.options.infinite !== true) {
                    _.$prevArrow
                        .addClass('slick-disabled')
                        .attr('aria-disabled', 'true');
                }

            } else {

                _.$prevArrow.add( _.$nextArrow )

                    .addClass('slick-hidden')
                    .attr({
                        'aria-disabled': 'true',
                        'tabindex': '-1'
                    });

            }

        }

    };

    Slick.prototype.buildDots = function() {

        var _ = this,
            i, dotString;

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            dotString = '<ul class="' + _.options.dotsClass + '">';

            for (i = 0; i <= _.getDotCount(); i += 1) {
                dotString += '<li>' + _.options.customPaging.call(this, _, i) + '</li>';
            }

            dotString += '</ul>';

            _.$dots = $(dotString).appendTo(
                _.options.appendDots);

            _.$dots.find('li').first().addClass('slick-active').attr('aria-hidden', 'false');

        }

    };

    Slick.prototype.buildLinks = function() {
        var _ = this;

        if (_.options.links === true && _.slideCount >= _.options.slidesToShow) {
            _.$links = _.options.searchForLinks.find('.' + _.options.linkClass);
        }
    };

    Slick.prototype.buildOut = function() {

        var _ = this;

        _.$slides =
            _.$slider
                .children( _.options.slide + ':not(.slick-cloned)')
                .addClass('slick-slide');

        _.slideCount = _.$slides.length;

        var offset = 0;
        _.$slides.each(function(index, element) {
            $(element)
                .attr('data-slick-index', index)
                .data('originalStyling', $(element).attr('style') || '');

            // for shift
            if(_.options.shiftAnimate === true) {
                if (_.options.mixMode.length > 0) {
                    if ($(_.$slides[index]).attr('data-class') === _.options.mixMode[0]) {
                        if ($(_.$slides[index - 1]).attr('data-class') === _.options.mixMode[0]) {
                            offset += 100 * _.options.shiftPecentage;
                            $(element).css({transform: 'translateX(-' + offset + '%)'});
                        } else {
                            offset += 0;
                            $(element).css({transform: 'translateX(-' + offset + '%)'});
                        }
                    } else {
                        offset += 0;
                        $(element).css({transform: 'translateX(-' + offset + '%)'});
                    }
                } else {
                    offset = index * 100 * _.options.shiftPecentage;
                    $(element).css({transform: 'translateX(-' + offset + '%)'});
                }
            }
        });

        _.$slider.addClass('slick-slider');

        _.$slideTrack = (_.slideCount === 0) ?
            $('<div class="slick-track"/>').appendTo(_.$slider) :
            _.$slides.wrapAll('<div class="slick-track"/>').parent();

        _.$list = _.$slideTrack.wrap(
            '<div aria-live="polite" class="slick-list"/>').parent();
        _.$slideTrack.css('opacity', 0);

        if (_.options.centerMode === true || _.options.swipeToSlide === true) {
            _.options.slidesToScroll = 1;
        }

        $('img[data-lazy]', _.$slider).not('[src]').addClass('slick-loading');

        _.setupInfinite();

        _.buildArrows();

        _.buildDots();

        _.buildLinks();

        _.updateDots();
        _.updateLinks();


        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);

        if (_.options.draggable === true) {
            _.$list.addClass('draggable');
        }

    };

    Slick.prototype.buildRows = function() {

        var _ = this, a, b, c, newSlides, numOfSlides, originalSlides,slidesPerSection;

        newSlides = document.createDocumentFragment();
        originalSlides = _.$slider.children();

        if(_.options.rows > 1) {

            slidesPerSection = _.options.slidesPerRow * _.options.rows;
            numOfSlides = Math.ceil(
                originalSlides.length / slidesPerSection
            );

            for(a = 0; a < numOfSlides; a++){
                var slide = document.createElement('div');
                for(b = 0; b < _.options.rows; b++) {
                    var row = document.createElement('div');
                    for(c = 0; c < _.options.slidesPerRow; c++) {
                        var target = (a * slidesPerSection + ((b * _.options.slidesPerRow) + c));
                        if (originalSlides.get(target)) {
                            row.appendChild(originalSlides.get(target));
                        }
                    }
                    slide.appendChild(row);
                }
                newSlides.appendChild(slide);
            }

            _.$slider.html(newSlides);
            _.$slider.children().children().children()
                .css({
                    'width':(100 / _.options.slidesPerRow) + '%',
                    'display': 'inline-block'
                });

        }

    };

    Slick.prototype.checkResponsive = function(initial, forceUpdate) {

        var _ = this,
            breakpoint, targetBreakpoint, respondToWidth, triggerBreakpoint = false;
        var sliderWidth = _.$slider.width();
        var windowWidth = window.innerWidth || $(window).width();

        if (_.respondTo === 'window') {
            respondToWidth = windowWidth;
        } else if (_.respondTo === 'slider') {
            respondToWidth = sliderWidth;
        } else if (_.respondTo === 'min') {
            respondToWidth = Math.min(windowWidth, sliderWidth);
        }

        if ( _.options.responsive &&
            _.options.responsive.length &&
            _.options.responsive !== null) {

            targetBreakpoint = null;

            for (breakpoint in _.breakpoints) {
                if (_.breakpoints.hasOwnProperty(breakpoint)) {
                    if (_.originalSettings.mobileFirst === false) {
                        if (respondToWidth < _.breakpoints[breakpoint]) {
                            targetBreakpoint = _.breakpoints[breakpoint];
                        }
                    } else {
                        if (respondToWidth > _.breakpoints[breakpoint]) {
                            targetBreakpoint = _.breakpoints[breakpoint];
                        }
                    }
                }
            }

            if (targetBreakpoint !== null) {
                if (_.activeBreakpoint !== null) {
                    if (targetBreakpoint !== _.activeBreakpoint || forceUpdate) {
                        _.activeBreakpoint =
                            targetBreakpoint;
                        if (_.breakpointSettings[targetBreakpoint] === 'unslick') {
                            _.unslick(targetBreakpoint);
                        } else {
                            _.options = $.extend({}, _.originalSettings,
                                _.breakpointSettings[
                                    targetBreakpoint]);
                            if (initial === true) {
                                _.currentSlide = _.options.initialSlide;
                            }
                            _.refresh(initial);
                        }
                        triggerBreakpoint = targetBreakpoint;
                    }
                } else {
                    _.activeBreakpoint = targetBreakpoint;
                    if (_.breakpointSettings[targetBreakpoint] === 'unslick') {
                        _.unslick(targetBreakpoint);
                    } else {
                        _.options = $.extend({}, _.originalSettings,
                            _.breakpointSettings[
                                targetBreakpoint]);
                        if (initial === true) {
                            _.currentSlide = _.options.initialSlide;
                        }
                        _.refresh(initial);
                    }
                    triggerBreakpoint = targetBreakpoint;
                }
            } else {
                if (_.activeBreakpoint !== null) {
                    _.activeBreakpoint = null;
                    _.options = _.originalSettings;
                    if (initial === true) {
                        _.currentSlide = _.options.initialSlide;
                    }
                    _.refresh(initial);
                    triggerBreakpoint = targetBreakpoint;
                }
            }

            // only trigger breakpoints during an actual break. not on initialize.
            if( !initial && triggerBreakpoint !== false ) {
                _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);
            }
        }

    };

    Slick.prototype.changeSlide = function(event, dontAnimate) {

        var _ = this,
            $target = $(event.target),
            indexOffset, slideOffset, unevenOffset;

        // If target is a link, prevent default action.
        if($target.is('a')) {
            if (!_.options.enableAnchor) {
            event.preventDefault();
            } else {
                window.loaction.href = $target.attr('href');
            }
        }

        // If target is not the <li> element (ie: a child), find the <li>.
        if(!$target.is('li')) {
            $target = $target.closest('li');
        }

        unevenOffset = (_.slideCount % _.options.slidesToScroll !== 0);
        indexOffset = unevenOffset ? 0 : (_.slideCount - _.currentSlide) % _.options.slidesToScroll;

        switch (event.data.message) {

            case 'previous':
                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : _.options.slidesToShow - indexOffset;
                if (_.slideCount > _.options.slidesToShow) {
                    _.slideHandler(_.currentSlide - slideOffset, false, dontAnimate);
                }
                break;

            case 'next':
                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : indexOffset;
                if (_.slideCount > _.options.slidesToShow) {
                    _.slideHandler(_.currentSlide + slideOffset, false, dontAnimate);
                }
                break;

            case 'index':
                var index = event.data.index === 0 ? 0 :
                    event.data.index || $target.index() * _.options.slidesToScroll;

                _.slideHandler(_.checkNavigable(index), false, dontAnimate);
                $target.children().trigger('focus');
                break;

            default:
                return;
        }

    };

    Slick.prototype.checkNavigable = function(index) {

        var _ = this,
            navigables, prevNavigable;

        navigables = _.getNavigableIndexes();
        prevNavigable = 0;
        if (index > navigables[navigables.length - 1]) {
            index = navigables[navigables.length - 1];
        } else {
            for (var n in navigables) {
                if (index < navigables[n]) {
                    index = prevNavigable;
                    break;
                }
                prevNavigable = navigables[n];
            }
        }

        return index;
    };

    Slick.prototype.cleanUpEvents = function() {

        var _ = this;

        if (_.options.dots && _.$dots !== null) {

            $('li', _.$dots).off('click.slick', _.changeSlide);

            if (_.options.pauseOnDotsHover === true && _.options.autoplay === true) {

                $('li', _.$dots)
                    .off('mouseenter.slick', $.proxy(_.setPaused, _, true))
                    .off('mouseleave.slick', $.proxy(_.setPaused, _, false));

            }

        }

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow && _.$prevArrow.off('click.slick', _.changeSlide);
            _.$nextArrow && _.$nextArrow.off('click.slick', _.changeSlide);
        }

        _.$list.off('touchstart.slick mousedown.slick', _.swipeHandler);
        _.$list.off('touchmove.slick mousemove.slick', _.swipeHandler);
        _.$list.off('touchend.slick mouseup.slick', _.swipeHandler);
        _.$list.off('touchcancel.slick mouseleave.slick', _.swipeHandler);

        _.$list.off('click.slick', _.clickHandler);

        $(document).off(_.visibilityChange, _.visibility);

        _.$list.off('mouseenter.slick', $.proxy(_.setPaused, _, true));
        _.$list.off('mouseleave.slick', $.proxy(_.setPaused, _, false));

        if (_.options.accessibility === true) {
            _.$list.off('keydown.slick', _.keyHandler);
        }

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().off('click.slick', _.selectHandler);
        }

        $(window).off('orientationchange.slick.slick-' + _.instanceUid, _.orientationChange);

        $(window).off('resize.slick.slick-' + _.instanceUid, _.resize);

        $('[draggable!=true]', _.$slideTrack).off('dragstart', _.preventDefault);

        $(window).off('load.slick.slick-' + _.instanceUid, _.setPosition);
        $(document).off('ready.slick.slick-' + _.instanceUid, _.setPosition);
    };

    Slick.prototype.cleanUpRows = function() {

        var _ = this, originalSlides;

        if(_.options.rows > 1) {
            originalSlides = _.$slides.children().children();
            originalSlides.removeAttr('style');
            _.$slider.html(originalSlides);
        }

    };

    Slick.prototype.clickHandler = function(event) {

        var _ = this;

        if (_.shouldClick === false) {
            event.stopImmediatePropagation();
            event.stopPropagation();
            event.preventDefault();
        }

    };

    Slick.prototype.destroy = function(refresh) {

        var _ = this;

        _.autoPlayClear();

        _.touchObject = {};

        _.cleanUpEvents();

        $('.slick-cloned', _.$slider).detach();

        if (_.$dots) {
            _.$dots.remove();
        }


        if ( _.$prevArrow && _.$prevArrow.length ) {

            _.$prevArrow
                .removeClass('slick-disabled slick-arrow slick-hidden')
                .removeAttr('aria-hidden aria-disabled tabindex')
                .css("display","");

            if ( _.htmlExpr.test( _.options.prevArrow )) {
                _.$prevArrow.remove();
            }
        }

        if ( _.$nextArrow && _.$nextArrow.length ) {

            _.$nextArrow
                .removeClass('slick-disabled slick-arrow slick-hidden')
                .removeAttr('aria-hidden aria-disabled tabindex')
                .css("display","");

            if ( _.htmlExpr.test( _.options.nextArrow )) {
                _.$nextArrow.remove();
            }

        }


        if (_.$slides) {

            _.$slides
                .removeClass('slick-slide slick-active slick-center slick-visible slick-current slick-scale slick-shift')
                .removeAttr('aria-hidden')
                .removeAttr('data-slick-index')
                .removeAttr('tabindex')
                .each(function(){
                    $(this).attr('style', $(this).data('originalStyling'));
                    $(this).find('a').removeAttr('tabindex');
                });

            _.$slideTrack.children(this.options.slide).detach();

            _.$slideTrack.detach();

            _.$list.detach();

            _.$slider.append(_.$slides);
        }

        _.cleanUpRows();

        _.$slider.removeClass('slick-slider');
        _.$slider.removeClass('slick-initialized');

        _.unslicked = true;

        if(!refresh) {
            _.$slider.trigger('destroy', [_]);
        }

    };

    Slick.prototype.disableTransition = function(slide) {

        var _ = this,
            transition = {};

        transition[_.transitionType] = '';

        if (_.options.fade === false) {
            _.$slideTrack.css(transition);
        } else {
            _.$slides.eq(slide).css(transition);
        }

    };

    Slick.prototype.fadeSlide = function(slideIndex, callback) {

        var _ = this;

        if (_.cssTransitions === false) {

            _.$slides.eq(slideIndex).css({
                zIndex: _.options.zIndex
            });

            _.$slides.eq(slideIndex).animate({
                opacity: 1
            }, _.options.speed, _.options.easing, callback);

        } else {

            _.applyTransition(slideIndex, _.options.speed - 300);

            setTimeout(function(){
              _.$slides.eq(slideIndex).css({
                  opacity: 1,
                  zIndex: _.options.zIndex
              });
            }, 800);


            if (callback) {
                setTimeout(function() {

                    _.disableTransition(slideIndex);

                    callback.call();
                }, _.options.speed);
            }

        }

    };

    Slick.prototype.fadeSlideOut = function(slideIndex) {

        var _ = this;

        if (_.cssTransitions === false) {

            _.$slides.eq(slideIndex).animate({
                opacity: 0,
                zIndex: _.options.zIndex - 2
            }, _.options.speed, _.options.easing);

        } else {

            _.applyTransition(slideIndex, _.options.speed -100);

            _.$slides.eq(slideIndex).css({
                opacity: 0,
                zIndex: _.options.zIndex - 2
            });

        }

    };

    Slick.prototype.filterSlides = Slick.prototype.slickFilter = function(filter) {

        var _ = this;

        if (filter !== null) {

            _.$slidesCache = _.$slides;

            _.unload();

            _.$slideTrack.children(this.options.slide).detach();

            _.$slidesCache.filter(filter).appendTo(_.$slideTrack);

            _.reinit();

        }

    };

    Slick.prototype.getCurrent = Slick.prototype.slickCurrentSlide = function() {

        var _ = this;
        return _.currentSlide;

    };

    Slick.prototype.getDotCount = function() {

        var _ = this;

        var breakPoint = 0;
        var counter = 0;
        var pagerQty = 0;

        if (_.options.infinite === true) {
            while (breakPoint < _.slideCount) {
                ++pagerQty;
                breakPoint = counter + _.options.slidesToScroll;
                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
            }
        } else if (_.options.centerMode === true) {
            pagerQty = _.slideCount;
        } else {
            while (breakPoint < _.slideCount) {
                ++pagerQty;
                breakPoint = counter + _.options.slidesToScroll;
                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
            }
        }

        return pagerQty - 1;

    };

    Slick.prototype.getLeft = function(slideIndex) {

        var _ = this,
            targetLeft,
            verticalHeight,
            verticalOffset = 0,
            targetSlide;

        _.slideOffset = 0;
        verticalHeight = _.$slides.first().outerHeight(true);

        if (_.options.infinite === true) {
            if (_.slideCount > _.options.slidesToShow) {
                _.slideOffset = (_.slideWidth * _.options.slidesToShow) * -1;
                verticalOffset = (verticalHeight * _.options.slidesToShow) * -1;
            }
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                if (slideIndex + _.options.slidesToScroll > _.slideCount && _.slideCount > _.options.slidesToShow) {
                    if (slideIndex > _.slideCount) {
                        _.slideOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * _.slideWidth) * -1;
                        verticalOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * verticalHeight) * -1;
                    } else {
                        _.slideOffset = ((_.slideCount % _.options.slidesToScroll) * _.slideWidth) * -1;
                        verticalOffset = ((_.slideCount % _.options.slidesToScroll) * verticalHeight) * -1;
                    }
                }
            }
        } else {
            if (slideIndex + _.options.slidesToShow > _.slideCount) {
                _.slideOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * _.slideWidth;
                verticalOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * verticalHeight;
            }
        }

        if (_.slideCount <= _.options.slidesToShow) {
            _.slideOffset = 0;
            verticalOffset = 0;
        }

        if (_.options.centerMode === true && _.options.infinite === true) {
            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2) - _.slideWidth;
        } else if (_.options.centerMode === true) {
            _.slideOffset = 0;
            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2);
        }

        if (_.options.shiftAnimate === true && _.options.centerMode === false) {
            if (_.options.mixMode.length > 0) {

                // get number of half img before current img
                var n = 0;
                var last = '';
                _.$slides.each(function(idx) {
                    if(idx >= slideIndex || idx == 0) {

                    } else {
                        if ($(this).attr('data-class') === _.options.mixMode[0]) {
                            if (last === _.options.mixMode[0]) {
                                n++;
                            }
                            last = $(this).attr('data-class');
                        }
                    }
                });

                if ($(_.$slides[slideIndex]).attr('data-class') === _.options.mixMode[0] && slideIndex > 0) {
                    if ($(_.$slides[slideIndex - 1]).attr('data-class') === _.options.mixMode[0]) {
                        _.slideOffset = (n + 1) * (_.slideWidth * _.options.shiftPecentage);
                    } else {
                        _.slideOffset = n * (_.slideWidth * _.options.shiftPecentage);
                    }
                } else {
                    _.slideOffset = n * (_.slideWidth * _.options.shiftPecentage);
                }
            } else {
                _.slideOffset = slideIndex * (_.slideWidth * _.options.shiftPecentage);
            }
        }

        if (_.options.vertical === false) {
            targetLeft = ((slideIndex * _.slideWidth) * -1) + _.slideOffset;
        } else {
            targetLeft = ((slideIndex * verticalHeight) * -1) + verticalOffset;
        }

        if (_.options.variableWidth === true) {

            if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);
            } else {
                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow);
            }

            if (_.options.rtl === true) {
                if (targetSlide[0]) {
                    targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                } else {
                    targetLeft =  0;
                }
            } else {
                targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
            }

            if (_.options.centerMode === true) {
                if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);
                } else {
                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow + 1);
                }

                if (_.options.rtl === true) {
                    if (targetSlide[0]) {
                        targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                    } else {
                        targetLeft =  0;
                    }
                } else {
                    targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
                }

                targetLeft += (_.$list.width() - targetSlide.outerWidth()) / 2;
            }
        }

        return targetLeft;

    };

    Slick.prototype.getOption = Slick.prototype.slickGetOption = function(option) {

        var _ = this;

        return _.options[option];

    };

    Slick.prototype.getNavigableIndexes = function() {

        var _ = this,
            breakPoint = 0,
            counter = 0,
            indexes = [],
            max;

        if (_.options.infinite === false) {
            max = _.slideCount;
        } else {
            breakPoint = _.options.slidesToScroll * -1;
            counter = _.options.slidesToScroll * -1;
            max = _.slideCount * 2;
        }

        while (breakPoint < max) {
            indexes.push(breakPoint);
            breakPoint = counter + _.options.slidesToScroll;
            counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
        }

        return indexes;

    };

    Slick.prototype.getSlick = function() {

        return this;

    };

    Slick.prototype.getSlideCount = function() {

        var _ = this,
            slidesTraversed, swipedSlide, centerOffset;

        centerOffset = _.options.centerMode === true ? _.slideWidth * Math.floor(_.options.slidesToShow / 2) : 0;

        if (_.options.swipeToSlide === true) {
            _.$slideTrack.find('.slick-slide').each(function(index, slide) {
                if (slide.offsetLeft - centerOffset + ($(slide).outerWidth() / 2) > (_.swipeLeft * -1)) {
                    swipedSlide = slide;
                    return false;
                }
            });

            slidesTraversed = Math.abs($(swipedSlide).attr('data-slick-index') - _.currentSlide) || 1;

            return slidesTraversed;

        } else {
            return _.options.slidesToScroll;
        }

    };

    Slick.prototype.goTo = Slick.prototype.slickGoTo = function(slide, dontAnimate) {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'index',
                index: parseInt(slide)
            }
        }, dontAnimate);

    };

    Slick.prototype.init = function(creation) {

        var _ = this;

        if (!$(_.$slider).hasClass('slick-initialized')) {

            $(_.$slider).addClass('slick-initialized');

            _.buildRows();
            _.buildOut();
            _.setProps();
            _.startLoad();
            _.loadSlider();
            _.initializeEvents();
            _.updateArrows();
            _.updateDots();
            _.updateLinks();

        }

        if (_.options.setClassToContainer) {
            _.updateContainerClass()
        }

        if (creation && $('input#hq-component').val() != 'yes') { // solve us and hq slick confliction on pdp
            _.$slider.trigger('init', [_]);
        }

        if (_.options.accessibility === true) {
            _.initADA();
        }

    };

    Slick.prototype.initArrowEvents = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow.on('click.slick', {
                message: 'previous'
            }, _.changeSlide);
            _.$nextArrow.on('click.slick', {
                message: 'next'
            }, _.changeSlide);
        }

    };

    Slick.prototype.initDotEvents = function() {

        var _ = this;

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {
            $('li', _.$dots).on('click.slick', {
                message: 'index'
            }, _.changeSlide);
        }

        if (_.options.dots === true && _.options.pauseOnDotsHover === true && _.options.autoplay === true) {
            $('li', _.$dots)
                .on('mouseenter.slick', $.proxy(_.setPaused, _, true))
                .on('mouseleave.slick', $.proxy(_.setPaused, _, false));
        }

    };

    Slick.prototype.initLinkEvents = function() {

        var _ = this;
        //console.log('enter init link events', _.$links);
        if(_.options.links === true && _.$links.length > 0) {
            var $linkItems = $('li', _.$links);
            if (_.slideCount > _.options.slidesToShow) {

                $linkItems.on('click.slick', {
                    message: 'index'
                }, _.changeSlide);

            }

            if (_.options.pauseOnDotsHover === true && _.options.autoplay === true) {
               $linkItems
                    .on('mouseenter.slick', $.proxy(_.setPaused, _, true))
                    .on('mouseleave.slick', $.proxy(_.setPaused, _, false));
            }
        }

    };

    Slick.prototype.initializeEvents = function() {

        var _ = this;

        _.initArrowEvents();

        _.initDotEvents();

        _.initLinkEvents();

        _.$list.on('touchstart.slick mousedown.slick', {
            action: 'start'
        }, _.swipeHandler);
        _.$list.on('touchmove.slick mousemove.slick', {
            action: 'move'
        }, _.swipeHandler);
        _.$list.on('touchend.slick mouseup.slick', {
            action: 'end'
        }, _.swipeHandler);
        _.$list.on('touchcancel.slick mouseleave.slick', {
            action: 'end'
        }, _.swipeHandler);

        _.$list.on('click.slick', _.clickHandler);

        $(document).on(_.visibilityChange, $.proxy(_.visibility, _));

        _.$list.on('mouseenter.slick', $.proxy(_.setPaused, _, true));
        _.$list.on('mouseleave.slick', $.proxy(_.setPaused, _, false));

        if (_.options.accessibility === true) {
            _.$list.on('keydown.slick', _.keyHandler);
        }

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().on('click.slick', _.selectHandler);
        }

        $(window).on('orientationchange.slick.slick-' + _.instanceUid, $.proxy(_.orientationChange, _));

        $(window).on('resize.slick.slick-' + _.instanceUid, $.proxy(_.resize, _));

        $('[draggable!=true]', _.$slideTrack).on('dragstart', _.preventDefault);

        $(window).on('load.slick.slick-' + _.instanceUid, _.setPosition);
        $(document).on('ready.slick.slick-' + _.instanceUid, _.setPosition);

    };

    Slick.prototype.initUI = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {

            _.$prevArrow.show();
            _.$nextArrow.show();

        }

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            _.$dots.show();

        }

        if (_.options.autoplay === true) {

            _.autoPlay();

        }

    };

    Slick.prototype.keyHandler = function(event) {

        var _ = this;
         //Dont slide if the cursor is inside the form fields and arrow keys are pressed
        if(!event.target.tagName.match('TEXTAREA|INPUT|SELECT')) {
            if (event.keyCode === 37 && _.options.accessibility === true) {
                _.changeSlide({
                    data: {
                        message: 'previous'
                    }
                });
            } else if (event.keyCode === 39 && _.options.accessibility === true) {
                _.changeSlide({
                    data: {
                        message: 'next'
                    }
                });
            }
        }

    };

    Slick.prototype.lazyLoad = function() {

        var _ = this,
            loadRange, cloneRange, rangeStart, rangeEnd;

        function loadImages(imagesScope) {
            $('img[data-lazy]', imagesScope).each(function() {

                var image = $(this),
                    imageSource = $(this).attr('data-lazy'),
                    imageToLoad = document.createElement('img');

                imageToLoad.onload = function() {
                    image
                        .animate({ opacity: 0 }, 100, function() {
                            image
                                .attr('src', imageSource)
                                .animate({ opacity: 1 }, 200, function() {
                                    image
                                        .removeAttr('data-lazy')
                                        .removeClass('slick-loading');
                                });
                        });
                };

                imageToLoad.src = imageSource;

            });
        }

        if (_.options.centerMode === true) {
            if (_.options.infinite === true) {
                rangeStart = _.currentSlide + (_.options.slidesToShow / 2 + 1);
                rangeEnd = rangeStart + _.options.slidesToShow + 2;
            } else {
                rangeStart = Math.max(0, _.currentSlide - (_.options.slidesToShow / 2 + 1));
                rangeEnd = 2 + (_.options.slidesToShow / 2 + 1) + _.currentSlide;
            }
        } else {
            rangeStart = _.options.infinite ? _.options.slidesToShow + _.currentSlide : _.currentSlide;
            rangeEnd = rangeStart + _.options.slidesToShow;
            if (_.options.fade === true) {
                if (rangeStart > 0) rangeStart--;
                if (rangeEnd <= _.slideCount) rangeEnd++;
            }
        }

        loadRange = _.$slider.find('.slick-slide').slice(rangeStart, rangeEnd);
        loadImages(loadRange);

        if (_.slideCount <= _.options.slidesToShow) {
            cloneRange = _.$slider.find('.slick-slide');
            loadImages(cloneRange);
        } else
        if (_.currentSlide >= _.slideCount - _.options.slidesToShow) {
            cloneRange = _.$slider.find('.slick-cloned').slice(0, _.options.slidesToShow);
            loadImages(cloneRange);
        } else if (_.currentSlide === 0) {
            cloneRange = _.$slider.find('.slick-cloned').slice(_.options.slidesToShow * -1);
            loadImages(cloneRange);
        }

    };

    Slick.prototype.loadSlider = function() {

        var _ = this;

        _.setPosition();

        _.$slideTrack.css({
            opacity: 1
        });

        _.$slider.removeClass('slick-loading');

        _.initUI();

        if (_.options.lazyLoad === 'progressive') {
            _.progressiveLazyLoad();
        }

    };

    Slick.prototype.next = Slick.prototype.slickNext = function() {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'next'
            }
        });

    };

    Slick.prototype.orientationChange = function() {

        var _ = this;

        _.checkResponsive();
        _.setPosition();

    };

    Slick.prototype.pause = Slick.prototype.slickPause = function() {

        var _ = this;

        _.autoPlayClear();
        _.paused = true;

    };

    Slick.prototype.play = Slick.prototype.slickPlay = function() {

        var _ = this;

        _.paused = false;
        _.autoPlay();

    };

    Slick.prototype.postSlide = function(index) {

        var _ = this;

        _.$slider.trigger('afterChange', [_, index]);

        _.animating = false;

        _.setPosition();

        _.swipeLeft = null;

        if (_.options.autoplay === true && _.paused === false) {
            _.autoPlay();
        }
        if (_.options.accessibility === true) {
            _.initADA();
        }

    };

    Slick.prototype.prev = Slick.prototype.slickPrev = function() {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'previous'
            }
        });

    };

    Slick.prototype.preventDefault = function(event) {
        event.preventDefault();
    };

    Slick.prototype.progressiveLazyLoad = function() {

        var _ = this,
            imgCount, targetImage;

        imgCount = $('img[data-lazy]', _.$slider).length;

        if (imgCount > 0) {
            targetImage = $('img[data-lazy]', _.$slider).first();
            targetImage.attr('src', null);
            targetImage.attr('src', targetImage.attr('data-lazy')).removeClass('slick-loading').load(function() {
                    targetImage.removeAttr('data-lazy');
                    _.progressiveLazyLoad();

                    if (_.options.adaptiveHeight === true) {
                        _.setPosition();
                    }
                })
                .error(function() {
                    targetImage.removeAttr('data-lazy');
                    _.progressiveLazyLoad();
                });
        }

    };

    Slick.prototype.refresh = function( initializing ) {

        var _ = this, currentSlide, firstVisible;

        firstVisible = _.slideCount - _.options.slidesToShow;

        // check that the new breakpoint can actually accept the
        // "current slide" as the current slide, otherwise we need
        // to set it to the closest possible value.
        if ( !_.options.infinite ) {
            if ( _.slideCount <= _.options.slidesToShow ) {
                _.currentSlide = 0;
            } else if ( _.currentSlide > firstVisible ) {
                _.currentSlide = firstVisible;
            }
        }

         currentSlide = _.currentSlide;

        _.destroy(true);

        $.extend(_, _.initials, { currentSlide: currentSlide });

        _.init();

        if( !initializing ) {

            _.changeSlide({
                data: {
                    message: 'index',
                    index: currentSlide
                }
            }, false);

        }

    };

    Slick.prototype.registerBreakpoints = function() {

        var _ = this, breakpoint, currentBreakpoint, l,
            responsiveSettings = _.options.responsive || null;

        if ( $.type(responsiveSettings) === "array" && responsiveSettings.length ) {

            _.respondTo = _.options.respondTo || 'window';

            for ( breakpoint in responsiveSettings ) {

                l = _.breakpoints.length-1;
                currentBreakpoint = responsiveSettings[breakpoint].breakpoint;

                if (responsiveSettings.hasOwnProperty(breakpoint)) {

                    // loop through the breakpoints and cut out any existing
                    // ones with the same breakpoint number, we don't want dupes.
                    while( l >= 0 ) {
                        if( _.breakpoints[l] && _.breakpoints[l] === currentBreakpoint ) {
                            _.breakpoints.splice(l,1);
                        }
                        l--;
                    }

                    _.breakpoints.push(currentBreakpoint);
                    _.breakpointSettings[currentBreakpoint] = responsiveSettings[breakpoint].settings;

                }

            }

            _.breakpoints.sort(function(a, b) {
                return ( _.options.mobileFirst ) ? a-b : b-a;
            });

        }

    };

    Slick.prototype.reinit = function() {

        var _ = this;

        _.$slides =
            _.$slideTrack
                .children(_.options.slide)
                .addClass('slick-slide');

        _.slideCount = _.$slides.length;

        if (_.currentSlide >= _.slideCount && _.currentSlide !== 0) {
            _.currentSlide = _.currentSlide - _.options.slidesToScroll;
        }

        if (_.slideCount <= _.options.slidesToShow) {
            _.currentSlide = 0;
        }

        _.registerBreakpoints();

        _.setProps();
        _.setupInfinite();
        _.buildArrows();
        _.updateArrows();
        _.initArrowEvents();
        _.buildDots();
        _.updateDots();
        _.updateLinks();
        _.initDotEvents();
        _.buildLinks();
        _.initLinkEvents();

        _.checkResponsive(false, true);

        if (_.options.setClassToContainer) {
            _.updateContainerClass()
        }

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().on('click.slick', _.selectHandler);
        }

        _.setSlideClasses(0);

        _.setPosition();

        _.$slider.trigger('reInit', [_]);

        if (_.options.autoplay === true) {
            _.focusHandler();
        }

    };

    Slick.prototype.resize = function() {

        var _ = this;

        if ($(window).width() !== _.windowWidth) {
            clearTimeout(_.windowDelay);
            _.windowDelay = window.setTimeout(function() {
                _.windowWidth = $(window).width();
                _.checkResponsive();
                if( !_.unslicked ) { _.setPosition(); }
            }, 50);
        }
    };

    Slick.prototype.removeSlide = Slick.prototype.slickRemove = function(index, removeBefore, removeAll) {

        var _ = this;

        if (typeof(index) === 'boolean') {
            removeBefore = index;
            index = removeBefore === true ? 0 : _.slideCount - 1;
        } else {
            index = removeBefore === true ? --index : index;
        }

        if (_.slideCount < 1 || index < 0 || index > _.slideCount - 1) {
            return false;
        }

        _.unload();

        if (removeAll === true) {
            _.$slideTrack.children().remove();
        } else {
            _.$slideTrack.children(this.options.slide).eq(index).remove();
        }

        _.$slides = _.$slideTrack.children(this.options.slide);

        _.$slideTrack.children(this.options.slide).detach();

        _.$slideTrack.append(_.$slides);

        _.$slidesCache = _.$slides;

        _.reinit();

    };

    Slick.prototype.setCSS = function(position) {

        var _ = this,
            positionProps = {},
            x, y;

        if (_.options.rtl === true) {
            position = -position;
        }
        x = _.positionProp == 'left' ? Math.ceil(position) + 'px' : '0px';
        y = _.positionProp == 'top' ? Math.ceil(position) + 'px' : '0px';

        positionProps[_.positionProp] = position;

        if (_.transformsEnabled === false) {
            _.$slideTrack.css(positionProps);
        } else {
            positionProps = {};
            if (_.cssTransitions === false) {
                positionProps[_.animType] = 'translate(' + x + ', ' + y + ')';
                _.$slideTrack.css(positionProps);
            } else {
                positionProps[_.animType] = 'translate3d(' + x + ', ' + y + ', 0px)';
                _.$slideTrack.css(positionProps);
            }
        }

    };

    Slick.prototype.setDimensions = function() {

        var _ = this;

        if (_.options.vertical === false) {
            if (_.options.centerMode === true) {
                _.$list.css({
                    padding: ('0px ' + _.options.centerPadding)
                });
            }
        } else {
            _.$list.height(_.$slides.first().outerHeight(true) * _.options.slidesToShow);
            if (_.options.centerMode === true) {
                _.$list.css({
                    padding: (_.options.centerPadding + ' 0px')
                });
            }
        }

        _.listWidth = _.$list.width();
        _.listHeight = _.$list.height();


        if (_.options.vertical === false && _.options.variableWidth === false) {
            _.slideWidth = Math.ceil(_.listWidth / _.options.slidesToShow);
            _.$slideTrack.width(Math.ceil((_.slideWidth * _.$slideTrack.children('.slick-slide').length)));

        } else if (_.options.variableWidth === true) {
            _.$slideTrack.width(5000 * _.slideCount);
        } else {
            _.slideWidth = Math.ceil(_.listWidth);
            _.$slideTrack.height(Math.ceil((_.$slides.first().outerHeight(true) * _.$slideTrack.children('.slick-slide').length)));
        }

        var offset = _.$slides.first().outerWidth(true) - _.$slides.first().width();
        if (_.options.variableWidth === false) _.$slideTrack.children('.slick-slide').width(_.slideWidth - offset);

    };

    Slick.prototype.setFade = function() {

        var _ = this,
            targetLeft;

        _.$slides.each(function(index, element) {
            targetLeft = (_.slideWidth * index) * -1;
            if (_.options.rtl === true) {
                $(element).css({
                    position: 'relative',
                    right: targetLeft,
                    top: 0,
                    zIndex: _.options.zIndex - 2,
                    opacity: 0
                });
            } else {
                $(element).css({
                    position: 'relative',
                    left: targetLeft,
                    top: 0,
                    zIndex: _.options.zIndex - 2,
                    opacity: 0
                });
            }
        });

        _.$slides.eq(_.currentSlide).css({
            zIndex: _.options.zIndex - 1,
            opacity: 1
        });

    };

    Slick.prototype.setHeight = function() {

        var _ = this;

        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true) + 2;
            _.$list.css('height', targetHeight);
        }

    };

    Slick.prototype.setOption = Slick.prototype.slickSetOption = function(option, value, refresh) {

        var _ = this, l, item;

        if( option === "responsive" && $.type(value) === "array" ) {
            for ( item in value ) {
                if( $.type( _.options.responsive ) !== "array" ) {
                    _.options.responsive = [ value[item] ];
                } else {
                    l = _.options.responsive.length-1;
                    // loop through the responsive object and splice out duplicates.
                    while( l >= 0 ) {
                        if( _.options.responsive[l].breakpoint === value[item].breakpoint ) {
                            _.options.responsive.splice(l,1);
                        }
                        l--;
                    }
                    _.options.responsive.push( value[item] );
                }
            }
        } else {
            _.options[option] = value;
        }

        if (refresh === true) {
            _.unload();
            _.reinit();
        }

    };

    Slick.prototype.setPosition = function() {

        var _ = this;

        _.setDimensions();

        _.setHeight();

        if (_.options.fade === false) {
            _.setCSS(_.getLeft(_.currentSlide));
        } else {
            _.setFade();
        }

        _.$slider.trigger('setPosition', [_]);

    };

    Slick.prototype.setProps = function() {

        var _ = this,
            bodyStyle = document.body.style;

        _.positionProp = _.options.vertical === true ? 'top' : 'left';

        if (_.positionProp === 'top') {
            _.$slider.addClass('slick-vertical');
        } else {
            _.$slider.removeClass('slick-vertical');
        }

        if (bodyStyle.WebkitTransition !== undefined ||
            bodyStyle.MozTransition !== undefined ||
            bodyStyle.msTransition !== undefined) {
            if (_.options.useCSS === true) {
                _.cssTransitions = true;
            }
        }

        if ( _.options.fade ) {
            if ( typeof _.options.zIndex === 'number' ) {
                if( _.options.zIndex < 3 ) {
                    _.options.zIndex = 3;
                }
            } else {
                _.options.zIndex = _.defaults.zIndex;
            }
        }

        if (bodyStyle.OTransform !== undefined) {
            _.animType = 'OTransform';
            _.transformType = '-o-transform';
            _.transitionType = 'OTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.MozTransform !== undefined) {
            _.animType = 'MozTransform';
            _.transformType = '-moz-transform';
            _.transitionType = 'MozTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.MozPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.webkitTransform !== undefined) {
            _.animType = 'webkitTransform';
            _.transformType = '-webkit-transform';
            _.transitionType = 'webkitTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.msTransform !== undefined) {
            _.animType = 'msTransform';
            _.transformType = '-ms-transform';
            _.transitionType = 'msTransition';
            if (bodyStyle.msTransform === undefined) _.animType = false;
        }
        if (bodyStyle.transform !== undefined && _.animType !== false) {
            _.animType = 'transform';
            _.transformType = 'transform';
            _.transitionType = 'transition';
        }
        _.transformsEnabled = _.options.useTransform && (_.animType !== null && _.animType !== false);
    };


    Slick.prototype.setSlideClasses = function(index) {

        var _ = this,
            centerOffset, allSlides, indexOffset, remainder;

        allSlides = _.$slider
            .find('.slick-slide')
            .removeClass('slick-active slick-center slick-current slick-scale slick-shift')
            .attr('aria-hidden', 'true');

        _.$slides
            .eq(index)
            .addClass('slick-current');

        // shift
        if(_.options.shiftAnimate === true) {
            _.$slides.each(function(idx) {
                if(idx === index) {
                    return;
                } else {
                    _.$slides
                      .eq(idx)
                      .addClass('slick-shift');
                }
            });
        }

        // scale
        if(_.options.scaleAnimate === true) {
            _.$slides.each(function(idx) {
                if(idx === index) {
                    return;
                } else {
                    _.$slides
                      .eq(idx)
                      .addClass('slick-scale');
                }
            });
        }

        if (_.options.centerMode === true) {

            centerOffset = Math.floor(_.options.slidesToShow / 2);

            if (_.options.infinite === true) {

                if (index >= centerOffset && index <= (_.slideCount - 1) - centerOffset) {

                    _.$slides
                        .slice(index - centerOffset, index + centerOffset + 1)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                } else {

                    indexOffset = _.options.slidesToShow + index;
                    allSlides
                        .slice(indexOffset - centerOffset + 1, indexOffset + centerOffset + 2)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                }

                if (index === 0) {

                    allSlides
                        .eq(allSlides.length - 1 - _.options.slidesToShow)
                        .addClass('slick-center');

                } else if (index === _.slideCount - 1) {

                    allSlides
                        .eq(_.options.slidesToShow)
                        .addClass('slick-center');

                }

            }

            _.$slides
                .eq(index)
                .addClass('slick-center');

        } else {

            if (index >= 0 && index <= (_.slideCount - _.options.slidesToShow)) {

                _.$slides
                    .slice(index, index + _.options.slidesToShow)
                    .addClass('slick-active')
                    .attr('aria-hidden', 'false');

            } else if (allSlides.length <= _.options.slidesToShow) {

                allSlides
                    .addClass('slick-active')
                    .attr('aria-hidden', 'false');

            } else {

                remainder = _.slideCount % _.options.slidesToShow;
                indexOffset = _.options.infinite === true ? _.options.slidesToShow + index : index;

                if (_.options.slidesToShow == _.options.slidesToScroll && (_.slideCount - index) < _.options.slidesToShow) {

                    allSlides
                        .slice(indexOffset - (_.options.slidesToShow - remainder), indexOffset + remainder)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                } else {

                    allSlides
                        .slice(indexOffset, indexOffset + _.options.slidesToShow)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                }

            }

        }

        if (_.options.lazyLoad === 'ondemand') {
            _.lazyLoad();
        }

    };

    Slick.prototype.setupInfinite = function() {

        var _ = this,
            i, slideIndex, infiniteCount;

        if (_.options.fade === true) {
            _.options.centerMode = false;
        }

        if (_.options.infinite === true && _.options.fade === false) {

            slideIndex = null;

            if (_.slideCount > _.options.slidesToShow) {

                if (_.options.centerMode === true) {
                    infiniteCount = _.options.slidesToShow + 1;
                } else {
                    infiniteCount = _.options.slidesToShow;
                }

                for (i = _.slideCount; i > (_.slideCount -
                        infiniteCount); i -= 1) {
                    slideIndex = i - 1;
                    $(_.$slides[slideIndex]).clone(true).attr('id', '')
                        .attr('data-slick-index', slideIndex - _.slideCount)
                        .prependTo(_.$slideTrack).addClass('slick-cloned');
                }
                for (i = 0; i < infiniteCount; i += 1) {
                    slideIndex = i;
                    $(_.$slides[slideIndex]).clone(true).attr('id', '')
                        .attr('data-slick-index', slideIndex + _.slideCount)
                        .appendTo(_.$slideTrack).addClass('slick-cloned');
                }
                _.$slideTrack.find('.slick-cloned').find('[id]').each(function() {
                    $(this).attr('id', '');
                });

            }

        }

    };

    Slick.prototype.setPaused = function(paused) {

        var _ = this;

        if (_.options.autoplay === true && _.options.pauseOnHover === true) {
            _.paused = paused;
            if (!paused) {
                _.autoPlay();
            } else {
                _.autoPlayClear();
            }
        }
    };

    Slick.prototype.selectHandler = function(event) {

        var _ = this;

        var targetElement =
            $(event.target).is('.slick-slide') ?
                $(event.target) :
                $(event.target).parents('.slick-slide');

        var index = parseInt(targetElement.attr('data-slick-index'));

        if (!index) index = 0;

        if (_.slideCount <= _.options.slidesToShow) {

            _.setSlideClasses(index);
            _.asNavFor(index);
            return;

        }

        _.slideHandler(index);

    };

    Slick.prototype.slideHandler = function(index, sync, dontAnimate) {

        var targetSlide, animSlide, oldSlide, slideLeft, targetLeft = null,
            _ = this;

        sync = sync || false;

        if (_.animating === true && _.options.waitForAnimate === true) {
            return;
        }

        if (_.options.fade === true && _.currentSlide === index) {
            return;
        }

        if (_.slideCount <= _.options.slidesToShow) {
            return;
        }

        if (sync === false) {
            _.asNavFor(index);
        }

        targetSlide = index;
        targetLeft = _.getLeft(targetSlide);
        slideLeft = _.getLeft(_.currentSlide);

        _.currentLeft = _.swipeLeft === null ? slideLeft : _.swipeLeft;

        if (_.options.infinite === false && _.options.centerMode === false && (index < 0 || index > _.getDotCount() * _.options.slidesToScroll)) {
            if (_.options.fade === false) {
                targetSlide = _.currentSlide;
                if (dontAnimate !== true) {
                    _.animateSlide(slideLeft, function() {
                        _.postSlide(targetSlide);
                    });
                } else {
                    _.postSlide(targetSlide);
                }
            }
            return;
        } else if (_.options.infinite === false && _.options.centerMode === true && (index < 0 || index > (_.slideCount - _.options.slidesToScroll))) {
            if (_.options.fade === false) {
                targetSlide = _.currentSlide;
                if (dontAnimate !== true) {
                    _.animateSlide(slideLeft, function() {
                        _.postSlide(targetSlide);
                    });
                } else {
                    _.postSlide(targetSlide);
                }
            }
            return;
        }

        if (_.options.autoplay === true) {
            clearInterval(_.autoPlayTimer);
        }

        if (targetSlide < 0) {
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                animSlide = _.slideCount - (_.slideCount % _.options.slidesToScroll);
            } else {
                animSlide = _.slideCount + targetSlide;
            }
        } else if (targetSlide >= _.slideCount) {
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                animSlide = 0;
            } else {
                animSlide = targetSlide - _.slideCount;
            }
        } else {
            animSlide = targetSlide;
        }

        _.animating = true;

        _.$slider.trigger('beforeChange', [_, _.currentSlide, animSlide]);

        oldSlide = _.currentSlide;
        _.currentSlide = animSlide;

        _.setSlideClasses(_.currentSlide);

        _.updateDots();
        _.updateLinks();
        _.updateArrows();

        // set parents class
        if (_.options.setClassToContainer === true) {
            _.updateContainerClass();
        }

        if (_.options.fade === true) {
            if (dontAnimate !== true) {

                _.fadeSlideOut(oldSlide);

                _.fadeSlide(animSlide, function() {
                    _.postSlide(animSlide);
                });

            } else {
                _.postSlide(animSlide);
            }
            _.animateHeight();
            return;
        }

        if (dontAnimate !== true) {
            _.animateSlide(targetLeft, function() {
                _.postSlide(animSlide);
            });
        } else {
            _.postSlide(animSlide);
        }

    };

    Slick.prototype.startLoad = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {

            _.$prevArrow.hide();
            _.$nextArrow.hide();

        }

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            _.$dots.hide();

        }

        _.$slider.addClass('slick-loading');

    };

    Slick.prototype.swipeDirection = function() {

        var xDist, yDist, r, swipeAngle, _ = this;

        xDist = _.touchObject.startX - _.touchObject.curX;
        yDist = _.touchObject.startY - _.touchObject.curY;
        r = Math.atan2(yDist, xDist);

        swipeAngle = Math.round(r * 180 / Math.PI);
        if (swipeAngle < 0) {
            swipeAngle = 360 - Math.abs(swipeAngle);
        }

        if ((swipeAngle <= 45) && (swipeAngle >= 0)) {
            return (_.options.rtl === false ? 'left' : 'right');
        }
        if ((swipeAngle <= 360) && (swipeAngle >= 315)) {
            return (_.options.rtl === false ? 'left' : 'right');
        }
        if ((swipeAngle >= 135) && (swipeAngle <= 225)) {
            return (_.options.rtl === false ? 'right' : 'left');
        }
        if (_.options.verticalSwiping === true) {
            if ((swipeAngle >= 35) && (swipeAngle <= 135)) {
                return 'left';
            } else {
                return 'right';
            }
        }

        return 'vertical';

    };

    Slick.prototype.swipeEnd = function(event) {

        var _ = this,
            slideCount;

        _.dragging = false;

        _.shouldClick = (_.touchObject.swipeLength > 10) ? false : true;

        if (_.touchObject.curX === undefined) {
            return false;
        }

        if (_.touchObject.edgeHit === true) {
            _.$slider.trigger('edge', [_, _.swipeDirection()]);
        }

        if (_.touchObject.swipeLength >= _.touchObject.minSwipe) {

            switch (_.swipeDirection()) {
                case 'left':
                    slideCount = _.options.swipeToSlide ? _.checkNavigable(_.currentSlide + _.getSlideCount()) : _.currentSlide + _.getSlideCount();
                    _.slideHandler(slideCount);
                    _.currentDirection = 0;
                    _.touchObject = {};
                    _.$slider.trigger('swipe', [_, 'left']);
                    break;

                case 'right':
                    slideCount = _.options.swipeToSlide ? _.checkNavigable(_.currentSlide - _.getSlideCount()) : _.currentSlide - _.getSlideCount();
                    _.slideHandler(slideCount);
                    _.currentDirection = 1;
                    _.touchObject = {};
                    _.$slider.trigger('swipe', [_, 'right']);
                    break;
            }
        } else {
            if (_.touchObject.startX !== _.touchObject.curX) {
                _.slideHandler(_.currentSlide);
                _.touchObject = {};
            }
        }

    };

    Slick.prototype.swipeHandler = function(event) {

        var _ = this;

        if ((_.options.swipe === false) || ('ontouchend' in document && _.options.swipe === false)) {
            return;
        } else if (_.options.draggable === false && event.type.indexOf('mouse') !== -1) {
            return;
        }

        _.touchObject.fingerCount = event.originalEvent && event.originalEvent.touches !== undefined ?
            event.originalEvent.touches.length : 1;

        _.touchObject.minSwipe = _.listWidth / _.options
            .touchThreshold;

        if (_.options.verticalSwiping === true) {
            _.touchObject.minSwipe = _.listHeight / _.options
                .touchThreshold;
        }

        switch (event.data.action) {

            case 'start':
                _.swipeStart(event);
                break;

            case 'move':
                _.swipeMove(event);
                break;

            case 'end':
                _.swipeEnd(event);
                break;

        }

    };

    Slick.prototype.swipeMove = function(event) {

        var _ = this,
            edgeWasHit = false,
            curLeft, swipeDirection, swipeLength, positionOffset, touches;

        touches = event.originalEvent !== undefined ? event.originalEvent.touches : null;

        if (!_.dragging || touches && touches.length !== 1) {
            return false;
        }

        curLeft = _.getLeft(_.currentSlide);

        _.touchObject.curX = touches !== undefined ? touches[0].pageX : event.clientX;
        _.touchObject.curY = touches !== undefined ? touches[0].pageY : event.clientY;

        _.touchObject.swipeLength = Math.round(Math.sqrt(
            Math.pow(_.touchObject.curX - _.touchObject.startX, 2)));

        if (_.options.verticalSwiping === true) {
            _.touchObject.swipeLength = Math.round(Math.sqrt(
                Math.pow(_.touchObject.curY - _.touchObject.startY, 2)));
        }

        swipeDirection = _.swipeDirection();

        if (swipeDirection === 'vertical') {
            return;
        }

        if (event.originalEvent !== undefined && _.touchObject.swipeLength > 4) {
            event.preventDefault();
        }

        positionOffset = (_.options.rtl === false ? 1 : -1) * (_.touchObject.curX > _.touchObject.startX ? 1 : -1);
        if (_.options.verticalSwiping === true) {
            positionOffset = _.touchObject.curY > _.touchObject.startY ? 1 : -1;
        }


        swipeLength = _.touchObject.swipeLength;

        _.touchObject.edgeHit = false;

        if (_.options.infinite === false) {
            if ((_.currentSlide === 0 && swipeDirection === 'right') || (_.currentSlide >= _.getDotCount() && swipeDirection === 'left')) {
                swipeLength = _.touchObject.swipeLength * _.options.edgeFriction;
                _.touchObject.edgeHit = true;
            }
        }

        if (_.options.vertical === false) {
            _.swipeLeft = curLeft + swipeLength * positionOffset;
        } else {
            _.swipeLeft = curLeft + (swipeLength * (_.$list.height() / _.listWidth)) * positionOffset;
        }
        if (_.options.verticalSwiping === true) {
            _.swipeLeft = curLeft + swipeLength * positionOffset;
        }

        if (_.options.fade === true || _.options.touchMove === false) {
            return false;
        }

        if (_.animating === true) {
            _.swipeLeft = null;
            return false;
        }

        _.setCSS(_.swipeLeft);

    };

    Slick.prototype.swipeStart = function(event) {

        var _ = this,
            touches;

        if (_.touchObject.fingerCount !== 1 || _.slideCount <= _.options.slidesToShow) {
            _.touchObject = {};
            return false;
        }

        if (event.originalEvent !== undefined && event.originalEvent.touches !== undefined) {
            touches = event.originalEvent.touches[0];
        }

        _.touchObject.startX = _.touchObject.curX = touches !== undefined ? touches.pageX : event.clientX;
        _.touchObject.startY = _.touchObject.curY = touches !== undefined ? touches.pageY : event.clientY;

        _.dragging = true;

    };

    Slick.prototype.unfilterSlides = Slick.prototype.slickUnfilter = function() {

        var _ = this;

        if (_.$slidesCache !== null) {

            _.unload();

            _.$slideTrack.children(this.options.slide).detach();

            _.$slidesCache.appendTo(_.$slideTrack);

            _.reinit();

        }

    };

    Slick.prototype.unload = function() {

        var _ = this;

        $('.slick-cloned', _.$slider).remove();

        if (_.$dots) {
            _.$dots.remove();
        }

        if (_.$prevArrow && _.htmlExpr.test(_.options.prevArrow)) {
            _.$prevArrow.remove();
        }

        if (_.$nextArrow && _.htmlExpr.test(_.options.nextArrow)) {
            _.$nextArrow.remove();
        }

        _.$slides
            .removeClass('slick-slide slick-active slick-visible slick-current slick-scale slick-shift')
            .attr('aria-hidden', 'true')
            .css('width', '');

    };

    Slick.prototype.unslick = function(fromBreakpoint) {

        var _ = this;
        _.$slider.trigger('unslick', [_, fromBreakpoint]);
        _.destroy();

    };

    Slick.prototype.updateArrows = function() {

        var _ = this,
            centerOffset;

        centerOffset = Math.floor(_.options.slidesToShow / 2);

        if ( _.options.arrows === true &&
            _.slideCount > _.options.slidesToShow &&
            !_.options.infinite ) {

            _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');
            _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            if (_.currentSlide === 0) {

                _.$prevArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            } else if (_.currentSlide >= _.slideCount - _.options.slidesToShow && _.options.centerMode === false) {

                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            } else if (_.currentSlide >= _.slideCount - 1 && _.options.centerMode === true) {

                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            }

        }

    };

    Slick.prototype.updateContainerClass = function() {
        var _ = this;
        var container = _.$ele.closest('.container');

        container.attr('class', container.attr('class').replace(/\bwith_.*?\b/g, ''));
        container.addClass('with_' + _.$slides.eq(_.currentSlide).attr('data-class'));
    };

    Slick.prototype.updateDots = function() {

        var _ = this;

        if (_.$dots !== null) {

            _.$dots
                .find('li')
                .removeClass('slick-active')
                .attr('aria-hidden', 'true');

            _.$dots
                .find('li')
                .eq(Math.floor(_.currentSlide / _.options.slidesToScroll))
                .addClass('slick-active')
                .attr('aria-hidden', 'false');

            if (_.slideCount > 6) {
                _.$dots
                  .find('li').each(function(idx) {
                      $(this).removeClass('slick-active-1').removeClass('slick-active-2').removeClass('slick-active-3').removeClass('slick-active-4');
                      if (_.slideCount - 1 - _.currentSlide === 2) {
                          // in right 2
                          if (idx >= _.currentSlide) {
                              $(this).addClass('slick-active-1');
                          } else if (idx === _.currentSlide - 1) {
                              $(this).addClass('slick-active-2');
                          } else if (idx === _.currentSlide - 2) {
                              $(this).addClass('slick-active-3');
                          } else {
                              $(this).addClass('slick-active-4');
                          }
                      } else if (_.slideCount - 1 - _.currentSlide === 1) {
                          // in right 1
                          if (idx >= _.currentSlide - 1) {
                              $(this).addClass('slick-active-1');
                          } else if (idx === _.currentSlide - 2) {
                              $(this).addClass('slick-active-2');
                          } else if (idx === _.currentSlide - 3) {
                              $(this).addClass('slick-active-3');
                          } else {
                              $(this).addClass('slick-active-4');
                          }
                      } else if (_.slideCount - 1 - _.currentSlide === 0) {
                          // in right 0
                          if (idx >= _.currentSlide - 2) {
                              $(this).addClass('slick-active-1');
                          } else if (idx === _.currentSlide - 3) {
                              $(this).addClass('slick-active-2');
                          } else if (idx === _.currentSlide - 4) {
                              $(this).addClass('slick-active-3');
                          } else {
                              $(this).addClass('slick-active-4');
                          }
                      } else if (_.currentSlide === 2) {
                          // in left 2
                          if (idx <= _.currentSlide) {
                              $(this).addClass('slick-active-1');
                          } else if (idx === _.currentSlide + 1) {
                              $(this).addClass('slick-active-2');
                          } else if (idx === _.currentSlide + 2) {
                              $(this).addClass('slick-active-3');
                          } else {
                              $(this).addClass('slick-active-4');
                          }
                      } else if (_.currentSlide === 1) {
                          // in left 1
                          if (idx <= _.currentSlide + 1) {
                              $(this).addClass('slick-active-1');
                          } else if (idx === _.currentSlide + 2) {
                              $(this).addClass('slick-active-2');
                          } else if (idx === _.currentSlide + 3) {
                              $(this).addClass('slick-active-3');
                          } else {
                              $(this).addClass('slick-active-4');
                          }
                      } else if (_.currentSlide === 0) {
                          // in left 0
                          if (idx <= _.currentSlide + 2) {
                              $(this).addClass('slick-active-1');
                          } else if (idx === _.currentSlide + 3) {
                              $(this).addClass('slick-active-2');
                          } else if (idx === _.currentSlide + 4) {
                              $(this).addClass('slick-active-3');
                          } else {
                              $(this).addClass('slick-active-4');
                          }
                      } else {
                          // in middle
                          if (Math.abs(idx - _.currentSlide) < 2) {
                              $(this).addClass('slick-active-1');
                          } else if (Math.abs(idx - _.currentSlide) === 2) {
                              $(this).addClass('slick-active-2');
                          } else {
                              $(this).addClass('slick-active-4');
                          }
                      }
                  })
            }

        }

    };

    Slick.prototype.updateLinks = function() {

        var _ = this;

        if (_.$links !== null) {

            _.$links
                .find('li')
                .removeClass('slick-active')
                .attr('aria-hidden', 'true');

            _.$links
                .find('li')
                .eq(Math.floor(_.currentSlide / _.options.slidesToScroll))
                .addClass('slick-active')
                .attr('aria-hidden', 'false');

        }

    };

    Slick.prototype.visibility = function() {

        var _ = this;

        if (document[_.hidden]) {
            _.paused = true;
            _.autoPlayClear();
        } else {
            if (_.options.autoplay === true) {
                _.paused = false;
                _.autoPlay();
            }
        }

    };
    Slick.prototype.initADA = function() {
        var _ = this;
        _.$slides.add(_.$slideTrack.find('.slick-cloned')).attr({
            'aria-hidden': 'true',
            'tabindex': '-1'
        }).find('a, input, button, select').attr({
            'tabindex': '-1'
        });

        _.$slideTrack.attr('role', 'listbox');

        _.$slides.not(_.$slideTrack.find('.slick-cloned')).each(function(i) {
            $(this).attr({
                'role': 'option',
                'aria-describedby': 'slick-slide' + _.instanceUid + i + ''
            });
        });

        if (_.$dots !== null) {
            _.$dots.attr('role', 'tablist').find('li').each(function(i) {
                $(this).attr({
                    'role': 'presentation',
                    'aria-selected': 'false',
                    'aria-controls': 'navigation' + _.instanceUid + i + '',
                    'id': 'slick-slide' + _.instanceUid + i + ''
                });
            })
                .first().attr('aria-selected', 'true').end()
                .find('button').attr('role', 'button').end()
                .closest('div').attr('role', 'toolbar');
        }
        _.activateADA();

    };

    Slick.prototype.activateADA = function() {
        var _ = this;

        _.$slideTrack.find('.slick-active').attr({
            'aria-hidden': 'false'
        }).find('a, input, button, select').attr({
            'tabindex': '0'
        });

    };

    Slick.prototype.focusHandler = function() {
        var _ = this;
        _.$slider.on('focus.slick blur.slick', '*', function(event) {
            event.stopImmediatePropagation();
            var sf = $(this);
            setTimeout(function() {
                if (_.isPlay) {
                    if (sf.is(':focus')) {
                        _.autoPlayClear();
                        _.paused = true;
                    } else {
                        _.paused = false;
                        _.autoPlay();
                    }
                }
            }, 0);
        });
    };

    $.fn.slick = function() {
        var _ = this,
            opt = arguments[0],
            args = Array.prototype.slice.call(arguments, 1),
            l = _.length,
            i,
            ret;
        for (i = 0; i < l; i++) {
            if (typeof opt == 'object' || typeof opt == 'undefined') {
                console.log('slider:', _[i]);
                _[i].slick = new Slick(_[i], opt);
            }
            else {
                ret = _[i].slick[opt].apply(_[i].slick, args);
            }
            if (typeof ret != 'undefined') return ret;
        }
        return _;
    };
    
    $.fn.slickUS = function() {
        var _ = this,
            opt = arguments[0],
            args = Array.prototype.slice.call(arguments, 1),
            l = _.length,
            i,
            ret;
        for (i = 0; i < l; i++) {
            if (typeof opt == 'object' || typeof opt == 'undefined') {
                console.log('slider:', _[i]);
                _[i].slick = new Slick(_[i], opt);
            }
            else {
                ret = _[i].slick[opt].apply(_[i].slick, args);
            }
            if (typeof ret != 'undefined') return ret;
        }
        return _;
    };

}));

/*global jQuery*/

(function($) {
  'use strict';
  $.fn.slickExtension = function(options) {
    options = $.extend({
      'mobileOnly': false,
      'equalize': [],
      'equalizeMobile': false
    }, options);
    var $el = this;
    var parentContainer = $el.closest('.container');

    function getWindowWidth() {
      return Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
    }

    function slickUnslick() {
      var w = getWindowWidth();
      if (w < 769) {
        if (!$el.hasClass('slick-initialized')) {
          $el.slickUS(options);
        }
        return;
      }
      if ($el.hasClass('slick-initialized')) {
        return $el.slickUS('unslick');
      }
    }

    function resetEqualize() {
      var w = getWindowWidth();
      if (w < 769) {
        console.log(options.equalize[0][0].find('.equalized').length);
        if (options.equalize[0][0].find('.equalized').length > 0) {
          parentContainer.find('.equalized').css({'width': '', 'height': ''}).removeClass('equalized');
        }
      } else {
        setEqualize();
      }
    }

    function setResizeListener() {
      if (options.mobileOnly) {
        slickUnslick();
      }
      if (!options.equalizeMobile && options.equalize.length > 0) {
        resetEqualize();
      }
      $(window).resize(function() {
        if (options.mobileOnly) {
          slickUnslick();
        }

        if (!options.equalizeMobile && options.equalize.length > 0) {
          resetEqualize();
        }
      });
    }

    function setEqualize() {
      var i;
      for (i = 0; i < options.equalize.length; i++) {
        $(options.equalize[i][0], options.equalize[i][1]).equalize({reset: true});
      }
    }

    function init() {

      setEqualize();
      $el.slickUS(options);
      if (options.mobileOnly || (!options.equalizeMobile && options.equalize.length > 0)) {
        setResizeListener();
      }
    }

    init();
  };
})(jQuery);


/**
* jquery-match-height 0.7.0 by @liabru
* http://brm.io/jquery-match-height/
* License: MIT
*/

;(function(factory) { // eslint-disable-line no-extra-semi
    'use strict';
    if (typeof define === 'function' && define.amd) {
        // AMD
        define(['jquery'], factory);
    } else if (typeof module !== 'undefined' && module.exports) {
        // CommonJS
        module.exports = factory(require('jquery'));
    } else {
        // Global
        factory(jQuery);
    }
})(function($) {
    /*
    *  internal
    */

    var _previousResizeWidth = -1,
        _updateTimeout = -1;

    /*
    *  _parse
    *  value parse utility function
    */

    var _parse = function(value) {
        // parse value and convert NaN to 0
        return parseFloat(value) || 0;
    };

    /*
    *  _rows
    *  utility function returns array of jQuery selections representing each row
    *  (as displayed after float wrapping applied by browser)
    */

    var _rows = function(elements) {
        var tolerance = 1,
            $elements = $(elements),
            lastTop = null,
            rows = [];

        // group elements by their top position
        $elements.each(function(){
            var $that = $(this),
                top = $that.offset().top - _parse($that.css('margin-top')),
                lastRow = rows.length > 0 ? rows[rows.length - 1] : null;

            if (lastRow === null) {
                // first item on the row, so just push it
                rows.push($that);
            } else {
                // if the row top is the same, add to the row group
                if (Math.floor(Math.abs(lastTop - top)) <= tolerance) {
                    rows[rows.length - 1] = lastRow.add($that);
                } else {
                    // otherwise start a new row group
                    rows.push($that);
                }
            }

            // keep track of the last row top
            lastTop = top;
        });

        return rows;
    };

    /*
    *  _parseOptions
    *  handle plugin options
    */

    var _parseOptions = function(options) {
        var opts = {
            byRow: true,
            property: 'height',
            target: null,
            remove: false
        };

        if (typeof options === 'object') {
            return $.extend(opts, options);
        }

        if (typeof options === 'boolean') {
            opts.byRow = options;
        } else if (options === 'remove') {
            opts.remove = true;
        }

        return opts;
    };

    /*
    *  matchHeight
    *  plugin definition
    */

    var matchHeight = $.fn.matchHeight = function(options) {
        var opts = _parseOptions(options);

        // handle remove
        if (opts.remove) {
            var that = this;

            // remove fixed height from all selected elements
            this.css(opts.property, '');

            // remove selected elements from all groups
            $.each(matchHeight._groups, function(key, group) {
                group.elements = group.elements.not(that);
            });

            // TODO: cleanup empty groups

            return this;
        }

        if (this.length <= 1 && !opts.target) {
            return this;
        }

        // keep track of this group so we can re-apply later on load and resize events
        matchHeight._groups.push({
            elements: this,
            options: opts
        });

        // match each element's height to the tallest element in the selection
        matchHeight._apply(this, opts);

        return this;
    };

    /*
    *  plugin global options
    */

    matchHeight.version = '0.7.0';
    matchHeight._groups = [];
    matchHeight._throttle = 80;
    matchHeight._maintainScroll = false;
    matchHeight._beforeUpdate = null;
    matchHeight._afterUpdate = null;
    matchHeight._rows = _rows;
    matchHeight._parse = _parse;
    matchHeight._parseOptions = _parseOptions;

    /*
    *  matchHeight._apply
    *  apply matchHeight to given elements
    */

    matchHeight._apply = function(elements, options) {
        var opts = _parseOptions(options),
            $elements = $(elements),
            rows = [$elements];

        // take note of scroll position
        var scrollTop = $(window).scrollTop(),
            htmlHeight = $('html').outerHeight(true);

        // get hidden parents
        var $hiddenParents = $elements.parents().filter(':hidden');

        // cache the original inline style
        $hiddenParents.each(function() {
            var $that = $(this);
            $that.data('style-cache', $that.attr('style'));
        });

        // temporarily must force hidden parents visible
        $hiddenParents.css('display', 'block');

        // get rows if using byRow, otherwise assume one row
        if (opts.byRow && !opts.target) {

            // must first force an arbitrary equal height so floating elements break evenly
            $elements.each(function() {
                var $that = $(this),
                    display = $that.css('display');

                // temporarily force a usable display value
                if (display !== 'inline-block' && display !== 'flex' && display !== 'inline-flex') {
                    display = 'block';
                }

                // cache the original inline style
                $that.data('style-cache', $that.attr('style'));

                $that.css({
                    'display': display,
                    'padding-top': '0',
                    'padding-bottom': '0',
                    'margin-top': '0',
                    'margin-bottom': '0',
                    'border-top-width': '0',
                    'border-bottom-width': '0',
                    'height': '100px',
                    'overflow': 'hidden'
                });
            });

            // get the array of rows (based on element top position)
            rows = _rows($elements);

            // revert original inline styles
            $elements.each(function() {
                var $that = $(this);
                $that.attr('style', $that.data('style-cache') || '');
            });
        }

        $.each(rows, function(key, row) {
            var $row = $(row),
                targetHeight = 0;

            if (!opts.target) {
                // skip apply to rows with only one item
                if (opts.byRow && $row.length <= 1) {
                    $row.css(opts.property, '');
                    return;
                }

                // iterate the row and find the max height
                $row.each(function(){
                    var $that = $(this),
                        style = $that.attr('style'),
                        display = $that.css('display');

                    // temporarily force a usable display value
                    if (display !== 'inline-block' && display !== 'flex' && display !== 'inline-flex') {
                        display = 'block';
                    }

                    // ensure we get the correct actual height (and not a previously set height value)
                    var css = { 'display': display };
                    css[opts.property] = '';
                    $that.css(css);

                    // find the max height (including padding, but not margin)
                    if ($that.outerHeight(false) > targetHeight) {
                        targetHeight = $that.outerHeight(false);
                    }

                    // revert styles
                    if (style) {
                        $that.attr('style', style);
                    } else {
                        $that.css('display', '');
                    }
                });
            } else {
                // if target set, use the height of the target element
                targetHeight = opts.target.outerHeight(false);
            }

            // iterate the row and apply the height to all elements
            $row.each(function(){
                var $that = $(this),
                    verticalPadding = 0;

                // don't apply to a target
                if (opts.target && $that.is(opts.target)) {
                    return;
                }

                // handle padding and border correctly (required when not using border-box)
                if ($that.css('box-sizing') !== 'border-box') {
                    verticalPadding += _parse($that.css('border-top-width')) + _parse($that.css('border-bottom-width'));
                    verticalPadding += _parse($that.css('padding-top')) + _parse($that.css('padding-bottom'));
                }

                // set the height (accounting for padding and border)
                $that.css(opts.property, (targetHeight - verticalPadding) + 'px');
            });
        });

        // revert hidden parents
        $hiddenParents.each(function() {
            var $that = $(this);
            $that.attr('style', $that.data('style-cache') || null);
        });

        // restore scroll position if enabled
        if (matchHeight._maintainScroll) {
            $(window).scrollTop((scrollTop / htmlHeight) * $('html').outerHeight(true));
        }

        return this;
    };

    /*
    *  matchHeight._applyDataApi
    *  applies matchHeight to all elements with a data-match-height attribute
    */

    matchHeight._applyDataApi = function() {
        var groups = {};

        // generate groups by their groupId set by elements using data-match-height
        $('[data-match-height], [data-mh]').each(function() {
            var $this = $(this),
                groupId = $this.attr('data-mh') || $this.attr('data-match-height');

            if (groupId in groups) {
                groups[groupId] = groups[groupId].add($this);
            } else {
                groups[groupId] = $this;
            }
        });

        // apply matchHeight to each group
        $.each(groups, function() {
            this.matchHeight(true);
        });
    };

    /*
    *  matchHeight._update
    *  updates matchHeight on all current groups with their correct options
    */

    var _update = function(event) {
        if (matchHeight._beforeUpdate) {
            matchHeight._beforeUpdate(event, matchHeight._groups);
        }

        $.each(matchHeight._groups, function() {
            matchHeight._apply(this.elements, this.options);
        });

        if (matchHeight._afterUpdate) {
            matchHeight._afterUpdate(event, matchHeight._groups);
        }
    };

    matchHeight._update = function(throttle, event) {
        // prevent update if fired from a resize event
        // where the viewport width hasn't actually changed
        // fixes an event looping bug in IE8
        if (event && event.type === 'resize') {
            var windowWidth = $(window).width();
            if (windowWidth === _previousResizeWidth) {
                return;
            }
            _previousResizeWidth = windowWidth;
        }

        // throttle updates
        if (!throttle) {
            _update(event);
        } else if (_updateTimeout === -1) {
            _updateTimeout = setTimeout(function() {
                _update(event);
                _updateTimeout = -1;
            }, matchHeight._throttle);
        }
    };

    /*
    *  bind events
    */

    // apply on DOM ready event
    $(matchHeight._applyDataApi);

    // update heights on load and resize events
    $(window).bind('load', function(event) {
        matchHeight._update(false, event);
    });

    // throttled update heights on resize events
    $(window).bind('resize orientationchange', function(event) {
        matchHeight._update(true, event);
    });

});

function StoreLocator(el) {
  var self = this;
  self.element = el;
  self.generalInfo = '<div>Open now in Palo Alto, Los Angeles, Houston and New York City</div>';
  self.modelCode = self.element.attr('data-modelcode');
  // self.domain = '//qa3-publicgw-120145154.us-west-2.elb.amazonaws.com/v1/product-catalog';
  self.domain = $S.bopis();

  self.availableStoreList = {};
  self.zipcode = '';
  self.initialized = false;
  self.permission = true;

  self.init = function() {
    self.renderOverlay();
    self.bindElements();
    self.bindEventListener();
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(self.checkAvailability);
    }
  }

  self.bindElements = function() {
    self.el = $('.omni-channel');
    self.inputGroup = self.el.find('.omni-channel-input');
    self.input = self.el.find('.omni-channel-input-box');
    self.search = self.el.find('.omni-channel-input-search');
    self.nearest = self.el.find('.omni-channel-list-nearest');
    self.mainStore = self.el.find('.omni-channel-list-main');
    self.otherStore = self.el.find('.omni-channel-list-other');
    self.disabledStore = self.el.find('.omni-channel-list-disabled');
    self.useMyLocation = self.el.find('.omni-channel-gps');
    self.error = self.el.find('.omni-channel-error');
    self.loader = self.el.find('.omni-channel-loader');
    self.storeList = {};
    _.each(self.el.find('.omni-channel-store'), function(e) {
      self.storeList[$(e).attr('data-id')] = $(e);
    });
    self.resetStores()
  }

  self.bindEventListener = function() {
    self.element.on('click','.link', function() {
      self.error.hide();
      self.el.show();
      $('body').css('overflow','hidden');
      if (!self.initialized) {
        self.checkAvailability();
      }
      window.utag && utag.view({'pagename_v2': self.permission?'geo location overlay':'non-geo location overlay'});
    });
    self.element.on('click','a', function() {
      self.error.hide();
      self.el.show();
      $('body').css('overflow','hidden');
      if (!self.initialized) {
        self.checkAvailability();
      }
      window.utag && utag.link({link_cat: 'samsung-store-pickup', link_id: 'view_all_stores_store' , link_meta:'link_name: view all stores store', link_position: 'samsung store pickup store'});
      window.utag && utag.view({'pagename_v2': self.permission?'geo location overlay':'non-geo location overlay'});
    });
    self.el.find('.icon-x').on('click', function() {
      self.el.hide();
      if (!self.zipcode) {
        self.resetStores();
      }
      $('body').css('overflow','auto');
      window.utag && utag.link({link_cat: ' view all-store-overlay ', link_id: ' view_all_stores_overlay_close ' , link_meta:'link_name: close ', link_position: ' view all stores_overlay '});
    });
    self.inputGroup.on('click', function() {
      self.error.hide();
      $(this).find('label').addClass('filled');
    });
    self.input.on('focus', function(e) {
      self.error.hide();
      $(this).siblings('label').addClass('filled');
    });
    self.input.on('blur', function(e) {
      if (!$(this).val()) {
        $(this).siblings('label').removeClass('filled');
      } else {
        if (!/(\d){5}/.test($(this).val())) {
          $(this).addClass('error');
        }
      }
    });
    self.input.on('input', function(e) {
      if ($(this).val()) {
        $(this).siblings('label').addClass('filled');
        $(this).addClass('filled');
        if (!/^(\d)*$/.test($(this).val())) {
          $(this).addClass('error');
        } else {
          $(this).removeClass('error');
        }
      } else {
        $(this).addClass('error');
      }
    });
    self.input.on('keyup', function(e) {
      var keyCode = e.which || e.charCode || e.keyCode || 0;
      if (keyCode == 13) {
        var zipcode = self.input.val();
        if (/(\d){5}/.test(zipcode)) {
          self.getStoreByZipcode(zipcode);
        } else {
          self.input.addClass('error');
        }
        window.utag && window.utag && utag.link({link_cat: ' view all-store-overlay ', link_id: ' zip_code_search ' , link_meta:'link_name: zip code search ', link_position: ' view all stores_overlay '});
      }
    });
    self.search.on('click', function(e) {
      e.stopPropagation();
      var zipcode = self.input.val();
      if (/(\d){5}/.test(zipcode)) {
        self.getStoreByZipcode(zipcode);
      }
      window.utag && utag.link({link_cat: ' view all-store-overlay ', link_id: ' zip_code_search ' , link_meta:'link_name: zip code search ', link_position: ' view all stores_overlay '});
    });
    self.useMyLocation.find('span').on('click',function() {
      self.error.hide();
      self.getStoreByGeoLocation();
      window.utag && utag.link({link_cat: ' view all-store-overlay ', link_id: ' use_my_current_location ' , link_meta:'link_name: use my current location ', link_position: ' view all stores_overlay '});
    });
  }

  self.resetStores = function() {
    // self.nearest.hide();
    _.each(self.storeList, function(o, i) {
      if (self.availableStoreList[i]) {
        var date = self.availableStoreList[i].custom_stock_message.replace('Available','').trim();
        o.find('.date').text(date);
        o.detach().appendTo(self.otherStore);
      } else {
        o.detach().appendTo(self.disabledStore);
      }
    });
  }

  self.getStoreByGeoLocation = function() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(self.positionCallback, self.geoErrorHandler);
      }
  }

  self.geoErrorHandler = function(error) {
    switch(error.code) {
      case error.PERMISSION_DENIED:
        self.permission = false;
      case error.POSITION_UNAVAILABLE:
      case error.TIMEOUT:
      case error.UNKNOWN_ERROR:
        self.error.show();
        self.error.text('Permission Denied');
        self.useMyLocation.show();
        break;
    }
  }

  self.positionCallback = function(geoPos) {
    self.useMyLocation.hide();
    var query = '?';
    if (geoPos && geoPos.coords) {
      query+='latitude='+geoPos.coords.latitude+'&longitude='+geoPos.coords.longitude;
    }
    self.getStoreInfo(query);
  }

  self.getStoreByZipcode = function(zipcode) {
    self.useMyLocation.show();
    var query = '?';
    query += 'postal_code=' + zipcode;
    self.getStoreInfo(query, zipcode);
  }

  self.getStoreInfo = function(query, zipcode) {
    var url = '/store/info';
    self.loader.show();
    $.get(self.domain + url + query).then(function(data) {
      self.resetStores();
      self.loader.hide()
      if (data && data.length > 0) {
        self.zipcode = zipcode || '';
        var flag = Object.keys(self.availableStoreList).length > 0;
        _.each(data, function(o) {
          if (self.availableStoreList[o.store_id]) {
            flag = false;
            self.storeList[o.store_id].detach().appendTo(self.mainStore);
            // self.nearest.show();
            self.element.find('.detail').html('<div>Available at <a>'+o.store_name+', '+o.store_address.city+'</a></div><div>'+self.availableStoreList[o.store_id].custom_stock_message+'</div>');
          }
        });
        self.el.find('.omni-channel-other').html('OTHER LOCATIONS');
        if (!flag) {
          self.element.find('.link').hide();
        } else {
          self.element.find('.detail').html(self.generalInfo);
        }
      } else {
        self.element.find('.detail').html(self.generalInfo);
        self.el.find('.omni-channel-other').html('STORE LOCATIONS');
        self.element.find('.link').show();
        self.error.show();
        self.error.text('No Samsung Experience Store locations near you offer pick-up. More stores opening soon.');
      }
    })
  }

  // self.checkAvailabilityOld = function() {
  //   var url = '/v1/store/reserve-online-eligibility?skus=' + self.modelCode;
  //   $.get(self.domain + url).then(function(data) {
  //     if (data && data[0]) {
  //       self.availableStoreList = _.map(data[0].stores, function(o) {
  //         return o.store_id;
  //       });
  //     }
  //     self.init();
  //   })
  // }

  self.checkAvailability = function() {
    var url = '/inventory/status?sku=' + self.modelCode;
    self.loader.show();
    $.get(self.domain + url).then(function(data) {
      self.loader.hide();
      if (data && data[0]) {
        _.each(data[0].store_inventory_info, function(o) {
          if (o.status == 'InStock') {
            self.availableStoreList[o.store_id] = o;
          }
        });
        self.resetStores();
      }
      if (self.zipcode) {
        self.getStoreByZipcode(self.zipcode);
      } else {
        self.getStoreByGeoLocation();
      }
      self.initialized = true;
    })
  }

  self.renderOverlay = function() {
    var html = '<div class="omni-channel" style="display: none;">'+
    '    <div class="omni-channel-container">'+
    '        <span class="icon-x"></span>'+
    '        <div class="omni-channel-logo"><img src="//image-us.samsung.com/SamsungUS/home/store-locator/storepickupx2.png" alt="store pick up"></div>'+
    '        <div class="omni-channel-title">Samsung store pick up locations</div>'+
    '        <div class="omni-channel-subtitle">To qualify for store pick up, all items in your order must be available at the same retail location.</div>'+
    '        <div class="omni-channel-form">'+
    '            <div class="omni-channel-input">'+
    '                <input class="omni-channel-input-box" type="text" name="zipcode" maxlength="5">'+
    '                <label class="omni-channel-input-label">Zip code</label>'+
    '                <svg class="omni-channel-input-search" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.982 17.946">'+
    '                    <path d="M13.475 13.392A7.844 7.844 0 0 0 15.74 7.87a7.87 7.87 0 1 0-7.87 7.87c1.28 0 2.487-.313 3.556-.856l2.358 3.06h3.198l-3.507-4.552zm-5.605-.03a5.492 5.492 0 1 1 0-10.984 5.492 5.492 0 0 1 0 10.985z"></path>'+
    '                    <rect width="100%" height="100%" fill="transparent" class="btn"></rect>'+
    '                </svg>'+
    '            </div>'+
    '            <div class="omni-channel-gps" style="display: none;"><img src="//image-us.samsung.com/SamsungUS/home/store-locator/storegps.png"><span>Use my current location</span></div>'+
    '            <div class="omni-channel-error" style="display: none;"></div>'+
    '            <div class="omni-channel-loader" style="display: none;">Loading...</div>'+
    '        </div>'+
    '        <div class="omni-channel-list">'+
    '            <div style="display: none;">'+
    '                <div class="omni-channel-store" data-id="8001">'+
    '                    <div>'+
    '                        <div class="omni-channel-store-title">'+
    '                            Americana At Brand'+
    '                        </div>'+
    '                        <div class="omni-channel-store-address">'+
    '                            <div>889 Americana Way,</div>'+
    '                            <div>Glendale, CA 91210</div>'+
    '                        </div>'+
    '                    </div>'+
    '                    <div class="omni-channel-store-info">'+
    '                        <div>Available</div>'+
    '                        <div class="date">MM/DD/YY</div>'+
    '                    </div>'+
    '                </div>'+
    '                <div class="omni-channel-store" data-id="8002">'+
    '                    <div>'+
    '                        <div class="omni-channel-store-title">'+
    '                            Roosevelt Field'+
    '                        </div>'+
    '                        <div class="omni-channel-store-address">'+
    '                            <div>630 Old Country Rd,</div>'+
    '                            <div>Garden City, NY 11530</div>'+
    '                        </div>'+
    '                    </div>'+
    '                    <div class="omni-channel-store-info">'+
    '                        <div>Available</div>'+
    '                        <div class="date">MM/DD/YY</div>'+
    '                    </div>'+
    '                </div>'+
    '                <div class="omni-channel-store" data-id="8003">'+
    '                    <div>'+
    '                        <div class="omni-channel-store-title">'+
    '                            The Galleria'+
    '                        </div>'+
    '                        <div class="omni-channel-store-address">'+
    '                            <div>5085 Westheimer Rd,</div>'+
    '                            <div>Houston, TX 77056</div>'+
    '                        </div>'+
    '                    </div>'+
    '                    <div class="omni-channel-store-info">'+
    '                        <div>Available</div>'+
    '                        <div class="date">MM/DD/YY</div>'+
    '                    </div>'+
    '                </div>'+
    '                <div class="omni-channel-store" data-id="8004">'+
    '                    <div>'+
    '                        <div class="omni-channel-store-title">'+
    '                            Palo Alto'+
    '                        </div>'+
    '                        <div class="omni-channel-store-address">'+
    '                            <div>660 Stanford Shopping Center,</div>'+
    '                            <div>Palo Alto, CA 94304</div>'+
    '                        </div>'+
    '                    </div>'+
    '                    <div class="omni-channel-store-info">'+
    '                        <div>Available</div>'+
    '                        <div class="date">MM/DD/YY</div>'+
    '                    </div>'+
    '                </div>'+
    '            </div>'+
    '            <div class="omni-channel-list-main">'+
    '                <div class="omni-channel-list-nearest" style="display: none;"><img src="//image-us.samsung.com/SamsungUS/home/store-locator/storelocator.png" alt="storePickUp"><span>Store near you - XX miles away</span></div>'+
    '            </div>'+
    '            <div class="omni-channel-other">STORE LOCATIONS</div>'+
    '            <div class="omni-channel-list-other">'+
    '            </div>'+
    '            <div class="omni-channel-list-disabled">'+
    '            </div>'+
    '        </div>'+
    '    </div>'+
    '</div>';
    $('body').append(html);
  }

  self.init();


  self.updateSkus = function(Skus) {
    self.modelCode = Skus;
    self.checkAvailability();
  }
}

// how to use
// new StorePickUp($('.store-pick-up'));

/*! VelocityJS.org (1.2.3). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */
!function(a){function b(a){var b=a.length,d=c.type(a);return"function"===d||c.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===d||0===b||"number"==typeof b&&b>0&&b-1 in a}if(!a.jQuery){var c=function(a,b){return new c.fn.init(a,b)};c.isWindow=function(a){return null!=a&&a==a.window},c.type=function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?e[g.call(a)]||"object":typeof a},c.isArray=Array.isArray||function(a){return"array"===c.type(a)},c.isPlainObject=function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(b in a);return void 0===b||f.call(a,b)},c.each=function(a,c,d){var e,f=0,g=a.length,h=b(a);if(d){if(h)for(;g>f&&(e=c.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=c.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=c.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=c.call(a[f],f,a[f]),e===!1)break;return a},c.data=function(a,b,e){if(void 0===e){var f=a[c.expando],g=f&&d[f];if(void 0===b)return g;if(g&&b in g)return g[b]}else if(void 0!==b){var f=a[c.expando]||(a[c.expando]=++c.uuid);return d[f]=d[f]||{},d[f][b]=e,e}},c.removeData=function(a,b){var e=a[c.expando],f=e&&d[e];f&&c.each(b,function(a,b){delete f[b]})},c.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"!=typeof h&&"function"!==c.type(h)&&(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?a:{},h[e]=c.extend(k,g,d)):void 0!==d&&(h[e]=d));return h},c.queue=function(a,d,e){function f(a,c){var d=c||[];return null!=a&&(b(Object(a))?!function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a}(d,"string"==typeof a?[a]:a):[].push.call(d,a)),d}if(a){d=(d||"fx")+"queue";var g=c.data(a,d);return e?(!g||c.isArray(e)?g=c.data(a,d,f(e)):g.push(e),g):g||[]}},c.dequeue=function(a,b){c.each(a.nodeType?[a]:a,function(a,d){b=b||"fx";var e=c.queue(d,b),f=e.shift();"inprogress"===f&&(f=e.shift()),f&&("fx"===b&&e.unshift("inprogress"),f.call(d,function(){c.dequeue(d,b)}))})},c.fn=c.prototype={init:function(a){if(a.nodeType)return this[0]=a,this;throw new Error("Not a DOM node.")},offset:function(){var b=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a(){for(var a=this.offsetParent||document;a&&"html"===!a.nodeType.toLowerCase&&"static"===a.style.position;)a=a.offsetParent;return a||document}var b=this[0],a=a.apply(b),d=this.offset(),e=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:c(a).offset();return d.top-=parseFloat(b.style.marginTop)||0,d.left-=parseFloat(b.style.marginLeft)||0,a.style&&(e.top+=parseFloat(a.style.borderTopWidth)||0,e.left+=parseFloat(a.style.borderLeftWidth)||0),{top:d.top-e.top,left:d.left-e.left}}};var d={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}}(window),function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):a()}(function(){return function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return p.isWrapped(a)?a=[].slice.call(a):p.isNode(a)&&(a=[a]),a}function g(a){var b=m.data(a,"velocity");return null===b?d:b}function h(a){return function(b){return Math.round(b*a)*(1/a)}}function i(a,c,d,e){function f(a,b){return 1-3*b+3*a}function g(a,b){return 3*b-6*a}function h(a){return 3*a}function i(a,b,c){return((f(b,c)*a+g(b,c))*a+h(b))*a}function j(a,b,c){return 3*f(b,c)*a*a+2*g(b,c)*a+h(b)}function k(b,c){for(var e=0;p>e;++e){var f=j(c,a,d);if(0===f)return c;var g=i(c,a,d)-b;c-=g/f}return c}function l(){for(var b=0;t>b;++b)x[b]=i(b*u,a,d)}function m(b,c,e){var f,g,h=0;do g=c+(e-c)/2,f=i(g,a,d)-b,f>0?e=g:c=g;while(Math.abs(f)>r&&++h<s);return g}function n(b){for(var c=0,e=1,f=t-1;e!=f&&x[e]<=b;++e)c+=u;--e;var g=(b-x[e])/(x[e+1]-x[e]),h=c+g*u,i=j(h,a,d);return i>=q?k(b,h):0==i?h:m(b,c,c+u)}function o(){y=!0,(a!=c||d!=e)&&l()}var p=4,q=.001,r=1e-7,s=10,t=11,u=1/(t-1),v="Float32Array"in b;if(4!==arguments.length)return!1;for(var w=0;4>w;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;a=Math.min(a,1),d=Math.min(d,1),a=Math.max(a,0),d=Math.max(d,0);var x=v?new Float32Array(t):new Array(t),y=!1,z=function(b){return y||o(),a===c&&d===e?b:0===b?0:1===b?1:i(n(b),c,e)};z.getControlPoints=function(){return[{x:a,y:c},{x:d,y:e}]};var A="generateBezier("+[a,c,d,e]+")";return z.toString=function(){return A},z}function j(a,b){var c=a;return p.isString(a)?t.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?h.apply(null,a):p.isArray(a)&&2===a.length?u.apply(null,a.concat([b])):p.isArray(a)&&4===a.length?i.apply(null,a):!1,c===!1&&(c=t.Easings[t.defaults.easing]?t.defaults.easing:s),c}function k(a){if(a){var b=(new Date).getTime(),c=t.State.calls.length;c>1e4&&(t.State.calls=e(t.State.calls));for(var f=0;c>f;f++)if(t.State.calls[f]){var h=t.State.calls[f],i=h[0],j=h[2],n=h[3],o=!!n,q=null;n||(n=t.State.calls[f][3]=b-16);for(var r=Math.min((b-n)/j.duration,1),s=0,u=i.length;u>s;s++){var w=i[s],y=w.element;if(g(y)){var z=!1;if(j.display!==d&&null!==j.display&&"none"!==j.display){if("flex"===j.display){var A=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(A,function(a,b){v.setPropertyValue(y,"display",b)})}v.setPropertyValue(y,"display",j.display)}j.visibility!==d&&"hidden"!==j.visibility&&v.setPropertyValue(y,"visibility",j.visibility);for(var B in w)if("element"!==B){var C,D=w[B],E=p.isString(D.easing)?t.Easings[D.easing]:D.easing;if(1===r)C=D.endValue;else{var F=D.endValue-D.startValue;if(C=D.startValue+F*E(r,j,F),!o&&C===D.currentValue)continue}if(D.currentValue=C,"tween"===B)q=C;else{if(v.Hooks.registered[B]){var G=v.Hooks.getRoot(B),H=g(y).rootPropertyValueCache[G];H&&(D.rootPropertyValue=H)}var I=v.setPropertyValue(y,B,D.currentValue+(0===parseFloat(C)?"":D.unitType),D.rootPropertyValue,D.scrollData);v.Hooks.registered[B]&&(g(y).rootPropertyValueCache[G]=v.Normalizations.registered[G]?v.Normalizations.registered[G]("extract",null,I[1]):I[1]),"transform"===I[0]&&(z=!0)}}j.mobileHA&&g(y).transformCache.translate3d===d&&(g(y).transformCache.translate3d="(0px, 0px, 0px)",z=!0),z&&v.flushTransformCache(y)}}j.display!==d&&"none"!==j.display&&(t.State.calls[f][2].display=!1),j.visibility!==d&&"hidden"!==j.visibility&&(t.State.calls[f][2].visibility=!1),j.progress&&j.progress.call(h[1],h[1],r,Math.max(0,n+j.duration-b),n,q),1===r&&l(f)}}t.State.isTicking&&x(k)}function l(a,b){if(!t.State.calls[a])return!1;for(var c=t.State.calls[a][0],e=t.State.calls[a][1],f=t.State.calls[a][2],h=t.State.calls[a][4],i=!1,j=0,k=c.length;k>j;j++){var l=c[j].element;if(b||f.loop||("none"===f.display&&v.setPropertyValue(l,"display",f.display),"hidden"===f.visibility&&v.setPropertyValue(l,"visibility",f.visibility)),f.loop!==!0&&(m.queue(l)[1]===d||!/\.velocityQueueEntryFlag/i.test(m.queue(l)[1]))&&g(l)){g(l).isAnimating=!1,g(l).rootPropertyValueCache={};var n=!1;m.each(v.Lists.transforms3D,function(a,b){var c=/^scale/.test(b)?1:0,e=g(l).transformCache[b];g(l).transformCache[b]!==d&&new RegExp("^\\("+c+"[^.]").test(e)&&(n=!0,delete g(l).transformCache[b])}),f.mobileHA&&(n=!0,delete g(l).transformCache.translate3d),n&&v.flushTransformCache(l),v.Values.removeClass(l,"velocity-animating")}if(!b&&f.complete&&!f.loop&&j===k-1)try{f.complete.call(e,e)}catch(o){setTimeout(function(){throw o},1)}h&&f.loop!==!0&&h(e),g(l)&&f.loop===!0&&!b&&(m.each(g(l).tweensContainer,function(a,b){/^rotate/.test(a)&&360===parseFloat(b.endValue)&&(b.endValue=0,b.startValue=360),/^backgroundPosition/.test(a)&&100===parseFloat(b.endValue)&&"%"===b.unitType&&(b.endValue=0,b.startValue=100)}),t(l,"reverse",{loop:!0,delay:f.delay})),f.queue!==!1&&m.dequeue(l,f.queue)}t.State.calls[a]=!1;for(var p=0,q=t.State.calls.length;q>p;p++)if(t.State.calls[p]!==!1){i=!0;break}i===!1&&(t.State.isTicking=!1,delete t.State.calls,t.State.calls=[])}var m,n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNode:function(a){return a&&a.nodeType},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof b.SVGElement},isEmptyObject:function(a){for(var b in a)return!1;return!0}},q=!1;if(a.fn&&a.fn.jquery?(m=a,q=!0):m=b.Velocity.Utilities,8>=n&&!q)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=n)return void(jQuery.fn.velocity=jQuery.fn.animate);var r=400,s="swing",t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:r,easing:s,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(a){m.data(a,"velocity",{isSVG:p.isSVG(a),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};b.pageYOffset!==d?(t.State.scrollAnchor=b,t.State.scrollPropertyLeft="pageXOffset",t.State.scrollPropertyTop="pageYOffset"):(t.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,t.State.scrollPropertyLeft="scrollLeft",t.State.scrollPropertyTop="scrollTop");var u=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*m):g=m;;)if(h=c(h||i,g),j.push(1+h.x),k+=16,!(Math.abs(h.x)>l&&Math.abs(h.v)>l))break;return f?function(a){return j[a*(j.length-1)|0]}:k}}();t.Easings={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}},m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a,b){t.Easings[b[0]]=i.apply(null,b[1])});var v=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a=0;a<v.Lists.colors.length;a++){var b="color"===v.Lists.colors[a]?"0 0 0 1":"255 255 255 1";v.Hooks.templates[v.Lists.colors[a]]=["Red Green Blue Alpha",b]}var c,d,e;if(n)for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");var f=d[1].match(v.RegEx.valueSplit);"Color"===e[0]&&(e.push(e.shift()),f.push(f.shift()),v.Hooks.templates[c]=[e.join(" "),f.join(" ")])}for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");for(var a in e){var g=c+e[a],h=a;v.Hooks.registered[g]=[c,h]}}},getRoot:function(a){var b=v.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return v.RegEx.valueUnwrap.test(b)&&(b=b.match(v.RegEx.valueUnwrap)[1]),v.Values.isCSSNullValue(b)&&(b=v.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=v.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=v.Hooks.cleanRootPropertyValue(d,b),b.toString().match(v.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=v.Hooks.registered[a];if(d){var e,f,g=d[0],h=d[1];return c=v.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(v.RegEx.valueSplit),e[h]=b,f=e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return v.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(v.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},blur:function(a,b,c){switch(a){case"name":return t.State.isFirefox?"filter":"-webkit-filter";case"extract":var d=parseFloat(c);if(!d&&0!==d){var e=c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d=e?e[1]:0}return d;case"inject":return parseFloat(c)?"blur("+c+")":"none"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){9>=n||t.State.isGingerbread||(v.Lists.transformsBase=v.Lists.transformsBase.concat(v.Lists.transforms3D));for(var a=0;a<v.Lists.transformsBase.length;a++)!function(){var b=v.Lists.transformsBase[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return"transform";case"extract":return g(c)===d||g(c).transformCache[b]===d?/^scale/i.test(b)?1:0:g(c).transformCache[b].replace(/[()]/g,"");case"inject":var f=!1;switch(b.substr(0,b.length-1)){case"translate":f=!/(%|px|em|rem|vw|vh|\d)$/i.test(e);break;case"scal":case"scale":t.State.isAndroid&&g(c).transformCache[b]===d&&1>e&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(g(c).transformCache[b]="("+e+")"),g(c).transformCache[b]}}}();for(var a=0;a<v.Lists.colors.length;a++)!function(){var b=v.Lists.colors[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return b;case"extract":var f;if(v.RegEx.wrappedValueAlreadyExtracted.test(e))f=e;else{var g,h={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e)?g=h[e]!==d?h[e]:h.black:v.RegEx.isHex.test(e)?g="rgb("+v.Values.hexToRgb(e).join(" ")+")":/^rgba?\(/i.test(e)||(g=h.black),f=(g||e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=n||3!==f.split(" ").length||(f+=" 1"),f;case"inject":return 8>=n?4===e.split(" ").length&&(e=e.split(/\s+/).slice(0,3).join(" ")):3===e.split(" ").length&&(e+=" 1"),(8>=n?"rgb":"rgba")+"("+e.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||t.State.isAndroid&&!t.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(t.State.prefixMatches[a])return[t.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(t.State.prefixElement.style[e]))return t.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{hexToRgb:function(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a&&a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":/^(table)$/i.test(b)?"table":/^(tbody)$/i.test(b)?"table-row-group":"block"},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=(a.className.length?" ":"")+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.toString().replace(new RegExp("(^|\\s)"+b.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(a,c,e,f){function h(a,c){function e(){j&&v.setPropertyValue(a,"display","none")}var i=0;if(8>=n)i=m.css(a,c);else{var j=!1;if(/^(width|height)$/.test(c)&&0===v.getPropertyValue(a,"display")&&(j=!0,v.setPropertyValue(a,"display",v.Values.getDisplayType(a))),!f){if("height"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var k=a.offsetHeight-(parseFloat(v.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(v.getPropertyValue(a,"paddingBottom"))||0);return e(),k}if("width"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var l=a.offsetWidth-(parseFloat(v.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(v.getPropertyValue(a,"paddingRight"))||0);return e(),l}}var o;o=g(a)===d?b.getComputedStyle(a,null):g(a).computedStyle?g(a).computedStyle:g(a).computedStyle=b.getComputedStyle(a,null),"borderColor"===c&&(c="borderTopColor"),i=9===n&&"filter"===c?o.getPropertyValue(c):o[c],(""===i||null===i)&&(i=a.style[c]),e()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(c)){var p=h(a,"position");("fixed"===p||"absolute"===p&&/top|left/i.test(c))&&(i=m(a).position()[c]+"px")}return i}var i;if(v.Hooks.registered[c]){var j=c,k=v.Hooks.getRoot(j);e===d&&(e=v.getPropertyValue(a,v.Names.prefixCheck(k)[0])),v.Normalizations.registered[k]&&(e=v.Normalizations.registered[k]("extract",a,e)),i=v.Hooks.extractValue(j,e)}else if(v.Normalizations.registered[c]){var l,o;l=v.Normalizations.registered[c]("name",a),"transform"!==l&&(o=h(a,v.Names.prefixCheck(l)[0]),v.Values.isCSSNullValue(o)&&v.Hooks.templates[c]&&(o=v.Hooks.templates[c][1])),i=v.Normalizations.registered[c]("extract",a,o)}if(!/^[\d-]/.test(i))if(g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c))if(/^(height|width)$/i.test(c))try{i=a.getBBox()[c]}catch(p){i=0}else i=a.getAttribute(c);else i=h(a,v.Names.prefixCheck(c)[0]);return v.Values.isCSSNullValue(i)&&(i=0),t.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,f){var h=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(v.Normalizations.registered[c]&&"transform"===v.Normalizations.registered[c]("name",a))v.Normalizations.registered[c]("inject",a,d),h="transform",d=g(a).transformCache[c];else{if(v.Hooks.registered[c]){var i=c,j=v.Hooks.getRoot(c);e=e||v.getPropertyValue(a,j),d=v.Hooks.injectValue(i,d,e),c=j}if(v.Normalizations.registered[c]&&(d=v.Normalizations.registered[c]("inject",a,d),c=v.Normalizations.registered[c]("name",a)),h=v.Names.prefixCheck(c)[0],8>=n)try{a.style[h]=d}catch(k){t.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;t.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(v.getPropertyValue(a,b))}var c="";if((n||t.State.isAndroid&&!t.State.isChrome)&&g(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};m.each(g(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,f;m.each(g(a).transformCache,function(b){return e=g(a).transformCache[b],"transformPerspective"===b?(f=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),f&&(c="perspective"+f+" "+c)}v.setPropertyValue(a,"transform",c)}};v.Hooks.register(),v.Normalizations.register(),t.hook=function(a,b,c){var e=d;return a=f(a),m.each(a,function(a,f){if(g(f)===d&&t.init(f),c===d)e===d&&(e=t.CSS.getPropertyValue(f,b));else{var h=t.CSS.setPropertyValue(f,b,c);"transform"===h[0]&&t.CSS.flushTransformCache(f),e=h}}),e};var w=function(){function a(){return h?B.promise||null:i}function e(){function a(){function a(a,b){var c=d,e=d,g=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])||v.RegEx.isHex.test(a[1])?g=a[1]:(p.isString(a[1])&&!v.RegEx.isHex.test(a[1])||p.isArray(a[1]))&&(e=b?a[1]:j(a[1],h.duration),a[2]!==d&&(g=a[2]))):c=a,b||(e=e||h.easing),p.isFunction(c)&&(c=c.call(f,y,x)),p.isFunction(g)&&(g=g.call(f,y,x)),[c||0,e,g]}function l(a,b){var c,d;return d=(b||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=v.Values.getUnitType(a)),[d,c]}function n(){var a={myParent:f.parentNode||c.body,position:v.getPropertyValue(f,"position"),fontSize:v.getPropertyValue(f,"fontSize")},d=a.position===I.lastPosition&&a.myParent===I.lastParent,e=a.fontSize===I.lastFontSize;I.lastParent=a.myParent,I.lastPosition=a.position,I.lastFontSize=a.fontSize;var h=100,i={};if(e&&d)i.emToPx=I.lastEmToPx,i.percentToPxWidth=I.lastPercentToPxWidth,i.percentToPxHeight=I.lastPercentToPxHeight;else{var j=g(f).isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");t.init(j),a.myParent.appendChild(j),m.each(["overflow","overflowX","overflowY"],function(a,b){t.CSS.setPropertyValue(j,b,"hidden")}),t.CSS.setPropertyValue(j,"position",a.position),t.CSS.setPropertyValue(j,"fontSize",a.fontSize),t.CSS.setPropertyValue(j,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a,b){t.CSS.setPropertyValue(j,b,h+"%")}),t.CSS.setPropertyValue(j,"paddingLeft",h+"em"),i.percentToPxWidth=I.lastPercentToPxWidth=(parseFloat(v.getPropertyValue(j,"width",null,!0))||1)/h,i.percentToPxHeight=I.lastPercentToPxHeight=(parseFloat(v.getPropertyValue(j,"height",null,!0))||1)/h,i.emToPx=I.lastEmToPx=(parseFloat(v.getPropertyValue(j,"paddingLeft"))||1)/h,a.myParent.removeChild(j)}return null===I.remToPx&&(I.remToPx=parseFloat(v.getPropertyValue(c.body,"fontSize"))||16),null===I.vwToPx&&(I.vwToPx=parseFloat(b.innerWidth)/100,I.vhToPx=parseFloat(b.innerHeight)/100),i.remToPx=I.remToPx,i.vwToPx=I.vwToPx,i.vhToPx=I.vhToPx,t.debug>=1&&console.log("Unit ratios: "+JSON.stringify(i),f),i}if(h.begin&&0===y)try{h.begin.call(o,o)}catch(r){setTimeout(function(){throw r},1)}if("scroll"===C){var u,w,z,A=/^x$/i.test(h.axis)?"Left":"Top",D=parseFloat(h.offset)||0;h.container?p.isWrapped(h.container)||p.isNode(h.container)?(h.container=h.container[0]||h.container,u=h.container["scroll"+A],z=u+m(f).position()[A.toLowerCase()]+D):h.container=null:(u=t.State.scrollAnchor[t.State["scrollProperty"+A]],w=t.State.scrollAnchor[t.State["scrollProperty"+("Left"===A?"Top":"Left")]],z=m(f).offset()[A.toLowerCase()]+D),i={scroll:{rootPropertyValue:!1,startValue:u,currentValue:u,endValue:z,unitType:"",easing:h.easing,scrollData:{container:h.container,direction:A,alternateValue:w}},element:f},t.debug&&console.log("tweensContainer (scroll): ",i.scroll,f)}else if("reverse"===C){if(!g(f).tweensContainer)return void m.dequeue(f,h.queue);"none"===g(f).opts.display&&(g(f).opts.display="auto"),"hidden"===g(f).opts.visibility&&(g(f).opts.visibility="visible"),g(f).opts.loop=!1,g(f).opts.begin=null,g(f).opts.complete=null,s.easing||delete h.easing,s.duration||delete h.duration,h=m.extend({},g(f).opts,h);var E=m.extend(!0,{},g(f).tweensContainer);for(var F in E)if("element"!==F){var G=E[F].startValue;E[F].startValue=E[F].currentValue=E[F].endValue,E[F].endValue=G,p.isEmptyObject(s)||(E[F].easing=h.easing),t.debug&&console.log("reverse tweensContainer ("+F+"): "+JSON.stringify(E[F]),f)}i=E}else if("start"===C){var E;g(f).tweensContainer&&g(f).isAnimating===!0&&(E=g(f).tweensContainer),m.each(q,function(b,c){if(RegExp("^"+v.Lists.colors.join("$|^")+"$").test(b)){var e=a(c,!0),f=e[0],g=e[1],h=e[2];if(v.RegEx.isHex.test(f)){for(var i=["Red","Green","Blue"],j=v.Values.hexToRgb(f),k=h?v.Values.hexToRgb(h):d,l=0;l<i.length;l++){var m=[j[l]];g&&m.push(g),k!==d&&m.push(k[l]),q[b+i[l]]=m}delete q[b]}}});for(var H in q){var K=a(q[H]),L=K[0],M=K[1],N=K[2];H=v.Names.camelCase(H);var O=v.Hooks.getRoot(H),P=!1;if(g(f).isSVG||"tween"===O||v.Names.prefixCheck(O)[1]!==!1||v.Normalizations.registered[O]!==d){(h.display!==d&&null!==h.display&&"none"!==h.display||h.visibility!==d&&"hidden"!==h.visibility)&&/opacity|filter/.test(H)&&!N&&0!==L&&(N=0),h._cacheValues&&E&&E[H]?(N===d&&(N=E[H].endValue+E[H].unitType),P=g(f).rootPropertyValueCache[O]):v.Hooks.registered[H]?N===d?(P=v.getPropertyValue(f,O),N=v.getPropertyValue(f,H,P)):P=v.Hooks.templates[O][1]:N===d&&(N=v.getPropertyValue(f,H));var Q,R,S,T=!1;if(Q=l(H,N),N=Q[0],S=Q[1],Q=l(H,L),L=Q[0].replace(/^([+-\/*])=/,function(a,b){return T=b,""}),R=Q[1],N=parseFloat(N)||0,L=parseFloat(L)||0,"%"===R&&(/^(fontSize|lineHeight)$/.test(H)?(L/=100,R="em"):/^scale/.test(H)?(L/=100,R=""):/(Red|Green|Blue)$/i.test(H)&&(L=L/100*255,R="")),/[\/*]/.test(T))R=S;else if(S!==R&&0!==N)if(0===L)R=S;else{e=e||n();var U=/margin|padding|left|right|width|text|word|letter/i.test(H)||/X$/.test(H)||"x"===H?"x":"y";switch(S){case"%":N*="x"===U?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:N*=e[S+"ToPx"]}switch(R){case"%":N*=1/("x"===U?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:N*=1/e[R+"ToPx"]}}switch(T){case"+":L=N+L;break;case"-":L=N-L;break;case"*":L=N*L;break;case"/":L=N/L}i[H]={rootPropertyValue:P,startValue:N,currentValue:N,endValue:L,unitType:R,easing:M},t.debug&&console.log("tweensContainer ("+H+"): "+JSON.stringify(i[H]),f)}else t.debug&&console.log("Skipping ["+O+"] due to a lack of browser support.")}i.element=f}i.element&&(v.Values.addClass(f,"velocity-animating"),J.push(i),""===h.queue&&(g(f).tweensContainer=i,g(f).opts=h),g(f).isAnimating=!0,y===x-1?(t.State.calls.push([J,o,h,null,B.resolver]),t.State.isTicking===!1&&(t.State.isTicking=!0,k())):y++)}var e,f=this,h=m.extend({},t.defaults,s),i={};switch(g(f)===d&&t.init(f),parseFloat(h.delay)&&h.queue!==!1&&m.queue(f,h.queue,function(a){t.velocityQueueEntryFlag=!0,g(f).delayTimer={setTimeout:setTimeout(a,parseFloat(h.delay)),next:a}}),h.duration.toString().toLowerCase()){case"fast":h.duration=200;break;case"normal":h.duration=r;break;case"slow":h.duration=600;break;default:h.duration=parseFloat(h.duration)||1}t.mock!==!1&&(t.mock===!0?h.duration=h.delay=1:(h.duration*=parseFloat(t.mock)||1,h.delay*=parseFloat(t.mock)||1)),h.easing=j(h.easing,h.duration),h.begin&&!p.isFunction(h.begin)&&(h.begin=null),h.progress&&!p.isFunction(h.progress)&&(h.progress=null),h.complete&&!p.isFunction(h.complete)&&(h.complete=null),h.display!==d&&null!==h.display&&(h.display=h.display.toString().toLowerCase(),"auto"===h.display&&(h.display=t.CSS.Values.getDisplayType(f))),h.visibility!==d&&null!==h.visibility&&(h.visibility=h.visibility.toString().toLowerCase()),h.mobileHA=h.mobileHA&&t.State.isMobile&&!t.State.isGingerbread,h.queue===!1?h.delay?setTimeout(a,h.delay):a():m.queue(f,h.queue,function(b,c){return c===!0?(B.promise&&B.resolver(o),!0):(t.velocityQueueEntryFlag=!0,void a(b))}),""!==h.queue&&"fx"!==h.queue||"inprogress"===m.queue(f)[0]||m.dequeue(f)}var h,i,n,o,q,s,u=arguments[0]&&(arguments[0].p||m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(h=!1,n=0,o=this,i=this):(h=!0,n=1,o=u?arguments[0].elements||arguments[0].e:arguments[0]),o=f(o)){u?(q=arguments[0].properties||arguments[0].p,s=arguments[0].options||arguments[0].o):(q=arguments[n],s=arguments[n+1]);var x=o.length,y=0;if(!/^(stop|finish|finishAll)$/i.test(q)&&!m.isPlainObject(s)){var z=n+1;s={};for(var A=z;A<arguments.length;A++)p.isArray(arguments[A])||!/^(fast|normal|slow)$/i.test(arguments[A])&&!/^\d/.test(arguments[A])?p.isString(arguments[A])||p.isArray(arguments[A])?s.easing=arguments[A]:p.isFunction(arguments[A])&&(s.complete=arguments[A]):s.duration=arguments[A]}var B={promise:null,resolver:null,rejecter:null};h&&t.Promise&&(B.promise=new t.Promise(function(a,b){B.resolver=a,B.rejecter=b}));var C;switch(q){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"finish":case"finishAll":case"stop":m.each(o,function(a,b){g(b)&&g(b).delayTimer&&(clearTimeout(g(b).delayTimer.setTimeout),g(b).delayTimer.next&&g(b).delayTimer.next(),delete g(b).delayTimer),"finishAll"!==q||s!==!0&&!p.isString(s)||(m.each(m.queue(b,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b()}),m.queue(b,p.isString(s)?s:"",[]))});var D=[];return m.each(t.State.calls,function(a,b){b&&m.each(b[1],function(c,e){var f=s===d?"":s;return f===!0||b[2].queue===f||s===d&&b[2].queue===!1?void m.each(o,function(c,d){d===e&&((s===!0||p.isString(s))&&(m.each(m.queue(d,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b(null,!0)
}),m.queue(d,p.isString(s)?s:"",[])),"stop"===q?(g(d)&&g(d).tweensContainer&&f!==!1&&m.each(g(d).tweensContainer,function(a,b){b.endValue=b.currentValue}),D.push(a)):("finish"===q||"finishAll"===q)&&(b[2].duration=1))}):!0})}),"stop"===q&&(m.each(D,function(a,b){l(b,!0)}),B.promise&&B.resolver(o)),a();default:if(!m.isPlainObject(q)||p.isEmptyObject(q)){if(p.isString(q)&&t.Redirects[q]){var E=m.extend({},s),F=E.duration,G=E.delay||0;return E.backwards===!0&&(o=m.extend(!0,[],o).reverse()),m.each(o,function(a,b){parseFloat(E.stagger)?E.delay=G+parseFloat(E.stagger)*a:p.isFunction(E.stagger)&&(E.delay=G+E.stagger.call(b,a,x)),E.drag&&(E.duration=parseFloat(F)||(/^(callout|transition)/.test(q)?1e3:r),E.duration=Math.max(E.duration*(E.backwards?1-a/x:(a+1)/x),.75*E.duration,200)),t.Redirects[q].call(b,b,E||{},a,x,o,B.promise?B:d)}),a()}var H="Velocity: First argument ("+q+") was not a property map, a known action, or a registered redirect. Aborting.";return B.promise?B.rejecter(new Error(H)):console.log(H),a()}C="start"}var I={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},J=[];m.each(o,function(a,b){p.isNode(b)&&e.call(b)});var K,E=m.extend({},t.defaults,s);if(E.loop=parseInt(E.loop),K=2*E.loop-1,E.loop)for(var L=0;K>L;L++){var M={delay:E.delay,progress:E.progress};L===K-1&&(M.display=E.display,M.visibility=E.visibility,M.complete=E.complete),w(o,"reverse",M)}return a()}};t=m.extend(w,t),t.animate=w;var x=b.requestAnimationFrame||o;return t.State.isMobile||c.hidden===d||c.addEventListener("visibilitychange",function(){c.hidden?(x=function(a){return setTimeout(function(){a(!0)},16)},k()):x=b.requestAnimationFrame||o}),a.Velocity=t,a!==b&&(a.fn.velocity=w,a.fn.velocity.defaults=t.defaults),m.each(["Down","Up"],function(a,b){t.Redirects["slide"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j=i.begin,k=i.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},n={};i.display===d&&(i.display="Down"===b?"inline"===t.CSS.Values.getDisplayType(a)?"inline-block":"block":"none"),i.begin=function(){j&&j.call(g,g);for(var c in l){n[c]=a.style[c];var d=t.CSS.getPropertyValue(a,c);l[c]="Down"===b?[d,0]:[0,d]}n.overflow=a.style.overflow,a.style.overflow="hidden"},i.complete=function(){for(var b in n)a.style[b]=n[b];k&&k.call(g,g),h&&h.resolver(g)},t(a,l,i)}}),m.each(["In","Out"],function(a,b){t.Redirects["fade"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j={opacity:"In"===b?1:0},k=i.complete;i.complete=e!==f-1?i.begin=null:function(){k&&k.call(g,g),h&&h.resolver(g)},i.display===d&&(i.display="In"===b?"auto":"none"),t(this,j,i)}}),t}(window.jQuery||window.Zepto||window,window,document)});
/**
 * Created by SDSA on 3/17/2016.
 * Put img holder sibling to your colorSwitch element.
 */

(function($) {
  'use strict';

  var _that;
  function ColorSwitch(options) {
    this.options = options;
    _that = this;
  }

  ColorSwitch.prototype.init = function(el) {
    var imgNav = $(el).siblings(_that.options.imgNav);

    // init state
    setState(imgNav);
    // bind event
    $(el).children().each(function() {
      $(this).click(function() {
        doSwitch($(this).index(), imgNav);
      });
    });

  };

  function setState(img) {
    if (img) {
      img.addClass('colorSwitch-img-holder');
      img.children().each(function() {
        $(this).addClass('colorSwitch-img');
        if ($(this).index() == 0) {
          $(this).addClass('active');
        } else {
          $(this).removeClass('active');
        }
      });
    }
  }

  function doSwitch(id, img) {
    if (img) {
      img.children().each(function() {
        if ($(this).index() == id) {
          $(this).addClass('active');
        } else {
          $(this).removeClass('active');
        }
      });
    }
  }

  $.fn.colorSwitch = function(options) {
    var defaults = {
      imgNav: ''
    };
    var setting = $.extend({}, defaults, options);
    if (!(setting.imgNav || setting.textNav)) {
      console.warn('Here are no imgNav');
    }
    var colorSwitch = new ColorSwitch(setting);
    colorSwitch.init(this);
  };

})(jQuery);
/**
 * Created by SDSA on 3/17/2016.
 * Set duration
 */

(function($) {
  'use strict';

  var interval;
  var timmer = 0;
  function ImgCylinder(options) {
    this.options = options;
    this.imgSrc = [];
  }

  $.extend(ImgCylinder.prototype, {
    setState: function(img) {
      var that = this;
      if (img) {
        img.addClass('imgCylinder-img-holder');
        img.empty();
        if (img.children().length === 0) {
          this.imgSrc = JSON.parse(img.attr('data-img-src'));
        } else {
          img.children().each(function() {
            that.imgSrc.push($(this).attr('src') || $(this).attr('srcset'));
          });
        }
      }
      if (that.imgSrc[0]) {
        img.html('<img class="imgCylinder-img" src="' + this.imgSrc[0] + '" />');
      }
    },
    doSwap: function(img, duration) {
      var that = this;
      if (img) {
        var len = this.imgSrc.length;
        interval = setInterval(function() {
          timmer++;
          img.children().attr('src', that.imgSrc[timmer]);
          if (timmer == len - 1) {
            timmer = -1;
          }
        }, duration);
      }
    },
    init: function(el) {
      var that = this;
      var _this = $(el);
      var duration = this.options.duration;

      $(el).unbind('mouseenter mouseleave');
      this.setState(_this);

      _this.mouseenter(function() {
        that.doSwap(_this, duration);
      });

      _this.mouseleave(function() {
        clearInterval(interval);
        if (that.imgSrc[0]) {
          _this.children().attr('src', that.imgSrc[0]);
        }
        timmer = 0;
      });
    }
  });

  $.fn.imgCylinder = function(options) {
    var defaults = {
      duration: 500
    };
    var setting = $.extend({}, defaults, options);
    var imgCylinder = new ImgCylinder(setting);
    imgCylinder.init(this);

    console.log('imgCylinder init');
  };

})(jQuery);

/**
 * equalize.js
 * Author & copyright (c) 2012: Tim Svensen
 * Dual MIT & GPL license
 *
 * Page: http://tsvensen.github.com/equalize.js
 * Repo: https://github.com/tsvensen/equalize.js/
 *
 * The jQuery plugin for equalizing the height or width of elements.
 *
 * Equalize will accept any of the jQuery Dimension methods:
 *   height, outerHeight, innerHeight,
 *   width, outerWidth, innerWidth.
 *
 * EXAMPLE
 * $('.parent').equalize(); // defaults to 'height'
 * $('.parent').equalize('width'); // equalize the widths
 *
 * ADVANCED EXAMPLES
 * Get the minimum max dimension by removing the existing height/width
 * $('.parent').equalize({reset: true}); // equalize height by default, remove existing height, then determin max
 * $('.parent').equalize({equalize: 'width', reset: true}); // equalize width, remove existing width, then determin max
 *
 * Equalize internal child elements
 * From @larsbo : http://jsfiddle.net/4QTNP/3/
 * $('.parent').equalize({children: 'p'}); // equalize height of paragraphs within .parent
 */
;(function($) {
    'use strict';
    $.fn.equalize = function(options) {
      var $containers = this, // this is the jQuery object
          children    = false,
          reset       = false,
          equalize,
          type;
  
      // when options are an object
      if ($.isPlainObject(options)) {
        equalize = options.equalize || 'height';
        children = options.children || false;
        reset    = options.reset || false;
      } else { // otherwise, a string was passed in or default to height
        equalize = options || 'height';
      }
  
      if (!$.isFunction($.fn[equalize])) { return false; }
  
      // determine if the height or width is being equalized
      type = (equalize.indexOf('eight') > 0) ? 'height' : 'width';
  
      return $containers.each(function() {
        // when children exist, equalize the passed in child elements, otherwise equalize the children
        var $children = (children) ? $(this).find(children) : $(this).children(),
            max = 0; // reset for each container
  
        $children.each(function() {
          var $element = $(this),
              value;
          if (reset) { $element.css(type, ''); } // remove existing height/width dimension
          value = $element[equalize]();          // call height(), outerHeight(), etc.
          if (value > max) { max = value; }      // update max
        });
        $children.css(type, max + 'px'); // add CSS to children
        $children.addClass('equalized');
      });
    };
  
  }(jQuery));
  
// promise polyfill
(function(t){function z(){for(var a=0;a<g.length;a++)g[a][0](g[a][1]);g=[];m=!1}function n(a,b){g.push([a,b]);m||(m=!0,A(z,0))}function B(a,b){function c(a){p(b,a)}function h(a){k(b,a)}try{a(c,h)}catch(d){h(d)}}function u(a){var b=a.owner,c=b.state_,b=b.data_,h=a[c];a=a.then;if("function"===typeof h){c=l;try{b=h(b)}catch(d){k(a,d)}}v(a,b)||(c===l&&p(a,b),c===q&&k(a,b))}function v(a,b){var c;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(b&&("function"===
typeof b||"object"===typeof b)){var h=b.then;if("function"===typeof h)return h.call(b,function(d){c||(c=!0,b!==d?p(a,d):w(a,d))},function(b){c||(c=!0,k(a,b))}),!0}}catch(d){return c||k(a,d),!0}return!1}function p(a,b){a!==b&&v(a,b)||w(a,b)}function w(a,b){a.state_===r&&(a.state_=x,a.data_=b,n(C,a))}function k(a,b){a.state_===r&&(a.state_=x,a.data_=b,n(D,a))}function y(a){var b=a.then_;a.then_=void 0;for(a=0;a<b.length;a++)u(b[a])}function C(a){a.state_=l;y(a)}function D(a){a.state_=q;y(a)}function e(a){if("function"!==
typeof a)throw new TypeError("Promise constructor takes a function argument");if(!1===this instanceof e)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[];B(a,this)}var f=t.Promise,s=f&&"resolve"in f&&"reject"in f&&"all"in f&&"race"in f&&function(){var a;new f(function(b){a=b});return"function"===typeof a}();"undefined"!==typeof exports&&exports?(exports.Promise=s?f:e,exports.Polyfill=e):"function"==
typeof define&&define.amd?define(function(){return s?f:e}):s||(t.Promise=e);var r="pending",x="sealed",l="fulfilled",q="rejected",E=function(){},A="undefined"!==typeof setImmediate?setImmediate:setTimeout,g=[],m;e.prototype={constructor:e,state_:r,then_:null,data_:void 0,then:function(a,b){var c={owner:this,then:new this.constructor(E),fulfilled:a,rejected:b};this.state_===l||this.state_===q?n(u,c):this.then_.push(c);return c.then},"catch":function(a){return this.then(null,a)}};e.all=function(a){if("[object Array]"!==
Object.prototype.toString.call(a))throw new TypeError("You must pass an array to Promise.all().");return new this(function(b,c){function h(a){e++;return function(c){d[a]=c;--e||b(d)}}for(var d=[],e=0,f=0,g;f<a.length;f++)(g=a[f])&&"function"===typeof g.then?g.then(h(f),c):d[f]=g;e||b(d)})};e.race=function(a){if("[object Array]"!==Object.prototype.toString.call(a))throw new TypeError("You must pass an array to Promise.race().");return new this(function(b,c){for(var e=0,d;e<a.length;e++)(d=a[e])&&"function"===
typeof d.then?d.then(b,c):b(d)})};e.resolve=function(a){return a&&"object"===typeof a&&a.constructor===this?a:new this(function(b){b(a)})};e.reject=function(a){return new this(function(b,c){c(a)})}})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);

// method
function EmailSignUp(el, className, captchaSiteKey = null) {
    var self = this;
    self.el = el;
    self.$el = $(el);
    self.selector = className;
    self.category_data = self.$el.find('input#category')[0].attributes.value&&self.$el.find('input#category')[0].attributes.value.value;
    self.campaign_id = self.$el.find('input#campaignID')[0].attributes.value&&self.$el.find('input#campaignID')[0].attributes.value.value;
    self.isEN = window.location.href.indexOf('/us-es/') == -1 && window.location.href.indexOf('/es/') == -1;
    self.submitted = false;
    self.requestURL = '';
    self.email = '';
    self.submitting = false;
    if(window.EcommAndroidClient && window.EcommAndroidClient.getFirebaseId) {
      window.firebaseId = window.EcommAndroidClient.getFirebaseId();
    }
    self.initEvents = function() {
      self.$el.find(self.selector + '-dialog-modal-close').click(function() {
        self.$el.hide();
        $('.signUp-dialog-otp').remove();
        if (window.utag && utag.link) {
          if (!self.submitted) {
            utag.link({
              link_cat: 'sign-up-overlay-form-close', 
              link_id: 'sign_up_overlay_close', 
              link_meta:'link_name: close', 
              link_position: $(this).attr('data-headline') + '>sign up overlay'
            }); 
          }
        }
        self.submitted = false;
      });

      self.$el.find(self.selector + '-category-input-field').blur(function() {
        validateInput(this);
      });

      // self.$el.find(self.selector + '-category-input-field[validatetype="zipCode"]').on('keypress', function(e) {
      //   e.preventDefault();
      //   var keyCode = e.which || e.charCode || e.keyCode || 0;
      //   if (keyCode >= 48 && keyCode <=57 && this.value.length < 5) {
      //     this.value += (keyCode - 48);
      //   }
      // });

      self.$el.find(self.selector + '-category-input-field[validatetype="zipCode"]').attr('maxlength', 5);

      self.$el.find(self.selector + '-category-input-checkbox').change(function() {
        validateCheckbox($(this));
      });

      self.$el.find('form' + self.selector + '-signUp').submit(function(e) {
        e.preventDefault();
        var _this = this;
        var ready = Promise.resolve(null);
        var noError = true;
        var recaptchaToken = null;
        _.each(self.$el.find(self.selector + '-category-input-field'), function(el) {
          ready = ready.then(function() {
            return validateInput(el);
          }).then(function (val) {
            noError = noError && val;
          })
        });

        // checkbox
        ready.then(function() {
          return validateCheckbox(self.$el.find(self.selector + '-category-input-checkbox'));
        }).then(async function(val) {
          if (captchaSiteKey) {
              try {
                  const ready = await grecaptcha.enterprise.ready()
              } catch (error) {
                  console.log("error", error)
              }
          }
          return val
      }).then(async function(res){
          if (captchaSiteKey) {
              try {
                  const token = await grecaptcha.enterprise.execute(captchaSiteKey, {
                      action: 'submit'
                  })
                  recaptchaToken = token
              } catch (error) {
                  console.log("error", error)
              }
          }
          return res
      }).then(function (val) {
          noError = noError && val;
        }).then(function () {
          if (noError && !self.submitting) {
            var form = $(_this).serializeArray();
            _.each(form, function(item) {
              if (item.name === 'zipcode') {
                item.name = 'cothers11';
              }

              item.value = $.trim(item.value);
            });
            if (!self.isEN) {
              _.each(form, function(i){
                if (i.name === 'nombre') {
                  i.name = 'firstname'
                }
                if (i.name === 'apellido') {
                  i.name = 'lastname'
                }
                if (i.name === 'correoelectrnico') {
                  i.name = 'email'
                }
                if (i.name === 'cdigopostal') {
                  i.name = 'cothers11'
                }
              });
            }
            var url = ''; 
            url = url + 'campaignid=' + self.campaign_id;

            var data = '&' + $.param(form) + (recaptchaToken ? `&token=${recaptchaToken}` : "");
            var optindata = $('.feature-benefit-dialog-disclaimer').text().replaceAll('\n', '').replaceAll('\t', '').replaceAll('&', 'and') ?? null;
            
            if (data.indexOf('&%3Acq_csrf_token') > -1) {
              url = url + data.substring(0, data.indexOf('&%3Acq_csrf_token')); //substring csrf token from query
            } else {
              url = url + data;
            }

            // url = url + '&cb_optin1=Y';
            // url = url + '&cb_optin2=0';
            // url = url + '&cb_optin3=0';
            url = url + '&cothers2=Y';

            if (optindata.toLowerCase().indexOf('sweepstakes') > -1 || window.location.href.indexOf('/shop/sweepstakes/') > -1) {
              url = url + '&cothers12=Y';
            }

            if (optindata) {
              url = url + '&optinlanguage=' + optindata;
            }

            if(_.find(form, {"name": "phone"}) && _.find(form, {"name": "phone"}).value) {
              url = url + '&cothers5=Y';
            }
            if(window.firebaseId) {
              url = url + '&cothers20=' + window.firebaseId;
            }
            url += '&cothers18=' + (window.visitor ? window.visitor.getMarketingCloudVisitorID() : Cookies('AMP_VID')? Cookies('AMP_VID'): '');
            
            var retailer = self.category_data;
            url = url + '&retailer=' + retailer.replace(/\&/, 'AND');

            url = url + '&cothers=' + self.getSource();

            // store url for otp
            self.requestURL = url;
            self.email = (_.find(form, {"name": "email"}) || {}).value;

            self.submitting = true;
            const allowedNames = {
              TOKEN: 'token',
              REMOTEIP: 'remoteip',
              FIRSTNAME: 'firstName',
              LASTNAME: 'lastName',
              CAMPAIGNID: 'campaignid',
              CREATEDATE: 'createdate',
              OPTINLANGUAGE: 'optinlanguage',
              IS_UPDATE: 'is_update',
              EMAIL: 'email',
              COTHERS: 'cothers',
              COTHERS2: 'cothers2',
              COTHERS3: 'cothers3',
              COTHERS4: 'cothers4',
              COTHERS5: 'cothers5',
              COTHERS6: 'cothers6',
              COTHERS7: 'cothers7',
              COTHERS8: 'cothers8',
              COTHERS9: 'cothers9',
              COTHERS10: 'cothers10',
              COTHERS11: 'cothers11',
              COTHERS12: 'cothers12',
              COTHERS13: 'cothers13',
              COTHERS14: 'cothers14',
              COTHERS15: 'cothers15',
              COTHERS16: 'cothers16',
              COTHERS17: 'cothers17',
              COTHERS18: 'cothers18',
              COTHERS19: 'cothers19',
              COTHERS20: 'cothers20'
            }
            
            url = url.split('&').reduce((accum, cur)=>{
              const [key, val] = cur.split("=")
              const upperKey = key.toUpperCase()
              if(allowedNames[upperKey]){
                accum.push(`${allowedNames[upperKey]}=${val}`)
              }
            
              return accum
            }, []).join('&')
            $.ajax({
              type: 'POST',
              url: window.location.href.indexOf('stgcl') > -1 ? 'https://us3.ecom-qa.samsung.com/v1/campaigns/reserve' : 'https://www.samsung.com/us/api/v1/campaigns/reserve ',
              contentType: 'application/x-www-form-urlencoded',
              data: url,
              success: function(data) {
                if (data === 'enter-otp') self.insertOTPDialog();
                else self.goToSuccessView();
                self.$el.find(self.selector + '-dialog-container ' + self.selector + '-dialog-modal').addClass(self.selector + '-dialog-narrow-view');
                const errEl = self.$el.find(".error-message")
                if(errEl){
                    errEl.html("")
                }
              },
              complete: function() {
                self.submitting = false;
              },
              error : function(err){
                const errEl = self.$el.find(".error-message")
                if(errEl){
                    const errObj = JSON.parse(err.responseText)
                    errEl.html(errObj?.message || "Something went wrong")
                }
            }
            });
          }
        })
      });

      self.$el.find('a' + self.selector + '-category-signup-link').click(function(e) {
        e.preventDefault();
        var cookie = 'holiday_cat=' + self.campaign_id + '; domain=.samsung.com; path=/;';
        document.cookie = cookie;
        window.location = 'http://www.samsung.com/us/support/account/';
      });
    }

    self.initEvents();

    self.getSource = function() {
      return window.EcommFlutterClient ? 'APP' : (window.innerWidth < 769 ? 'MOBWEB' : 'WEB');
    }

    self.insertOTPDialog = function() {
      var signinForm = self.$el.find(self.selector + '-dialog-form');
      signinForm.hide();
      if ($('.signUp-dialog-otp').length > 0) {
        $('.signUp-dialog-otp').show();
        $('#otp-emailID').text(self.email);
        return;
      }
      var dialog =  '<div class="signUp-dialog-otp">' +
                    '<h3>Weve sent an email to <span id="otp-emailID">' + self.email +  
                    '</span> to verify your email address. Please check that email and enter the code in the box below.</h3>' +
                    '<form class="otp-form" novalidate="">' +
                    '<input class="otp-input" type="text" name="otp">' +
                    '<p class="otp-error">The code entered is incorrect. Try entering the code again, or <a class="otp-resend">click here</a> to request a new one.</p>' + 
                    '<p class="otp-alert">A new code has been sent. Please check your inbox.</p>' + 
                    '<button class="otp-button cta-button" type="submit" disabled="true">verify</button></form>' +
                    '<p class="otp-label">I didnt receive an email.</p>' +
                    '<p class="otp-message">Is the email address you entered correct? If not, <a class="otp-reset">click here</a> to add a new email address.</p>' +
                    '<p class="otp-message">If the email address is correct, check the Spam folder. You can request another verification email by <a class="otp-resend">clicking here</a>.</p>' +
                    '</div>';
      $(dialog).insertBefore(self.$el.find(self.selector + '-dialog-success'));
      var otp = $('.signUp-dialog-otp');
      var error = otp.find('.otp-error');
      var alert = otp.find('.otp-alert');
      var submit = otp.find('.otp-button');
      var otpBox = otp.find('.otp-input');
      $(document).on('click', '.otp-resend', function(e) {
        e.stopPropagation();
        $.ajax({
          type: 'POST',
          url: window.location.href.indexOf('devus') > -1 ? 'http://105.1.11.162:10401/us/DailySweepsEntries.do' : 'https://pages.samsung.com/us/DailySweepsEntries.do',
          contentType: 'application/x-www-form-urlencoded',
          data: self.requestURL + '&otp=resend',
          success: function(data) {
            otpBox.val("");
            error.hide();
            alert.show();
            submit.attr('disabled', true);
          }
        });
      })
      $(document).on('click', '.otp-reset', function() {
        otpBox.val("");
        error.hide();
        alert.show();
        submit.attr('disabled', true);
        otp.hide();
        signinForm.show();
      })
      otpBox.keyup(function() {
        if ($(this).val().length > 0) submit.attr('disabled', false);
        else submit.attr('disabled', true);
      });
      otp.submit(function(e) {
        e.preventDefault();
        var otp_num = otpBox.val();
        if (!self.submitting) {

        self.submitting = true;
        $.ajax({
          type: 'POST',
          url: window.location.href.indexOf('devus') > -1 ? 'http://105.1.11.162:10401/us/DailySweepsEntries.do' : 'https://pages.samsung.com/us/DailySweepsEntries.do',
          contentType: 'application/x-www-form-urlencoded',
          data: self.requestURL + '&otp=' + otp_num,
          success: function(data) {
            if (data === 'true' || data && data.success || data && data.error === 'duplicate') {
              error.hide();
              alert.hide();
              self.goToSuccessView(true); 
            } else {
              if (data === 'expired') error.html('Your code has expired. <a class="otp-resend">Click here</a> to request a new one.');
              else error.html('The code entered is incorrect. Try entering the code again, or <a class="otp-resend">click here</a> to request a new one.')
              error.show();
              alert.hide();
            }
          },
          complete: function() {
            self.submitting = false;
          }
        });

        }
      })
    }
    self.triggerLoginSubmit = function(ss_fn, ss_ln, ss_email, ss_zip, encr) {
      if (ss_fn && ss_ln && ss_email && !self.submitting) {
          var encrStr = encr? '&encr=Y': ''; 
          var ss_zip = ss_zip? ss_zip: '';
          var url = '';
          url = url + 'campaignid=' + self.campaign_id;
          url = url + '&firstname=' + ss_fn + '&lastname=' + ss_ln + '&zipcode=' + ss_zip + '&email=' + ss_email + encrStr;

          url = url + '&cb_optin1=Y';
          url = url + '&cb_optin2=0';
          url = url + '&cb_optin3=0';
          url = url + '&cothers2=Y';
          
          if(window.firebaseId) {
            url = url + '&cothers20=' + window.firebaseId;
          }
          if (window.appUUID) {
            url += '&cothers8=' + window.appUUID;
          }
          url += '&cothers18=' + (window.visitor ? window.visitor.getMarketingCloudVisitorID() : Cookies('AMP_VID')? Cookies('AMP_VID'): '');
          
          var retailer = self.category_data;
          url = url + '&retailer=' + retailer.replace(/\&/, 'AND');

          url = url + '&source=' + self.getSource();
          
          // store url for otp
          self.requestURL = url;
          self.email = '';
          self.submitting = true;
          $.ajax({
            type: 'POST',
            url: window.location.href.indexOf('devus') > -1 ? 'http://105.1.11.162:10401/us/DailySweepsEntries.do' : 'https://pages.samsung.com/us/DailySweepsEntries.do',
            contentType: 'application/x-www-form-urlencoded',
            data: url,
            success: function(data) {
              self.$el.show();
              if (data === 'enter-otp') self.insertOTPDialog();
              else self.goToSuccessView();
              self.$el.find(self.selector + '-dialog-container ' + self.selector + '-dialog-modal').addClass(self.selector + '-dialog-narrow-view');
            },
            complete: function() {
              self.submitting = false;
            }
          });
        }
    }
    self.triggerDialog = function() {
      self.submitted = false;

      self.$el.find(self.selector + '-category-input-field[name="phone"]').mask("9999999999");

      var isLoggedIn = readCookie('xsdcxyn');
      if (isLoggedIn) {
        self.$el.find(self.selector + '-dialog-form').show();
        self.$el.find(self.selector + '-dialog-success').hide();
        self.$el.find(self.selector + '-dialog-container ' + self.selector + '-dialog-modal').removeClass(self.selector + '-dialog-narrow-view');
        self.$el.show();
        initForm();
        var ss_fn = readCookie('firstName');
        var ss_ln = readCookie('lastName');
        var ss_zip = readCookie('prof_zip');
        
        self.$el.find(self.selector + '-category-input-field').each(function() {
            var _self = $(this);
            var name = _self.attr('name');
            var value;

            switch (name) {
                case 'firstname': 
                if (!value) value = ss_fn;
                case 'lastname': 
                if (!value) value = ss_ln;
                case 'zipcode':
                if (!value) value = ss_zip;

                if (value) _self.val(value);
                break;
                default: break;
            }
        });
      } else if (typeof window.EcommAndroidClient !== 'undefined') {
        if(window.EcommAndroidClient.isSignedIn()) {
          window.setUserDetails = function(dataJSON) {
            var data = JSON.parse(dataJSON);
            var ss_fn = data.givenName.split(' ')[0];
            var ss_email = data.email;
            var ss_ln = data.givenName.split(' ')[1];
            window.appUUID = data.uuid;
            self.triggerLoginSubmit(ss_fn, ss_ln, ss_email);
          }
          window.EcommAndroidClient.getUserDetails('setUserDetails');
        } else {
          self.$el.find(self.selector + '-dialog-form').show();
          self.$el.find(self.selector + '-dialog-success').hide();
          self.$el.find(self.selector + '-dialog-container ' + self.selector + '-dialog-modal').removeClass(self.selector + '-dialog-narrow-view');
          self.$el.show();
          initForm();

        } 
          
      } else {
        self.$el.find(self.selector + '-dialog-form').show();
        self.$el.find(self.selector + '-dialog-success').hide();
        self.$el.find(self.selector + '-dialog-container ' + self.selector + '-dialog-modal').removeClass(self.selector + '-dialog-narrow-view');
        self.$el.show();
        initForm();
        
      }
    }

    self.goToSuccessView = function(isOTP) {
      if (isOTP) $('.feature-benefit-dialog-success h3').text('Thank you for verifying your email address');
      $('.signUp-dialog-otp').remove();
      self.$el.find(self.selector + '-dialog-form').hide();
      self.$el.find(self.selector + '-dialog-success').show();
      self.submitted = true;
      $(document).trigger('SIGNUP_FORM_SUCCESS');
      if (window.utag && utag.link) {
        utag.link({
          link_cat: 'thank_you_overlay_form', 
          link_id: 'thank_you_overlay_form_close' , 
          link_meta:'link_name: close', 
          link_position: self.$el.find(self.selector + '-dialog-modal-close').attr('data-headline') + '>sign up>thank you overlay'
        });
      }
    };

    function initForm() {
      self.$el.find(self.selector + '-dialog-errormessage').remove();
      self.$el.find('.disclaimer-error').remove();
      self.$el.find(self.selector + '-category-input-checkbox').prop('checked', false);
      _.each(self.$el.find(self.selector + '-category-input-field'), function(el) {
        $(el).val('');
        if (el.attributes.isoptional.value == 'true') {
          el.removeAttribute('required');
          if (el.attributes.placeholder.value.indexOf('(Optional)') == -1) {
            el.attributes.placeholder.value += ' (Optional)';
          }
        }
      });
    }

    function validateCheckbox(el) {
      el.parent().next().remove();
      if (!el.is(':checked')) {
        if (self.isEN) {
          el.parent().after('<span class="disclaimer-error" style="color: red; margin-left: 10px;">Please accept the agreement to submit.</span>');
        } else {
          el.parent().after('<span class="disclaimer-error" style="color: red; margin-left: 10px;">Por favor, acepta el acuerdo para poder registrarte.</span>');
        }
        return Promise.resolve(false);
      } else {
        return Promise.resolve(true);
      }
    }

    function validateInput(el) {
      $(el).next().remove();
      var name = $(el).attr('placeholder');
      var type = $(el).attr('validatetype');
      var data = $(el).val();
      var required = $(el).attr('required');

      if (!data) {
        if (required) {
          if (self.isEN) {
            $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">' + name[0].toUpperCase() + name.toLowerCase().slice(1) + ' is required </span>');   
          } else {
            $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">' + name[0].toUpperCase() + name.toLowerCase().slice(1) + ' requerido</span>');
          }
          return Promise.resolve(false);
        } else {
          return Promise.resolve(true);
        }
      } else {
        if (type == 'text') {
          var regexp = /^[a-zA-Z]{1,20}(-[a-zA-Z]{1,20})?$/;
          if (!regexp.test(data.trim())) {
            if (self.isEN) {
              $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">Please enter proper ' + name + ' </span>');
            } else {
              $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">Se requiere ingresar su ' + name + ' correcto </span>');
            }
            return Promise.resolve(false);
          } else {
            return Promise.resolve(true);
          }
        }
        if (type == 'email') {
          var regexp = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;
          if (!regexp.test(data.trim())) {
            if (self.isEN) {
              $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">Invalid email address </span>');
            } else {
              $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">Correo electrnico invlido </span>');
            }
            return Promise.resolve(false);
          } else {
            return Promise.resolve(true);
          }
        } 
        if(type == 'phone') {
          var regexp = /^\d{10}$/;
          if (!regexp.test(data.trim())) {
            if (self.isEN) {
              $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">Invalid phone number </span>');
            } else {
              $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">Numero invlido </span>');
            }
            return Promise.resolve(false);
          } else {
            return Promise.resolve(true);
          }
        }
        if (type == 'zipCode') {
          return new Promise(function (resolve) {
            $.ajax({
              type: "GET",
              url: 'https://secure.shippingapis.com/ShippingAPI.dll?API=CityStateLookup&XML=<CityStateLookupRequest USERID="140SAMSU1242"><ZipCode ID= "0"><Zip5>' + data.trim() + '</Zip5></ZipCode></CityStateLookupRequest>',  
              success: function(res) {                
                if ($(res).find('Zip5').length > 0 && $(res).find('Error').length === 0) {
                  resolve(true);
                } else {
                  if (self.isEN) {
                    $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">Please enter 5-digit valid Zipcode </span>');   
                  } else {
                    $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">Se requiere ingresar un cdigo postal vlido de 5 dgitos </span>');
                  }
                  resolve(false);
                }
              }           
            }).fail(function() {
              var regexp = /^\d{5}(?:[-\s]\d{4})?$/;
              if (!regexp.test(data.trim())) {
                if (self.isEN) {
                  $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">Please enter 5-digit valid Zipcode </span>');   
                } else {
                  $(el).after('<span class="' + self.selector.substring(1) + '-dialog-errormessage">Se requiere ingresar un cdigo postal vlido de 5 dgitos </span>');
                }
                resolve(false);
              } else {
                resolve(true);
              }
            }); 
          });
        }
      }
    }

    function readCookie(name) {
      var nameEQ = name + '=';
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
      }
      return false;
    }
  }

        function BlurPreview(element) {
          var isIE = window.navigator.userAgent.indexOf('MSIE') > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./);
            var _this = element;
        var small = _this.querySelector('img');
        if (small.classList.contains('img-blur')) {
          if (isIE) {
            var pictureTag = document.createElement('picture');
            var sourceTag = document.createElement('source');
            var imgTag = document.createElement('img');
            sourceTag.setAttribute('srcset', _this.dataset.large);
            imgTag.setAttribute('src', _this.dataset.small);
            imgTag.setAttribute('style', 'width:100%');
            pictureTag.appendChild(sourceTag);
            pictureTag.appendChild(imgTag);
            _this.parentNode.replaceChild(pictureTag, _this);  
          } else {
              var img = new Image();
              if (window.innerWidth < 768) {
                img.src = _this.querySelector('img').getAttribute('src');
              } else {
                img.src = _this.querySelector('source').getAttribute('srcset');
              }
              
              img.onload = function () {
                
                    var large = new Image();
                    if (window.innerWidth < 768) {
                        large.src = _this.dataset.small; 
                      } else {
                        large.src = _this.dataset.large; 
                      }
                      large.onload = function () {
                        
                          large.classList.add('loaded');
                          _this.querySelector('source').setAttribute('srcset', _this.dataset.large); 
                          _this.querySelector('img').setAttribute('src', _this.dataset.small);                          
                        
                        large.onload=null;
                      };
                
                  img.onload=null;
              };
            }
          }
        }

      var blurPrivewImgs = document.querySelectorAll('.blurload');
      for (var i=0;i<blurPrivewImgs.length;i++) {
        new BlurPreview(blurPrivewImgs[i]);
      }
       
      

  if(window.location.href.indexOf('us/computing')>-1 || window.location.href.indexOf('tvs/portable-projector/the-freestyle-sp-lsp3blaxza')>-1 || window.location.href.indexOf('us/televisions-home-theater/home-theater')>-1 || window.location.href.indexOf('us/televisions-home-theater/tvs')>-1) {
    window.bopisEnable = [
      'LC27RG50FQNXZA',
      'LC27T550FDNXZA',
      'LF24T350FHNXZA',
      'LU28R550UQNXZA',
      'LC24F390FHNXZA',
      'LS32A700NWNXZA',
      'LF27T350FHNXZA',
      'LC24RG50FZNXZA',
      'LS28AG700NNXZA',
      'LC24RG50FQNXZA',
      'LS32AM702UNXZA',
      'LC27G55TQWNXZA',
      'SP-LSP3BLAXZA',
      'MX-T40/ZA',
      'MX-T50',
      'MX-T70',
      'SWA-9500S/ZA',
      'SWA-9100S/ZA',
      'HW-A430/ZA',
      'HW-Q600A/ZA',
      'HW-Q700A/ZA',
      'HW-Q850A/ZA',
      'HW-A40R/ZA',
      'HW-A450/ZA',
      'HW-A550/ZA',
      'HW-A650/ZA',
      'HW-Q65T/ZA',
      'HW-Q900A/ZA',
      'HW-S50A/ZA',
      'SWA-9000S/ZA',
      'SWA-W500/ZA',
      'HW-Q950T',
      'HW-Q950A/ZA',
      'LS27AM500NNXZA',
      'HW-Q60T/ZA',
      'HW-S60A/ZA',
      'LC27G75TQSNXZA',
      'LC32G35TFQNXZA',
      'LC32G57TQWNXDC',
      'LC32G75TQSNXZA',
      'LC32T550FDNXZA',
      'LC34G55TWWNXZA',
      'LC49G97TSSNXDC',
      'LC49RG90SSNXZA',
      'LF24G35TFWNXZA',
      'LS24AG302NNXZA',
      'LS27A700NWNXZA',
      'LS27A800UJNXGO',
      'LS27AG302NNXZA',
      'LS27AG500PNXZA',
      'LS27AM501NNXZA',
      'LS32AM500NNXZA',
      'LS34A650UXNXGO',
      'LS43AM702UNXZA',
      'NP950XED-KA2US',
      // tv skus
      'UN40N5200AFXZA',
      'QN85QN95BAFXZA',
      'QN75QN95BAFXZA',
      'QN55QN95BAFXZA',
      'QN65QN95BAFXZA',
      'UN50AU8000FXZA',
      'QN55Q60BAFXZA',
      'QN50Q60BAFXZA',
      'UN55TU8300FXZA',
      'QN60Q60BAFXZA',
      'UN50TU7000FXZA',
      'UN60TU7000FXZA',
      'UN55TU7000FXZA',
      'UN55AU8000FXZA',
      'UN58TU7000FXZA',
      'QN43QN90AAFXZA',
      'QN32LS03BBFXZA',
      'QN50QN90AAFXZA',
      'QN43QN90BAFXZA',
      'QN50QN90BAFXZA',
      'QN43LS01TAFXZA',
      'QN50LS03BAFXZA',
      'QN43LS03BAFXZA',
      'QN50Q80BAFXZA',
      'QN75QN90BAFXZA',
      'QN65QN85BAFXZA',
      'QN65QN85AAFXZA',
      'QN75LST7TAFXZA',
      'QN65QN90BAFXZA',
      'QN98QN90AAFXZA',
      'QN85LS03BAFXZA',
      'QN65Q70AAFXZA',
      'QN75QN85BAFXZA',
      'QN75Q80BAFXZA',
      'QN65Q80BAFXZA',
      'QN75LS03BAFXZA',
      'QN75QN900BFXZA',
      'QN85QN900BFXZA',
      'QN65LS03BAFXZA',
      'QN65QN900BFXZA',
      'QN65LS01TAFXZA',
      'QN75Q70AAFXZA',
      'QN85LS03AAFXZA',
      'QN75LST9TAFXZA',
      'QN65LST9TAFXZA',
      'QN75QN85AAFXZA',
      'QN85QN90AAFXZA',
      'QN65S95BAFXZA',
      'QN65QN90AAFXZA',
      'QN85QN90BAFXZA',
      'QN85Q80BAFXZA',
      'QN75QN90AAFXZA',
      'QN55QN90BAFXZA',
      'QN55S95BAFXZA',
      'QN55Q80BAFXZA',
      'QN55LS01TAFXZA',
      'QN55LS03BAFXZA',
      'QN55QN90AAFXZA',
      'QN55Q70AAFXZA',
      'QN55QN85BAFXZA',
      'UN43AU8000FXZA',
      'UN43TU7000FXZA',
      'UN32M4500BFXZA',
      'QN32Q60AAFXZA',
      'UN32N5300AFXZA',
      'QN43Q60BAFXZA'
    ];
  }


window.Granite = window.Granite || {};

(function(Granite, $) {
    Granite.Util = (function() {

        var self = {
            patchText: function(text, snippets) {
                if (snippets) {
                    if (!$.isArray(snippets)) {
                        text = text.replace("{0}", snippets);
                    } else {
                        for (var i = 0; i < snippets.length; i++) {
                            text = text.replace(("{" + i + "}"), snippets[i]);
                        }
                    }
                }
                return text;
            }

        };

        return self;

    }());

}(Granite, jQuery));


(function (Granite, util, $) {
    Granite.HTTP = (function() {
        var contextPath = null,
            SCRIPT_URL_REGEXP = /^(?:http|https):\/\/[^\/]+(\/.*)\/(?:etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs).*\.js(\?.*)?$/,
            ENCODE_PATH_REGEXP = /[^1\w-\.!~\*'\(\)\/%;:@&=\$,]/,
            loginRedirected = false,
            self = {};
        self.getSchemeAndAuthority = function (url) {
            var end;

            try {
                if (url.indexOf("://") == -1) return ""; // e.g. url was /en.html
                end = url.indexOf("/", url.indexOf("://") + 3);

                return (end == -1) ?
                    url :   // e.g. url was http://www.day.com
                    url.substring(0, end);  // e.g. url was http://www.day.com/en.html
            }
            catch (e) {
                return "";
            }
        };
        self.getContextPath = function () {
            return contextPath;
        };
        self.detectContextPath = function () {
            try {
                if (window.CQURLInfo) {
                    contextPath = CQURLInfo.contextPath || "";
                } else {
                    var scripts = document.getElementsByTagName("script");
                    for (var i = 0; i < scripts.length; i++) {
                        // in IE the first script is not the expected widgets js: loop
                        // until it is found
                        var result = SCRIPT_URL_REGEXP.exec(scripts[i].src);
                        if (result) {
                            contextPath = result[1];
                            return;
                        }
                    }
                    contextPath = "";
                }
            } catch (e) {
            }
        };
        self.externalize = function (url) {
            try {
                if (url.indexOf("/") == 0 && contextPath &&
                    url.indexOf(contextPath + "/") != 0) {
                    url = contextPath + url;
                }
            }
            catch (e) {
            }
            return url;
        };
        self.internalize = function (url, doc) {
            if (url.charAt(0) == '/') {
                if (contextPath === url) {
                    return '';
                }
                else if (contextPath && url.indexOf(contextPath + "/") == 0) {
                    return url.substring(contextPath.length);
                } else {
                    return url;
                }
            }

            if (!doc) doc = document;
            var docHost = self.getSchemeAndAuthority(doc.location.href);
            var urlHost = self.getSchemeAndAuthority(url);
            if (docHost == urlHost) {
                return url.substring(urlHost.length + (contextPath ? contextPath.length : 0));
            }
            else {
                return url;
            }
        };
        self.getPath = function (url) {

            if (!url) {
                if (window.CQURLInfo && CQURLInfo.requestPath) {
                    return CQURLInfo.requestPath;
                } else {
                    url = window.location.pathname;
                }
            } else {
                url = self.removeParameters(url);
                url = self.removeAnchor(url);
            }

            url = self.internalize(url);
            var i = url.indexOf(".", url.lastIndexOf("/"));
            if (i != -1) {
                url = url.substring(0, i);
            }
            return url;
        };
        self.removeAnchor = function (url) {
            if (url.indexOf("#") != -1) {
                return url.substring(0, url.indexOf("#"));
            }
            return url;
        };
        self.removeParameters = function (url) {
            if (url.indexOf("?") != -1) {
                return url.substring(0, url.indexOf("?"));
            }
            return url;
        };
        self.encodePathOfURI = function (url) {
            var parts, delim;
            if (url.indexOf("?") != -1) {
                parts = url.split("?");
                delim = "?";
            }
            else if (url.indexOf("#") != -1) {
                parts = url.split("#");
                delim = "#";
            }
            else {
                parts = [url];
            }
            if (ENCODE_PATH_REGEXP.test(parts[0])) {
                parts[0] = self.encodePath(parts[0]);
            }
            return parts.join(delim);
        };
       self.encodePath = function (path) {
            path = encodeURI(path).replace(/%5B/g, '[').replace(/%5D/g, ']');
            path = path.replace(/\+/g, "%2B");
            path = path.replace(/\?/g, "%3F");
            path = path.replace(/;/g, "%3B");
            path = path.replace(/#/g, "%23");
            path = path.replace(/=/g, "%3D");
            path = path.replace(/\$/g, "%24");
            path = path.replace(/,/g, "%2C");
            path = path.replace(/'/g, "%27");
            path = path.replace(/"/g, "%22");
            return path;
       };
        self.handleLoginRedirect = function () {
            if (!loginRedirected) {
                loginRedirected = true;
                alert(Granite.I18n.get("Your request could not be completed because you have been signed out."));
                var l = util.getTopWindow().document.location;
                l.href = self.externalize(sling.LOGIN_URL) +
                    "?resource=" + encodeURIComponent(l.pathname + l.search + l.hash);
            }
        };
        self.getXhrHook = function (url, method, params) {
            method = method || "GET";
            if (window.G_XHR_HOOK && $.isFunction(G_XHR_HOOK)) {
                var p = {
                    "url": url,
                    "method": method
                };
                if (params) {
                    p["params"] = params;
                }
                return G_XHR_HOOK(p);
            }
            return null;
        };

        self.eval = function(response) {
            if (typeof response != "object") {
                response = $.ajax({
                    url: response,
                    type: 'get',
                    async: false
                });
            }
            try {
                return eval("(" + (response.body ? response.body :
                    response.responseText) + ")");
            } catch (e) {
            }
            return null;
        };

        return self;
    }());

}(Granite, Granite.Util, jQuery));

(function(document, Granite, util, http, $) {

    Granite.I18n = (function() {

         var dicts = {},

            urlPrefix = "",

            urlSuffix = ".json",

            manualLocale = undefined,

            pseudoTranslations = false,

            languages = null,

            self = {},

            manualDictionary = false,

            getDictionaryUrl = function(locale) {
                if (manualDictionary) {
                    return urlPrefix + locale + urlSuffix;
                }

                var dictionarySrc = $("html").attr("data-i18n-dictionary-src");

                if (!dictionarySrc) {
                    return urlPrefix + locale + urlSuffix;
                }

                return dictionarySrc.replace("{locale}", encodeURIComponent(locale)).replace("{+locale}", locale);
            };

        self.LOCALE_DEFAULT = "en";

        self.PSEUDO_LANGUAGE = "zz";

        self.PSEUDO_PATTERN_KEY = "_pseudoPattern_";

        self.init = function(config) {
            config = config || {};

            this.setLocale(config.locale);
            this.setUrlPrefix(config.urlPrefix);
            this.setUrlSuffix(config.urlSuffix);
        };

        self.setLocale = function(locale) {
            if (!locale) return;

            manualLocale = locale;
        };

        self.getLocale = function() {
            if ($.isFunction(manualLocale)) {
                manualLocale = manualLocale();
            }

            return manualLocale || document.documentElement.lang || self.LOCALE_DEFAULT;
        };

        self.setUrlPrefix = function(prefix) {
            if (!prefix) return;

            urlPrefix = prefix;
            manualDictionary = true;
        };

        self.setUrlSuffix = function(suffix) {
            if (!suffix) return;

            urlSuffix = suffix;
            manualDictionary = true;
        };

        self.getDictionary = function(locale) {
            locale = locale || self.getLocale();

            if (!dicts[locale]) {
                pseudoTranslations = (locale.indexOf(self.PSEUDO_LANGUAGE) == 0);

                try {
                    var response = $.ajax(getDictionaryUrl(locale), {
                        async: false,
                        dataType: "json"
                    });
                    dicts[locale] = $.parseJSON(response.responseText);
                } catch (e) {}
                if (!dicts[locale]) {
                    dicts[locale] = {};
                }
            }
            return dicts[locale];
        };

        self.get = function(text, snippets, note) {
            var dict, newText, lookupText;

            dict = self.getDictionary();

            lookupText = pseudoTranslations ? self.PSEUDO_PATTERN_KEY :
                note ? text + " ((" + note + "))" :
                text;
            if (dict) {
                newText = dict[lookupText];
            }
            if (!newText) {
                newText = text;
            }
            if (pseudoTranslations) {
                newText = newText.replace("{string}", text).replace("{comment}", note ? note : "");
            }
            return util.patchText(newText, snippets);
        };

        self.getVar = function(text, note) {
            if (!text) {
                return null;
            }
            return self.get(text, null, note);
        };

        self.getLanguages = function() {
            if (!languages) {
                try {
                    var json = http.eval("/libs/wcm/core/resources/languages.overlay.infinity.json");
                    $.each(json, function(name, lang) {
                        lang.title = self.getVar(lang.language);
                        if (lang.title && lang.country && lang.country != "*") {
                            lang.title += " (" + self.getVar(lang.country) + ")";
                        }
                    });
                    languages = json;
                } catch (e) {
                    languages = {};
                }
            }
            return languages;
        };

        self.parseLocale = function(langCode) {
            if (!langCode) {
                return null;
            }
            var pos = langCode.indexOf("_");
            if (pos < 0) {
                pos = langCode.indexOf("-");
            }

            var language, country;
            if (pos < 0) {
                language = langCode;
                country = null;
            } else {
                language = langCode.substring(0, pos);
                country = langCode.substring(pos + 1);
            }
            return {
                code: langCode,
                language: language,
                country: country
            };
        };

        return self;

    }());

}(document, Granite, Granite.Util, Granite.HTTP, jQuery));

Granite.HTTP.detectContextPath();

/*!
jquery.animate-enhanced plugin v1.05
---
http://github.com/benbarnett/jQuery-Animate-Enhanced
http://benbarnett.net
@benpbarnett
*/
/*
jquery.animate-enhanced plugin v1.05
---
http://github.com/benbarnett/jQuery-Animate-Enhanced
http://benbarnett.net
@benpbarnett
---
Copyright (c) 2012 Ben Barnett

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
---
Extends jQuery.animate() to automatically use CSS3 transformations where applicable.
Tested with jQuery 1.3.2+

Supports -moz-transition, -webkit-transition, -o-transition, transition

Targetted properties (for now):
	- left
	- top
	- opacity
	- width
	- height

Usage (exactly the same as it would be normally):

	jQuery(element).animate({left: 200},  500, function() {
		// callback
	});

Changelog:
	1.05 (14/08/2013):
		- Merging PR #124 fix for highcharts clash. Thanks @bensonc!

	1.04 (14/08/2013):
		- Using fix from issue #69 by @rickyk586 to support percentages

	1.03 (19/7/2013):
		- Merge PR #129 (Use originalAnimateMethod if a step callback function is provided.) /thx @lehni

	1.02 (8/5/2013):
		- Fixing use3D default flags. It must explicitly be set to false to disable 3d now, the plugin by default will use it if available.

	1.01 (8/5/2013):
		- Adding appropriate display value for wider range of elements (issue #121 - thanks smacky)

	1.0 (8/5/2103):
		- Fix avoidTransforms: true behaviour for directional transitions

	0.99.1 (3/4/2013):
		- Add Set or unset the 'disabled by default' value (PR #117)

	0.99 (5/12/2012):
		- PR #109 Added support for list-item nodes. FadeIn on tags was omitting the list-style support. (thx @SeanCannon)
		
	0.98 (12/11/2012):
		- Merging pull request #106 thx @gboysko - checking for ownerDocument before using getComputedStyle

	0.97 (6/11/2012):
		- Merging pull request #104 thx @gavrochelegnou - .bind instead of .one

	0.96a (20/08/2012):
		- Checking event is from dispatch target (issue #58)

	0.96 (20/08/2012):
		- Fixes for context, all elements returned as context (issue #84)
		- Reset position with leaveTransforms !== true fixes (issue #93)
		

	0.95 (20/08/2012):
		- If target opacity == current opacity, pass back to jquery native to get callback firing (#94)

	0.94 (20/08/2012):
		- Addresses Firefox callback mechanisms (issue #94)
		- using $.one() to bind to CSS callbacks in a more generic way

	0.93 (6/8/2012):
		- Adding other Opera 'transitionend' event (re: issue #90)

	0.92 (6/8/2012):
		- Seperate unbinds into different threads (re: issue #91)

	0.91 (2/4/2012):
		- Merge Pull Request #74 - Unit Management

	0.90 (7/3/2012):
		- Adding public $.toggleDisabledByDefault() feature to disable entire plugin by default (Issue #73)

	0.89 (24/1/2012):
		- Adding 'avoidCSSTransitions' property. Set to true to disable entire plugin. (Issue #47)

	0.88 (24/1/2012):
		- Fix Issue #67 for HighchartsJS compatibility

	0.87 (24/1/2012):
		- Fix Issue #66 selfCSSData.original is undefined

	0.86 (9/1/2012):
		- Strict JS fix for undefined variable

	0.85 (20/12/2011):
		- Merge Pull request #57 from Kronuz
		- Codebase cleaned and now passes jshint.
		- Fixed a few bugs (it now saves and restores the original css transition properties).
		- fadeOut() is fixed, it wasn't restoring the opacity after hiding it.

	0.80 (13/09/2011):
		- Issue #28 - Report $(el).is(':animated') fix

	0.79 (06/09/2011):
		- Issue #42 - Right negative position animation: please see issue notes on Github.

	0.78 (02/09/2011):
		- Issue #18 - jQuery/$ reference joys

	0.77 (02/09/2011):
		- Adding feature on Github issue #44 - Use 3D Transitions by default

	0.76 (28/06/2011):
		- Fixing issue #37 - fixed stop() method (with gotoEnd == false)

	0.75 (15/06/2011):
		- Fixing issue #35 to pass actual object back as context for callback

	0.74 (28/05/2011):
		- Fixing issue #29 to play nice with 1.6+

	0.73 (05/03/2011):
		- Merged Pull Request #26: Fixed issue with fadeOut() / "hide" shortcut

	0.72 (05/03/2011):
		- Merged Pull Request #23: Added Penner equation approximations from Matthew Lein's Ceaser, and added failsafe fallbacks

	0.71 (05/03/2011):
		- Merged Pull Request #24: Changes translation object to integers instead of strings to fix relative values bug with leaveTransforms = true

	0.70 (17/03/2011):
		- Merged Pull Request from amlw-nyt to add bottom/right handling

	0.68 (15/02/2011):
		- width/height fixes & queue issues resolved.

	0.67 (15/02/2011):
		- Code cleanups & file size improvements for compression.

	0.66 (15/02/2011):
		- Zero second fadeOut(), fadeIn() fixes

	0.65 (01/02/2011):
		- Callbacks with queue() support refactored to support element arrays

	0.64 (27/01/2011):
		- BUGFIX #13: .slideUp(), .slideToggle(), .slideDown() bugfixes in Webkit

	0.63 (12/01/2011):
		- BUGFIX #11: callbacks not firing when new value == old value

	0.62 (10/01/2011):
		- BUGFIX #11: queue is not a function issue fixed

	0.61 (10/01/2011):
		- BUGFIX #10: Negative positions converting to positive

	0.60 (06/01/2011):
		- Animate function rewrite in accordance with new queue system
		- BUGFIX #8: Left/top position values always assumed relative rather than absolute
		- BUGFIX #9: animation as last item in a chain - the chain is ignored?
		- BUGFIX: width/height CSS3 transformation with left/top working

	0.55 (22/12/2010):
		- isEmptyObject function for <jQuery 1.4 (requires 1.3.2)

	0.54a (22/12/2010):
		- License changed to MIT (http://www.opensource.org/licenses/mit-license.php)

	0.54 (22/12/2010):
		- Removed silly check for 'jQuery UI' bailouts. Sorry.
		- Scoping issues fixed - Issue #4: $(this) should give you a reference to the selector being animated.. per jquery's core animation funciton.

	0.53 (17/11/2010):
		- New $.translate() method to easily calculate current transformed translation
		- Repeater callback bug fix for leaveTransforms:true (was constantly appending properties)

	0.52 (16/11/2010):
		- leaveTransforms: true bug fixes
		- 'Applying' user callback function to retain 'this' context

	0.51 (08/11/2010):
		- Bailing out with jQuery UI. This is only so the plugin plays nice with others and is TEMPORARY.

	0.50 (08/11/2010):
		- Support for $.fn.stop()
		- Fewer jQuery.fn entries to preserve namespace
		- All references $ converted to jQuery
		- jsDoc Toolkit style commenting for docs (coming soon)

	0.49 (19/10/2010):
		- Handling of 'undefined' errors for secondary CSS objects
		- Support to enhance 'width' and 'height' properties (except shortcuts involving jQuery.fx.step, e.g slideToggle)
		- Bugfix: Positioning when using avoidTransforms: true (thanks Ralf Santbergen reports)
		- Bugfix: Callbacks and Scope issues

	0.48 (13/10/2010):
		- Checks for 3d support before applying

	0.47 (12/10/2010);
		- Compatible with .fadeIn(), .fadeOut()
		- Use shortcuts, no duration for jQuery default or "fast" and "slow"
		- Clean up callback event listeners on complete (preventing multiple callbacks)

	0.46 (07/10/2010);
		- Compatible with .slideUp(), .slideDown(), .slideToggle()

	0.45 (06/10/2010):
		- 'Zero' position bug fix (was originally translating by 0 zero pixels, i.e. no movement)

	0.4 (05/10/2010):
		- Iterate over multiple elements and store transforms in jQuery.data per element
		- Include support for relative values (+= / -=)
		- Better unit sanitization
		- Performance tweaks
		- Fix for optional callback function (was required)
		- Applies data[translateX] and data[translateY] to elements for easy access
		- Added 'easeInOutQuint' easing function for CSS transitions (requires jQuery UI for JS anims)
		- Less need for leaveTransforms = true due to better position detections
*/

(function(jQuery, originalAnimateMethod, originalStopMethod) {

	// ----------
	// Plugin variables
	// ----------
	var	cssTransitionProperties = ['top', 'right', 'bottom', 'left', 'opacity', 'height', 'width'],
		directions = ['top', 'right', 'bottom', 'left'],
		cssPrefixes = ['-webkit-', '-moz-', '-o-', ''],
		pluginOptions = ['avoidTransforms', 'useTranslate3d', 'leaveTransforms'],
		rfxnum = /^([+-]=)?([\d+-.]+)(.*)$/,
		rupper = /([A-Z])/g,
		defaultEnhanceData = {
			secondary: {},
			meta: {
				top : 0,
				right : 0,
				bottom : 0,
				left : 0
			}
		},
		valUnit = 'px',

		DATA_KEY = 'jQe',
		CUBIC_BEZIER_OPEN = 'cubic-bezier(',
		CUBIC_BEZIER_CLOSE = ')',

		originalAnimatedFilter = null,
		pluginDisabledDefault = false;


	// ----------
	// Check if this browser supports CSS3 transitions
	// ----------
	var thisBody = document.body || document.documentElement,
		thisStyle = thisBody.style,
		transitionEndEvent = 'webkitTransitionEnd oTransitionEnd transitionend',
		cssTransitionsSupported = thisStyle.WebkitTransition !== undefined || thisStyle.MozTransition !== undefined || thisStyle.OTransition !== undefined || thisStyle.transition !== undefined,
		has3D = ('WebKitCSSMatrix' in window && 'm11' in new WebKitCSSMatrix()),
		use3DByDefault = has3D;



	// ----------
	// Extended :animated filter
	// ----------
	if ( jQuery.expr && jQuery.expr.filters ) {
		originalAnimatedFilter = jQuery.expr.filters.animated;
		jQuery.expr.filters.animated = function(elem) {
			return jQuery(elem).data('events') && jQuery(elem).data('events')[transitionEndEvent] ? true : originalAnimatedFilter.call(this, elem);
		};
	}


	/**
		@private
		@name _getUnit
		@function
		@description Return unit value ("px", "%", "em" for re-use correct one when translating)
		@param {variant} [val] Target value
	*/
	function _getUnit(val){
		return val.match(/\D+$/);
	}


	/**
		@private
		@name _interpretValue
		@function
		@description Interpret value ("px", "+=" and "-=" sanitisation)
		@param {object} [element] The Element for current CSS analysis
		@param {variant} [val] Target value
		@param {string} [prop] The property we're looking at
		@param {boolean} [isTransform] Is this a CSS3 transform?
	*/
	function _interpretValue(e, val, prop, isTransform) {
		// this is a nasty fix, but we check for prop == 'd' to see if we're dealing with SVG, and abort
		if (prop == "d") return;
		if (!_isValidElement(e)) return;
		
		var parts = rfxnum.exec(val),
			start = e.css(prop) === 'auto' ? 0 : e.css(prop),
			cleanCSSStart = typeof start == 'string' ? _cleanValue(start) : start,
			cleanTarget = typeof val == 'string' ? _cleanValue(val) : val,
			cleanStart = isTransform === true ? 0 : cleanCSSStart,
			hidden = e.is(':hidden'),
			translation = e.translation();

		if (prop == 'left') cleanStart = parseInt(cleanCSSStart, 10) + translation.x;
		if (prop == 'right') cleanStart = parseInt(cleanCSSStart, 10) + translation.x;
		if (prop == 'top') cleanStart = parseInt(cleanCSSStart, 10) + translation.y;
		if (prop == 'bottom') cleanStart = parseInt(cleanCSSStart, 10) + translation.y;

		// deal with shortcuts
		if (!parts && val == 'show') {
			cleanStart = 1;
			if (hidden) e.css({'display': _domElementVisibleDisplayValue(e.context.tagName), 'opacity': 0});
		} else if (!parts && val == "hide") {
			cleanStart = 0;
		}

		if (parts) {
			var end = parseFloat(parts[2]);

			// If a +=/-= token was provided, we're doing a relative animation
			if (parts[1]) end = ((parts[1] === '-=' ? -1 : 1) * end) + parseInt(cleanStart, 10);

			// check for unit  as per issue #69
			if (parts[3] == '%') end = end + '%';

			return end;
		} else {
			return cleanStart;
		}
	}

	/**
		@private
		@name _getTranslation
		@function
		@description Make a translate or translate3d string
		@param {integer} [x]
		@param {integer} [y]
		@param {boolean} [use3D] Use translate3d if available?
	*/
	function _getTranslation(x, y, use3D) {
		return ((use3D === true || ((use3DByDefault === true && use3D !== false)) && has3D)) ? 'translate3d(' + x + 'px, ' + y + 'px, 0)' : 'translate(' + x + 'px,' + y + 'px)';
	}


	/**
		@private
		@name _applyCSSTransition
		@function
		@description Build up the CSS object
		@param {object} [e] Element
		@param {string} [property] Property we're dealing with
		@param {integer} [duration] Duration
		@param {string} [easing] Easing function
		@param {variant} [value] String/integer for target value
		@param {boolean} [isTransform] Is this a CSS transformation?
		@param {boolean} [isTranslatable] Is this a CSS translation?
		@param {boolean} [use3D] Use translate3d if available?
	*/
	function _applyCSSTransition(e, property, duration, easing, value, isTransform, isTranslatable, use3D) {
		var eCSSData = e.data(DATA_KEY),
			enhanceData = eCSSData && !_isEmptyObject(eCSSData) ? eCSSData : jQuery.extend(true, {}, defaultEnhanceData),
			offsetPosition = value,
			isDirection = jQuery.inArray(property, directions) > -1;


		if (isDirection) {
			var meta = enhanceData.meta,
				cleanPropertyValue = _cleanValue(e.css(property)) || 0,
				stashedProperty = property + '_o';

			offsetPosition = value - cleanPropertyValue;


			meta[property] = offsetPosition;
			meta[stashedProperty] = e.css(property) == 'auto' ? 0 + offsetPosition : cleanPropertyValue + offsetPosition || 0;
			enhanceData.meta = meta;

			// fix 0 issue (transition by 0 = nothing)
			if (isTranslatable && offsetPosition === 0) {
				offsetPosition = 0 - meta[stashedProperty];
				meta[property] = offsetPosition;
				meta[stashedProperty] = 0;
			}
		}

		// reapply data and return
		return e.data(DATA_KEY, _applyCSSWithPrefix(e, enhanceData, property, duration, easing, offsetPosition, isTransform, isTranslatable, use3D));
	}

	/**
		@private
		@name _applyCSSWithPrefix
		@function
		@description Helper function to build up CSS properties using the various prefixes
		@param {object} [cssProperties] Current CSS object to merge with
		@param {string} [property]
		@param {integer} [duration]
		@param {string} [easing]
		@param {variant} [value]
		@param {boolean} [isTransform] Is this a CSS transformation?
		@param {boolean} [isTranslatable] Is this a CSS translation?
		@param {boolean} [use3D] Use translate3d if available?
	*/
	function _applyCSSWithPrefix(e, cssProperties, property, duration, easing, value, isTransform, isTranslatable, use3D) {
		var saveOriginal = false,
			transform = isTransform === true && isTranslatable === true;


		cssProperties = cssProperties || {};
		if (!cssProperties.original) {
			cssProperties.original = {};
			saveOriginal = true;
		}
		cssProperties.properties = cssProperties.properties || {};
		cssProperties.secondary = cssProperties.secondary || {};

		var meta = cssProperties.meta,
			original = cssProperties.original,
			properties = cssProperties.properties,
			secondary = cssProperties.secondary;

		for (var i = cssPrefixes.length - 1; i >= 0; i--) {
			var tp = cssPrefixes[i] + 'transition-property',
				td = cssPrefixes[i] + 'transition-duration',
				tf = cssPrefixes[i] + 'transition-timing-function';

			property = (transform ? cssPrefixes[i] + 'transform' : property);

			if (saveOriginal) {
				original[tp] = e.css(tp) || '';
				original[td] = e.css(td) || '';
				original[tf] = e.css(tf) || '';
			}

			secondary[property] = transform ? _getTranslation(meta.left, meta.top, use3D) : value;

			properties[tp] = (properties[tp] ? properties[tp] + ',' : '') + property;
			properties[td] = (properties[td] ? properties[td] + ',' : '') + duration + 'ms';
			properties[tf] = (properties[tf] ? properties[tf] + ',' : '') + easing;
		}

		return cssProperties;
	}

	/**
		@private
		@name _isBoxShortcut
		@function
		@description Shortcut to detect if we need to step away from slideToggle, CSS accelerated transitions (to come later with fx.step support)
		@param {object} [prop]
	*/
	function _isBoxShortcut(prop) {
		for (var property in prop) {
			if ((property == 'width' || property == 'height') && (prop[property] == 'show' || prop[property] == 'hide' || prop[property] == 'toggle')) {
				return true;
			}
		}
		return false;
	}


	/**
		@private
		@name _isEmptyObject
		@function
		@description Check if object is empty (<1.4 compatibility)
		@param {object} [obj]
	*/
	function _isEmptyObject(obj) {
		for (var i in obj) {
			return false;
		}
		return true;
	}

	/**
	 * Fetch most appropriate display value for element types
	 * @see  https://github.com/benbarnett/jQuery-Animate-Enhanced/issues/121
	 * @private
	 * @param  {[type]} tagName [description]
	 * @return {[type]}         [description]
	 */
	function _domElementVisibleDisplayValue(tagName) {
		tagName = tagName.toUpperCase();
		var displayValues = {
			'LI'       : 'list-item',
			'TR'       : 'table-row',
			'TD'       : 'table-cell',
			'TH'       : 'table-cell',
			'CAPTION'  : 'table-caption',
			'COL'      : 'table-column',
			'COLGROUP' : 'table-column-group',
			'TFOOT'      : 'table-footer-group',
			'THEAD'      : 'table-header-group',
			'TBODY'      : 'table-row-group'
		};

		return typeof displayValues[tagName] == 'string' ? displayValues[tagName] : 'block';
	}


	/**
		@private
		@name _cleanValue
		@function
		@description Remove 'px' and other artifacts
		@param {variant} [val]
	*/
	function _cleanValue(val) {
		return parseFloat(val.replace(_getUnit(val), ''));
	}


	function _isValidElement(element) {
		var allValid=true;
		element.each(function(index, el) {
			allValid = allValid && el.ownerDocument;
			return allValid;
		});
		return allValid;
	}

	/**
		@private
		@name _appropriateProperty
		@function
		@description Function to check if property should be handled by plugin
		@param {string} [prop]
		@param {variant} [value]
	*/
	function _appropriateProperty(prop, value, element) {
		if (!_isValidElement(element)) {
			return false;
		}

		var is = jQuery.inArray(prop, cssTransitionProperties) > -1;
		if ((prop == 'width' || prop == 'height' || prop == 'opacity') && (parseFloat(value) === parseFloat(element.css(prop)))) is = false;
		return is;
	}


	jQuery.extend({
		/**
			@public
			@name toggle3DByDefault
			@function
			@description Toggle for plugin settings to automatically use translate3d (where available). Usage: $.toggle3DByDefault
		*/
		toggle3DByDefault: function() {
			return use3DByDefault = !use3DByDefault;
		},
		
		
		/**
			@public
			@name toggleDisabledByDefault
			@function
			@description Toggle the plugin to be disabled by default (can be overridden per animation with avoidCSSTransitions)
		*/
		toggleDisabledByDefault: function() {
			return pluginDisabledDefault = !pluginDisabledDefault;
		},


		/**
			@public
			@name setDisabledByDefault
			@function
			@description Set or unset the 'disabled by default' value
		*/
		setDisabledByDefault: function(newValue) {
			return pluginDisabledDefault = newValue;
		}
	});


	/**
		@public
		@name translation
		@function
		@description Get current X and Y translations
	*/
	jQuery.fn.translation = function() {
		if (!this[0]) {
			return null;
		}

		var	elem = this[0],
			cStyle = window.getComputedStyle(elem, null),
			translation = {
				x: 0,
				y: 0
			};

		if (cStyle) {
			for (var i = cssPrefixes.length - 1; i >= 0; i--) {
				var transform = cStyle.getPropertyValue(cssPrefixes[i] + 'transform');
				if (transform && (/matrix/i).test(transform)) {
					var explodedMatrix = transform.replace(/^matrix\(/i, '').split(/, |\)$/g);
					translation = {
						x: parseInt(explodedMatrix[4], 10),
						y: parseInt(explodedMatrix[5], 10)
					};

					break;
				}
			}
		}

		return translation;
	};



	/**
		@public
		@name jQuery.fn.animate
		@function
		@description The enhanced jQuery.animate function
		@param {string} [property]
		@param {string} [speed]
		@param {string} [easing]
		@param {function} [callback]
	*/
	/*
	jQuery.fn.animate = function(prop, speed, easing, callback) {
		prop = prop || {};
		var isTranslatable = !(typeof prop['bottom'] !== 'undefined' || typeof prop['right'] !== 'undefined'),
			optall = jQuery.speed(speed, easing, callback),
			callbackQueue = 0,
			propertyCallback = function() {
				callbackQueue--;
				if (callbackQueue === 0) {
					// we're done, trigger the user callback
					if (typeof optall.complete === 'function') {
						optall.complete.apply(this, arguments);
					}
				}
			},
			bypassPlugin = (typeof prop['avoidCSSTransitions'] !== 'undefined') ? prop['avoidCSSTransitions'] : pluginDisabledDefault;

		if (bypassPlugin === true || !cssTransitionsSupported || _isEmptyObject(prop) || _isBoxShortcut(prop) || optall.duration <= 0 || optall.step) {
			return originalAnimateMethod.apply(this, arguments);
		}

		return this[ optall.queue === true ? 'queue' : 'each' ](function() {
			var self = jQuery(this),
				opt = jQuery.extend({}, optall),
				cssCallback = function(e) {
					var selfCSSData = self.data(DATA_KEY) || { original: {} },
						restore = {};

					if (e.eventPhase != 2)  // not at dispatching target (thanks @warappa issue #58)
						return;

					// convert translations to left & top for layout
					if (prop.leaveTransforms !== true) {
						for (var i = cssPrefixes.length - 1; i >= 0; i--) {
							restore[cssPrefixes[i] + 'transform'] = '';
						}
						if (isTranslatable && typeof selfCSSData.meta !== 'undefined') {
							for (var j = 0, dir; (dir = directions[j]); ++j) {
								restore[dir] = selfCSSData.meta[dir + '_o'] + valUnit;
								jQuery(this).css(dir, restore[dir]);
							}
						}
					}

					// remove transition timing functions
					self.
						unbind(transitionEndEvent).
						css(selfCSSData.original).
						css(restore).
						data(DATA_KEY, null);

					// if we used the fadeOut shortcut make sure elements are display:none
					if (prop.opacity === 'hide') {
						self.css({'display': 'none', 'opacity': ''});
					}

					// run the main callback function
					propertyCallback.call(this);
				},
				easings = {
					bounce: CUBIC_BEZIER_OPEN + '0.0, 0.35, .5, 1.3' + CUBIC_BEZIER_CLOSE,
					linear: 'linear',
					swing: 'ease-in-out',

					// Penner equation approximations from Matthew Lein's Ceaser: http://matthewlein.com/ceaser/
					easeInQuad:     CUBIC_BEZIER_OPEN + '0.550, 0.085, 0.680, 0.530' + CUBIC_BEZIER_CLOSE,
					easeInCubic:    CUBIC_BEZIER_OPEN + '0.550, 0.055, 0.675, 0.190' + CUBIC_BEZIER_CLOSE,
					easeInQuart:    CUBIC_BEZIER_OPEN + '0.895, 0.030, 0.685, 0.220' + CUBIC_BEZIER_CLOSE,
					easeInQuint:    CUBIC_BEZIER_OPEN + '0.755, 0.050, 0.855, 0.060' + CUBIC_BEZIER_CLOSE,
					easeInSine:     CUBIC_BEZIER_OPEN + '0.470, 0.000, 0.745, 0.715' + CUBIC_BEZIER_CLOSE,
					easeInExpo:     CUBIC_BEZIER_OPEN + '0.950, 0.050, 0.795, 0.035' + CUBIC_BEZIER_CLOSE,
					easeInCirc:     CUBIC_BEZIER_OPEN + '0.600, 0.040, 0.980, 0.335' + CUBIC_BEZIER_CLOSE,
					easeInBack:     CUBIC_BEZIER_OPEN + '0.600, -0.280, 0.735, 0.045' + CUBIC_BEZIER_CLOSE,
					easeOutQuad:    CUBIC_BEZIER_OPEN + '0.250, 0.460, 0.450, 0.940' + CUBIC_BEZIER_CLOSE,
					easeOutCubic:   CUBIC_BEZIER_OPEN + '0.215, 0.610, 0.355, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutQuart:   CUBIC_BEZIER_OPEN + '0.165, 0.840, 0.440, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutQuint:   CUBIC_BEZIER_OPEN + '0.230, 1.000, 0.320, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutSine:    CUBIC_BEZIER_OPEN + '0.390, 0.575, 0.565, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutExpo:    CUBIC_BEZIER_OPEN + '0.190, 1.000, 0.220, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutCirc:    CUBIC_BEZIER_OPEN + '0.075, 0.820, 0.165, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutBack:    CUBIC_BEZIER_OPEN + '0.175, 0.885, 0.320, 1.275' + CUBIC_BEZIER_CLOSE,
					easeInOutQuad:  CUBIC_BEZIER_OPEN + '0.455, 0.030, 0.515, 0.955' + CUBIC_BEZIER_CLOSE,
					easeInOutCubic: CUBIC_BEZIER_OPEN + '0.645, 0.045, 0.355, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutQuart: CUBIC_BEZIER_OPEN + '0.770, 0.000, 0.175, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutQuint: CUBIC_BEZIER_OPEN + '0.860, 0.000, 0.070, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutSine:  CUBIC_BEZIER_OPEN + '0.445, 0.050, 0.550, 0.950' + CUBIC_BEZIER_CLOSE,
					easeInOutExpo:  CUBIC_BEZIER_OPEN + '1.000, 0.000, 0.000, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutCirc:  CUBIC_BEZIER_OPEN + '0.785, 0.135, 0.150, 0.860' + CUBIC_BEZIER_CLOSE,
					easeInOutBack:  CUBIC_BEZIER_OPEN + '0.680, -0.550, 0.265, 1.550' + CUBIC_BEZIER_CLOSE
				},
				domProperties = {},
				cssEasing = easings[opt.easing || 'swing'] ? easings[opt.easing || 'swing'] : opt.easing || 'swing';

			// seperate out the properties for the relevant animation functions
			for (var p in prop) {
				if (jQuery.inArray(p, pluginOptions) === -1) {
					var isDirection = jQuery.inArray(p, directions) > -1,
						cleanVal = _interpretValue(self, prop[p], p, (isDirection && prop.avoidTransforms !== true));


					if (_appropriateProperty(p, cleanVal, self)) {
						_applyCSSTransition(
							self,
							p,
							opt.duration,
							cssEasing,
							cleanVal, //isDirection && prop.avoidTransforms === true ? cleanVal + valUnit : cleanVal,
							isDirection && prop.avoidTransforms !== true,
							isTranslatable,
							prop.useTranslate3d);

					}
					else {
						domProperties[p] = prop[p];
					}
				}
			}

			self.unbind(transitionEndEvent);

			var selfCSSData = self.data(DATA_KEY);


			if (selfCSSData && !_isEmptyObject(selfCSSData) && !_isEmptyObject(selfCSSData.secondary)) {
				callbackQueue++;

				self.css(selfCSSData.properties);

				// store in a var to avoid any timing issues, depending on animation duration
				var secondary = selfCSSData.secondary;

				// has to be done in a timeout to ensure transition properties are set
				setTimeout(function() {
					self.bind(transitionEndEvent, cssCallback).css(secondary);
				});
			}
			else {
				// it won't get fired otherwise
				opt.queue = false;
			}

			// fire up DOM based animations
			if (!_isEmptyObject(domProperties)) {
				callbackQueue++;
				originalAnimateMethod.apply(self, [domProperties, {
					duration: opt.duration,
					easing: jQuery.easing[opt.easing] ? opt.easing : (jQuery.easing.swing ? 'swing' : 'linear'),
					complete: propertyCallback,
					queue: opt.queue
				}]);
			}

			// strict JS compliance
			return true;
		});
	};

    jQuery.fn.animate.defaults = {};
  */

	/**
		@public
		@name jQuery.fn.stop
		@function
		@description The enhanced jQuery.stop function (resets transforms to left/top)
		@param {boolean} [clearQueue]
		@param {boolean} [gotoEnd]
		@param {boolean} [leaveTransforms] Leave transforms/translations as they are? Default: false (reset translations to calculated explicit left/top props)
	*/
	jQuery.fn.stop = function(clearQueue, gotoEnd, leaveTransforms) {
		if (!cssTransitionsSupported) return originalStopMethod.apply(this, [clearQueue, gotoEnd]);

		// clear the queue?
		if (clearQueue) this.queue([]);

		// route to appropriate stop methods
		this.each(function() {
			var self = jQuery(this),
				selfCSSData = self.data(DATA_KEY);

			// is this a CSS transition?
			if (selfCSSData && !_isEmptyObject(selfCSSData)) {
				var i, restore = {};

				if (gotoEnd) {
					// grab end state properties
					restore = selfCSSData.secondary;

					if (!leaveTransforms && typeof selfCSSData.meta['left_o'] !== undefined || typeof selfCSSData.meta['top_o'] !== undefined) {
						restore['left'] = typeof selfCSSData.meta['left_o'] !== undefined ? selfCSSData.meta['left_o'] : 'auto';
						restore['top'] = typeof selfCSSData.meta['top_o'] !== undefined ? selfCSSData.meta['top_o'] : 'auto';

						// remove the transformations
						for (i = cssPrefixes.length - 1; i >= 0; i--) {
							restore[cssPrefixes[i]+'transform'] = '';
						}
					}
				} else if (!_isEmptyObject(selfCSSData.secondary)) {
					var cStyle = window.getComputedStyle(self[0], null);
					if (cStyle) {
						// grab current properties
						for (var prop in selfCSSData.secondary) {
							if(selfCSSData.secondary.hasOwnProperty(prop)) {
								prop = prop.replace(rupper, '-$1').toLowerCase();
								restore[prop] = cStyle.getPropertyValue(prop);

								// is this a matrix property? extract left and top and apply
								if (!leaveTransforms && (/matrix/i).test(restore[prop])) {
									var explodedMatrix = restore[prop].replace(/^matrix\(/i, '').split(/, |\)$/g);

									// apply the explicit left/top props
									restore['left'] = (parseFloat(explodedMatrix[4]) + parseFloat(self.css('left')) + valUnit) || 'auto';
									restore['top'] = (parseFloat(explodedMatrix[5]) + parseFloat(self.css('top')) + valUnit) || 'auto';

									// remove the transformations
									for (i = cssPrefixes.length - 1; i >= 0; i--) {
										restore[cssPrefixes[i]+'transform'] = '';
									}
								}
							}
						}
					}
				}

				// Remove transition timing functions
				// Moving to seperate thread (re: Animation reverts when finished in Android - issue #91)
				self.unbind(transitionEndEvent);
				self.
					css(selfCSSData.original).
					css(restore).
					data(DATA_KEY, null);
			}
			else {
				// dom transition
				originalStopMethod.apply(self, [clearQueue, gotoEnd]);
			}
		});

		return this;
	};
})(jQuery, jQuery.fn.animate, jQuery.fn.stop);
/*!
Waypoints - 4.0.0
Copyright  2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
(function() {
  'use strict'

  var keyCounter = 0
  var allWaypoints = {}

  /* http://imakewebthings.com/waypoints/api/waypoint */
  function Waypoint(options) {
    if (!options) {
      throw new Error('No options passed to Waypoint constructor')
    }
    if (!options.element) {
      throw new Error('No element option passed to Waypoint constructor')
    }
    if (!options.handler) {
      throw new Error('No handler option passed to Waypoint constructor')
    }

    this.key = 'waypoint-' + keyCounter
    this.options = Waypoint.Adapter.extend({}, Waypoint.defaults, options)
    this.element = this.options.element
    this.adapter = new Waypoint.Adapter(this.element)
    this.callback = options.handler
    this.axis = this.options.horizontal ? 'horizontal' : 'vertical'
    this.enabled = this.options.enabled
    this.triggerPoint = null
    this.group = Waypoint.Group.findOrCreate({
      name: this.options.group,
      axis: this.axis
    })
    this.context = Waypoint.Context.findOrCreateByElement(this.options.context)

    if (Waypoint.offsetAliases[this.options.offset]) {
      this.options.offset = Waypoint.offsetAliases[this.options.offset]
    }
    this.group.add(this)
    this.context.add(this)
    allWaypoints[this.key] = this
    keyCounter += 1
  }

  /* Private */
  Waypoint.prototype.queueTrigger = function(direction) {
    this.group.queueTrigger(this, direction)
  }

  /* Private */
  Waypoint.prototype.trigger = function(args) {
    if (!this.enabled) {
      return
    }
    if (this.callback) {
      this.callback.apply(this, args)
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/destroy */
  Waypoint.prototype.destroy = function() {
    this.context.remove(this)
    this.group.remove(this)
    delete allWaypoints[this.key]
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/disable */
  Waypoint.prototype.disable = function() {
    this.enabled = false
    return this
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/enable */
  Waypoint.prototype.enable = function() {
    this.context.refresh()
    this.enabled = true
    return this
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/next */
  Waypoint.prototype.next = function() {
    return this.group.next(this)
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/previous */
  Waypoint.prototype.previous = function() {
    return this.group.previous(this)
  }

  /* Private */
  Waypoint.invokeAll = function(method) {
    var allWaypointsArray = []
    for (var waypointKey in allWaypoints) {
      allWaypointsArray.push(allWaypoints[waypointKey])
    }
    for (var i = 0, end = allWaypointsArray.length; i < end; i++) {
      allWaypointsArray[i][method]()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/destroy-all */
  Waypoint.destroyAll = function() {
    Waypoint.invokeAll('destroy')
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/disable-all */
  Waypoint.disableAll = function() {
    Waypoint.invokeAll('disable')
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/enable-all */
  Waypoint.enableAll = function() {
    Waypoint.invokeAll('enable')
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/refresh-all */
  Waypoint.refreshAll = function() {
    Waypoint.Context.refreshAll()
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/viewport-height */
  Waypoint.viewportHeight = function() {
    return window.innerHeight || document.documentElement.clientHeight
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/viewport-width */
  Waypoint.viewportWidth = function() {
    return document.documentElement.clientWidth
  }

  Waypoint.adapters = []

  Waypoint.defaults = {
    context: window,
    continuous: true,
    enabled: true,
    group: 'default',
    horizontal: false,
    offset: 0
  }

  Waypoint.offsetAliases = {
    'bottom-in-view': function() {
      return this.context.innerHeight() - this.adapter.outerHeight()
    },
    'right-in-view': function() {
      return this.context.innerWidth() - this.adapter.outerWidth()
    }
  }

  window.Waypoint = Waypoint
}())
;(function() {
  'use strict'

  function requestAnimationFrameShim(callback) {
    window.setTimeout(callback, 1000 / 60)
  }

  var keyCounter = 0
  var contexts = {}
  var Waypoint = window.Waypoint
  var oldWindowLoad = window.onload

  /* http://imakewebthings.com/waypoints/api/context */
  function Context(element) {
    this.element = element
    this.Adapter = Waypoint.Adapter
    this.adapter = new this.Adapter(element)
    this.key = 'waypoint-context-' + keyCounter
    this.didScroll = false
    this.didResize = false
    this.oldScroll = {
      x: this.adapter.scrollLeft(),
      y: this.adapter.scrollTop()
    }
    this.waypoints = {
      vertical: {},
      horizontal: {}
    }

    element.waypointContextKey = this.key
    contexts[element.waypointContextKey] = this
    keyCounter += 1

    this.createThrottledScrollHandler()
    this.createThrottledResizeHandler()
  }

  /* Private */
  Context.prototype.add = function(waypoint) {
    var axis = waypoint.options.horizontal ? 'horizontal' : 'vertical'
    this.waypoints[axis][waypoint.key] = waypoint
    this.refresh()
  }

  /* Private */
  Context.prototype.checkEmpty = function() {
    var horizontalEmpty = this.Adapter.isEmptyObject(this.waypoints.horizontal)
    var verticalEmpty = this.Adapter.isEmptyObject(this.waypoints.vertical)
    if (horizontalEmpty && verticalEmpty) {
      this.adapter.off('.waypoints')
      delete contexts[this.key]
    }
  }

  /* Private */
  Context.prototype.createThrottledResizeHandler = function() {
    var self = this

    function resizeHandler() {
      self.handleResize()
      self.didResize = false
    }

    this.adapter.on('resize.waypoints', function() {
      if (!self.didResize) {
        self.didResize = true
        Waypoint.requestAnimationFrame(resizeHandler)
      }
    })
  }

  /* Private */
  Context.prototype.createThrottledScrollHandler = function() {
    var self = this
    function scrollHandler() {
      self.handleScroll()
      self.didScroll = false
    }

    this.adapter.on('scroll.waypoints', function() {
      if (!self.didScroll || Waypoint.isTouch) {
        self.didScroll = true
        Waypoint.requestAnimationFrame(scrollHandler)
      }
    })
  }

  /* Private */
  Context.prototype.handleResize = function() {
    Waypoint.Context.refreshAll()
  }

  /* Private */
  Context.prototype.handleScroll = function() {
    var triggeredGroups = {}
    var axes = {
      horizontal: {
        newScroll: this.adapter.scrollLeft(),
        oldScroll: this.oldScroll.x,
        forward: 'right',
        backward: 'left'
      },
      vertical: {
        newScroll: this.adapter.scrollTop(),
        oldScroll: this.oldScroll.y,
        forward: 'down',
        backward: 'up'
      }
    }

    for (var axisKey in axes) {
      var axis = axes[axisKey]
      var isForward = axis.newScroll > axis.oldScroll
      var direction = isForward ? axis.forward : axis.backward

      for (var waypointKey in this.waypoints[axisKey]) {
        var waypoint = this.waypoints[axisKey][waypointKey]
        var wasBeforeTriggerPoint = axis.oldScroll < waypoint.triggerPoint
        var nowAfterTriggerPoint = axis.newScroll >= waypoint.triggerPoint
        var crossedForward = wasBeforeTriggerPoint && nowAfterTriggerPoint
        var crossedBackward = !wasBeforeTriggerPoint && !nowAfterTriggerPoint
        if (crossedForward || crossedBackward) {
          waypoint.queueTrigger(direction)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
      }
    }

    for (var groupKey in triggeredGroups) {
      triggeredGroups[groupKey].flushTriggers()
    }

    this.oldScroll = {
      x: axes.horizontal.newScroll,
      y: axes.vertical.newScroll
    }
  }

  /* Private */
  Context.prototype.innerHeight = function() {
    /*eslint-disable eqeqeq */
    if (this.element == this.element.window) {
      return Waypoint.viewportHeight()
    }
    /*eslint-enable eqeqeq */
    return this.adapter.innerHeight()
  }

  /* Private */
  Context.prototype.remove = function(waypoint) {
    delete this.waypoints[waypoint.axis][waypoint.key]
    this.checkEmpty()
  }

  /* Private */
  Context.prototype.innerWidth = function() {
    /*eslint-disable eqeqeq */
    if (this.element == this.element.window) {
      return Waypoint.viewportWidth()
    }
    /*eslint-enable eqeqeq */
    return this.adapter.innerWidth()
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-destroy */
  Context.prototype.destroy = function() {
    var allWaypoints = []
    for (var axis in this.waypoints) {
      for (var waypointKey in this.waypoints[axis]) {
        allWaypoints.push(this.waypoints[axis][waypointKey])
      }
    }
    for (var i = 0, end = allWaypoints.length; i < end; i++) {
      allWaypoints[i].destroy()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-refresh */
  Context.prototype.refresh = function() {
    /*eslint-disable eqeqeq */
    var isWindow = this.element == this.element.window
    /*eslint-enable eqeqeq */
    var contextOffset = isWindow ? undefined : this.adapter.offset()
    var triggeredGroups = {}
    var axes

    this.handleScroll()
    axes = {
      horizontal: {
        contextOffset: isWindow ? 0 : contextOffset.left,
        contextScroll: isWindow ? 0 : this.oldScroll.x,
        contextDimension: this.innerWidth(),
        oldScroll: this.oldScroll.x,
        forward: 'right',
        backward: 'left',
        offsetProp: 'left'
      },
      vertical: {
        contextOffset: isWindow ? 0 : contextOffset.top,
        contextScroll: isWindow ? 0 : this.oldScroll.y,
        contextDimension: this.innerHeight(),
        oldScroll: this.oldScroll.y,
        forward: 'down',
        backward: 'up',
        offsetProp: 'top'
      }
    }

    for (var axisKey in axes) {
      var axis = axes[axisKey]
      for (var waypointKey in this.waypoints[axisKey]) {
        var waypoint = this.waypoints[axisKey][waypointKey]
        var adjustment = waypoint.options.offset
        var oldTriggerPoint = waypoint.triggerPoint
        var elementOffset = 0
        var freshWaypoint = oldTriggerPoint == null
        var contextModifier, wasBeforeScroll, nowAfterScroll
        var triggeredBackward, triggeredForward

        if (waypoint.element !== waypoint.element.window) {
          elementOffset = waypoint.adapter.offset()[axis.offsetProp]
        }

        if (typeof adjustment === 'function') {
          adjustment = adjustment.apply(waypoint)
        }
        else if (typeof adjustment === 'string') {
          adjustment = parseFloat(adjustment)
          if (waypoint.options.offset.indexOf('%') > - 1) {
            adjustment = Math.ceil(axis.contextDimension * adjustment / 100)
          }
        }

        contextModifier = axis.contextScroll - axis.contextOffset
        waypoint.triggerPoint = elementOffset + contextModifier - adjustment
        wasBeforeScroll = oldTriggerPoint < axis.oldScroll
        nowAfterScroll = waypoint.triggerPoint >= axis.oldScroll
        triggeredBackward = wasBeforeScroll && nowAfterScroll
        triggeredForward = !wasBeforeScroll && !nowAfterScroll

        if (!freshWaypoint && triggeredBackward) {
          waypoint.queueTrigger(axis.backward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
        else if (!freshWaypoint && triggeredForward) {
          waypoint.queueTrigger(axis.forward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
        else if (freshWaypoint && axis.oldScroll >= waypoint.triggerPoint) {
          waypoint.queueTrigger(axis.forward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
      }
    }

    Waypoint.requestAnimationFrame(function() {
      for (var groupKey in triggeredGroups) {
        triggeredGroups[groupKey].flushTriggers()
      }
    })

    return this
  }

  /* Private */
  Context.findOrCreateByElement = function(element) {
    return Context.findByElement(element) || new Context(element)
  }

  /* Private */
  Context.refreshAll = function() {
    for (var contextId in contexts) {
      contexts[contextId].refresh()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-find-by-element */
  Context.findByElement = function(element) {
    return contexts[element.waypointContextKey]
  }

  window.onload = function() {
    if (oldWindowLoad) {
      oldWindowLoad()
    }
    Context.refreshAll()
  }

  Waypoint.requestAnimationFrame = function(callback) {
    var requestFn = window.requestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      requestAnimationFrameShim
    requestFn.call(window, callback)
  }
  Waypoint.Context = Context
}())
;(function() {
  'use strict'

  function byTriggerPoint(a, b) {
    return a.triggerPoint - b.triggerPoint
  }

  function byReverseTriggerPoint(a, b) {
    return b.triggerPoint - a.triggerPoint
  }

  var groups = {
    vertical: {},
    horizontal: {}
  }
  var Waypoint = window.Waypoint

  /* http://imakewebthings.com/waypoints/api/group */
  function Group(options) {
    this.name = options.name
    this.axis = options.axis
    this.id = this.name + '-' + this.axis
    this.waypoints = []
    this.clearTriggerQueues()
    groups[this.axis][this.name] = this
  }

  /* Private */
  Group.prototype.add = function(waypoint) {
    this.waypoints.push(waypoint)
  }

  /* Private */
  Group.prototype.clearTriggerQueues = function() {
    this.triggerQueues = {
      up: [],
      down: [],
      left: [],
      right: []
    }
  }

  /* Private */
  Group.prototype.flushTriggers = function() {
    for (var direction in this.triggerQueues) {
      var waypoints = this.triggerQueues[direction]
      var reverse = direction === 'up' || direction === 'left'
      waypoints.sort(reverse ? byReverseTriggerPoint : byTriggerPoint)
      for (var i = 0, end = waypoints.length; i < end; i += 1) {
        var waypoint = waypoints[i]
        if (waypoint.options.continuous || i === waypoints.length - 1) {
          waypoint.trigger([direction])
        }
      }
    }
    this.clearTriggerQueues()
  }

  /* Private */
  Group.prototype.next = function(waypoint) {
    this.waypoints.sort(byTriggerPoint)
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    var isLast = index === this.waypoints.length - 1
    return isLast ? null : this.waypoints[index + 1]
  }

  /* Private */
  Group.prototype.previous = function(waypoint) {
    this.waypoints.sort(byTriggerPoint)
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    return index ? this.waypoints[index - 1] : null
  }

  /* Private */
  Group.prototype.queueTrigger = function(waypoint, direction) {
    this.triggerQueues[direction].push(waypoint)
  }

  /* Private */
  Group.prototype.remove = function(waypoint) {
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    if (index > -1) {
      this.waypoints.splice(index, 1)
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/first */
  Group.prototype.first = function() {
    return this.waypoints[0]
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/last */
  Group.prototype.last = function() {
    return this.waypoints[this.waypoints.length - 1]
  }

  /* Private */
  Group.findOrCreate = function(options) {
    return groups[options.axis][options.name] || new Group(options)
  }

  Waypoint.Group = Group
}())
;(function() {
  'use strict'

  var $ = window.jQuery
  var Waypoint = window.Waypoint

  function JQueryAdapter(element) {
    this.$element = $(element)
  }

  $.each([
    'innerHeight',
    'innerWidth',
    'off',
    'offset',
    'on',
    'outerHeight',
    'outerWidth',
    'scrollLeft',
    'scrollTop'
  ], function(i, method) {
    JQueryAdapter.prototype[method] = function() {
      var args = Array.prototype.slice.call(arguments)
      return this.$element[method].apply(this.$element, args)
    }
  })

  $.each([
    'extend',
    'inArray',
    'isEmptyObject'
  ], function(i, method) {
    JQueryAdapter[method] = $[method]
  })

  Waypoint.adapters.push({
    name: 'jquery',
    Adapter: JQueryAdapter
  })
  Waypoint.Adapter = JQueryAdapter
}())
;(function() {
  'use strict'

  var Waypoint = window.Waypoint

  function createExtension(framework) {
    return function() {
      var waypoints = []
      var overrides = arguments[0]

      if (framework.isFunction(arguments[0])) {
        overrides = framework.extend({}, arguments[1])
        overrides.handler = arguments[0]
      }

      this.each(function() {
        var options = framework.extend({}, overrides, {
          element: this
        })
        if (typeof options.context === 'string') {
          options.context = framework(this).closest(options.context)[0]
        }
        waypoints.push(new Waypoint(options))
      })

      return waypoints
    }
  }

  if (window.jQuery) {
    window.jQuery.fn.waypoint = createExtension(window.jQuery)
  }
  if (window.Zepto) {
    window.Zepto.fn.waypoint = createExtension(window.Zepto)
  }
}())
;
/*!
Waypoints Inview Shortcut - 4.0.0
Copyright  2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
!function(){"use strict";function t(){}function e(t){this.options=i.Adapter.extend({},e.defaults,t),this.axis=this.options.horizontal?"horizontal":"vertical",this.waypoints=[],this.element=this.options.element,this.createWaypoints()}var i=window.Waypoint;e.prototype.createWaypoints=function(){for(var t={vertical:[{down:"enter",up:"exited",offset:"100%"},{down:"entered",up:"exit",offset:"bottom-in-view"},{down:"exit",up:"entered",offset:0},{down:"exited",up:"enter",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:"enter",left:"exited",offset:"100%"},{right:"entered",left:"exit",offset:"right-in-view"},{right:"exit",left:"entered",offset:0},{right:"exited",left:"enter",offset:function(){return-this.adapter.outerWidth()}}]},e=0,i=t[this.axis].length;i>e;e++){var n=t[this.axis][e];this.createWaypoint(n)}},e.prototype.createWaypoint=function(t){var e=this;this.waypoints.push(new i({context:this.options.context,element:this.options.element,enabled:this.options.enabled,handler:function(t){return function(i){e.options[t[i]].call(e,i)}}(t),offset:t.offset,horizontal:this.options.horizontal}))},e.prototype.destroy=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].destroy();this.waypoints=[]},e.prototype.disable=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].disable()},e.prototype.enable=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].enable()},e.defaults={context:window,enabled:!0,enter:t,entered:t,exit:t,exited:t},i.Inview=e}();
/*!
 * jQuery outside events - v1.1 - 3/16/2010
 * http://benalman.com/projects/jquery-outside-events-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery outside events
//
// *Version: 1.1, Last updated: 3/16/2010*
//
// Project Home - http://benalman.com/projects/jquery-outside-events-plugin/
// GitHub       - http://github.com/cowboy/jquery-outside-events/
// Source       - http://github.com/cowboy/jquery-outside-events/raw/master/jquery.ba-outside-events.js
// (Minified)   - http://github.com/cowboy/jquery-outside-events/raw/master/jquery.ba-outside-events.min.js (0.9kb)
//
// About: License
//
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
//
// About: Examples
//
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
//
// clickoutside - http://benalman.com/code/projects/jquery-outside-events/examples/clickoutside/
// dblclickoutside - http://benalman.com/code/projects/jquery-outside-events/examples/dblclickoutside/
// mouseoveroutside - http://benalman.com/code/projects/jquery-outside-events/examples/mouseoveroutside/
// focusoutside - http://benalman.com/code/projects/jquery-outside-events/examples/focusoutside/
//
// About: Support and Testing
//
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
//
// jQuery Versions - 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.6, Safari 3-4, Chrome, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-outside-events/unit/
//
// About: Release History
//
// 1.1 - (3/16/2010) Made "clickoutside" plugin more general, resulting in a
//       whole new plugin with more than a dozen default "outside" events and
//       a method that can be used to add new ones.
// 1.0 - (2/27/2010) Initial release
//
// Topic: Default "outside" events
//
// Note that each "outside" event is powered by an "originating" event. Only
// when the originating event is triggered on an element outside the element
// to which that outside event is bound will the bound event be triggered.
//
// Because each outside event is powered by a separate originating event,
// stopping propagation of that originating event will prevent its related
// outside event from triggering.
//
//  OUTSIDE EVENT     - ORIGINATING EVENT
//  clickoutside      - click
//  dblclickoutside   - dblclick
//  focusoutside      - focusin
//  bluroutside       - focusout
//  mousemoveoutside  - mousemove
//  mousedownoutside  - mousedown
//  mouseupoutside    - mouseup
//  mouseoveroutside  - mouseover
//  mouseoutoutside   - mouseout
//  keydownoutside    - keydown
//  keypressoutside   - keypress
//  keyupoutside      - keyup
//  changeoutside     - change
//  selectoutside     - select
//  submitoutside     - submit
//  touchstartoutside - touchstart
//  touchendoutside   - touchend

(function($,doc,outside){
  '$:nomunge'; // Used by YUI compressor.

  $.map(
    // All these events will get an "outside" event counterpart by default.
    'click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup touchstart touchend'.split(' '),
    function( event_name ) { jq_addOutsideEvent( event_name ); }
  );

  // The focus and blur events are really focusin and focusout when it comes
  // to delegation, so they are a special case.
  jq_addOutsideEvent( 'focusin',  'focus' + outside );
  jq_addOutsideEvent( 'focusout', 'blur' + outside );

  // Method: jQuery.addOutsideEvent
  //
  // Register a new "outside" event to be with this method. Adding an outside
  // event that already exists will probably blow things up, so check the
  // <Default "outside" events> list before trying to add a new one.
  //
  // Usage:
  //
  // > jQuery.addOutsideEvent( event_name [, outside_event_name ] );
  //
  // Arguments:
  //
  //  event_name - (String) The name of the originating event that the new
  //    "outside" event will be powered by. This event can be a native or
  //    custom event, as long as it bubbles up the DOM tree.
  //  outside_event_name - (String) An optional name for the new "outside"
  //    event. If omitted, the outside event will be named whatever the
  //    value of `event_name` is plus the "outside" suffix.
  //
  // Returns:
  //
  //  Nothing.

  $.addOutsideEvent = jq_addOutsideEvent;

  function jq_addOutsideEvent( event_name, outside_event_name ) {

    // The "outside" event name.
    outside_event_name = outside_event_name || event_name + outside;

    // A jQuery object containing all elements to which the "outside" event is
    // bound.
    var elems = $(),

      // The "originating" event, namespaced for easy unbinding.
      event_namespaced = event_name + '.' + outside_event_name + '-special-event';

    // Event: outside events
    //
    // An "outside" event is triggered on an element when its corresponding
    // "originating" event is triggered on an element outside the element in
    // question. See the <Default "outside" events> list for more information.
    //
    // Usage:
    //
    // > jQuery('selector').bind( 'clickoutside', function(event) {
    // >   var clicked_elem = $(event.target);
    // >   ...
    // > });
    //
    // > jQuery('selector').bind( 'dblclickoutside', function(event) {
    // >   var double_clicked_elem = $(event.target);
    // >   ...
    // > });
    //
    // > jQuery('selector').bind( 'mouseoveroutside', function(event) {
    // >   var moused_over_elem = $(event.target);
    // >   ...
    // > });
    //
    // > jQuery('selector').bind( 'focusoutside', function(event) {
    // >   var focused_elem = $(event.target);
    // >   ...
    // > });
    //
    // You get the idea, right?

    $.event.special[ outside_event_name ] = {

      // Called only when the first "outside" event callback is bound per
      // element.
      setup: function(){

        // Add this element to the list of elements to which this "outside"
        // event is bound.
        elems = elems.add( this );

        // If this is the first element getting the event bound, bind a handler
        // to document to catch all corresponding "originating" events.
        if ( elems.length === 1 ) {
          $(doc).bind( event_namespaced, handle_event );
        }
      },

      // Called only when the last "outside" event callback is unbound per
      // element.
      teardown: function(){

        // Remove this element from the list of elements to which this
        // "outside" event is bound.
        elems = elems.not( this );

        // If this is the last element removed, remove the "originating" event
        // handler on document that powers this "outside" event.
        if ( elems.length === 0 ) {
          $(doc).unbind( event_namespaced );
        }
      },

      // Called every time a "outside" event callback is bound to an element.
      add: function( handleObj ) {
        var old_handler = handleObj.handler;

        // This function is executed every time the event is triggered. This is
        // used to override the default event.target reference with one that is
        // more useful.
        handleObj.handler = function( event, elem ) {

          // Set the event object's .target property to the element that the
          // user interacted with, not the element that the "outside" event was
          // was triggered on.
          event.target = elem;

          // Execute the actual bound handler.
          old_handler.apply( this, arguments );
        };
      }
    };

    // When the "originating" event is triggered..
    function handle_event( event ) {

      // Iterate over all elements to which this "outside" event is bound.
      $(elems).each(function(){
        var elem = $(this);

        // If this element isn't the element on which the event was triggered,
        // and this element doesn't contain said element, then said element is
        // considered to be outside, and the "outside" event will be triggered!
        if ( this !== event.target && !elem.has(event.target).length ) {

          // Use triggerHandler instead of trigger so that the "outside" event
          // doesn't bubble. Pass in the "originating" event's .target so that
          // the "outside" event.target can be overridden with something more
          // meaningful.
          elem.triggerHandler( outside_event_name, [ event.target ] );
        }
      });
    };

  };

})(jQuery,document,"outside");

/*!
 * samsung.com - Phase2 - Javascript Namespace Defined
 * src : js/src/smg/aem/namespace.js
 *
 * @version 1.0.0
 * @since 2016.02.01
 */
;(function(win) {
	'use strict';

	if('undefined' === typeof win.smg) {
		/**
		 * samsung.com namespace
		 * @name  window.smg
		 * @namespace
		 */
		win.smg = {};
	}

	/**
	 * Phase2 AEM Namespace
	 * @name  window.smg.aem
	 * @namespace
	 */
	win.smg.aem = win.smg.aem || {};

	/**
	 * Phase2 AEM Static Values Defined
	 */
	win.smg.aem.varStatic = win.smg.aem.varStatic || {};

	/**
	 * Phase2 AEM Custom Events Defined
	 */
	win.smg.aem.customEvent = win.smg.aem.customEvent || {};

	/**
	 * Phase2 AEM Utility Script Defined
	 */
	win.smg.aem.util = win.smg.aem.util || {};

	/**
	 * Phase2 AEM Common Script Defined
	 */
	win.smg.aem.common = win.smg.aem.common || {};

	/**
	 * Phase2 AEM Components Namespace
	 * @name  window.smg.aem.components
	 * @namespace
	 */
	win.smg.aem.components = win.smg.aem.components || {};

	/**
	 * Phase2 Home Components Namespace
	 * @name  window.smg.aem.components.home
	 * @namespace
	 */
	win.smg.aem.components.home = win.smg.aem.components.home || {};

	/**
	 * Phase2 AboutSamsung Components Namespace
	 * @name  window.smg.aem.components.aboutsamsung
	 * @namespace
	 */
	win.smg.aem.components.aboutsamsung = win.smg.aem.components.aboutsamsung || {};

	/**
	 * Phase2 AEM Templates Namespace
	 * @name  window.smg.aem.templates
	 * @namespace
	 */
	win.smg.aem.templates = win.smg.aem.templates || {};

	/**
	 * Phase2 Home Templates Namespace
	 * @name  window.smg.aem.templates.home
	 * @namespace
	 */
	win.smg.aem.templates.home = win.smg.aem.templates.home || {};
})(window);
/*!
 * samsung.com - Phase2 - Utility Script Defined
 * src : js/src/smg/aem/static/smg.aem.util.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
    'use strict';

    if('undefined' === typeof win.smg) {
        win.smg = {};
    }

    if('undefined' === typeof win.smg.aem) {
        win.smg.aem = {};
    }

    if('undefined' === typeof win.smg.aem.util) {
        win.smg.aem.util = {};
    }

    var hasOwnProperty = Object.prototype.hasOwnProperty,
        doc = win.document;

    // window safari check
    (function(){
        var anNetscape = (navigator.appName == "Netscape"),
            avMac = (navigator.appVersion.indexOf("Mac") != -1),
            uaSafari = (navigator.userAgent.indexOf("Safari") != -1),
            uaChrome = (navigator.userAgent.indexOf("Chrome") != -1);
        win.isPcSafari = ( anNetscape && !avMac && uaSafari && !uaChrome ) ? true : false;
    })();

    /**
     * @name window.smg.aem.util
     * @namespace
     * @requires jQuery
     * @requires namespace.js
     */
    win.smg.aem.util = (function() {
        return {
            isArray : function(arr) {
                return 'array' === $.type(arr);
            },
            def : function(org, src) {
                for (var prop in src) {
                    if (!hasOwnProperty.call(src, prop)) continue;
                    if ('object' === $.type(org[prop])) {
                        org[prop] = (this.isArray(org[prop]) ? src[prop].slice(0) : this.def(org[prop], src[prop]));
                    } else {
                        org[prop] = src[prop];
                    }
                }
                return org;
            },
            winSize : function() {
                var win_wh = {
                    w : (!win.isPcSafari) ? win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth : $(win).width(),
                    h : (!win.isPcSafari) ? win.innerHeight || doc.documentElement.clientHeight || doc.body.clientHeight : $(win).height()
                };
                return win_wh;
            },
            getQueryStr : function(href) {
                href = href || win.location.href;

                var vars = {};
                href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                    vars[key] = value;
                });
                return vars;
            },
            winOpener : function(args) {
                var defParams =   {
                    url 		: 'http://www.samsung.com',
                    name 		: 'smg_opener_' + new Date().getTime(),
                    width 		: 400,
                    height 		: 400,
                    left 		: null,
                    top 		: null,
                    scrollbars	: 'no',
                    toolbar 	: 'no',
                    location 	: 'no',
                    directories : 'no',
                    status 		: 'no',
                    menubar 	: 'no',
                    resizable 	: 'no'
                }, opener, setting, options;

                options 		= win.smg.util.def(defParams, (args || {}));
                options.left 	= options.left || ( screen.width / 2 - options.width / 2 );
                options.top 	= options.top || ( screen.height / 2 - options.height / 2 );
                setting = '';

                for( var prop in options ) {
                    if( prop != 'url' && prop != 'name' ) {
                        setting += ',' + prop + '=' + options[ prop ];
                    }
                }
                setting = setting.substr( 1, setting.length );
                opener = window.open( options.url, options.name, setting );
                return opener;
            },
            imgLoader : function(img, callback) {
                img.each(function() {
                    var cb = (callback || function() {});
					/*for IE 10-*/
                    if (this.complete || $(this).height() > 0) {
                        cb.apply(img);
                    } else {
                        $(this).load(function() {
                            cb.apply(img);
                        });
                    }
                });
            },
            vwOrientationUpdate : function(css) {
                $(win).on('orientationchange', function() {
                    var vwElem = $(css || '.js-vw');
                    if (!vwElem.size()) {
                        return;
                    }
                    vwElem.css('display', 'none').height();
                    vwElem.css('display', '');
                });
            },
            iPadVWRender : function() {
                if (navigator.userAgent.match(/iPad/i)) {
                    this.vwOrientationUpdate('.js-vw');
                }
            },
            Cookie : function() {
                var defParams = {
                    expires : '', path: '/', domain : '', secure : ''
                };

                return {
                    setCookie : function(cname, cvalue, exdays) {
                        var d = new Date();
                        d.setTime(d.getTime() + ((exdays || 0) * 24 * 60 * 60 * 1000));

                        var opt = win.smg.aem.util.def(defParams, { expires : d });
                        document.cookie = [
                            cname, '=', cvalue,
                            opt.expires ? '; expires=' + opt.expires.toUTCString() : '',
                            opt.path    ? '; path=' + opt.path : '',
                            opt.domain  ? '; domain=' + opt.domain : '',
                            opt.secure  ? '; secure' : ''
                        ].join('');
                    },
                    getCookie : function(cname) {
                        var name = cname + '=',
                            ca = document.cookie.split(';'),
                            c;

                        for(var i=0, leng=ca.length; i<leng; i++) {
                            c = ca[i];
                            while (c.charAt(0)==' ') {
                                c = c.substring(1);
                            }
                            if (c.indexOf(name) != -1) {
                                return c.substring(name.length,c.length);
                            }
                        }
                        return '';
                    }
                };
            },
            loadCSS : function(urls, cb, nocache) {
                if (!urls || 'string' === $.type(urls)) urls = [urls];

                var head = $('head'), dfds = [];
                $.map(urls, function(url) {
                    var _dfd = $.Deferred();
                    dfds.push(_dfd);
                    $('<link>').attr({
                        'rel' : 'stylesheet', type : 'text/css',
                        href : url + (!!nocache ? '?_ts=' + new Date().getTime() : '')
                    }).appendTo(head).load(function() {
                        _dfd.resolve();
                    });
                });

                $.when.apply($, dfds).done(function() {
                    if ($.isFunction(cb)) cb();
                });
            },
            getServerTime : function(callBack, serverUrl) {
                serverUrl = serverUrl || window.location.href.toString();
                callBack = callBack || function() {};

                $.ajax({
                    url : serverUrl,
                    async : false,
                    cashe : false
                })
                    .done(function(res, status, xhr) {
                        callBack(new Date(xhr.getResponseHeader('Date')));
                    });
            },
            getRestrictBytes : function(str, maxBytes) {
                var strLeng = str.length,
                    rByte = 0,
                    rLen = 0,
                    strChar = '';

                maxBytes = maxBytes || 100;

                for (var i=0; i<strLeng; i++) {
                    strChar = str.charAt(i);
                    if (escape(strChar).length > 4) {
                        rByte += 2;
                    } else {
                        rByte++;
                    }

                    if(rByte <= maxBytes) {
                        rLen = i+1;
                    }
                }

                return {
                    bytes : rByte,
                    rectLeng : rLen
                }
            },
            isAemEditMode : function() {
                var flag = false;
                if (win.parent && win.frameElement && $(win.parent.document).find('.foundation-authoring-ui-mode').size()) {
                    flag = true;
                }
                return flag;
            },
            slickOptionControlFuncs : {
                changeOpt : function(targetCarousel, targetOpt, eachDataTarget) {
                    var dataSlickOpt = targetCarousel.data('slick-opt');
                    if (dataSlickOpt !== undefined) {
                        var changeOpt = $.extend(true, {}, targetOpt),
                        autoSlide = dataSlickOpt.autoSlideOpts.autoSlide,
                        autoSlideTime = dataSlickOpt.autoSlideOpts.autoSlideTime,
                        isInfinite = dataSlickOpt.infinite;

                        changeOpt.autoplay = autoSlide;
                        changeOpt.autoplaySpeed = autoSlideTime;
                        changeOpt.infinite = isInfinite;

                        if (targetOpt.responsive) {
                            changeOpt.responsive[0].settings.infinite = isInfinite;
                        }
                        
                        targetCarousel.data('isAutoSlide', autoSlide);
                        if (eachDataTarget !== undefined) {
                            eachDataTarget.data('isAutoSlide', autoSlide);
                        }
                        return changeOpt;
                    } else {
                        return targetOpt;
                    }
                },
                setToggleButton: function(targetCarousel) {
                    var isAutoSlide = targetCarousel.data('isAutoSlide');
                    targetCarousel = (targetCarousel.hasClass('s-slick')) ? targetCarousel : targetCarousel.find('.s-slick');
                    if (isAutoSlide === undefined || isAutoSlide === false) {return;}
                    if (!targetCarousel.find('.slick-dots').length && !targetCarousel.siblings('.s-slick-dots').find('.slick-dots').length) {return;}
                    var dotsStr = '';
                    var toggleBtnWrap;
                    var dotsAppendEl;
                    var appendType;

                    if (isAutoSlide) {
                        dotsStr += '<li class="slick-dots-autoplay">';
                        dotsStr += '<button class="s-autoplay-pause">Auto Play</button>';
                        dotsStr += '</li>';
                    } else {
                        dotsStr += '<li class="slick-dots-autoplay">';
                        dotsStr += '<button class="s-autoplay-play">Auto Play</button>';
                        dotsStr += '</li>';
                    }

                    if (targetCarousel.find('.slick-dots').length) {
                        dotsAppendEl = targetCarousel.find('.slick-dots');
                        appendType = 'smg';
                    } else if (targetCarousel.siblings('.s-slick-dots').length) {
                        dotsAppendEl = targetCarousel.siblings('.s-slick-dots').find('.slick-dots');
                        appendType = 'cl';
                    }

                    if (dotsAppendEl.length) {
                        dotsAppendEl.append($(dotsStr));
                        toggleBtnWrap = dotsAppendEl.find('.slick-dots-autoplay');
                    }

                    var getToggleButtonStatus = function(toggleBtn) {
                        if (toggleBtn.hasClass('s-autoplay-pause')) {
                            targetCarousel.slick('slickPlay');
                        } else {
                            targetCarousel.slick('slickPause');
                        }
                    };

                    var autoSlideToggleHandler = function(e) {
                        var toggleBtn = $(e.currentTarget).find('> button');
                        if (toggleBtn.hasClass('s-autoplay-pause')) {
                            toggleBtn.removeClass('s-autoplay-pause');
                            toggleBtn.addClass('s-autoplay-play');
                            targetCarousel.slick('slickPause');
                        } else {
                            toggleBtn.removeClass('s-autoplay-play');
                            toggleBtn.addClass('s-autoplay-pause');
                            targetCarousel.slick('slickPlay');
                        }
                    };

                    var bindToggleClickEvent = function() {
                        toggleBtnWrap.off('click.smgaemutil').on('click.smgaemutil', autoSlideToggleHandler);
                    };
            
                    var breakpointChangeHandler = function(e) {
                        var target = targetCarousel.data('detachedButton');
                        var appendType = targetCarousel.data('appendType');
                        
                        if (appendType === 'smg') {
                            targetCarousel.find('.slick-dots').append(target);
                        } else if (appendType === 'cl') {
                            targetCarousel.siblings('.s-slick-dots').find('.slick-dots').append(target);
                        }
                        
                        bindToggleClickEvent();
                        getToggleButtonStatus(target.find('> button'));
                    };

                    targetCarousel.data('detachedButton', toggleBtnWrap);
                    targetCarousel.data('appendType', appendType);
                    targetCarousel.off('breakpoint.smgaemutil').on('breakpoint.smgaemutil', breakpointChangeHandler);
                    bindToggleClickEvent();
                }
            }
        };
    })();

    win.smg.aem.util.cookie = new win.smg.aem.util.Cookie();

    $(function() {
        win.smg.aem.util.iPadVWRender();
    });
})(window, window.jQuery);

/*!
 * samsung.com - Phase2 - Static Values Defined
 * src : js/src/smg/aem/static/smg.aem.static.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.varStatic) {
		win.smg.aem.varStatic = {};
	}

	/**
	 * @name window.smg.aem.varStatic
	 * @namespace
	 * @requires namespace.js
	 */
	win.smg.aem.varStatic = {
		CSS : {
			VIDEO_OPEN : 'video-open',

			SEARCH_POS : 'search-pos',
			NAV_OPEN : 'nav-open',
			NAV_CLOSE : 'nav-close',

			HAS_ANIMATED : 'has-animated',

			IS_SHOW : 'is-show',
			IS_HIDE : 'is-hide',
			IS_OPEN : 'is-open',
			IS_SELECT : 'is-select',

			JS_IMG_SRC : 'js-img-src',
			JS_IMG_LAZY : 'js-img-lazy',
			JS_IMG_LAZY_LOADED : 'js-img-lazy-loaded',

			LAZY_LOADED : 'lazy-loaded',

			SWITCH_MOBILE : 'switch-mobile',
			SWITCH_TABLET : 'switch-tablet'
		},
		DATA_ATTR : {
			SRC_PC : 'data-src-pc',
			SRC_MOBILE : 'data-src-mobile',
			DATA_SRC : 'data-src'
		},
		SUPPORT : {
			NO_SVG : 'no-svg',
			NO_CSS3 : 'no-css3',
			IE_LT_8 : 'lt-ie8',
			COOKIE_WARNING : 'cookie-warning',
			TOUCH_DEVICE : 'touch-device'
		},
		RESPONSIVE : {
			DESKTOP : {
				NAME : 'desktop'
			},
			TABLET : {
				NAME : 'tablet',
				WIDTH : 1280
			},
			MOBILE : {
				NAME : 'mobile',
				WIDTH : 768
			},
			MIN_MOBILE : {
				NAME : 'min_mobile',
				WIDTH : 320
			},
			GNB : {
				NAME : 'gnb_reponsive',
				WIDTH : 1024
			}
		},
		BACKTOTOP : {
			TOP_POSITION : 'top_position'
		}
	};

})(window);

/*!
 * samsung.com - Phase2 - Custom Events Defined
 * src : js/src/smg/aem/event/smg.aem.event.js
 *
 * @version 1.0.0
 * @since 2016.10.10
 */
;(function(win) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.customEvent) {
		win.smg.aem.customEvent = {};
	}

	/**
	 * @name window.smg.aem.customEvent
	 * @namespace
	 * @requires namespace.js
	 */
	win.smg.aem.customEvent = {
		CONNECT : {},
		VIDEO : {
			PLAY : 'AEM_VIDEO_PLAY',
			CLOSE : 'AEM_VIDEO_CLOSE'
		},
		RESPONSIVE : {
			GET_STATUS : 'AEM_RESPONSIVE_GET_STATUS',
			CHANGE : 'AEM_RESPONSIVE_CHANGE'
		},
		BACKTOTOP : {
			POSITION_CHANGE : 'AEM_POSITION_CHANGE'
		}
	};

})(window);

/*!
 * samsung.com - Phase2 - Common Script Defined
 * src : js/src/smg/aem/common/smg.aem.common.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.common) {
		win.smg.aem.common = {};
	}

	// Static Values
	var V_STATIC = win.smg.aem.varStatic,
	// Utility Script
	UTIL = win.smg.aem.util,
	// Custom Events
	CST_EVENT = win.smg.aem.customEvent;

	/**
	 * @name window.smg.aem.common
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 * @requires window.smg.aem.static.js
	 * @requires window.smg.aem.util.js
	 * @requires window.smg.aem.event.js
	 */
	win.smg.aem.common = (function() {
		return {
			init : function() {
				this.detection();

				this.responsiveName = '';
				this.responsiveNameEx = '';
				this.responsiveGNB = '';
				this.responsiveGNBEx = '';


				$('body').on(CST_EVENT.RESPONSIVE.GET_STATUS, $.proxy(this.resizeListener, this));
				$(win).on('resize', $.proxy(this.resizeListener, this));
				this.resizeListener();

				this.skipNavgation =  $(".s-skip-content").children();
				this.skipNavgation.on('click', $.proxy(this.skipNavgationFunc, this));

				return this;
			},
			detection : function() {
				// SVG Support Check
				if (!document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image', '1.1')) {
					$('body').addClass(V_STATIC.SUPPORT.NO_SVG);
				}

				// IE lt 8 Check
				if (document.all && !document.addEventListener) {
					$('body').addClass(V_STATIC.SUPPORT.IE_LT_8);
				}

				// CSS3 Support Check
				var thisBody = document.body || document.documentElement,
				thisStyle = thisBody.style,
				css3support = thisStyle.transition !== undefined || thisStyle.WebkitTransition !== undefined || thisStyle.MozTransition !== undefined || thisStyle.MsTransition !== undefined || thisStyle.OTransition !== undefined;
				if (!css3support) {
					$('body').addClass(V_STATIC.SUPPORT.NO_CSS3);
				}

				// Touch Support Check
				var supportsTouch = (('ontouchstart' in window) || (navigator.MaxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0));
				if (supportsTouch) {
					$('body').addClass(V_STATIC.SUPPORT.TOUCH_DEVICE);
				}
			},
			resizeListener : function(e) {
				var winWidth = UTIL.winSize().w;

				if (winWidth <= V_STATIC.RESPONSIVE.MOBILE.WIDTH) {
					this.responsiveName = V_STATIC.RESPONSIVE.MOBILE.NAME;
				} else if (winWidth <= V_STATIC.RESPONSIVE.TABLET.WIDTH) {
					this.responsiveName = V_STATIC.RESPONSIVE.TABLET.NAME;
				} else {
					this.responsiveName = V_STATIC.RESPONSIVE.DESKTOP.NAME;
				}

				if (winWidth <= V_STATIC.RESPONSIVE.GNB.WIDTH) {
					this.responsiveGNB = V_STATIC.RESPONSIVE.GNB.NAME;
				} else {
					this.responsiveGNB = '';
				}

				if (this.responsiveName !== this.responsiveNameEx || this.responsiveGNB !== this.responsiveGNBEx) {
					this.responsiveNameEx = this.responsiveName;
					this.responsiveGNBEx = this.responsiveGNB;
					$('body').trigger(CST_EVENT.RESPONSIVE.CHANGE, { RESPONSIVE_NAME : this.responsiveName, RESPONSIVE_GNB_NAME : this.responsiveGNB, isMobile : winWidth <= V_STATIC.RESPONSIVE.MOBILE.WIDTH });
				}

				if (e && e.type === CST_EVENT.RESPONSIVE.GET_STATUS) {
					$('body').trigger(CST_EVENT.RESPONSIVE.CHANGE, { RESPONSIVE_NAME : this.responsiveName, RESPONSIVE_GNB_NAME : this.responsiveGNB, isMobile : winWidth <= V_STATIC.RESPONSIVE.MOBILE.WIDTH });
				}
			},
			skipNavgationFunc : function(e) {
				e.preventDefault();
				var targetObjectSelector = $(e.currentTarget).attr("href");
				if (targetObjectSelector == '#accHelp') {
					$(targetObjectSelector).focus();
				}else{
					$(targetObjectSelector).attr('tabindex', -1).focus().removeAttr('tabindex','');
				}
			}
		};
	})();

	var common;
	$(function() {
		common = win.smg.aem.common.init();
	});

	// confrict samsung.min.js - resize
	$(win).on('resize', function(e) {
		if (!common || !common.resizeListener) return;
		common.resizeListener.call(common, e);
	});
})(window, window.jQuery);

/*!
 * samsung.com - Phase2 - Accessibility Checkbox Script
 * src : js/src/smg/aem/accessibility/placehoder/smg.aem.acc.checkbox.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.accessibility) {
		win.smg.aem.accessibility = {};
	}

	// Utility Script
	var UTIL = win.smg.aem.util;

	var namespace = win.smg.aem.accessibility;

	/**
	 * @name window.smg.aem.accessibility.checkbox
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 * @requires window.smg.aem.static.js
	 * @requires window.smg.aem.util.js
	 * @requires window.smg.aem.event.js
	 */
	namespace.checkbox = (function() {
		/**
		 * @description Default Options
		 * @private
		 * @type {Object}
		 */
		var defParams = {
			targets : '[data-accessibility=\'checkbox\']',
			targetsValue : 'data-acc-checkbox-value',
			holder : 'data-acc-checkbox',
			holderTarget : 'data-acc-checkbox-target',
			onClass : 'data-acc-onclass'
		};
		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;

				this.opts = UTIL.def(defParams, (args || {}));

				this.setElements();
				this.setBindEvents();
			},
			setElements : function() {
				this.targets = this.container.find(this.opts.targets);
				this.holders = $('[' + this.opts.holder + ']');

				$.each(this.targets, $.proxy(function(idx, elm) {
					$(elm).attr(this.opts.targetsValue, $(elm).attr('checked'));
				}, this));
			},
			setBindEvents : function() {
				this.holders.on('click', $.proxy(this.onHolderClick, this));
				this.targets.on('change', $.proxy(this.onTargetChange, this));
			},
			unElements : function() {
				var target,
				targetInfo;
				$.each(this.targets, $.proxy(function(idx, elm) {
					target = $(elm);
					targetInfo = this.getTargetInfo(target);

					target.removeAttr('checked', 'checked');
					target.prop('checked', false);
					if (targetInfo.onClass) {
						targetInfo.holder.removeClass(targetInfo.onClass);
					}
				}, this));
				this.targets = [];
				this.holders = [];
			},
			unBindEvents : function() {
				this.holders.off('click', $.proxy(this.onHolderClick, this));
				this.targets.off('change', $.proxy(this.onTargetChange, this));
			},
			onHolderClick : function(e) {
				var target = $(e.currentTarget);
				target = $('[' + this.opts.holderTarget + '=\'' + target.attr(this.opts.holder) + '\']');

				if (target.size()) {
					target.trigger('click').focus();
				}
			},
			onTargetChange : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass,
				isChecked = target.attr('checked');

				if (!isChecked) {
					target.attr('checked', 'checked');
					target.prop('checked', true);
					if (onClass) {
						holder.addClass(onClass);
					}
				} else {
					target.removeAttr('checked', 'checked');
					target.prop('checked', false);
					if (onClass) {
						holder.removeClass(onClass);
					}
				}
			},
			getTargetInfo : function(target) {
				target = $('[' + this.opts.holder + '=\'' + target.attr(this.opts.holderTarget) + '\']');

				if (target.size()) {
					return { holder : target, onClass : target.attr(this.opts.onClass) };
				}
				return { holder : '', onClass : '' };
			},
			destroy: function() {
				this.unBindEvents();
				this.unElements();
			},
			refresh : function(container, args) {
				container = container || this.container;

				this.destroy();
				this.init(container, args);
			}
		};
	})();

	$(function() {
		namespace.checkbox.init($('body'));
	});

})(window, window.jQuery);
/*!
 * samsung.com - Phase2 - Accessibility Placeholder Script
 * src : js/src/smg/aem/accessibility/placehoder/smg.aem.acc.placeholder.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.accessibility) {
		win.smg.aem.accessibility = {};
	}

	// Utility Script
	var UTIL = win.smg.aem.util;

	var namespace = win.smg.aem.accessibility;

	/**
	 * @name window.smg.aem.accessibility.placeholder
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 * @requires window.smg.aem.static.js
	 * @requires window.smg.aem.util.js
	 * @requires window.smg.aem.event.js
	 */
	namespace.placeholder = (function() {
		/**
		 * @description Default Options
		 * @private
		 * @type {Object}
		 */
		var defParams = {
			targets : '[data-accessibility=\'placeholder\']',
			targetsValue : 'data-acc-placeholder-value',
			holder : 'data-acc-placeholder',
			holderTarget : 'data-acc-placeholder-target',
			onClass : 'data-acc-onclass'
		};
		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;

				this.opts = UTIL.def(defParams, (args || {}));

				this.setElements();
				this.setBindEvents();
			},
			setElements : function() {
				this.targets = this.container.find(this.opts.targets);

				$.each(this.targets, $.proxy(function(idx, elm) {
					$(elm).attr(this.opts.targetsValue, $(elm).val());
				}, this));
			},
			setBindEvents : function() {
				this.targets.on('focus', $.proxy(this.onTargetsFocus, this))
							.on('blur', $.proxy(this.onTargetsBlur, this))
							.on('keydown keyup', $.proxy(this.onTargetsChange, this));
			},
			unElements : function() {
				$.each(this.targets, $.proxy(function(idx, elm) {
					$(elm).val($(elm).attr(this.opts.targetsValue));
				}, this));

				var target,
				targetInfo;
				$.each($('[' + this.opts.holder + ']'), $.proxy(function(idx, elm) {
					target = $(elm);
					targetInfo = this.getTargetInfo(target);

					if (targetInfo.onClass) {
						target.removeClass(targetInfo.onClass);
					} else {
						target.show();
					}
				}, this));

				this.targets = [];
			},
			unBindEvents : function() {
				this.targets.off('focus', $.proxy(this.onTargetsFocus, this))
							.off('blur', $.proxy(this.onTargetsBlur, this));
			},
			onTargetsFocus : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass;

				if (!holder) {
					return;
				}

				if (target.val()) {
					if (onClass) {
						holder.addClass(onClass);
					} else {
						holder.css({ 'visibility' : 'hidden' });
					}
				}
			},
			onTargetsBlur : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass;

				if (!holder) {
					return;
				}

				if (!target.val()) {
					if (onClass) {
						holder.removeClass(onClass);
					} else {
						holder.css({ 'visibility' : 'visible' });
					}
				}
			},
			onTargetsChange : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass;

				if (!holder) {
					return;
				}

				if (target.val()) {
					if (onClass) {
						holder.addClass(onClass);
					} else {
						holder.css({ 'visibility' : 'hidden' });
					}
				} else {
					if (onClass) {
						holder.removeClass(onClass);
					} else {
						holder.css({ 'visibility' : 'visible' });
					}
				}
			},
			getTargetInfo : function(target) {
				target = $('[' + this.opts.holder + '=\'' + target.attr(this.opts.holderTarget) + '\']');

				if (target.size()) {
					return { holder : target, onClass : target.attr(this.opts.onClass) };
				}
				return { holder : '', onClass : '' };
			},
			destroy: function() {
				this.unBindEvents();
				this.unElements();
			},
			refresh : function(container, args) {
				container = container || this.container;

				this.destroy();
				this.init(container, args);
			}
		};
	})();

	$(function() {
		namespace.placeholder.init($('body'));
	});

})(window, window.jQuery);
/*!
 * samsung.com - Phase2 - Product Templates
 * src : js/src/smg/aem/templates/product/product-backtotop.js
 *
 * @version 1.0.0
 * @since 2016.10.10
 */
;(function (win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.templates) {
		win.smg.aem.templates = {};
	}

	if('undefined' === typeof win.smg.aem.templates.product) {
		win.smg.aem.templates.product = {};
	}

	// V_STATIC Values
	var V_STATIC = win.smg.aem.varStatic,
	// Utility Script
	UTIL = win.smg.aem.util,
	// Custom Events
	CST_EVENT = win.smg.aem.customEvent;

	var namespace = win.smg.aem.templates.product;

	/**
	 * @name window.smg.aem.templates.product.details
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 */
	namespace.backtotop = (function() {
		/**
		 * @description Default Options
		 * @private
		 * @type {Object}
		 */
		var defParams = {
			topBtn : {
				wrap : '.s-gotop-wrap',
				btn : '.s-btn-gotop',
				onClass : 's-show',
				speed : 1000
			},
			footer : {
				target : '#footer'
			}
		};
		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;

				this.opts = UTIL.def(defParams, (args || {}));
				this.setElements();
				this.onBindEvent();
				this.defSetup();
			},
			setElements : function() {
				this.htmlBody = $('html, body');
				this.footer = $(this.opts.footer.target);
				this.topBtnWrap = this.container.find(this.opts.topBtn.wrap);
				this.topBtn = this.topBtnWrap.find(this.opts.topBtn.btn);
			},
			onBindEvent : function() {
				this.topBtn.on('click', $.proxy(this.onTopBtnClick, this));

				$(win).on('scroll touchmove', $.proxy(this.onScrollListener, this));
				this.onScrollListener();

				$(CST_EVENT.CONNECT).on(CST_EVENT.BACKTOTOP.POSITION_CHANGE, $.proxy(this.setPosition, this));
			},
			defSetup : function() {
				$(win).on('load', function(e) {
					$(win).trigger('scroll');
				});
			},
			onTopBtnClick : function() {
				this.htmlBody.animate({scrollTop : 0}, this.opts.topBtn.speed);
			},
			setPosition : function(e, data) {
				if(this.topPosition === data.TOP_POSITION) return;
				this.topPosition = data.TOP_POSITION;
			},
			onScrollListener : function() {
				var winTop = $(win).scrollTop(),
				winHeight = UTIL.winSize().h,
				footerTop = (this.footer.size()) ? this.footer.offset().top : 0;

				if(typeof this.topPosition === 'undefined') this.topPosition = winTop;

				if (winTop > this.topPosition && (winTop + winHeight) < footerTop) {
					if(!this.topBtnWrap.hasClass(this.opts.topBtn.onClass)) this.topBtnWrap.addClass(this.opts.topBtn.onClass);
				} else {
					if(this.topBtnWrap.hasClass(this.opts.topBtn.onClass)) this.topBtnWrap.removeClass(this.opts.topBtn.onClass);
				}
			}
		};
	})();

	$(function() {
		namespace.backtotop.init($('body'));
	});
})(window, window.jQuery);


! function(e, t, i) {
    "use strict";
    "undefined" == typeof e.smg && (e.smg = {}), "undefined" == typeof e.smg.aem && (e.smg.aem = {}), "undefined" == typeof e.smg.aem.components && (e.smg.aem.components = {}), "undefined" == typeof e.smg.aem.components.video && (e.smg.aem.components.video = {}), t().jquery !== i().jquery && i.fn.bcChromePlayer && (t = i);
    var o = (e.smg.aem.varStatic, e.smg.aem.util),
        s = e.smg.aem.components;
    s.video = function() {
        var i = {
            videos: ".js-video",
            youtube: {
                iframe: "<iframe src='about:blank' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>",
                embedSrc: "https://www.youtube.com/embed/{{VIDEO_ID}}?wmode=opaque&rel=0&enablejsapi=1&version=3",
                autoPlay: "false"
            },
            brightcove: {
                playerType: "",
                countryCode: "",
                divID: "",
                videoTagID: "",
                videoID: "",
                videoWidth: "100%",
                videoHeight: "100%",
                autoPlay: "false",
                captionURL: ""
            },
            mp4: {
                videoElement: '<video playsinline title="" class="s-video"><source src="" type="video/mp4"></video>',
                title: "",
                videoURL: "",
                imgURL: "",
                autoplay: "false",
                mute: "false",
                controls: "false",
                playBtn: ".s-mp4-video-play, .js-pop-btn"
            },
            aparat: {
                iframe: "<iframe src='about:blank' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>",
                embedSrc: "https://www.aparat.com/video/video/embed/vt/frame/pid/0/showadstart/no/showvideo/yes/videohash/{{VIDEO_ID}}",
                autoPlay: "false"
            }
        };
        return {
            init: function(e, s) {
                (this.container = e).size() && (i.brightcove.templateReadyHandler = t.proxy(this.onBrightCoveTemplateReadyHandler, this), this.opts = o.def(i, s || {}), this.youtubeOpt = this.opts.youtube, this.brightcoveOpt = this.opts.brightcove, this.mp4Opt = this.opts.mp4, this.aparatOpt = this.opts.aparat, this._brightcoveOpt = null, this.youtubeIframe = null, this.aparatIframe = null, this.mp4VideoElement = null, this.setElements(), this.bindEventHandlers(), this.setCreateEmbedVideo(), this.ie8HidePlayButton())
            },
            setElements: function() {
                this.videosEmbed = this.container.find(this.opts.videos).filter(function() {
                    return "embed" === t(this).attr("data-vid-view")
                }), this.videosLayer = this.container.find(this.opts.videos).filter(function() {
                    return "layer" === t(this).attr("data-vid-view")
                })
            },
            bindEventHandlers: function() {
                t(document).on("click", this.opts.videos, t.proxy(this.setCreateLayerVideo, this))
            },
            ie8HidePlayButton: function() {
                8 === document.documentMode && (t(this.opts.mp4.playBtn).filter('[data-vid-type="mp4"]').css("display", "none"), t(this.opts.videos).filter('[data-vid-type="mp4"]').find(this.opts.mp4.playBtn).css("display", "none"))
            },
            setCreateEmbedVideo: function() {
                for (var e = this, t = 0, i = this.videosEmbed.length; i > t; t++) ! function(i) {
                    var o = e.videosEmbed.eq(i),
                        s = o.data("vid-view"),
                        a = o.data("vid-type"),
                        n = o.data("vid-data");
                    switch (a) {
                        case "youtube":
                            e.setYoutube(n);
                            break;
                        case "brightcove":
                            e.setBrightCove(n);
                            break;
                        case "mp4":
                            e.setMp4Player(n, s, o, t);
                            break;
                        case "aparat":
                            e.setAparat(n)
                    }
                }(t)
            },
            setCreateLayerVideo: function(e) {
                e.stopPropagation();
                var i = t(e.currentTarget),
                    o = i.data("vid-view"),
                    s = i.data("vid-type"),
                    a = i.data("vid-data"),
                    n = i.closest(".js-home-components");
                if ("embed" !== o) {
                    switch (i.attr("data-vid-btn-idx", this.videosLayer.index(i)), t("#" + a.divID).attr("data-vid-btn-idx", i.attr("data-vid-btn-idx")), s) {
                        case "youtube":
                            this.setYoutube(a);
                            break;
                        case "brightcove":
                            this.setBrightCove(a);
                            break;
                        case "mp4":
                            this.setMp4Player(a, o, i, i.attr("data-vid-btn-idx"));
                            break;
                        case "aparat":
                            this.setAparat(a)
                    }
                    n.size() && n.addClass("s-video-open"), "layer" === o && this.container.addClass("video-layer-open"), t("#" + a.divID).closest(".video-area_5").off("aem_hide", t.proxy(this.onAemHide, this)), t("#" + a.divID).closest(".video-area_5").on("aem_hide", t.proxy(this.onAemHide, this))
                }
            },
            setYoutube: function(e) {
                this.youtubeIframe = t(this.youtubeOpt.iframe), this.youtubeIframe.attr({
                    id: "youtubePlayer_" + e.videoID.split("-").join("_"),
                    src: this.youtubeOpt.embedSrc.replace("{{VIDEO_ID}}", e.videoID) + "&autoplay=" + (e.autoPlay && "true" === e.autoPlay.toLowerCase() ? "1" : "0")
                }), t("#" + e.divID).prepend(this.youtubeIframe).closest(".video-area_5").show().closest(".js-video-area").show(), t("#" + e.divID).closest(".video-area_5").on("click", ".js-pop-close", t.proxy(this.onCloseBtnClick, this)), this.container.addClass("video-open")
            },
            setAparat: function(e) {
                this.aparatIframe = t(this.aparatOpt.iframe), this.aparatIframe.attr({
                    id: "aparatPlayer_" + e.videoID.split("-").join("_"),
                    src: this.aparatOpt.embedSrc.replace("{{VIDEO_ID}}", e.videoID) + (e.autoPlay && "true" === e.autoPlay.toLowerCase() ? "?data[as]=1" : "")
                }), t("#" + e.divID).closest(".video-area_5").addClass("s-aparat-area"), t("#" + e.divID).prepend(this.aparatIframe).closest(".video-area_5").show().closest(".js-video-area").show(), t("#" + e.divID).closest(".video-area_5").on("click", ".js-pop-close", t.proxy(this.onCloseBtnClick, this)), this.container.addClass("video-open")
            },
            onCloseBtnClick: function(e) {
                var i = t(e.currentTarget),
                    o = i.closest(".video-area_5"),
                    s = o.find(".brightCoveArea"),
                    a = t("#" + i.data("div-id")).attr("data-vid-btn-idx"),
                    n = t('[data-vid-view="layer"][data-vid-btn-idx="' + a + '"]'),
                    r = n.closest(".js-home-components");
                if (n.size())
                    if (n.length > 1) {
                        var d = n.length - 1,
                            c = t(n[d]).closest(".slick-slide");
                        "undefined" != typeof c ? n.each(function(e, i) {
                            d === e ? t(c).hasClass("slick-cloned") || t(i).focus() : t(i).focus()
                        }) : n.focus()
                    } else n.focus();
                r.size() && r.removeClass("s-video-open"), this.container.removeClass("video-layer-open"), o.css("display", "none"), o.hasClass("s-aparat-area") && o.find("iframe").attr("src", "about:blank"), s.html(""), i.off("click", t.proxy(this.onCloseBtnClick, this))
            },
            onAemHide: function(e) {
                var i = t(e.currentTarget).find(".brightcove-bcc-btn-close, .brightcove-bc5-btn-close"),
                    o = t("#" + i.data("div-id")).attr("data-vid-btn-idx"),
                    s = t('[data-vid-view="layer"][data-vid-btn-idx="' + o + '"]'),
                    a = s.closest(".js-home-components");
                if (s.size() && !t(e.target).hasClass("vjs-big-play-button"))
                    if (s.length > 1) {
                        var n = s.length - 1,
                            r = t(s[n]).closest(".slick-slide");
                        "undefined" != typeof r ? s.each(function(e, i) {
                            n === e ? t(r).hasClass("slick-cloned") || t(i).focus() : t(i).focus()
                        }) : s.focus()
                    } else s.focus();
                i.closest(".s-video-area").is(":visible") || a.removeClass("s-video-open")
            },
            setBrightCove: function(i) {
                switch (this._brightcoveOpt = t.extend({}, this.brightcoveOpt, i), this._brightcoveOpt.playerType) {
                    case "brightcoveBc5PlayerLayer":
                        e.brightcoveBc5PlayerLayer(this._brightcoveOpt.countryCode, this._brightcoveOpt.divID, this._brightcoveOpt.videoTagID, this._brightcoveOpt.videoID, this._brightcoveOpt.videoWidth, this._brightcoveOpt.videoHeight, this._brightcoveOpt.autoPlay, this._brightcoveOpt.captionURL);
                        break;
                    case "bcHtml5Player":
                        t("#" + this._brightcoveOpt.divID).bcHtml5Player(this._brightcoveOpt.countryCode, this._brightcoveOpt.videoTagID, this._brightcoveOpt.videoID, this._brightcoveOpt.videoWidth, this._brightcoveOpt.videoHeight, this._brightcoveOpt.autoPlay, this._brightcoveOpt.captionURL);
                        break;
                    case "brightcoveBccPlayerLayer":
                        e.brightcoveBccPlayerLayer(this._brightcoveOpt.divID, this._brightcoveOpt.countryCode, this._brightcoveOpt.videoID, this._brightcoveOpt.videoWidth, this._brightcoveOpt.videoHeight, this._brightcoveOpt.autoPlay);
                        break;
                    case "bcChromePlayer":
                        t("#" + this._brightcoveOpt.divID).bcChromePlayer(this._brightcoveOpt.countryCode, this._brightcoveOpt.videoID, this._brightcoveOpt.videoWidth, this._brightcoveOpt.videoHeight, this._brightcoveOpt.autoPlay)
                }
            },
            setMp4Player: function(e, i, o, s) {
                var a = o,
                    n = null;
                if (this.mp4VideoElement = t(this.mp4Opt.videoElement), this.mp4VideoElement.attr({
                        title: e.title,
                        width: e.videoWidth,
                        height: e.videoHeight
                    }), this.mp4VideoElement.find("source").attr("src", this.getScene7Path(e.videoURL, t(o))), n = a.find(this.mp4Opt.playBtn), 8 !== document.documentMode && n.off("click.mp4Play").on("click.mp4Play", function(e) {
                        var i = t(e.currentTarget),
                            o = t("#" + i.closest(".js-video").find(".s-video-player, .s-show-video").attr("id"));
                        e.preventDefault(), e.stopPropagation(), o.find("video")[0].play(), o.find("video").prop("controls", !0), i.css("display", "none")
                    }), "true" === e.autoPlay && this.mp4VideoElement.prop("autoplay", !0), "layer" === i && ("false" === e.controls ? this.mp4VideoElement.prop("controls", !1) : this.mp4VideoElement.prop("controls", !0)), "embed" === i && "true" === e.scrollPlay && n.css("display", "none"), "embed" === i && "true" === e.autoPlay && this.mp4VideoElement.prop("controls", !0), t("#" + e.divID).prepend(this.mp4VideoElement).closest(".video-area_5").show().closest(".js-video-area").show(), t("#" + e.divID).closest(".video-area_5").on("click", ".js-pop-close", t.proxy(this.onCloseBtnClick, this)), this.container.addClass("video-open"), 8 === document.documentMode) {
                    var r = null;
                    a.parent().find(".js-img-src").length ? r = a.parent().find(".js-img-src") : a.closest("figure").find(".s-img-mo").length && (r = a.closest("figure").find(".s-img-mo")), r.length && r.eq(0).hasClass("s-img-mo") && r.eq(0).removeClass("s-img-mo")
                }
                o.trigger("bgMp4Ready", s)
            },
            getScene7Path: function(e, i) {
                var o = t("#gnbRunmodeInfo"),
                    s = t("#scene7domain").val(),
                    a = e || "",
                    n = "";
                if (o.length)
                    if ("qa" === o.val() || "live" === o.val()) {
                        n = a.replace("/content/dam/samsung/", s + "p5/"), n = n.replace("/is/image/", "/is/content/");
                        var r = i.attr("data-vid-data").toString();
                        r = r.replace(a, n), i.attr("data-vid-data", r)
                    } else n = a;
                else n = a;
                return n
            }
        }
    }(), t(function() {
        t.each(["show", "hide"], function(e, i) {
            var o = t.fn[i];
            t.fn[i] = function() {
                return this.trigger("aem_" + i), o.apply(this, arguments)
            }
        }), s.video.init(t("body"))
    })
}(window, window.$, window.jQuery),
function(e, t) {
    "use strict";
    "undefined" == typeof e.smg && (e.smg = {}), "undefined" == typeof e.smg.aem && (e.smg.aem = {}), "undefined" == typeof e.smg.aem.components && (e.smg.aem.components = {}), "undefined" == typeof e.smg.aem.components.video && (e.smg.aem.components.video = {});
    var i = e.smg.aem.components.video;
    i.mp4AutoPlay = function() {
        var i = {
                body: "body",
                evt: {
                    connect: {},
                    responsiveMgr: {
                        responsiveChange: "responsiveChange"
                    }
                }
            },
            o = {
                getObjectInfo: function() {
                    return {
                        responsiveName: this.responsiveName,
                        device: this.device
                    }
                },
                init: function() {
                    this.constants(), this.bindEvts(), this.defSetup()
                },
                constants: function() {
                    this.device = {
                        mobile: {
                            support: !0,
                            name: "mobile",
                            width: 768
                        },
                        tablet: {
                            support: !1,
                            name: "tablet",
                            width: 1280
                        },
                        desktop: {
                            support: !0,
                            name: "desktop"
                        }
                    }, this.evt = i.evt.responsiveMgr
                },
                bindEvts: function() {
                    this.resizeListener()
                },
                defSetup: function() {
                    this.responsiveChange()
                },
                resizeListener: function() {
                    t(e).on("resize", t.proxy(this.responsiveChange, this))
                },
                responsiveChange: function() {
                    var o, s = e.document,
                        a = e.innerWidth || s.documentElement.clientWidth || s.body.clientWidth;
                    if (this.device.mobile.support && a <= this.device.mobile.width) o = this.device.mobile.name;
                    else if (this.device.tablet.support && a <= this.device.tablet.width) o = this.device.tablet.name;
                    else {
                        if (!this.device.desktop.support) return;
                        o = this.device.desktop.name
                    }
                    var n = {
                        responsiveName: ""
                    };
                    this.responsiveName ? this.responsiveName !== o && (this.responsiveName = o, n.responsiveName = this.responsiveName, t(i.evt.connect).trigger(this.evt.responsiveChange, n)) : (this.responsiveName = o, n.responsiveName = this.responsiveName, t(i.evt.connect).trigger(this.evt.responsiveChange, n))
                }
            },
            s = {
                init: function() {
                    this.orientationchangeListener()
                },
                orientationchangeListener: function() {
                    t(e).on("orientationchange", function(i) {
                        t(e).trigger("resize.mp4AutoPlay")
                    })
                }
            },
            a = {
                init: function() {
                    this.setElmts(), this.videos && (s.init(), o.init(), this.defSetup(), this.bindEvts())
                },
                setElmts: function() {
                    var e = this;
                    this.videos = null, t(".mp4-video").each(function(i) {
                        var o = t(this),
                            s = o.data("vid-data");
                        "true" === s.scrollPlay && (e.videos = e.videos ? e.videos.add(t("#" + s.divID).find("video")) : t("#" + s.divID).find("video"), "true" === s.playOnce && e.videos.eq(i).data("play-once", !0))
                    }), this.playStatus = []
                },
                bindEvts: function() {
                    this.responsiveListener(), this.videos.each(function(e) {
                        var i = t(this);
                        i.on("loadedmetadata", function() {
                            i.attr("data-loaded-metadata", !0), a.matching()
                        })
                    })
                },
                defSetup: function() {
                    this.responsiveSupport()
                },
                responsiveListener: function() {
                    t(i.evt.connect).on(i.evt.responsiveMgr.responsiveChange, t.proxy(this.responsiveSupport, this))
                },
                triggerResponse: function() {
                    t(i.evt.connect).trigger(i.evt.responsiveMgr.responsiveChange)
                },
                support: {
                    mobile: !1,
                    desktop: !0
                },
                responsiveSupport: function() {
                    var e = this,
                        t = o.getObjectInfo(),
                        i = function(t) {
                            t ? (e.bindResizeListener(), e.bindScrollListener()) : (e.unbindResizeListener(), e.unbindScrollListener())
                        };
                    switch (t.responsiveName) {
                        case t.device.mobile.name:
                            i(this.support.mobile);
                            break;
                        case t.device.desktop.name:
                            i(this.support.desktop)
                    }
                },
                bindScrollListener: function() {
                    t(e).off("scroll.mp4AutoPlay").on("scroll.mp4AutoPlay", t.proxy(this.matching, this))
                },
                bindResizeListener: function() {
                    t(e).off("scroll.mp4AutoPlay").on("resize.mp4AutoPlay", t.proxy(this.matching, this))
                },
                unbindScrollListener: function() {
                    t(e).off("scroll.mp4AutoPlay", t.proxy(this.matching, this))
                },
                unbindResizeListener: function() {
                    t(e).off("resize.mp4AutoPlay", t.proxy(this.matching, this))
                },
                matching: function() {
                    var i = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop,
                        o = (window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight) + i,
                        s = this;
                    this.videos.each(8 === document.documentMode ? function(a) {
                        var n = t(this),
                            r = n.outerHeight(),
                            d = n.offset().top,
                            c = d + r;
                        c >= i && o >= d ? s.playStatus[a] || e.videojs && (s.playStatus[a] = !0) : s.playStatus[a] && e.videojs && (s.playStatus[a] = !1)
                    } : function(e) {
                        var a = t(this),
                            n = a.outerHeight(),
                            r = a.offset().top,
                            d = r + n;
                        a.data("play-once") && s.playStatus[e] || (d >= i && o >= r ? s.playStatus[e] || a.data("loaded-metadata") && (a[0].currentTime = 0, a[0].play(), s.playStatus[e] = !0) : s.playStatus[e] && a.data("loaded-metadata") && (a[0].pause(), s.playStatus[e] = !1))
                    })
                },
                stateChangeListener: function() {
                    t(".ma-g-c-halftext .ma-g-c-halftext__video .s-video").each(function(e, t) {
                        t.attachEvent("playStateChange", function() {
                            if (2 === t.PlayState) {
                                var e = 1e3 * Math.floor(t.Duration);
                                setTimeout(function() {
                                    t.pause()
                                }, e)
                            }
                        })
                    })
                }
            },
            n = function(e) {
                (this.container = e).size() && a.init()
            };
        return {
            init: n,
            videoManager: a
        }
    }(), t(function() {
        t("body").hasClass("touch-device") || i.mp4AutoPlay.init(t("body"))
    })
}(window, window.jQuery);

function onBcVideoSize() {
    var e = $(bccDiv).parent().width(),
        a = $(bccDiv).parent().height();
    bcCLog("onBcVideoSize width:" + e + " / height:" + a), bccModExp && "html" === bccModExp.experience.type && bccModExp.setSize(e, a)
}

function bccTemplateLoaded(e) {
    bcCLog("]]bccTemplateLoaded"), bcBrowser ? (bccModVP = brightcove.getExperience(e).getModule(APIModules.VIDEO_PLAYER), bccModExp = brightcove.getExperience(e).getModule(APIModules.EXPERIENCE)) : (bccModVP = brightcove.api.getExperience(e).getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER), bccModExp = brightcove.api.getExperience(e).getModule(brightcove.api.modules.APIModules.EXPERIENCE)), bccModVP.addEventListener(BCMediaEvent.CHANGE, onBccVideoLoad), bccModVP.addEventListener(BCMediaEvent.BEGIN, onBccVideoReady), bccModVP.addEventListener(BCMediaEvent.PLAY, onBccVideoPlay), bccModVP.addEventListener(BCMediaEvent.STOP, onBccVideoStop)
}

function onDFXPStyle(e) {
    bcCLog("]]onDFXPStyle")
}

function onBccVideoLoad(e) {
    bcCLog("]]onBccVideoLoad"), bccStatusCcFlag[e.media.id] = !1, null != e.media.captions && (bccStatusCcFlag[e.media.id] = !0)
}

function onBccVideoReady(e) {
    if (bcCLog("]]onBccVideoReady"), 0 == e.media.lineupId) bcjQuery("#myExperience" + e.media.id).length && (bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").attr("nowVideo", e.media.id), null != e.media.captions && bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").find(".bc-cc").attr("tabindex", "0"), bccStatusCcFlag[e.media.id] ? bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("over").addClass("on") : bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("on").removeClass("over"));
    else {
        {
            brightcove.getExperience("myExperience" + e.media.lineupId).getModule(APIModules.VIDEO_PLAYER)
        }
        null != e.media.captions && (bccStatusCcFlag[e.media.id] = !0), bcjQuery("#myExperience" + e.media.lineupId).length && (bcjQuery("#myExperience" + e.media.lineupId).parents(".bc-cplayer-control-area").attr("nowVideo", e.media.id), null != e.media.captions && bcjQuery("#myExperience" + e.media.lineupId).parents(".bc-cplayer-control-area").find(".bc-cc").attr("tabindex", "0"), bccStatusCcFlag[e.media.lineupId] ? bcjQuery("#myExperience" + e.media.lineupId).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("on").addClass("over") : bcjQuery("#myExperience" + e.media.lineupId).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("over").addClass("on"))
    }
}

function onBccVideoPlay(e) {
    bcCLog("]] onBccVideoPlay " + e.media.id);
    var a = bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").attr("id").split("bc-cplayer-control-area_");
    bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").find(".play").removeClass("play").addClass("pause").attr({
        title: bccMsg.text_02,
        id: "pause-" + a[1]
    }).text(bccMsg.text_02)
}

function onBccVideoStop(e) {
    bcCLog("]] onBccVideoStop " + e.media.id);
    var a = bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").attr("id").split("bc-cplayer-control-area_");
    bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").find(".pause").removeClass("pause").addClass("play").attr({
        title: bccMsg.text_01,
        id: "play-" + a[1]
    }).text(bccMsg.text_01)
}

function brightcoveBccPlayerLayer(e, a, t, c, r, o) {
    bcjQuery("#" + e).bcChromePlayer(a, t, c, r, o), bcjQuery("#" + e).attr("style", "width:" + c + "; height:" + r + ";position:absolute;top:0px;bottom:0px;right:0px;left: 0px;"), area = bcjQuery("#" + e).parents(".video-area_5").wrapAll("<div/>").parent(), area.find(".video-area_5").show(), area.find(".brightCoveArea").show(), bcjQuery("body").addClass("video-open"), _video_wrap_5 = area.find(".video-wrap_5");
    var d = Math.max(0, (bcjQuery(window).height() - _video_wrap_5.outerHeight()) / 2 + bcjQuery(window).scrollTop()),
        n = Math.max(0, (bcjQuery(window).width() - _video_wrap_5.outerWidth()) / 2 + bcjQuery(window).scrollLeft());
    _video_wrap_5.css({
        left: n + "px",
        top: d + "px"
    }).show().focus()
}

function bccLayerClose(e) {
    var a = bcjQuery("#" + bcjQuery(e).data(void 0 === bcjQuery(e).data("div-id") ? "video-id" : "div-id")),
        t = a.closest(".video-area_5"),
        c = (a.closest(".video-wrap"), !1);
    if (window.videojs) {
        var r = a.find(".video-js").attr("id");
        r && videojs(document.getElementById(r)).dispose()
    }
    t.hide(0), a.html(""), $.each(bcjQuery(".video-area_5"), function() {
        return $(this).is(":visible") ? (c = !0, !1) : void 0
    }), bcjQuery(".video-wrap .vjs-big-play-button").focus(), c || (bcjQuery("body").removeClass("video-open"), bcjQuery("body").removeClass("video-layer-open"))
}

function brightcoveBc5PlayerLayer(e, a, t, c, r, o, d, n) {
    if (!bcjQuery("body").hasClass("video-layer-open")) {
        bcjQuery("#" + a).bcHtml5Player(e, t, c, r, o, d, n), area = bcjQuery("#" + a).parents(".video-area_5").wrapAll("<div/>").parent(), area.find(".video-area_5").show(), area.find(".brightCoveArea").show(), bcjQuery("body").addClass("video-open"), _video_wrap_5 = area.find(".video-wrap_5");
        var l = Math.max(0, (bcjQuery(window).height() - _video_wrap_5.outerHeight()) / 2 + bcjQuery(window).scrollTop()),
            i = Math.max(0, (bcjQuery(window).width() - _video_wrap_5.outerWidth()) / 2 + bcjQuery(window).scrollLeft());
        _video_wrap_5.css({
            left: i + "px",
            top: l + "px"
        }).show().focus()
    }
}

function bc5LayerClose(e) {
    var a = bcjQuery("#" + bcjQuery(e).data(void 0 === bcjQuery(e).data("div-id") ? "video-id" : "div-id")),
        t = a.closest(".video-area_5"),
        c = (a.closest(".video-wrap"), !1);
    if (window.videojs) {
        var r = a.find(".video-js").attr("id");
        r && videojs(document.getElementById(r)).dispose()
    }
    t.hide(0), a.html(""), $.each(bcjQuery(".video-area_5"), function() {
        return $(this).is(":visible") ? (c = !0, !1) : void 0
    }), bcjQuery(".video-wrap .vjs-big-play-button").focus(), c || (bcjQuery("body").removeClass("video-open"), bcjQuery("body").removeClass("video-layer-open"))
}

function getIeVersion() {
    var e = -1;
    if ("Microsoft Internet Explorer" == navigator.appName) {
        var a = navigator.userAgent,
            t = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
        null != t.exec(a) && (e = parseFloat(RegExp.$1))
    }
    return e
}

function bcCLog(e) {}
var bcc_idx = 0,
    areaLiveTimer, bcjQuery = window.$,
    bccMsg = new Array,
    bcBrowser = null;
bcBrowser = navigator.userAgent.match(/Android|Mobile|iP(hone|od|ad)|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/) ? !1 : !0;
var bcProtocol = null;
bcProtocol = "http:" == location.protocol ? !0 : !1, BcHashMap = function() {
    this.map = new Array
}, BcHashMap.prototype = {
    put: function(e, a) {
        this.map[e] = a
    },
    get: function(e) {
        return this.map[e]
    }
}, window.SITE_CD && "sec" == window.SITE_CD ? (bccMsg.text_01 = "", bccMsg.text_02 = " ", bccMsg.text_03 = " ", bccMsg.text_04 = "", bccMsg.text_05 = "", bccMsg.text_06 = "", bccMsg.text_07 = " ", bccMsg.text_08 = " ", bccMsg.text_09 = "    ", bccMsg.text_10 = "   ", bccMsg.text_12 = "  ", bccMsg.text_13 = " ", bccMsg.text_14 = "", bccMsg.text_20 = "", bccMsg.text_21 = "", bccMsg.text_22 = "", bccMsg.text_23 = "", bccMsg.text_24 = " ", bccMsg.text_25 = "  ") : (bccMsg.text_01 = "Play", bccMsg.text_02 = "Pause", bccMsg.text_03 = "Stop", bccMsg.text_04 = "Rewind", bccMsg.text_05 = "Forward", bccMsg.text_06 = "Mute", bccMsg.text_07 = "Volume up", bccMsg.text_08 = "Volume down", bccMsg.text_09 = "No more video list", bccMsg.text_10 = "End of brightcove player", bccMsg.text_12 = "Player content ready", bccMsg.text_13 = "Previous", bccMsg.text_14 = "Next", bccMsg.text_20 = "Closed caption on", bccMsg.text_21 = "Closed caption off", bccMsg.text_22 = "No Closed caption", bccMsg.text_23 = "Caption", bccMsg.text_24 = "fullscreen", bccMsg.text_25 = "Non-Fullscreen");
var bccStatusCcFlag = new Array,
    bcChromePlayerData = {
        DEV: {
            playerId: "2487224303001",
            playerKey: "AQ~~,AAAA0gEd3vk~,UZmnOpR2YpEfDjzgdcc7b8EnQirJFTfn"
        },
        LIVE: {
            playerId: "2474494486001",
            playerKey: "AQ~~,AAAA0gHQkRE~,ddRZn78L8shi6Jrn-WVLALuE0paPt520"
        },
        GLOBAL: {
            playerId: "2937405510001",
            playerKey: "AQ~~,AAACqvvPXZk~,73mGUHxCIIQhsQ1kvmok_IBzGMhHprit"
        },
        EG: {
            playerId: "926210542001",
            playerKey: "AQ~~,AAAA1vDImsE~,cmf9fQlzDEX60Ap9x_kSo3zfwvzYk9fg"
        },
        CN: {
            playerId: "926210307001",
            playerKey: "AQ~~,AAAA1vc34eE~,kItzOdTai_fzjaKuIxIg8DV223Iq6cvi"
        },
        PK: {
            playerId: "926251521001",
            playerKey: "AQ~~,AAAA1vSqgEE~,wOnUwNgORxX5Lx7vj1pm6XhYLoDcEM4_"
        },
        LEVANT: {
            playerId: "926251519001",
            playerKey: "AQ~~,AAAA1vSqfFk~,wpJou2CBGiTHSgG-P42Xe63FMRD6TyXo"
        },
        CO: {
            playerId: "926210505001",
            playerKey: "AQ~~,AAAA1vDIWFk~,-osp2UwmJkSayIBzpe-fiWWjFetpHFs9"
        },
        SG: {
            playerId: "926210509001",
            playerKey: "AQ~~,AAAA1vDIYCk~,zKw77YEpCQO0r9qz-sEytHx3lFErk4ss"
        },
        VN: {
            playerId: "926196171001",
            playerKey: "AQ~~,AAAA1u88Qek~,6VFss6TVSqtCkDpG6h2Uh4I4PD0GLZLq"
        },
        US: {
            playerId: "924336519001",
            playerKey: "AQ~~,AAAA1vSqNgk~,TETY7sgK5kwNobvkqdSXY02JjkGuDmIc"
        },
        HR: {
            playerId: "926210332001",
            playerKey: "AQ~~,AAAA1vc4CPE~,snrDcnWtt4VES1PU9mYW_mbeNmOz1bG8"
        },
        RS: {
            playerId: "926210534001",
            playerKey: "AQ~~,AAAA1vDIiyE~,1l625wgL4J5inOw1R1uIHQ2AI0mBhVFr"
        },
        SI: {
            playerId: "3855497514001",
            playerKey: "AQ~~,AAADga3gQqE~,ighS4vLAqw7aEJSfMheNEQNl3lgkikCf"
        },
        AT: {
            playerId: "924336545001",
            playerKey: "AQ~~,AAAA1vSqZOk~,hp4Wt3zVjWc2whDUvqDH9CGlKil8OyNx"
        },
        CH_FR: {
            playerId: "926251507001",
            playerKey: "AQ~~,AAAA1vSqaNE~,EQ78wh6EYWdP_mwBFB3IbXxs7JLIAwqv"
        },
        CH: {
            playerId: "926210526001",
            playerKey: "AQ~~,AAAA1vDIf2k~,iVoVKzdFbeHQvN-Pf_SvWToP7TwoRgPA"
        },
        AR: {
            playerId: "926210303001",
            playerKey: "AQ~~,AAAA1vc32hE~,GuUbplf11bKwpRy4EAYNGiU2J4b_cVdU"
        },
        PY: {
            playerId: "4456565107001",
            playerKey: "AQ~~,AAAEDVSMUYE~,3yoQrflDnSf82zbeen7sVq1mwoAwGDlQ"
        },
        UR: {
            playerId: "4456565111001",
            playerKey: "AQ~~,AAAEDVSMWVE~,nHKELpWrD9QyFGjGFsIleAdaHKQNcHX7"
        },
        AU: {
            playerId: "926210511001",
            playerKey: "AQ~~,AAAA1vDIZBE~,8Qxfn_gGqXQWmvXHrUz4r05jOuPCLzUa"
        },
        NZ: {
            playerId: "926196169001",
            playerKey: "AQ~~,AAAA1u88PgE~,GmWzarV2MErCAUzi5b8t5EKcBnk6E8yV"
        },
        EE: {
            playerId: "926251513001",
            playerKey: "AQ~~,AAAA1vSqcKE~,pLfhI1aol64198gOZquO36bmCItlna-V"
        },
        LV: {
            playerId: "926210326001",
            playerKey: "AQ~~,AAAA1vc4ASE~,axBlmjdcgk_FU76yezkFgm_XktjFJsfJ"
        },
        LT: {
            playerId: "926251515001",
            playerKey: "AQ~~,AAAA1vSqdIk~,FfPsfAjtZCPUWwnff6eUCf5dSEQmz-kJ"
        },
        BE: {
            playerId: "926196191001",
            playerKey: "AQ~~,AAAA1u88bOE~,jLxL4xeWUGVW0JUPGna3w8uSmCNmlptZ"
        },
        BE_FR: {
            playerId: "926210528001",
            playerKey: "AQ~~,AAAA1vDIg1E~,MkoiW9FH-nnG4ZUl3DOpygEFQNnhP-uI"
        },
        NL: {
            playerId: "926196193001",
            playerKey: "AQ~~,AAAA1u88cMk~,aJXrrmXqcmSiDmFHqX1rl8jwuB1XCwGA"
        },
        JP: {
            playerId: "926210515001",
            playerKey: "AQ~~,AAAA1vDIa-E~,E6N35iQp8jDwx86w-tUgYVHCLPSCiARX"
        },
        sec: {
            playerId: "926196177001",
            playerKey: "AQ~~,AAAA1u88TaE~,H1f81zC57BUdqLYj69bNcK1mnWR6NNTp"
        },
        CA: {
            playerId: "924384217001",
            playerKey: "AQ~~,AAAA1vc30kE~,cbXkIMRl2tur-XePkk1yLTgjdi2k0-MS"
        },
        CA_FR: {
            playerId: "924336521001",
            playerKey: "AQ~~,AAAA1vSqOfE~,sZkSFUdTS6eUK64OErxusx96DKJNIbJi"
        },
        CL: {
            playerId: "924336527001",
            playerKey: "AQ~~,AAAA1vSqRak~,EnrWLy5bVf2utzcUFuidrHPW6lZMMy2X"
        },
        CZ: {
            playerId: "926210321001",
            playerKey: "AQ~~,AAAA1vc3-VE~,q0UeQmlKWUjB8EFbz1b9FLjEfqJ84u3l"
        },
        SK: {
            playerId: "924336543001",
            playerKey: "AQ~~,AAAA1vSqYQE~,ri_moVr2zWAxhVn98njnuti412uSoK-x"
        },
        BR: {
            playerId: "926210501001",
            playerKey: "AQ~~,AAAA1vDIUIk~,LHrzhhIkh5_rkM4qIaeYSJ61GOZoclmv"
        },
        FR: {
            playerId: "924336541001",
            playerKey: "AQ~~,AAAA1vSqXRk~,4Gh2JxitIlZ5MuGnkuyrS7FZ60fKqZ6m"
        },
        GR: {
            playerId: "926196187001",
            playerKey: "AQ~~,AAAA1u88YSk~,vxFU_YgYcCL89X9Qwe1s7rnR0bJNIE-M"
        },
        DE: {
            playerId: "924336537001",
            playerKey: "AQ~~,AAAA1vSqVUk~,Ij_lFfu7jRUnSOIVjtgLuFNXLbFsKk9w"
        },
        HU: {
            playerId: "926210309001",
            playerKey: "AQ~~,AAAA1vc35ck~,MU-_2j7kl_JrhjFN8O5yPCelm0A90oNf"
        },
        HK: {
            playerId: "924336535001",
            playerKey: "AQ~~,AAAA1vSqUWE~,2V3Gfvyx2SIdZnODa2GsXGASlNJYJB_E"
        },
        HK_EN: {
            playerId: "926196179001",
            playerKey: "AQ~~,AAAA1u88UYk~,XDIlg6GcmdvGAbMXEj4cy62aA8fWZ7Rg"
        },
        IT: {
            playerId: "926196185001",
            playerKey: "AQ~~,AAAA1u88XUE~,fft8jN67dHT3bQ4T-YR299dVUUW2Wq13"
        },
        ID: {
            playerId: "926210513001",
            playerKey: "AQ~~,AAAA1vDIZ_k~,nr0_v_QukmUrfpAfwd6syDNAutP_lYjB"
        },
        KZ_UR: {
            playerId: "926210334001",
            playerKey: "AQ~~,AAAA1vc4DNk~,qbZrUsiJtsTqPJmQELpgpisg96XC54ai"
        },
        LATIN: {
            playerId: "926196165001",
            playerKey: "AQ~~,AAAA1u88Ohk~,v-_KXguDfE5YT_ue64VtxZK0J-pcj-0C"
        },
        LATIN_EN: {
            playerId: "924336525001",
            playerKey: "AQ~~,AAAA1vSqQcE~,BgcEcsklFLovEoVnOt9RPKJB5s7msCEw"
        },
        VE: {
            playerId: "926210503001",
            playerKey: "AQ~~,AAAA1vDIVHE~,OedBXOLjIJrH7dJYXr4eGBbyQ_PYA65j"
        },
        MX: {
            playerId: "924336523001",
            playerKey: "AQ~~,AAAA1vSqPdk~,0hHIlIMEKBPQrwDwbHYwzm2SiuZ5pER1"
        },
        N_AFRICA: {
            playerId: "926251523001",
            playerKey: "AQ~~,AAAA1vSqhCk~,tjW3A2k5zkQthYBV9Dwp5Qie2wZvGoF-"
        },
        DK: {
            playerId: "926210311001",
            playerKey: "AQ~~,AAAA1vc36bE~,FiLtJnouWb44elliFsUPMk5UTMEBLc10"
        },
        FI: {
            playerId: "926210524001",
            playerKey: "AQ~~,AAAA1vDIe4E~,lKlcTymj-FAv5_CC2dxasn2HZF-vT7a1"
        },
        NO: {
            playerId: "924336539001",
            playerKey: "AQ~~,AAAA1vSqWTE~,NIYuVb4Yj1W-Vy50_tEzbsb7GSNBGjUu"
        },
        SE: {
            playerId: "926210522001",
            playerKey: "AQ~~,AAAA1vDId5k~,wl2s5WAZVZQm20Pfrgap3hb8Pb_GhmS2"
        },
        PT: {
            playerId: "926210317001",
            playerKey: "AQ~~,AAAA1vc38YE~,E3RfSFCBgebLJXrs8gqIapjCZAgtmC6W"
        },
        PH: {
            playerId: "926196175001",
            playerKey: "AQ~~,AAAA1u88Sbk~,WIP_y9MCYC_2l3T_Wm3nrg1cmQbpBrij"
        },
        PL: {
            playerId: "926210319001",
            playerKey: "AQ~~,AAAA1vc39Wk~,VQ1_fYOWigV90NMn7kDlwSpB5fr6HAHC"
        },
        PE: {
            playerId: "926210507001",
            playerKey: "AQ~~,AAAA1vDIXEE~,y0ET89E0lhD6DaPPu4E_3SyvFnevN5ut"
        },
        RU: {
            playerId: "926196195001",
            playerKey: "AQ~~,AAAA1u88dLE~,N1tbZZomcgAsb_PfXERrXa4VDTt73bow"
        },
        BG: {
            playerId: "926210323001",
            playerKey: "AQ~~,AAAA1vc3_Tk~,mISXqRtx5TCJSuRDXFAyj0wgMMFj3s4q"
        },
        RO: {
            playerId: "926196189001",
            playerKey: "AQ~~,AAAA1u88aPk~,81hqJ9oLX0Eod2XeyfzxgoAGCbN2YRcH"
        },
        ES: {
            playerId: "926210519001",
            playerKey: "AQ~~,AAAA1vDIc7E~,HUeD8rCqt9P3_ICbpxGIpFVTu2PVdhqe"
        },
        TW: {
            playerId: "926210305001",
            playerKey: "AQ~~,AAAA1vc33fk~,LaoPq8X-3PefH08VUXN2EctTZqxgCTWv"
        },
        TR: {
            playerId: "926196201001",
            playerKey: "AQ~~,AAAA1u88gGk~,tmBYuNAdVdgtccZMqQiemGQppaBGQ4_z"
        },
        UA: {
            playerId: "926210538001",
            playerKey: "AQ~~,AAAA1vDIkvE~,i2xeGsQLR673hBz63dg10Ip937VIAfWE"
        },
        UA_RU: {
            playerId: "926210536001",
            playerKey: "AQ~~,AAAA1vDIjwk~,A2lOutVBN3UbEUcePOvvpHzT5fzY9DPx"
        },
        IE: {
            playerId: "926196183001",
            playerKey: "AQ~~,AAAA1u88WVk~,uCEaQuZ8nzgtayb6cqEcyT1RHclkJG_9"
        },
        UK: {
            playerId: "926196181001",
            playerKey: "AQ~~,AAAA1u88VXE~,x0_28B_6Zvk93nAEavFzIk_lfMgOCrDt"
        },
        AE: {
            playerId: "926251517001",
            playerKey: "AQ~~,AAAA1vSqeHE~,sL-qYGp5vDs9lvQC58LpmsrAdgrnDt-w"
        },
        AE_ARABIC: {
            playerId: "926196197001",
            playerKey: "AQ~~,AAAA1u88eJk~,S0yiLpxyHQcCakj-7HKFJS5XjwgkAXtx"
        },
        IN: {
            playerId: "926210517001",
            playerKey: "AQ~~,AAAA1vDIb8k~,lUaeNA43HwiHGbg_2NeUs3hiAJaenQDK"
        },
        MY: {
            playerId: "926196173001",
            playerKey: "AQ~~,AAAA1u88RdE~,kPQQqwrYdp4bxmwR-nZmYOOY7ci7Pwgy"
        },
        ZA: {
            playerId: "2573241961001",
            playerKey: "AQ~~,AAACVrpFDvk~,goA5RG4suySVUwJKOuX3yfgABbX2fkrD"
        },
        AFRICA_EN: {
            playerId: "926210336001",
            playerKey: "AQ~~,AAAA1vc4EME~,Mr9Hje7LqNftSlNIaKpcSkhnqcpbbP89"
        },
        AFRICA_FR: {
            playerId: "926251525001",
            playerKey: "AQ~~,AAAA1vSqiBE~,Qp5WvJFrHi_K02EFeBsQgtJ5MwsmpUMX"
        },
        AFRICA_PT: {
            playerId: "926196207001",
            playerKey: "AQ~~,AAAA1u88iDk~,ccsEg19-CbJkk_zJ9c6aFicBsNvJsIn8"
        },
        IRAN: {
            playerId: "926210340001",
            playerKey: "AQ~~,AAAA1vc4GJE~,YM3AHViBVn9RFzwbP1jQ_aE5oeVo1AqU"
        },
        IL: {
            playerId: "926210540001",
            playerKey: "AQ~~,AAAA1vDIltk~,IPAPGgmj_6fc11IflU32LkXpdx93feNU"
        },
        SA: {
            playerId: "926196199001",
            playerKey: "AQ~~,AAAA1u88fIE~,O2m1MLoG_muG7KThKuLs8ABApukPd0cJ"
        },
        SA_EN: {
            playerId: "2573241962001",
            playerKey: "AQ~~,AAACVrpFEuE~,IGsISVlCgs-KnLEUg3gHYj5oez9ODaU5"
        },
        TH: {
            playerId: "924336529001",
            playerKey: "AQ~~,AAAA1vSqSZE~,QkYUAXu3lHXJWLnyQOCo2M0yp2LeVm6X"
        }
    },
    bccPlayer, bccModVP, bccModExp, bccModCc, bccDiv, bcChromePlayer = new function() {
        var bccPlayerMap = new BcHashMap,
            target = this;
        this.myBccplayerData, this.bccPlayerData, this.onChangeCC = new Object,
            function($) {
                $.fn.bcChromePlayer = function(alais) {
                    var bcExperiencesAPI;
                    bcExperiencesAPI = bcProtocol ? "//admin.brightcove.com/js/BrightcoveExperiences.js" : "//sadmin.brightcove.com/js/BrightcoveExperiences.js";
                    var bcc = bcChromePlayer,
                        arr = Array.prototype.slice.call(arguments, 1);
                    bcc.checkNull(arr[1]) && (arr[1] = "100%"), bcc.checkNull(arr[2]) && (arr[2] = "100%"), bcc.checkNull(arr[3]) && (arr[3] = "false"), alais = alais.toUpperCase();
                    var bccType = "LIVE" == alais ? "videoList" : "videoPlayer";
                    if (myBccplayerData = eval("bcChromePlayerData." + alais), "undefined" != typeof myBccplayerData) {
                        bccPlayerData = {
                            alais: alais,
                            playerId: myBccplayerData.playerId,
                            playerKey: myBccplayerData.playerKey,
                            videoId: arr[0],
                            width: arr[1],
                            height: arr[2],
                            autoplay: arr[3],
                            type: bccType
                        }, bcCLog(bccPlayerData), bccPlayerMap.put(bccPlayerData.videoId, bccPlayerData), bccDiv = "#myExperience" + bccPlayerData.videoId, arr = [$(this)].concat(arr);
                        var s = document.createElement("script");
                        s.type = "text/javascript", s.src = bcExperiencesAPI, s.readyState ? (document.getElementsByTagName("head")[0].appendChild(s), s.onreadystatechange = function() {
                            if ("8.0" == getIeVersion()) {
                                if ("loaded" == s.readyState || "complete" == s.readyState) return s.onreadystatechange = null, bcc.run.apply(bcc, arr)
                            } else if ("loaded" == s.readyState || "complete" == s.readyState) return bcc.run.apply(bcc, arr)
                        }) : (document.body.appendChild(s), s.onload = function() {
                            return bcc.run.apply(bcc, arr)
                        })
                    }
                }
            }(bcjQuery), this.run = function(e, a) {
                var t = bccPlayerMap.get(a);
                if (e.html(this.markup(a)).show(), e.attr("style", "position:absolute;width:" + t.width + ";height:" + t.height + ";top:0px;bottom:0px;right:0px;left:0px;"), brightcove.createExperiences(), bcBrowser) e.find("object").bccPlayerControls(t.videoId, t.width, t.height);
                else {
                    var c, r, o, d = ".bc-cplayer-area{display: block; position: relative; padding-top: 56.25%;}";
                    o = document.getElementsByTagName("head")[0], document.createStyleSheet ? (c = document.createStyleSheet(), c.cssText = d) : (r = document.createElement("style"), r.type = "text/css", r.styleSheet ? r.styleSheet.cssText = d : r.appendChild(document.createTextNode(d)), o.appendChild(r))
                }
                return -1 != getIeVersion() && e.children("span").css("display", ""), e
            }, this.markup = function(e) {
                var a = bccPlayerMap.get(e),
                    t = "";
                return t += '<object id="myExperience' + a.videoId + '" class="BrightcoveExperience">', t += '<param name="bgcolor" value="#FFFFFF" />', t += '<param name="width" value="' + a.width + '" />', t += '<param name="height" value="' + a.height + '" />', t += '<param name="playerID" value="' + a.playerId + '" />', t += '<param name="playerKey" value="' + a.playerKey + '" />', t += '<param name="wmode" value="transparent">', t += '<param name="isVid" value="true" />', t += '<param name="isUI" value="true" />', t += '<param name="autoStart" value="' + a.autoplay + '" />', t += '<param name="includeAPI" value="true" />', t += '<param name="templateLoadHandler" value="myTemplateLoaded" />', t += '<param name="dynamicStreaming" value="true" />', t += '<param name="@' + a.type + '" value="' + a.videoId + '" />', bcProtocol || (t += '<param name="secureConnections" value="true" />', t += '<param name="secureHTMLConnections" value="true" /> '), t += "</object>"
            }, this.getValue = function(e) {
                var a = [];
                return null == a ? null : "string" == typeof e ? a[e] : a
            }, this.setValue = function(e, a) {
                var t = [];
                for (var c in a) t[c] = a[c]
            }, this.checkNull = function(e) {
                return null == e || "" == e
            }
    };
bcjQuery(window).resize(function() {
        void 0 != bccModExp && onBcVideoSize()
    }),
    function(e) {
        e.fn.bccPlayerControls = function(a, t, c) {
            var r, o, d, n = ".bc-cplayer-area{display: block; position: relative; max-width: 100%;padding-top: 56.25%;}.bc-cplayer-control-area{overflow:hidden}.bc-cplayer-control{position:relative;opacity:0.01;z-index:0;background-image:url(/common/brightcove/img/bg_panel.gif);width:100%;height:40px;overflow:hidden}.bc-cplayer-control.show {opacity:1 !important;z-index:4000 !important;}.bc-cplayer-control .leftPanel {float:left}.bc-cplayer-control .rightPanel {float:right}.bc-cplayer-container .video{position:relative;	top:-40px;z-index:3000;width:100%;height:100%}.bc-cplayer-control button {float:left;width:50px;height:40px;overflow:hidden;padding-top:40px;font-family: Arial, verdana, sans-serif;color: #000;font-size: 1.1em;background-repeat: no-repeat; border:none;}.bc-cplayer-control button:focus{border:white solid 1px}.bc-cplayer-control .rewind {background-image: url(/common/brightcove/img/btn_rewind.gif); }    .bc-cplayer-control .play {background-image: url(/common/brightcove/img/btn_play.gif);}    .bc-cplayer-control .pause {background-image: url(/common/brightcove/img/btn_pause.gif); }    .bc-cplayer-control .forward {background-image: url(/common/brightcove/img/btn_forward.gif); }.bc-cplayer-control .mute {background-image: url(/common/brightcove/img/btn_volon.gif); }.bc-cplayer-control .volume-down {background-image: url(/common/brightcove/img/btn_voldown.gif); }.bc-cplayer-control .volume-up {background-image: url(/common/brightcove/img/btn_volup.gif); }.bc-cplayer-control .muted{background-image: url(/common/brightcove/img/btn_volmute.gif);}.bc-cplayer-control .rightPanel a {overflow:hidden;display:inline-block;float:left;height:40px;}.bc-cplayer-control .rightPanel button.bc-cc {width:34px;background-image:url(/common/brightcove/img/btn_bc_cc.png);}.bc-cplayer-control .rightPanel button.bc-cc.over {background-image:url(/common/brightcove/img/btn_bc_cc_over.png) !important;}.bc-cplayer-control .rightPanel button.bc-cc.on {background-image:url(/common/brightcove/img/btn_bc_cc_on.png) !important;}.end-of-bc{overflow:hidden;width:0px;height:0px;position:absolute}";
            d = document.getElementsByTagName("head")[0], document.createStyleSheet ? (r = document.createStyleSheet(), r.cssText = n) : (o = document.createElement("style"), o.type = "text/css", o.styleSheet ? o.styleSheet.cssText = n : o.appendChild(document.createTextNode(n)), d.appendChild(o));
            var l = {
                    id: "bc" + bcc_idx
                },
                i = null,
                y = null,
                p = null,
                s = null,
                u = 0,
                b = .1,
                I = !1,
                A = e(this),
                v = A.attr("width"),
                m = A.attr("height"),
                g = e("<div />", {
                    id: "bc-cplayer-control-area_" + bcc_idx
                }).addClass("bc-cplayer-control-area");
            "undefined" != typeof v && g.width(v).height(m);
            var h = e('<div class="bc-cplayer-container" style="width:' + t + ";height:" + c + '"/>'),
                f = e('<div class="video" />'),
                C = e("<div />").addClass("bc-cplayer-control"),
                E = e("<div />").addClass("leftPanel"),
                _ = e("<div />").addClass("rightPanel"),
                S = e("<div />", {
                    "class": "end-of-bc"
                }).html("<a href='#' onclick='return false;'>" + bccMsg.text_10 + "</a>");
            A.after(g), g.append(h), C.append(E), C.append(_), h.append(C), h.append(f), A.appendTo(f), g.after(S), g.parent("div").length && "100%" == m && g.parent("div").height("100%");
            var x = function() {
                    return i ? i : (i = brightcove.getExperience("myExperience" + a).getModule(APIModules.VIDEO_PLAYER), y = brightcove.getExperience("myExperience" + a).getModule(APIModules.MENU), p = brightcove.getExperience("myExperience" + a).getModule(APIModules.CAPTIONS), s = brightcove.getExperience("myExperience" + a).getModule(APIModules.EXPERIENCE), _chromelessPlayer = s.getElementByID("videoPlayer"), _chromelessControls = _chromelessPlayer.getControls(), i)
                },
                j = function(a, t) {
                    var c = [a, l.id].join("-"),
                        r = e("<button />").append(t).addClass(a).attr({
                            title: t,
                            id: c
                        });
                    return r
                },
                Q = function() {
                    var e = x();
                    return y.closeMenuPage(), e.play(), !1
                },
                M = function() {
                    var e = x();
                    return e.isPlaying() ? e.pause() : y.closeMenuPage(), !1
                },
                k = function() {
                    var e = x(),
                        a = e.getVolume();
                    return a ? (u = a, V.addClass("muted"), e.setVolume(0), e.mute()) : (V.hasClass("muted") && V.removeClass("muted"), e.setVolume(u ? u : b)), !1
                },
                w = function() {
                    var e = x(),
                        a = e.getVolume();
                    return 10 * a + 10 * b > 10 ? (u = 1, e.setVolume(u)) : (u = 10 * a + 10 * b, e.setVolume(Math.round(u) / 10)), V.hasClass("muted") && V.removeClass("muted"), !1
                },
                P = function() {
                    var e = x(),
                        a = e.getVolume();
                    return 0 >= 10 * a - 10 * b ? (u = 0, V.addClass("muted"), e.setVolume(u), e.mute()) : (u = 10 * a - 10 * b, e.setVolume(Math.round(u) / 10)), !1
                },
                B = j("play", bccMsg.text_01).attr({
                    "aria-live": "assertive"
                }).bind({
                    "click.fe_brightcove": function() {
                        e(this).hasClass("play") ? (e(this).removeClass("play").addClass("pause").attr({
                            title: bccMsg.text_02,
                            id: "pause-" + l.id
                        }).text(bccMsg.text_02), Q()) : (e(this).removeClass("pause").addClass("play").attr({
                            title: bccMsg.text_01,
                            id: "play-" + l.id
                        }).text(bccMsg.text_01), M())
                    },
                    "focusin.fe_brightcove": function() {
                        C.addClass("show")
                    },
                    "keydown.fe_brightcove": function(e) {
                        9 === e.keyCode && e.shiftKey && C.removeClass("show")
                    }
                });
            B.appendTo(E);
            var V = j("mute", bccMsg.text_06).bind("click.fe_brightcove", function() {
                    k()
                }),
                L = j("volume-down", bccMsg.text_08).bind("click.fe_brightcove", function() {
                    P()
                }),
                K = j("volume-up", bccMsg.text_07).bind({
                    "click.fe_brightcove": function() {
                        w()
                    },
                    "focusin.fe_brightcove": function() {
                        C.addClass("show")
                    },
                    "keydown.fe_brightcove": function(e) {
                        9 !== e.keyCode || e.shiftKey || (C.removeClass("show"), I = !0, S.find("a").trigger("focus"))
                    }
                }),
                N = e("<button />", {
                    "class": "bc-cc",
                    tabindex: "-1"
                });
            N.text(bccMsg.text_22), N.appendTo(_);
            var H = !1;
            N.unbind("click.fe_brightcove").bind("click.fe_brightcove", function() {
                {
                    var a = e(".bc-cplayer-control-area").attr("nowvideo");
                    x()
                }
                return bccStatusCcFlag[a] ? (N.hasClass("over") ? (H = !1, N.removeClass("over").addClass("on").attr({
                    title: bccMsg.text_21
                }).text(bccMsg.text_21)) : (H = !0, N.removeClass("on").addClass("over").attr({
                    title: bccMsg.text_20
                }).text(bccMsg.text_20)), p.setCaptionsEnabled(H), _chromelessControls.setVisible(1 == H ? !1 : !0)) : N.attr({
                    title: bccMsg.text_22
                }).text(bccMsg.text_22), !1
            }), V.appendTo(_), L.appendTo(_), K.appendTo(_);
            var R = navigator.userAgent.toLowerCase(),
                U = !1;
            return U = "Netscape" == navigator.appName && -1 != navigator.userAgent.search("Trident") || -1 != R.indexOf("msie") ? !0 : !1, S.find("a").bind(1 == U ? "onfocusin.fe_brightcove" : "focusin.fe_brightcove", function() {
                return I ? void(I = !1) : (K.trigger("focus"), I = !1, !1)
            }), S.find("a").bind("keydown.fe_brightcove", function(e) {
                return 9 === e.keyCode && e.shiftKey ? (K.trigger("focus"), !1) : void 0
            }), bcc_idx++, !1
        }
    }(bcjQuery), bcjQuery(document).ready(function() {
        // "undefined" == typeof APIModules && $("body").append(bcProtocol ? '<script type="text/javascript" src="//admin.brightcove.com/js/APIModules_all.js"></script>' : '<script type="text/javascript" src="//sadmin.brightcove.com/js/APIModules_all.js"></script>'), bcjQuery(document).on("click", ".brightcove-bcc-btn-close", function() {
        //     bccLayerClose(this)
        // })
    });
var bc5playerData = {
        DEV: {
            accountId: "901961867001",
            playerId: "Skefq0fEUZ"
        },
        DEV2: {
            accountId: "901961867001",
            playerId: "Vylv7fdWKl"
        },
        LIVE: {
            accountId: "901973578001",
            playerId: "rkHiJmE8b"
        },
        GLOBAL: {
            accountId: "2933392367001",
            playerId: "HyinAQ4IW"
        },
        EG: {
            accountId: "923162680001",
            playerId: "r1Wa9zBQ8Z"
        },
        CN: {
            accountId: "923270636001",
            playerId: "SylXp4rXLb"
        },
        PK: {
            accountId: "923227816001",
            playerId: "rkx4vzBm8b"
        },
        LEVANT: {
            accountId: "923227815001",
            playerId: "BkuGfH7IZ"
        },
        CO: {
            accountId: "923162663001",
            playerId: "H1R4Pm7UW"
        },
        SG: {
            accountId: "923162665001",
            playerId: "Syz3FXQLW"
        },
        VN: {
            accountId: "923136705001",
            playerId: "ryMuHjmm8W"
        },
        US: {
            accountId: "923227797001",
            playerId: "B1lhu4BX8Z"
        },
        HR: {
            accountId: "923270646001",
            playerId: "rJ0SpNX8W"
        },
        RS: {
            accountId: "923162676001",
            playerId: "Skf0W64mUW"
        },
        SI: {
            accountId: "3855502820001",
            playerId: "ryKYpN7Lb"
        },
        AT: {
            accountId: "923227809001",
            playerId: "SJqA5VQUb"
        },
        CH_FR: {
            accountId: "923227810001",
            playerId: "SJH8oEQIW"
        },
        CH: {
            accountId: "923162673001",
            playerId: "SyIfiVmUZ"
        },
        AR: {
            accountId: "923270634001",
            playerId: "SkoYw7mLZ"
        },
        PY: {
            accountId: "4455299568001",
            playerId: "SyZFOmXIZ"
        },
        UR: {
            accountId: "4455299570001",
            playerId: "ryezNOmXUZ"
        },
        AU: {
            accountId: "923162666001",
            playerId: "H12xqm7Ub"
        },
        NZ: {
            accountId: "923136704001",
            playerId: "BJ7brcXm8W"
        },
        EE: {
            accountId: "923227812001",
            playerId: "rytC3E7LW"
        },
        LV: {
            accountId: "923270644001",
            playerId: "rylCU2NmLW"
        },
        LT: {
            accountId: "923227813001",
            playerId: "BkR5nNXUW"
        },
        BE: {
            accountId: "923136716001",
            playerId: "H1gxqi4Q8b"
        },
        BE_FR: {
            accountId: "923162674001",
            playerId: "rkERsVX8Z"
        },
        NL: {
            accountId: "923136717001",
            playerId: "SklAMhEQ8Z"
        },
        JP: {
            accountId: "923162668001",
            playerId: "H1elEC7Q8W"
        },
        SEC: {
            accountId: "923136708001",
            playerId: "BJmCHrmIb"
        },
        CA: {
            accountId: "923270632001",
            playerId: "BJ04MQXLb"
        },
        CA_FR: {
            accountId: "923227798001",
            playerId: "rkjclX78W"
        },
        CL: {
            accountId: "923227801001",
            playerId: "Sy8mK7Q8Z"
        },
        CZ: {
            accountId: "923270642001",
            playerId: "rJ1TKEXLW"
        },
        SK: {
            accountId: "923227808001",
            playerId: "rylQe94mIb"
        },
        BR: {
            accountId: "923162661001",
            playerId: "rkrg7XmUW"
        },
        FR: {
            accountId: "923227807001",
            playerId: "SkXZOV7Ub"
        },
        GR: {
            accountId: "923136713001",
            playerId: "HJZ0dEmUZ"
        },
        DE: {
            accountId: "923227805001",
            playerId: "HylzJLVQLW"
        },
        HU: {
            accountId: "923270637001",
            playerId: "H14LrEQLb"
        },
        HK: {
            accountId: "923227804001",
            playerId: "S1e6xSr7Ib"
        },
        HK_EN: {
            accountId: "923136709001",
            playerId: "BJnNrrmLZ"
        },
        IT: {
            accountId: "923136712001",
            playerId: "rkgapeE78W"
        },
        ID: {
            accountId: "923162667001",
            playerId: "ryx3c97XUZ"
        },
        KZ_UR: {
            accountId: "923270647001",
            playerId: "HJZfeBQLZ"
        },
        LATIN: {
            accountId: "923136703001",
            playerId: "BJxSu7XQUb"
        },
        LATIN_EN: {
            accountId: "923227800001",
            playerId: "r1WoKH7QIW"
        },
        VE: {
            accountId: "923162662001",
            playerId: "rJhxEsPMz"
        },
        MX: {
            accountId: "923227799001",
            playerId: "SJX05MXQUb"
        },
        N_AFRICA: {
            accountId: "923227817001",
            playerId: "ByImXr78W"
        },
        DK: {
            accountId: "923270638001",
            playerId: "Hyb1DEQ8W"
        },
        FI: {
            accountId: "923162672001",
            playerId: "HkUXD4XUZ"
        },
        NO: {
            accountId: "923227806001",
            playerId: "B1I2PVmLb"
        },
        SE: {
            accountId: "923162671001",
            playerId: "B1jKIVQ8b"
        },
        PT: {
            accountId: "923270640001",
            playerId: "SJburdEmUZ"
        },
        PH: {
            accountId: "923136707001",
            playerId: "r1Mnk67XUZ"
        },
        PL: {
            accountId: "923270641001",
            playerId: "BkjYdNQUZ"
        },
        PE: {
            accountId: "923162664001",
            playerId: "rkXuK77UZ"
        },
        RU: {
            accountId: "923136718001",
            playerId: "BkZBHJrXUW"
        },
        BG: {
            accountId: "923270643001",
            playerId: "r1cK5EmIW"
        },
        RO: {
            accountId: "923136715001",
            playerId: "r1gR45NXIZ"
        },
        ES: {
            accountId: "923162670001",
            playerId: "H1xJrNQUW"
        },
        TW: {
            accountId: "923270635001",
            playerId: "BywFHHmUZ"
        },
        TR: {
            accountId: "923136721001",
            playerId: "r175Zrm8Z"
        },
        UA: {
            accountId: "923162678001",
            playerId: "S1SKkrQIb"
        },
        UA_RU: {
            accountId: "923162677001",
            playerId: "B1Ba1rX8Z"
        },
        IE: {
            accountId: "923136711001",
            playerId: "B1DVe4m8Z"
        },
        UK: {
            accountId: "923136710001",
            playerId: "SycJx4QLW"
        },
        AE: {
            accountId: "923227814001",
            playerId: "BygNUlrX8b"
        },
        AE_ARABIC: {
            accountId: "923136719001",
            playerId: "BJjKlS7UZ"
        },
        IN: {
            accountId: "923162669001",
            playerId: "S1KRCQX8W"
        },
        MY: {
            accountId: "923136706001",
            playerId: "B1EqjmQIW"
        },
        ZA: {
            accountId: "2571515531001",
            playerId: "S1fb7VSQUb"
        },
        AFRICA_EN: {
            accountId: "923270648001",
            playerId: "HJKv7H7UZ"
        },
        AFRICA_FR: {
            accountId: "923227818001",
            playerId: "SkmimH7LZ"
        },
        AFRICA_PT: {
            accountId: "923136723001",
            playerId: "S1b8yEBXLb"
        },
        IRAN: {
            accountId: "923270650001",
            playerId: "r1YRZSmIZ"
        },
        IL: {
            accountId: "923162679001",
            playerId: "ryloagBXLb"
        },
        SA: {
            accountId: "923136720001",
            playerId: "HyItbbS7Ub"
        },
        SA_EN: {
            accountId: "2571515532001",
            playerId: "SJpHbr7Ub"
        },
        TH: {
            accountId: "923227802001",
            playerId: "ryoyiQXIZ"
        },
        AL: {
            accountId: "5395474900001",
            playerId: "S1WPmS4Rg"
        },
        LB: {
            accountId: "5359769185001",
            playerId: "By5uztNAe"
        },
        MM: {
            accountId: "5395474902001",
            playerId: "BJWPXt4Al"
        },
        GCS: {
            accountId: "1852113008001",
            playerId: "B1HX3oXbG"
        },
        SC: {
            accountId: "1275380501001",
            playerId: "rJUZMbBZG"
        },
        LED: {
            accountId: "2172563229001",
            playerId: "SJEqMbSWM"
        },
        UK_CS: {
            accountId: "5675787969001",
            playerId: "Hkmjd40bM"
        },
        DE_CS: {
            accountId: "5675787970001",
            playerId: "ByxCBuECZG"
        },
        BE_CS: {
            accountId: "5675787971001",
            playerId: "r1SZIVRWf"
        },
        BE_FR_CS: {
            accountId: "5675787972001",
            playerId: "r16xOECbz"
        },
        NL_CS: {
            accountId: "5675788007001",
            playerId: "HymXOVAWf"
        },
        ACE: {
            accountId: "5685289444001",
            playerId: "Byn7wEUzz"
        },
        US_CS: {
            accountId: "5709700875001",
            playerId: "SJC96gsNf"
        },
        CA_FR_CS: {
            accountId: "5709700876001",
            playerId: "rye60eiNG"
        },
        CA_CS: {
            accountId: "5709700877001",
            playerId: "BJJnCxi4z"
        },
        MX_CS: {
            accountId: "5709700878001",
            playerId: "SyFThbi4G"
        },
        BR_CS: {
            accountId: "5709700879001",
            playerId: "rypXhbjEf"
        },
        LATIN_CS: {
            accountId: "5709700880001",
            playerId: "rJ3qnZoVz"
        },
        LATIN_EN_CS: {
            accountId: "5709700881001",
            playerId: "rJSnnZjNz"
        },
        VE_CS: {
            accountId: "5709700882001",
            playerId: "HyyTnWo4M"
        },
        CO_CS: {
            accountId: "5709700883001",
            playerId: "B1sd6ejEf"
        },
        AR_CS: {
            accountId: "5709700884001",
            playerId: "ByGBCloVz"
        },
        CL_CS: {
            accountId: "5709700885001",
            playerId: "HyjTClsVf"
        },
        PE_CS: {
            accountId: "5709700887001",
            playerId: "H1qXpZs4z"
        },
        SG_CS: {
            accountId: "5709700888001",
            playerId: "BywY6goNz"
        },
        AU_CS: {
            accountId: "5709700889001",
            playerId: "rkZZPClsEf"
        },
        NZ_CS: {
            accountId: "5709700890001",
            playerId: "H1jD0xsVf"
        },
        ID_CS: {
            accountId: "5709700891001",
            playerId: "rJnOhZi4f"
        },
        TH_CS: {
            accountId: "5711373553001",
            playerId: "SkiJkGsNG"
        },
        VN_CS: {
            accountId: "5711373555001",
            playerId: "rJmcTxiEz"
        },
        MY_CS: {
            accountId: "5711373556001",
            playerId: "SJxYtAZiVG"
        },
        PH_CS: {
            accountId: "5711373557001",
            playerId: "BJ8M6Wj4M"
        },
        TW_CS: {
            accountId: "5711373558001",
            playerId: "rJxptpbo4f"
        },
        JP_CS: {
            accountId: "5711373559001",
            playerId: "Bk4j0ljVG"
        },
        IN_CS: {
            accountId: "5711373560001",
            playerId: "Sk7CdCZjNG"
        },
        CN_CS: {
            accountId: "5711373561001",
            playerId: "S1xr6gsNz"
        },
        HK_CS: {
            accountId: "5711373562001",
            playerId: "HJsUhboVf"
        },
        HK_EN_CS: {
            accountId: "5711373563001",
            playerId: "H1vvhboNf"
        },
        IE_CS: {
            accountId: "5711373564001",
            playerId: "HJgpICZjVM"
        },
        IT_CS: {
            accountId: "5711373565001",
            playerId: "H1Md2boEf"
        },
        ES_CS: {
            accountId: "5711373566001",
            playerId: "By1FaWoNG"
        },
        HU_CS: {
            accountId: "5711373567001",
            playerId: "Bye0rnZoVG"
        },
        SE_CS: {
            accountId: "5711373568001",
            playerId: "Skhl6biEf"
        },
        DK_CS: {
            accountId: "5711373569001",
            playerId: "HkxTRhWjVG"
        },
        FI_CS: {
            accountId: "5711373571001",
            playerId: "Bydk6ZiNM"
        },
        NO_CS: {
            accountId: "5711373572001",
            playerId: "rkMeTWjEz"
        },
        FR_CS: {
            accountId: "5711373573001",
            playerId: "S1ONnWs4G"
        },
        PT_CS: {
            accountId: "5711373574001",
            playerId: "rkZwWaWiVz"
        },
        PL_CS: {
            accountId: "5711373575001",
            playerId: "HyxXTWiVG"
        },
        GR_CS: {
            accountId: "5711373576001",
            playerId: "Hkx7S3WsNM"
        },
        CZ_CS: {
            accountId: "5711373577001",
            playerId: "SJOfnWjEf"
        },
        SK_CS: {
            accountId: "5711373578001",
            playerId: "rkm7hZoNG"
        },
        RO_CS: {
            accountId: "5711373579001",
            playerId: "Sk2D6ZoEG"
        },
        BG_CS: {
            accountId: "5711373580001",
            playerId: "BkzvaZjVG"
        },
        AT_CS: {
            accountId: "5711373581001",
            playerId: "SkaMRgjEz"
        },
        CH_CS: {
            accountId: "5711373582001",
            playerId: "SJumAxjEG"
        },
        CH_FR_CS: {
            accountId: "5711373583001",
            playerId: "BylOVAxoVM"
        },
        LV_CS: {
            accountId: "5711373584001",
            playerId: "B1CFCloEG"
        },
        LT_CS: {
            accountId: "5711373585001",
            playerId: "rytcRljEz"
        },
        EE_CS: {
            accountId: "5711373586001",
            playerId: "ryfYAljEG"
        },
        RS_CS: {
            accountId: "5711373587001",
            playerId: "Skmu3agsEf"
        },
        HR_CS: {
            accountId: "5711373588001",
            playerId: "Bkcials4G"
        },
        RU_CS: {
            accountId: "5711373589001",
            playerId: "BJxrLabiNz"
        },
        UA_CS: {
            accountId: "5711373590001",
            playerId: "SylNBRZiVG"
        },
        UA_RU_CS: {
            accountId: "5711373592001",
            playerId: "rygURWsNM"
        },
        KZ_RU_CS: {
            accountId: "5711373593001",
            playerId: "BJq31zoVG"
        },
        AE_CS: {
            accountId: "5711373594001",
            playerId: "HJgEORWiNz"
        },
        AE_ARABIC_CS: {
            accountId: "5711373595001",
            playerId: "H1ecP0biEG"
        },
        IL_CS: {
            accountId: "5711373596001",
            playerId: "SyyCCZs4G"
        },
        SA_CS: {
            accountId: "5711373597001",
            playerId: "Skd0AboVz"
        },
        SA_EN_CS: {
            accountId: "5711373598001",
            playerId: "BJfkyGoEM"
        },
        TR_CS: {
            accountId: "5711373599001",
            playerId: "Hku9aWi4M"
        },
        IRAN_CS: {
            accountId: "5711373600001",
            playerId: "HkVTCWjVz"
        },
        LEVANT_CS: {
            accountId: "5711373601001",
            playerId: "HkHwplo4M"
        },
        PK_CS: {
            accountId: "5711373602001",
            playerId: "S12rTgoEG"
        },
        EG_CS: {
            accountId: "5711373603001",
            playerId: "SkoQTljVG"
        },
        N_AFRICA_CS: {
            accountId: "5711373604001",
            playerId: "SyeMCnZjNG"
        },
        AFRICA_EN_CS: {
            accountId: "5711373605001",
            playerId: "By1sAbiVM"
        },
        AFRICA_FR_CS: {
            accountId: "5711373606001",
            playerId: "S1MhiRbjEf"
        },
        AFRICA_PT_CS: {
            accountId: "5711373607001",
            playerId: "SyZtnCbs4M"
        },
        ZA_CS: {
            accountId: "5711373608001",
            playerId: "SJNq0Wi4G"
        },
        SI_CS: {
            accountId: "5711373609001",
            playerId: "rJzfRxsVf"
        },
        PY_CS: {
            accountId: "5711373610001",
            playerId: "SkTHCgo4f"
        },
        UR_CS: {
            accountId: "5711373612001",
            playerId: "ByII0eiNf"
        },
        LB_CS: {
            accountId: "5711373613001",
            playerId: "HJK8TlsVz"
        },
        AL_CS: {
            accountId: "5711373614001",
            playerId: "HJjongoEf"
        },
        MM_CS: {
            accountId: "5711373615001",
            playerId: "rkyO6xiNM"
        }
    },
    bcHtml5Player = new function() {
        function ie9CallBack(vodId) {
            bcCLog("html5 ie9 callback !!!!!!!" + vodId);
            var bc5Info = bc5PlayerMap.get(vodId);
            bcCLog(bc5Info), bcCLog("html5 ie9 callback End !!!!!!!" + bc5Info.id), videojs(bc5Info.id).ready(function() {
                bc5MyPlayer = this, bc5MyPlayer.autoplay(eval(bc5Info.autoplay)), bc5MyPlayer.on("play", function() {
                    bcjQuery("#" + bc5Info.id).find(".vjs-big-play-button").hide()
                }), bcjQuery(bc5Info.targetId + " .vjs-volume-menu-button").keydown(function(e) {
                    if (32 == e.keyCode) {
                        var a = bc5MyPlayer.muted();
                        bc5MyPlayer.muted(1 == a ? !1 : !0)
                    }
                }), bcjQuery(".video-area").find(".vjs-big-play-button").on("keydown", function(e) {
                    return 9 == e.which && e.shiftKey ? !1 : void 0
                })
            })
        }

        function fnTabIndexSort(e) {
            bcCLog("html5 fnTabIndexSort !!!!!!!" + e);
            var a = bc5PlayerMap.get(e);
            bcCLog(a), bcCLog("html5 fnTabIndexSort End !!!!!!!");
            var t = navigator.userAgent.toLowerCase();
            "Netscape" == navigator.appName && -1 != navigator.userAgent.search("Trident") || -1 != t.indexOf("msie") || (bcjQuery(a.targetId + " .vjs-captions-button").keydown(function(e) {
                13 == e.keyCode && bcjQuery(a.targetId + " .vjs-modal-overlay").hide()
            }), bcjQuery(a.targetId + " .vjs-texttrack-settings").keydown(function() {
                bcjQuery(a.targetId + " .vjs-modal-overlay").css("style", "")
            }))
        }
        var bc5PlayerMap = new BcHashMap;
        this.myBc5playerData, this.html5playerData, this.bc5MyPlayer,
            function($) {
                $.fn.bcHtml5Player = function(alais) {
                    var bc5 = bcHtml5Player,
                        arr = Array.prototype.slice.call(arguments, 1);
                    return bc5.checkNull(arr[0]) && (arr[0] = ""), bc5.checkNull(arr[1]) && (arr[1] = ""), bc5.checkNull(arr[2]) && (arr[2] = "100%"), bc5.checkNull(arr[3]) && (arr[3] = "100%"), bc5.checkNull(arr[4]) && (arr[4] = "false"), bc5.checkNull(arr[5]) && (arr[5] = "false"), myBc5playerData = eval("bc5playerData." + alais.toUpperCase()), "undefined" != typeof myBc5playerData ? (html5playerData = {
                        targetId: this.selector,
                        alais: alais,
                        id: arr[0] + "_videoTagID",
                        videoId: arr[1],
                        width: arr[2],
                        height: arr[3],
                        autoplay: arr[4],
                        ccUrl: arr[5],
                        accountId: myBc5playerData.accountId,
                        playerId: myBc5playerData.playerId
                    }, bc5PlayerMap.put(html5playerData.videoId, html5playerData), arr = [bcjQuery(this)].concat(arr), bc5.run.apply(bc5, arr)) : void 0
                }
            }(bcjQuery), this.run = function(e, a, t) {
                bcCLog("html5 Run!! " + t);
                var c = bc5PlayerMap.get(t);
                bcCLog(c), bcCLog("html5 Run End!! ");
                var r = ".vjs-menu li:focus{border:white dashed 1px}.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-control,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-control-bar,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-progress-control,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-time-divider {transition-delay: 0s!important;-webkit-transition-delay: 0s!important;-moz-transition-delay: 0s!important;-ms-transition-delay: 0s!important;-o-transition-delay: 0s!important;}.vjs-big-play-button {top:0px!important; left:0px!important; right:0px!important; bottom:0px!important; margin:auto!important;}.vjs-big-play-button:focus { border:white dashed 1px }.vjs-play-control:focus{ border:white dashed 1px }.vjs-progress-holder:focus { border:white dashed 1px }.vjs-volume-menu-button:focus { border:white dashed 1px }.vjs-captions-button:focus { border:white dashed 1px }.vjs-fullscreen-control:focus { border:white dashed 1px }.vjs-volume-bar:focus{ border:white dashed 1px }.vjs-control-bar.ie8 {display:none !important;}.vjs-fade-out {display: block;visibility: hidden;opacity: 0;-webkit-transition: visibility 1.5s, opacity 1.5s;-moz-transition: visibility 1.5s, opacity 1.5s;-ms-transition: visibility 1.5s, opacity 1.5s;-o-transition: visibility 1.5s, opacity 1.5s;transition: visibility 1.5s, opacity 1.5s;-webkit-transition-delay: 2s;-moz-transition-delay: 2s;-ms-transition-delay: 2s;-o-transition-delay: 2s;transition-delay: 2s;}";
                r += "/* for IE */ #brightCoveArea2 span {display:inline !important}/* fix bc html5 player */#brightCoveArea2 .vjs-control-text{display:none !important;}.single-area.video-KV.on {max-height: 810px; overflow: hidden;}.vjs-big-play-button{left:0 !important; right:0 !important; top:0 !important; bottom:0 !important; margin: auto;}.vjs-playing .vjs-big-play-button{display:none !important;}.rtl .vjs-control-bar, .rtl .vjs-control-bar *{direction:ltr !important;}";
                var o, d, n;
                n = document.getElementsByTagName("head")[0], document.createStyleSheet ? (o = document.createStyleSheet(), o.cssText = r) : (d = document.createElement("style"), d.type = "text/css", d.styleSheet ? d.styleSheet.cssText = r : d.appendChild(document.createTextNode(r)), n.appendChild(d)), "8.0" == getIeVersion() && (document.createElement("video"), document.createElement("track"));
                var l = this;
                bcjQuery(e).append(this.markup(t));
                var i = document.createElement("script");
                i.type = "text/javascript", i.src = "//players.brightcove.net/" + c.accountId + "/" + c.playerId + "_default/index.min.js", -1 === getIeVersion() ? (i.onload = function() {
                    setTimeout(function() {
                        l.callback(t)
                    }, 500)
                }, document.body.appendChild(i)) : 8 === getIeVersion() ? (i.onreadystatechange = function() {
                    ("loaded" == i.readyState || "complete" == i.readyState) && setTimeout(function() {
                        l.callback(t)
                    }, 500)
                }, document.body.appendChild(i)) : 9 === getIeVersion() ? (i.onload = function() {
                    setTimeout(function() {
                        l.callback(t)
                    }, 500)
                }, bcjQuery(c.targetId).append(i)) : 10 === getIeVersion() && (i.onload = function() {
                    setTimeout(function() {
                        l.callback(t)
                    }, 500)
                }, document.body.appendChild(i))
            }, this.markup = function(e) {
                bcCLog("html5 markup !!!!!!!");
                var a = bc5PlayerMap.get(e);
                bcCLog(a), bcCLog("html5 markup End !!!!!!!");
                var t = "";
                return t += '<div style="display:block;position:relative;max-width:100%;width:' + a.width + ";height:" + a.height + ';">', t += '<div style="padding-top: 56.25%;">', t += '<video id="' + a.id + '"', t += ' data-video-id="' + a.videoId + '"', t += ' data-account="' + a.accountId + '"', t += ' data-player="' + a.playerId + '"', t += ' data-embed="default"', t += ' class="video-js"', t += ' style="width: ' + a.width + "; height: " + a.height + ';  position: absolute; top: 0px; bottom: 0px; right: 0px; left: 0px;"', t += " controls>", "false" != a.ccUrl && (t += ' <track kind="captions" src="' + a.ccUrl + '" srclang="en" label="English" default>'), t += " </video>", t += " </div></div>"
            }, this.callback = function(e) {
                bcCLog("html5 callback !!!!!!!" + e);
                var a = bc5PlayerMap.get(e);
                bcCLog(a.id), bcCLog("html5 callback End !!!!!!!"), videojs(a.id).ready(function() {
                    bc5MyPlayer = this;
                    var e = "true" === a.autoplay;
                    bcCLog(bc5MyPlayer), bcCLog("html5 callback bc5MyPlayer !!!!!!!");
                    var t = bcjQuery("#" + a.id),
                        c = (t.find(".vjs-dock-text"), t.find(".vjs-dock-title"), t.find(".vjs-control-text"), t.find(".vjs-control-bar"), t.find(".vjs-big-play-button")),
                        r = t.find(".vjs-progress-holder"),
                        o = t.find(".vjs-tooltip-progress-bar"),
                        d = t.find(".vjs-menu-button"),
                        n = t.find(".vjs-text-track-display");
                    if (r.attr({
                            "aria-valuenow": "0"
                        }), o.attr({
                            role: "slider",
                            "aria-valuemin": "0",
                            "aria-valuemax": "100",
                            "aria-valuenow": "0"
                        }), d.attr("role", "menu"), n.attr("tabIndex", 0), (9 === getIeVersion() || 10 === getIeVersion()) && t.find(".vjs-captions-button").on("mouseenter", function(e) {
                            e.stopPropagation(), bcjQuery(e.currentTarget).find(".vjs-menu-content").css("background-color", "rgba(43, 51, 63, 0.7)")
                        }), navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
                        var l = t.closest(".video-area_5").find(".brightcove-bcc-btn-close, .brightcove-bc5-btn-close");
                        l.length && (l.off("ffoutline").on("focusin.ffoutline", function(e) {
                            l.css("outline", "1px solid #4d90fe")
                        }), l.off("ffoutline").on("focusout.ffoutline", function(e) {
                            l.css("outline", "unset")
                        }))
                    }
                    if (t.hasClass("vjs-v5")) {
                        var i = "",
                            y = "",
                            p = "",
                            s = null;
                        i = ".vjs-control-bar button { font-family: VideoJS !important; } .vjs-big-play-button { font-family: VideoJS !important; }", s = document.getElementsByTagName("head")[0], document.createStyleSheet ? (y = document.createStyleSheet(), y.cssText = i) : (p = document.createElement("style"), p.type = "text/css", p.styleSheet ? p.styleSheet.cssText = i : p.appendChild(document.createTextNode(i)), s.appendChild(p))
                    }
                    var u = !1;
                    n.length && (n.off("DOMSubtreeModified.indexable propertychange.indexable").on("DOMSubtreeModified.indexable propertychange.indexable", function(e) {
                        e.stopPropagation(), n.find("div").length > 2 ? u || (n.attr("tabindex", 0), u = !0) : u && (u = !1, n.removeAttr("tabindex"))
                    }), n.trigger("DOMSubtreeModified.indexable propertychange.indexable")), e && c.trigger("click"), bcjQuery(a.targetId + " .vjs-volume-menu-button").keydown(function(e) {
                        if (32 == e.keyCode) {
                            var a = bc5MyPlayer.muted();
                            bc5MyPlayer.muted(1 == a ? !1 : !0)
                        }
                    }), bcjQuery(".video-area").find(".vjs-big-play-button").on("keydown", function(e) {
                        return 9 == e.which && e.shiftKey ? !1 : void 0
                    });
                    /iphone|ipad|ipod|android/i.test(navigator.userAgent.toLowerCase())
                })
            }, this.checkNull = function(e) {
                return null == e || "" == e
            }, bcjQuery(document).on("click", ".brightcove-bc5-btn-close", function() {
                bc5LayerClose(this)
            })
    };
/*! iScroll v5.2.0-snapshot ~ (c) 2008-2017 Matteo Spinelli ~ http://cubiq.org/license */
(function (window, document, Math) {
var rAF = window.requestAnimationFrame	||
	window.webkitRequestAnimationFrame	||
	window.mozRequestAnimationFrame		||
	window.oRequestAnimationFrame		||
	window.msRequestAnimationFrame		||
	function (callback) { window.setTimeout(callback, 1000 / 60); };

var utils = (function () {
	var me = {};

	var _elementStyle = document.createElement('div').style;
	var _vendor = (function () {
		var vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],
			transform,
			i = 0,
			l = vendors.length;

		for ( ; i < l; i++ ) {
			transform = vendors[i] + 'ransform';
			if ( transform in _elementStyle ) return vendors[i].substr(0, vendors[i].length-1);
		}

		return false;
	})();

	function _prefixStyle (style) {
		if ( _vendor === false ) return false;
		if ( _vendor === '' ) return style;
		return _vendor + style.charAt(0).toUpperCase() + style.substr(1);
	}

	me.getTime = Date.now || function getTime () { return new Date().getTime(); };

	me.extend = function (target, obj) {
		for ( var i in obj ) {
			target[i] = obj[i];
		}
	};

	me.addEvent = function (el, type, fn, capture) {
		el.addEventListener(type, fn, !!capture);
	};

	me.removeEvent = function (el, type, fn, capture) {
		el.removeEventListener(type, fn, !!capture);
	};

	me.prefixPointerEvent = function (pointerEvent) {
		return window.MSPointerEvent ?
			'MSPointer' + pointerEvent.charAt(7).toUpperCase() + pointerEvent.substr(8):
			pointerEvent;
	};

	me.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {
		var distance = current - start,
			speed = Math.abs(distance) / time,
			destination,
			duration;

		deceleration = deceleration === undefined ? 0.0006 : deceleration;

		destination = current + ( speed * speed ) / ( 2 * deceleration ) * ( distance < 0 ? -1 : 1 );
		duration = speed / deceleration;

		if ( destination < lowerMargin ) {
			destination = wrapperSize ? lowerMargin - ( wrapperSize / 2.5 * ( speed / 8 ) ) : lowerMargin;
			distance = Math.abs(destination - current);
			duration = distance / speed;
		} else if ( destination > 0 ) {
			destination = wrapperSize ? wrapperSize / 2.5 * ( speed / 8 ) : 0;
			distance = Math.abs(current) + destination;
			duration = distance / speed;
		}

		return {
			destination: Math.round(destination),
			duration: duration
		};
	};

	var _transform = _prefixStyle('transform');

	me.extend(me, {
		hasTransform: _transform !== false,
		hasPerspective: _prefixStyle('perspective') in _elementStyle,
		hasTouch: 'ontouchstart' in window,
		hasPointer: !!(window.PointerEvent || window.MSPointerEvent), // IE10 is prefixed
		hasTransition: _prefixStyle('transition') in _elementStyle
	});

	/*
	This should find all Android browsers lower than build 535.19 (both stock browser and webview)
	- galaxy S2 is ok
    - 2.3.6 : `AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1`
    - 4.0.4 : `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`
   - galaxy S3 is badAndroid (stock brower, webview)
     `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`
   - galaxy S4 is badAndroid (stock brower, webview)
     `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`
   - galaxy S5 is OK
     `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`
   - galaxy S6 is OK
     `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`
  */
	me.isBadAndroid = (function() {
		var appVersion = window.navigator.appVersion;
		// Android browser is not a chrome browser.
		if (/Android/.test(appVersion) && !(/Chrome\/\d/.test(appVersion))) {
			var safariVersion = appVersion.match(/Safari\/(\d+.\d)/);
			if(safariVersion && typeof safariVersion === "object" && safariVersion.length >= 2) {
				return parseFloat(safariVersion[1]) < 535.19;
			} else {
				return true;
			}
		} else {
			return false;
		}
	})();

	me.extend(me.style = {}, {
		transform: _transform,
		transitionTimingFunction: _prefixStyle('transitionTimingFunction'),
		transitionDuration: _prefixStyle('transitionDuration'),
		transitionDelay: _prefixStyle('transitionDelay'),
		transformOrigin: _prefixStyle('transformOrigin'),
		touchAction: _prefixStyle('touchAction')
	});

	me.hasClass = function (e, c) {
		var re = new RegExp("(^|\\s)" + c + "(\\s|$)");
		return re.test(e.className);
	};

	me.addClass = function (e, c) {
		if ( me.hasClass(e, c) ) {
			return;
		}

		var newclass = e.className.split(' ');
		newclass.push(c);
		e.className = newclass.join(' ');
	};

	me.removeClass = function (e, c) {
		if ( !me.hasClass(e, c) ) {
			return;
		}

		var re = new RegExp("(^|\\s)" + c + "(\\s|$)", 'g');
		e.className = e.className.replace(re, ' ');
	};

	me.offset = function (el) {
		var left = -el.offsetLeft,
			top = -el.offsetTop;

		// jshint -W084
		while (el = el.offsetParent) {
			left -= el.offsetLeft;
			top -= el.offsetTop;
		}
		// jshint +W084

		return {
			left: left,
			top: top
		};
	};

	me.preventDefaultException = function (el, exceptions) {
		for ( var i in exceptions ) {
			if ( exceptions[i].test(el[i]) ) {
				return true;
			}
		}

		return false;
	};

	me.extend(me.eventType = {}, {
		touchstart: 1,
		touchmove: 1,
		touchend: 1,

		mousedown: 2,
		mousemove: 2,
		mouseup: 2,

		pointerdown: 3,
		pointermove: 3,
		pointerup: 3,

		MSPointerDown: 3,
		MSPointerMove: 3,
		MSPointerUp: 3
	});

	me.extend(me.ease = {}, {
		quadratic: {
			style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',
			fn: function (k) {
				return k * ( 2 - k );
			}
		},
		circular: {
			style: 'cubic-bezier(0.1, 0.57, 0.1, 1)',	// Not properly "circular" but this looks better, it should be (0.075, 0.82, 0.165, 1)
			fn: function (k) {
				return Math.sqrt( 1 - ( --k * k ) );
			}
		},
		back: {
			style: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',
			fn: function (k) {
				var b = 4;
				return ( k = k - 1 ) * k * ( ( b + 1 ) * k + b ) + 1;
			}
		},
		bounce: {
			style: '',
			fn: function (k) {
				if ( ( k /= 1 ) < ( 1 / 2.75 ) ) {
					return 7.5625 * k * k;
				} else if ( k < ( 2 / 2.75 ) ) {
					return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;
				} else if ( k < ( 2.5 / 2.75 ) ) {
					return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;
				} else {
					return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;
				}
			}
		},
		elastic: {
			style: '',
			fn: function (k) {
				var f = 0.22,
					e = 0.4;

				if ( k === 0 ) { return 0; }
				if ( k == 1 ) { return 1; }

				return ( e * Math.pow( 2, - 10 * k ) * Math.sin( ( k - f / 4 ) * ( 2 * Math.PI ) / f ) + 1 );
			}
		}
	});

	me.tap = function (e, eventName) {
		var ev = document.createEvent('Event');
		ev.initEvent(eventName, true, true);
		ev.pageX = e.pageX;
		ev.pageY = e.pageY;
		e.target.dispatchEvent(ev);
	};

	me.click = function (e) {
		var target = e.target,
			ev;

		if ( !(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName) ) {
			// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/initMouseEvent
			// initMouseEvent is deprecated.
			ev = document.createEvent(window.MouseEvent ? 'MouseEvents' : 'Event');
			ev.initEvent('click', true, true);
			ev.view = e.view || window;
			ev.detail = 1;
			ev.screenX = target.screenX || 0;
			ev.screenY = target.screenY || 0;
			ev.clientX = target.clientX || 0;
			ev.clientY = target.clientY || 0;
			ev.ctrlKey = !!e.ctrlKey;
			ev.altKey = !!e.altKey;
			ev.shiftKey = !!e.shiftKey;
			ev.metaKey = !!e.metaKey;
			ev.button = 0;
			ev.relatedTarget = null;
			ev._constructed = true;
			target.dispatchEvent(ev);
		}
	};

	me.getTouchAction = function(eventPassthrough, addPinch) {
		var touchAction = 'none';
		if ( eventPassthrough === 'vertical' ) {
			touchAction = 'pan-y';
		} else if (eventPassthrough === 'horizontal' ) {
			touchAction = 'pan-x';
		}
		if (addPinch && touchAction != 'none') {
			// add pinch-zoom support if the browser supports it, but if not (eg. Chrome <55) do nothing
			touchAction += ' pinch-zoom';
		}
		return touchAction;
	};

	me.getRect = function(el) {
		if (el instanceof SVGElement) {
			var rect = el.getBoundingClientRect();
			return {
				top : rect.top,
				left : rect.left,
				width : rect.width,
				height : rect.height
			};
		} else {
			return {
				top : el.offsetTop,
				left : el.offsetLeft,
				width : el.offsetWidth,
				height : el.offsetHeight
			};
		}
	};

	return me;
})();
function IScroll (el, options) {
	this.wrapper = typeof el == 'string' ? document.querySelector(el) : el;
	this.scroller = this.wrapper.children[0];
	this.scrollerStyle = this.scroller.style;		// cache style for better performance

	this.options = {

		resizeScrollbars: true,

		mouseWheelSpeed: 20,

		snapThreshold: 0.334,

// INSERT POINT: OPTIONS
		disablePointer : !utils.hasPointer,
		disableTouch : utils.hasPointer || !utils.hasTouch,
		disableMouse : utils.hasPointer || utils.hasTouch,
		startX: 0,
		startY: 0,
		scrollY: true,
		directionLockThreshold: 5,
		momentum: true,

		bounce: true,
		bounceTime: 600,
		bounceEasing: '',

		preventDefault: true,
		preventDefaultException: { tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/ },

		HWCompositing: true,
		useTransition: true,
		useTransform: true,
		bindToWrapper: typeof window.onmousedown === "undefined"
	};

	for ( var i in options ) {
		this.options[i] = options[i];
	}

	// Normalize options
	this.translateZ = this.options.HWCompositing && utils.hasPerspective ? ' translateZ(0)' : '';

	this.options.useTransition = utils.hasTransition && this.options.useTransition;
	this.options.useTransform = utils.hasTransform && this.options.useTransform;

	this.options.eventPassthrough = this.options.eventPassthrough === true ? 'vertical' : this.options.eventPassthrough;
	this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;

	// If you want eventPassthrough I have to lock one of the axes
	this.options.scrollY = this.options.eventPassthrough == 'vertical' ? false : this.options.scrollY;
	this.options.scrollX = this.options.eventPassthrough == 'horizontal' ? false : this.options.scrollX;

	// With eventPassthrough we also need lockDirection mechanism
	this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;
	this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;

	this.options.bounceEasing = typeof this.options.bounceEasing == 'string' ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;

	this.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;

	if ( this.options.tap === true ) {
		this.options.tap = 'tap';
	}

	// https://github.com/cubiq/iscroll/issues/1029
	if (!this.options.useTransition && !this.options.useTransform) {
		if(!(/relative|absolute/i).test(this.scrollerStyle.position)) {
			this.scrollerStyle.position = "relative";
		}
	}

	if ( this.options.shrinkScrollbars == 'scale' ) {
		this.options.useTransition = false;
	}

	this.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1;

// INSERT POINT: NORMALIZATION

	// Some defaults
	this.x = 0;
	this.y = 0;
	this.directionX = 0;
	this.directionY = 0;
	this._events = {};

// INSERT POINT: DEFAULTS

	this._init();
	this.refresh();

	this.scrollTo(this.options.startX, this.options.startY);
	this.enable();
}

IScroll.prototype = {
	version: '5.2.0-snapshot',

	_init: function () {
		this._initEvents();

		if ( this.options.scrollbars || this.options.indicators ) {
			this._initIndicators();
		}

		if ( this.options.mouseWheel ) {
			this._initWheel();
		}

		if ( this.options.snap ) {
			this._initSnap();
		}

		if ( this.options.keyBindings ) {
			this._initKeys();
		}

// INSERT POINT: _init

	},

	destroy: function () {
		this._initEvents(true);
		clearTimeout(this.resizeTimeout);
 		this.resizeTimeout = null;
		this._execEvent('destroy');
	},

	_transitionEnd: function (e) {
		if ( e.target != this.scroller || !this.isInTransition ) {
			return;
		}

		this._transitionTime();
		if ( !this.resetPosition(this.options.bounceTime) ) {
			this.isInTransition = false;
			this._execEvent('scrollEnd');
		}
	},

	_start: function (e) {
		// React to left mouse button only
		if ( utils.eventType[e.type] != 1 ) {
		  // for button property
		  // http://unixpapa.com/js/mouse.html
		  var button;
	    if (!e.which) {
	      /* IE case */
	      button = (e.button < 2) ? 0 :
	               ((e.button == 4) ? 1 : 2);
	    } else {
	      /* All others */
	      button = e.button;
	    }
			if ( button !== 0 ) {
				return;
			}
		}

		if ( !this.enabled || (this.initiated && utils.eventType[e.type] !== this.initiated) ) {
			return;
		}

		if ( this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {
			e.preventDefault();
		}

		var point = e.touches ? e.touches[0] : e,
			pos;

		this.initiated	= utils.eventType[e.type];
		this.moved		= false;
		this.distX		= 0;
		this.distY		= 0;
		this.directionX = 0;
		this.directionY = 0;
		this.directionLocked = 0;

		this.startTime = utils.getTime();

		if ( this.options.useTransition && this.isInTransition ) {
			this._transitionTime();
			this.isInTransition = false;
			pos = this.getComputedPosition();
			this._translate(Math.round(pos.x), Math.round(pos.y));
			this._execEvent('scrollEnd');
		} else if ( !this.options.useTransition && this.isAnimating ) {
			this.isAnimating = false;
			this._execEvent('scrollEnd');
		}

		this.startX    = this.x;
		this.startY    = this.y;
		this.absStartX = this.x;
		this.absStartY = this.y;
		this.pointX    = point.pageX;
		this.pointY    = point.pageY;

		this._execEvent('beforeScrollStart');
	},

	_move: function (e) {
		if ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {
			return;
		}

		if ( this.options.preventDefault ) {	// increases performance on Android? TODO: check!
			e.preventDefault();
		}

		var point		= e.touches ? e.touches[0] : e,
			deltaX		= point.pageX - this.pointX,
			deltaY		= point.pageY - this.pointY,
			timestamp	= utils.getTime(),
			newX, newY,
			absDistX, absDistY;

		this.pointX		= point.pageX;
		this.pointY		= point.pageY;

		this.distX		+= deltaX;
		this.distY		+= deltaY;
		absDistX		= Math.abs(this.distX);
		absDistY		= Math.abs(this.distY);

		// We need to move at least 10 pixels for the scrolling to initiate
		if ( timestamp - this.endTime > 300 && (absDistX < 10 && absDistY < 10) ) {
			return;
		}

		// If you are scrolling in one direction lock the other
		if ( !this.directionLocked && !this.options.freeScroll ) {
			if ( absDistX > absDistY + this.options.directionLockThreshold ) {
				this.directionLocked = 'h';		// lock horizontally
			} else if ( absDistY >= absDistX + this.options.directionLockThreshold ) {
				this.directionLocked = 'v';		// lock vertically
			} else {
				this.directionLocked = 'n';		// no lock
			}
		}

		if ( this.directionLocked == 'h' ) {
			if ( this.options.eventPassthrough == 'vertical' ) {
				e.preventDefault();
			} else if ( this.options.eventPassthrough == 'horizontal' ) {
				this.initiated = false;
				return;
			}

			deltaY = 0;
		} else if ( this.directionLocked == 'v' ) {
			if ( this.options.eventPassthrough == 'horizontal' ) {
				e.preventDefault();
			} else if ( this.options.eventPassthrough == 'vertical' ) {
				this.initiated = false;
				return;
			}

			deltaX = 0;
		}

		deltaX = this.hasHorizontalScroll ? deltaX : 0;
		deltaY = this.hasVerticalScroll ? deltaY : 0;

		newX = this.x + deltaX;
		newY = this.y + deltaY;

		// Slow down if outside of the boundaries
		if ( newX > 0 || newX < this.maxScrollX ) {
			newX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;
		}
		if ( newY > 0 || newY < this.maxScrollY ) {
			newY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;
		}

		this.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;
		this.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;

		if ( !this.moved ) {
			this._execEvent('scrollStart');
		}

		this.moved = true;

		this._translate(newX, newY);

/* REPLACE START: _move */

		if ( timestamp - this.startTime > 300 ) {
			this.startTime = timestamp;
			this.startX = this.x;
			this.startY = this.y;
		}

/* REPLACE END: _move */

	},

	_end: function (e) {
		if ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {
			return;
		}

		if ( this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {
			e.preventDefault();
		}

		var point = e.changedTouches ? e.changedTouches[0] : e,
			momentumX,
			momentumY,
			duration = utils.getTime() - this.startTime,
			newX = Math.round(this.x),
			newY = Math.round(this.y),
			distanceX = Math.abs(newX - this.startX),
			distanceY = Math.abs(newY - this.startY),
			time = 0,
			easing = '';

		this.isInTransition = 0;
		this.initiated = 0;
		this.endTime = utils.getTime();

		// reset if we are outside of the boundaries
		if ( this.resetPosition(this.options.bounceTime) ) {
			return;
		}

		this.scrollTo(newX, newY);	// ensures that the last position is rounded

		// we scrolled less than 10 pixels
		if ( !this.moved ) {
			if ( this.options.tap ) {
				utils.tap(e, this.options.tap);
			}

			if ( this.options.click ) {
				utils.click(e);
			}

			this._execEvent('scrollCancel');
			return;
		}

		if ( this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100 ) {
			this._execEvent('flick');
			return;
		}

		// start momentum animation if needed
		if ( this.options.momentum && duration < 300 ) {
			momentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : { destination: newX, duration: 0 };
			momentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : { destination: newY, duration: 0 };
			newX = momentumX.destination;
			newY = momentumY.destination;
			time = Math.max(momentumX.duration, momentumY.duration);
			this.isInTransition = 1;
		}


		if ( this.options.snap ) {
			var snap = this._nearestSnap(newX, newY);
			this.currentPage = snap;
			time = this.options.snapSpeed || Math.max(
					Math.max(
						Math.min(Math.abs(newX - snap.x), 1000),
						Math.min(Math.abs(newY - snap.y), 1000)
					), 300);
			newX = snap.x;
			newY = snap.y;

			this.directionX = 0;
			this.directionY = 0;
			easing = this.options.bounceEasing;
		}

// INSERT POINT: _end

		if ( newX != this.x || newY != this.y ) {
			// change easing function when scroller goes out of the boundaries
			if ( newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY ) {
				easing = utils.ease.quadratic;
			}

			this.scrollTo(newX, newY, time, easing);
			return;
		}

		this._execEvent('scrollEnd');
	},

	_resize: function () {
		var that = this;

		clearTimeout(this.resizeTimeout);

		this.resizeTimeout = setTimeout(function () {
			that.refresh();
		}, this.options.resizePolling);
	},

	resetPosition: function (time) {
		var x = this.x,
			y = this.y;

		time = time || 0;

		if ( !this.hasHorizontalScroll || this.x > 0 ) {
			x = 0;
		} else if ( this.x < this.maxScrollX ) {
			x = this.maxScrollX;
		}

		if ( !this.hasVerticalScroll || this.y > 0 ) {
			y = 0;
		} else if ( this.y < this.maxScrollY ) {
			y = this.maxScrollY;
		}

		if ( x == this.x && y == this.y ) {
			return false;
		}

		this.scrollTo(x, y, time, this.options.bounceEasing);

		return true;
	},

	disable: function () {
		this.enabled = false;
	},

	enable: function () {
		this.enabled = true;
	},

	refresh: function () {
		utils.getRect(this.wrapper);		// Force reflow

		this.wrapperWidth	= this.wrapper.clientWidth;
		this.wrapperHeight	= this.wrapper.clientHeight;

		var rect = utils.getRect(this.scroller);
/* REPLACE START: refresh */

		this.scrollerWidth	= rect.width;
		this.scrollerHeight	= rect.height;

		this.maxScrollX		= this.wrapperWidth - this.scrollerWidth;
		this.maxScrollY		= this.wrapperHeight - this.scrollerHeight;

/* REPLACE END: refresh */

		this.hasHorizontalScroll	= this.options.scrollX && this.maxScrollX < 0;
		this.hasVerticalScroll		= this.options.scrollY && this.maxScrollY < 0;
		
		if ( !this.hasHorizontalScroll ) {
			this.maxScrollX = 0;
			this.scrollerWidth = this.wrapperWidth;
		}

		if ( !this.hasVerticalScroll ) {
			this.maxScrollY = 0;
			this.scrollerHeight = this.wrapperHeight;
		}

		this.endTime = 0;
		this.directionX = 0;
		this.directionY = 0;
		
		if(utils.hasPointer && !this.options.disablePointer) {
			// The wrapper should have `touchAction` property for using pointerEvent.
			this.wrapper.style[utils.style.touchAction] = utils.getTouchAction(this.options.eventPassthrough, true);

			// case. not support 'pinch-zoom'
			// https://github.com/cubiq/iscroll/issues/1118#issuecomment-270057583
			if (!this.wrapper.style[utils.style.touchAction]) {
				this.wrapper.style[utils.style.touchAction] = utils.getTouchAction(this.options.eventPassthrough, false);
			}
		}
		this.wrapperOffset = utils.offset(this.wrapper);

		this._execEvent('refresh');

		this.resetPosition();

// INSERT POINT: _refresh

	},	

	on: function (type, fn) {
		if ( !this._events[type] ) {
			this._events[type] = [];
		}

		this._events[type].push(fn);
	},

	off: function (type, fn) {
		if ( !this._events[type] ) {
			return;
		}

		var index = this._events[type].indexOf(fn);

		if ( index > -1 ) {
			this._events[type].splice(index, 1);
		}
	},

	_execEvent: function (type) {
		if ( !this._events[type] ) {
			return;
		}

		var i = 0,
			l = this._events[type].length;

		if ( !l ) {
			return;
		}

		for ( ; i < l; i++ ) {
			this._events[type][i].apply(this, [].slice.call(arguments, 1));
		}
	},

	scrollBy: function (x, y, time, easing) {
		x = this.x + x;
		y = this.y + y;
		time = time || 0;

		this.scrollTo(x, y, time, easing);
	},

	scrollTo: function (x, y, time, easing) {
		easing = easing || utils.ease.circular;

		this.isInTransition = this.options.useTransition && time > 0;
		var transitionType = this.options.useTransition && easing.style;
		if ( !time || transitionType ) {
				if(transitionType) {
					this._transitionTimingFunction(easing.style);
					this._transitionTime(time);
				}
			this._translate(x, y);
		} else {
			this._animate(x, y, time, easing.fn);
		}
	},

	scrollToElement: function (el, time, offsetX, offsetY, easing) {
		el = el.nodeType ? el : this.scroller.querySelector(el);

		if ( !el ) {
			return;
		}

		var pos = utils.offset(el);

		pos.left -= this.wrapperOffset.left;
		pos.top  -= this.wrapperOffset.top;

		// if offsetX/Y are true we center the element to the screen
		var elRect = utils.getRect(el);
		var wrapperRect = utils.getRect(this.wrapper);
		if ( offsetX === true ) {
			offsetX = Math.round(elRect.width / 2 - wrapperRect.width / 2);
		}
		if ( offsetY === true ) {
			offsetY = Math.round(elRect.height / 2 - wrapperRect.height / 2);
		}

		pos.left -= offsetX || 0;
		pos.top  -= offsetY || 0;

		pos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;
		pos.top  = pos.top  > 0 ? 0 : pos.top  < this.maxScrollY ? this.maxScrollY : pos.top;

		time = time === undefined || time === null || time === 'auto' ? Math.max(Math.abs(this.x-pos.left), Math.abs(this.y-pos.top)) : time;

		this.scrollTo(pos.left, pos.top, time, easing);
	},

	_transitionTime: function (time) {
		if (!this.options.useTransition) {
			return;
		}
		time = time || 0;
		var durationProp = utils.style.transitionDuration;
		if(!durationProp) {
			return;
		}

		this.scrollerStyle[durationProp] = time + 'ms';

		if ( !time && utils.isBadAndroid ) {
			this.scrollerStyle[durationProp] = '0.0001ms';
			// remove 0.0001ms
			var self = this;
			rAF(function() {
				if(self.scrollerStyle[durationProp] === '0.0001ms') {
					self.scrollerStyle[durationProp] = '0s';
				}
			});
		}


		if ( this.indicators ) {
			for ( var i = this.indicators.length; i--; ) {
				this.indicators[i].transitionTime(time);
			}
		}


// INSERT POINT: _transitionTime

	},

	_transitionTimingFunction: function (easing) {
		this.scrollerStyle[utils.style.transitionTimingFunction] = easing;


		if ( this.indicators ) {
			for ( var i = this.indicators.length; i--; ) {
				this.indicators[i].transitionTimingFunction(easing);
			}
		}


// INSERT POINT: _transitionTimingFunction

	},

	_translate: function (x, y) {
		if ( this.options.useTransform ) {

/* REPLACE START: _translate */

			this.scrollerStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.translateZ;

/* REPLACE END: _translate */

		} else {
			x = Math.round(x);
			y = Math.round(y);
			this.scrollerStyle.left = x + 'px';
			this.scrollerStyle.top = y + 'px';
		}

		this.x = x;
		this.y = y;


	if ( this.indicators ) {
		for ( var i = this.indicators.length; i--; ) {
			this.indicators[i].updatePosition();
		}
	}


// INSERT POINT: _translate

	},

	_initEvents: function (remove) {
		var eventType = remove ? utils.removeEvent : utils.addEvent,
			target = this.options.bindToWrapper ? this.wrapper : window;

		eventType(window, 'orientationchange', this);
		eventType(window, 'resize', this);

		if ( this.options.click ) {
			eventType(this.wrapper, 'click', this, true);
		}

		if ( !this.options.disableMouse ) {
			eventType(this.wrapper, 'mousedown', this);
			eventType(target, 'mousemove', this);
			eventType(target, 'mousecancel', this);
			eventType(target, 'mouseup', this);
		}

		if ( utils.hasPointer && !this.options.disablePointer ) {
			eventType(this.wrapper, utils.prefixPointerEvent('pointerdown'), this);
			eventType(target, utils.prefixPointerEvent('pointermove'), this);
			eventType(target, utils.prefixPointerEvent('pointercancel'), this);
			eventType(target, utils.prefixPointerEvent('pointerup'), this);
		}

		if ( utils.hasTouch && !this.options.disableTouch ) {
			eventType(this.wrapper, 'touchstart', this);
			eventType(target, 'touchmove', this);
			eventType(target, 'touchcancel', this);
			eventType(target, 'touchend', this);
		}

		eventType(this.scroller, 'transitionend', this);
		eventType(this.scroller, 'webkitTransitionEnd', this);
		eventType(this.scroller, 'oTransitionEnd', this);
		eventType(this.scroller, 'MSTransitionEnd', this);
	},

	getComputedPosition: function () {
		var matrix = window.getComputedStyle(this.scroller, null),
			x, y;

		if ( this.options.useTransform ) {
			matrix = matrix[utils.style.transform].split(')')[0].split(', ');
			x = +(matrix[12] || matrix[4]);
			y = +(matrix[13] || matrix[5]);
		} else {
			x = +matrix.left.replace(/[^-\d.]/g, '');
			y = +matrix.top.replace(/[^-\d.]/g, '');
		}

		return { x: x, y: y };
	},
	_initIndicators: function () {
		var interactive = this.options.interactiveScrollbars,
			customStyle = typeof this.options.scrollbars != 'string',
			indicators = [],
			indicator;

		var that = this;

		this.indicators = [];

		if ( this.options.scrollbars ) {
			// Vertical scrollbar
			if ( this.options.scrollY ) {
				indicator = {
					el: createDefaultScrollbar('v', interactive, this.options.scrollbars),
					interactive: interactive,
					defaultScrollbars: true,
					customStyle: customStyle,
					resize: this.options.resizeScrollbars,
					shrink: this.options.shrinkScrollbars,
					fade: this.options.fadeScrollbars,
					listenX: false
				};

				this.wrapper.appendChild(indicator.el);
				indicators.push(indicator);
			}

			// Horizontal scrollbar
			if ( this.options.scrollX ) {
				indicator = {
					el: createDefaultScrollbar('h', interactive, this.options.scrollbars),
					interactive: interactive,
					defaultScrollbars: true,
					customStyle: customStyle,
					resize: this.options.resizeScrollbars,
					shrink: this.options.shrinkScrollbars,
					fade: this.options.fadeScrollbars,
					listenY: false
				};

				this.wrapper.appendChild(indicator.el);
				indicators.push(indicator);
			}
		}

		if ( this.options.indicators ) {
			// TODO: check concat compatibility
			indicators = indicators.concat(this.options.indicators);
		}

		for ( var i = indicators.length; i--; ) {
			this.indicators.push( new Indicator(this, indicators[i]) );
		}

		// TODO: check if we can use array.map (wide compatibility and performance issues)
		function _indicatorsMap (fn) {
			if (that.indicators) {
				for ( var i = that.indicators.length; i--; ) {
					fn.call(that.indicators[i]);
				}
			}
		}

		if ( this.options.fadeScrollbars ) {
			this.on('scrollEnd', function () {
				_indicatorsMap(function () {
					this.fade();
				});
			});

			this.on('scrollCancel', function () {
				_indicatorsMap(function () {
					this.fade();
				});
			});

			this.on('scrollStart', function () {
				_indicatorsMap(function () {
					this.fade(1);
				});
			});

			this.on('beforeScrollStart', function () {
				_indicatorsMap(function () {
					this.fade(1, true);
				});
			});
		}


		this.on('refresh', function () {
			_indicatorsMap(function () {
				this.refresh();
			});
		});

		this.on('destroy', function () {
			_indicatorsMap(function () {
				this.destroy();
			});

			delete this.indicators;
		});
	},

	_initWheel: function () {
		utils.addEvent(this.wrapper, 'wheel', this);
		utils.addEvent(this.wrapper, 'mousewheel', this);
		utils.addEvent(this.wrapper, 'DOMMouseScroll', this);

		this.on('destroy', function () {
			clearTimeout(this.wheelTimeout);
			this.wheelTimeout = null;
			utils.removeEvent(this.wrapper, 'wheel', this);
			utils.removeEvent(this.wrapper, 'mousewheel', this);
			utils.removeEvent(this.wrapper, 'DOMMouseScroll', this);
		});
	},

	_wheel: function (e) {
		if ( !this.enabled ) {
			return;
		}

		e.preventDefault();

		var wheelDeltaX, wheelDeltaY,
			newX, newY,
			that = this;

		if ( this.wheelTimeout === undefined ) {
			that._execEvent('scrollStart');
		}

		// Execute the scrollEnd event after 400ms the wheel stopped scrolling
		clearTimeout(this.wheelTimeout);
		this.wheelTimeout = setTimeout(function () {
			if(!that.options.snap) {
				that._execEvent('scrollEnd');
			}
			that.wheelTimeout = undefined;
		}, 400);

		if ( 'deltaX' in e ) {
			if (e.deltaMode === 1) {
				wheelDeltaX = -e.deltaX * this.options.mouseWheelSpeed;
				wheelDeltaY = -e.deltaY * this.options.mouseWheelSpeed;
			} else {
				wheelDeltaX = -e.deltaX;
				wheelDeltaY = -e.deltaY;
			}
		} else if ( 'wheelDeltaX' in e ) {
			wheelDeltaX = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed;
			wheelDeltaY = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed;
		} else if ( 'wheelDelta' in e ) {
			wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * this.options.mouseWheelSpeed;
		} else if ( 'detail' in e ) {
			wheelDeltaX = wheelDeltaY = -e.detail / 3 * this.options.mouseWheelSpeed;
		} else {
			return;
		}

		wheelDeltaX *= this.options.invertWheelDirection;
		wheelDeltaY *= this.options.invertWheelDirection;

		if ( !this.hasVerticalScroll ) {
			wheelDeltaX = wheelDeltaY;
			wheelDeltaY = 0;
		}

		if ( this.options.snap ) {
			newX = this.currentPage.pageX;
			newY = this.currentPage.pageY;

			if ( wheelDeltaX > 0 ) {
				newX--;
			} else if ( wheelDeltaX < 0 ) {
				newX++;
			}

			if ( wheelDeltaY > 0 ) {
				newY--;
			} else if ( wheelDeltaY < 0 ) {
				newY++;
			}

			this.goToPage(newX, newY);

			return;
		}

		newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);
		newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);

		this.directionX = wheelDeltaX > 0 ? -1 : wheelDeltaX < 0 ? 1 : 0;
		this.directionY = wheelDeltaY > 0 ? -1 : wheelDeltaY < 0 ? 1 : 0;

		if ( newX > 0 ) {
			newX = 0;
		} else if ( newX < this.maxScrollX ) {
			newX = this.maxScrollX;
		}

		if ( newY > 0 ) {
			newY = 0;
		} else if ( newY < this.maxScrollY ) {
			newY = this.maxScrollY;
		}

		this.scrollTo(newX, newY, 0);

// INSERT POINT: _wheel
	},

	_initSnap: function () {
		this.currentPage = {};

		if ( typeof this.options.snap == 'string' ) {
			this.options.snap = this.scroller.querySelectorAll(this.options.snap);
		}

		this.on('refresh', function () {
			var i = 0, l,
				m = 0, n,
				cx, cy,
				x = 0, y,
				stepX = this.options.snapStepX || this.wrapperWidth,
				stepY = this.options.snapStepY || this.wrapperHeight,
				el,
				rect;

			this.pages = [];

			if ( !this.wrapperWidth || !this.wrapperHeight || !this.scrollerWidth || !this.scrollerHeight ) {
				return;
			}

			if ( this.options.snap === true ) {
				cx = Math.round( stepX / 2 );
				cy = Math.round( stepY / 2 );

				while ( x > -this.scrollerWidth ) {
					this.pages[i] = [];
					l = 0;
					y = 0;

					while ( y > -this.scrollerHeight ) {
						this.pages[i][l] = {
							x: Math.max(x, this.maxScrollX),
							y: Math.max(y, this.maxScrollY),
							width: stepX,
							height: stepY,
							cx: x - cx,
							cy: y - cy
						};

						y -= stepY;
						l++;
					}

					x -= stepX;
					i++;
				}
			} else {
				el = this.options.snap;
				l = el.length;
				n = -1;

				for ( ; i < l; i++ ) {
					rect = utils.getRect(el[i]);
					if ( i === 0 || rect.left <= utils.getRect(el[i-1]).left ) {
						m = 0;
						n++;
					}

					if ( !this.pages[m] ) {
						this.pages[m] = [];
					}

					x = Math.max(-rect.left, this.maxScrollX);
					y = Math.max(-rect.top, this.maxScrollY);
					cx = x - Math.round(rect.width / 2);
					cy = y - Math.round(rect.height / 2);

					this.pages[m][n] = {
						x: x,
						y: y,
						width: rect.width,
						height: rect.height,
						cx: cx,
						cy: cy
					};

					if ( x > this.maxScrollX ) {
						m++;
					}
				}
			}

			this.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0);

			// Update snap threshold if needed
			if ( this.options.snapThreshold % 1 === 0 ) {
				this.snapThresholdX = this.options.snapThreshold;
				this.snapThresholdY = this.options.snapThreshold;
			} else {
				this.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold);
				this.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold);
			}
		});

		this.on('flick', function () {
			var time = this.options.snapSpeed || Math.max(
					Math.max(
						Math.min(Math.abs(this.x - this.startX), 1000),
						Math.min(Math.abs(this.y - this.startY), 1000)
					), 300);

			this.goToPage(
				this.currentPage.pageX + this.directionX,
				this.currentPage.pageY + this.directionY,
				time
			);
		});
	},

	_nearestSnap: function (x, y) {
		if ( !this.pages.length ) {
			return { x: 0, y: 0, pageX: 0, pageY: 0 };
		}

		var i = 0,
			l = this.pages.length,
			m = 0;

		// Check if we exceeded the snap threshold
		if ( Math.abs(x - this.absStartX) < this.snapThresholdX &&
			Math.abs(y - this.absStartY) < this.snapThresholdY ) {
			return this.currentPage;
		}

		if ( x > 0 ) {
			x = 0;
		} else if ( x < this.maxScrollX ) {
			x = this.maxScrollX;
		}

		if ( y > 0 ) {
			y = 0;
		} else if ( y < this.maxScrollY ) {
			y = this.maxScrollY;
		}

		for ( ; i < l; i++ ) {
			if ( x >= this.pages[i][0].cx ) {
				x = this.pages[i][0].x;
				break;
			}
		}

		l = this.pages[i].length;

		for ( ; m < l; m++ ) {
			if ( y >= this.pages[0][m].cy ) {
				y = this.pages[0][m].y;
				break;
			}
		}

		if ( i == this.currentPage.pageX ) {
			i += this.directionX;

			if ( i < 0 ) {
				i = 0;
			} else if ( i >= this.pages.length ) {
				i = this.pages.length - 1;
			}

			x = this.pages[i][0].x;
		}

		if ( m == this.currentPage.pageY ) {
			m += this.directionY;

			if ( m < 0 ) {
				m = 0;
			} else if ( m >= this.pages[0].length ) {
				m = this.pages[0].length - 1;
			}

			y = this.pages[0][m].y;
		}

		return {
			x: x,
			y: y,
			pageX: i,
			pageY: m
		};
	},

	goToPage: function (x, y, time, easing) {
		easing = easing || this.options.bounceEasing;

		if ( x >= this.pages.length ) {
			x = this.pages.length - 1;
		} else if ( x < 0 ) {
			x = 0;
		}

		if ( y >= this.pages[x].length ) {
			y = this.pages[x].length - 1;
		} else if ( y < 0 ) {
			y = 0;
		}

		var posX = this.pages[x][y].x,
			posY = this.pages[x][y].y;

		time = time === undefined ? this.options.snapSpeed || Math.max(
			Math.max(
				Math.min(Math.abs(posX - this.x), 1000),
				Math.min(Math.abs(posY - this.y), 1000)
			), 300) : time;

		this.currentPage = {
			x: posX,
			y: posY,
			pageX: x,
			pageY: y
		};

		this.scrollTo(posX, posY, time, easing);
	},

	next: function (time, easing) {
		var x = this.currentPage.pageX,
			y = this.currentPage.pageY;

		x++;

		if ( x >= this.pages.length && this.hasVerticalScroll ) {
			x = 0;
			y++;
		}

		this.goToPage(x, y, time, easing);
	},

	prev: function (time, easing) {
		var x = this.currentPage.pageX,
			y = this.currentPage.pageY;

		x--;

		if ( x < 0 && this.hasVerticalScroll ) {
			x = 0;
			y--;
		}

		this.goToPage(x, y, time, easing);
	},

	_initKeys: function (e) {
		// default key bindings
		var keys = {
			pageUp: 33,
			pageDown: 34,
			end: 35,
			home: 36,
			left: 37,
			up: 38,
			right: 39,
			down: 40
		};
		var i;

		// if you give me characters I give you keycode
		if ( typeof this.options.keyBindings == 'object' ) {
			for ( i in this.options.keyBindings ) {
				if ( typeof this.options.keyBindings[i] == 'string' ) {
					this.options.keyBindings[i] = this.options.keyBindings[i].toUpperCase().charCodeAt(0);
				}
			}
		} else {
			this.options.keyBindings = {};
		}

		for ( i in keys ) {
			this.options.keyBindings[i] = this.options.keyBindings[i] || keys[i];
		}

		utils.addEvent(window, 'keydown', this);

		this.on('destroy', function () {
			utils.removeEvent(window, 'keydown', this);
		});
	},

	_key: function (e) {
		if ( !this.enabled ) {
			return;
		}

		var snap = this.options.snap,	// we are using this alot, better to cache it
			newX = snap ? this.currentPage.pageX : this.x,
			newY = snap ? this.currentPage.pageY : this.y,
			now = utils.getTime(),
			prevTime = this.keyTime || 0,
			acceleration = 0.250,
			pos;

		if ( this.options.useTransition && this.isInTransition ) {
			pos = this.getComputedPosition();

			this._translate(Math.round(pos.x), Math.round(pos.y));
			this.isInTransition = false;
		}

		this.keyAcceleration = now - prevTime < 200 ? Math.min(this.keyAcceleration + acceleration, 50) : 0;

		switch ( e.keyCode ) {
			case this.options.keyBindings.pageUp:
				if ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {
					newX += snap ? 1 : this.wrapperWidth;
				} else {
					newY += snap ? 1 : this.wrapperHeight;
				}
				break;
			case this.options.keyBindings.pageDown:
				if ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {
					newX -= snap ? 1 : this.wrapperWidth;
				} else {
					newY -= snap ? 1 : this.wrapperHeight;
				}
				break;
			case this.options.keyBindings.end:
				newX = snap ? this.pages.length-1 : this.maxScrollX;
				newY = snap ? this.pages[0].length-1 : this.maxScrollY;
				break;
			case this.options.keyBindings.home:
				newX = 0;
				newY = 0;
				break;
			case this.options.keyBindings.left:
				newX += snap ? -1 : 5 + this.keyAcceleration>>0;
				break;
			case this.options.keyBindings.up:
				newY += snap ? 1 : 5 + this.keyAcceleration>>0;
				break;
			case this.options.keyBindings.right:
				newX -= snap ? -1 : 5 + this.keyAcceleration>>0;
				break;
			case this.options.keyBindings.down:
				newY -= snap ? 1 : 5 + this.keyAcceleration>>0;
				break;
			default:
				return;
		}

		if ( snap ) {
			this.goToPage(newX, newY);
			return;
		}

		if ( newX > 0 ) {
			newX = 0;
			this.keyAcceleration = 0;
		} else if ( newX < this.maxScrollX ) {
			newX = this.maxScrollX;
			this.keyAcceleration = 0;
		}

		if ( newY > 0 ) {
			newY = 0;
			this.keyAcceleration = 0;
		} else if ( newY < this.maxScrollY ) {
			newY = this.maxScrollY;
			this.keyAcceleration = 0;
		}

		this.scrollTo(newX, newY, 0);

		this.keyTime = now;
	},

	_animate: function (destX, destY, duration, easingFn) {
		var that = this,
			startX = this.x,
			startY = this.y,
			startTime = utils.getTime(),
			destTime = startTime + duration;

		function step () {
			var now = utils.getTime(),
				newX, newY,
				easing;

			if ( now >= destTime ) {
				that.isAnimating = false;
				that._translate(destX, destY);

				if ( !that.resetPosition(that.options.bounceTime) ) {
					that._execEvent('scrollEnd');
				}

				return;
			}

			now = ( now - startTime ) / duration;
			easing = easingFn(now);
			newX = ( destX - startX ) * easing + startX;
			newY = ( destY - startY ) * easing + startY;
			that._translate(newX, newY);

			if ( that.isAnimating ) {
				rAF(step);
			}
		}

		this.isAnimating = true;
		step();
	},
	handleEvent: function (e) {
		switch ( e.type ) {
			case 'touchstart':
			case 'pointerdown':
			case 'MSPointerDown':
			case 'mousedown':
				this._start(e);
				break;
			case 'touchmove':
			case 'pointermove':
			case 'MSPointerMove':
			case 'mousemove':
				this._move(e);
				break;
			case 'touchend':
			case 'pointerup':
			case 'MSPointerUp':
			case 'mouseup':
			case 'touchcancel':
			case 'pointercancel':
			case 'MSPointerCancel':
			case 'mousecancel':
				this._end(e);
				break;
			case 'orientationchange':
			case 'resize':
				this._resize();
				break;
			case 'transitionend':
			case 'webkitTransitionEnd':
			case 'oTransitionEnd':
			case 'MSTransitionEnd':
				this._transitionEnd(e);
				break;
			case 'wheel':
			case 'DOMMouseScroll':
			case 'mousewheel':
				this._wheel(e);
				break;
			case 'keydown':
				this._key(e);
				break;
			case 'click':
				if ( this.enabled && !e._constructed ) {
					e.preventDefault();
					e.stopPropagation();
				}
				break;
		}
	}
};
function createDefaultScrollbar (direction, interactive, type) {
	var scrollbar = document.createElement('div'),
		indicator = document.createElement('div');

	if ( type === true ) {
		scrollbar.style.cssText = 'position:absolute;z-index:9999';
		indicator.style.cssText = '-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';
	}

	indicator.className = 'iScrollIndicator';

	if ( direction == 'h' ) {
		if ( type === true ) {
			scrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';
			indicator.style.height = '100%';
		}
		scrollbar.className = 'iScrollHorizontalScrollbar';
	} else {
		if ( type === true ) {
			scrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';
			indicator.style.width = '100%';
		}
		scrollbar.className = 'iScrollVerticalScrollbar';
	}

	scrollbar.style.cssText += ';overflow:hidden';

	if ( !interactive ) {
		scrollbar.style.pointerEvents = 'none';
	}

	scrollbar.appendChild(indicator);

	return scrollbar;
}

function Indicator (scroller, options) {
	this.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;
	this.wrapperStyle = this.wrapper.style;
	this.indicator = this.wrapper.children[0];
	this.indicatorStyle = this.indicator.style;
	this.scroller = scroller;

	this.options = {
		listenX: true,
		listenY: true,
		interactive: false,
		resize: true,
		defaultScrollbars: false,
		shrink: false,
		fade: false,
		speedRatioX: 0,
		speedRatioY: 0
	};

	for ( var i in options ) {
		this.options[i] = options[i];
	}

	this.sizeRatioX = 1;
	this.sizeRatioY = 1;
	this.maxPosX = 0;
	this.maxPosY = 0;

	if ( this.options.interactive ) {
		if ( !this.options.disableTouch ) {
			utils.addEvent(this.indicator, 'touchstart', this);
			utils.addEvent(window, 'touchend', this);
		}
		if ( !this.options.disablePointer ) {
			utils.addEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);
			utils.addEvent(window, utils.prefixPointerEvent('pointerup'), this);
		}
		if ( !this.options.disableMouse ) {
			utils.addEvent(this.indicator, 'mousedown', this);
			utils.addEvent(window, 'mouseup', this);
		}
	}

	if ( this.options.fade ) {
		this.wrapperStyle[utils.style.transform] = this.scroller.translateZ;
		var durationProp = utils.style.transitionDuration;
		if(!durationProp) {
			return;
		}
		this.wrapperStyle[durationProp] = utils.isBadAndroid ? '0.0001ms' : '0ms';
		// remove 0.0001ms
		var self = this;
		if(utils.isBadAndroid) {
			rAF(function() {
				if(self.wrapperStyle[durationProp] === '0.0001ms') {
					self.wrapperStyle[durationProp] = '0s';
				}
			});
		}
		this.wrapperStyle.opacity = '0';
	}
}

Indicator.prototype = {
	handleEvent: function (e) {
		switch ( e.type ) {
			case 'touchstart':
			case 'pointerdown':
			case 'MSPointerDown':
			case 'mousedown':
				this._start(e);
				break;
			case 'touchmove':
			case 'pointermove':
			case 'MSPointerMove':
			case 'mousemove':
				this._move(e);
				break;
			case 'touchend':
			case 'pointerup':
			case 'MSPointerUp':
			case 'mouseup':
			case 'touchcancel':
			case 'pointercancel':
			case 'MSPointerCancel':
			case 'mousecancel':
				this._end(e);
				break;
		}
	},

	destroy: function () {
		if ( this.options.fadeScrollbars ) {
			clearTimeout(this.fadeTimeout);
			this.fadeTimeout = null;
		}
		if ( this.options.interactive ) {
			utils.removeEvent(this.indicator, 'touchstart', this);
			utils.removeEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);
			utils.removeEvent(this.indicator, 'mousedown', this);

			utils.removeEvent(window, 'touchmove', this);
			utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);
			utils.removeEvent(window, 'mousemove', this);

			utils.removeEvent(window, 'touchend', this);
			utils.removeEvent(window, utils.prefixPointerEvent('pointerup'), this);
			utils.removeEvent(window, 'mouseup', this);
		}

		if ( this.options.defaultScrollbars && this.wrapper.parentNode ) {
			this.wrapper.parentNode.removeChild(this.wrapper);
		}
	},

	_start: function (e) {
		var point = e.touches ? e.touches[0] : e;

		e.preventDefault();
		e.stopPropagation();

		this.transitionTime();

		this.initiated = true;
		this.moved = false;
		this.lastPointX	= point.pageX;
		this.lastPointY	= point.pageY;

		this.startTime	= utils.getTime();

		if ( !this.options.disableTouch ) {
			utils.addEvent(window, 'touchmove', this);
		}
		if ( !this.options.disablePointer ) {
			utils.addEvent(window, utils.prefixPointerEvent('pointermove'), this);
		}
		if ( !this.options.disableMouse ) {
			utils.addEvent(window, 'mousemove', this);
		}

		this.scroller._execEvent('beforeScrollStart');
	},

	_move: function (e) {
		var point = e.touches ? e.touches[0] : e,
			deltaX, deltaY,
			newX, newY,
			timestamp = utils.getTime();

		if ( !this.moved ) {
			this.scroller._execEvent('scrollStart');
		}

		this.moved = true;

		deltaX = point.pageX - this.lastPointX;
		this.lastPointX = point.pageX;

		deltaY = point.pageY - this.lastPointY;
		this.lastPointY = point.pageY;

		newX = this.x + deltaX;
		newY = this.y + deltaY;

		this._pos(newX, newY);

// INSERT POINT: indicator._move

		e.preventDefault();
		e.stopPropagation();
	},

	_end: function (e) {
		if ( !this.initiated ) {
			return;
		}

		this.initiated = false;

		e.preventDefault();
		e.stopPropagation();

		utils.removeEvent(window, 'touchmove', this);
		utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);
		utils.removeEvent(window, 'mousemove', this);

		if ( this.scroller.options.snap ) {
			var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);

			var time = this.options.snapSpeed || Math.max(
					Math.max(
						Math.min(Math.abs(this.scroller.x - snap.x), 1000),
						Math.min(Math.abs(this.scroller.y - snap.y), 1000)
					), 300);

			if ( this.scroller.x != snap.x || this.scroller.y != snap.y ) {
				this.scroller.directionX = 0;
				this.scroller.directionY = 0;
				this.scroller.currentPage = snap;
				this.scroller.scrollTo(snap.x, snap.y, time, this.scroller.options.bounceEasing);
			}
		}

		if ( this.moved ) {
			this.scroller._execEvent('scrollEnd');
		}
	},

	transitionTime: function (time) {
		time = time || 0;
		var durationProp = utils.style.transitionDuration;
		if(!durationProp) {
			return;
		}

		this.indicatorStyle[durationProp] = time + 'ms';

		if ( !time && utils.isBadAndroid ) {
			this.indicatorStyle[durationProp] = '0.0001ms';
			// remove 0.0001ms
			var self = this;
			rAF(function() {
				if(self.indicatorStyle[durationProp] === '0.0001ms') {
					self.indicatorStyle[durationProp] = '0s';
				}
			});
		}
	},

	transitionTimingFunction: function (easing) {
		this.indicatorStyle[utils.style.transitionTimingFunction] = easing;
	},

	refresh: function () {
		this.transitionTime();

		if ( this.options.listenX && !this.options.listenY ) {
			this.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';
		} else if ( this.options.listenY && !this.options.listenX ) {
			this.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';
		} else {
			this.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';
		}

		if ( this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll ) {
			utils.addClass(this.wrapper, 'iScrollBothScrollbars');
			utils.removeClass(this.wrapper, 'iScrollLoneScrollbar');

			if ( this.options.defaultScrollbars && this.options.customStyle ) {
				if ( this.options.listenX ) {
					this.wrapper.style.right = '8px';
				} else {
					this.wrapper.style.bottom = '8px';
				}
			}
		} else {
			utils.removeClass(this.wrapper, 'iScrollBothScrollbars');
			utils.addClass(this.wrapper, 'iScrollLoneScrollbar');

			if ( this.options.defaultScrollbars && this.options.customStyle ) {
				if ( this.options.listenX ) {
					this.wrapper.style.right = '2px';
				} else {
					this.wrapper.style.bottom = '2px';
				}
			}
		}

		utils.getRect(this.wrapper);	// force refresh

		if ( this.options.listenX ) {
			this.wrapperWidth = this.wrapper.clientWidth;
			if ( this.options.resize ) {
				this.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);
				this.indicatorStyle.width = this.indicatorWidth + 'px';
			} else {
				this.indicatorWidth = this.indicator.clientWidth;
			}

			this.maxPosX = this.wrapperWidth - this.indicatorWidth;

			if ( this.options.shrink == 'clip' ) {
				this.minBoundaryX = -this.indicatorWidth + 8;
				this.maxBoundaryX = this.wrapperWidth - 8;
			} else {
				this.minBoundaryX = 0;
				this.maxBoundaryX = this.maxPosX;
			}

			this.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));
		}

		if ( this.options.listenY ) {
			this.wrapperHeight = this.wrapper.clientHeight;
			if ( this.options.resize ) {
				this.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);
				this.indicatorStyle.height = this.indicatorHeight + 'px';
			} else {
				this.indicatorHeight = this.indicator.clientHeight;
			}

			this.maxPosY = this.wrapperHeight - this.indicatorHeight;

			if ( this.options.shrink == 'clip' ) {
				this.minBoundaryY = -this.indicatorHeight + 8;
				this.maxBoundaryY = this.wrapperHeight - 8;
			} else {
				this.minBoundaryY = 0;
				this.maxBoundaryY = this.maxPosY;
			}

			this.maxPosY = this.wrapperHeight - this.indicatorHeight;
			this.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));
		}

		this.updatePosition();
	},

	updatePosition: function () {
		var x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,
			y = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;

		if ( !this.options.ignoreBoundaries ) {
			if ( x < this.minBoundaryX ) {
				if ( this.options.shrink == 'scale' ) {
					this.width = Math.max(this.indicatorWidth + x, 8);
					this.indicatorStyle.width = this.width + 'px';
				}
				x = this.minBoundaryX;
			} else if ( x > this.maxBoundaryX ) {
				if ( this.options.shrink == 'scale' ) {
					this.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);
					this.indicatorStyle.width = this.width + 'px';
					x = this.maxPosX + this.indicatorWidth - this.width;
				} else {
					x = this.maxBoundaryX;
				}
			} else if ( this.options.shrink == 'scale' && this.width != this.indicatorWidth ) {
				this.width = this.indicatorWidth;
				this.indicatorStyle.width = this.width + 'px';
			}

			if ( y < this.minBoundaryY ) {
				if ( this.options.shrink == 'scale' ) {
					this.height = Math.max(this.indicatorHeight + y * 3, 8);
					this.indicatorStyle.height = this.height + 'px';
				}
				y = this.minBoundaryY;
			} else if ( y > this.maxBoundaryY ) {
				if ( this.options.shrink == 'scale' ) {
					this.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);
					this.indicatorStyle.height = this.height + 'px';
					y = this.maxPosY + this.indicatorHeight - this.height;
				} else {
					y = this.maxBoundaryY;
				}
			} else if ( this.options.shrink == 'scale' && this.height != this.indicatorHeight ) {
				this.height = this.indicatorHeight;
				this.indicatorStyle.height = this.height + 'px';
			}
		}

		this.x = x;
		this.y = y;

		if ( this.scroller.options.useTransform ) {
			this.indicatorStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.scroller.translateZ;
		} else {
			this.indicatorStyle.left = x + 'px';
			this.indicatorStyle.top = y + 'px';
		}
	},

	_pos: function (x, y) {
		if ( x < 0 ) {
			x = 0;
		} else if ( x > this.maxPosX ) {
			x = this.maxPosX;
		}

		if ( y < 0 ) {
			y = 0;
		} else if ( y > this.maxPosY ) {
			y = this.maxPosY;
		}

		x = this.options.listenX ? Math.round(x / this.sizeRatioX) : this.scroller.x;
		y = this.options.listenY ? Math.round(y / this.sizeRatioY) : this.scroller.y;

		this.scroller.scrollTo(x, y);
	},

	fade: function (val, hold) {
		if ( hold && !this.visible ) {
			return;
		}

		clearTimeout(this.fadeTimeout);
		this.fadeTimeout = null;

		var time = val ? 250 : 500,
			delay = val ? 0 : 300;

		val = val ? '1' : '0';

		this.wrapperStyle[utils.style.transitionDuration] = time + 'ms';

		this.fadeTimeout = setTimeout((function (val) {
			this.wrapperStyle.opacity = val;
			this.visible = +val;
		}).bind(this, val), delay);
	}
};

IScroll.utils = utils;

if ( typeof module != 'undefined' && module.exports ) {
	module.exports = IScroll;
} else if ( typeof define == 'function' && define.amd ) {
        define( function () { return IScroll; } );
} else {
	window.IScroll = IScroll;
}

})(window, document, Math);

(function($, window, document) {
   window.ChatBotRedirectRules = {
       support: {
           url: '/us/support',
           text: 'Support'
       },
       my_orders: {
           url: '/us/support/account/order/#/my-order/',
           text: 'My Orders'
       },
       order_lookup: {
           url: '/us/support/account/order/#/order-lookup',
           text: 'Order Look'
       }
   };

})(jQuery, window, document);
/**
 * Swiper 5.2.0
 * Most modern mobile touch slider and framework with hardware accelerated transitions
 * http://swiperjs.com
 *
 * Copyright 2014-2019 Vladimir Kharlampidi
 *
 * Released under the MIT License
 *
 * Released on: October 26, 2019
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Swiper=t()}(this,(function(){"use strict";var e="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,t="undefined"==typeof window?{document:e,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,i=function(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this};function s(s,a){var r=[],n=0;if(s&&!a&&s instanceof i)return s;if(s)if("string"==typeof s){var o,l,d=s.trim();if(d.indexOf("<")>=0&&d.indexOf(">")>=0){var h="div";for(0===d.indexOf("<li")&&(h="ul"),0===d.indexOf("<tr")&&(h="tbody"),0!==d.indexOf("<td")&&0!==d.indexOf("<th")||(h="tr"),0===d.indexOf("<tbody")&&(h="table"),0===d.indexOf("<option")&&(h="select"),(l=e.createElement(h)).innerHTML=d,n=0;n<l.childNodes.length;n+=1)r.push(l.childNodes[n])}else for(o=a||"#"!==s[0]||s.match(/[ .<>:~]/)?(a||e).querySelectorAll(s.trim()):[e.getElementById(s.trim().split("#")[1])],n=0;n<o.length;n+=1)o[n]&&r.push(o[n])}else if(s.nodeType||s===t||s===e)r.push(s);else if(s.length>0&&s[0].nodeType)for(n=0;n<s.length;n+=1)r.push(s[n]);return new i(r)}function a(e){for(var t=[],i=0;i<e.length;i+=1)-1===t.indexOf(e[i])&&t.push(e[i]);return t}s.fn=i.prototype,s.Class=i,s.Dom7=i;var r={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.add(t[i]);return this},removeClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.remove(t[i]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.toggle(t[i]);return this},attr:function(e,t){var i=arguments;if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var s=0;s<this.length;s+=1)if(2===i.length)this[s].setAttribute(e,t);else for(var a in e)this[s][a]=e[a],this[s].setAttribute(a,e[a]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){var i;if(void 0!==t){for(var s=0;s<this.length;s+=1)(i=this[s]).dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t;return this}if(i=this[0]){if(i.dom7ElementDataStorage&&e in i.dom7ElementDataStorage)return i.dom7ElementDataStorage[e];var a=i.getAttribute("data-"+e);return a||void 0}},transform:function(e){for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransform=e,i.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransitionDuration=e,i.transitionDuration=e}return this},on:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var a=t[0],r=t[1],n=t[2],o=t[3];function l(e){var t=e.target;if(t){var i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),s(t).is(r))n.apply(t,i);else for(var a=s(t).parents(),o=0;o<a.length;o+=1)s(a[o]).is(r)&&n.apply(a[o],i)}}function d(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),n.apply(this,t)}"function"==typeof t[1]&&(a=(e=t)[0],n=e[1],o=e[2],r=void 0),o||(o=!1);for(var h,p=a.split(" "),c=0;c<this.length;c+=1){var u=this[c];if(r)for(h=0;h<p.length;h+=1){var v=p[h];u.dom7LiveListeners||(u.dom7LiveListeners={}),u.dom7LiveListeners[v]||(u.dom7LiveListeners[v]=[]),u.dom7LiveListeners[v].push({listener:n,proxyListener:l}),u.addEventListener(v,l,o)}else for(h=0;h<p.length;h+=1){var f=p[h];u.dom7Listeners||(u.dom7Listeners={}),u.dom7Listeners[f]||(u.dom7Listeners[f]=[]),u.dom7Listeners[f].push({listener:n,proxyListener:d}),u.addEventListener(f,d,o)}}return this},off:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var s=t[0],a=t[1],r=t[2],n=t[3];"function"==typeof t[1]&&(s=(e=t)[0],r=e[1],n=e[2],a=void 0),n||(n=!1);for(var o=s.split(" "),l=0;l<o.length;l+=1)for(var d=o[l],h=0;h<this.length;h+=1){var p=this[h],c=void 0;if(!a&&p.dom7Listeners?c=p.dom7Listeners[d]:a&&p.dom7LiveListeners&&(c=p.dom7LiveListeners[d]),c&&c.length)for(var u=c.length-1;u>=0;u-=1){var v=c[u];r&&v.listener===r?(p.removeEventListener(d,v.proxyListener,n),c.splice(u,1)):r&&v.listener&&v.listener.dom7proxy&&v.listener.dom7proxy===r?(p.removeEventListener(d,v.proxyListener,n),c.splice(u,1)):r||(p.removeEventListener(d,v.proxyListener,n),c.splice(u,1))}}return this},trigger:function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];for(var a=i[0].split(" "),r=i[1],n=0;n<a.length;n+=1)for(var o=a[n],l=0;l<this.length;l+=1){var d=this[l],h=void 0;try{h=new t.CustomEvent(o,{detail:r,bubbles:!0,cancelable:!0})}catch(t){(h=e.createEvent("Event")).initEvent(o,!0,!0),h.detail=r}d.dom7EventData=i.filter((function(e,t){return t>0})),d.dispatchEvent(h),d.dom7EventData=[],delete d.dom7EventData}return this},transitionEnd:function(e){var t,i=["webkitTransitionEnd","transitionend"],s=this;function a(r){if(r.target===this)for(e.call(this,r),t=0;t<i.length;t+=1)s.off(i[t],a)}if(e)for(t=0;t<i.length;t+=1)s.on(i[t],a);return this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var i=this[0],s=i.getBoundingClientRect(),a=e.body,r=i.clientTop||a.clientTop||0,n=i.clientLeft||a.clientLeft||0,o=i===t?t.scrollY:i.scrollTop,l=i===t?t.scrollX:i.scrollLeft;return{top:s.top+o-r,left:s.left+l-n}}return null},css:function(e,i){var s;if(1===arguments.length){if("string"!=typeof e){for(s=0;s<this.length;s+=1)for(var a in e)this[s].style[a]=e[a];return this}if(this[0])return t.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(s=0;s<this.length;s+=1)this[s].style[e]=i;return this}return this},each:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(a){var r,n,o=this[0];if(!o||void 0===a)return!1;if("string"==typeof a){if(o.matches)return o.matches(a);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(a);if(o.msMatchesSelector)return o.msMatchesSelector(a);for(r=s(a),n=0;n<r.length;n+=1)if(r[n]===o)return!0;return!1}if(a===e)return o===e;if(a===t)return o===t;if(a.nodeType||a instanceof i){for(r=a.nodeType?[a]:a,n=0;n<r.length;n+=1)if(r[n]===o)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t,s=this.length;return new i(e>s-1?[]:e<0?(t=s+e)<0?[]:[this[t]]:[this[e]])},append:function(){for(var t,s=[],a=arguments.length;a--;)s[a]=arguments[a];for(var r=0;r<s.length;r+=1){t=s[r];for(var n=0;n<this.length;n+=1)if("string"==typeof t){var o=e.createElement("div");for(o.innerHTML=t;o.firstChild;)this[n].appendChild(o.firstChild)}else if(t instanceof i)for(var l=0;l<t.length;l+=1)this[n].appendChild(t[l]);else this[n].appendChild(t)}return this},prepend:function(t){var s,a;for(s=0;s<this.length;s+=1)if("string"==typeof t){var r=e.createElement("div");for(r.innerHTML=t,a=r.childNodes.length-1;a>=0;a-=1)this[s].insertBefore(r.childNodes[a],this[s].childNodes[0])}else if(t instanceof i)for(a=0;a<t.length;a+=1)this[s].insertBefore(t[a],this[s].childNodes[0]);else this[s].insertBefore(t,this[s].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&s(this[0].nextElementSibling).is(e)?new i([this[0].nextElementSibling]):new i([]):this[0].nextElementSibling?new i([this[0].nextElementSibling]):new i([]):new i([])},nextAll:function(e){var t=[],a=this[0];if(!a)return new i([]);for(;a.nextElementSibling;){var r=a.nextElementSibling;e?s(r).is(e)&&t.push(r):t.push(r),a=r}return new i(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&s(t.previousElementSibling).is(e)?new i([t.previousElementSibling]):new i([]):t.previousElementSibling?new i([t.previousElementSibling]):new i([])}return new i([])},prevAll:function(e){var t=[],a=this[0];if(!a)return new i([]);for(;a.previousElementSibling;){var r=a.previousElementSibling;e?s(r).is(e)&&t.push(r):t.push(r),a=r}return new i(t)},parent:function(e){for(var t=[],i=0;i<this.length;i+=1)null!==this[i].parentNode&&(e?s(this[i].parentNode).is(e)&&t.push(this[i].parentNode):t.push(this[i].parentNode));return s(a(t))},parents:function(e){for(var t=[],i=0;i<this.length;i+=1)for(var r=this[i].parentNode;r;)e?s(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return s(a(t))},closest:function(e){var t=this;return void 0===e?new i([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],s=0;s<this.length;s+=1)for(var a=this[s].querySelectorAll(e),r=0;r<a.length;r+=1)t.push(a[r]);return new i(t)},children:function(e){for(var t=[],r=0;r<this.length;r+=1)for(var n=this[r].childNodes,o=0;o<n.length;o+=1)e?1===n[o].nodeType&&s(n[o]).is(e)&&t.push(n[o]):1===n[o].nodeType&&t.push(n[o]);return new i(a(t))},filter:function(e){for(var t=[],s=0;s<this.length;s+=1)e.call(this[s],s,this[s])&&t.push(this[s]);return new i(t)},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,a;for(i=0;i<e.length;i+=1){var r=s(e[i]);for(a=0;a<r.length;a+=1)this[this.length]=r[a],this.length+=1}return this},styles:function(){return this[0]?t.getComputedStyle(this[0],null):{}}};Object.keys(r).forEach((function(e){s.fn[e]=s.fn[e]||r[e]}));var n={deleteProps:function(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))},nextTick:function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},now:function(){return Date.now()},getTranslate:function(e,i){var s,a,r;void 0===i&&(i="x");var n=t.getComputedStyle(e,null);return t.WebKitCSSMatrix?((a=n.transform||n.webkitTransform).split(",").length>6&&(a=a.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),r=new t.WebKitCSSMatrix("none"===a?"":a)):s=(r=n.MozTransform||n.OTransform||n.MsTransform||n.msTransform||n.transform||n.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===i&&(a=t.WebKitCSSMatrix?r.m41:16===s.length?parseFloat(s[12]):parseFloat(s[4])),"y"===i&&(a=t.WebKitCSSMatrix?r.m42:16===s.length?parseFloat(s[13]):parseFloat(s[5])),a||0},parseUrlQuery:function(e){var i,s,a,r,n={},o=e||t.location.href;if("string"==typeof o&&o.length)for(r=(s=(o=o.indexOf("?")>-1?o.replace(/\S*\?/,""):"").split("&").filter((function(e){return""!==e}))).length,i=0;i<r;i+=1)a=s[i].replace(/#\S+/g,"").split("="),n[decodeURIComponent(a[0])]=void 0===a[1]?void 0:decodeURIComponent(a[1])||"";return n},isObject:function(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object},extend:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i=Object(e[0]),s=1;s<e.length;s+=1){var a=e[s];if(null!=a)for(var r=Object.keys(Object(a)),o=0,l=r.length;o<l;o+=1){var d=r[o],h=Object.getOwnPropertyDescriptor(a,d);void 0!==h&&h.enumerable&&(n.isObject(i[d])&&n.isObject(a[d])?n.extend(i[d],a[d]):!n.isObject(i[d])&&n.isObject(a[d])?(i[d]={},n.extend(i[d],a[d])):i[d]=a[d])}}return i}},o={touch:t.Modernizr&&!0===t.Modernizr.touch||!!(t.navigator.maxTouchPoints>0||"ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),pointerEvents:!!t.PointerEvent&&"maxTouchPoints"in t.navigator&&t.navigator.maxTouchPoints>0,observer:"MutationObserver"in t||"WebkitMutationObserver"in t,passiveListener:function(){var e=!1;try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});t.addEventListener("testPassiveListener",null,i)}catch(e){}return e}(),gestures:"ongesturestart"in t},l=function(e){void 0===e&&(e={});var t=this;t.params=e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach((function(e){t.on(e,t.params.on[e])}))},d={components:{configurable:!0}};l.prototype.on=function(e,t,i){var s=this;if("function"!=typeof t)return s;var a=i?"unshift":"push";return e.split(" ").forEach((function(e){s.eventsListeners[e]||(s.eventsListeners[e]=[]),s.eventsListeners[e][a](t)})),s},l.prototype.once=function(e,t,i){var s=this;if("function"!=typeof t)return s;function a(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];t.apply(s,i),s.off(e,a),a.f7proxy&&delete a.f7proxy}return a.f7proxy=t,s.on(e,a,i)},l.prototype.off=function(e,t){var i=this;return i.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?i.eventsListeners[e]=[]:i.eventsListeners[e]&&i.eventsListeners[e].length&&i.eventsListeners[e].forEach((function(s,a){(s===t||s.f7proxy&&s.f7proxy===t)&&i.eventsListeners[e].splice(a,1)}))})),i):i},l.prototype.emit=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,s,a,r=this;if(!r.eventsListeners)return r;"string"==typeof e[0]||Array.isArray(e[0])?(i=e[0],s=e.slice(1,e.length),a=r):(i=e[0].events,s=e[0].data,a=e[0].context||r);var n=Array.isArray(i)?i:i.split(" ");return n.forEach((function(e){if(r.eventsListeners&&r.eventsListeners[e]){var t=[];r.eventsListeners[e].forEach((function(e){t.push(e)})),t.forEach((function(e){e.apply(a,s)}))}})),r},l.prototype.useModulesParams=function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(i){var s=t.modules[i];s.params&&n.extend(e,s.params)}))},l.prototype.useModules=function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(i){var s=t.modules[i],a=e[i]||{};s.instance&&Object.keys(s.instance).forEach((function(e){var i=s.instance[e];t[e]="function"==typeof i?i.bind(t):i})),s.on&&t.on&&Object.keys(s.on).forEach((function(e){t.on(e,s.on[e])})),s.create&&s.create.bind(t)(a)}))},d.components.set=function(e){this.use&&this.use(e)},l.installModule=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var s=this;s.prototype.modules||(s.prototype.modules={});var a=e.name||Object.keys(s.prototype.modules).length+"_"+n.now();return s.prototype.modules[a]=e,e.proto&&Object.keys(e.proto).forEach((function(t){s.prototype[t]=e.proto[t]})),e.static&&Object.keys(e.static).forEach((function(t){s[t]=e.static[t]})),e.install&&e.install.apply(s,t),s},l.use=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var s=this;return Array.isArray(e)?(e.forEach((function(e){return s.installModule(e)})),s):s.installModule.apply(s,[e].concat(t))},Object.defineProperties(l,d);var h={updateSize:function(){var e,t,i=this.$el;e=void 0!==this.params.width?this.params.width:i[0].clientWidth,t=void 0!==this.params.height?this.params.height:i[0].clientHeight,0===e&&this.isHorizontal()||0===t&&this.isVertical()||(e=e-parseInt(i.css("padding-left"),10)-parseInt(i.css("padding-right"),10),t=t-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10),n.extend(this,{width:e,height:t,size:this.isHorizontal()?e:t}))},updateSlides:function(){var e=this.params,i=this.$wrapperEl,s=this.size,a=this.rtlTranslate,r=this.wrongRTL,o=this.virtual&&e.virtual.enabled,l=o?this.virtual.slides.length:this.slides.length,d=i.children("."+this.params.slideClass),h=o?this.virtual.slides.length:d.length,p=[],c=[],u=[];function v(t){return!e.cssMode||t!==d.length-1}var f=e.slidesOffsetBefore;"function"==typeof f&&(f=e.slidesOffsetBefore.call(this));var m=e.slidesOffsetAfter;"function"==typeof m&&(m=e.slidesOffsetAfter.call(this));var g=this.snapGrid.length,b=this.snapGrid.length,w=e.spaceBetween,y=-f,x=0,T=0;if(void 0!==s){var E,C;"string"==typeof w&&w.indexOf("%")>=0&&(w=parseFloat(w.replace("%",""))/100*s),this.virtualSize=-w,a?d.css({marginLeft:"",marginTop:""}):d.css({marginRight:"",marginBottom:""}),e.slidesPerColumn>1&&(E=Math.floor(h/e.slidesPerColumn)===h/this.params.slidesPerColumn?h:Math.ceil(h/e.slidesPerColumn)*e.slidesPerColumn,"auto"!==e.slidesPerView&&"row"===e.slidesPerColumnFill&&(E=Math.max(E,e.slidesPerView*e.slidesPerColumn)));for(var S,M=e.slidesPerColumn,P=E/M,z=Math.floor(h/e.slidesPerColumn),k=0;k<h;k+=1){C=0;var $=d.eq(k);if(e.slidesPerColumn>1){var L=void 0,I=void 0,D=void 0;if("row"===e.slidesPerColumnFill&&e.slidesPerGroup>1){var O=Math.floor(k/(e.slidesPerGroup*e.slidesPerColumn)),A=k-e.slidesPerColumn*e.slidesPerGroup*O,G=0===O?e.slidesPerGroup:Math.min(Math.ceil((h-O*M*e.slidesPerGroup)/M),e.slidesPerGroup);L=(I=A-(D=Math.floor(A/G))*G+O*e.slidesPerGroup)+D*E/M,$.css({"-webkit-box-ordinal-group":L,"-moz-box-ordinal-group":L,"-ms-flex-order":L,"-webkit-order":L,order:L})}else"column"===e.slidesPerColumnFill?(D=k-(I=Math.floor(k/M))*M,(I>z||I===z&&D===M-1)&&(D+=1)>=M&&(D=0,I+=1)):I=k-(D=Math.floor(k/P))*P;$.css("margin-"+(this.isHorizontal()?"top":"left"),0!==D&&e.spaceBetween&&e.spaceBetween+"px")}if("none"!==$.css("display")){if("auto"===e.slidesPerView){var B=t.getComputedStyle($[0],null),H=$[0].style.transform,N=$[0].style.webkitTransform;if(H&&($[0].style.transform="none"),N&&($[0].style.webkitTransform="none"),e.roundLengths)C=this.isHorizontal()?$.outerWidth(!0):$.outerHeight(!0);else if(this.isHorizontal()){var X=parseFloat(B.getPropertyValue("width")),V=parseFloat(B.getPropertyValue("padding-left")),Y=parseFloat(B.getPropertyValue("padding-right")),F=parseFloat(B.getPropertyValue("margin-left")),W=parseFloat(B.getPropertyValue("margin-right")),R=B.getPropertyValue("box-sizing");C=R&&"border-box"===R?X+F+W:X+V+Y+F+W}else{var q=parseFloat(B.getPropertyValue("height")),j=parseFloat(B.getPropertyValue("padding-top")),K=parseFloat(B.getPropertyValue("padding-bottom")),U=parseFloat(B.getPropertyValue("margin-top")),_=parseFloat(B.getPropertyValue("margin-bottom")),Z=B.getPropertyValue("box-sizing");C=Z&&"border-box"===Z?q+U+_:q+j+K+U+_}H&&($[0].style.transform=H),N&&($[0].style.webkitTransform=N),e.roundLengths&&(C=Math.floor(C))}else C=(s-(e.slidesPerView-1)*w)/e.slidesPerView,e.roundLengths&&(C=Math.floor(C)),d[k]&&(this.isHorizontal()?d[k].style.width=C+"px":d[k].style.height=C+"px");d[k]&&(d[k].swiperSlideSize=C),u.push(C),e.centeredSlides?(y=y+C/2+x/2+w,0===x&&0!==k&&(y=y-s/2-w),0===k&&(y=y-s/2-w),Math.abs(y)<.001&&(y=0),e.roundLengths&&(y=Math.floor(y)),T%e.slidesPerGroup==0&&p.push(y),c.push(y)):(e.roundLengths&&(y=Math.floor(y)),T%e.slidesPerGroup==0&&p.push(y),c.push(y),y=y+C+w),this.virtualSize+=C+w,x=C,T+=1}}if(this.virtualSize=Math.max(this.virtualSize,s)+m,a&&r&&("slide"===e.effect||"coverflow"===e.effect)&&i.css({width:this.virtualSize+e.spaceBetween+"px"}),e.setWrapperSize&&(this.isHorizontal()?i.css({width:this.virtualSize+e.spaceBetween+"px"}):i.css({height:this.virtualSize+e.spaceBetween+"px"})),e.slidesPerColumn>1&&(this.virtualSize=(C+e.spaceBetween)*E,this.virtualSize=Math.ceil(this.virtualSize/e.slidesPerColumn)-e.spaceBetween,this.isHorizontal()?i.css({width:this.virtualSize+e.spaceBetween+"px"}):i.css({height:this.virtualSize+e.spaceBetween+"px"}),e.centeredSlides)){S=[];for(var Q=0;Q<p.length;Q+=1){var J=p[Q];e.roundLengths&&(J=Math.floor(J)),p[Q]<this.virtualSize+p[0]&&S.push(J)}p=S}if(!e.centeredSlides){S=[];for(var ee=0;ee<p.length;ee+=1){var te=p[ee];e.roundLengths&&(te=Math.floor(te)),p[ee]<=this.virtualSize-s&&S.push(te)}p=S,Math.floor(this.virtualSize-s)-Math.floor(p[p.length-1])>1&&p.push(this.virtualSize-s)}if(0===p.length&&(p=[0]),0!==e.spaceBetween&&(this.isHorizontal()?a?d.filter(v).css({marginLeft:w+"px"}):d.filter(v).css({marginRight:w+"px"}):d.filter(v).css({marginBottom:w+"px"})),e.centeredSlides&&e.centeredSlidesBounds){var ie=0;u.forEach((function(t){ie+=t+(e.spaceBetween?e.spaceBetween:0)}));var se=(ie-=e.spaceBetween)-s;p=p.map((function(e){return e<0?-f:e>se?se+m:e}))}if(e.centerInsufficientSlides){var ae=0;if(u.forEach((function(t){ae+=t+(e.spaceBetween?e.spaceBetween:0)})),(ae-=e.spaceBetween)<s){var re=(s-ae)/2;p.forEach((function(e,t){p[t]=e-re})),c.forEach((function(e,t){c[t]=e+re}))}}n.extend(this,{slides:d,snapGrid:p,slidesGrid:c,slidesSizesGrid:u}),h!==l&&this.emit("slidesLengthChange"),p.length!==g&&(this.params.watchOverflow&&this.checkOverflow(),this.emit("snapGridLengthChange")),c.length!==b&&this.emit("slidesGridLengthChange"),(e.watchSlidesProgress||e.watchSlidesVisibility)&&this.updateSlidesOffset()}},updateAutoHeight:function(e){var t,i=[],s=0;if("number"==typeof e?this.setTransition(e):!0===e&&this.setTransition(this.params.speed),"auto"!==this.params.slidesPerView&&this.params.slidesPerView>1)for(t=0;t<Math.ceil(this.params.slidesPerView);t+=1){var a=this.activeIndex+t;if(a>this.slides.length)break;i.push(this.slides.eq(a)[0])}else i.push(this.slides.eq(this.activeIndex)[0]);for(t=0;t<i.length;t+=1)if(void 0!==i[t]){var r=i[t].offsetHeight;s=r>s?r:s}s&&this.$wrapperEl.css("height",s+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this.params,i=this.slides,a=this.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&this.updateSlidesOffset();var r=-e;a&&(r=e),i.removeClass(t.slideVisibleClass),this.visibleSlidesIndexes=[],this.visibleSlides=[];for(var n=0;n<i.length;n+=1){var o=i[n],l=(r+(t.centeredSlides?this.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+t.spaceBetween);if(t.watchSlidesVisibility){var d=-(r-o.swiperSlideOffset),h=d+this.slidesSizesGrid[n];(d>=0&&d<this.size-1||h>1&&h<=this.size||d<=0&&h>=this.size)&&(this.visibleSlides.push(o),this.visibleSlidesIndexes.push(n),i.eq(n).addClass(t.slideVisibleClass))}o.progress=a?-l:l}this.visibleSlides=s(this.visibleSlides)}},updateProgress:function(e){if(void 0===e){var t=this.rtlTranslate?-1:1;e=this&&this.translate&&this.translate*t||0}var i=this.params,s=this.maxTranslate()-this.minTranslate(),a=this.progress,r=this.isBeginning,o=this.isEnd,l=r,d=o;0===s?(a=0,r=!0,o=!0):(r=(a=(e-this.minTranslate())/s)<=0,o=a>=1),n.extend(this,{progress:a,isBeginning:r,isEnd:o}),(i.watchSlidesProgress||i.watchSlidesVisibility)&&this.updateSlidesProgress(e),r&&!l&&this.emit("reachBeginning toEdge"),o&&!d&&this.emit("reachEnd toEdge"),(l&&!r||d&&!o)&&this.emit("fromEdge"),this.emit("progress",a)},updateSlidesClasses:function(){var e,t=this.slides,i=this.params,s=this.$wrapperEl,a=this.activeIndex,r=this.realIndex,n=this.virtual&&i.virtual.enabled;t.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(e=n?this.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+a+'"]'):t.eq(a)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+r+'"]').addClass(i.slideDuplicateActiveClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+r+'"]').addClass(i.slideDuplicateActiveClass));var o=e.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===o.length&&(o=t.eq(0)).addClass(i.slideNextClass);var l=e.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===l.length&&(l=t.eq(-1)).addClass(i.slidePrevClass),i.loop&&(o.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),l.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(e){var t,i=this.rtlTranslate?this.translate:-this.translate,s=this.slidesGrid,a=this.snapGrid,r=this.params,o=this.activeIndex,l=this.realIndex,d=this.snapIndex,h=e;if(void 0===h){for(var p=0;p<s.length;p+=1)void 0!==s[p+1]?i>=s[p]&&i<s[p+1]-(s[p+1]-s[p])/2?h=p:i>=s[p]&&i<s[p+1]&&(h=p+1):i>=s[p]&&(h=p);r.normalizeSlideIndex&&(h<0||void 0===h)&&(h=0)}if((t=a.indexOf(i)>=0?a.indexOf(i):Math.floor(h/r.slidesPerGroup))>=a.length&&(t=a.length-1),h!==o){var c=parseInt(this.slides.eq(h).attr("data-swiper-slide-index")||h,10);n.extend(this,{snapIndex:t,realIndex:c,previousIndex:o,activeIndex:h}),this.emit("activeIndexChange"),this.emit("snapIndexChange"),l!==c&&this.emit("realIndexChange"),(this.initialized||this.runCallbacksOnInit)&&this.emit("slideChange")}else t!==d&&(this.snapIndex=t,this.emit("snapIndexChange"))},updateClickedSlide:function(e){var t=this.params,i=s(e.target).closest("."+t.slideClass)[0],a=!1;if(i)for(var r=0;r<this.slides.length;r+=1)this.slides[r]===i&&(a=!0);if(!i||!a)return this.clickedSlide=void 0,void(this.clickedIndex=void 0);this.clickedSlide=i,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(s(i).attr("data-swiper-slide-index"),10):this.clickedIndex=s(i).index(),t.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}};var p={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this.params,i=this.rtlTranslate,s=this.translate,a=this.$wrapperEl;if(t.virtualTranslate)return i?-s:s;if(t.cssMode)return s;var r=n.getTranslate(a[0],e);return i&&(r=-r),r||0},setTranslate:function(e,t){var i=this.rtlTranslate,s=this.params,a=this.$wrapperEl,r=this.wrapperEl,n=this.progress,o=0,l=0;this.isHorizontal()?o=i?-e:e:l=e,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),s.cssMode?r[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-o:-l:s.virtualTranslate||a.transform("translate3d("+o+"px, "+l+"px, 0px)"),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?o:l;var d=this.maxTranslate()-this.minTranslate();(0===d?0:(e-this.minTranslate())/d)!==n&&this.updateProgress(e),this.emit("setTranslate",this.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,i,s,a){var r;void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),void 0===s&&(s=!0);var n=this,o=n.params,l=n.wrapperEl;if(n.animating&&o.preventInteractionOnTransition)return!1;var d,h=n.minTranslate(),p=n.maxTranslate();if(d=s&&e>h?h:s&&e<p?p:e,n.updateProgress(d),o.cssMode){var c=n.isHorizontal();return 0===t?l[c?"scrollLeft":"scrollTop"]=-d:l.scrollTo?l.scrollTo(((r={})[c?"left":"top"]=-d,r.behavior="smooth",r)):l[c?"scrollLeft":"scrollTop"]=-d,!0}return 0===t?(n.setTransition(0),n.setTranslate(d),i&&(n.emit("beforeTransitionStart",t,a),n.emit("transitionEnd"))):(n.setTransition(t),n.setTranslate(d),i&&(n.emit("beforeTransitionStart",t,a),n.emit("transitionStart")),n.animating||(n.animating=!0,n.onTranslateToWrapperTransitionEnd||(n.onTranslateToWrapperTransitionEnd=function(e){n&&!n.destroyed&&e.target===this&&(n.$wrapperEl[0].removeEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.$wrapperEl[0].removeEventListener("webkitTransitionEnd",n.onTranslateToWrapperTransitionEnd),n.onTranslateToWrapperTransitionEnd=null,delete n.onTranslateToWrapperTransitionEnd,i&&n.emit("transitionEnd"))}),n.$wrapperEl[0].addEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.$wrapperEl[0].addEventListener("webkitTransitionEnd",n.onTranslateToWrapperTransitionEnd))),!0}};var c={setTransition:function(e,t){this.params.cssMode||this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,s=this.params,a=this.previousIndex;if(!s.cssMode){s.autoHeight&&this.updateAutoHeight();var r=t;if(r||(r=i>a?"next":i<a?"prev":"reset"),this.emit("transitionStart"),e&&i!==a){if("reset"===r)return void this.emit("slideResetTransitionStart");this.emit("slideChangeTransitionStart"),"next"===r?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,s=this.previousIndex,a=this.params;if(this.animating=!1,!a.cssMode){this.setTransition(0);var r=t;if(r||(r=i>s?"next":i<s?"prev":"reset"),this.emit("transitionEnd"),e&&i!==s){if("reset"===r)return void this.emit("slideResetTransitionEnd");this.emit("slideChangeTransitionEnd"),"next"===r?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd")}}}};var u={slideTo:function(e,t,i,s){var a;void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var r=this,n=e;n<0&&(n=0);var o=r.params,l=r.snapGrid,d=r.slidesGrid,h=r.previousIndex,p=r.activeIndex,c=r.rtlTranslate,u=r.wrapperEl;if(r.animating&&o.preventInteractionOnTransition)return!1;var v=Math.floor(n/o.slidesPerGroup);v>=l.length&&(v=l.length-1),(p||o.initialSlide||0)===(h||0)&&i&&r.emit("beforeSlideChangeStart");var f,m=-l[v];if(r.updateProgress(m),o.normalizeSlideIndex)for(var g=0;g<d.length;g+=1)-Math.floor(100*m)>=Math.floor(100*d[g])&&(n=g);if(r.initialized&&n!==p){if(!r.allowSlideNext&&m<r.translate&&m<r.minTranslate())return!1;if(!r.allowSlidePrev&&m>r.translate&&m>r.maxTranslate()&&(p||0)!==n)return!1}if(f=n>p?"next":n<p?"prev":"reset",c&&-m===r.translate||!c&&m===r.translate)return r.updateActiveIndex(n),o.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),"slide"!==o.effect&&r.setTranslate(m),"reset"!==f&&(r.transitionStart(i,f),r.transitionEnd(i,f)),!1;if(o.cssMode){var b=r.isHorizontal();return 0===t?u[b?"scrollLeft":"scrollTop"]=-m:u.scrollTo?u.scrollTo(((a={})[b?"left":"top"]=-m,a.behavior="smooth",a)):u[b?"scrollLeft":"scrollTop"]=-m,!0}return 0===t?(r.setTransition(0),r.setTranslate(m),r.updateActiveIndex(n),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,s),r.transitionStart(i,f),r.transitionEnd(i,f)):(r.setTransition(t),r.setTranslate(m),r.updateActiveIndex(n),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,s),r.transitionStart(i,f),r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.$wrapperEl[0].removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].removeEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(i,f))}),r.$wrapperEl[0].addEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].addEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,i,s){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var a=e;return this.params.loop&&(a+=this.loopedSlides),this.slideTo(a,t,i,s)},slideNext:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var s=this.params,a=this.animating;return s.loop?!a&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,this.slideTo(this.activeIndex+s.slidesPerGroup,e,t,i)):this.slideTo(this.activeIndex+s.slidesPerGroup,e,t,i)},slidePrev:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var s=this.params,a=this.animating,r=this.snapGrid,n=this.slidesGrid,o=this.rtlTranslate;if(s.loop){if(a)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}function l(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var d,h=l(o?this.translate:-this.translate),p=r.map((function(e){return l(e)})),c=(n.map((function(e){return l(e)})),r[p.indexOf(h)],r[p.indexOf(h)-1]);return void 0===c&&s.cssMode&&r.forEach((function(e){!c&&h>=e&&(c=e)})),void 0!==c&&(d=n.indexOf(c))<0&&(d=this.activeIndex-1),this.slideTo(d,e,t,i)},slideReset:function(e,t,i){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,i)},slideToClosest:function(e,t,i,s){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===s&&(s=.5);var a=this.activeIndex,r=Math.floor(a/this.params.slidesPerGroup),n=this.rtlTranslate?this.translate:-this.translate;if(n>=this.snapGrid[r]){var o=this.snapGrid[r];n-o>(this.snapGrid[r+1]-o)*s&&(a+=this.params.slidesPerGroup)}else{var l=this.snapGrid[r-1];n-l<=(this.snapGrid[r]-l)*s&&(a-=this.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,this.snapGrid.length-1),this.slideTo(a,e,t,i)},slideToClickedSlide:function(){var e,t=this,i=t.params,a=t.$wrapperEl,r="auto"===i.slidesPerView?t.slidesPerViewDynamic():i.slidesPerView,o=t.clickedIndex;if(i.loop){if(t.animating)return;e=parseInt(s(t.clickedSlide).attr("data-swiper-slide-index"),10),i.centeredSlides?o<t.loopedSlides-r/2||o>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),o=a.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),n.nextTick((function(){t.slideTo(o)}))):t.slideTo(o):o>t.slides.length-r?(t.loopFix(),o=a.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),n.nextTick((function(){t.slideTo(o)}))):t.slideTo(o)}else t.slideTo(o)}};var v={loopCreate:function(){var t=this,i=t.params,a=t.$wrapperEl;a.children("."+i.slideClass+"."+i.slideDuplicateClass).remove();var r=a.children("."+i.slideClass);if(i.loopFillGroupWithBlank){var n=i.slidesPerGroup-r.length%i.slidesPerGroup;if(n!==i.slidesPerGroup){for(var o=0;o<n;o+=1){var l=s(e.createElement("div")).addClass(i.slideClass+" "+i.slideBlankClass);a.append(l)}r=a.children("."+i.slideClass)}}"auto"!==i.slidesPerView||i.loopedSlides||(i.loopedSlides=r.length),t.loopedSlides=Math.ceil(parseFloat(i.loopedSlides||i.slidesPerView,10)),t.loopedSlides+=i.loopAdditionalSlides,t.loopedSlides>r.length&&(t.loopedSlides=r.length);var d=[],h=[];r.each((function(e,i){var a=s(i);e<t.loopedSlides&&h.push(i),e<r.length&&e>=r.length-t.loopedSlides&&d.push(i),a.attr("data-swiper-slide-index",e)}));for(var p=0;p<h.length;p+=1)a.append(s(h[p].cloneNode(!0)).addClass(i.slideDuplicateClass));for(var c=d.length-1;c>=0;c-=1)a.prepend(s(d[c].cloneNode(!0)).addClass(i.slideDuplicateClass))},loopFix:function(){var e,t=this.activeIndex,i=this.slides,s=this.loopedSlides,a=this.allowSlidePrev,r=this.allowSlideNext,n=this.snapGrid,o=this.rtlTranslate;this.allowSlidePrev=!0,this.allowSlideNext=!0;var l=-n[t]-this.getTranslate();if(t<s)e=i.length-3*s+t,e+=s,this.slideTo(e,0,!1,!0)&&0!==l&&this.setTranslate((o?-this.translate:this.translate)-l);else if(t>=i.length-s){e=-i.length+t+s,e+=s,this.slideTo(e,0,!1,!0)&&0!==l&&this.setTranslate((o?-this.translate:this.translate)-l)}this.allowSlidePrev=a,this.allowSlideNext=r},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,i=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass+",."+t.slideClass+"."+t.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}};var f={setGrabCursor:function(e){if(!(o.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked||this.params.cssMode)){var t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){o.touch||this.params.watchOverflow&&this.isLocked||this.params.cssMode||(this.el.style.cursor="")}};var m,g,b,w,y,x,T,E,C,S,M,P,z,k,$,L={appendSlide:function(e){var t=this.$wrapperEl,i=this.params;if(i.loop&&this.loopDestroy(),"object"==typeof e&&"length"in e)for(var s=0;s<e.length;s+=1)e[s]&&t.append(e[s]);else t.append(e);i.loop&&this.loopCreate(),i.observer&&o.observer||this.update()},prependSlide:function(e){var t=this.params,i=this.$wrapperEl,s=this.activeIndex;t.loop&&this.loopDestroy();var a=s+1;if("object"==typeof e&&"length"in e){for(var r=0;r<e.length;r+=1)e[r]&&i.prepend(e[r]);a=s+e.length}else i.prepend(e);t.loop&&this.loopCreate(),t.observer&&o.observer||this.update(),this.slideTo(a,0,!1)},addSlide:function(e,t){var i=this.$wrapperEl,s=this.params,a=this.activeIndex;s.loop&&(a-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+s.slideClass));var r=this.slides.length;if(e<=0)this.prependSlide(t);else if(e>=r)this.appendSlide(t);else{for(var n=a>e?a+1:a,l=[],d=r-1;d>=e;d-=1){var h=this.slides.eq(d);h.remove(),l.unshift(h)}if("object"==typeof t&&"length"in t){for(var p=0;p<t.length;p+=1)t[p]&&i.append(t[p]);n=a>e?a+t.length:a}else i.append(t);for(var c=0;c<l.length;c+=1)i.append(l[c]);s.loop&&this.loopCreate(),s.observer&&o.observer||this.update(),s.loop?this.slideTo(n+this.loopedSlides,0,!1):this.slideTo(n,0,!1)}},removeSlide:function(e){var t=this.params,i=this.$wrapperEl,s=this.activeIndex;t.loop&&(s-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+t.slideClass));var a,r=s;if("object"==typeof e&&"length"in e){for(var n=0;n<e.length;n+=1)a=e[n],this.slides[a]&&this.slides.eq(a).remove(),a<r&&(r-=1);r=Math.max(r,0)}else a=e,this.slides[a]&&this.slides.eq(a).remove(),a<r&&(r-=1),r=Math.max(r,0);t.loop&&this.loopCreate(),t.observer&&o.observer||this.update(),t.loop?this.slideTo(r+this.loopedSlides,0,!1):this.slideTo(r,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},I=(m=t.navigator.platform,g=t.navigator.userAgent,b={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!t.cordova&&!t.phonegap),phonegap:!(!t.cordova&&!t.phonegap),electron:!1},w=t.screen.width,y=t.screen.height,x=g.match(/(Android);?[\s\/]+([\d.]+)?/),T=g.match(/(iPad).*OS\s([\d_]+)/),E=g.match(/(iPod)(.*OS\s([\d_]+))?/),C=!T&&g.match(/(iPhone\sOS|iOS)\s([\d_]+)/),S=g.indexOf("MSIE ")>=0||g.indexOf("Trident/")>=0,M=g.indexOf("Edge/")>=0,P=g.indexOf("Gecko/")>=0&&g.indexOf("Firefox/")>=0,z="Win32"===m,k=g.toLowerCase().indexOf("electron")>=0,$="MacIntel"===m,!T&&$&&o.touch&&(1024===w&&1366===y||834===w&&1194===y||834===w&&1112===y||768===w&&1024===y)&&(T=g.match(/(Version)\/([\d.]+)/),$=!1),b.ie=S,b.edge=M,b.firefox=P,x&&!z&&(b.os="android",b.osVersion=x[2],b.android=!0,b.androidChrome=g.toLowerCase().indexOf("chrome")>=0),(T||C||E)&&(b.os="ios",b.ios=!0),C&&!E&&(b.osVersion=C[2].replace(/_/g,"."),b.iphone=!0),T&&(b.osVersion=T[2].replace(/_/g,"."),b.ipad=!0),E&&(b.osVersion=E[3]?E[3].replace(/_/g,"."):null,b.ipod=!0),b.ios&&b.osVersion&&g.indexOf("Version/")>=0&&"10"===b.osVersion.split(".")[0]&&(b.osVersion=g.toLowerCase().split("version/")[1].split(" ")[0]),b.webView=!(!(C||T||E)||!g.match(/.*AppleWebKit(?!.*Safari)/i)&&!t.navigator.standalone)||t.matchMedia&&t.matchMedia("(display-mode: standalone)").matches,b.webview=b.webView,b.standalone=b.webView,b.desktop=!(b.ios||b.android)||k,b.desktop&&(b.electron=k,b.macos=$,b.windows=z,b.macos&&(b.os="macos"),b.windows&&(b.os="windows")),b.pixelRatio=t.devicePixelRatio||1,b);function D(i){var a=this.touchEventsData,r=this.params,o=this.touches;if(!this.animating||!r.preventInteractionOnTransition){var l=i;l.originalEvent&&(l=l.originalEvent);var d=s(l.target);if(("wrapper"!==r.touchEventsTarget||d.closest(this.wrapperEl).length)&&(a.isTouchEvent="touchstart"===l.type,(a.isTouchEvent||!("which"in l)||3!==l.which)&&!(!a.isTouchEvent&&"button"in l&&l.button>0||a.isTouched&&a.isMoved)))if(r.noSwiping&&d.closest(r.noSwipingSelector?r.noSwipingSelector:"."+r.noSwipingClass)[0])this.allowClick=!0;else if(!r.swipeHandler||d.closest(r.swipeHandler)[0]){o.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,o.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;var h=o.currentX,p=o.currentY,c=r.edgeSwipeDetection||r.iOSEdgeSwipeDetection,u=r.edgeSwipeThreshold||r.iOSEdgeSwipeThreshold;if(!c||!(h<=u||h>=t.screen.width-u)){if(n.extend(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=h,o.startY=p,a.touchStartTime=n.now(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,r.threshold>0&&(a.allowThresholdMove=!1),"touchstart"!==l.type){var v=!0;d.is(a.formElements)&&(v=!1),e.activeElement&&s(e.activeElement).is(a.formElements)&&e.activeElement!==d[0]&&e.activeElement.blur();var f=v&&this.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||f)&&l.preventDefault()}this.emit("touchStart",l)}}}}function O(t){var i=this.touchEventsData,a=this.params,r=this.touches,o=this.rtlTranslate,l=t;if(l.originalEvent&&(l=l.originalEvent),i.isTouched){if(!i.isTouchEvent||"mousemove"!==l.type){var d="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),h="touchmove"===l.type?d.pageX:l.pageX,p="touchmove"===l.type?d.pageY:l.pageY;if(l.preventedByNestedSwiper)return r.startX=h,void(r.startY=p);if(!this.allowTouchMove)return this.allowClick=!1,void(i.isTouched&&(n.extend(r,{startX:h,startY:p,currentX:h,currentY:p}),i.touchStartTime=n.now()));if(i.isTouchEvent&&a.touchReleaseOnEdges&&!a.loop)if(this.isVertical()){if(p<r.startY&&this.translate<=this.maxTranslate()||p>r.startY&&this.translate>=this.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(h<r.startX&&this.translate<=this.maxTranslate()||h>r.startX&&this.translate>=this.minTranslate())return;if(i.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&s(l.target).is(i.formElements))return i.isMoved=!0,void(this.allowClick=!1);if(i.allowTouchCallbacks&&this.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){r.currentX=h,r.currentY=p;var c=r.currentX-r.startX,u=r.currentY-r.startY;if(!(this.params.threshold&&Math.sqrt(Math.pow(c,2)+Math.pow(u,2))<this.params.threshold)){var v;if(void 0===i.isScrolling)this.isHorizontal()&&r.currentY===r.startY||this.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:c*c+u*u>=25&&(v=180*Math.atan2(Math.abs(u),Math.abs(c))/Math.PI,i.isScrolling=this.isHorizontal()?v>a.touchAngle:90-v>a.touchAngle);if(i.isScrolling&&this.emit("touchMoveOpposite",l),void 0===i.startMoving&&(r.currentX===r.startX&&r.currentY===r.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){this.allowClick=!1,a.cssMode||l.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&l.stopPropagation(),i.isMoved||(a.loop&&this.loopFix(),i.startTranslate=this.getTranslate(),this.setTransition(0),this.animating&&this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!a.grabCursor||!0!==this.allowSlideNext&&!0!==this.allowSlidePrev||this.setGrabCursor(!0),this.emit("sliderFirstMove",l)),this.emit("sliderMove",l),i.isMoved=!0;var f=this.isHorizontal()?c:u;r.diff=f,f*=a.touchRatio,o&&(f=-f),this.swipeDirection=f>0?"prev":"next",i.currentTranslate=f+i.startTranslate;var m=!0,g=a.resistanceRatio;if(a.touchReleaseOnEdges&&(g=0),f>0&&i.currentTranslate>this.minTranslate()?(m=!1,a.resistance&&(i.currentTranslate=this.minTranslate()-1+Math.pow(-this.minTranslate()+i.startTranslate+f,g))):f<0&&i.currentTranslate<this.maxTranslate()&&(m=!1,a.resistance&&(i.currentTranslate=this.maxTranslate()+1-Math.pow(this.maxTranslate()-i.startTranslate-f,g))),m&&(l.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),a.threshold>0){if(!(Math.abs(f)>a.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,void(r.diff=this.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY)}a.followFinger&&!a.cssMode&&((a.freeMode||a.watchSlidesProgress||a.watchSlidesVisibility)&&(this.updateActiveIndex(),this.updateSlidesClasses()),a.freeMode&&(0===i.velocities.length&&i.velocities.push({position:r[this.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:r[this.isHorizontal()?"currentX":"currentY"],time:n.now()})),this.updateProgress(i.currentTranslate),this.setTranslate(i.currentTranslate))}}}}}else i.startMoving&&i.isScrolling&&this.emit("touchMoveOpposite",l)}function A(e){var t=this,i=t.touchEventsData,s=t.params,a=t.touches,r=t.rtlTranslate,o=t.$wrapperEl,l=t.slidesGrid,d=t.snapGrid,h=e;if(h.originalEvent&&(h=h.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",h),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&s.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);s.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var p,c=n.now(),u=c-i.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(h),t.emit("tap click",h),u<300&&c-i.lastClickTime<300&&t.emit("doubleTap doubleClick",h)),i.lastClickTime=n.now(),n.nextTick((function(){t.destroyed||(t.allowClick=!0)})),!i.isTouched||!i.isMoved||!t.swipeDirection||0===a.diff||i.currentTranslate===i.startTranslate)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,p=s.followFinger?r?t.translate:-t.translate:-i.currentTranslate,!s.cssMode)if(s.freeMode){if(p<-t.minTranslate())return void t.slideTo(t.activeIndex);if(p>-t.maxTranslate())return void(t.slides.length<d.length?t.slideTo(d.length-1):t.slideTo(t.slides.length-1));if(s.freeModeMomentum){if(i.velocities.length>1){var v=i.velocities.pop(),f=i.velocities.pop(),m=v.position-f.position,g=v.time-f.time;t.velocity=m/g,t.velocity/=2,Math.abs(t.velocity)<s.freeModeMinimumVelocity&&(t.velocity=0),(g>150||n.now()-v.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=s.freeModeMomentumVelocityRatio,i.velocities.length=0;var b=1e3*s.freeModeMomentumRatio,w=t.velocity*b,y=t.translate+w;r&&(y=-y);var x,T,E=!1,C=20*Math.abs(t.velocity)*s.freeModeMomentumBounceRatio;if(y<t.maxTranslate())s.freeModeMomentumBounce?(y+t.maxTranslate()<-C&&(y=t.maxTranslate()-C),x=t.maxTranslate(),E=!0,i.allowMomentumBounce=!0):y=t.maxTranslate(),s.loop&&s.centeredSlides&&(T=!0);else if(y>t.minTranslate())s.freeModeMomentumBounce?(y-t.minTranslate()>C&&(y=t.minTranslate()+C),x=t.minTranslate(),E=!0,i.allowMomentumBounce=!0):y=t.minTranslate(),s.loop&&s.centeredSlides&&(T=!0);else if(s.freeModeSticky){for(var S,M=0;M<d.length;M+=1)if(d[M]>-y){S=M;break}y=-(y=Math.abs(d[S]-y)<Math.abs(d[S-1]-y)||"next"===t.swipeDirection?d[S]:d[S-1])}if(T&&t.once("transitionEnd",(function(){t.loopFix()})),0!==t.velocity){if(b=r?Math.abs((-y-t.translate)/t.velocity):Math.abs((y-t.translate)/t.velocity),s.freeModeSticky){var P=Math.abs((r?-y:y)-t.translate),z=t.slidesSizesGrid[t.activeIndex];b=P<z?s.speed:P<2*z?1.5*s.speed:2.5*s.speed}}else if(s.freeModeSticky)return void t.slideToClosest();s.freeModeMomentumBounce&&E?(t.updateProgress(x),t.setTransition(b),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&i.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(s.speed),t.setTranslate(x),o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))}))):t.velocity?(t.updateProgress(y),t.setTransition(b),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))):t.updateProgress(y),t.updateActiveIndex(),t.updateSlidesClasses()}else if(s.freeModeSticky)return void t.slideToClosest();(!s.freeModeMomentum||u>=s.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var k=0,$=t.slidesSizesGrid[0],L=0;L<l.length;L+=s.slidesPerGroup)void 0!==l[L+s.slidesPerGroup]?p>=l[L]&&p<l[L+s.slidesPerGroup]&&(k=L,$=l[L+s.slidesPerGroup]-l[L]):p>=l[L]&&(k=L,$=l[l.length-1]-l[l.length-2]);var I=(p-l[k])/$;if(u>s.longSwipesMs){if(!s.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(I>=s.longSwipesRatio?t.slideTo(k+s.slidesPerGroup):t.slideTo(k)),"prev"===t.swipeDirection&&(I>1-s.longSwipesRatio?t.slideTo(k+s.slidesPerGroup):t.slideTo(k))}else{if(!s.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(h.target===t.navigation.nextEl||h.target===t.navigation.prevEl)?h.target===t.navigation.nextEl?t.slideTo(k+s.slidesPerGroup):t.slideTo(k):("next"===t.swipeDirection&&t.slideTo(k+s.slidesPerGroup),"prev"===t.swipeDirection&&t.slideTo(k))}}}function G(){var e=this.params,t=this.el;if(!t||0!==t.offsetWidth){e.breakpoints&&this.setBreakpoint();var i=this.allowSlideNext,s=this.allowSlidePrev,a=this.snapGrid;this.allowSlideNext=!0,this.allowSlidePrev=!0,this.updateSize(),this.updateSlides(),this.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&this.isEnd&&!this.params.centeredSlides?this.slideTo(this.slides.length-1,0,!1,!0):this.slideTo(this.activeIndex,0,!1,!0),this.autoplay&&this.autoplay.running&&this.autoplay.paused&&this.autoplay.run(),this.allowSlidePrev=s,this.allowSlideNext=i,this.params.watchOverflow&&a!==this.snapGrid&&this.checkOverflow()}}function B(e){this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function H(){var e=this.wrapperEl;this.previousTranslate=this.translate,this.translate=this.isHorizontal()?-e.scrollLeft:-e.scrollTop,-0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();var t=this.maxTranslate()-this.minTranslate();(0===t?0:(this.translate-this.minTranslate())/t)!==this.progress&&this.updateProgress(this.translate),this.emit("setTranslate",this.translate,!1)}var N=!1;function X(){}var V={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},Y={update:h,translate:p,transition:c,slide:u,loop:v,grabCursor:f,manipulation:L,events:{attachEvents:function(){var t=this.params,i=this.touchEvents,s=this.el,a=this.wrapperEl;this.onTouchStart=D.bind(this),this.onTouchMove=O.bind(this),this.onTouchEnd=A.bind(this),t.cssMode&&(this.onScroll=H.bind(this)),this.onClick=B.bind(this);var r=!!t.nested;if(!o.touch&&o.pointerEvents)s.addEventListener(i.start,this.onTouchStart,!1),e.addEventListener(i.move,this.onTouchMove,r),e.addEventListener(i.end,this.onTouchEnd,!1);else{if(o.touch){var n=!("touchstart"!==i.start||!o.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};s.addEventListener(i.start,this.onTouchStart,n),s.addEventListener(i.move,this.onTouchMove,o.passiveListener?{passive:!1,capture:r}:r),s.addEventListener(i.end,this.onTouchEnd,n),i.cancel&&s.addEventListener(i.cancel,this.onTouchEnd,n),N||(e.addEventListener("touchstart",X),N=!0)}(t.simulateTouch&&!I.ios&&!I.android||t.simulateTouch&&!o.touch&&I.ios)&&(s.addEventListener("mousedown",this.onTouchStart,!1),e.addEventListener("mousemove",this.onTouchMove,r),e.addEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&s.addEventListener("click",this.onClick,!0),t.cssMode&&a.addEventListener("scroll",this.onScroll),this.on(I.ios||I.android?"resize orientationchange observerUpdate":"resize observerUpdate",G,!0)},detachEvents:function(){var t=this.params,i=this.touchEvents,s=this.el,a=this.wrapperEl,r=!!t.nested;if(!o.touch&&o.pointerEvents)s.removeEventListener(i.start,this.onTouchStart,!1),e.removeEventListener(i.move,this.onTouchMove,r),e.removeEventListener(i.end,this.onTouchEnd,!1);else{if(o.touch){var n=!("onTouchStart"!==i.start||!o.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};s.removeEventListener(i.start,this.onTouchStart,n),s.removeEventListener(i.move,this.onTouchMove,r),s.removeEventListener(i.end,this.onTouchEnd,n),i.cancel&&s.removeEventListener(i.cancel,this.onTouchEnd,n)}(t.simulateTouch&&!I.ios&&!I.android||t.simulateTouch&&!o.touch&&I.ios)&&(s.removeEventListener("mousedown",this.onTouchStart,!1),e.removeEventListener("mousemove",this.onTouchMove,r),e.removeEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&s.removeEventListener("click",this.onClick,!0),t.cssMode&&a.removeEventListener("scroll",this.onScroll),this.off(I.ios||I.android?"resize orientationchange observerUpdate":"resize observerUpdate",G)}},breakpoints:{setBreakpoint:function(){var e=this.activeIndex,t=this.initialized,i=this.loopedSlides;void 0===i&&(i=0);var s=this.params,a=this.$el,r=s.breakpoints;if(r&&(!r||0!==Object.keys(r).length)){var o=this.getBreakpoint(r);if(o&&this.currentBreakpoint!==o){var l=o in r?r[o]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerColumn"].forEach((function(e){var t=l[e];void 0!==t&&(l[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}));var d=l||this.originalParams,h=s.slidesPerColumn>1,p=d.slidesPerColumn>1;h&&!p?a.removeClass(s.containerModifierClass+"multirow "+s.containerModifierClass+"multirow-column"):!h&&p&&(a.addClass(s.containerModifierClass+"multirow"),"column"===d.slidesPerColumnFill&&a.addClass(s.containerModifierClass+"multirow-column"));var c=d.direction&&d.direction!==s.direction,u=s.loop&&(d.slidesPerView!==s.slidesPerView||c);c&&t&&this.changeDirection(),n.extend(this.params,d),n.extend(this,{allowTouchMove:this.params.allowTouchMove,allowSlideNext:this.params.allowSlideNext,allowSlidePrev:this.params.allowSlidePrev}),this.currentBreakpoint=o,u&&t&&(this.loopDestroy(),this.loopCreate(),this.updateSlides(),this.slideTo(e-i+this.loopedSlides,0,!1)),this.emit("breakpoint",d)}}},getBreakpoint:function(e){if(e){var i=!1,s=[];Object.keys(e).forEach((function(e){s.push(e)})),s.sort((function(e,t){return parseInt(e,10)-parseInt(t,10)}));for(var a=0;a<s.length;a+=1){var r=s[a];r<=t.innerWidth&&(i=r)}return i||"max"}}},checkOverflow:{checkOverflow:function(){var e=this.params,t=this.isLocked,i=this.slides.length>0&&e.slidesOffsetBefore+e.spaceBetween*(this.slides.length-1)+this.slides[0].offsetWidth*this.slides.length;e.slidesOffsetBefore&&e.slidesOffsetAfter&&i?this.isLocked=i<=this.size:this.isLocked=1===this.snapGrid.length,this.allowSlideNext=!this.isLocked,this.allowSlidePrev=!this.isLocked,t!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock"),t&&t!==this.isLocked&&(this.isEnd=!1,this.navigation.update())}},classes:{addClasses:function(){var e=this.classNames,t=this.params,i=this.rtl,s=this.$el,a=[];a.push("initialized"),a.push(t.direction),t.freeMode&&a.push("free-mode"),t.autoHeight&&a.push("autoheight"),i&&a.push("rtl"),t.slidesPerColumn>1&&(a.push("multirow"),"column"===t.slidesPerColumnFill&&a.push("multirow-column")),I.android&&a.push("android"),I.ios&&a.push("ios"),t.cssMode&&a.push("css-mode"),a.forEach((function(i){e.push(t.containerModifierClass+i)})),s.addClass(e.join(" "))},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" "))}},images:{loadImage:function(e,i,s,a,r,n){var o;function l(){n&&n()}e.complete&&r?l():i?((o=new t.Image).onload=l,o.onerror=l,a&&(o.sizes=a),s&&(o.srcset=s),i&&(o.src=i)):l()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var i=0;i<e.imagesToLoad.length;i+=1){var s=e.imagesToLoad[i];e.loadImage(s,s.currentSrc||s.getAttribute("src"),s.srcset||s.getAttribute("srcset"),s.sizes||s.getAttribute("sizes"),!0,t)}}}},F={},W=function(e){function t(){for(var i,a,r,l=[],d=arguments.length;d--;)l[d]=arguments[d];1===l.length&&l[0].constructor&&l[0].constructor===Object?r=l[0]:(a=(i=l)[0],r=i[1]),r||(r={}),r=n.extend({},r),a&&!r.el&&(r.el=a),e.call(this,r),Object.keys(Y).forEach((function(e){Object.keys(Y[e]).forEach((function(i){t.prototype[i]||(t.prototype[i]=Y[e][i])}))}));var h=this;void 0===h.modules&&(h.modules={}),Object.keys(h.modules).forEach((function(e){var t=h.modules[e];if(t.params){var i=Object.keys(t.params)[0],s=t.params[i];if("object"!=typeof s||null===s)return;if(!(i in r&&"enabled"in s))return;!0===r[i]&&(r[i]={enabled:!0}),"object"!=typeof r[i]||"enabled"in r[i]||(r[i].enabled=!0),r[i]||(r[i]={enabled:!1})}}));var p=n.extend({},V);h.useModulesParams(p),h.params=n.extend({},p,F,r),h.originalParams=n.extend({},h.params),h.passedParams=n.extend({},r),h.$=s;var c=s(h.params.el);if(a=c[0]){if(c.length>1){var u=[];return c.each((function(e,i){var s=n.extend({},r,{el:i});u.push(new t(s))})),u}var v,f,m;return a.swiper=h,c.data("swiper",h),a&&a.shadowRoot&&a.shadowRoot.querySelector?(v=s(a.shadowRoot.querySelector("."+h.params.wrapperClass))).children=function(e){return c.children(e)}:v=c.children("."+h.params.wrapperClass),n.extend(h,{$el:c,el:a,$wrapperEl:v,wrapperEl:v[0],classNames:[],slides:s(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===h.params.direction},isVertical:function(){return"vertical"===h.params.direction},rtl:"rtl"===a.dir.toLowerCase()||"rtl"===c.css("direction"),rtlTranslate:"horizontal"===h.params.direction&&("rtl"===a.dir.toLowerCase()||"rtl"===c.css("direction")),wrongRTL:"-webkit-box"===v.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:h.params.allowSlideNext,allowSlidePrev:h.params.allowSlidePrev,touchEvents:(f=["touchstart","touchmove","touchend","touchcancel"],m=["mousedown","mousemove","mouseup"],o.pointerEvents&&(m=["pointerdown","pointermove","pointerup"]),h.touchEventsTouch={start:f[0],move:f[1],end:f[2],cancel:f[3]},h.touchEventsDesktop={start:m[0],move:m[1],end:m[2]},o.touch||!h.params.simulateTouch?h.touchEventsTouch:h.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video",lastClickTime:n.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:h.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),h.useModules(),h.params.init&&h.init(),h}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return t.prototype.slidesPerViewDynamic=function(){var e=this.params,t=this.slides,i=this.slidesGrid,s=this.size,a=this.activeIndex,r=1;if(e.centeredSlides){for(var n,o=t[a].swiperSlideSize,l=a+1;l<t.length;l+=1)t[l]&&!n&&(r+=1,(o+=t[l].swiperSlideSize)>s&&(n=!0));for(var d=a-1;d>=0;d-=1)t[d]&&!n&&(r+=1,(o+=t[d].swiperSlideSize)>s&&(n=!0))}else for(var h=a+1;h<t.length;h+=1)i[h]-i[a]<s&&(r+=1);return r},t.prototype.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,i=e.params;i.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(s(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||s(),i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function s(){var t=e.rtlTranslate?-1*e.translate:e.translate,i=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(i),e.updateActiveIndex(),e.updateSlidesClasses()}},t.prototype.changeDirection=function(e,t){void 0===t&&(t=!0);var i=this.params.direction;return e||(e="horizontal"===i?"vertical":"horizontal"),e===i||"horizontal"!==e&&"vertical"!==e?this:(this.$el.removeClass(""+this.params.containerModifierClass+i).addClass(""+this.params.containerModifierClass+e),this.params.direction=e,this.slides.each((function(t,i){"vertical"===e?i.style.width="":i.style.height=""})),this.emit("changeDirection"),t&&this.update(),this)},t.prototype.init=function(){this.initialized||(this.emit("beforeInit"),this.params.breakpoints&&this.setBreakpoint(),this.addClasses(),this.params.loop&&this.loopCreate(),this.updateSize(),this.updateSlides(),this.params.watchOverflow&&this.checkOverflow(),this.params.grabCursor&&this.setGrabCursor(),this.params.preloadImages&&this.preloadImages(),this.params.loop?this.slideTo(this.params.initialSlide+this.loopedSlides,0,this.params.runCallbacksOnInit):this.slideTo(this.params.initialSlide,0,this.params.runCallbacksOnInit),this.attachEvents(),this.initialized=!0,this.emit("init"))},t.prototype.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var i=this,s=i.params,a=i.$el,r=i.$wrapperEl,o=i.slides;return void 0===i.params||i.destroyed?null:(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),t&&(i.removeClasses(),a.removeAttr("style"),r.removeAttr("style"),o&&o.length&&o.removeClass([s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach((function(e){i.off(e)})),!1!==e&&(i.$el[0].swiper=null,i.$el.data("swiper",null),n.deleteProps(i)),i.destroyed=!0,null)},t.extendDefaults=function(e){n.extend(F,e)},i.extendedDefaults.get=function(){return F},i.defaults.get=function(){return V},i.Class.get=function(){return e},i.$.get=function(){return s},Object.defineProperties(t,i),t}(l),R={name:"device",proto:{device:I},static:{device:I}},q={name:"support",proto:{support:o},static:{support:o}},j={isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:function(){var e=t.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)},K={name:"browser",proto:{browser:j},static:{browser:j}},U={name:"resize",create:function(){var e=this;n.extend(e,{resize:{resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(){t.addEventListener("resize",this.resize.resizeHandler),t.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){t.removeEventListener("resize",this.resize.resizeHandler),t.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},_={func:t.MutationObserver||t.WebkitMutationObserver,attach:function(e,i){void 0===i&&(i={});var s=this,a=new(0,_.func)((function(e){if(1!==e.length){var i=function(){s.emit("observerUpdate",e[0])};t.requestAnimationFrame?t.requestAnimationFrame(i):t.setTimeout(i,0)}else s.emit("observerUpdate",e[0])}));a.observe(e,{attributes:void 0===i.attributes||i.attributes,childList:void 0===i.childList||i.childList,characterData:void 0===i.characterData||i.characterData}),s.observer.observers.push(a)},init:function(){if(o.observer&&this.params.observer){if(this.params.observeParents)for(var e=this.$el.parents(),t=0;t<e.length;t+=1)this.observer.attach(e[t]);this.observer.attach(this.$el[0],{childList:this.params.observeSlideChildren}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(e){e.disconnect()})),this.observer.observers=[]}},Z={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){n.extend(this,{observer:{init:_.init.bind(this),attach:_.attach.bind(this),destroy:_.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},Q={update:function(e){var t=this,i=t.params,s=i.slidesPerView,a=i.slidesPerGroup,r=i.centeredSlides,o=t.params.virtual,l=o.addSlidesBefore,d=o.addSlidesAfter,h=t.virtual,p=h.from,c=h.to,u=h.slides,v=h.slidesGrid,f=h.renderSlide,m=h.offset;t.updateActiveIndex();var g,b,w,y=t.activeIndex||0;g=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",r?(b=Math.floor(s/2)+a+l,w=Math.floor(s/2)+a+d):(b=s+(a-1)+l,w=a+d);var x=Math.max((y||0)-w,0),T=Math.min((y||0)+b,u.length-1),E=(t.slidesGrid[x]||0)-(t.slidesGrid[0]||0);function C(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(n.extend(t.virtual,{from:x,to:T,offset:E,slidesGrid:t.slidesGrid}),p===x&&c===T&&!e)return t.slidesGrid!==v&&E!==m&&t.slides.css(g,E+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:E,from:x,to:T,slides:function(){for(var e=[],t=x;t<=T;t+=1)e.push(u[t]);return e}()}),void C();var S=[],M=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var P=p;P<=c;P+=1)(P<x||P>T)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+P+'"]').remove();for(var z=0;z<u.length;z+=1)z>=x&&z<=T&&(void 0===c||e?M.push(z):(z>c&&M.push(z),z<p&&S.push(z)));M.forEach((function(e){t.$wrapperEl.append(f(u[e],e))})),S.sort((function(e,t){return t-e})).forEach((function(e){t.$wrapperEl.prepend(f(u[e],e))})),t.$wrapperEl.children(".swiper-slide").css(g,E+"px"),C()},renderSlide:function(e,t){var i=this.params.virtual;if(i.cache&&this.virtual.cache[t])return this.virtual.cache[t];var a=i.renderSlide?s(i.renderSlide.call(this,e,t)):s('<div class="'+this.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return a.attr("data-swiper-slide-index")||a.attr("data-swiper-slide-index",t),i.cache&&(this.virtual.cache[t]=a),a},appendSlide:function(e){if("object"==typeof e&&"length"in e)for(var t=0;t<e.length;t+=1)e[t]&&this.virtual.slides.push(e[t]);else this.virtual.slides.push(e);this.virtual.update(!0)},prependSlide:function(e){var t=this.activeIndex,i=t+1,s=1;if(Array.isArray(e)){for(var a=0;a<e.length;a+=1)e[a]&&this.virtual.slides.unshift(e[a]);i=t+e.length,s=e.length}else this.virtual.slides.unshift(e);if(this.params.virtual.cache){var r=this.virtual.cache,n={};Object.keys(r).forEach((function(e){var t=r[e],i=t.attr("data-swiper-slide-index");i&&t.attr("data-swiper-slide-index",parseInt(i,10)+1),n[parseInt(e,10)+s]=t})),this.virtual.cache=n}this.virtual.update(!0),this.slideTo(i,0)},removeSlide:function(e){if(null!=e){var t=this.activeIndex;if(Array.isArray(e))for(var i=e.length-1;i>=0;i-=1)this.virtual.slides.splice(e[i],1),this.params.virtual.cache&&delete this.virtual.cache[e[i]],e[i]<t&&(t-=1),t=Math.max(t,0);else this.virtual.slides.splice(e,1),this.params.virtual.cache&&delete this.virtual.cache[e],e<t&&(t-=1),t=Math.max(t,0);this.virtual.update(!0),this.slideTo(t,0)}},removeAllSlides:function(){this.virtual.slides=[],this.params.virtual.cache&&(this.virtual.cache={}),this.virtual.update(!0),this.slideTo(0,0)}},J={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){n.extend(this,{virtual:{update:Q.update.bind(this),appendSlide:Q.appendSlide.bind(this),prependSlide:Q.prependSlide.bind(this),removeSlide:Q.removeSlide.bind(this),removeAllSlides:Q.removeAllSlides.bind(this),renderSlide:Q.renderSlide.bind(this),slides:this.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){if(this.params.virtual.enabled){this.classNames.push(this.params.containerModifierClass+"virtual");var e={watchSlidesProgress:!0};n.extend(this.params,e),n.extend(this.originalParams,e),this.params.initialSlide||this.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},ee={handle:function(i){var s=this.rtlTranslate,a=i;a.originalEvent&&(a=a.originalEvent);var r=a.keyCode||a.charCode;if(!this.allowSlideNext&&(this.isHorizontal()&&39===r||this.isVertical()&&40===r||34===r))return!1;if(!this.allowSlidePrev&&(this.isHorizontal()&&37===r||this.isVertical()&&38===r||33===r))return!1;if(!(a.shiftKey||a.altKey||a.ctrlKey||a.metaKey||e.activeElement&&e.activeElement.nodeName&&("input"===e.activeElement.nodeName.toLowerCase()||"textarea"===e.activeElement.nodeName.toLowerCase()))){if(this.params.keyboard.onlyInViewport&&(33===r||34===r||37===r||39===r||38===r||40===r)){var n=!1;if(this.$el.parents("."+this.params.slideClass).length>0&&0===this.$el.parents("."+this.params.slideActiveClass).length)return;var o=t.innerWidth,l=t.innerHeight,d=this.$el.offset();s&&(d.left-=this.$el[0].scrollLeft);for(var h=[[d.left,d.top],[d.left+this.width,d.top],[d.left,d.top+this.height],[d.left+this.width,d.top+this.height]],p=0;p<h.length;p+=1){var c=h[p];c[0]>=0&&c[0]<=o&&c[1]>=0&&c[1]<=l&&(n=!0)}if(!n)return}this.isHorizontal()?(33!==r&&34!==r&&37!==r&&39!==r||(a.preventDefault?a.preventDefault():a.returnValue=!1),(34!==r&&39!==r||s)&&(33!==r&&37!==r||!s)||this.slideNext(),(33!==r&&37!==r||s)&&(34!==r&&39!==r||!s)||this.slidePrev()):(33!==r&&34!==r&&38!==r&&40!==r||(a.preventDefault?a.preventDefault():a.returnValue=!1),34!==r&&40!==r||this.slideNext(),33!==r&&38!==r||this.slidePrev()),this.emit("keyPress",r)}},enable:function(){this.keyboard.enabled||(s(e).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(s(e).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},te={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){n.extend(this,{keyboard:{enabled:!1,enable:ee.enable.bind(this),disable:ee.disable.bind(this),handle:ee.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}};var ie={lastScrollTime:n.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return t.navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var t="onwheel"in e;if(!t){var i=e.createElement("div");i.setAttribute("onwheel","return;"),t="function"==typeof i.onwheel}return!t&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(t=e.implementation.hasFeature("Events.wheel","3.0")),t}()?"wheel":"mousewheel"},normalize:function(e){var t=0,i=0,s=0,a=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),s=10*t,a=10*i,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(s=e.deltaX),e.shiftKey&&!s&&(s=a,a=0),(s||a)&&e.deltaMode&&(1===e.deltaMode?(s*=40,a*=40):(s*=800,a*=800)),s&&!t&&(t=s<1?-1:1),a&&!i&&(i=a<1?-1:1),{spinX:t,spinY:i,pixelX:s,pixelY:a}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var i=e,s=this,a=s.params.mousewheel;if(s.params.cssMode&&i.preventDefault(),!s.mouseEntered&&!a.releaseOnEdges)return!0;i.originalEvent&&(i=i.originalEvent);var r=0,o=s.rtlTranslate?-1:1,l=ie.normalize(i);if(a.forceToAxis)if(s.isHorizontal()){if(!(Math.abs(l.pixelX)>Math.abs(l.pixelY)))return!0;r=l.pixelX*o}else{if(!(Math.abs(l.pixelY)>Math.abs(l.pixelX)))return!0;r=l.pixelY}else r=Math.abs(l.pixelX)>Math.abs(l.pixelY)?-l.pixelX*o:-l.pixelY;if(0===r)return!0;if(a.invert&&(r=-r),s.params.freeMode){var d={time:n.now(),delta:Math.abs(r),direction:Math.sign(r)},h=s.mousewheel.lastEventBeforeSnap,p=h&&d.time<h.time+500&&d.delta<=h.delta&&d.direction===h.direction;if(!p){s.mousewheel.lastEventBeforeSnap=void 0,s.params.loop&&s.loopFix();var c=s.getTranslate()+r*a.sensitivity,u=s.isBeginning,v=s.isEnd;if(c>=s.minTranslate()&&(c=s.minTranslate()),c<=s.maxTranslate()&&(c=s.maxTranslate()),s.setTransition(0),s.setTranslate(c),s.updateProgress(),s.updateActiveIndex(),s.updateSlidesClasses(),(!u&&s.isBeginning||!v&&s.isEnd)&&s.updateSlidesClasses(),s.params.freeModeSticky){clearTimeout(s.mousewheel.timeout),s.mousewheel.timeout=void 0;var f=s.mousewheel.recentWheelEvents;f.length>=15&&f.shift();var m=f.length?f[f.length-1]:void 0,g=f[0];if(f.push(d),m&&(d.delta>m.delta||d.direction!==m.direction))f.splice(0);else if(f.length>=15&&d.time-g.time<500&&g.delta-d.delta>=1&&d.delta<=6){var b=r>0?.8:.2;s.mousewheel.lastEventBeforeSnap=d,f.splice(0),s.mousewheel.timeout=n.nextTick((function(){s.slideToClosest(s.params.speed,!0,void 0,b)}),0)}s.mousewheel.timeout||(s.mousewheel.timeout=n.nextTick((function(){s.mousewheel.lastEventBeforeSnap=d,f.splice(0),s.slideToClosest(s.params.speed,!0,void 0,.5)}),500))}if(p||s.emit("scroll",i),s.params.autoplay&&s.params.autoplayDisableOnInteraction&&s.autoplay.stop(),c===s.minTranslate()||c===s.maxTranslate())return!0}}else{if(n.now()-s.mousewheel.lastScrollTime>60)if(r<0)if(s.isEnd&&!s.params.loop||s.animating){if(a.releaseOnEdges)return!0}else s.slideNext(),s.emit("scroll",i);else if(s.isBeginning&&!s.params.loop||s.animating){if(a.releaseOnEdges)return!0}else s.slidePrev(),s.emit("scroll",i);s.mousewheel.lastScrollTime=(new t.Date).getTime()}return i.preventDefault?i.preventDefault():i.returnValue=!1,!1},enable:function(){var e=ie.event();if(this.params.cssMode)return this.wrapperEl.removeEventListener(e,this.mousewheel.handle),!0;if(!e)return!1;if(this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(t=s(this.params.mousewheel.eventsTarged)),t.on("mouseenter",this.mousewheel.handleMouseEnter),t.on("mouseleave",this.mousewheel.handleMouseLeave),t.on(e,this.mousewheel.handle),this.mousewheel.enabled=!0,!0},disable:function(){var e=ie.event();if(this.params.cssMode)return this.wrapperEl.addEventListener(e,this.mousewheel.handle),!0;if(!e)return!1;if(!this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(t=s(this.params.mousewheel.eventsTarged)),t.off(e,this.mousewheel.handle),this.mousewheel.enabled=!1,!0}},se={update:function(){var e=this.params.navigation;if(!this.params.loop){var t=this.navigation,i=t.$nextEl,s=t.$prevEl;s&&s.length>0&&(this.isBeginning?s.addClass(e.disabledClass):s.removeClass(e.disabledClass),s[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass)),i&&i.length>0&&(this.isEnd?i.addClass(e.disabledClass):i.removeClass(e.disabledClass),i[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass))}},onPrevClick:function(e){e.preventDefault(),this.isBeginning&&!this.params.loop||this.slidePrev()},onNextClick:function(e){e.preventDefault(),this.isEnd&&!this.params.loop||this.slideNext()},init:function(){var e,t,i=this.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(e=s(i.nextEl),this.params.uniqueNavElements&&"string"==typeof i.nextEl&&e.length>1&&1===this.$el.find(i.nextEl).length&&(e=this.$el.find(i.nextEl))),i.prevEl&&(t=s(i.prevEl),this.params.uniqueNavElements&&"string"==typeof i.prevEl&&t.length>1&&1===this.$el.find(i.prevEl).length&&(t=this.$el.find(i.prevEl))),e&&e.length>0&&e.on("click",this.navigation.onNextClick),t&&t.length>0&&t.on("click",this.navigation.onPrevClick),n.extend(this.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;t&&t.length&&(t.off("click",this.navigation.onNextClick),t.removeClass(this.params.navigation.disabledClass)),i&&i.length&&(i.off("click",this.navigation.onPrevClick),i.removeClass(this.params.navigation.disabledClass))}},ae={update:function(){var e=this.rtl,t=this.params.pagination;if(t.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var i,a=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,r=this.pagination.$el,n=this.params.loop?Math.ceil((a-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;if(this.params.loop?((i=Math.ceil((this.activeIndex-this.loopedSlides)/this.params.slidesPerGroup))>a-1-2*this.loopedSlides&&(i-=a-2*this.loopedSlides),i>n-1&&(i-=n),i<0&&"bullets"!==this.params.paginationType&&(i=n+i)):i=void 0!==this.snapIndex?this.snapIndex:this.activeIndex||0,"bullets"===t.type&&this.pagination.bullets&&this.pagination.bullets.length>0){var o,l,d,h=this.pagination.bullets;if(t.dynamicBullets&&(this.pagination.bulletSize=h.eq(0)[this.isHorizontal()?"outerWidth":"outerHeight"](!0),r.css(this.isHorizontal()?"width":"height",this.pagination.bulletSize*(t.dynamicMainBullets+4)+"px"),t.dynamicMainBullets>1&&void 0!==this.previousIndex&&(this.pagination.dynamicBulletIndex+=i-this.previousIndex,this.pagination.dynamicBulletIndex>t.dynamicMainBullets-1?this.pagination.dynamicBulletIndex=t.dynamicMainBullets-1:this.pagination.dynamicBulletIndex<0&&(this.pagination.dynamicBulletIndex=0)),o=i-this.pagination.dynamicBulletIndex,d=((l=o+(Math.min(h.length,t.dynamicMainBullets)-1))+o)/2),h.removeClass(t.bulletActiveClass+" "+t.bulletActiveClass+"-next "+t.bulletActiveClass+"-next-next "+t.bulletActiveClass+"-prev "+t.bulletActiveClass+"-prev-prev "+t.bulletActiveClass+"-main"),r.length>1)h.each((function(e,a){var r=s(a),n=r.index();n===i&&r.addClass(t.bulletActiveClass),t.dynamicBullets&&(n>=o&&n<=l&&r.addClass(t.bulletActiveClass+"-main"),n===o&&r.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),n===l&&r.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next"))}));else{var p=h.eq(i),c=p.index();if(p.addClass(t.bulletActiveClass),t.dynamicBullets){for(var u=h.eq(o),v=h.eq(l),f=o;f<=l;f+=1)h.eq(f).addClass(t.bulletActiveClass+"-main");if(this.params.loop)if(c>=h.length-t.dynamicMainBullets){for(var m=t.dynamicMainBullets;m>=0;m-=1)h.eq(h.length-m).addClass(t.bulletActiveClass+"-main");h.eq(h.length-t.dynamicMainBullets-1).addClass(t.bulletActiveClass+"-prev")}else u.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),v.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next");else u.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),v.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next")}}if(t.dynamicBullets){var g=Math.min(h.length,t.dynamicMainBullets+4),b=(this.pagination.bulletSize*g-this.pagination.bulletSize)/2-d*this.pagination.bulletSize,w=e?"right":"left";h.css(this.isHorizontal()?w:"top",b+"px")}}if("fraction"===t.type&&(r.find("."+t.currentClass).text(t.formatFractionCurrent(i+1)),r.find("."+t.totalClass).text(t.formatFractionTotal(n))),"progressbar"===t.type){var y;y=t.progressbarOpposite?this.isHorizontal()?"vertical":"horizontal":this.isHorizontal()?"horizontal":"vertical";var x=(i+1)/n,T=1,E=1;"horizontal"===y?T=x:E=x,r.find("."+t.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+T+") scaleY("+E+")").transition(this.params.speed)}"custom"===t.type&&t.renderCustom?(r.html(t.renderCustom(this,i+1,n)),this.emit("paginationRender",this,r[0])):this.emit("paginationUpdate",this,r[0]),r[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](t.lockClass)}},render:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,i=this.pagination.$el,s="";if("bullets"===e.type){for(var a=this.params.loop?Math.ceil((t-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length,r=0;r<a;r+=1)e.renderBullet?s+=e.renderBullet.call(this,r,e.bulletClass):s+="<"+e.bulletElement+' class="'+e.bulletClass+'"></'+e.bulletElement+">";i.html(s),this.pagination.bullets=i.find("."+e.bulletClass)}"fraction"===e.type&&(s=e.renderFraction?e.renderFraction.call(this,e.currentClass,e.totalClass):'<span class="'+e.currentClass+'"></span> / <span class="'+e.totalClass+'"></span>',i.html(s)),"progressbar"===e.type&&(s=e.renderProgressbar?e.renderProgressbar.call(this,e.progressbarFillClass):'<span class="'+e.progressbarFillClass+'"></span>',i.html(s)),"custom"!==e.type&&this.emit("paginationRender",this.pagination.$el[0])}},init:function(){var e=this,t=e.params.pagination;if(t.el){var i=s(t.el);0!==i.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&i.length>1&&1===e.$el.find(t.el).length&&(i=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&i.addClass(t.clickableClass),i.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(i.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&i.addClass(t.progressbarOppositeClass),t.clickable&&i.on("click","."+t.bulletClass,(function(t){t.preventDefault();var i=s(this).index()*e.params.slidesPerGroup;e.params.loop&&(i+=e.loopedSlides),e.slideTo(i)})),n.extend(e.pagination,{$el:i,el:i[0]}))}},destroy:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),this.pagination.bullets&&this.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click","."+e.bulletClass)}}},re={setTranslate:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=this.rtlTranslate,i=this.progress,s=e.dragSize,a=e.trackSize,r=e.$dragEl,n=e.$el,o=this.params.scrollbar,l=s,d=(a-s)*i;t?(d=-d)>0?(l=s-d,d=0):-d+s>a&&(l=a+d):d<0?(l=s+d,d=0):d+s>a&&(l=a-d),this.isHorizontal()?(r.transform("translate3d("+d+"px, 0, 0)"),r[0].style.width=l+"px"):(r.transform("translate3d(0px, "+d+"px, 0)"),r[0].style.height=l+"px"),o.hide&&(clearTimeout(this.scrollbar.timeout),n[0].style.opacity=1,this.scrollbar.timeout=setTimeout((function(){n[0].style.opacity=0,n.transition(400)}),1e3))}},setTransition:function(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=e.$dragEl,i=e.$el;t[0].style.width="",t[0].style.height="";var s,a=this.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,r=this.size/this.virtualSize,o=r*(a/this.size);s="auto"===this.params.scrollbar.dragSize?a*r:parseInt(this.params.scrollbar.dragSize,10),this.isHorizontal()?t[0].style.width=s+"px":t[0].style.height=s+"px",i[0].style.display=r>=1?"none":"",this.params.scrollbar.hide&&(i[0].style.opacity=0),n.extend(e,{trackSize:a,divider:r,moveDivider:o,dragSize:s}),e.$el[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](this.params.scrollbar.lockClass)}},getPointerPosition:function(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY},setDragPosition:function(e){var t,i=this.scrollbar,s=this.rtlTranslate,a=i.$el,r=i.dragSize,n=i.trackSize,o=i.dragStartPos;t=(i.getPointerPosition(e)-a.offset()[this.isHorizontal()?"left":"top"]-(null!==o?o:r/2))/(n-r),t=Math.max(Math.min(t,1),0),s&&(t=1-t);var l=this.minTranslate()+(this.maxTranslate()-this.minTranslate())*t;this.updateProgress(l),this.setTranslate(l),this.updateActiveIndex(),this.updateSlidesClasses()},onDragStart:function(e){var t=this.params.scrollbar,i=this.scrollbar,s=this.$wrapperEl,a=i.$el,r=i.$dragEl;this.scrollbar.isTouched=!0,this.scrollbar.dragStartPos=e.target===r[0]||e.target===r?i.getPointerPosition(e)-e.target.getBoundingClientRect()[this.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),s.transition(100),r.transition(100),i.setDragPosition(e),clearTimeout(this.scrollbar.dragTimeout),a.transition(0),t.hide&&a.css("opacity",1),this.params.cssMode&&this.$wrapperEl.css("scroll-snap-type","none"),this.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this.scrollbar,i=this.$wrapperEl,s=t.$el,a=t.$dragEl;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),i.transition(0),s.transition(0),a.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this.params.scrollbar,i=this.scrollbar,s=this.$wrapperEl,a=i.$el;this.scrollbar.isTouched&&(this.scrollbar.isTouched=!1,this.params.cssMode&&(this.$wrapperEl.css("scroll-snap-type",""),s.transition("")),t.hide&&(clearTimeout(this.scrollbar.dragTimeout),this.scrollbar.dragTimeout=n.nextTick((function(){a.css("opacity",0),a.transition(400)}),1e3)),this.emit("scrollbarDragEnd",e),t.snapOnRelease&&this.slideToClosest())},enableDraggable:function(){if(this.params.scrollbar.el){var t=this.scrollbar,i=this.touchEventsTouch,s=this.touchEventsDesktop,a=this.params,r=t.$el[0],n=!(!o.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},l=!(!o.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};o.touch?(r.addEventListener(i.start,this.scrollbar.onDragStart,n),r.addEventListener(i.move,this.scrollbar.onDragMove,n),r.addEventListener(i.end,this.scrollbar.onDragEnd,l)):(r.addEventListener(s.start,this.scrollbar.onDragStart,n),e.addEventListener(s.move,this.scrollbar.onDragMove,n),e.addEventListener(s.end,this.scrollbar.onDragEnd,l))}},disableDraggable:function(){if(this.params.scrollbar.el){var t=this.scrollbar,i=this.touchEventsTouch,s=this.touchEventsDesktop,a=this.params,r=t.$el[0],n=!(!o.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},l=!(!o.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};o.touch?(r.removeEventListener(i.start,this.scrollbar.onDragStart,n),r.removeEventListener(i.move,this.scrollbar.onDragMove,n),r.removeEventListener(i.end,this.scrollbar.onDragEnd,l)):(r.removeEventListener(s.start,this.scrollbar.onDragStart,n),e.removeEventListener(s.move,this.scrollbar.onDragMove,n),e.removeEventListener(s.end,this.scrollbar.onDragEnd,l))}},init:function(){if(this.params.scrollbar.el){var e=this.scrollbar,t=this.$el,i=this.params.scrollbar,a=s(i.el);this.params.uniqueNavElements&&"string"==typeof i.el&&a.length>1&&1===t.find(i.el).length&&(a=t.find(i.el));var r=a.find("."+this.params.scrollbar.dragClass);0===r.length&&(r=s('<div class="'+this.params.scrollbar.dragClass+'"></div>'),a.append(r)),n.extend(e,{$el:a,el:a[0],$dragEl:r,dragEl:r[0]}),i.draggable&&e.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},ne={setTransform:function(e,t){var i=this.rtl,a=s(e),r=i?-1:1,n=a.attr("data-swiper-parallax")||"0",o=a.attr("data-swiper-parallax-x"),l=a.attr("data-swiper-parallax-y"),d=a.attr("data-swiper-parallax-scale"),h=a.attr("data-swiper-parallax-opacity");if(o||l?(o=o||"0",l=l||"0"):this.isHorizontal()?(o=n,l="0"):(l=n,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*t*r+"%":o*t*r+"px",l=l.indexOf("%")>=0?parseInt(l,10)*t+"%":l*t+"px",null!=h){var p=h-(h-1)*(1-Math.abs(t));a[0].style.opacity=p}if(null==d)a.transform("translate3d("+o+", "+l+", 0px)");else{var c=d-(d-1)*(1-Math.abs(t));a.transform("translate3d("+o+", "+l+", 0px) scale("+c+")")}},setTranslate:function(){var e=this,t=e.$el,i=e.slides,a=e.progress,r=e.snapGrid;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t,i){e.parallax.setTransform(i,a)})),i.each((function(t,i){var n=i.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(n+=Math.ceil(t/2)-a*(r.length-1)),n=Math.min(Math.max(n,-1),1),s(i).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t,i){e.parallax.setTransform(i,n)}))}))},setTransition:function(e){void 0===e&&(e=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t,i){var a=s(i),r=parseInt(a.attr("data-swiper-parallax-duration"),10)||e;0===e&&(r=0),a.transition(r)}))}},oe={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,s=e.targetTouches[1].pageX,a=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(s-t,2)+Math.pow(a-i,2))},onGestureStart:function(e){var t=this.params.zoom,i=this.zoom,a=i.gesture;if(i.fakeGestureTouched=!1,i.fakeGestureMoved=!1,!o.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.fakeGestureTouched=!0,a.scaleStart=oe.getDistanceBetweenTouches(e)}a.$slideEl&&a.$slideEl.length||(a.$slideEl=s(e.target).closest(".swiper-slide"),0===a.$slideEl.length&&(a.$slideEl=this.slides.eq(this.activeIndex)),a.$imageEl=a.$slideEl.find("img, svg, canvas"),a.$imageWrapEl=a.$imageEl.parent("."+t.containerClass),a.maxRatio=a.$imageWrapEl.attr("data-swiper-zoom")||t.maxRatio,0!==a.$imageWrapEl.length)?(a.$imageEl.transition(0),this.zoom.isScaling=!0):a.$imageEl=void 0},onGestureChange:function(e){var t=this.params.zoom,i=this.zoom,s=i.gesture;if(!o.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;i.fakeGestureMoved=!0,s.scaleMove=oe.getDistanceBetweenTouches(e)}s.$imageEl&&0!==s.$imageEl.length&&(o.gestures?i.scale=e.scale*i.currentScale:i.scale=s.scaleMove/s.scaleStart*i.currentScale,i.scale>s.maxRatio&&(i.scale=s.maxRatio-1+Math.pow(i.scale-s.maxRatio+1,.5)),i.scale<t.minRatio&&(i.scale=t.minRatio+1-Math.pow(t.minRatio-i.scale+1,.5)),s.$imageEl.transform("translate3d(0,0,0) scale("+i.scale+")"))},onGestureEnd:function(e){var t=this.params.zoom,i=this.zoom,s=i.gesture;if(!o.gestures){if(!i.fakeGestureTouched||!i.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!I.android)return;i.fakeGestureTouched=!1,i.fakeGestureMoved=!1}s.$imageEl&&0!==s.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,s.maxRatio),t.minRatio),s.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+i.scale+")"),i.currentScale=i.scale,i.isScaling=!1,1===i.scale&&(s.$slideEl=void 0))},onTouchStart:function(e){var t=this.zoom,i=t.gesture,s=t.image;i.$imageEl&&0!==i.$imageEl.length&&(s.isTouched||(I.android&&e.preventDefault(),s.isTouched=!0,s.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,s.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this.zoom,i=t.gesture,s=t.image,a=t.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(this.allowClick=!1,s.isTouched&&i.$slideEl)){s.isMoved||(s.width=i.$imageEl[0].offsetWidth,s.height=i.$imageEl[0].offsetHeight,s.startX=n.getTranslate(i.$imageWrapEl[0],"x")||0,s.startY=n.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),this.rtl&&(s.startX=-s.startX,s.startY=-s.startY));var r=s.width*t.scale,o=s.height*t.scale;if(!(r<i.slideWidth&&o<i.slideHeight)){if(s.minX=Math.min(i.slideWidth/2-r/2,0),s.maxX=-s.minX,s.minY=Math.min(i.slideHeight/2-o/2,0),s.maxY=-s.minY,s.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!s.isMoved&&!t.isScaling){if(this.isHorizontal()&&(Math.floor(s.minX)===Math.floor(s.startX)&&s.touchesCurrent.x<s.touchesStart.x||Math.floor(s.maxX)===Math.floor(s.startX)&&s.touchesCurrent.x>s.touchesStart.x))return void(s.isTouched=!1);if(!this.isHorizontal()&&(Math.floor(s.minY)===Math.floor(s.startY)&&s.touchesCurrent.y<s.touchesStart.y||Math.floor(s.maxY)===Math.floor(s.startY)&&s.touchesCurrent.y>s.touchesStart.y))return void(s.isTouched=!1)}e.preventDefault(),e.stopPropagation(),s.isMoved=!0,s.currentX=s.touchesCurrent.x-s.touchesStart.x+s.startX,s.currentY=s.touchesCurrent.y-s.touchesStart.y+s.startY,s.currentX<s.minX&&(s.currentX=s.minX+1-Math.pow(s.minX-s.currentX+1,.8)),s.currentX>s.maxX&&(s.currentX=s.maxX-1+Math.pow(s.currentX-s.maxX+1,.8)),s.currentY<s.minY&&(s.currentY=s.minY+1-Math.pow(s.minY-s.currentY+1,.8)),s.currentY>s.maxY&&(s.currentY=s.maxY-1+Math.pow(s.currentY-s.maxY+1,.8)),a.prevPositionX||(a.prevPositionX=s.touchesCurrent.x),a.prevPositionY||(a.prevPositionY=s.touchesCurrent.y),a.prevTime||(a.prevTime=Date.now()),a.x=(s.touchesCurrent.x-a.prevPositionX)/(Date.now()-a.prevTime)/2,a.y=(s.touchesCurrent.y-a.prevPositionY)/(Date.now()-a.prevTime)/2,Math.abs(s.touchesCurrent.x-a.prevPositionX)<2&&(a.x=0),Math.abs(s.touchesCurrent.y-a.prevPositionY)<2&&(a.y=0),a.prevPositionX=s.touchesCurrent.x,a.prevPositionY=s.touchesCurrent.y,a.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+s.currentX+"px, "+s.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,i=e.image,s=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;var a=300,r=300,n=s.x*a,o=i.currentX+n,l=s.y*r,d=i.currentY+l;0!==s.x&&(a=Math.abs((o-i.currentX)/s.x)),0!==s.y&&(r=Math.abs((d-i.currentY)/s.y));var h=Math.max(a,r);i.currentX=o,i.currentY=d;var p=i.width*e.scale,c=i.height*e.scale;i.minX=Math.min(t.slideWidth/2-p/2,0),i.maxX=-i.minX,i.minY=Math.min(t.slideHeight/2-c/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),t.$imageWrapEl.transition(h).transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}},onTransitionEnd:function(){var e=this.zoom,t=e.gesture;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,i,a,r,n,o,l,d,h,p,c,u,v,f,m,g,b=this.zoom,w=this.params.zoom,y=b.gesture,x=b.image;(y.$slideEl||(y.$slideEl=this.clickedSlide?s(this.clickedSlide):this.slides.eq(this.activeIndex),y.$imageEl=y.$slideEl.find("img, svg, canvas"),y.$imageWrapEl=y.$imageEl.parent("."+w.containerClass)),y.$imageEl&&0!==y.$imageEl.length)&&(y.$slideEl.addClass(""+w.zoomedSlideClass),void 0===x.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,i="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=x.touchesStart.x,i=x.touchesStart.y),b.scale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,b.currentScale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,e?(m=y.$slideEl[0].offsetWidth,g=y.$slideEl[0].offsetHeight,a=y.$slideEl.offset().left+m/2-t,r=y.$slideEl.offset().top+g/2-i,l=y.$imageEl[0].offsetWidth,d=y.$imageEl[0].offsetHeight,h=l*b.scale,p=d*b.scale,v=-(c=Math.min(m/2-h/2,0)),f=-(u=Math.min(g/2-p/2,0)),(n=a*b.scale)<c&&(n=c),n>v&&(n=v),(o=r*b.scale)<u&&(o=u),o>f&&(o=f)):(n=0,o=0),y.$imageWrapEl.transition(300).transform("translate3d("+n+"px, "+o+"px,0)"),y.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+b.scale+")"))},out:function(){var e=this.zoom,t=this.params.zoom,i=e.gesture;i.$slideEl||(i.$slideEl=this.clickedSlide?s(this.clickedSlide):this.slides.eq(this.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas"),i.$imageWrapEl=i.$imageEl.parent("."+t.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(e.scale=1,e.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+t.zoomedSlideClass),i.$slideEl=void 0)},enable:function(){var e=this.zoom;if(!e.enabled){e.enabled=!0;var t=!("touchstart"!==this.touchEvents.start||!o.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},i=!o.passiveListener||{passive:!1,capture:!0};o.gestures?(this.$wrapperEl.on("gesturestart",".swiper-slide",e.onGestureStart,t),this.$wrapperEl.on("gesturechange",".swiper-slide",e.onGestureChange,t),this.$wrapperEl.on("gestureend",".swiper-slide",e.onGestureEnd,t)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.on(this.touchEvents.start,".swiper-slide",e.onGestureStart,t),this.$wrapperEl.on(this.touchEvents.move,".swiper-slide",e.onGestureChange,i),this.$wrapperEl.on(this.touchEvents.end,".swiper-slide",e.onGestureEnd,t),this.touchEvents.cancel&&this.$wrapperEl.on(this.touchEvents.cancel,".swiper-slide",e.onGestureEnd,t)),this.$wrapperEl.on(this.touchEvents.move,"."+this.params.zoom.containerClass,e.onTouchMove,i)}},disable:function(){var e=this.zoom;if(e.enabled){this.zoom.enabled=!1;var t=!("touchstart"!==this.touchEvents.start||!o.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},i=!o.passiveListener||{passive:!1,capture:!0};o.gestures?(this.$wrapperEl.off("gesturestart",".swiper-slide",e.onGestureStart,t),this.$wrapperEl.off("gesturechange",".swiper-slide",e.onGestureChange,t),this.$wrapperEl.off("gestureend",".swiper-slide",e.onGestureEnd,t)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.off(this.touchEvents.start,".swiper-slide",e.onGestureStart,t),this.$wrapperEl.off(this.touchEvents.move,".swiper-slide",e.onGestureChange,i),this.$wrapperEl.off(this.touchEvents.end,".swiper-slide",e.onGestureEnd,t),this.touchEvents.cancel&&this.$wrapperEl.off(this.touchEvents.cancel,".swiper-slide",e.onGestureEnd,t)),this.$wrapperEl.off(this.touchEvents.move,"."+this.params.zoom.containerClass,e.onTouchMove,i)}}},le={loadInSlide:function(e,t){void 0===t&&(t=!0);var i=this,a=i.params.lazy;if(void 0!==e&&0!==i.slides.length){var r=i.virtual&&i.params.virtual.enabled?i.$wrapperEl.children("."+i.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):i.slides.eq(e),n=r.find("."+a.elementClass+":not(."+a.loadedClass+"):not(."+a.loadingClass+")");!r.hasClass(a.elementClass)||r.hasClass(a.loadedClass)||r.hasClass(a.loadingClass)||(n=n.add(r[0])),0!==n.length&&n.each((function(e,n){var o=s(n);o.addClass(a.loadingClass);var l=o.attr("data-background"),d=o.attr("data-src"),h=o.attr("data-srcset"),p=o.attr("data-sizes");i.loadImage(o[0],d||l,h,p,!1,(function(){if(null!=i&&i&&(!i||i.params)&&!i.destroyed){if(l?(o.css("background-image",'url("'+l+'")'),o.removeAttr("data-background")):(h&&(o.attr("srcset",h),o.removeAttr("data-srcset")),p&&(o.attr("sizes",p),o.removeAttr("data-sizes")),d&&(o.attr("src",d),o.removeAttr("data-src"))),o.addClass(a.loadedClass).removeClass(a.loadingClass),r.find("."+a.preloaderClass).remove(),i.params.loop&&t){var e=r.attr("data-swiper-slide-index");if(r.hasClass(i.params.slideDuplicateClass)){var s=i.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+i.params.slideDuplicateClass+")");i.lazy.loadInSlide(s.index(),!1)}else{var n=i.$wrapperEl.children("."+i.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');i.lazy.loadInSlide(n.index(),!1)}}i.emit("lazyImageReady",r[0],o[0])}})),i.emit("lazyImageLoad",r[0],o[0])}))}},load:function(){var e=this,t=e.$wrapperEl,i=e.params,a=e.slides,r=e.activeIndex,n=e.virtual&&i.virtual.enabled,o=i.lazy,l=i.slidesPerView;function d(e){if(n){if(t.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(a[e])return!0;return!1}function h(e){return n?s(e).attr("data-swiper-slide-index"):s(e).index()}if("auto"===l&&(l=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+i.slideVisibleClass).each((function(t,i){var a=n?s(i).attr("data-swiper-slide-index"):s(i).index();e.lazy.loadInSlide(a)}));else if(l>1)for(var p=r;p<r+l;p+=1)d(p)&&e.lazy.loadInSlide(p);else e.lazy.loadInSlide(r);if(o.loadPrevNext)if(l>1||o.loadPrevNextAmount&&o.loadPrevNextAmount>1){for(var c=o.loadPrevNextAmount,u=l,v=Math.min(r+u+Math.max(c,u),a.length),f=Math.max(r-Math.max(u,c),0),m=r+l;m<v;m+=1)d(m)&&e.lazy.loadInSlide(m);for(var g=f;g<r;g+=1)d(g)&&e.lazy.loadInSlide(g)}else{var b=t.children("."+i.slideNextClass);b.length>0&&e.lazy.loadInSlide(h(b));var w=t.children("."+i.slidePrevClass);w.length>0&&e.lazy.loadInSlide(h(w))}}},de={LinearSpline:function(e,t){var i,s,a,r,n,o=function(e,t){for(s=-1,i=e.length;i-s>1;)e[a=i+s>>1]<=t?s=a:i=a;return i};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(n=o(this.x,e),r=n-1,(e-this.x[r])*(this.y[n]-this.y[r])/(this.x[n]-this.x[r])+this.y[r]):0},this},getInterpolateFunction:function(e){this.controller.spline||(this.controller.spline=this.params.loop?new de.LinearSpline(this.slidesGrid,e.slidesGrid):new de.LinearSpline(this.snapGrid,e.snapGrid))},setTranslate:function(e,t){var i,s,a=this,r=a.controller.control;function n(e){var t=a.rtlTranslate?-a.translate:a.translate;"slide"===a.params.controller.by&&(a.controller.getInterpolateFunction(e),s=-a.controller.spline.interpolate(-t)),s&&"container"!==a.params.controller.by||(i=(e.maxTranslate()-e.minTranslate())/(a.maxTranslate()-a.minTranslate()),s=(t-a.minTranslate())*i+e.minTranslate()),a.params.controller.inverse&&(s=e.maxTranslate()-s),e.updateProgress(s),e.setTranslate(s,a),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(r))for(var o=0;o<r.length;o+=1)r[o]!==t&&r[o]instanceof W&&n(r[o]);else r instanceof W&&t!==r&&n(r)},setTransition:function(e,t){var i,s=this,a=s.controller.control;function r(t){t.setTransition(e,s),0!==e&&(t.transitionStart(),t.params.autoHeight&&n.nextTick((function(){t.updateAutoHeight()})),t.$wrapperEl.transitionEnd((function(){a&&(t.params.loop&&"slide"===s.params.controller.by&&t.loopFix(),t.transitionEnd())})))}if(Array.isArray(a))for(i=0;i<a.length;i+=1)a[i]!==t&&a[i]instanceof W&&r(a[i]);else a instanceof W&&t!==a&&r(a)}},he={makeElFocusable:function(e){return e.attr("tabIndex","0"),e},addElRole:function(e,t){return e.attr("role",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){var t=this.params.a11y;if(13===e.keyCode){var i=s(e.target);this.navigation&&this.navigation.$nextEl&&i.is(this.navigation.$nextEl)&&(this.isEnd&&!this.params.loop||this.slideNext(),this.isEnd?this.a11y.notify(t.lastSlideMessage):this.a11y.notify(t.nextSlideMessage)),this.navigation&&this.navigation.$prevEl&&i.is(this.navigation.$prevEl)&&(this.isBeginning&&!this.params.loop||this.slidePrev(),this.isBeginning?this.a11y.notify(t.firstSlideMessage):this.a11y.notify(t.prevSlideMessage)),this.pagination&&i.is("."+this.params.pagination.bulletClass)&&i[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){if(!this.params.loop){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;i&&i.length>0&&(this.isBeginning?this.a11y.disableEl(i):this.a11y.enableEl(i)),t&&t.length>0&&(this.isEnd?this.a11y.disableEl(t):this.a11y.enableEl(t))}},updatePagination:function(){var e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each((function(i,a){var r=s(a);e.a11y.makeElFocusable(r),e.a11y.addElRole(r,"button"),e.a11y.addElLabel(r,t.paginationBulletMessage.replace(/{{index}}/,r.index()+1))}))},init:function(){this.$el.append(this.a11y.liveRegion);var e,t,i=this.params.a11y;this.navigation&&this.navigation.$nextEl&&(e=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(t=this.navigation.$prevEl),e&&(this.a11y.makeElFocusable(e),this.a11y.addElRole(e,"button"),this.a11y.addElLabel(e,i.nextSlideMessage),e.on("keydown",this.a11y.onEnterKey)),t&&(this.a11y.makeElFocusable(t),this.a11y.addElRole(t,"button"),this.a11y.addElLabel(t,i.prevSlideMessage),t.on("keydown",this.a11y.onEnterKey)),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.on("keydown","."+this.params.pagination.bulletClass,this.a11y.onEnterKey)},destroy:function(){var e,t;this.a11y.liveRegion&&this.a11y.liveRegion.length>0&&this.a11y.liveRegion.remove(),this.navigation&&this.navigation.$nextEl&&(e=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(t=this.navigation.$prevEl),e&&e.off("keydown",this.a11y.onEnterKey),t&&t.off("keydown",this.a11y.onEnterKey),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.off("keydown","."+this.params.pagination.bulletClass,this.a11y.onEnterKey)}},pe={init:function(){if(this.params.history){if(!t.history||!t.history.pushState)return this.params.history.enabled=!1,void(this.params.hashNavigation.enabled=!0);var e=this.history;e.initialized=!0,e.paths=pe.getPathValues(),(e.paths.key||e.paths.value)&&(e.scrollToSlide(0,e.paths.value,this.params.runCallbacksOnInit),this.params.history.replaceState||t.addEventListener("popstate",this.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||t.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=pe.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var e=t.location.pathname.slice(1).split("/").filter((function(e){return""!==e})),i=e.length;return{key:e[i-2],value:e[i-1]}},setHistory:function(e,i){if(this.history.initialized&&this.params.history.enabled){var s=this.slides.eq(i),a=pe.slugify(s.attr("data-history"));t.location.pathname.includes(e)||(a=e+"/"+a);var r=t.history.state;r&&r.value===a||(this.params.history.replaceState?t.history.replaceState({value:a},null,a):t.history.pushState({value:a},null,a))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,i){if(t)for(var s=0,a=this.slides.length;s<a;s+=1){var r=this.slides.eq(s);if(pe.slugify(r.attr("data-history"))===t&&!r.hasClass(this.params.slideDuplicateClass)){var n=r.index();this.slideTo(n,e,i)}}else this.slideTo(0,e,i)}},ce={onHashCange:function(){var t=e.location.hash.replace("#","");if(t!==this.slides.eq(this.activeIndex).attr("data-hash")){var i=this.$wrapperEl.children("."+this.params.slideClass+'[data-hash="'+t+'"]').index();if(void 0===i)return;this.slideTo(i)}},setHash:function(){if(this.hashNavigation.initialized&&this.params.hashNavigation.enabled)if(this.params.hashNavigation.replaceState&&t.history&&t.history.replaceState)t.history.replaceState(null,null,"#"+this.slides.eq(this.activeIndex).attr("data-hash")||"");else{var i=this.slides.eq(this.activeIndex),s=i.attr("data-hash")||i.attr("data-history");e.location.hash=s||""}},init:function(){if(!(!this.params.hashNavigation.enabled||this.params.history&&this.params.history.enabled)){this.hashNavigation.initialized=!0;var i=e.location.hash.replace("#","");if(i)for(var a=0,r=this.slides.length;a<r;a+=1){var n=this.slides.eq(a);if((n.attr("data-hash")||n.attr("data-history"))===i&&!n.hasClass(this.params.slideDuplicateClass)){var o=n.index();this.slideTo(o,0,this.params.runCallbacksOnInit,!0)}}this.params.hashNavigation.watchState&&s(t).on("hashchange",this.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&s(t).off("hashchange",this.hashNavigation.onHashCange)}},ue={run:function(){var e=this,t=e.slides.eq(e.activeIndex),i=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(i=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=n.nextTick((function(){e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),e.params.cssMode&&e.autoplay.running&&e.autoplay.run()}),i)},start:function(){return void 0===this.autoplay.timeout&&(!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0))},stop:function(){return!!this.autoplay.running&&(void 0!==this.autoplay.timeout&&(this.autoplay.timeout&&(clearTimeout(this.autoplay.timeout),this.autoplay.timeout=void 0),this.autoplay.running=!1,this.emit("autoplayStop"),!0))},pause:function(e){this.autoplay.running&&(this.autoplay.paused||(this.autoplay.timeout&&clearTimeout(this.autoplay.timeout),this.autoplay.paused=!0,0!==e&&this.params.autoplay.waitForTransition?(this.$wrapperEl[0].addEventListener("transitionend",this.autoplay.onTransitionEnd),this.$wrapperEl[0].addEventListener("webkitTransitionEnd",this.autoplay.onTransitionEnd)):(this.autoplay.paused=!1,this.autoplay.run())))}},ve={setTranslate:function(){for(var e=this.slides,t=0;t<e.length;t+=1){var i=this.slides.eq(t),s=-i[0].swiperSlideOffset;this.params.virtualTranslate||(s-=this.translate);var a=0;this.isHorizontal()||(a=s,s=0);var r=this.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:r}).transform("translate3d("+s+"px, "+a+"px, 0px)")}},setTransition:function(e){var t=this,i=t.slides,s=t.$wrapperEl;if(i.transition(e),t.params.virtualTranslate&&0!==e){var a=!1;i.transitionEnd((function(){if(!a&&t&&!t.destroyed){a=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)s.trigger(e[i])}}))}}},fe={setTranslate:function(){var e,t=this.$el,i=this.$wrapperEl,a=this.slides,r=this.width,n=this.height,o=this.rtlTranslate,l=this.size,d=this.params.cubeEffect,h=this.isHorizontal(),p=this.virtual&&this.params.virtual.enabled,c=0;d.shadow&&(h?(0===(e=i.find(".swiper-cube-shadow")).length&&(e=s('<div class="swiper-cube-shadow"></div>'),i.append(e)),e.css({height:r+"px"})):0===(e=t.find(".swiper-cube-shadow")).length&&(e=s('<div class="swiper-cube-shadow"></div>'),t.append(e)));for(var u=0;u<a.length;u+=1){var v=a.eq(u),f=u;p&&(f=parseInt(v.attr("data-swiper-slide-index"),10));var m=90*f,g=Math.floor(m/360);o&&(m=-m,g=Math.floor(-m/360));var b=Math.max(Math.min(v[0].progress,1),-1),w=0,y=0,x=0;f%4==0?(w=4*-g*l,x=0):(f-1)%4==0?(w=0,x=4*-g*l):(f-2)%4==0?(w=l+4*g*l,x=l):(f-3)%4==0&&(w=-l,x=3*l+4*l*g),o&&(w=-w),h||(y=w,w=0);var T="rotateX("+(h?0:-m)+"deg) rotateY("+(h?m:0)+"deg) translate3d("+w+"px, "+y+"px, "+x+"px)";if(b<=1&&b>-1&&(c=90*f+90*b,o&&(c=90*-f-90*b)),v.transform(T),d.slideShadows){var E=h?v.find(".swiper-slide-shadow-left"):v.find(".swiper-slide-shadow-top"),C=h?v.find(".swiper-slide-shadow-right"):v.find(".swiper-slide-shadow-bottom");0===E.length&&(E=s('<div class="swiper-slide-shadow-'+(h?"left":"top")+'"></div>'),v.append(E)),0===C.length&&(C=s('<div class="swiper-slide-shadow-'+(h?"right":"bottom")+'"></div>'),v.append(C)),E.length&&(E[0].style.opacity=Math.max(-b,0)),C.length&&(C[0].style.opacity=Math.max(b,0))}}if(i.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),d.shadow)if(h)e.transform("translate3d(0px, "+(r/2+d.shadowOffset)+"px, "+-r/2+"px) rotateX(90deg) rotateZ(0deg) scale("+d.shadowScale+")");else{var S=Math.abs(c)-90*Math.floor(Math.abs(c)/90),M=1.5-(Math.sin(2*S*Math.PI/360)/2+Math.cos(2*S*Math.PI/360)/2),P=d.shadowScale,z=d.shadowScale/M,k=d.shadowOffset;e.transform("scale3d("+P+", 1, "+z+") translate3d(0px, "+(n/2+k)+"px, "+-n/2/z+"px) rotateX(-90deg)")}var $=j.isSafari||j.isUiWebView?-l/2:0;i.transform("translate3d(0px,0,"+$+"px) rotateX("+(this.isHorizontal()?0:c)+"deg) rotateY("+(this.isHorizontal()?-c:0)+"deg)")},setTransition:function(e){var t=this.$el;this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}},me={setTranslate:function(){for(var e=this.slides,t=this.rtlTranslate,i=0;i<e.length;i+=1){var a=e.eq(i),r=a[0].progress;this.params.flipEffect.limitRotation&&(r=Math.max(Math.min(a[0].progress,1),-1));var n=-180*r,o=0,l=-a[0].swiperSlideOffset,d=0;if(this.isHorizontal()?t&&(n=-n):(d=l,l=0,o=-n,n=0),a[0].style.zIndex=-Math.abs(Math.round(r))+e.length,this.params.flipEffect.slideShadows){var h=this.isHorizontal()?a.find(".swiper-slide-shadow-left"):a.find(".swiper-slide-shadow-top"),p=this.isHorizontal()?a.find(".swiper-slide-shadow-right"):a.find(".swiper-slide-shadow-bottom");0===h.length&&(h=s('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"left":"top")+'"></div>'),a.append(h)),0===p.length&&(p=s('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"right":"bottom")+'"></div>'),a.append(p)),h.length&&(h[0].style.opacity=Math.max(-r,0)),p.length&&(p[0].style.opacity=Math.max(r,0))}a.transform("translate3d("+l+"px, "+d+"px, 0px) rotateX("+o+"deg) rotateY("+n+"deg)")}},setTransition:function(e){var t=this,i=t.slides,s=t.activeIndex,a=t.$wrapperEl;if(i.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var r=!1;i.eq(s).transitionEnd((function(){if(!r&&t&&!t.destroyed){r=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)a.trigger(e[i])}}))}}},ge={setTranslate:function(){for(var e=this.width,t=this.height,i=this.slides,a=this.$wrapperEl,r=this.slidesSizesGrid,n=this.params.coverflowEffect,l=this.isHorizontal(),d=this.translate,h=l?e/2-d:t/2-d,p=l?n.rotate:-n.rotate,c=n.depth,u=0,v=i.length;u<v;u+=1){var f=i.eq(u),m=r[u],g=(h-f[0].swiperSlideOffset-m/2)/m*n.modifier,b=l?p*g:0,w=l?0:p*g,y=-c*Math.abs(g),x=l?0:n.stretch*g,T=l?n.stretch*g:0;Math.abs(T)<.001&&(T=0),Math.abs(x)<.001&&(x=0),Math.abs(y)<.001&&(y=0),Math.abs(b)<.001&&(b=0),Math.abs(w)<.001&&(w=0);var E="translate3d("+T+"px,"+x+"px,"+y+"px)  rotateX("+w+"deg) rotateY("+b+"deg)";if(f.transform(E),f[0].style.zIndex=1-Math.abs(Math.round(g)),n.slideShadows){var C=l?f.find(".swiper-slide-shadow-left"):f.find(".swiper-slide-shadow-top"),S=l?f.find(".swiper-slide-shadow-right"):f.find(".swiper-slide-shadow-bottom");0===C.length&&(C=s('<div class="swiper-slide-shadow-'+(l?"left":"top")+'"></div>'),f.append(C)),0===S.length&&(S=s('<div class="swiper-slide-shadow-'+(l?"right":"bottom")+'"></div>'),f.append(S)),C.length&&(C[0].style.opacity=g>0?g:0),S.length&&(S[0].style.opacity=-g>0?-g:0)}}(o.pointerEvents||o.prefixedPointerEvents)&&(a[0].style.perspectiveOrigin=h+"px 50%")},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},be={init:function(){var e=this.params.thumbs,t=this.constructor;e.swiper instanceof t?(this.thumbs.swiper=e.swiper,n.extend(this.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),n.extend(this.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):n.isObject(e.swiper)&&(this.thumbs.swiper=new t(n.extend({},e.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),this.thumbs.swiperCreated=!0),this.thumbs.swiper.$el.addClass(this.params.thumbs.thumbsContainerClass),this.thumbs.swiper.on("tap",this.thumbs.onThumbClick)},onThumbClick:function(){var e=this.thumbs.swiper;if(e){var t=e.clickedIndex,i=e.clickedSlide;if(!(i&&s(i).hasClass(this.params.thumbs.slideThumbActiveClass)||null==t)){var a;if(a=e.params.loop?parseInt(s(e.clickedSlide).attr("data-swiper-slide-index"),10):t,this.params.loop){var r=this.activeIndex;this.slides.eq(r).hasClass(this.params.slideDuplicateClass)&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,r=this.activeIndex);var n=this.slides.eq(r).prevAll('[data-swiper-slide-index="'+a+'"]').eq(0).index(),o=this.slides.eq(r).nextAll('[data-swiper-slide-index="'+a+'"]').eq(0).index();a=void 0===n?o:void 0===o?n:o-r<r-n?o:n}this.slideTo(a)}}},update:function(e){var t=this.thumbs.swiper;if(t){var i="auto"===t.params.slidesPerView?t.slidesPerViewDynamic():t.params.slidesPerView;if(this.realIndex!==t.realIndex){var s,a=t.activeIndex;if(t.params.loop){t.slides.eq(a).hasClass(t.params.slideDuplicateClass)&&(t.loopFix(),t._clientLeft=t.$wrapperEl[0].clientLeft,a=t.activeIndex);var r=t.slides.eq(a).prevAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index(),n=t.slides.eq(a).nextAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index();s=void 0===r?n:void 0===n?r:n-a==a-r?a:n-a<a-r?n:r}else s=this.realIndex;t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(s)<0&&(t.params.centeredSlides?s=s>a?s-Math.floor(i/2)+1:s+Math.floor(i/2)-1:s>a&&(s=s-i+1),t.slideTo(s,e?0:void 0))}var o=1,l=this.params.thumbs.slideThumbActiveClass;if(this.params.slidesPerView>1&&!this.params.centeredSlides&&(o=this.params.slidesPerView),t.slides.removeClass(l),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(var d=0;d<o;d+=1)t.$wrapperEl.children('[data-swiper-slide-index="'+(this.realIndex+d)+'"]').addClass(l);else for(var h=0;h<o;h+=1)t.slides.eq(this.realIndex+h).addClass(l)}}},we=[R,q,K,U,Z,J,te,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){n.extend(this,{mousewheel:{enabled:!1,enable:ie.enable.bind(this),disable:ie.disable.bind(this),handle:ie.handle.bind(this),handleMouseEnter:ie.handleMouseEnter.bind(this),handleMouseLeave:ie.handleMouseLeave.bind(this),lastScrollTime:n.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[]}})},on:{init:function(){!this.params.mousewheel.enabled&&this.params.cssMode&&this.mousewheel.disable(),this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.params.cssMode&&this.mousewheel.enable(),this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){n.extend(this,{navigation:{init:se.init.bind(this),update:se.update.bind(this),destroy:se.destroy.bind(this),onNextClick:se.onNextClick.bind(this),onPrevClick:se.onPrevClick.bind(this)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var t,i=this.navigation,a=i.$nextEl,r=i.$prevEl;!this.params.navigation.hideOnClick||s(e.target).is(r)||s(e.target).is(a)||(a?t=a.hasClass(this.params.navigation.hiddenClass):r&&(t=r.hasClass(this.params.navigation.hiddenClass)),!0===t?this.emit("navigationShow",this):this.emit("navigationHide",this),a&&a.toggleClass(this.params.navigation.hiddenClass),r&&r.toggleClass(this.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){n.extend(this,{pagination:{init:ae.init.bind(this),render:ae.render.bind(this),update:ae.update.bind(this),destroy:ae.destroy.bind(this),dynamicBulletIndex:0}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){this.params.loop?this.pagination.update():void 0===this.snapIndex&&this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){this.params.pagination.el&&this.params.pagination.hideOnClick&&this.pagination.$el.length>0&&!s(e.target).hasClass(this.params.pagination.bulletClass)&&(!0===this.pagination.$el.hasClass(this.params.pagination.hiddenClass)?this.emit("paginationShow",this):this.emit("paginationHide",this),this.pagination.$el.toggleClass(this.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){n.extend(this,{scrollbar:{init:re.init.bind(this),destroy:re.destroy.bind(this),updateSize:re.updateSize.bind(this),setTranslate:re.setTranslate.bind(this),setTransition:re.setTransition.bind(this),enableDraggable:re.enableDraggable.bind(this),disableDraggable:re.disableDraggable.bind(this),setDragPosition:re.setDragPosition.bind(this),getPointerPosition:re.getPointerPosition.bind(this),onDragStart:re.onDragStart.bind(this),onDragMove:re.onDragMove.bind(this),onDragEnd:re.onDragEnd.bind(this),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(e){this.scrollbar.setTransition(e)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){n.extend(this,{parallax:{setTransform:ne.setTransform.bind(this),setTranslate:ne.setTranslate.bind(this),setTransition:ne.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTransition:function(e){this.params.parallax.enabled&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this,t={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach((function(i){t[i]=oe[i].bind(e)})),n.extend(e,{zoom:t});var i=1;Object.defineProperty(e.zoom,"scale",{get:function(){return i},set:function(t){if(i!==t){var s=e.zoom.gesture.$imageEl?e.zoom.gesture.$imageEl[0]:void 0,a=e.zoom.gesture.$slideEl?e.zoom.gesture.$slideEl[0]:void 0;e.emit("zoomChange",t,s,a)}i=t}})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd:function(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap:function(e){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(e)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()},slideChange:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.params.cssMode&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){n.extend(this,{lazy:{initialImageLoaded:!1,load:le.load.bind(this),loadInSlide:le.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){this.params.lazy.enabled&&(this.params.lazy.loadOnTransitionStart||!this.params.lazy.loadOnTransitionStart&&!this.lazy.initialImageLoaded)&&this.lazy.load()},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()},slideChange:function(){this.params.lazy.enabled&&this.params.cssMode&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){n.extend(this,{controller:{control:this.params.controller.control,getInterpolateFunction:de.getInterpolateFunction.bind(this),setTranslate:de.setTranslate.bind(this),setTransition:de.setTransition.bind(this)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition:function(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var e=this;n.extend(e,{a11y:{liveRegion:s('<span class="'+e.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(he).forEach((function(t){e.a11y[t]=he[t].bind(e)}))},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){n.extend(this,{history:{init:pe.init.bind(this),setHistory:pe.setHistory.bind(this),setHistoryPopState:pe.setHistoryPopState.bind(this),scrollToSlide:pe.scrollToSlide.bind(this),destroy:pe.destroy.bind(this)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)},slideChange:function(){this.history.initialized&&this.params.cssMode&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){n.extend(this,{hashNavigation:{initialized:!1,init:ce.init.bind(this),destroy:ce.destroy.bind(this),setHash:ce.setHash.bind(this),onHashCange:ce.onHashCange.bind(this)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()},slideChange:function(){this.hashNavigation.initialized&&this.params.cssMode&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var e=this;n.extend(e,{autoplay:{running:!1,paused:!1,run:ue.run.bind(e),start:ue.start.bind(e),stop:ue.stop.bind(e),pause:ue.pause.bind(e),onVisibilityChange:function(){"hidden"===document.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===document.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(t){e&&!e.destroyed&&e.$wrapperEl&&t.target===this&&(e.$wrapperEl[0].removeEventListener("transitionend",e.autoplay.onTransitionEnd),e.$wrapperEl[0].removeEventListener("webkitTransitionEnd",e.autoplay.onTransitionEnd),e.autoplay.paused=!1,e.autoplay.running?e.autoplay.run():e.autoplay.stop())}}})},on:{init:function(){this.params.autoplay.enabled&&(this.autoplay.start(),document.addEventListener("visibilitychange",this.autoplay.onVisibilityChange))},beforeTransitionStart:function(e,t){this.autoplay.running&&(t||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(e):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},touchEnd:function(){this.params.cssMode&&this.autoplay.paused&&!this.params.autoplay.disableOnInteraction&&this.autoplay.run()},destroy:function(){this.autoplay.running&&this.autoplay.stop(),document.removeEventListener("visibilitychange",this.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){n.extend(this,{fadeEffect:{setTranslate:ve.setTranslate.bind(this),setTransition:ve.setTransition.bind(this)}})},on:{beforeInit:function(){if("fade"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"fade");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};n.extend(this.params,e),n.extend(this.originalParams,e)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){n.extend(this,{cubeEffect:{setTranslate:fe.setTranslate.bind(this),setTransition:fe.setTransition.bind(this)}})},on:{beforeInit:function(){if("cube"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"cube"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};n.extend(this.params,e),n.extend(this.originalParams,e)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){n.extend(this,{flipEffect:{setTranslate:me.setTranslate.bind(this),setTransition:me.setTransition.bind(this)}})},on:{beforeInit:function(){if("flip"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"flip"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};n.extend(this.params,e),n.extend(this.originalParams,e)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){n.extend(this,{coverflowEffect:{setTranslate:ge.setTranslate.bind(this),setTransition:ge.setTransition.bind(this)}})},on:{beforeInit:function(){"coverflow"===this.params.effect&&(this.classNames.push(this.params.containerModifierClass+"coverflow"),this.classNames.push(this.params.containerModifierClass+"3d"),this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){n.extend(this,{thumbs:{swiper:null,init:be.init.bind(this),update:be.update.bind(this),onThumbClick:be.onThumbClick.bind(this)}})},on:{beforeInit:function(){var e=this.params.thumbs;e&&e.swiper&&(this.thumbs.init(),this.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(e){var t=this.thumbs.swiper;t&&t.setTransition(e)},beforeDestroy:function(){var e=this.thumbs.swiper;e&&this.thumbs.swiperCreated&&e&&e.destroy()}}}];return void 0===W.use&&(W.use=W.Class.use,W.installModule=W.Class.installModule),W.use(we),W}));
//# sourceMappingURL=swiper.min.js.map
window.DevLibrary = window.DevLibrary || {};

function polyfill() {
  // array.includes
  if (!Array.prototype.includes) {
    Object.defineProperty(Array.prototype, 'includes', {
      value: function(searchElement, fromIndex) {

        // 1. Let O be ? ToObject(this value).
        if (this == null) {
          throw new TypeError('"this" is null or not defined');
        }

        var o = Object(this);

        // 2. Let len be ? ToLength(? Get(O, "length")).
        var len = o.length >>> 0;

        // 3. If len is 0, return false.
        if (len === 0) {
          return false;
        }

        // 4. Let n be ? ToInteger(fromIndex).
        //    (If fromIndex is undefined, this step produces the value 0.)
        var n = fromIndex | 0;

        // 5. If n ? 0, then
        //  a. Let k be n.
        // 6. Else n < 0,
        //  a. Let k be len + n.
        //  b. If k < 0, let k be 0.
        var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);

        // 7. Repeat, while k < len
        while (k < len) {
          // a. Let elementK be the result of ? Get(O, ! ToString(k)).
          // b. If SameValueZero(searchElement, elementK) is true, return true.
          // c. Increase k by 1.
          // NOTE: === provides the correct "SameValueZero" comparison needed here.
          if (o[k] === searchElement) {
            return true;
          }
          k++;
        }

        // 8. Return false
        return false;
      }
    });
  }
}

function isMobile(){
  if($("meta[device]").attr("device") == "mobile" || window.innerWidth < 769)
    return true;
  return false;
}

function GetURLParameter(sParam){
  var sPageURL = window.location.search.substring(1);
  var sURLVariables = sPageURL.split('&');
  for (var i = 0; i < sURLVariables.length; i++){
    var sParameterName = sURLVariables[i].split('=');
    if (sParameterName[0] == sParam){
      return sParameterName[1];
    }
  }
}

function validAccessToken() {
  var accessToken = GetURLParameter('token');
  var appFrom = GetURLParameter('appFrom');
  if (accessToken != '' && accessToken != null && typeof accessToken != 'undefined') {
    var profileURL = 'https://sso-us.samsung.com/sso/apiservices/sde/UserProfile?accessToken=' + accessToken + '&appFrom=samsung.com';
    $.ajax({
      url: profileURL,
      type: 'GET',
      cache: true,
      global: false,
      dataType: 'jsonp',
      error: function (e) {
        console.log('AccessToken[' + accessToken + '] is not authorized');
      }
    });
  }
}

function decodePhonenumber(string) {
  return string.replace('(','').replace(')','').replace('-','');
}

function makePhonenumber( string ) {
  var ph = ["","","","",""];
  var str = "(";
  var st="(";
  string=string.toString().replace(/\D/g,'');
  for ( var i=0; i < string.length; i++ ) {
    str += string[i];
    if(i<3){
      ph[0]=string;
    }
    else if(i<6){
      ph[0]=string.substring(0,3);
      ph[1]=")";
      ph[2]=string.substring(3,7);
    }
    else if(i>5){
      ph[0]=string.substring(0,3);
      ph[2]=string.substring(3,6);
      ph[3]="-";
      ph[4]=string.substring(6,10);
    }
  }
  for(var x=0; x<ph.length;x++){
    st+=ph[x];
  }
  return st;//.replace(/\s+/g,"");
}

$.fn.setCursorPosition = function(pos) {
  this.each(function(index, elem) {
    if (elem.setSelectionRange) {
      elem.setSelectionRange(pos, pos);
    } else if (elem.createTextRange) {
      var range = elem.createTextRange();
      range.collapse(true);
      range.moveEnd('character', pos);
      range.moveStart('character', pos);
      range.select();
    }
  });
  return this;
};

DevLibrary.Accordion = (function(DevLibrary, window, undefined){

  var $inputIMEI = $("input[name='espSerialNumber']"),
    $inputMobile = $("input[name='espMobileNumber']"),
    $inputSubmit = $("input#imeiSubmit"),
    $loadingConfirm = $(".loading-confirmation"),
    loading, ensured, imeiSuccess = false,
    mobileSuccess = false,
    boxSuccess = true,
    imeiBtnClicked = false,
    $addCart = $(".product-details__info-add"),
    validNum = -1,
    p=1,
    condition1 = location.href.indexOf('imei') > -1 && location.href.indexOf('token') > -1,
    condition2 = location.pathname.indexOf('/web-premium-care-hhp-adh1-pb4-a') > -1 && location.href.indexOf('token') < 0;

    _initialize = function() {
      if (window.location.href.indexOf('hhp-adh1-pb4-a') > -1 && (condition1 || condition2)) {
        validateIMEI($inputIMEI);
        validMobile($inputMobile);
        if ($inputIMEI.val().length) {
          if ($inputIMEI.val().length == 14 || $inputIMEI.val().length == 15) {
            checkIMEI(null, $inputIMEI.val());
          } else {
            $inputIMEI.focus();
            $inputIMEI.blur();
          }
        }
        if ($inputMobile.val().length) {
          $inputMobile.focus();
          $inputMobile.blur();
        }
        $inputSubmit.on('click', checkIMEI);
        $addCart.on('click', addToCart);
      } else {
        var getAndroidVersion = function() {
          var ua = navigator.userAgent.toLowerCase();
          var match = ua.match(/android\s([0-9\.]*)/);
          return match ? match[1] : false;
        };

        if( /Android/i.test(navigator.userAgent) && (/SM-G950/i.test(navigator.userAgent) || /SM-G955/i.test(navigator.userAgent) || /SM-N950/i.test(navigator.userAgent) ||
          (/Mobile/i.test(navigator.userAgent) && /Firefox/i.test(navigator.userAgent) && parseFloat(getAndroidVersion()) >= 7))) {
          var text = '<img itemprop="image" class="product-details__img" src="//image-us.samsung.com/SamsungUS/home/mobile/mobile-accessories/pdp/samsung-plus-latest.png?$premiumcare-png$" />';
          $('.product-details__info-results').append(text);
          $('.gs8-cta').show();
          $('.gs8-cta').next('.product-details__info-add').remove();
          $('.gs8-care-hide').remove();
        } else {
          validMobile($inputMobile);
          if ($inputMobile.val().length) {
            $inputMobile.focus();
            $inputMobile.blur();
          }
          $addCart.on('click', addToCart2);
        }
      }
    },

    isNumberKey = function(evt) {
      var charCode = (evt.which) ? evt.which : evt.keyCode;
      if (charCode > 46 && (charCode < 48 || charCode > 57)) {
        if (charCode == 224 || charCode == 17 || charCode == 91
          || charCode == 93) {
          return true;
        }
        return false;
      }
      return true;
    },
    validateIMEI = function($selected) {
      var imeival=false;
      $selected.on("input", function(e){
        if(this.value.length >= 15){
          this.value=this.value.substring(0,15);
          e.preventDefault();
          return;
        };
        if(!$.isNumeric(this.value)){
          this.value=this.value.replace(/\D/g,"");
          e.preventDefault();
          return;
        }
        if(imeival == false && this.value!=""){$(".confirm-characters-01").show();}else{$(".confirm-characters-01").hide();}
      });

      $selected.on("change click mouseover mouseout mouseleave focus blur keypress",
        function(e) {
          if ($(this).val().length > 3) {
            $inputIMEI.removeClass("red-border");
            if (validNum == $(this).val()) {
              imeiSuccess = true;
            } else {
              imeiSuccess = false;
            }
            if (($(this).val().length > 15 || $(this).val().length < 14) && isNumberKey(e)) {
              imeiSuccess = false;
              $inputSubmit.prop('disabled', true);
            }
            if (($(this).val().length == 14 || $(this)
                .val().length == 15)
              && isNumberKey(e)
              && $.isNumeric($(this).val())) {
              imeival=true;
              $inputSubmit.prop('disabled', false);
              $(".confirm-characters-01").hide();
              $(".confirm-invalid-characters").hide();
            }
            if (!$.isNumeric($(this).val())) {
              $(".confirm-invalid-characters").show();
            }
            if ($.isNumeric($(this).val())) {
              $(".confirm-invalid-characters").hide();
            }
          }else{
            $inputSubmit.prop('disabled', true);
          }
          if(imeival == false && this.value!=""){$(".confirm-characters-01").show();}else{$(".confirm-characters-01").hide();}
        });
    },
    validMobile = function($selected) {
      if ($('#espMobileNumber').val().length) {
        $('#espMobileNumber').val(makePhonenumber($('#espMobileNumber').val()));
      }
      if(isMobile()) document.forms['productDetail'].espMobileNumber.type='tel';
      var iph=navigator.userAgent.indexOf('iPhone')>-1 ? true : false;
      var key = iph ? "keypress" : "keydown";
      $selected.on("input", function(e){
        if(this.value.length >= 13){
          this.value=this.value.substring(0,13);
          e.preventDefault();
          return;
        }else{
          $(this).val(makePhonenumber(this.value.replace(/\D/g,"")));
          e.preventDefault();
          return;
        }
      });
      $selected.on(key, function(e){
        p=1;
        var ft=this.value.replace(/\D/g,'');
        if(ft.length>3) p=2;
        if(ft.length>5) p=3;
        $(this).setCursorPosition(ft.length+p);
      });
      $selected.on('change click focus blur', function(e) {
        if (imeiBtnClicked == false) {
          $(".confirm-warn").show();
        }
        var phoneNumber = $(this).val().replace('(','').replace(')','').replace('-','');
        if ($(this).val().length == 13 && $.isNumeric(phoneNumber) && phoneNumber.charAt(0) != '0' && phoneNumber.charAt(0) != '1') {
          mobileSuccess = true;
          $(this).removeClass('red-border');
          $(".confirm-phone").hide();
        }else{
          mobileSuccess = false;
          $(".sms-alert").hide();
        }
      });
      if (!(window.location.href.indexOf('hhp-adh1-pb4-a') > -1 && window.location.href.indexOf('imei=') > -1 &&
          window.location.href.indexOf('phone=') > -1 && window.location.href.indexOf('token=') > -1)) {
        $selected.on('keyup', function (e) {
          var phoneNumber = $(this).val().replace('(', '').replace(')', '').replace('-', '');
          if (phoneNumber.length == 10 && $.isNumeric(phoneNumber) && phoneNumber.charAt(0) != '0' && phoneNumber.charAt(0) != '1') {
            $addCart.removeClass('gray-out');
            $addCart.prop('disabled', false);
          } else {
            $addCart.addClass('gray-out');
            $addCart.prop('disabled', true);
            $(".sms-alert").hide();
          }
        });
      }
      $selected.on('blur', function(e){
        if(mobileSuccess == false && this.value!=""){$(".confirm-phone").show();}else{$(".confirm-phone").hide();}
      });
    },

    addToCart = function(event) {
      event.preventDefault();
      $(".red-border").removeClass("red-border");
      $("span[class*='confirm-']").hide();
      if (mobileSuccess && imeiSuccess && boxSuccess) {
        $inputIMEI.removeClass("red-border");
        $inputMobile.removeClass("red-border");
        //$checkbox.removeClass("red-border");

        var f = document.forms["productDetail"];
        if (window.SCart && window.SCart.isEcomCheckout()) {
          var postBody = $(f).serialize();
          if(postBody.indexOf('espMobileNumber=') > -1) {
            postBody = postBody.split('espMobileNumber=')[0] + 'espMobileNumber=' + decodePhonenumber(postBody.split('espMobileNumber=')[1]);
          }
          window.location.href = SCart.URL.CHECKOUT_URL()+"?"+ postBody;
        } else {
          f.method = "POST";
          f.action="https://shop.us.samsung.com/store/";
          f.submit();
        }
      }
      if (!mobileSuccess) {
        $(".confirm-phone").show();
        $inputMobile.addClass("red-border");
      }
      if (!imeiSuccess) {
        $(".confirm-final").show();
        $inputIMEI.addClass("red-border");
      }
    },

    addToCart2 = function(event) {
      event.preventDefault();
      $(".red-border").removeClass("red-border");
      $("span[class*='confirm-']").hide();
      imeiSuccess = true;
      if (mobileSuccess && imeiSuccess && boxSuccess) {
        $inputIMEI.removeClass("red-border");
        $inputMobile.removeClass("red-border");
        var settings = {
          "async": true,
          "crossDomain": true,
          "url": "https://platform.ownershubsamsung.com/api/v1/customer/sms",
          "method": "POST",
          "headers": {
            "authorization": "Basic NDRBRUUwRUQtOEIzQS00MjhELThENUItNTVGMjMwQ0I1M0Q1OjE2MTgyMjRkOTU4YTViZmQ0ZWU2NjUzOTZlM2U1Zjkz",
            "content-type": "application/json",
            "cache-control": "no-cache"
          },
          "processData": false,
          "data": "{\r\n \"source\": \"s.com\",\r\n \"messageCode\": \"PremiumCarePurchase\", \r\n \"targets\":\r\n [\r\n {\r\n \"phoneNumber\": \"+1"
          + decodePhonenumber($(document.forms["productDetail"]).serialize().split('espMobileNumber=')[1])
          + "\" \r\n }\r\n ]\r\n}"
        };

        $.ajax(settings).then(function (response) {
          $('.sms-alert').text('SMS sent successfully.').show().css('color','#7fd44f');
        },function (response) {
          $('.sms-alert').text('SMS request failed. Please try again.').show().css('color','#dc2222');
        });
      }
      if (!mobileSuccess) {
        $(".confirm-phone").show();
        $inputMobile.addClass("red-border");
      }
      if (!imeiSuccess) {
        $(".confirm-final").show();
        $inputIMEI.addClass("red-border");
      }
    },

    checkIMEI = function (event, value) {

      var note7Update = ['SM-N930AZKAATT', 'SM-N930VZKAVZW', 'SM-N930TZKATMB',
        'SM-N930PZKASPR', 'SM-N930RZKAUSC', 'SM-N930AZBAATT',
        'SM-N930VZBAVZW', 'SM-N930TZBATMB', 'SM-N930PZBASPR',
        'SM-N930RZBAUSC', 'SM-N930AZSAATT', 'SM-N930VZSAVZW',
        'SM-N930TZSATMB', 'SM-N930PZSASPR', 'SM-N930RZSAUSC'
      ];

      event && event.preventDefault();
      $(".imei-confirmation").html('');
      $(".confirm-warn").hide();
      $(".error-confirmation").removeClass("active");
      $loadingConfirm.addClass('active');
      ensured = value || $(this).prev()[0].value;
      imeiBtnClicked = true;
      var imei = GetURLParameter('Ny');
      if(location.href.indexOf('Ny')>-1 && validCount == 0){
        validURL = 'https://sso-us.samsung.com/sso/fb_service/validate_device?source=scom&device_type=mobile&imei='+imei+'&enc=y';
        validCount = 1;
      }
      else{
        validURL = 'https://sso-us.samsung.com/sso/fb_service/validate_device?source=scom&device_type=mobile&imei='+ensured ;
      }
      var modelArray = ['HHP-ADH1-PB4', 'HHP-ADH1-PB4-A'];
      $.ajax({url: validURL,
        type: 'get',
        success: function(res){
          if(res != null && res !=''){
            var mdl=res.model_code||"";
            var newURL = '/us/product/productAddInfo/'+mdl + (condition2 ? ('?imei='+ensured+'&prof_id='+$.cookie('prof_id')) : '');
            $.ajax({
              url: newURL,
              type: 'GET',
              success: function(d){
                if(d){
                  if((d.Warranty != $('.product-details__info').data('eppmdlcd') || note7Update.indexOf(mdl) > -1) && !modelArray.includes(d.Warranty)){
                    $(".error-confirmation").addClass("active");$(".not-eligible").html('Sorry, this device is not compatible with this Premium Care plan.');
                    return;
                  }
                  $(".imei-confirmation").addClass("active");
                  $(".confirm-final").hide();
                  $inputIMEI.removeClass("red-border");
                  validNum = ensured;
                  imeiSuccess = true;
                  var html = '<div class="confirmed-phone">'
                    +'<div class="confirmed-phone-icon">'
                    +'<img src="http://www.samsung.com'+d.File+'"/>'
                    +'</div>'
                    +'<span class="icon-checkmark-sm"></span>'
                    +'<span>Confirmed</span>'
                    +'<span>'+d.Name+'</span>'
                    +'</div>';
                  $(".imei-confirmation").html(html);
                  var car = mdl.substring(7,8);
                  var color = mdl.substring(8,10);
                  var mem = mdl.substring(10,11);
                  document.forms['productDetail'].espCovModel.value = mdl;
                  document.forms['productDetail'].espCarrier.value = car;
                  document.forms['productDetail'].espColor.value = color;
                  document.forms['productDetail'].espMemorySize.value = mem;
                  document.forms['productDetail'].externalRefID.value = $('.product-details__info').data('eppmdlcd');
                }else{
                  $(".error-confirmation").addClass("active");
                  $(".not-eligible").val('Sorry, your device could not be found.');
                }
              },
              error: function(e){
                $(".error-confirmation").addClass("active");
                $(".not-eligible").html('Sorry, your device could not be found.');
                $.ajax({
                  url: '/us/api/consumer/logger?className=PremiumCare&errorMsg=IMEI Number:' + document.forms['productDetail']['espSerialNumber'].value +
                  ', {' + JSON.parse(decodeURIComponent(e.responseText)).error + '}',
                  type: 'get'
                });
              }
            });
          }
          if(location.href.indexOf('Ny')>-1 && typeof res.imei != 'undefined' && res.imei !=''){
            $('#overview #ensureIMEI').val(res.imei);
          }
        },
        error: function(e){
          $(".error-confirmation").addClass("active");
          $(".not-eligible").html('Sorry, your device could not be found.');
          $.ajax({
            url: '/us/api/consumer/logger?className=PremiumCare&errorMsg=IMEI Number:' + document.forms['productDetail']['espSerialNumber'].value +
            ', {' + JSON.parse(decodeURIComponent(e.responseText)).error + '}',
            type: 'get'
          });
        },
        complete: function(){$loadingConfirm.removeClass('active');}
      });
    };
  if (document.forms['productDetail'] != undefined) {
    polyfill();
    if (condition2) {
      if ($.cookie('xsdcxyn')) {
        if (!$inputIMEI.val().length) {
          $addCart.addClass('gray-out');
          $addCart.prop('disabled', true);
        }
        _initialize();
        $inputIMEI.removeAttr('readonly');
        $inputIMEI.focus();
      } else {
        setTimeout(function(){$(document).trigger("onPromptLogin"); $('.gnb-login-inner .gnb-login-inner__close').remove();}, 1000);
        $addCart.addClass('gray-out');
        $addCart.prop('disabled', true);
        $(document).on('onLogInComplete', function(){window.location.reload();});
      }
      return
    }
    if (condition1) {
      validAccessToken();
    }
    _initialize();
  }
}(DevLibrary, window, undefined));
(function ($, window, undefined) {
  'use strict';
  var Tooltip = (function () {
    var _that;

    function Tooltip(el) {
      this.el = el;
      _that = this;
    }

    Tooltip.prototype.hidemobileTip = function(e) {
      if(!$(e.target).closest('.product-details__info-marketing__tooltip-text').length) {
          if($('.product-details__info-marketing__tooltip-text').is(":visible")) {
            _that.hideTip();
          }
      }  
    };

    Tooltip.prototype.displayTip = function(e) {
      e.stopPropagation();
      _that.el.find('.product-details__info-marketing__tooltip-text').addClass('active');
      _that.el.find('.product-details__info-marketing__tooltip-text').on('mouseleave', _that.hideTip);
      _that.el.find('.product-details__info-marketing__tooltip').off();
      $(document).on('touchend', _that.hidemobileTip); 

    };

    Tooltip.prototype.hideTip = function() {
      _that.el.find('.product-details__info-marketing__tooltip-text').removeClass('active');
      _that.el.find('.product-details__info-marketing__tooltip').on('mouseenter touchend', _that.displayTip);
      _that.el.find('.product-details__info-marketing__tooltip-text').off();
      $(document).off('touchend', _that.hidemobileTip); 
    };

    Tooltip.prototype.eventBind = function() {
      _that.el.find('.product-details__info-marketing__tooltip').on('mouseenter touchend', _that.displayTip);
    };

    Tooltip.prototype.init = function () {
      _that.eventBind();
    };
    return Tooltip;
  }());

  var AcTooltip = (function () {
    var _that;

    function AcTooltip(el) {
      this.el = el;
      _that = this;
    }

    AcTooltip.prototype.hidemobileTip = function(e) {
      if(!$(e.target).closest('.product-details__activation-message__tooltip-text').length) {
        if($('.product-details__activation-message__tooltip-text').is(":visible")) {
          _that.hideTip();
        }
      }
    };

    AcTooltip.prototype.displayTip = function(e) {
      e.stopPropagation();
      _that.el.find('.product-details__activation-message__tooltip-text').addClass('active');
      _that.el.find('.product-details__activation-message__tooltip-text').on('mouseleave', _that.hideTip);
      _that.el.find('.product-details__activation-message__tooltip').off();
      $(document).on('touchend', _that.hidemobileTip);

    };

    AcTooltip.prototype.hideTip = function() {
      _that.el.find('.product-details__activation-message__tooltip-text').removeClass('active');
      _that.el.find('.product-details__activation-message__tooltip').on('mouseenter touchend', _that.displayTip);
      _that.el.find('.product-details__activation-message__tooltip-text').off();
      $(document).off('touchend', _that.hidemobileTip);
    };

    AcTooltip.prototype.eventBind = function() {
      _that.el.find('.product-details__activation-message__tooltip').on('mouseenter touchend', _that.displayTip);
    };

    AcTooltip.prototype.init = function () {
      _that.eventBind();
    };
    return AcTooltip;
  }());


  $(document).ready(function () {

    var tooltip = new Tooltip($('.product-details__info-marketing'));
    tooltip.init();

    var acTooltip = new AcTooltip($('.product-details__activation-message'));
    acTooltip.init();
  });
}(jQuery, window));
(function ($, window, undefined) {
    'use strict';

    window.AEMapp = window.AEMapp || {};
    window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
    window.AEMapp.tvPdpConf.instances = window.AEMapp.tvPdpConf.instances || {};
  
    function handleVIPProgram($component, selector) {
        let self = this;
        self.$el = $component;
        self.selector = '.product-details__info-vipprogram';
        if (selector) self.selector = selector;
        
        
        self.setVipProgramEl = function(){
            if(window.AEMapp.tvPdpConf.isBundleBuilder()){
                $('.product-details__info-vipprogram').hide();
                return;
            }
            $('.vipprogram__warning p').hide();
            $('.vipprogram__benefits_cta_wrapper').removeClass('active');
            var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
            $('.product-details__info-vipprogram').show();
            $('.vipprogram__popup').hide();
            self.updateSummary('vipprogram',{sku : "", price:0})
            if(rewardsTier == "vip_advantage" && window.$S.isLogin()){
                $('.product-details__info-vipprogram').hide()
                return;
            }
            if($('.product-details__info-vipprogram').length > 0){
                getVipProgramPrice(); 
            }
        }
        
        function getVipProgramPrice(){
            const vipProgramSku = $('.product-details__info-vipprogram').attr('data-sku');
            const fetchPriceAPIURL = (window.location.host.indexOf('www.samsung.com') > -1 || window.location.href.indexOf('origincl.us.samsung.com')>-1) ? 'https://us.ecom.samsung.com/v4/price-engine/product-pricing/_fetch-current-price' : 'https://us.ecom-stg.samsung.com/v4/price-engine/product-pricing/_fetch-current-price';
            var outputPrice = 0;
            if(vipProgramSku){
                const requestData = {
                    sku: [vipProgramSku],
                };
                $.ajax({
                    url: fetchPriceAPIURL,
                    data: JSON.stringify(requestData),
                    type: 'POST',
                    dataType: 'json',
                    headers: {
                        "Content-Type": "application/json",
                    },
                }).then(function (price) {
                    if(price && price[0].sale_price && price[0].sale_price.value){
                        outputPrice = Number(price[0].sale_price.value).toFixed(2);
                    }
                    $('.vipprogram__benefits_cta_wrapper').attr('data-price',outputPrice);
                    $('.vipprogram__benefits_cta_wrapper').find('.price-amount').text(outputPrice);
                    $('.vipprogram__popup-header').find('.popup-price').text(outputPrice);
                }).fail(function (e) {
                    $('.vipprogram__benefits_cta_wrapper').attr('data-price',outputPrice);
                    $('.vipprogram__benefits_cta_wrapper').find('.price-amount').text(outputPrice);
                    $('.vipprogram__popup-header').find('.popup-price').text(outputPrice);
                    console.log(`error loading ${fetchPriceAPIURL}`);
                });
            }
        }

        self.bindEventListner = function(){
            //SCOM-36521
            //Allow guest user to have VIP benefit
            if(window.AEMapp.tvPdpConf.isBundleBuilder()) return;
            $('.vipprogram__benefits_cta_wrapper').on('click',benefitCTAHandler)
            $('.vipprogram__learncta').on('click',learnMoreHandler)
            $('.vipprogram__popup .icon-x').on('click',popupCloseHandler)
        }

        function learnMoreHandler(){
            $('.vipprogram__popup').show();
        }

        function popupCloseHandler(){
            $('.vipprogram__popup').hide();
        }

        function benefitCTAHandler(e){
            var element = e.currentTarget;
            var userLoggedIn = window.$S.isLogin();
            var price = $(element).attr("data-price");
            const vipProgramSku = $('.product-details__info-vipprogram').attr('data-sku');
            $('.vipprogram__warning p').hide();
            // COM-165643
            // if(!userLoggedIn){
            //     $('.vipprogram__warning p').show();
            //     return;
            // }
            if($(element).hasClass('active')){
                $(element).removeClass('active');
                self.updateSummary('vipprogram',{sku : "", price:0})
            }else{
                $(element).addClass('active');
                self.updateSummary('vipprogram',{sku : vipProgramSku, price:Number(price)})
            }
        }
        self.setVipProgramEl();
        self.bindEventListner();
    }
  

    window.AEMapp.tvPdpConf.instances.handleVIPProgram = handleVIPProgram;

  })(jQuery, window);

/* 
 *  Convert window.location.href to getLocationHref
 *  to resolve pdp on bundle builder page
 */

(function ($, window, undefined) {
  'use strict';

  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};

  window.AEMapp.tvPdpConf.isBundleBuilder = function() {
    return $('input[name=bundleMode]').val() == 'true' || window.location.href.indexOf('isBundle=true')>-1;
  }
  
  window.AEMapp.tvPdpConf.getLocationHref = function() {
    if (!window.AEMapp.tvPdpConf.isBundleBuilder()) {
      return window.location.href;
    }
    if (document.querySelector('input[name=bundleDomain]') && document.querySelector('input[name=bundleDomain]').value) {
      return document.querySelector('input[name=bundleDomain]').value;
    } else {
      return window.location.href;
    }
  }
}(jQuery, window));
(function ($, window, undefined) {
  'use strict';
  var getLocationHref = window.AEMapp.tvPdpConf.getLocationHref;
  
  /* samsung app bridge lib */
  /* same as common.edd */
  window.isBmsmIframe = window.location.search.indexOf('hub=true') > -1;
  window.disableOptions = function() {
    if(window.isBmsmIframe) {
      $('.selector-option').find('a').each(function(idx, item) {
        if($(item).data('stock') === 'N' && $(item).data('ecom') === 'N') {
          $(item).addClass('disable');
        }
      })
    }
  }

  var isFlutter = function() {
    console.log('Setting isFlutter value to ',  window.EcommFlutterClient);
    if(window.EcommFlutterClient) 
      return true;
    return false;
  }

  var isIOS = function() {
  	var deviceType = window.navigator.userAgent.toLowerCase();
  	return (deviceType.indexOf("iphone") > -1 || deviceType.indexOf("ipad") > -1) && deviceType.indexOf("safari") == -1;
  }

  var isAndroid = function() {
  	var deviceType = window.navigator.userAgent.toLowerCase();
  	return deviceType.indexOf("android") > -1;
  }

  var showCart = function() {
    deviceAdapter('showCart', [true]);
  }

  var showToast = function(msg) {
    deviceAdapter('showToast', [msg]);
  }

  var updateDisclaimer = function() {
    if ($('.section.disclaimer').length > 0) {
      _.each($('.disclaimer.section a'), function(el) {
        var link = $(el).attr('href');
        if (link == '/us/financing/') $(el).attr('href', 'samsungestore://openwebview#url=https://www.samsung.com/us/app/financing/');
        if (link == '/us/shop/access/tv/') $(el).attr('href', 'samsungestore://openwebview#url=https://www.samsung.com/us/app/shop/access/tv/');
      })
    }
  }

  var showSpinner = function() {
    if(isFlutter()) {
      deviceAdapter('showSpinner');
    }
    else if (isAndroid()) {
      deviceAdapter('showSpinner', []);
    }
    else if (isIOS()) {
      deviceAdapter('showSpinner', [false]);
    }
  }

  var hideSpinner = function() {
    if(isFlutter()) {
      deviceAdapter('hideSpinner');
    }
    else if (isAndroid()) {
      deviceAdapter('hideSpinner', []);
    }
    else if (isIOS()) {
      deviceAdapter('hideSpinner', [false]);
    }
  }

  var constructFlutterAction = function(methodName, params) {
    var action = {
      name: methodName
    }
    switch (methodName) {
      case 'addCompositeToCartV3':
        action.params = {"json": params}
        break;
      case 'addPromoCode': 
        action.params = {"promoCode": params}
        break;
      case 'getToken':
        action.params = {"refresh" : params[0]}
        break;
      case 'showCart':
        action.params = {"close" : params[0]}
        break;
      case 'showToast':
        action.params = {"msg" : params[0]}
        break;
      case 'configureOptionsMenu':
        action.params = {
          "hideSearchButton" : params[0],
          "hideCartButton": params[1]       
        }
        break;
      case 'configureBackV2':
          action.params = {
            "exit" : params[0], 
            "confirm" : params[1],
            "hide" : params[2],
            "overrideBackCallback" : params[3]      
        }
        break;
        case 'launchIAdvizeChat': 
        action.params = {
          "source": params
        }
        break;
        case 'OnAnalyticsEvent':
        action.params = {
          "json": {
            "eventName": "WEBVIEW_EVENT",
            "params": [ 
              {
                "name": "URL",
                "value": params[0],
                "type": "string"
              },
              {
                "name": "SKU",
                "value": params[1],
                "type": "string"
              }   
            ]
          }
        }
        break;
    }
    return action
  }

  var deviceAdapter = function(methodName, params) {
    // support only maximum to 2 params
    console.log('isFlutter value in deviceAdapter ', isFlutter);
    if(isFlutter() && methodName && window.EcommFlutterClient) {
      console.log('inside Flutter condition for methodname', methodName)
      console.log('window.EcommFlutterClient ', window.EcommFlutterClient)
    
      var action = constructFlutterAction(methodName, params)

      console.log(action);

      window.EcommFlutterClient.postMessage(JSON.stringify(action))

    } else if (
  		isAndroid() && 
  		methodName && 
  		window.EcommAndroidClient
  	) {
      if(methodName === "OnAnalyticsEvent") {
        let json = {
          'eventName' : 'WEBVIEW_EVENT',
          'params'  :
            [
              {
                "name": "URL",
                "value": params[0],
                "type": "string"
              },
              {
                "name": "SKU",
                "value": params[1],
                "type": "string"
              }   
            ]
          };
        if ( window && typeof window.EcommAndroidClient !== 'undefined' && typeof window.EcommAndroidClient.OnAnalyticsEvent !== 'undefined') {
          window.EcommAndroidClient.OnAnalyticsEvent(JSON.stringify(json));
        }
    } else if (Array.isArray(params))
	      // window.EcommAndroidClient[methodName].apply(null, params); // not supported by webview
        if (params.length == 1) {
          window.EcommAndroidClient[methodName](params[0]); // One Way IOS Communication
        } else if (params.length == 2) {
          window.EcommAndroidClient[methodName](params[0], params[1]); // One Way IOS Communication
        } else {
          window.EcommAndroidClient[methodName]();
        }
	    else {
	      window.EcommAndroidClient[methodName](params);
	    }
  	} else if (
  		isIOS() && 
  		methodName && 
  		window.webkit && 
  		window.webkit.messageHandlers && 
  		window.webkit.messageHandlers[methodName]
  	) {
  		if (Array.isArray(params)) {
        // window.webkit.messageHandlers[methodName]["postMessage"].apply(null, params); // not supported by webview
	      if (params.length == 1) {
	        window.webkit.messageHandlers[methodName]["postMessage"](params[0]); // One Way IOS Communication
	      } else if (params.length == 2) {
	        window.webkit.messageHandlers[methodName]["postMessage"](params[0], params[1]); // One Way IOS Communication
	      } else {
	        window.webkit.messageHandlers[methodName]["postMessage"]();
	      }
	    } else {
	      window.webkit.messageHandlers[methodName]["postMessage"](params); // Two Way IOS Communication
	    }
  	}
  }

  var enableShopAppUI = function() {
    if(getLocationHref().indexOf('/shopapp') > -1) {
      $('#pdp-page .title').css('display', 'none');
      //$('.product-details-v2 .product-details__thumbnail').css('display', 'none');
      $('.product-details-v2 .row .slick-dots').css('display', 'none');
      $('.product-details-v2 .product-details__info-description--line').css('display', 'none');
      //$('.product-details-v2 .product-details__photo').css('display', 'none');
      $('.product-details-v2 .product-details__banner').css('display', 'none');
      $('.chat-button-app').css('display', 'block');
      $('.product-details-v2 .product-details__info-title').css('display', 'none');
      $('.product-details-v2 .product-details__info-review').css('display', 'none');
      $('.product-details-v2 .product-details__summary--cards').css('display', 'none');
      $('.product-details-v2 .product-details__summary--cards').css('display', 'none');
      //$('#anchor-nav-v2 .product-top-nav__navigation').css('display', 'none');
      $('.product-anchor-nav-v2 .tv-offer-bar__contentwrap').css({'height':'auto', 'line-height':'1.5', 'padding': '12px 0'});
      updateDisclaimer();
    }
  }


  if(isFlutter()) {
    window.EcommFlutterClient.onmessage = function (event) {
      const data = event && event.data
      const parsedData = data && JSON.parse(data);
      if(parsedData.name == "addCompositeToCartStatus") {
        window.EcommFlutterClient.postMessage(JSON.stringify({name: 'showCart'}));
      } else if(parsedData.name == "onTargetingAvailable") {
        if(parsedData.targetAvailable) {
          deviceAdapter("launchIAdvizeChat", "source")
        }
      } else if (parsedData.name == "resetToken") {
        window.resetToken(parsedData.data.error, parsedData.data.signedIn, parsedData.data.token, parsedData.data.siteId, parsedData.data.storeDisplayName );
      }
    };  
  }

  var configShopApp = function() {
    if (!window.addPromoCodeSuccess || typeof window.addPromoCodeSuccess != 'function') {
  		window.addPromoCodeSuccess = function() {
  			showCart();
  		}
  	}
		if (!window.addPromoCodeError || typeof window.addPromoCodeError != 'function') {
  		window.addPromoCodeError = function(errorCode, reason, message) {
  			window.AEMapp.tvPdpConf.promoResult = message;
  			showToast(msg);
  		}
  	}
    if(!window.addPromoCodeStatus || typeof window.addPromoCodeStatus != 'function') {
      window.addPromoCodeStatus = function(status, errorCode, reason, message) {
        if(status) {
          showCart();
        } else {
          window.AEMapp.tvPdpConf.promoResult = message;
          showToast(message);
        }
      }
    }

    if (!window.addCompositeToCartStatus || typeof window.addCompositeToCartStatus != 'function') {
      window.addCompositeToCartStatus = function(status, code, reason, message) {
        if (status) {
          if (!window.multiview_promoCode) {
            showCart();
          } else {
            deviceAdapter('addPromoCode', window.multiview_promoCode);
            delete window.multiview_promoCode;
          }
        }
      }
    }

  	if (!window.addCompositeToCartSuccess || typeof window.addCompositeToCartSuccess != 'function') {
  		window.addCompositeToCartSuccess = function() {
  			if (!window.multiview_promoCode) {
  				showCart();
  			} else {
  				deviceAdapter('addPromoCode', window.multiview_promoCode);
  				delete window.multiview_promoCode;
  			}
  		}
  	}
  	if (!window.addCompositeToCartError || typeof window.addCompositeToCartError != 'function') {
  		window.addCompositeToCartError = function(err, reason, msg) {
  			window.AEMapp.tvPdpConf.cartResult = msg;
  			showToast(msg);
  		}
  	}
    if (!window.resetToken || typeof window.resetToken != 'function') {
      window.resetToken = function(err, signedIn, token, domain, port) {
        var cookieOption = {path: '/', domain: '.samsung.com'};
        $.cookie('jwt_USA', token, cookieOption);
        $.cookie('taccessrtype', 'emailDomain', cookieOption);
        if(isShopApp()) {
          $.cookie('tmktid', domain, cookieOption);
          $.cookie('tsgmt', 'Workplace', cookieOption);
          window.productAnchorNavV2.reInit();
        }
      }
    }

 /*   if (!window.receiveToken || typeof window.receiveToken != 'function') {
      window.receiveToken = function(err, signedIn, token, siteId) {
        var cookieOption = {path: '/', domain: '.samsung.com'};
        $.cookie('jwt_USA', token, cookieOption);
  
        $.cookie('tmktid', siteId, cookieOption);
        $.cookie('taccessrtype', 'emailDomain', cookieOption);
        window.AEMapp.EPP.loadPrice({marketId: true});
      }
    }*/
    if (!window.receiveSiteId  || typeof window.receiveSiteId  != 'function') {
      window.receiveSiteId  = function(siteId) {
        var cookieOption = {path: '/', domain: '.samsung.com'};
        $.cookie('tmktid', siteId, cookieOption);
        $.cookie('taccessrtype', 'emailDomain', cookieOption);
        window.AEMapp.EPP.loadPrice({marketId: true});
      }
    }

    deviceAdapter('configureOptionsMenu', [false, false]);
    // window.EcommAndroidClient.configureOptionsMenu(false, false)
    // window.EcommAndroidClient.configureOptionsMenu(...[false, false])
    // window.EcommAndroidClient['configureOptionsMenu'].apply(null, [false, false])
    deviceAdapter('getToken', [false]);
  }

  var isIAdvizeAvailable = function() {
    deviceAdapter('isIAdvizeAvailable')
  }

  var sendAnalytics = function(url, modelCode) {
    deviceAdapter('OnAnalyticsEvent', [url, modelCode])
  }

  var isShopApp = function() {
    return getLocationHref().indexOf('/shopapp') > -1;
  }



	window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.deviceAdapter = {
    isFlutter: isFlutter,
  	isIOS : isIOS,
  	isAndroid : isAndroid,
  	deviceAdapter : deviceAdapter,
    enableShopAppUI: enableShopAppUI,
    isShopApp: isShopApp,
    showSpinner: showSpinner,
    hideSpinner: hideSpinner,
    configShopApp: configShopApp,
    isIAdvizeAvailable: isIAdvizeAvailable,
    sendAnalytics: sendAnalytics
  }

}(jQuery, window));
/*  TV enhancement
 *
 *  Installation
 *  TV enhancement from v1
 *  substitution
 *  Try Before You Buy
 *  TV Bezel
 *
 */

(function ($, window, undefined) {
  'use strict';

  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.instances = window.AEMapp.tvPdpConf.instances || {};
  var getLocationHref = window.AEMapp.tvPdpConf.getLocationHref;

  function Installation($component, selector) {
  	var self = this;
    self.$el = $component;
  	self.selector = '.product-details__info-install';
    self.lowestPrice = 0;
    self.hasPromo = false;
  	if (selector) self.selector = selector;
    self.wallInstallTotalPrice = 0
    var modelCode = self.$el.find('.product-details__info-sku').text();
    var installFreeCodes = [
      //'QN75QN95BAFXZA', 'QN65QN95BAFXZA', 'QN55QN95BAFXZA', 'QN85LS03BAFXZA', 'QN75LS03BAFXZA', 'QN65LS03BAFXZA', 'QN55LS03BAFXZA', 'QN50LS03BAFXZA', 'QN85QN85BAFXZA'
    ]
    if (installFreeCodes.includes (modelCode)) {
      self.isInstallOffer = true
    }

    self.originalFreePrice = 120;
    self.originalFreePrice$ = '$120.00';
    if(modelCode=='QN43LS03BAFXZA') {
      self.originalFreePrice = 80;
      self.originalFreePrice$ = '$80.00';
    }

    var getInstallPrice = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      var requestData = [{
        'quantity': 1,
        'sku': modelCode,
        'line_items': []
      }];

      var childLineItem = [];
      var childLineItemSkus = [];
      if($('.install__enroll-option[data-value=N]').data('install-model')){

        childLineItem.push({
          'quantity':1,
            'sku': $('.install__enroll-option[data-value=N]').data('install-model')
        })

      }
      _.each(self.$install.find('.install__card'), function(el) { 
        if($(el).data('mdlcd')){
          childLineItem.push({
            'quantity': 1,
            'sku': $(el).data('mdlcd')
          });
          childLineItemSkus.push($(el).data('mdlcd'));
        }
      })

      if (childLineItem.length > 0) {
        requestData[0].line_items = childLineItem;

        if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp() || window.location.href.indexOf('shopapp') > -1) {
					var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
				} else {
					var apiUrl = $S.arbitrate() + '?siteId=';
				}

        var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
        if ($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) {
          requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
        } 

        $.ajax({
          url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
          data: JSON.stringify(requestData),
          type: 'POST',
          dataType: 'json',
          'headers': {
            'content-type': 'application/json'
          }
        }).then(function(res) {
          var lineItem =  res.line_items[Object.keys(res.line_items)[0]];
          _.each(lineItem.line_items, function(ltm) {
            if(ltm.sku_id.indexOf('L-INST') > -1 ){
              $('.install__enroll-option[data-value=N]').find('.install__enroll-price').text('$'+ ltm.line_item_cost.display_price)
              if(ltm.line_item_cost.regular_price != ltm.line_item_cost.display_price){
                self.$install.find('.install__enroll-option[data-value=N] .install__enroll-price-product').text('$' + ltm.line_item_cost.regular_price);
                self.$install.find('.install__enroll-option[data-value=N] .install__enroll-price-product').show();
                self.hasPromo = true
              }
              self.originalFreePrice = ltm.line_item_cost.regular_price
              self.originalFreePrice$ = '$' + ltm.line_item_cost.regular_price
              self.installPrice = ltm.line_item_cost.display_price
            }
            else if(!childLineItemSkus.includes(ltm.sku_id)) return;
            if (ltm.sku_id == lineItem.sku_id) {
              ltm = lineItem;
            }
            $('.install__card[data-mdlcd="' + ltm.sku_id + '"]').find('.install__card-promo').text('$' + ltm.line_item_cost.display_price);
            $('.install__card[data-mdlcd="' + ltm.sku_id + '"]').find('.install__card-msrp').text('$' + ltm.line_item_cost.regular_price);
            if (ltm.line_item_cost.display_price == ltm.line_item_cost.regular_price) {
              $('.install__card[data-mdlcd="' + ltm.sku_id + '"]').find('.install__card-msrp').hide();
            }
            if (ltm.line_item_cost.display_price == 0) {
              $('.install__card[data-mdlcd="' + ltm.sku_id + '"]').find('.install__card-promo').hide();
              $('.install__card[data-mdlcd="' + ltm.sku_id + '"]').find('.install__card-price').hide();
            }
            self.lowestPrice = self.lowestPrice == 0 ? ltm.line_item_cost.display_price : Math.min(self.lowestPrice, ltm.line_item_cost.display_price);
          })
          getTotalInstallPrice();
        })
      }
    }

    var getTotalInstallPrice = function() {
      var price = '';
      var selectedCard = self.$install.find('.install__card.selected');
      if (selectedCard.length > 0) {
        price = self.installPrice + Number(selectedCard.find('.install__card-promo').text().replace(/[^0-9\.]+/g, ''));
        if (self.isFree|| self.hasPromo) {
          self.$install.find('.install__enroll-option[data-value=Y] .install__enroll-price-product').text('$' + (price + self.originalFreePrice).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
          self.$install.find('.install__enroll-option[data-value=Y] .install__enroll-price-product').show();
        }
        price = '$' + price.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      } else {
        price = self.installPrice + self.lowestPrice;
        if (self.isFree || self.hasPromo) {
          self.$install.find('.install__enroll-option[data-value=Y] .install__enroll-price-product').text('From $' + (price + self.originalFreePrice).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
          self.$install.find('.install__enroll-option[data-value=Y] .install__enroll-price-product').show();
        }
        price = 'From $' + price.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      }
      self.$install.find('.install__enroll-option[data-value=Y] .install__enroll-price').text(price);
    }

    self.setInstallEl = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      //HARDCODE flag for NEO qled 8k pre-order
      self.isNEO = getLocationHref().indexOf('neo-qled-8k') > -1 && $('.product-details__info-add').text().toLowerCase() == 'pre-order';
      self.isTerrace = getLocationHref().indexOf('the-terrace-qled') > -1;
      self.isNewNeo8k = ['QN65QN800BFXZA', 'QN75QN800BFXZA', 'QN75QN800BFXZA'].includes(modelCode);
      self.isFrame2022 = ['QN75LS03BAFXZA', 'QN65LS03BAFXZA', 'QN55LS03BAFXZA', 'QN50LS03BAFXZA', 'QN43LS03BAFXZA', 'QN32LS03BBFXZA'].includes(modelCode);
      self.isWallMount = window.location.href.indexOf('us/displays/direct-view-led/ia-series/the-wall') >-1;
      self.noInstall = (modelCode=='QN32Q60CAFXZA' || modelCode =='UN32M4500BFXZA')
      self.isFree = self.isTerrace || window.isInstallServiceFree || self.isInstallOffer;
      //self.isNEO || 
      self.$install = self.$el.find(self.selector);
      _.each(self.$install.find('.install__card'), function(card) {
        if ($(card).data('ecom-flag')!='Y' || $(card).data('stock-flag')=='N') {
          $(card).remove(); //remove out of stock mounts
        }
      });

      if (window.AEMapp.tvPdpConf.summaryObj.install && window.AEMapp.tvPdpConf.summaryObj.install.mount) {// pre-selet the mount
        if (self.$install.find('.install__card[data-mdlcd="' + window.AEMapp.tvPdpConf.summaryObj.install.mount + '"]').length > 0) { // switch family option
          self.$install.find('.install__card[data-mdlcd="' + window.AEMapp.tvPdpConf.summaryObj.install.mount + '"]').addClass('selected');
        } else {
          self.updateSummary && self.updateSummary('install', '');// reset
        }
      }

      self.$mounts = self.$install.find('.install__card');
      var isFrameTV = self.$el.find('.product-details__info-title').text().toLowerCase().indexOf('frame') > -1;
      var isOled = self.$el.find('.product-details__info-title').text().toLowerCase().indexOf('oled') > -1;
      var isQled = self.$el.find('.product-details__info-title').text().toLowerCase().indexOf('qled') > -1;
      // if (Cookies('tvinstall') == 'true') {
        var shownSkus = [
          'QN55QN90AAFXZA',
          'QN55QN85AAFXZA',
          'QN60Q60AAFXZA',
          'QN55Q80AAFXZA',
          'QN55Q80AAFXZA',
          'QN43Q60AAFXZA',
          'QN50Q60AAFXZA',
          'QN55Q60AAFXZA'
        ]
        var modelCode = self.$el.find('.product-details__info-sku').text();
      
        self.$install.find('.install__wrapper').toggle((self.$mounts.length > 0 || isFrameTV || isQled || isOled || shownSkus.includes(modelCode) || self.isWallMount)&& !self.noInstall);
        if($('.product-details__info-recycle').find('.recycle__wrapper').attr('style') == 'display: block;'){
          self.$install.find('.install__wrapper').hide()
          }
        self.$install.find('.install__enroll-option[data-value=Y]').toggle(self.$mounts.length > 0 && !isFrameTV);
        if (isFrameTV) {
          var mountText = "Frame TV comes with no gap wall mount (included)"
          var newFrames2021 = [
            'QN75LS03AAFXZA',
            'QN65LS03AAFXZA',
            'QN55LS03AAFXZA',
            'QN50LS03AAFXZA',
            'QN43LS03AAFXZA'
          ]
          var newFrame2022 = ['QN75LS03BAFXZA', 'QN65LS03BAFXZA', 'QN55LS03BAFXZA', 'QN50LS03BAFXZA', 'QN43LS03BAFXZA', 'QN32LS03BBFXZA'];
          if (newFrames2021.includes(modelCode)) {
            mountText = 'Frame TV comes with Slim Fit Wall Mount (included)'
          }
          if (newFrame2022.includes(modelCode) ) {
            mountText = 'Frame TV comes with Slim-Fit Wall Mount (included)'
          }
          self.$install.find('.install__frame').text(mountText);
          self.$install.find('.install__frame__text').text('Add TV mounting service');
        }
        _.each(self.$install.find('.install__enroll-option .install__enroll-price, .install__enroll-option .install__enroll-price-product'), function(el) {
          $(el).text($(el).text().replace(/\s/g, ''));
        });
        if (self.isFree) {
          self.$install.find('.install__enroll-option[data-value=N] .install__enroll-price').text('FREE');
          self.$install.find('.install__enroll-option[data-value=N] .install__enroll-price-product').text(self.originalFreePrice$);
          self.$install.find('.install__enroll-option[data-value=N] .install__enroll-price-product').show();
          self.$install.find('.install__enroll-option[data-value=Y] .install__enroll-text').html('Add TV mounting +<br> Free wall mount service');
        }
        self.installPrice = Number(self.$install.find('.install__enroll-option[data-value=N] .install__enroll-price').text().replace(/[^0-9\.]+/g, ''));
        self.installSku = self.$install.find('.install__enroll-option[data-value=N]').data('install-model');
        getInstallPrice();
        self.$install.find('.install__card-deliver').matchHeight();
        self.$install.find('.install__card-title').matchHeight();
      // }
    }

    self.bindInstallEvent = function() {
      self.$install.on('click', '.install__enroll-option', function(e, noScroll) {
        $(this).siblings().removeClass('selected')
        self.$install.find('.install__more').toggle(self.$install.find('.install__next .install__card').length > 0);
        self.$install.find('.install__next').hide();
        if ($(this).data('value') == 'Y') {
          self.tagging && self.tagging.install('select', 'select a wall mount');
          if ($(this).hasClass('selected')) {
            if (self.$install.find('.install__selection').is(':visible')) {
              self.$install.find('.install__selection').slideUp();
              if (window.AEMapp.tvPdpConf.summaryObj.install && !window.AEMapp.tvPdpConf.summaryObj.install.mount) {
                self.$install.find('.install__enroll-option[data-value=N]').addClass('selected');
              }
              if (!window.AEMapp.tvPdpConf.summaryObj.install || !window.AEMapp.tvPdpConf.summaryObj.install.mount) {
                $(this).removeClass('selected');
              }
            } else {
              self.$install.find('.install__selection').slideDown();
            }  
          } else {
            $(this).addClass('selected');
            self.$install.find('.install__selection').slideDown();
          }
        } else {
          if(!self.isWallMount){
            $(this).toggleClass('selected');
          }
          self.$install.find('.install__selection').slideUp();
          self.tagging && self.tagging.install('own', 'I have my own mount');
          if ($(this).hasClass('selected') && !self.isWallMount) {
            self.$mounts.removeClass('selected');
            var installSummary = { modelCode: self.installSku, price: '$' + self.installPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') };
            if (self.isFree) installSummary.totalPrice = self.originalFreePrice$;
            self.updateSummary && self.updateSummary('install', installSummary)
            getInstallPrice();
            if (noScroll) return;
            self.gotopage && self.gotopage(self.$install.next('.product-details__section'));
          } else {
            self.updateSummary && self.updateSummary('install', '');
          }
        }
      });

      self.$install.on('click', '.install__card', function() {
        $(this).siblings().removeClass('selected');
        $(this).toggleClass('selected');
        // self.$install.find('.install__main').slideUp();
        // self.$install.find('.install__result').slideDown();
        if ($(this).hasClass('selected')) {
          var promoPrice = self.installPrice + Number($(this).find('.install__card-promo').text().replace(/[^0-9\.]+/g, ''));
          var totalPrice = self.installPrice + Number($(this).find('.install__card-msrp').text().replace(/[^0-9\.]+/g, ''));
          if (self.isFree) {
            totalPrice += self.originalFreePrice;
          }
          var installRes = {
            modelCode: self.installSku, 
            price: '$' + promoPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','),
            totalPrice: '$' + totalPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','),
            mount: $(this).data('mdlcd')
          };
          self.updateSummary && self.updateSummary('install', installRes);
          self.gotopage && self.gotopage(self.$install.next('.product-details__section'));
        } else {
          self.updateSummary && self.updateSummary('install', '');
        }
        // self.$install.find('.install__result .name').text($(this).find('.install__card-title').text().trim());
        // self.$install.find('.install__result .price').text('$' + promoPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
        getTotalInstallPrice();
        self.tagging && self.tagging.install('choose', $(this).find('.install__card-title').text());
      });

      // self.$install.on('click', '.install__edit', function() {
      //   self.$install.find('.install__main').slideDown();
      //   self.$install.find('.install__result').hide();
      //   self.updateSummary && self.updateSummary('install', '');
      //   self.$install.find('.install__enroll-option').removeClass('selected');
      //   self.$install.find('.install__enroll-option').removeClass('selected');
      //   getTotalInstallPrice();
      //   self.tagging && self.tagging.install('edit', 'edit');
      // });

      self.$install.on('click', '.install__more', function() {
        $(this).hide();
        self.$install.find('.install__next').slideDown();
      });

      // if (self.isFree && !self.isNewNeo8k && !self.isFrame2022) {
      //   $('.install__enroll-option.left').trigger('click', true);
      // }

      
      var wallInstall = {}
      
      self.$install.on('click', '.yes-option', function() {
        if(!$(this).hasClass('selected')){
          $(this).addClass('selected')
          $('.add-on-background').show()
          self.wallInstallTotalPrice += Number($(this).data('price'))
          $('.finalPrice').text('$'+ self.wallInstallTotalPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','))
          wallInstall = {
            modelCode : $(this).data('mdlcd'),
            name:'Samsung hardware intallation',
            price: $(this).data('price'),
            suggested: $(this).data('price')
          }
        }
      })

      self.$install.on('click', '.install__enroll-option.right.wall', function() {
        $('.yes-option').removeClass('selected')
        $('.add-on').removeClass('selected')
        $('.add-on-background').hide()
        $('.wall-result').hide()
        $('.install-add-on-section').hide()
        $('.install__result-text.add-on-result.add-on-text').remove()
        self.wallInstallTotalPrice = 0
        self.updateSummary && self.updateSummary('wallInstall', '');
      })


      self.$install.on('click', '.add-on', function() {
        if(!$(this).hasClass('selected')){
          $(this).addClass('selected')
          self.wallInstallTotalPrice += Number($(this).data('price'))
          $('.finalPrice').text('$'+ self.wallInstallTotalPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','))
        }else{
          $(this).removeClass('selected')
          self.wallInstallTotalPrice -= Number($(this).data('price'))
          $('.finalPrice').text('$'+ self.wallInstallTotalPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','))
        }
        wallInstall.addOn = []
        $('.install__result-text.add-on-result.add-on-text').remove()
        var addOnTotal = 0;
        _.each($('.add-on.selected'),function(ele){
          var addOnResultText = $('<div>').addClass('install__result-text add-on-result add-on-text')
          addOnResultText.text($(ele).data('name'))
          addOnResultText.insertBefore('.install__result-text.add-on-result.price')
          wallInstall.addOn.push({
            modelCode : $(ele).data('mdlcd'),
            price:$(ele).data('price')
          })
          addOnTotal += Number($(ele).data('price'))
          $('.install__result-text.add-on-result.price span').text(addOnTotal.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','))
        })
      })

      self.$install.on('click', '.wall-cta .cta-text', function() {
        $('.wall-result').css('display','block');
        $('.wall-title-error').css('display','none');
        $('.add-on-background').css("display", "none");
        if($('.add-on.selected').length>0){

          $('.install-add-on-section').css("display", "block");
        }
        self.updateSummary && self.updateSummary('wallInstall', wallInstall);
      });


      self.$install.on('click', '.install__edit', function() {
        $('.wall-result').css('display','none');
        $('.add-on-background').css("display", "block");
      });

      $('.product-details__info-cta').on('click', function () {
        if ($('.wall-result').css('display') != 'block' && $('.yes-option').hasClass('selected') && isWallMount) {
          $('.wall-title-error').css('display','block');
          return false;
        }
      }); 



    }
    
    self.setInstallEl();
    self.bindInstallEvent();
  }

  window.AEMapp.tvPdpConf.instances.Installation = Installation;
}(jQuery, window));

// SBC-11598
(function ($, window, undefined) {
  var getLocationHref = window.AEMapp.tvPdpConf.getLocationHref;

  function checkTVEnhanceEX() {
    return getLocationHref().indexOf('televisions-home-theater/tvs') > -1;
  }

  function checkIfAvailable(option) {
    return option.attr('data-ecom') === 'Y' && option.attr('data-stock') && option.attr('data-stock') !== 'N'
  }

  function pdpEnhancementTV() {
    if (checkTVEnhanceEX()) {
      var options = $('.option-value.Size');
      options.each(function() {
        var option = $(this);
        if (checkIfAvailable(option)) {}
        else option.css('background', '#eee');
      })
      // SBC-11774
      var eol = $('.product-details__info-results').attr('data-eol');
      //
      var cta = $('[iswheretobuycta]');
      if (cta.length === 0) cta = $('.product-details__info-results .product-details__info-add');
      if (cta.attr('iswheretobuycta') === 'Y' || eol === 'Y') {
        if (cta.attr('iswheretobuycta') === 'Y') {
          var wtbLink = cta.attr('href');
          var wtbCTA = '<div class="store-locator-container store-locator-wtb">' +
          '<div class="store-locator-image"><img loading="lazy" src="//image-us.samsung.com/SamsungUS/home/store-locator/icon_reserve.svg"></div>' + 
          '<div class="text store-locator-text">' +
          '<a class="store-locator-label" href="'+ wtbLink + '">Where to buy</a>' +
          '</div></div>';
          $('.product-details__cta-holder-wrapper').append(wtbCTA);
        }

        var ctaText = $('.product-details__info-results').attr('data-ctatext');
        var ctaURL = $('.product-details__info-results').attr('data-ctaurl');

        if (ctaText && ctaURL) {
          cta.attr('href', ctaURL);
          cta.html(ctaText);
          cta.attr('data-cta', ctaText);

          //tag
          cta.removeAttr('data-link_id');
          cta.removeAttr('data-link_meta');
          cta.removeAttr('data-link_position');
          cta.removeAttr('data-link_cat');
          var sku = $('.product-details__info-sku').html();
          cta.click(function() {
            utag.link && utag.link({
              link_cat: ctaText,
              link_id: 'shop_' + sku,
              link_meta: 'link_name:' + ctaText,
              link_position: sku
            });
          })
          
          var navbar = $('.product-anchor-nav-v2 .product-top-nav__cta');
          navbar.attr('href', ctaURL);
          navbar.html(ctaText);
          navbar.click(function() {
            utag.link && utag.link({
              link_cat: ctaText,
              link_id: 'shop_' + sku,
              link_meta: 'link_name:' + ctaText,
              link_position: sku
            });
          });

          var errorMessage = 'Your preferred size is currently not available. Check out our newest model.';
          if (ctaURL.indexOf('tvs/all-tvs') > -1) errorMessage = 'Your preferred TV size is currently not available but you will be delighted by our 2020 premium TVs line-up in similar size.';
          var error = '<p class="tverror">' + errorMessage + '</p>';
          $('.tverror').remove();
          $(error).insertBefore(cta);
          try {
            if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()) {
              var shopAppUrl = ctaURL;
              if (ctaURL.indexOf('tvs/all-tvs') > -1) {
                shopAppUrl = 'samsungestore://opencategory#category=SEEALL-TV';
              } else {
                shopAppUrl = ctaURL.replace(/\/shopapp\/$/, '/').replace(/\/$/, '/shopapp/');
              }
              cta.attr('href', shopAppUrl);
              navbar.attr('href', shopAppUrl);
              cta.click(function(e) {
                e.preventDefault();
                window.location.href = shopAppUrl;
              })
              navbar.click(function(e) {
                e.preventDefault();
                window.location.href = shopAppUrl;
              })
            }
          } catch(e) {

          }
        }
      }
    }
  }

  pdpEnhancementTV();
  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.pdpEnhancementTV = pdpEnhancementTV;
}(jQuery, window));


(function ($, window, undefined) {
  'use strict';

  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.instances = window.AEMapp.tvPdpConf.instances || {};
  var getLocationHref = window.AEMapp.tvPdpConf.getLocationHref;

  function Substitution() {
    $(window).off('substitutionUpdateTV');
    $(window).on('substitutionUpdateTV', function(event, actionType, date) {
      if(window.isBmsmIframe || $('input[name=bundleMode]').val() == 'true') return;
      var self = this;
      self.selector = '.product-details-v2';
      self.$el = $(self.selector);
      self.$substituteSection = self.$el.find('.product-details__info-substitute__wrap');
      self.$substitution = self.$el.find('.product-details__info-substitute');
      self.$result = self.$el.find('.product-details__info-results');
      self.$alerts = self.$el.find('.product-details__info-substitute__alerts');
      self.$substituteContainer = self.$el.find('.product-details__info-substitute__detail');
      self.$subscribed = self.$el.find('.product-details__info-substitute__alerts_subscribed-wrapper');
      self.$emailError = self.$alerts.find('.product-details__info-substitute__alerts_email-error');
      self.sku = self.$el.find('.product-details__info-sku').html();
      self.eddFlag = false;
      self.displayNotification = false;
      self.shopSimilarUrl = "";
      self.cnt = 3;

      var ecom = self.$result.data('ecom');
      var stock = self.$result.data('stock');
      var eol = self.$result.data('eol');
      var buyable = ecom == 'Y' && stock != 'N';
      var oos = !buyable;

      function cleanUpSectionElements() {
        self.$substituteContainer.empty();
        self.$substitution.find('.product-details__info-substitute__detail__shop_similar').empty();
      }

      function init(checkEddValid) {
        // https://us3.ecom-qa.samsung.com/v4/configurator/recommended-substitute-products?experience=A&recs_area=cfgtr_rec&postal_code=90001&skus=SM-G991UZWATMB&substitute_count=2
        var apiBaseUrl = location.href.indexOf('www.samsung.com') > -1 ? 'https://us.ecom.samsung.com/v4/configurator/recommended-substitute-products?experience=A&recs_area=cfgtr_recs' : 'https://us.ecom.samsung.com/v4/configurator/recommended-substitute-products?experience=A&recs_area=cfgtr_recs';
        var zipCode = window.summaryObj && window.summaryObj.zipCode || 10001;
        var substituteApiUrl = apiBaseUrl + '&postal_code=' + zipCode + '&skus=' + self.sku + '&substitute_count=' + self.cnt;
        // substituteApiUrl = 'https://us3.ecom-qa.samsung.com/v4/configurator/recommended-substitute-products?experience=A&recs_area=cfgtr_rec&postal_code=90001&skus=SM-G991UZWATMB';
        customizeNeoAlerts();

        $.ajax({
          url: substituteApiUrl,
          type: 'GET',
          dataType: 'json',
          'headers': {
            'content-type': 'application/json'
          }
        })
          .then(function (data) {
            if (checkEddValid && checkEdd(data) || !checkEddValid) {
              // Anyway, even substitution data N/A, need to show the alert section
              if (data.products.length) {
                $('.product-details__info-substitute__intro__title').show();
                $('.product-details__info-substitute__intro__subtitle').show();
                $('.product-details__info-substitute__alerts').removeClass('empty-data');
              }
              else {
                $('.product-details__info-substitute__intro__title').hide();
                $('.product-details__info-substitute__intro__subtitle').hide();
                $('.product-details__info-substitute__alerts').addClass('empty-data');
              }
              cleanUpSectionElements();
              self.$substituteSection.show();
              createSubstitution(data);
              bindSubstitutionEvents();
              sectionsControl();
            }
          })
        .fail(function(err) {
          console.log('get substituteApiUrl failed', err);
        });
      }

      function customizeNeoAlerts() {
        var neoSkuList = ['QN55QN90BAFXZA','QN50QN90BAFXZA','QN85QN85BAFXZA','QN75QN85BAFXZA','QN65QN85BAFXZA','QN55QN85BAFXZA'];
        //var m8MonitorList = ['LS32BM801UNXGO','LS32BM80BUNXGO','LS32BM80PUNXGO','LS32BM80GUNXGO'];
        if(neoSkuList.includes(self.sku)){
          $('.product-details__info-substitute__alerts_header_title').text('Get notified');
          $('.product-details__info-substitute__alerts_header_description').text('Sign up to get alerts when your new Samsung Neo TV becomes available.');
          $('.product-details__info-substitute__alerts_cta button').text('Sign up');
          var disclaimer = "<strong>Let's keep in touch!</strong>Tick the box to receive promotional emails and texts. By signing up to receive texts, you agree to receive recurring automated promotional and personalized marketing text messages (e.g. cart reminders) from Samsung at the cell number used when signing up. Consent is not a condition of any purchase. Reply HELP for help and STOP to cancel. Msg frequency varies. Msg and data rates may apply. <a href='https://attnl.tv/t/QAP'>View Terms</a> & <a href='https://attnl.tv/p/QAP'>Privacy</a>.";
          $('.product-details__info-substitute__alerts_disclaimer_info').html(disclaimer);
        }
        // if(m8MonitorList.includes(self.sku)){ //replace notified with reserve
        //   $('.product-details__info-substitute__alerts_header_title').text('Be among the first to get the Samsung M8 Smart Monitor with Streaming TV');
        //   $('.product-details__info-substitute__alerts_header_title').css('width', '70%');
        //   $('.product-details__info-substitute__alerts_header_description').text('Switching off is Overrated.');
        //   $('.product-details__info-substitute__alerts_cta button').text('Reserve Now');
        //   $('.product-details__info-substitute__alerts_subscribed-info-title').text('Thank you for reserving the 32" M8 Smart Monitor. Watch for an email to complete your preorder and access your exclusive Samsung.com offer.')
        // }
      }

      function checkEdd(data) {
        if (data && data.products && data.products.length) {
          var products = data.products;

          for (var i = 0; i < products.length; i++) {
            try {
              var eddDate = products[i].expected_available_delivery_dates && products[i].expected_available_delivery_dates.delivery_dates && products[i].expected_available_delivery_dates.delivery_dates[0].delivery_slots && products[i].expected_available_delivery_dates.delivery_dates[0].delivery_slots[0].earliest_delivery_date;
              if (eddDate === undefined || !threeWeeksOut(eddDate)) {
                self.eddFlag = true;
                return true;
              }
            } catch (error) {
              console.log('----checkEdd for substitution products error----', error);
              self.eddFlag = true;
              return true;
            }
          }
        }

        return false;
      }

      function getRatingHtml(ratings, reviews) {
        var ratingHTML = '';
        var reviewCount = parseFloat(reviews || '0');
        var rating = parseFloat(ratings.toFixed(2));
        var ratingStar = '';
        for (var i = 0; i < Math.floor(rating); i++) {
          ratingStar +=
            '<div class="rating"><span class="icon-star-empty shape"></span><span class="icon-star-filled fill" style="width:100%"></span></div>';
        }
        var ratingDiff = Number((ratings - Math.floor(ratings)) * 100).toFixed(0) + "%";
        var diffStr = '<div class="rating"><span class="icon-star-empty shape"></span><span class="icon-star-filled fill" style="width:$ratingDiff"></span></div>';
        diffStr = diffStr.replace('$ratingDiff', ratingDiff);
        ratingStar += diffStr;

        for (var k = 0; k < 5 - Math.floor(rating) - 1; k++) {
          ratingStar +=
            '<div class="rating"><span class="icon-star-empty shape"></span><span class="icon-star-filled fill" style="width:0%"></span></div>';
        }

        ratingHTML += '<div class="product-details__info-substitute__detail__review">' +
          ratingStar +
          '<span class="product-details__info-substitute__detail__review-rating">' + rating + '</span>' +
          '<span class="product-details__info-substitute__detail__review-count">(' + reviewCount + ')</span>' +
          '</div>';
        return ratingHTML;
      }


      function createSubstitution(data) {
        if(data && data.products && data.products.length) {
          var products = data.products;
          var substituteCta = "<div class='product-details__info-substitute__detail__shop_similar'><a class='cta-button' href='$shopSimilarHref'>shop similar products</a></div>";
          
          for (var i = 0; i < products.length; i++) {
            if (products[i].sku) {
              var substituteTemplate = "<div class='product-details__info-substitute__detail__item epp-product' data-eppmdlcd='$eppmdlcd' data-stock='Y' data-ecom='Y' data-sortorder='2' data-option-value='$eppmdlcd'> <div class='product-details__info-substitute__detail__item--inner '><div class='product-details__info-substitute__detail__img'> <img src='$img_src' alt=''> </div> <div class='product-details__info-substitute__detail__bottom'> <div class='product-details__info-substitute__detail__bottom-title'> $title </div> <div class='product-details__info-substitute__detail__bottom-sku'> $eppmdlcd </div> <div class='product-details__info-substitute__detail__bottom-review'>$ratingReview</div> <div class='product-details__info-substitute__detail__bottom-price'> <span itemprop='priceCurrency' content='USD'>$</span><span class='epp-price'>$eppPrice</span><span class='delete epp-savings-section' style='display: none'> <span itemprop='priceCurrency' content='USD'>$</span><span class='epp-suggested'>$eppSuggest</span> </span> </div><div class='product-details__info-substitute__detail__delivery_date'>$deliveryDate</div> <a data-link_id='substitute_$eppmdlcd' data-link_meta='link_name: substitute_$eppmdlcd' data-link_position='substitute_$eppmdlcd' data-link_cat='SHOP NOW' href='$substituteHref' class='product-details__info-substitute__detail__bottom-link'>SHOP NOW</a> </div> </div> </div>";
              var ratingHTML = getRatingHtml(products[i].review_rating, products[i].number_of_reviews);
              substituteTemplate = substituteTemplate.replace(/\$eppmdlcd/g, products[i].sku);
              substituteTemplate = substituteTemplate.replace('$ratingReview', ratingHTML);
              substituteTemplate = substituteTemplate.replace('$title', products[i].product_display_name);
              substituteTemplate = substituteTemplate.replace('$img_src', products[i].images.small_image.url);
              substituteTemplate = substituteTemplate.replace('$substituteHref', products[i].urls.product_url);
              substituteTemplate = substituteTemplate.replace('$eppPrice', products[i].price_info[0].sub_total.value);
              substituteTemplate = substituteTemplate.replace('$eppSuggest', products[i].price_info[0].msrp_price.value);
              substituteTemplate = substituteTemplate.replace('$deliveryDate', products[i].expected_available_delivery_dates.edd_custom_stock_message || '');
              if (products[i].price_info[0].sub_total.value != products[i].price_info[0].msrp_price.value) {
                substituteTemplate = substituteTemplate.replace('display: none', 'display: inline');
              }
              self.$substituteContainer.append(substituteTemplate);
            }
          }

          if(data.pf_url) {
            self.shopSimilarUrl = data.pf_url;
            substituteCta = substituteCta.replace('$shopSimilarHref', data.pf_url);
            self.$substituteContainer.after(substituteCta);
            $('.product-details__info-substitute__detail__shop_similar').show();
          }
          window.AEMapp.EPP.loadPrice();
        }
      }

      function threeWeeksOut(date) {
        var edd = new Date(date);
        var today = new Date();
        var timeDiff = (edd.getTime() - today.getTime()) / (1000 * 3600 * 24);
        return !Number.isNaN(timeDiff) && timeDiff > 21;
      }

      function eddUpdate(date) {
        if(date && threeWeeksOut(date)) {
          init(true);
          return;
        }
        sectionsControl(true);
      }

      function freeStyle() {
        if(self.sku === "SP-LSP3BLAXZA") {
          $(".product-details__info-substitute__alerts_header_title").text("Sign up for alerts");
          $(".product-details__info-substitute__alerts_header_description").text("Pre-orders are temporarily on hold. Sign up to get an alert when pre-order re-opens soon and get a Freestyle Case on us while supplies last.*");
          $(".product-details__info-substitute__wtb").toggle();
          $(".chat-container").hide();
        }
      }

      function sectionsControl(display) {
        // if in Iframe, disable substitution feature
        if(window.AEMapp.tvPdpConf.buymoreHelper.isIframe()) {
          return true;
        }

        if(display) {
          // self.$result.show();
          self.$substituteSection.hide();
          var $subD = $('.product-details__info-substitute__data')
          var hideNavLink = $subD.attr('data-hideNavLink')
          var showSummary = $subD.attr('data-showSummary')
          if (hideNavLink === 'Y' || isReservePage()) {
            $('.product-top-nav__cta-wrapper').hide();
          } else {
            $('.product-top-nav__cta-wrapper').show();
          }
          if (showSummary === 'Y' || isBopisAvailable()) {
            $('.product-details__info-results').show();
            $('.product-details__info-purchase').show();
          } else{
            $('.product-details__info-results').hide();
            $('.product-details__info-purchase').hide();
          }

          // display = true => no substituition show
          // only when eddFlag = true => means parents sku edd 3 weeks out, need to show exsiting & substituition both
          if(!self.eddFlag) {
            return;
          }
        }

        self.$substituteSection.show();
        freeStyle();
        
        if(!self.eddFlag) {
          self.$result.hide();
          $('.product-details__info-purchase').hide();
          $('.product-top-nav__cta-wrapper').hide();
        }

        if(self.displayNotification || oos) {
          self.$alerts.show();
        }

        if(isReservePage()) {
          self.$substituteSection.hide();
        }
    
        try {
            var cta = $('.product-details__info-substitute__detail__bottom-link');
            var allMdlCd = '';
            var skusList = [];
            _.each($('.product-details__info-substitute__detail__item').find('.product-details__info-substitute__detail__bottom-sku'), function(sku) {
              skusList.push($(sku).html());
            })
            allMdlCd = skusList.join(',').replace(/\s/g, '');

            function substitutionTagging() {
              window.utag && window.utag.link({
                'link_cat': 'substitution>product-card',
                'link_id': 'substitution',
                'link_meta': 'link_name: product-card click',
                'link_position': 'tv_pdp_configurator>substitution ',
                'event_name': 'substitution product-card click'
              });
            }

            if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()) {
                var shopAppUrl = cta.attr('href').replace(/\/shopapp\/$/, '/').replace(/\/$/, '/shopapp/');
                if (~shopAppUrl.indexOf('tvs/all-tvs')) {
                  shopAppUrl = 'samsungestore://opencategory#category=SEEALL-TV';
                }
                cta.attr('href', shopAppUrl);
                cta.on('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    substitutionTagging();
                    window.location.href = shopAppUrl;
                })
            }
            var item = $('.product-details__info-substitute__detail__item');
            item.on('click', function (e) {
              e.preventDefault();
              var $e = $(e.currentTarget);
              var mdlCd = $e.find('.product-details__info-substitute__detail__bottom-sku').text() || '';
              cta = $e.find('.product-details__info-substitute__detail__bottom-link');
              var categoryInfo = getLocationHref().replace(/\/$/, '').split('/')[getLocationHref().replace(/\/$/, '').split('/').length - 2];
              var ctaRef = cta.attr('href');
              if (~ctaRef.indexOf('?')) {
                if (ctaRef.split('?')[1].length > 0) {
                  ctaRef += '&substitution=' + categoryInfo;
                } else {
                  ctaRef += 'substitution=' + categoryInfo;
                }
              } else {
                ctaRef += '?substitution=' + categoryInfo;
              }
              
              var analyticsUrl = 'select_substitution_source=' + self.sku + ';destination=' + mdlCd + ';alldestination='+allMdlCd;
              substitutionTagging();
              window.location.href = ctaRef+'&analytics='+analyticsUrl;
            });
        } catch(e) {
    
        }
      }

      function validateEmail(email) {
        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
      }

      function bindSubstitutionEvents() {
        self.$subscribed.hide();
        // self.$alerts.show();

        $('.product-details__info-substitute__alerts_close-icon').off('click');
        $('.product-details__info-substitute__alerts_cta .cta-button').off('click');
        self.$alerts.on('click', '.product-details__info-substitute__alerts_close-icon', function () {
          self.$alerts.hide();
        })
        self.$alerts.on('click', '.product-details__info-substitute__alerts_cta .cta-button, .product-details__info-substitute__alerts_disclaimer_check', function (e) {
          // To do
          // ajax call for notify
          var utagMsg = "notify me";
          var payload = {};
          payload.email = self.$alerts.find('.product-details__info-substitute__alerts_form_email').val();
          payload.phone = self.$alerts.find('.product-details__info-substitute__alerts_form_phone').val();

          self.$emailError.hide();
          if (!validateEmail(payload.email)) {
            self.$emailError.show();
            $('.product-details__info-substitute__alerts_disclaimer_check').removeClass('checked');
          }
          else {
            if($(e.target).hasClass('cta-button')) {
              getNotificationAlerts(payload);
            }
            else {
              utagMsg = "add preference";
              if($(e.target).hasClass('checked')) {
                $(e.target).removeClass('checked');
              }
              else {
                $(e.target).addClass('checked');
                addPreference(payload);
              }
            }
          }
          window.utag && window.utag.link({
            'link_cat': 'substitution>notify me',
            'link_id': 'substitution',
            'link_meta': 'link_name:' + utagMsg,
            'link_position': 'tv_pdp_configurator>substitution',
            'event_name': 'substitution ' + utagMsg
          });
        })
      }

      function getNotificationAlerts(data) {
        var apiBaseUrl = location.href.indexOf('www.samsung.com') > -1 ? 'https://us.ecom.samsung.com/v4/identity/notification/preferences/in-stock' : 'https://us.ecom.samsung.com/v4/identity/notification/preferences/in-stock';

        try {
          var payload = {
            email: data.email,
            "notification": {
              "in-stock": {
                "is_active": true,
                "skus": {}
              }
            }
          }
          //[self.sku]: {}
          payload.notification["in-stock"].skus[self.sku] = {}
          if (data.phone) {
            payload.mobile = data.phone;
          }

          $.ajax({
            url: apiBaseUrl,
            type: 'PUT',
            data: JSON.stringify(payload),
            dataType: 'json',
            'headers': {
              'content-type': 'application/json',
              "x-ecom-app-id": 'samsung pdp website'
            }
          })
            .then(function () {
              self.$alerts.hide();
              self.$subscribed.show();
              if(self.shopSimilarUrl) {
                $('.product-details__info-substitute__alerts_subscribed-info-link').attr('href', self.shopSimilarUrl);
                $('.product-details__info-substitute__alerts_subscribed-info-link').show();
              }
              $('.product-details__info-substitute__alerts_server-error').hide();
            })
            .fail(function (err) {
              console.log('get substituteApiUrl failed', err);
              $('.product-details__info-substitute__alerts_server-error').show();
            });
        } catch (error) {
          console.log('error when click notify me : ', error);
        }
      }
      
      function addPreference(data) {
        var apiBaseUrl = location.href.indexOf('www.samsung.com') > -1 ? 'https://us.ecom.samsung.com/v4/identity/preferences' : 'https://us.ecom.samsung.com/v4/identity/preferences';
        var payload = {
          email: data.email,
          email_consent: true
        }
        $.ajax({
          url: apiBaseUrl,
          type: 'PUT',
          data: JSON.stringify(payload),
          dataType: 'json',
          'headers': {
            'content-type': 'application/json',
            "x-ecom-app-id": 'samsung pdp website'
          }
        })
          .then(function () {
            console.log('---subscribe success----')
            $('.product-details__info-substitute__alerts_server-error').hide();
          })
          .fail(function (err) {
            console.log('get substituteApiUrl failed', err);
          });
      }

      (function analyticsCall() {
        if(window.location && window.location.href.indexOf('analytics=') > -1) {
          var queryArgs = window.location.href.split('analytics=')[1].replace(/\\/g, '');
          setTimeout(function() {
            window.utag && window.utag.link({
              'link_cat': 'pdp > ' + self.sku || '',
              'link_id': 'substitution',
              'link_meta': 'link_name:' + queryArgs,
              'link_position': 'pdp page>substitution',
              'event_name': queryArgs
            });
          }, 4000)
          var url = window.location.href.split('analytics=')[0];
          url = url.slice(0, url.length - 1);
          window.history.replaceState({}, '', url);
        }
      })();
    
      // function isBopisAvailable() {
      //   var pc_bopis_flag = $('.product-details__info-add').data('isbopis');
      //   if(pc_bopis_flag && pc_bopis_flag=='Y' && (getLocationHref().indexOf('/us/computing/galaxy-books') > -1 || getLocationHref().indexOf('/us/computing/chromebooks') > -1)) return true;
      //   var enable =false;
      //   if(window&&window.bopisEnable&&Array.isArray(window.bopisEnable)) {
      //     window.bopisEnable.forEach(function(item){
      //       var itemsku = $('.product-details__info-sku').eq(0).text();
      //       if(getLocationHref().indexOf(item)>-1 || (itemsku && itemsku.toLowerCase().indexOf(item.toLowerCase())>-1)) enable =true;
      //     })
      //   }
      //   return enable;
      // }

      function isBopisAvailable() {
        var pc_bopis_flag = $('.product-details__info-add').data('isbopis');
        return pc_bopis_flag=='Y';
      }

      function isReservePage() {
        var modelCode = self.$el.find('.product-details__info-sku').text();
        var availableList = [];
        return availableList.includes(modelCode)
      }
    
      if(actionType === 'eddUpdate') {
        if(oos === false) {
          eddUpdate(date);
        }
      }
      else if((actionType === 'switchFamilyOption' || actionType === 'init') && oos && !isBopisAvailable()) {
        init();
        // self.$substituteSection.show();
        // sectionsControl();
        // bindSubstitutionEvents();
      }
      else {
        sectionsControl(true);
      }
    });
  }
  
  window.AEMapp.tvPdpConf.instances.TVSubstitution = Substitution;

  /* Samsung TBYB */
  /* Samsung TBYB inherit element selectors from TVPdpConf instance on init */ 
  function TryBeforeYouBuy($selector, updateSummary) {
    var self = this;
    self.$el = $selector.$el;
    self.$tbyb = self.$el.find('.product-details__info-tbyb');

    function getTBYBPrice() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      var requestData = [{
        'quantity': 1,
        'sku': modelCode,
        'line_items': []
      }];

      var childLineItem = [];
      _.each(self.$tbyb.find('.tbyb__accessory-card'), function(el) { 
        childLineItem.push({
          'quantity': 1,
          'sku': $(el).data('mdlcd')
        });
        _.each($(el).find('.tbyb__accessory-option'), function(optEl) {
          if ($(el).data('mdlcd') != $(optEl).data('option-mdlcd')) {
            childLineItem.push({
              'quantity': 1,
              'sku': $(optEl).data('option-mdlcd')
            });
          }
        });
      })

      if (childLineItem.length > 0) {
        requestData[0].line_items = childLineItem;
        if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp() || window.location.href.indexOf('shopapp') > -1) {
					var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
				} else {
					var apiUrl = $S.arbitrate() + '?siteId=';
				}
        var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
				if ($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) {
					requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
				}

        $.ajax({
          url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
          data: JSON.stringify(requestData),
          type: 'POST',
          dataType: 'json',
          'headers': {
            'content-type': 'application/json'
          }
        }).then(function(res) {
          var lineItem =  res.line_items[Object.keys(res.line_items)[0]];
          _.each(lineItem.line_items, function(ltm) {
            if (ltm.sku_id == lineItem.sku_id) {
              ltm = lineItem;
            }
            var _$option = self.$tbyb.find('.tbyb__accessory-option[data-option-mdlcd="'+ ltm.sku_id +'"]');
            var _$card = self.$tbyb.find('.tbyb__accessory[data-mdlcd="'+ ltm.sku_id +'"]');

            _$option.data('price', ltm.line_item_cost.display_price); 
            _$option.data('msrp', ltm.line_item_cost.regular_price); 
            _$card.find('.sell').text(ltm.line_item_cost.display_price);
            _$card.find('.total').text(ltm.line_item_cost.regular_price);

            if (ltm.line_item_cost.display_price == ltm.line_item_cost.regular_price) {
              _$card.find('.tbyb__accessory-totalPrice').hide();
            } else {
              _$card.find('.tbyb__accessory-totalPrice').show();
            }
          })
        });
      }
    }

    function setTBYBEl() {
      self.$result = self.$el.find('.product-details__info-results');
      var ecom = self.$result.data('ecom');
      var stock = self.$result.data('stock');
      var buyable = ecom == 'Y' && stock != 'N';
      self.stackableWithOffer = getLocationHref().indexOf('us/mobile/audio/headphones/galaxy-buds2') > -1;
      self.isTbybFlagOn = self.$tbyb.find('.tbyb-wrapper').data('tbyb')  == 'Y';
      self.accessoryMode = getLocationHref().indexOf('/sound-bars/') > -1;
      self.tbybAvailable = buyable && self.isTbybFlagOn;
      self.tbybPreSelect = !!~window.location.search.indexOf('tbyb=preselected') || !!window.summaryObj.tbyb;
      // var tbybAvailable = self.$tbyb.find('.tbyb__accessory').length > 0;
      if (self.tbybAvailable) {
        self.$tbyb.show();
        getTBYBPrice();
        if (!self.accessoryMode) {
          showOtherSections(true);
        } else if (self.accessoryMode) {
          self.$tbyb.addClass('accessory-mode');
          showOtherSections(true);
        } else {
          self.$tbyb.removeClass('accessory-mode');
          showOtherSections(false);
        }
      } else {
        self.$tbyb.hide();
        showOtherSections(true);
      }
    }

    function showOtherSections(show) {
      if (show) {
        self.scope.$pc && self.scope.$pc.show();
        self.scope.$fbt && self.scope.$fbt.show();
        self.scope.$offer && self.scope.$offer.show();
        self.scope.$tradein && self.scope.$tradein.toggle(self.scope.hasTradeIn);
        self.scope.$install && self.scope.$install.show();
        self.scope.$access && self.scope.$access.toggle(self.scope.$access.find('.access__option').length > 0);
        self.scope.$bezel && self.scope.$bezel.show()
        self.scope.$tradeinbuds && self.scope.$tradeinbuds.show()
        self.$el.find('.product-details__info-recycle').show();
      } else {
        self.scope.$pc && self.scope.$pc.hide();
        self.scope.$fbt && self.scope.$fbt.hide();
        self.scope.$offer && !self.stackableWithOffer && self.scope.$offer.hide();
        self.scope.$tradein && self.scope.$tradein.hide();
        self.scope.$install && self.scope.$install.hide();
        self.scope.$access && self.scope.$access.hide();
        self.scope.$bezel && self.scope.$bezel.hide();
        self.scope.$tradeinbuds && !self.stackableWithOffer && self.scope.$tradeinbuds.hide();
        self.$el.find('.product-details__info-recycle').hide();
      }
    }

    return {
      attr: function() {
        return self;
      },
      init: function() {
        if(window.isBmsmIframe) return;
        setTBYBEl();
        self.$tbyb.on('click', '.tbyb__card-add, .tbyb__card-skip', function() {
          self.$tbyb.find('.tbyb__card-button').removeClass('selected');
          $(this).addClass('selected');
          if ($(this).hasClass('tbyb__card-add')) {
            if (self.$tbyb.find('.tbyb__accessory').length > 0) {
              self.$tbyb.find('.tbyb-bottom-wrapper').slideDown();
            }
            updateSummary('tbyb', []);
            showOtherSections(false);
            self.scope.tagging && self.scope.tagging.tbyb(false);
          } else {
            self.$tbyb.find('.tbyb-bottom-wrapper').slideUp();
            self.$tbyb.find('.tbyb__accessory').removeClass('selected');
            updateSummary('tbyb', '');
            showOtherSections(true);
            self.scope.tagging && self.scope.tagging.tbyb(true);
          }
        });

        self.$tbyb.on('click', '.tbyb__card-link-add, .tbyb__card-link-remove', function() {
          if ($(this).hasClass('tbyb__card-link-add')) {
            self.$tbyb.find('.tbyb__card-link-skip').hide();
            self.$tbyb.find('.tbyb__card').addClass('selected');
            updateSummary('tbyb', []);
            showOtherSections(false);
            self.scope.tagging && self.scope.tagging.tbyb(false);
          } else {
            self.$tbyb.find('.tbyb__card').removeClass('selected');
            updateSummary('tbyb', '');
            showOtherSections(true);
            self.scope.tagging && self.scope.tagging.tbyb(true);
          }
        });

        self.$tbyb.on('click', '.tbyb__card-link-skip', function() {
          $(this).addClass('selected');
          updateSummary('tbyb', '');
          showOtherSections(true);
          self.scope.tagging && self.scope.tagging.tbyb(true);
        });

        self.$tbyb.on('click', '.tbyb__accessory', function() {
          self.scope.tbybAccessories && self.scope.tbybAccessories.tbyb($(this).hasClass('selected'), $(this).find('.tbyb__accessory-card').data('mdlcd'));
          $(this).toggleClass('selected');
          var tbybData = _.map(self.$tbyb.find('.tbyb__accessory.selected'), function(acc) {
            return {
              name: $(acc).find('.tbyb__accessory-title').text(),
              modelCode: $(acc).find('.tbyb__accessory-card').data('mdlcd'),
              sellPrice: $(acc).find('.sell').text(),
              msrpPrice: $(acc).find('.total').text()
            }
          });
          if (tbybData.length == 0) {
            tbybData = '';
          }
          updateSummary('tbyb', tbybData);
        });

        if (self.tbybPreSelect && self.tbybAvailable) {
          if (!self.accessoryMode) {
            self.$tbyb.find('.tbyb__card-add').trigger('click');
          } else {
            self.$tbyb.find('.tbyb__card-link-add').trigger('click');
          }
        }
        return self.$tbyb;
      },
      reInit: function(_$template) {
        if(window.isBmsmIframe) return;
        self.$tbyb.html(_$template.find('.product-details__info-tbyb').html());
        setTBYBEl();
        if (self.tbybPreSelect && self.tbybAvailable) {
          if (!self.accessoryMode) {
            self.$tbyb.find('.tbyb__card-add').trigger('click');
          } else {
            self.$tbyb.find('.tbyb__card-link-add').trigger('click');
          }
        } else {
          updateSummary('tbyb', '');
        }
      }
    }
  }

  window.AEMapp.tvPdpConf.instances.TVtbyb = TryBeforeYouBuy;

  /* Samsung TV Bezel */
  /* Samsung TV Bezel need inherit 
      
      updateSummary

      from the TVPdpConf instance 
  */ 
  function TVBezel($app) {
    var self = this;
    self.$el = $app.el;
    self.$bezel = self.$el.find('.product-details__info-bezel');
    self.isFrameTV = self.$el.find('.product-details__info-title').text().toLowerCase().indexOf('frame') > -1;
    self.bezelImgMap = {
      'Modern Beige':'//image-us.samsung.com/SamsungUS/home/televisions-and-home-theater/television-home-theater-accessories/televisions/vg-scfa43bebza/03VG-SCFA43BEBZA_002_Front_Beige-Gallery-1600x1200.jpg',
      'Modern Brown':'//image-us.samsung.com/SamsungUS/home/televisions-and-home-theater/home-theater-accessories/pdp/2021-the-frame-bezel/gallery/Gallery-The-Frame-Bezel-brown-03-1600x1200.jpg',
      'Modern White':'//image-us.samsung.com/SamsungUS/home/televisions-and-home-theater/home-theater-accessories/pdp/2021-the-frame-bezel/gallery/Gallery-The-Frame-Bezel-white-03-1600x1200.jpg',
      'Beveled White':'//image-us.samsung.com/SamsungUS/home/televisions-and-home-theater/home-theater-accessories/pdp/vg-scfa65wtcza/02_VG-SCFA55WTCXC_002_Front_White_1600x1200.jpg',
      'Modern Teak':'//image-us.samsung.com/SamsungUS/home/televisions-and-home-theater/home-theater-accessories/pdp/2021-the-frame-bezel/gallery/Gallery-The-Frame-Bezel-teak-03-1600x1200.jpg',
      'Beveled Brick Red':'//image-us.samsung.com/SamsungUS/home/televisions-and-home-theater/home-theater-accessories/pdp/vg-scfa65trcza/02_VG-SCFA65TRCZA_002_Front_Red_1600x1200.jpg',
      'Sand Gold Metal':'//image-us.samsung.com/SamsungUS/home/television-home-theater/television-home-theater-accessories/televisions/05082023/1_VG-SCFC65SGM_002_Front2_SandGold_B_1600.jpg'
    }

    var freeBezelList = ['QN32LS03TBFXZA', 'QN43LS03AAFXZA', 'QN50LS03AAFXZA', 'QN55LS03AAFXZA', 'QN65LS03AAFXZA', 'QN75LS03AAFXZA'];

    var getBezelPrice = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      var requestData = [{
        'quantity': 1,
        'sku': modelCode,
        'line_items': []
      }];

      _.each(self.$bezel.find('.bezel-item'), function(el) { 
        var childLineItem = [{
          'quantity': 1,
          'sku': $(el).data('mdlcd')
        }];

        requestData[0].line_items = childLineItem;
        if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp() || window.location.href.indexOf('shopapp') > -1) {
					var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
				} else {
					var apiUrl = $S.arbitrate() + '?siteId=';
				}
        var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
				if ($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) {
					requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
				}

        $.ajax({
          url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
          data: JSON.stringify(requestData),
          type: 'POST',
          dataType: 'json',
          'headers': {
            'content-type': 'application/json'
          }
        }).then(function(res) {
          var lineItem =  res.line_items[Object.keys(res.line_items)[0]];
          _.each(lineItem.line_items, function(ltm) {
            if (ltm.sku_id == lineItem.sku_id) {
              ltm = lineItem;
            }
            var discount = ltm.line_item_cost.regular_price - ltm.line_item_cost.display_price
            var _$card = self.$bezel.find('.bezel-item[data-mdlcd="'+ ltm.sku_id +'"]');
            _$card.attr('data-price', ltm.line_item_cost.display_price); 
            _$card.data('msrp', ltm.line_item_cost.regular_price); 
            _$card.attr('data-discount', discount); 
            _$card.find('.sell').text(ltm.line_item_cost.display_price);
            _$card.find('.total').text(ltm.line_item_cost.regular_price);

            // SBC-17052, free customize bezel
            var freeBezelSku = ['QN85LS03AAFXZA', 'QN75LS03AAFXZA', 'QN65LS03AAFXZA', 'QN55LS03AAFXZA', 'QN50LS03AAFXZA', 'QN43LS03AAFXZA', 'QN32LS03TBFXZA'];
            if(freeBezelSku.includes(modelCode)) {
              _$card.data('price', '0'); 
              _$card.find('.sell').text('0');
              _$card.find('.bezel-item-msrp').show();
              //$('.product-details__info-bezel .bezel-wrapper .bezel-text').text('Get a free Customizable Bezel to match your style. Limited to one per purchase.');
            }else if(ltm.line_item_cost.display_price<ltm.line_item_cost.regular_price) {
              _$card.find('.bezel-item-msrp').show();
              //$('.product-details__info-bezel .bezel-wrapper .bezel-text').text('Get 50% off a Customizable Bezel to match your style. Limited to one per purchase.');
            }else {
              //$('.product-details__info-bezel .bezel-wrapper .bezel-text').text('');
            }
          })
        });
      })
    }

    var setBezelEl = function() {
      getBezelPrice();
      self.hasBezel = self.$bezel.find('.bezel-wrapper').length > 0;
      self.selectedBezelColor =[]
      if(self.isFrameTV){
        self.originalImg = $('.product-details__photo-color picture').first().attr('data-large');
        _.each($('.bezel-item'),function(el){
          $(el).attr('data-color',$(el).find('.bezel-item-color').text())
        })
      }
    }

    var bindBezelEvent = function() {
      self.$bezel.on('click', '.bezel-item', function() {
        // SBC-16155
        var modelCode = self.$el.find('.product-details__info-sku').text();
        if(freeBezelList.indexOf(modelCode) > -1) {
          var selected = $(this).hasClass('selected');
          self.$bezel.find('.bezel-item').removeClass('selected');
          if(!selected) {
            $(this).toggleClass('selected');
          }
        } 
        else {
          $(this).toggleClass('selected');
        }

        if (self.isFrameTV){
          var clickedBezelColor = $(this).data('color')
          if(!self.selectedBezelColor.includes(clickedBezelColor)){
            self.selectedBezelColor.push(clickedBezelColor)
          }else{
            self.selectedBezelColor = _.filter(self.selectedBezelColor,function(color){
              return color != clickedBezelColor
            })
          }
  
          if(self.selectedBezelColor.length){
            var newImgUrl = self.bezelImgMap[self.selectedBezelColor[self.selectedBezelColor.length-1]]
            if (newImgUrl){
              $('.product-details__photo-color source').first().attr('srcset',newImgUrl)
              $('.product-details__photo-color .product-details__img').first().attr('src',newImgUrl)
              $('.product-details__photo-color .product-details__img').first().attr('data-src',newImgUrl)
              $('.product-details__thumbnail .product-details__img').first().attr('srcset',newImgUrl)
            }else{
              $('.product-details__photo-color source').first().attr('srcset',self.originalImg)
              $('.product-details__photo-color .product-details__img').first().attr('src',self.originalImg)
              $('.product-details__photo-color .product-details__img').first().attr('data-src',self.originalImg)
              $('.product-details__thumbnail .product-details__img').first().attr('srcset',self.originalImg)
            }
          }else{
            $('.product-details__photo-color source').first().attr('srcset',self.originalImg)
            $('.product-details__photo-color .product-details__img').first().attr('src',self.originalImg)
            $('.product-details__photo-color .product-details__img').first().attr('data-src',self.originalImg)
            $('.product-details__thumbnail .product-details__img').first().attr('srcset',self.originalImg)
          }
        }

        var discounts = [];
        if(self.$bezel.find('.bezel-item.selected').length > 0){
          _.each(self.$bezel.find('.bezel-item.selected'),function(ele){
            var discount = $(ele).data('discount');
            discounts.push(discount)
          })
          var maxDiscount = Math.max.apply(null,discounts)
          if(maxDiscount > 0){
            _.each(self.$bezel.find(".bezel-item"),function(card){
              $(card).find('.sell').html($(card).data('msrp'))
              $(card).find('.bezel-item-msrp').hide()
            })
  
            var freeCard = $('.bezel-item.selected[data-discount=\"'+maxDiscount+'\"]').first()
  
            $(freeCard).find('.sell').html($(freeCard).data('price'))
            $(freeCard).find('.bezel-item-msrp').show();
          }else{
            if(self.$bezel.find('.bezel-item.selected').length==1){
              _.each(self.$bezel.find(".bezel-item"),function(card){
                $(card).find('.sell').html($(card).data('price'))
                if($(card).data('discount')>0){
                  $(card).find('.bezel-item-msrp').show();
                }
              })
            }
          }
          
        }

        if(self.$bezel.find('.bezel-item.selected').length == 0){
          _.each(self.$bezel.find(".bezel-item"),function(card){
            $(card).find('.sell').html($(card).data('price'))
            if($(card).data('discount')>0){
              $(card).find('.bezel-item-msrp').show();
            }
          })
        }

        var bezelData = '';
        if (self.$bezel.find('.bezel-item.selected').length > 0) {
          bezelData = _.map(self.$bezel.find('.bezel-item.selected'), function(bezel) {
            return {
              name: $(bezel).data('name'),
              modelCode: $(bezel).data('mdlcd'),
              price: Number($(bezel).find('.sell').html().replace(/[^0-9.]+/g, '')),
              suggested: Number($(bezel).find('.total').html().replace(/[^0-9.]+/g, ''))
            } 
          })
        }
        self.updateSummary('bezel', bezelData);
      })
    }

    self.init = function() {
      setBezelEl();
      bindBezelEvent();
    }
    self.reInit =  function(_$template) {
      self.$bezel.html(_$template.find('.product-details__info-bezel').html());
      setBezelEl();
    }
    
  }
  window.AEMapp.tvPdpConf.instances.TVBezel = TVBezel;

  /* Samsung White Glove Service*/
  function WhiteGlove($app) {
    var self = this;
    self.$el = $app.el;
    self.$whiteglove = self.$el.find('.whiteglove__section');
    var availableList = [
      'LS55BG970NNXGO', 'QN65QN900CFXZA' , 'QN75QN800CFXZA' , 'QN75QN900CFXZA' , 'QN85QN800CFXZA' , 'QN85QN900CFXZA' , 'QN98QN990CFXZA' , 'QN98Q80CAFXZA' , 'QN65QN800BFXZA', 'QN75QN800BFXZA', 'QN85QN800BFXZA', 'QN65QN900BFXZA', 'QN75QN900BFXZA', 'QN85QN900BFXZA','QN65QN800CFXZA','QN85QN800CFXZA','QN65QN900CFXZA','QN75QN900CFXZA','QN65QN900BFXZA','QN75QN900BFXZA','QN85QN900BFXZA','QN65QN800BFXZA','QN75QN800BFXZA','QN85QN800BFXZA','QN98Q80CAFXZA'
    ];
    var tooltipText = {
      'LS55BG970NNXGO': "Our trusted pros will assist with unpacking and setting up your Odyssey Ark screen in your desired position and location. You will be able to verify that your Ark screen powers on and functions properly.",
      'QN98Q80CAFXZA': "Delivery of your TV by trained professional to your room of choice. Wall mount and installation service must be purchased separately. You will be able to verify that your TV powers on and functions properly.",
      'QN65QN900CFXZA': "Enjoy delivery and assembly by a trained professional to your room of choice. Wall mount and installation service must be purchased separately. You will be able to verify that your TV powers on and functions properly."
    }

    var headlineText = {
      'QN65QN900CFXZA' : "Add White Glove Service"
    }

    var descriptionText ={
      'QN65QN900CFXZA' : 'Enjoy free delivery, unpacking, assembly and cleanup. An additional peace of mind.'
    }

    var freeText = {
      "LS55BG970NNXGO": "<br /><span style='color:red; font-size:14px'>Save additional $75</span>",
      "QN98Q80CAFXZA": "<br /><span style='color:red; font-size:14px'>Included</span>",
      'QN65QN900BFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN75QN900BFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN85QN900BFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN65QN800BFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN75QN800BFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN85QN800BFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN65QN800CFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN85QN800CFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN65QN900CFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN75QN900CFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN65QN900CFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN75QN800CFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN75QN900CFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN85QN800CFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN85QN900CFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN98QN990CFXZA': "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>",
      'QN98Q80CAFXZA':  "<br /><span style='color:red; font-size:14px'>Free<br><strike>$125</strike></span>"

    }

    var setWhiteGloveEL = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      self.hasWhiteGlove = availableList.includes(modelCode);
      self.$result = self.$el.find('.product-details__info-results');
      var ecom = self.$result.data('ecom');
      var stock = self.$result.data('stock');
      var buyable = ecom == 'Y' && stock != 'N';

      if((self.hasWhiteGlove&&buyable)) {
        $('.product-details__info-whiteglove .whiteglove__section').show();
        if (tooltipText[modelCode]) {
          $(".whiteglove__section__right__tooltip-text").text(tooltipText[modelCode])
        }
        if (headlineText[modelCode]) {
          $(".whiteglove__section__right__title").text(headlineText[modelCode])
        }
        if (descriptionText[modelCode]) {
          $(".whiteglove__section__right__desc").text(descriptionText[modelCode])
        }
        if (freeText[modelCode]) {
          $(".whiteglove__section__right__save").html(freeText[modelCode])
        } else {
          $(".whiteglove__section__right__save").html("")
        }
      }else {
        $('.product-details__info-whiteglove .whiteglove__section').hide();
      }
    }

    var bindWhiteGloveEvent = function() {
      self.$whiteglove.on('click', '.whiteglove__section__right__learn', function() {
        if($('.whiteglove__section__right__tooltip').hasClass('active')) {
          $('.whiteglove__section__right__tooltip').removeClass('active');

        }else {
          $('.whiteglove__section__right__tooltip').addClass('active');
        }
      })

			self.$whiteglove.on('click', '.close', function() {
        if($('.whiteglove__section__right__tooltip').hasClass('active')) {
          $('.whiteglove__section__right__tooltip').removeClass('active');
				}
      })
    }
    self.init = function() {
      setWhiteGloveEL();
      bindWhiteGloveEvent()
    }
    self.reInit =  function() {
      setWhiteGloveEL();
    }
  }
  window.AEMapp.tvPdpConf.instances.WhiteGlove = WhiteGlove;

  /* deprecated, whiteglove is not going to pass as child */
  /*
  function WhiteGlove($app) {
    var self = this;
    self.$el = $app.el;
    self.$whiteglove = self.$el.find('.product-details__info-whiteglove');

    var availableList = ['QN65QN800BFXZA', 'QN75QN800BFXZA', 'QN85QN800BFXZA', 'QN65QN900BFXZA', 'QN75QN900BFXZA', 'QN85QN900BFXZA'];
    
    var setWhiteGloveEL = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      self.hasWhiteGlove = availableList.includes(modelCode);
      if(self.hasWhiteGlove) {
        $('.product-details__info-whiteglove .whiteglove__section').show();
      }else {
        $('.product-details__info-whiteglove .whiteglove__section').hide();
      }
    }

    var bindWhiteGloveEvent = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();

      self.$whiteglove.on('click', '.whiteglove__card', function() {
        var whitegloveData = '';
        if($(this).hasClass('selected')) {
          $(this).removeClass('selected');
          $('.whiteglove__card-edit').text('add')
        }else {
          $(this).removeClass('selected');
          $('.whiteglove__card-edit').text('remove')
          whitegloveData = {
            name: 'White Glove Service',
            modelCode: modelCode,
            price: 'Free'
          }
        }

        self.updateSummary('whiteglove', whitegloveData);

      })
    }
    self.init = function() {
      setWhiteGloveEL();
      bindWhiteGloveEvent()
    }
    self.reInit =  function() {
      setWhiteGloveEL();
    }
  }
  window.AEMapp.tvPdpConf.instances.WhiteGlove = WhiteGlove;
  */

  /* Samsung Accessory*/
  function Accessory($app) {
    var self = this;
    self.$el = $app.el;
    self.$accessory = self.$el.find('.product-details__info-accessory');
    self.accessoryJson = self.$accessory.find('.accessory-list-container').data('accessories-offers');


    var getAccessoryPrice = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      var requestData = [{
        'quantity': 1,
        'sku': modelCode,
        'line_items': []
      }];

      var getPrice = function(el, selector) {
        var childLineItem = [{
          'quantity': 1,
          'sku': $(el).data('mdlcd')
        }];

        requestData[0].line_items = childLineItem;
        if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp() || window.location.href.indexOf('shopapp') > -1) {
					var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
				} else {
					var apiUrl = $S.arbitrate() + '?siteId=';
				}
        var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
				if ($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) {
					requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
				}

        $.ajax({
          url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
          data: JSON.stringify(requestData),
          type: 'POST',
          dataType: 'json',
          'headers': {
            'content-type': 'application/json'
          }
        }).then(function(res) {
          var lineItem =  res.line_items[Object.keys(res.line_items)[0]];
          _.each(lineItem.line_items, function(ltm) {
            if (ltm.sku_id == lineItem.sku_id) {
              ltm = lineItem;
            }
            var _$card = self.$accessory.find(selector+'[data-mdlcd="'+ ltm.sku_id +'"]');

            _$card.data('price', ltm.line_item_cost.display_price); 
            _$card.data('msrp', ltm.line_item_cost.regular_price); 
            _$card.find('.sell').text(ltm.line_item_cost.display_price);
            _$card.find('.total').text(ltm.line_item_cost.regular_price);

            // if(ltm.line_item_cost.display_price == 0) {
            //   //set free text
            //   var sellHTML = 'Free<span class="sell" style="display:none">0</span>';
            //   _$card.find('.accessory-item-promo').html(sellHTML);
            // }

            if(ltm.line_item_cost.display_price<ltm.line_item_cost.regular_price) {
              _$card.find('.accessory-item-msrp').show();
             
            }
          })

        });
      }

      _.each(self.$accessory.find('.accessory-list-item'), function(el) { 
        getPrice(el, '.accessory-list-item')
        if($(el).siblings('.accessory-skin-container').length) {
          _.each($(el).siblings('.accessory-skin-container').find('.accessory-skin-list-item'), function(element) {
            getPrice(element, '.accessory-skin-list-item')
          })
        }
      })

    }

    var buildAccessoryDom = function() {
      var sku = $('.product-details__info-sku').html();
      var skuList = [
        "QN85QN900BFXZA",
        "QN75QN900BFXZA",
        "QN65QN900BFXZA",
        "QN85QN800BFXZA",
        "QN75QN800BFXZA",
        "QN65QN800BFXZA"
      ]
      if (self.accessoryJson && self.accessoryJson.length) {
				_.each(self.accessoryJson, function(accessory) {
          var hasSkin = accessory.accessoriesModelList && Array.isArray(accessory.accessoriesModelList) && accessory.accessoriesModelList.length;
          var listItemHTML = '<div class="accessory-list-item-container">'
            + '<div class="accessory-list-item accessory-offer-item" data-msrp="' + accessory.regularPrice + '" data-name="' + accessory.name + '" data-mdlcd="' + (hasSkin ? accessory.accessoriesModelList[0].modelCode : accessory.authoredModelCode) + '" data-skin="' + (hasSkin ? 'true' : 'false') + '">'
            + '<div class="list-item-edit">' + (hasSkin ? 'view' : 'add') + '</div>'
            + '<img class="accessory-list-item-image" src="' + accessory.image + '" data-src="' + accessory.image + '" alt="">'
            + '<div class="accessory-list-item-info"><div class="list-item-offer">' + (accessory.offerText?accessory.offerText:'') + '</div><div class="list-item-title">' + accessory.name +'</div><div class="list-item-desc">' + accessory.description + '</div></div>'
            + '<div class="accessory-list-item-price">'
            + '<span class="accessory-item-promo">$<span class="sell">' + accessory.salePrice + '</span></span><span class="accessory-item-msrp" style="display:none">$<span class="total">' + accessory.regularPrice + '</span></span></div><span class="accessory-check"></span></div>';

          if(hasSkin) {
            var optionHTML = '<div class="accessory-skin-container" style="display:none">'
              + '<div class="skin-close-icon"></div>'
              + '<p class="accessory-title" style="' + (skuList.includes(sku) ? 'visibility:hidden' : '') + '">Add Freestyle Skin</p>'
              + (skuList.includes(sku) ? '' : '<p class="skin-desc">Weather-resistant durability against water and dust.The clean, slim design is the perfect accessory to fit your on-the-go lifestyle.</p>')
              + '<div class="accessory-skin-list">';

            _.each(accessory.accessoriesModelList, function(skin) {
              var skinHTML = '<div class="accessory-skin-list-item accessory-skin-item" data-name="' + accessory.name + '" data-mdlcd="' + skin.modelCode + '">'
                + '<img src="' + skin.image + '" alt="">'
                + '<div class="skin-item-color">Color: <span>' + skin.color + '</span></div>'
                + '<div class="skin-item-price">'
                + '<span class="accessory-item-promo">$<span class="sell">' + skin.promoPrice + '</span></span><span class="accessory-item-msrp" style="display:none">$<span class="total">' + skin.productPrice + '</span></span></div></div>';
              optionHTML+=skinHTML;
            })
            optionHTML+='</div>';
            listItemHTML+=optionHTML;
          }
          self.$accessory.find('.accessory-list-container').append(listItemHTML);
				})
			}
    }

    var updateAccessorySummary = function() {
      var accessoryData = '';
      if (self.$accessory.find('.accessory-list-item.selected').length > 0) {
        accessoryData = _.map(self.$accessory.find('.accessory-list-item.selected'), function(accessory) {
          return {
            name: $(accessory).data('name'),
            modelCode: $(accessory).data('mdlcd'),
            price: Number($(accessory).find('.sell').html().replace(/[^0-9.]+/g, '')),
            suggested: Number($(accessory).find('.total').html().replace(/[^0-9.]+/g, ''))
          } 
        })
      }

      self.updateSummary('accessory', accessoryData);
    }

    var setAccessoryEl = function() {
      buildAccessoryDom();
      getAccessoryPrice();
      self.hasAccessory = self.accessoryJson && self.accessoryJson.length>0;
      if(self.hasAccessory) {
        self.$accessory.show();
      }
    }

    var bindAccessoryEvent = function() {
      self.$accessory.on('click', '.accessory-list-item', function() {

        if(!$(this).data('skin')) {
          $(this).toggleClass('selected')
          updateAccessorySummary();
        }else {
          $(this).siblings('.accessory-skin-container').toggle();
        }

      })

      self.$accessory.on('click', '.accessory-skin-list-item', function() {

        if(!$(this).hasClass('selected')) {
          $('.accessory-skin-list-item').removeClass('selected');
          $(this).addClass('selected')
          var parentItem = $(this).closest('.accessory-skin-container').siblings('.accessory-list-item');
          parentItem.find('.accessory-list-item-image').attr('src', $(this).find('img').attr('src'))
          // parentItem.find('.list-item-title').text()
          // parentItem.find('.list-item-desc').text()
          parentItem.data('mdlcd', $(this).data('mdlcd')); 
          parentItem.data('name', $(this).data('name')); 
          parentItem.find('.sell').text($(this).find('.sell').text());
          parentItem.find('.total').text($(this).find('.total').text());
          if(!parentItem.hasClass('selected')) {
            parentItem.addClass('selected')
          }
          $(this).closest('.accessory-skin-container').toggle();
          updateAccessorySummary();
        }else {
          $(this).removeClass('selected');
          var parentItem = $(this).closest('.accessory-skin-container').siblings('.accessory-list-item');
          parentItem.find('.accessory-list-item-image').attr('src', parentItem.find('.accessory-list-item-image').data('src'));
          parentItem.removeClass('selected');
          updateAccessorySummary();
        }

      })

      self.$accessory.on('click', '.skin-close-icon', function() {
        $(this).closest('.accessory-skin-container').toggle();
      })
    }

    self.init = function() {
      setAccessoryEl();
      bindAccessoryEvent();
    }

    self.reInit =  function(_$template) {
      self.$accessory.html(_$template.find('.product-details__info-accessory').html());
      setAccessoryEl();
    }
  }
  window.AEMapp.tvPdpConf.instances.Accessory = Accessory;

  function PreOrderOffer($app){
    var self = this;
    self.$el = $app.el;
    self.$preorderOffer = self.$el.find('.product-details__info-preorder');
    self.preorderOfferJson = ''
    self.preorderOfferData = ''
    self.preOrderOfferRes = []

    // var getOfferPrice = function() {
    //   var modelCode = self.$el.find('.product-details__info-sku').text();
    //   var requestData = [{
    //     'quantity': 1,
    //     'sku': modelCode,
    //     'line_items': []
    //   }];

    //   var childLineItem = [];
    //   var childLineItemSkus = [];
    //   _.each(self.$preorderOffer.find('.preorder-card-section'), function(el) { 
    //     childLineItem.push({
    //       'quantity': 1,
    //       'sku': $(el).data('mdlcd')
    //     });
    //     childLineItemSkus.push($(el).data('mdlcd'));
    //   })

    //   if (childLineItem.length > 0) {
    //     requestData[0].line_items = childLineItem;

    //     var apiUrl = $S.arbitrate() + '?siteId=';

    //     var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
    //     if ($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) {
    //       requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
    //     }

    //     $.ajax({
    //       url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
    //       data: JSON.stringify(requestData),
    //       type: 'POST',
    //       dataType: 'json',
    //       'headers': {
    //         'content-type': 'application/json'
    //       }
    //     }).then(function(res) {
    //       var lineItem =  res.line_items[Object.keys(res.line_items)[0]];
    //       _.each(lineItem.line_items, function(ltm) {
    //         if(!childLineItemSkus.includes(ltm.sku_id)) return;
    //         if (ltm.sku_id == lineItem.sku_id) {
    //           ltm = lineItem;
    //         }
    //         $('.preorder-card-section[data-mdlcd=\"'+ltm.sku_id+'\"]').attr('data-price',ltm.line_item_cost.display_price);
    //         $('.preorder-card-section[data-mdlcd=\"'+ltm.sku_id+'\"]').attr('data-suggested',ltm.line_item_cost.regular_price);
    //         $('.preorder-card-section[data-mdlcd=\"'+ltm.sku_id+'\"]').attr('data-final-price',ltm.line_item_cost.display_price)
    //         var discount = ltm.line_item_cost.regular_price - ltm.line_item_cost.display_price
    //         if(discount>=0){
    //           $('.preorder-card-section[data-mdlcd=\"'+ltm.sku_id+'\"]').attr('data-discount',discount)
    //         }

    //         $('.preorder-card-section[data-mdlcd=\"'+ltm.sku_id+'\"]').find('.preoder-section__promo-price span').html(ltm.line_item_cost.display_price);
    //         $('.preorder-card-section[data-mdlcd=\"'+ltm.sku_id+'\"]').find('.preoder-section__origin-price span').html(ltm.line_item_cost.regular_price);
    //       })
    //     })
    //   }
    // }

    var fetchJsonData = function(){
      var apiBaseUrl = location.href.indexOf('www.samsung.com') > -1 ? "https://www.samsung.com" : location.href.indexOf('stgwebus.samsung.com') > -1 ? "https://stgwebus.samsung.com" : "https://stgwwwus.samsung.com"

      var apiUrl ='/us/smg/content/samsung/content-library/prepurchase/pdpv2-access/pre-order-offer.json';
      
      $.ajax({
        url: apiBaseUrl + apiUrl,
        type: 'GET',
        dataType: 'json',
        async:false,
        'headers': {
          'content-type': 'application/json'
        }
        }).then(function(res){
          self.preorderOfferData = res;
        })
    }
    var setPreOrderOfferEl = function(){
      var modelCode = self.$el.find('.product-details__info-sku').text();
      var neoQLED8k = ['QN65QN800CFXZA','QN65QN900CFXZA','QN75QN900CFXZA','QN85QN800CFXZA','QN85QN900CFXZA','QN75QN800CFXZA']
      var otherTvs = ['QN65QN85CAFXZA','QN65QN90CAFXZA','QN75QN85CAFXZA','QN75QN90CAFXZA','QN85QN85CAFXZA','QN85QN90CAFXZA','QN55S90CAFXZA','QN65S90CAFXZA','QN77S90CAFXZA']
      var s95c = ['QN55S95CAFXZA','QN65S95CAFXZA','QN77S95CAFXZA']

      self.preorderOfferJson = ''

      neoQLED8k.includes(modelCode) ? self.preorderOfferJson = self.preorderOfferData.twoOffer : otherTvs.includes(modelCode) ? self.preorderOfferJson = self.preorderOfferData.threeOffer : s95c.includes(modelCode) ? self.preorderOfferJson = self.preorderOfferData.threeOfferS95c : '';

      if(self.preorderOfferJson && self.preorderOfferJson.offerCards && self.preorderOfferJson.offerCards.length){
        self.$preorderOffer.find('.preorder-title').text(self.preorderOfferJson.title)
        self.$preorderOffer.find('.preorder-subtitle').html(self.preorderOfferJson.subTitle)

        var offerCardSection = $('.preorder-card-sections')
        _.each(self.preorderOfferJson.offerCards, function(el){
          var offerDiscount = el.productPrice - el.promoPrice;
          var offercard = $('<div></div>').addClass('preorder-card-section').attr('data-mdlcd',el.productSku).attr('data-offer-name',el.name).attr('data-price',el.promoPrice).attr('data-suggested',el.productPrice).attr('data-discount',offerDiscount).attr('data-final-price',el.promoPrice).attr('data-name',el.offerName)
          if(el.mount){
            offercard.attr('data-mount',el.mount.productSku)
          }
          var cardTitle =$('<div></div>').addClass('preorder-card-section__title').html(el.cardTitle)
          var cardPrice = $('<div></div>').addClass('preorder-card-section__price')
          var cardSectionRight=$('<div></div>').addClass('preorder-card-section__right')
          cardPrice.html('<div class="preoder-section__promo-price">$<span>'+el.promoPrice+'</span></div>' + '<div class="preoder-section__origin-price">$<span>'+el.productPrice+'</span></div>')
          cardSectionRight.append(cardTitle)
          cardSectionRight.append(cardPrice)
          offercard.append('<img class="preoder-section__image" src='+el.cardImage+' />')
          offercard.append(cardSectionRight)
          offercard.append('<div class="preorder-add">Add</div>')
          offerCardSection.append(offercard)
        })
      }
      // getOfferPrice();
      self.hasOffer = self.preorderOfferJson && self.preorderOfferJson.offerCards && self.preorderOfferJson.offerCards.length >0;
      if(self.hasOffer) {
        self.$preorderOffer.show();
        self.$el.find('.install__wrapper').hide();
      }
    }

    var bindPreOrderOfferEvent = function(){
      self.$preorderOffer.on('click','.preorder-card-section',function(){
        var preOrderOffer = $('.preorder-card-sections')
        if($(this).hasClass('selected')){
          $(this).removeClass('selected')
          $(this).find('.preorder-add').text('Add')
          if($(this).data('name') =='mounting'){
            $('.preorder-mounting-wrapper').hide();
          }
        }else{
          $(this).addClass('selected')
          $(this).find('.preorder-add').text('Remove')
          if($(this).data('name') =='mounting'){
            $('.preorder-mounting-wrapper').show();
          }
        }
      
        if (preOrderOffer.find('.preorder-card-section.selected').length) {
          var discounts = [] 
          if (preOrderOffer.find('.preorder-card-section.selected').length > 1) {
            _.each(preOrderOffer.find('.preorder-card-section.selected'),function(ele){
              var discount = $(ele).data('discount');
              discounts.push(discount)
            })

            var maxDiscount = Math.max.apply(null,discounts)
            _.each(preOrderOffer.find(".preorder-card-section"),function(card){
              $(card).attr('data-final-price',$(card).data('suggested'))
              $(card).find('.preoder-section__origin-price').empty()
              $(card).find('.preoder-section__promo-price span').html($(card).data('suggested'))
            })
            var freeCard = $('.preorder-card-section.selected[data-discount=\"'+maxDiscount+'\"]')
            $(freeCard).attr('data-final-price',$(freeCard).data('price'))
            $(freeCard).find('.preoder-section__promo-price span').html($(freeCard).data('price'))
            $(freeCard).find('.preoder-section__origin-price').html('$<span>'+$(freeCard).data('suggested')+'</span>')
          }else if (preOrderOffer.find('.preorder-card-section.selected').length == 1){
            preOrderOffer.find('.preorder-card-section.selected').attr('data-final-price',$('.preorder-card-section.selected').data('price'))
            preOrderOffer.find('.preorder-card-section.selected .preoder-section__promo-price span').html($('.preorder-card-section.selected').data('price'));
            preOrderOffer.find('.preorder-card-section.selected').find('.preoder-section__origin-price').html('$<span>'+$('.preorder-card-section.selected').data('suggested')+'</span>')
          }
           _.each(preOrderOffer.find('.preorder-card-section.selected'), function(offer) {
            var isInRes =_.filter(self.preOrderOfferRes,function(obj){
              return obj.modelCode ===$(offer).data('mdlcd')
            }).length>0
            if(!isInRes){
              if(self.preOrderOfferRes.length){
                if($(offer).data('mount')){
                  self.preOrderOfferRes.push(
                    {
                      name: $(offer).data('offer-name'),
                      modelCode: $(offer).data('mdlcd'),
                      mount:$(offer).data('mount'),
                      price: $(offer).data('final-price').toString().replace(/[^0-9.]+/g, '') || 0,
                      suggested: $(offer).data('suggested').toString().replace(/[^0-9.]+/g, '') || 0
                    }
                  ) 
                }else{
                  self.preOrderOfferRes.push(
                    {
                      name: $(offer).data('offer-name'),
                      modelCode: $(offer).data('mdlcd'),
                      price: $(offer).data('final-price').toString().replace(/[^0-9.]+/g, '') || 0,
                      suggested: $(offer).data('suggested').toString().replace(/[^0-9.]+/g, '') || 0
                    }
                  ) 
                }
              }else{
                if($(offer).data('mount')){
                  self.preOrderOfferRes.push(
                    {
                      name: $(offer).data('offer-name'),
                      modelCode: $(offer).data('mdlcd'),
                      mount:$(offer).data('mount'),
                      price: $(offer).data('price').toString().replace(/[^0-9.]+/g, '') || 0,
                      suggested: $(offer).data('suggested').toString().replace(/[^0-9.]+/g, '') || 0
                    }
                  ) 
                }else{
                  self.preOrderOfferRes.push(
                    {
                      name: $(offer).data('offer-name'),
                      modelCode: $(offer).data('mdlcd'),
                      price: $(offer).data('price').toString().replace(/[^0-9.]+/g, '') || 0,
                      suggested: $(offer).data('suggested').toString().replace(/[^0-9.]+/g, '') || 0
                    }
                  ) 
                }
              }
            }
            
          });
          
          _.each(preOrderOffer.find(".preorder-card-section:not(.selected)"),function(card){
            $(card).find('.preoder-section__origin-price').empty()
            $(card).find('.preoder-section__promo-price span').html($(card).data('suggested'))
          })

          _.each(preOrderOffer.find('.preorder-card-section'),function(offer){
            if($(offer).data('mdlcd')=='L-INST/A1-EQ55'){
              if($(offer).find('.preoder-section__promo-price span').text() !=0){
                $('.mounting-promo-price').text('$'+$(offer).find('.preoder-section__promo-price span').text())
                $('.mounting-price').empty()
              }else{
                $('.mounting-promo-price').text('FREE')
                $('.mounting-price').html('$<span>'+ $(offer).data('suggested')+ '</span>')
              }
            }
          })

        }else if(!preOrderOffer.find('.preorder-card-section.selected').length){
          _.each(preOrderOffer.find(".preorder-card-section:not(.selected)"),function(card){
            $(card).find('.preoder-section__origin-price').html('$<span>'+$(card).data('suggested')+'</span>')
            $(card).find('.preoder-section__promo-price span').html($(card).data('price'))
          
          })
          _.each(preOrderOffer.find('.preorder-card-section'),function(offer){
            $(offer).attr('data-final-price',$(offer).data('price'))
          })
      
        }
      
      
        _.each(preOrderOffer.find(".preorder-card-section:not(.selected)"),function(card){
          self.preOrderOfferRes = _.filter(self.preOrderOfferRes,function(el){
            return el.modelCode != $(card).data('mdlcd')
          })
        })
      
        _.each(self.preOrderOfferRes,function(offer){
          var card = $('.preorder-card-section[data-mdlcd=\"'+offer.modelCode+'\"]')
          offer.price = $(card).attr('data-final-price')
        })
       
        self.updateSummary('preorder', self.preOrderOfferRes);
      })
    }

    var selectDefaultCard = function(){
      var modelCode = self.$el.find('.product-details__info-sku').text();
      var neoQLED8k = ['QN65QN800CFXZA','QN65QN900CFXZA','QN75QN900CFXZA','QN85QN800CFXZA','QN85QN900CFXZA','QN75QN800CFXZA']
      var neoQLED4k = ['QN65QN85CAFXZA','QN65QN90CAFXZA','QN75QN85CAFXZA','QN75QN90CAFXZA','QN85QN85CAFXZA','QN85QN90CAFXZA']
      var Oled = ['QN55S90CAFXZA','QN55S95CAFXZA','QN65S95CAFXZA','QN65S90CAFXZA','QN77S95CAFXZA','QN77S90CAFXZA']
      if(neoQLED8k.includes(modelCode)){
        $('.preorder-card-section[data-mdlcd="QN32LS03BBFXZA"]').click();
      }else if(neoQLED4k.includes(modelCode) || Oled.includes(modelCode)){
        $('.preorder-card-section[data-mdlcd="SP-LSP3BLAXZA"]').click();
      }
      
    }
    self.init = function() {
      if(false){
        fetchJsonData()
        setPreOrderOfferEl();
        bindPreOrderOfferEvent();
        selectDefaultCard();
      }
    }
    self.reInit =  function(_$template) {
      if(false){
        self.$preorderOffer.html(_$template.find('.product-details__info-preorder').html());
        self.preOrderOfferRes = []
        setPreOrderOfferEl();
        selectDefaultCard();
      }
    }
  }
  window.AEMapp.tvPdpConf.instances.PreOrderOffer = PreOrderOffer;


  function Shelves($app) {
    var self = this;
    self.$el = $app.el;
    self.$shelves = self.$el.find('.product-details__info-shelves');
    self.selection = [];
    self.isAdded = false;
    self.originalImg = self.$shelves.find('.shelves__popup__default_img.desktop').attr('src');
    self.originalImgMobile = self.$shelves.find('.shelves__popup__default_img.mobile').attr('src-mobile');
    self.carouselImages = {
      "QN55LS03BAFXZA": [
        "//image-us.samsung.com/SamsungUS/configurator/55-_0002_VG-MSFB55WTC_Lifestyle_02.jpg?$default-jpg$",
        "//image-us.samsung.com/SamsungUS/configurator/55-_0001_VG-MSFB55WTE_Lifestyle_01.jpg?$default-jpg$",
        "//image-us.samsung.com/SamsungUS/configurator/55-_0000_VG-MSFB55WTF_Lifestyle_01.jpg?$default-jpg$"
      ],
      "QN65LS03BAFXZA": [
        "//image-us.samsung.com/SamsungUS/configurator/65-_0000_VG-MSFB65WTF_Lifestyle_01.jpg?$default-jpg$",
        "//image-us.samsung.com/SamsungUS/configurator/65-_0001_VG-MSFB65WTE_Lifestyle_01.jpg?$default-jpg$",
        "//image-us.samsung.com/SamsungUS/configurator/65-_0002_VG-MSFB65WTC_Lifestyle_02.jpg?$default-jpg$",
        "//image-us.samsung.com/SamsungUS/configurator/65-_0003_VG-MSFB65WTC_Lifestyle_01.jpg?$default-jpg$"   
      ]
    }

    //var availableList = ['QN55LS03BAFXZA', 'QN65LS03BAFXZA'];

    var getShelvesPrice = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp() || window.location.href.indexOf('shopapp') > -1) {
        var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
      } else {
        var apiUrl = $S.arbitrate() + '?siteId=';
      }
      var lowestPrice = 0;
      var requestData = [{
        'quantity': 1,
        'sku': modelCode,
        'line_items': []
      }];

      // update bundle shelves
      _.each(self.$shelves.find('.box__wrapper.bundle .box__wrapper__item'), function(el) { 
        var childLineItem = [];
        _.each($(el).find('.child-model'), function(element) { 
          childLineItem.push({
            'quantity': 1,
            'sku': $(element).data('mdlcd')
          });
        })

        if (childLineItem.length > 0) {
          requestData[0].line_items = childLineItem;
          $.ajax({
            url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
            data: JSON.stringify(requestData),
            type: 'POST',
            dataType: 'json',
            'headers': {
              'content-type': 'application/json'
            }
          }).then(function(res) {
            var totalPrice = 0;
            var sellPrice = 0;
            var lineItem =  res.line_items[Object.keys(res.line_items)[0]];
            _.each(lineItem.line_items, function(ltm) {

              var _$card = $(el).find('.child-model[data-mdlcd="'+ ltm.sku_id +'"]');

              _$card.data('price', ltm.line_item_cost.display_price); 
              _$card.data('msrp', ltm.line_item_cost.regular_price); 
              totalPrice+=ltm.line_item_cost.regular_price;
              sellPrice+=ltm.line_item_cost.display_price;
            })
            $(el).find('.shelves__item__promo .sell').text(sellPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','))
            $(el).find('.shelves__item__msrp .total').text(totalPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','))
            if(sellPrice<totalPrice) {
              $(el).find('.shelves__item__msrp').show();
            }
          })
        
        }

      })

      //update single shelves
      _.each(self.$shelves.find('.box__wrapper.single .box__wrapper__item'), function(el) { 
        var childLineItem = [{
          'quantity': 1,
          'sku': $(el).data('modelcode')
        }];

        if (childLineItem.length > 0) {
          requestData[0].line_items = childLineItem;
          $.ajax({
            url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
            data: JSON.stringify(requestData),
            type: 'POST',
            dataType: 'json',
            'headers': {
              'content-type': 'application/json'
            }
          }).then(function(res) {

            var lineItem =  res.line_items[Object.keys(res.line_items)[0]];
            _.each(lineItem.line_items, function(ltm) {

              var _$card = $(el);

              _$card.data('price', ltm.line_item_cost.display_price); 
              _$card.data('msrp', ltm.line_item_cost.regular_price); 
              $(el).find('.shelves__item__promo .sell').text(ltm.line_item_cost.display_price);
              $(el).find('.shelves__item__msrp .total').text(ltm.line_item_cost.regular_price);
              lowestPrice = lowestPrice==0 ? ltm.line_item_cost.display_price : Math.min(lowestPrice, ltm.line_item_cost.display_price);
              if(ltm.line_item_cost.display_price<ltm.line_item_cost.regular_price) {
                $(el).find('.shelves__item__msrp').show();
              }

            })

            $('.shelves__result__preview .preview__low').text(lowestPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','))
            
          })
        
        }

      })

    }

    var setCarousel = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      if(Array.isArray(self.carouselImages[modelCode])) {
        var htmlTemplate = document.createDocumentFragment();
        self.carouselImages[modelCode].forEach(function(imgUrl){
          var div = document.createElement('div');
          div.classList.add('shelves__intro__carousel__card');
          div.innerHTML = '<img src="' + imgUrl +'">';
          htmlTemplate.appendChild(div)
        })
        document.querySelector('.shelves__intro__carousel').append(htmlTemplate);
      }
    }

    var setHeight = function() {
      var maxBundleDesHeight = 0;
      document.querySelectorAll('.box__wrapper.bundle .box__wrapper__item__desc').forEach(function(elm){
        if(elm.offsetHeight>maxBundleDesHeight) maxBundleDesHeight = elm.offsetHeight;
      })
      document.querySelectorAll('.box__wrapper.bundle .box__wrapper__item__desc').forEach(function(elm){
        elm.style.minHeight  = maxBundleDesHeight +'px';
      })


      var maxSingleTitleHeight = 0;
      document.querySelectorAll('.box__wrapper.single .box__wrapper__item__title').forEach(function(elm){
        if(elm.offsetHeight>maxSingleTitleHeight) maxSingleTitleHeight = elm.offsetHeight;
      })
      document.querySelectorAll('.box__wrapper.single .box__wrapper__item__title').forEach(function(elm){
        elm.style.minHeight  = maxSingleTitleHeight +'px';
      })
    }

    var setShelvesEl = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      // self.hasShelves = availableList.includes(modelCode);
      self.hasShelves = $('.shelves__wrapper').length>0;

      if(self.hasShelves) {
        setCarousel();
        $('.product-details__info-shelves .shelves__wrapper').show();
      }else {
        $('.product-details__info-shelves .shelves__wrapper').hide();
      }

      $('.shelves__intro__carousel').slickExtension({
				dots: true,
				arrows: false,
				fade: false,
				infinite: false,
				slidesToShow: 1,
				slidesToScroll: 1,
				appendArrows: $('.shelves__intro__carousel'),
				appendDots: $('.shelves__intro__carousel')
			});

      getShelvesPrice();
    }

    var bindShelvesEvent = function() {
      self.$shelves.on('click', '.shelves__overlay_open, .preview__btn, .shelves__result__box__update', function(e) {
        e.preventDefault();
        if(self.isAdded) {
          $('.shelves__popup__desc__box__action').hide();
          $('.shelves__popup__desc__box__update').show();
        }else {
          $('.shelves__popup__desc__box__action').show();
          $('.shelves__popup__desc__box__update').hide();
        }

        if($('.shelves__popup').hasClass('hide')) {
          $('.shelves__popup').removeClass('hide');
          document.querySelector("body").style.overflow = "hidden";
          setHeight();
        }
      })
      self.$shelves.on('click', '.shelves__popup__close, .box__close', function() {
        if(!$('.shelves__popup').hasClass('hide')) {
          $('.shelves__popup').addClass('hide');
          document.querySelector("body").style.overflow = "auto";
        }
      })

      self.$shelves.on('click', '.box__wrapper__item', function(el) {
        var shelfItem = $(this);
        var imgsrc = shelfItem.data('src');
        var imgsrcMobile = shelfItem.data('src-mobile');
        self.$shelves.find('.shelves__popup__default_img.desktop').attr('src',imgsrc);
        self.$shelves.find('.shelves__popup__default_img.mobile').attr('src',imgsrcMobile);
        self.$shelves.find('.box__wrapper__item').removeClass('selected');
        shelfItem.addClass('selected');
        var isbundle = shelfItem.find('.child-model').length>0;
        if(isbundle) {
          self.selection = _.map(shelfItem.find('.child-model'), function(shelf) {
            return {
              name: shelfItem.find('.box__wrapper__item__title').text(),
              modelCode: $(shelf).data('mdlcd'),
              desc: shelfItem.find('.box__wrapper__item__desc').text(),
              price: Number(shelfItem.find('.sell').html().replace(/[^0-9.]+/g, '')),
              suggested: Number(shelfItem.find('.total').html().replace(/[^0-9.]+/g, ''))
            } 
          })
        }else {
          self.selection = [{
            name: shelfItem.find('.box__wrapper__item__title').text(),
            modelCode: shelfItem.data('modelcode'),
            desc: shelfItem.find('.box__wrapper__item__desc').text(),
            price: Number(shelfItem.find('.sell').html().replace(/[^0-9.]+/g, '')),
            suggested: Number(shelfItem.find('.total').html().replace(/[^0-9.]+/g, ''))
          }]
        }

        console.log('shelves selection', self.selection)
      })

      self.$shelves.on('click', '.box__add, .box__update', function() {
        self.updateSummary('shelves', self.selection);
        self.isAdded = true;
        if(self.selection) {
          $('.shelves__result__box__wrapper .shelves__result__box__title').text(self.selection[0].name);
          $('.shelves__result__box__desc').text(self.selection[0].desc);
          $('.shelves__result__box__wrapper .shelves__item__price .sell').text(self.selection[0].price);
          $('.shelves__result__box__wrapper .shelves__item__price .total').text(self.selection[0].suggested);
          if(self.selection[0].price<self.selection[0].suggested) {
            $('.shelves__result__box__wrapper .shelves__item__msrp').show();
          }else {
            $('.shelves__result__box__wrapper .shelves__item__msrp').hide();
          }
          $('.shelves__result__preview').hide();
          $('.shelves__result__box').show();

        }
        $('.shelves__popup').addClass('hide');
        var imgsrc = self.$shelves.find('.box__wrapper__item.selected').data('src');
        var imgsrcMobile = self.$shelves.find('.box__wrapper__item.selected').data('src-mobile');
        self.$shelves.find('.shelves__popup__default_img.desktop').attr('src', imgsrc);
        self.$shelves.find('.shelves__popup__default_img.mobile').attr('src', imgsrcMobile);
        document.querySelector("body").style.overflow = "auto";
      })

      self.$shelves.on('click', '.box__remove', function() {
        self.$shelves.find('.box__wrapper__item').removeClass('selected');
        self.selection = [];
        self.isAdded = false;
        self.updateSummary('shelves', '');
        $('.shelves__result__preview').show();
        $('.shelves__result__box').hide();
        $('.shelves__popup').addClass('hide');
        self.$shelves.find('.shelves__popup__default_img.desktop').attr('src',self.originalImg);
        self.$shelves.find('.shelves__popup__default_img.mobile').attr('src',self.originalImgMobile);
        document.querySelector("body").style.overflow = "auto";
      })


    }


    self.init = function() {
      setShelvesEl();
      bindShelvesEvent();

    }

    self.reInit =  function(_$template) {
      self.$shelves.html(_$template.find('.product-details__info-shelves').html());
      setShelvesEl();
    }

  }
  window.AEMapp.tvPdpConf.instances.Shelves = Shelves;

}(jQuery, window));


//SBC-19256
(function ($, window, undefined) {
  
  if($('.product-details__info-sku').text() =='MNA110MS1ACXZA' ){
    if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()){
      $('.multi-column-theme.desktop_layout-center.mobile_layout-center').hide();
      $('.disclaimer .multi-column-container__background').css({position:'relative'})
    }
    $('.product-details__info-ship').find('.shipping-info .ship__message').text("")
    $('.product-details__info-purchase-detail-wrapper[data-payment="PayinFull"] .product-details__info-purchase-detail-desc').text("Pay with your credit card or debit card. Excludes taxes and shipping.");
    $('.product-details__info-purchase').find('[data-payment="splitpay4"]').hide();
    $('.product-details__info-purchase').find('[data-payment="MONTHLY"]').hide()
  }

  $('.product-details__info-ship').on('mouseover','#return-tooltip-icon',function(){
    $('#return-tooltip-modal').show()
  })
  
  $('.product-details__info-ship').on('mouseleave','#return-tooltip-icon',function(){
    $('#return-tooltip-modal').hide()
  })

  // $('.product-details__info-ship').on('mouseover','#speical-tooltip-icon',function(){
  //   $('#special-tooltip-modal').show()
  // })
  
  // $('.product-details__info-ship').on('mouseleave','#speical-tooltip-icon',function(){
  //   $('#special-tooltip-modal').hide()
  // })


}(jQuery, window));

(function ($, window, undefined) {
  if(window.AEMapp.tvPdpConf.getLocationHref().indexOf('us/displays/direct-view-led/ia-series/the-wall') > -1){
    $('.product-details__info-purchase').find('[data-payment="splitpay4"]').hide();
    $('.product-details__info-purchase').find('[data-payment="MONTHLY"]').hide();
  }

}(jQuery, window));

(function ($, window) {
  'use strict';

  var $summarySection = $('.product-details__info-results');
  var $buymoreSection = $('.buy-more-section');
  var $buymorePriceInfo = $('.buy-more-price-info');
  var $buymoreEvents = $('.buy-more-next-step');
  var $buymoreContent = $('.buy-more-inner-content');
  var $tradein = $('.product-details__info-tradein');
  var isIframe = false;
  var stepObj = {};

  function constructPayload(value) {
    var stackableWithAccess = $tradein.find('.tradein__container').data('access-offerid');
    var res = {    
      checkout: value.toLowerCase() === 'checkout' ? true : false,
      qty: 1,
      tradeinPrice: 0, 
      addChildItem: []
    };

    if (summaryObj && !!summaryObj.tbyb) {
      summaryObj.tbyb.forEach(function(prod) {
        res.addChildItem.push({
          sku: prod.modelCode,
          productPrice: Number(prod.sellPrice.replace(/[^0-9.]+/g, '')),
          promoPrice: Number((prod.msrpPrice || prod.sellPrice).replace(/[^0-9.]+/g, '')),
          qty: 1
        });
      });
      res.fin_plan_id = 'tbyb_3pay';
    } else if (summaryObj && summaryObj.access && summaryObj.access.entertainment && summaryObj.access.pc) {
      res.fin_plan_id = '36_MO_EIP_DAAS_TVS';
      res.addChildItem.push({sku: 'UPGRADE-04', productPrice: 0, promoPrice: 0, qty: 1});

      if (summaryObj.access.entertainment) {
        var item = {};
        item.sku = summaryObj.access.entertainment.modelCode || '';
        item.productPrice = summaryObj.access.entertainment.suggested || 0;
        item.promoPrice = summaryObj.access.entertainment.price || 0;
        item.productPrice = typeof item.productPrice == 'number' ? item.productPrice : item.productPrice.replace(/[^0-9.]+/g, '');
        item.promoPrice = typeof item.promoPrice == 'number' ? item.promoPrice : item.promoPrice.replace(/[^0-9.]+/g, '');
        item.qty = summaryObj.access.entertainment.qty || 1;
        res.addChildItem.push(item);
      }

      if (summaryObj.access.pc) {
        var item = {};
        item.sku = summaryObj.access.pc || '';
        item.productPrice = summaryObj.access.price;
        item.promoPrice = summaryObj.access.price;
        item.productPrice = typeof item.productPrice == 'number' ? item.productPrice : item.productPrice.replace(/[^0-9.]+/g, '');
        item.promoPrice = typeof item.promoPrice == 'number' ? item.promoPrice : item.promoPrice.replace(/[^0-9.]+/g, '');
        item.qty = summaryObj.access.entertainment.qty || 1;
        res.addChildItem.push(item);
      }

      if (summaryObj && summaryObj.tradein && !!stackableWithAccess) {
        res.exchange_id = summaryObj.tradein || '';
      }
    } else {
      if (summaryObj && summaryObj.fbt) {
        summaryObj.fbt.forEach(function(data) {
          var item = {};
          item.sku = data.modelCode || '';
          item.productPrice = data.suggested;
          item.promoPrice = data.price;
          item.productPrice = typeof item.productPrice == 'number' ? item.productPrice : item.productPrice.replace(/[^0-9.]+/g, '');
          item.promoPrice = typeof item.promoPrice == 'number' ? item.promoPrice : item.promoPrice.replace(/[^0-9.]+/g, '');
          item.qty = data.qty || 1;
          res.addChildItem.push(item);
        });
      }

      if (summaryObj && summaryObj.offer) {
        summaryObj.offer.forEach(function(data) {
          if (data.modelCode) {
            var item = {};
            item.sku = data.modelCode || '';
            item.productPrice = data.suggested;
            item.promoPrice = data.price;
            item.productPrice = typeof item.productPrice == 'number' ? item.productPrice : item.productPrice.replace(/[^0-9.]+/g, '');
            item.promoPrice = typeof item.promoPrice == 'number' ? item.promoPrice : item.promoPrice.replace(/[^0-9.]+/g, '');
            item.qty = data.qty || 1;
            res.addChildItem.push(item);
          }
        });
      }

      if (summaryObj && summaryObj.bezel) {
        summaryObj.bezel.forEach(function(data) {
          if (data.modelCode) {
            var item = {};
            item.sku = data.modelCode || '';
            item.productPrice = data.suggested;
            item.promoPrice = data.price;
            item.productPrice = typeof item.productPrice == 'number' ? item.productPrice : item.productPrice.replace(/[^0-9.]+/g, '');
            item.promoPrice = typeof item.promoPrice == 'number' ? item.promoPrice : item.promoPrice.replace(/[^0-9.]+/g, '');
            item.qty = data.qty || 1;
            res.addChildItem.push(item);
          }
        });
      }

      if (summaryObj && summaryObj.bundle) {
        summaryObj.bundle.forEach(function(data) {
          if (data.modelCode) {
            var item = {};
            item.sku = data.modelCode || '';
            item.productPrice = data.suggested;
            item.promoPrice = data.price;
            item.productPrice = typeof item.productPrice == 'number' ? item.productPrice : item.productPrice.replace(/[^0-9.]+/g, '');
            item.promoPrice = typeof item.promoPrice == 'number' ? item.promoPrice : item.promoPrice.replace(/[^0-9.]+/g, '');
            item.qty = data.qty || 1;
            res.addChildItem.push(item);
          }
        });
      }

      if (summaryObj && summaryObj.pc) {
        var item = {};
          item.sku = summaryObj.pc.modelCode || '';
          item.productPrice = summaryObj.pc.suggested;
          item.promoPrice = summaryObj.pc.price;
          item.productPrice = typeof item.productPrice == 'number' ? item.productPrice : item.productPrice.replace(/[^0-9.]+/g, '');
          item.promoPrice = typeof item.promoPrice == 'number' ? item.promoPrice : item.promoPrice.replace(/[^0-9.]+/g, '');
          item.qty = summaryObj.pc.qty || 1;
          res.addChildItem.push(item);
      }

      if (summaryObj && summaryObj.install) {
        var item = {};
        item.sku = summaryObj.install.modelCode || '';
        item.productPrice = summaryObj.install.price;
        item.promoPrice = summaryObj.install.price;
        item.productPrice = typeof item.productPrice == 'number' ? item.productPrice : item.productPrice.replace(/[^0-9.]+/g, '');
        item.promoPrice = typeof item.promoPrice == 'number' ? item.promoPrice : item.promoPrice.replace(/[^0-9.]+/g, '');
        item.qty = summaryObj.install.qty || 1;
        res.addChildItem.push(item);
      }

      // tv
      if (summaryObj && summaryObj.tradein) {
        res.exchange_id = summaryObj.tradein || '';
      }
      // audio
      if (summaryObj && summaryObj.audiotradein && summaryObj.audiotradein.modelCode) {
        res.exchange_id = summaryObj.audiotradein.modelCode;
      }
    }

    res.addItem = $('.product-details__info-sku').text();
    res.productPrice = stepObj.initProductPrice;
    res.promoPrice = stepObj.initPromoPrice;

    // calc sum
    if(res.addChildItem.length) {
      for(var i = 0; i < res.addChildItem.length; i++) {
        res.productPrice += Number(res.addChildItem[i].productPrice);
        res.promoPrice += Number(res.addChildItem[i].promoPrice);
      }
    }
    var discount = stepObj.bundleDiscount ? Number(stepObj.bundleDiscount) : 1;
    res.promoPrice = discount * res.promoPrice;
    
    res.productPrice = Number(res.productPrice.toFixed(2));
    res.promoPrice = Number(res.promoPrice.toFixed(2));

    if(summaryObj.zipCode) {
      res.zipCode = summaryObj.zipCode;
    }
    // res.tradeinPrice

    return res;
  }

  function setMainSkuPrice(price1, price2) {
    stepObj.initPromoPrice = price1;
    stepObj.initProductPrice = price2;
    $('.container-wrapper-left__ctas__360').hide();
    $('.product-details__info-review').hide();
    hideSections();
  }

  function updateBuymorePrice(price1, price2) {
    var suggested = stepObj.productPrice || 0;
    var total = stepObj.promoPrice || 0;
    var discount = stepObj.bundleDiscount ? Number(stepObj.bundleDiscount) : 1;
    var isBundleLastStep = (stepObj.lastStep == true || stepObj.lastStep == 'true') && (Number(suggested) != 0 && Number(total) != 0);
    var suggestedPrice = Number(suggested) + price2;
    var totalPrice = Number(total) + price1 * discount;

    if(suggestedPrice > totalPrice) {
      var savePrice = Number((suggestedPrice - totalPrice).toFixed(2));
      $buymorePriceInfo.find('.suggested-price').show();
      $buymorePriceInfo.find('.save-price').show()
      $buymorePriceInfo.find('.suggested-price').text('$' + suggestedPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
      $buymorePriceInfo.find('.save-price').text('Save ' + savePrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
      $buymorePriceInfo.find('.price-with-tradein').html((isBundleLastStep ? '<span class="bundle-text">Bundle price: </span>' : '') + '$' + totalPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
    }
    else {
      $buymorePriceInfo.find('.suggested-price').hide();
      $buymorePriceInfo.find('.save-price').hide();
      $buymorePriceInfo.find('.price-with-tradein').html((isBundleLastStep ? '<span class="bundle-text">Bundle price: </span>' : '') + '$' + totalPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
    }
  }

  function validEdd() {
    if($('#ha-fail').length && $('#ha-fail').css('display') === 'block') {
      return false;
    }
    return true;
  }

  function bindEvents() {
    if(checkIsIframe()) {
      $buymoreEvents.on('click', '.buy-more-cta', function(e) {
        if(validEdd()) {
          var targetValue = $(e.target).text();
          var payload = constructPayload(targetValue);
          if(window && window.parent && window.parent.postMessage) {
            window.parent.postMessage({selectedData: payload}, '*');
          }
        }
      })
      $buymoreContent.on('click', '.buy-more-shopping-text', function(e) {
        if(validEdd()) {
          var targetValue = $(e.target).text();
          var payload = constructPayload(targetValue);
          if(window && window.parent && window.parent.postMessage) {
            window.parent.postMessage({selectedData: payload}, '*');
          }
        }
      })
      $('.product-details-v2').on('click', 'a', function(e) {
        var hrefUrl = $(e.target).attr('href');
        var newTab = $(e.target).attr('target') === '_blank';
        if(newTab) {
          e.preventDefault();
          window.parent.open(hrefUrl, '_blank');
        }
      })
    }
  }

  function checkEnv() {
    var iframeFlag = false;
    var url = window.location.search || '';
    url.split('&').map(function(str) {
      str = str.replace('?', '');
      var subArr = str.split('=');
      if(subArr.length === 2 && subArr[0] && subArr[1]) {
        stepObj[subArr[0]] = subArr[1];
      }
    })

    // hub 1
    if(stepObj.hub == true || stepObj.hub == 'true') {
      iframeFlag = true;
    }

    if(iframeFlag) {
      isIframe = true;
      if(stepObj.siteId) {
        $.cookie('tmktid', stepObj.siteId, {path: '/', domain: '.samsung.com'});
        $.cookie('bmsmEpp', 'true', {path: '/', domain: '.samsung.com'});
        window.AEMapp.EPP.loadPrice()
      }
      //$.cookie('remoteId', stepObj.siteId || 0, {path: '/', domain: '.samsung.com'});
      if($summarySection.length) {
        setTimeout(function(){
          hideSections();
        }, 400)
        $buymoreSection.show();
        if(stepObj.lastStep == true || stepObj.lastStep == 'true') {
          $buymoreEvents.find('.buy-more-cta').text('checkout');
          $buymoreContent.find('.buy-more-shopping-text').show();
        }
        // updateBuymorePrice(0, 0);
      }
    }
  }

  function hideSections() {
    $summarySection.find('.product-details__info-cta').hide();
    $summarySection.find('.product-details__info-wtb').hide();
    $('.product-details__info-substitute__wtb').hide();
  }

  function checkIsIframe() {
    return isIframe;
  }

  function init() {
    checkEnv();
    bindEvents();
  }

	window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.buymoreHelper = {
    init: init,
    isIframe: checkIsIframe,
    updateBuymorePrice: updateBuymorePrice,
    setMainSkuPrice: setMainSkuPrice
  }

}(jQuery, window));
(function($, window) {
  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.instances = window.AEMapp.tvPdpConf.instances || {};
  function Reserve() {
    var selfEnv = this;
    selfEnv.$el = $('.product-details-v2');
    selfEnv.$reserve = selfEnv.$el.find('.product-details__info-reserve');

    var availableList = [];
    var prefix = '.mobileReserve';
    var $main = $('.reserve_information');
    var $form = $(prefix + '__form');
    var $inputGroup = $(prefix + '__group');
    var $input = $inputGroup.find('input');
    var $submit = $form.find(prefix + '__submit');
    var $thankYou = $('.reserve_thankyou');
    var $keepTouch = $(prefix + '__keepTouch');
    var $spinner = $(prefix + '__overlay');
    var campaignId = $form.data('campaign-id');
    var amount = 100;
    var info = {
      tradeIn: undefined,
      tradeIn2: undefined,
      carrier: undefined,
      uuid: undefined,
      keepTouch: 'N'
    };


    var reserveUtag = (function () {
      var reserveType = 'earlyreserve';
      var familyType = 'ARK';
      return {
          land: function () {
            //   window.utag && window.utag.view({
            //       'page_type': reserveType + '>' + familyType,
            //       'pagename_v2': reserveType + '>' + familyType + '>reserve',
            //       'page_channel': 'B2C'
            //   });
          },
          signIn: function () {
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>reserve',
                  'link_id': 'signintoreserve',
                  'link_meta': 'link_name: signintoreserve',
                  'link_position': reserveType + '>' + familyType + '>reserve',
                  'event_name': 'select_signin_link'
              });
          },
          submit: function (isSecondStep) {
              var submit_name = isSecondStep ? 'tradein submit' : 'reserve';
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>' + submit_name,
                  'link_id': submit_name,
                  'link_meta': 'link_name: ' + submit_name,
                  'link_position': reserveType + '>' + familyType + '>' + submit_name,
                  'event_name': 'select_' + submit_name
              });
          },
          thankYou: function () {
              var profileText = 'q4b4_';
              if ($('.mobileReserve__device__option.selected').length == 1) {
                  profileText = profileText + $('.mobileReserve__device__option.selected').data('target-text');
              } else if ($('.mobileReserve__device__option.selected').length == 2) {
                  profileText = profileText + $('.mobileReserve__device__option.selected').eq(0).data('target-text') + '&' + $('.mobileReserve__device__option.selected').eq(1).data('target-text');
              } else if ($('.mobileReserve__device__option.selected').length == 3) {
                  profileText = profileText + 'all';
              }
              profileText = profileText + '_reserve';
              window.utag && window.utag.view({
                  'page_type': reserveType + '>' + familyType,
                  'pagename_v2': reserveType + '>' + familyType + '>' + profileText + '>thankyou',
                  'page_channel': 'B2C'
              });
          },
          keepInTouch: function (value) {
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>reserve',
                  'link_id': 'promotions>preference>' + value,
                  'link_meta': 'link_name:promotions>preference>' + value,
                  'link_position': reserveType + '>' + familyType + '>reserve',
                  'event_name': 'select_promotion_preference_' + value
              });
          },
          update: function () {
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>thankyou',
                  'link_id': 'tradein>submit',
                  'link_meta': 'link_name:tradein>submit',
                  'link_position': reserveType + '>' + familyType + '>thankyou',
                  'event_name': 'select_tradein_submit'
              });
          },
          shopsamsungapp: function () {
              if (window.innerWidth < 769) {
                  window.utag && window.utag.link({
                      'link_cat': reserveType + '>' + familyType + '>thankyoupage_shopsamsungapp_mobile',
                      'link_id': 'shopsamsungapp>click',
                      'link_meta': 'link_name:shopsamsungapp>click',
                      'link_position': reserveType + '>' + familyType + '>thankyoupage_shopsamsungapp_mobile',
                      'event_name': 'thankyoupage_shopsamsungapp_mobile'
                  });
              } else {
                  window.utag && window.utag.link({
                      'link_cat': reserveType + '>' + familyType + '>thankyoupage_shopsamsungapp_desktop',
                      'link_id': 'shopsamsungapp>click',
                      'link_meta': 'link_name:shopsamsungapp>click',
                      'link_position': reserveType + '>' + familyType + '>thankyoupage_shopsamsungapp_desktop',
                      'event_name': 'thankyoupage_shopsamsungapp_desktop'
                  });
              }
          },
          shareButton: function () {
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>share_overlay_open',
                  'link_id': 'share_overlay_open>click',
                  'link_meta': 'link_name:share_overlay_open>click',
                  'link_position': reserveType + '>' + familyType + '>share_overlay_open',
                  'event_name': 'share_overlay_open'
              });
          },
          closeShareButton: function () {
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>share_overlay_close',
                  'link_id': 'share_overlay_close>click',
                  'link_meta': 'link_name:share_overlay_close>click',
                  'link_position': reserveType + '>' + familyType + '>share_overlay_close',
                  'event_name': 'share_overlay_close'
              });
          },
          copyShareLink: function () {
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>copy_share_link',
                  'link_id': 'copy_share_link>click',
                  'link_meta': 'link_name:copy_share_link>click',
                  'link_position': reserveType + '>' + familyType + '>copy_share_link',
                  'event_name': 'copy_share_link'
              });
          },
          shareLink: function (media) {
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>share_' + media + '_click',
                  'link_id': '>share_' + media + '>click',
                  'link_meta': 'link_name:share_' + media + '>click',
                  'link_position': reserveType + '>' + familyType + '>share_' + media + '_click',
                  'event_name': '>share_' + media + '_click'
              });
          },
          unlockToggle: function (option) {
              var text = option ? 'open' : 'close';
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>unlock_tooltip>' + text,
                  'link_id': 'tradein>unlock_tooltip>' + text,
                  'link_meta': 'link_name:tradein>unlock_tooltip>' + text,
                  'link_position': reserveType + '>' + familyType + '>unlock_tooltip',
                  'event_name': 'select_tradein_' + text
              });
          },
          deviceToggle: function (option, device) {
              var text = option ? 'select_' : 'deselect_';
              text += device
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>reserve_device>' + text,
                  'link_id': 'reserve_device_select>' + text,
                  'link_meta': 'link_name:reserve_device_select>' + text,
                  'link_position': reserveType + '>' + familyType + '>device_choose',
                  'event_name': 'select_device_' + text
              });
          },
          allDeviceToggle: function (option) {
              var text = option ? 'select_all' : 'deselect_all';
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>reserve_device>' + text,
                  'link_id': 'reserve_device_select>' + text,
                  'link_meta': 'link_name:reserve_device_select>' + text,
                  'link_position': reserveType + '>' + familyType + '>device_choose',
                  'event_name': 'select_device_' + text
              });
          },
          financeBtn: function (option) {
              window.utag && window.utag.link({
                  'link_cat': reserveType + '>' + familyType + '>finance_btn>' + option,
                  'link_id': 'tradein>finance_btn>' + option,
                  'link_meta': 'link_name:tradein>finance_btn>' + option,
                  'link_position': reserveType + '>' + familyType + '>finance_btn',
                  'event_name': 'select_tradein_' + option
              });
          }
      };
    })();


    var formInit = function (ele) {
      $input.each(function () {
          var self = $(this);
          if (self.val()) self.parent().addClass('filled');
      });
      ele.validate({
          onkeyup: function (element) {
              $(element).valid();
              if ($form.valid()) $submit.prop('disabled', false);
              else $submit.prop('disabled', true);
          },
          rules: {
              firstName: {
                  //required: true,
                  required: {
                      depends: function () {
                          $(this).val($.trim($(this).val()));
                          return true;
                      }
                  },
                  firstNameProhibitedChars: true,
                  maxlength: 50
              },
              lastName: {
                  //required: true,
                  required: {
                      depends: function () {
                          $(this).val($.trim($(this).val()));
                          return true;
                      }
                  },
                  firstNameProhibitedChars: true,
                  maxlength: 50
              },
              email: {
                  //required: true,
                  required: {
                      depends: function () {
                          $(this).val($.trim($(this).val()));
                          return true;
                      }
                  },
                  email: true
              },
              // cothers11: {
              //     //required: false,
              //     required: {
              //         depends: function() {   
              //             $(this).val($.trim($(this).val()));
              //             return false;
              //         }
              //     },
              //     zipcodeUS: true
              // },
              cothers19: {
                  required: {
                      depends: function () {
                          $(this).val($.trim($(this).val()));
                          return false;
                      }
                  },
                  phoneUS: true
              },
              
          },
          errorElement: "div",
          messages: {
              firstName: {
                  required: "Your first name is required."
              },
              lastName: {
                  required: "Your last name is required."
              },
              email: {
                  required: "Email Address is required.",
                  email: "Please enter a valid email address."
              }
          },
          ignore: ':hidden:not(:radio)',
          errorPlacement: function (error, element) {
            console.log('elementssss', element)
              if (element.hasClass('tradeinCustomError') && window.innerWidth < 769) {
                  // custom error placement
                  error.insertAfter($('#mobileReserve__ti'));
                  $('#tiContainer div.error').css("display", "none");
                  // $('html, body').animate({
                  //     scrollTop: $("#mobileReserve__ti").offset().top
                  // }, 500);
              } else {
                  if (element.val() === '' || element.get(0).type === 'radio') return;
                  error.insertAfter(element);

              }
          },
          invalidHandler: function (event, validator) {

          },
          submitHandler: function (form, event) {
              event.preventDefault();
              submit();
          }
      });



    }
    var errorMessage = function (message) {
      $(".ajax-error").remove();
      $form.append('<div class="ajax-error">' + message + '</div>');
    }

    var thankYouPage = function (name) {
      function formatDate(date) {
          var d = new Date(date),
              month = '' + (d.getMonth() + 1),
              day = '' + d.getDate(),
              year = d.getFullYear();

          if (month.length < 2)
              month = '0' + month;
          if (day.length < 2)
              day = '0' + day;

          return [year, month, day].join('');
      }
      $main.hide();
      $thankYou.show();
      if (window.adobe) {
        var profileText = 'odysseyark_';
        if ($('.mobileReserve__device__option.selected').length == 1) {
            profileText = profileText + $('.mobileReserve__device__option.selected').data('target-text');
        } else if ($('.mobileReserve__device__option.selected').length == 2) {
            profileText = profileText + $('.mobileReserve__device__option.selected').eq(0).data('target-text') + '&' + $('.mobileReserve__device__option.selected').eq(1).data('target-text');
        } else if ($('.mobileReserve__device__option.selected').length == 3) {
            profileText = profileText + 'all';
        }
        profileText = profileText + '_reserve';
        var trackObj = {
            "mbox": "target-reserve",
            "params": {}
        };
        trackObj['params'][profileText] = formatDate(new Date());
        window.adobe && window.adobe.target && window.adobe.target.trackEvent(trackObj);
      }
    }

    var getSource = function (oneClick) {
      window.mobilecheck = function () {
        return window.innerWidth < 769;
      }
      function getMobileOperatingSystem() {
          var userAgent = navigator.userAgent || navigator.vendor || window.opera;
          if (/android/i.test(userAgent)) {
              return "-ANDRIOD";
          }
          if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
              return "-IOS";
          }
          return "";
      }

      var device = ~window.location.href.indexOf('/shopapp') ? 'APP' : (window.mobilecheck() ? 'MOBWEB' : 'WEB');
      // var flow = oneClick ? '-ONECLICK' : '-ORGANIC';
      var flow = '';
      var platform = '';
      if (device === 'MOBWEB') {
          platform = getMobileOperatingSystem()
      }
      return device + platform + flow;
    }

    var submit = function () {

      $spinner.addClass('show');
      reserveUtag.submit();

      var formArray = $form.serializeArray();
      var formData, tmpArray = [];
      formArray.forEach(function (item) {
          if (item.name === 'cothers19' && item.value) tmpArray.push(item.name + '=' + item.value.replace(/[ ()-]/g, ''));
          else tmpArray.push(item.name + '=' + item.value);
      });
      formData = tmpArray.join('&');
      serializeData = formData;
      formData += '&campaignid=' + campaignId;
      //formData += '&recaptcha=' + recaptchaVal;
      formData += '&source=' + getSource(false);
      formData += '&is_update=Y';
     

      if (info['keepTouch'] !== 'N') {
          formData += '&cothers2=' + info['keepTouch'];
          if (_.find(formArray, {"name": "cothers19"}) && _.find(formArray, {"name": "cothers19"}).value && $('#keepTouch').prop('checked')) {
              formData += '&cothers5=Y';
          }

      }


      $.ajax({
          type: 'POST',
          url: 'https://pages.samsung.com/us/DailySweepsEntries.do',
          contentType: 'application/x-www-form-urlencoded',
          data: formData,
          success: function (data) {
              if (data.error) {
                  errorMessage('something went wrong. Please try again later.');
                  return
              }
              thankYouPage();
                  // setTimeout(function () {
                  //     $(window).scrollTop(0);
                  // }, 100);
              $spinner.removeClass('show');
              $('.mobileReserve__fixedbutton__submit').attr('disabled', false);

          }
      }).fail(function (error) {

          $spinner.removeClass('show');
          if (error && error.responseText.indexOf('recaptcha') > -1) errorMessage('Google reCaptcha is not loaded. Please try again.');
          else errorMessage('something went wrong. Please try again later.');

      });
    }

    var sectionControl = function() {
      $('.product-details__info-results').hide()
      $('.product-details__info-substitute__data').attr('data-showSummary', 'N')
      $('.product-top-nav__pricing product-top-nav__deferred').hide()
      $('.product-details__info-ship').hide()
      $('.product-details__info-zipBox').hide()
      $('.product-details__info-family').hide() 
      $('.product-top-nav__cta-wrapper').hide()
      $('.product-details__info-reserve').show();     
    }


    selfEnv.init = function() {
      var modelCode = selfEnv.$el.find('.product-details__info-sku').text();
      selfEnv.hasReserve = availableList.includes(modelCode);
      if(!selfEnv.hasReserve) return;

      sectionControl();


      $('.reserve_thankyou .share_button').on('click', function () {

        reserveUtag.shareButton();
        var shareData = {
            title: "Share the excitement about the new Ark Odyssey monitor with your friends and family.",
            text: "I just reserved the Samsung Odyssey Ark Monitor and unlocked a $100 instant credit toward purchase during pre-order and you can, too. Reserve yours now here:",
            url: 'https://shopsamsung.page.link/8LvaXgKCndPXJnNY8',
            subject: "I just reserved the Samsung Odyssey Ark Monitor and unlocked a $100 instant credit toward purchase during pre-order and you can, too. Reserve yours now here:",
            chooserTitle: "Share the excitement about the new Ark Odyssey monitor with your friends and family."
        }
        if (window.innerWidth < 769 && navigator.share) {
  
            if (navigator.share) {
                navigator.share(shareData)
            }
        } else if (window.EcommAndroidClient && window.EcommAndroidClient.share) {
            window.EcommAndroidClient.share(JSON.stringify(shareData));
        } else {
            $('.mobileReserve__share_imgcontainer').addClass('active');
            $('body').addClass('overlay_noscroll');
        }
      });
    
      $('.reserve_thankyou .close_button').on('click', function () {
          reserveUtag.closeShareButton();
          $('.mobileReserve__share_imgcontainer').removeClass('active');
          $('.copy_links_copied').hide();
          $('body').removeClass('overlay_noscroll');
      });
      $('.copy_links_btn').on('click', function () {
          reserveUtag.copyShareLink();
          var r = document.createRange();
          r.selectNode(document.getElementById('links_url'));
          window.getSelection().removeAllRanges();
          window.getSelection().addRange(r);
          document.execCommand('copy');
          $('.copy_links_copied').show();
          setTimeout(function () {
              $('.copy_links_copied').fadeOut();
          }, 1000)
          window.getSelection().removeAllRanges();
      });
      $('.reserve_thankyou .share_icons a').on('click', function () {
          var media = $(this).data('media');
          reserveUtag.shareLink(media);
      });

      $input.each(function () {
          var self = $(this);
          self.focus(function () {
              if (self.attr('name') === 'cothers19') self.next('label').text('Phone');
              self.parent().addClass('filled');
          });
          self.on('propertychange input', function () {
              if (self.attr('name') === 'cothers19') self.next('label').text('Phone');
              self.parent().addClass('filled');
          });
          self.blur(function () {
              if (!this.value) {
                
                  self.parent().removeClass('filled');
              }
              if ($form.valid()) $submit.prop('disabled', false);
              else $submit.prop('disabled', true);
          });
      });
      $keepTouch.find('input').click(function (e) {
        if ($(this).prop('checked')) info['keepTouch'] = 'Y';
        else info['keepTouch'] = 'N';
        reserveUtag.keepInTouch($(this).prop('checked') ? 'checked' : 'unchecked');
      });

      if ($.validator) {
        $.validator.addMethod('firstNameProhibitedChars', function (value, element) {
            var alphaRegExp = new RegExp("^[A-Za-z]+$");
            if (alphaRegExp.test(value)) return true;
            else return false;
        }, 'Numbers & Special characters not allowed');
        $.validator.addMethod("phoneUS", function (value, element) {
            var phone_number = value.replace(/[ ()-]/g, '')
            var phoneRegExp = new RegExp("^[0-9]{10}$");
            return this.optional(element) || phone_number.length > 9 && phoneRegExp.test(phone_number);
        }, "Please enter a valid US Phone number");
        $.validator.addMethod("zipcodeUS", function (value, element) {
            return this.optional(element) || /\d{5}-\d{4}$|^\d{5}$/.test(value)
        }, "Please enter a valid ZIP Code.");
      }
      $('input[validatetype="phone"]').mask('(000) 000-0000');

      formInit($form)
    }

    selfEnv.reInit =  function(_$template) {

    }

  }

  window.AEMapp.tvPdpConf.instances.Reserve = Reserve;

  // var rs = new Reserve();
  // rs.init();

})(jQuery, window, undefined);
(function ($, window) {
  'use strict';

  var ES = {
    'ADD TO CART': 'AADIR AL CARRITO',
    'BUY NOW': 'COMPRAR AHORA',
    'PRE-ORDER': 'HACER UN PEDIDO',
    'RESERVE NOW': 'RESERVAR AHORA',
    'WHERE TO BUY': 'DNDE COMPRAR',
    'CHECKOUT': 'REVISA'
  };

  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.language = {
    translate: function(text) {
      if (document.documentElement.lang == 'es-US' || document.documentElement.lang == 'es' || document.documentElement.lang == 'es_US') {
        return ES[text.toUpperCase()] || text; 
      } else {
        return text;
      }
    }
  }

}(jQuery, window));
(function ($, window) {
  'use strict';

  // $('.product-details__badge .badge__image').on('click', function(e) {
  //   var tootipImage = $(this).parent().find('.badge__tooltip');
  //   if($("[class='badge__tooltip']").length && !$("[class='badge__tooltip']").is(tootipImage)) {
  //     $("[class='badge__tooltip']").addClass('hide');
  //   }
  //   if(tootipImage.hasClass('hide')) {
  //     tootipImage.removeClass('hide');
  //   }else {
  //     tootipImage.addClass('hide');
  //   }
  // })

  $('.product-details__badge .badge__image').on('mouseover', function(e) {
    var tootipImage = $(this).parent().find('.badge__tooltip');
    if(tootipImage.hasClass('hide')) {
      tootipImage.removeClass('hide');
    }
  })
  $('.product-details__badge .badge__image').on('mouseout', function(e) {
    var tootipImage = $(this).parent().find('.badge__tooltip');
    if(!tootipImage.hasClass('hide')) {
      tootipImage.addClass('hide');
    }
  })

  window.cyberOffer = function() {
    var $topNavBadge = $('.product-top-nav__font-badge.product-top-nav__badge');
    var $titleBadge = $('.product-details__info .product-details__info-label');
    var topNavBadge = ($topNavBadge.html() || '').toLowerCase();
    var titleBadge = ($titleBadge.html() || '').toLowerCase();
    var keyWordsList = ['black friday deal'];
    var containsOffer = false;
    var isNeo = $('.product-anchor-nav-v2').hasClass('isNEO');

    for(var i = 0; i < keyWordsList.length; i++) {
      if(topNavBadge.toLowerCase().indexOf(keyWordsList[i]) > -1 && titleBadge.toLowerCase().indexOf(keyWordsList[i]) > -1) {
        containsOffer = true;
        break;
      }
    }
  
    if(containsOffer) {
      $topNavBadge.addClass('cyber-monday');
      $titleBadge.addClass('cyber-monday');
    }
    else {
      $topNavBadge.removeClass('cyber-monday');
      $titleBadge.removeClass('cyber-monday');
    }
  }
}(jQuery, window));

(function ($, window, undefined) {
  'use strict';

  window.AEMapp = window.AEMapp || {}; 
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {}; 

  window.is_touch_device = function() {
    var prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');
    var mq = function(query) {
      return window.matchMedia(query).matches;
    }

    if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {
      return true;
    }

    var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');
    return mq(query);
  }

  if($('.product-details__info-buyNow').hasClass('delivery-cta-available')){
    // update nav
    var link = $('.product-details__info-buyNow').attr('href');
    $('.product-anchor-nav__item-right a').attr('href',link);
    $('.product-anchor-nav__item-right a p').html("BUY NOW");
  }
  if ($('.product-details__info-add').html() === 'BUY NOW') {
    $('.product-anchor-nav__item-right a p').html("BUY NOW");
  }

  // SBC-10004
  if (window.AEMapp.tvPdpConf.getLocationHref().indexOf('class-the-frame-premium-smart-4k-uhd-tv') > -1 && window.Cookies('TVFrameExp') && window.Cookies('TVFrameExp').toLowerCase() === 'true') {
    var items = $('.thumbnail-img');
    var photos = $('.photo-img');
    if (items.length > 5 && photos.length > 5) {
      var first = items.eq(0);
      var target = items.eq(5);
      target.remove();
      target.insertBefore(first);

      var p_first = photos.eq(0);
      var p_target = photos.eq(5);
      p_target.remove();
      p_target.insertBefore(p_first);
      p_first.removeClass('active');
      p_target.addClass('active');

      $('.product-details__info-title').text($('.product-details__info-title').text().replace('QLED', 'QLED Art Mode'));
    }
  }
  
  var Selector = (function () {
    var _that;

    function Selector(el) {
      this.el = el;
      this.selectorArray = [];

      _that = this;
    }

    Selector.prototype.readSelector = function (el) {
      var arr = [];
      // selector object
      var obj = {
        parent: null,
        toggle: null,
        dropDown: null,
        icon: null,
        option: [],
        isActive: false,
        isAvailable: false,
        isSelected: false,
        key: 0
      };
      // option object
      var obj2 = {
        self: null,
        isSelected: false,
        isDisable: false,
        key: 0
      };

      el.find('.product-details__info-selector').each(function (idx) {
        var w = getWidth();
        var selector = $.extend({}, obj);
        selector.option = [];
        selector.parent = $(this);
        selector.toggle = $(this).find('.selector-toggle');
        selector.dropDown = $(this).find('.selector-option');
        // if ($(this).hasClass('active')) {
        //   selector.dropDown.css('height', 'auto');
        // } else {
        //   if (w < 769) {
        //     selector.dropDown.css('height', 12);
        //   } else {
        //     selector.dropDown.css('height', 0);
        //   }
        // }
        selector.icon = $(this).find('.selector-toggle-icon');
        $(this).find('.selector-option').find('.option-value').each(function (idx) {
          var option = $.extend({}, obj2);
          option.self = $(this);
          option.key = idx;
          if ($(this).hasClass('selected')) {
            option.isSelected = true;
          }
          if ($(this).hasClass('disable')) {
            option.isDisable = true;
          }
          selector.option.push(option);
        });
        selector.key = idx;
        if ($(this).hasClass('available')) {
          selector.isAvailable = true;
        }
        if ($(this).hasClass('selected')) {
          selector.isSelected = true;
        }
        if ($(this).hasClass('active')) {
          selector.isActive = true;
        }
        arr.push(selector);
      });
      return arr;
    };

    Selector.prototype.eventBind = function (arr) {
      arr.forEach(function (selector) {
        selector.toggle.click(function (evt) {
          _that.checkStatus(evt, arr, selector);
        });
        /*selector.option.forEach(function (option) {
          option.self.click(function (evt) {
            _that.checkStatus(evt, arr, selector, option);
          });
        });*/
      });
    };

    Selector.prototype.checkStatus = function (evt, arr, selector, option) {
      var w = getWidth();
      if (selector != null && option == null) {
        // toggle
        if (selector.isAvailable) {
          _that.selectorArray.forEach(function (slt) {
            if (slt.key !== selector.key) {
              if (slt.isActive) {
                slt.isActive = false;
                slt.parent.removeClass('active');
                slt.icon.addClass('icon-down-carat');
                slt.icon.removeClass('icon-up-carat');
                if (w < 769) {
                  slt.dropDown.velocity({
                    height: 12
                  }, 500);
                } else {
                  slt.dropDown.velocity({
                    height: 0
                  }, 500);
                }
              }
            }
          });
          if (selector.isActive) {
            selector.isActive = false;
            selector.parent.removeClass('active');
            selector.icon.addClass('icon-down-carat');
            selector.icon.removeClass('icon-up-carat');
            if (w < 769) {
              selector.dropDown.velocity({
                height: 12
              }, 500);
            } else {
              selector.dropDown.velocity({
                height: 0
              }, 500);
            }
          } else {
            selector.isActive = true;
            selector.parent.addClass('active');
            selector.icon.removeClass('icon-down-carat');
            selector.icon.addClass('icon-up-carat');
            selector.dropDown.velocity({
              height: selector.dropDown.get(0).scrollHeight + 2
            }, 500);
          }
        }
      } else if (selector != null && option != null) {
        // for option click
        if (option != null) {
          if (option.isDisable) {

          } else {
            if (selector.isAvailable) {
              selector.isActive = false;
              selector.parent.removeClass('active');
              selector.icon.addClass('icon-down-carat');
              selector.icon.removeClass('icon-up-carat');
              selector.toggle.find('.selector-toggle-title').text(option.self.find('.name').text());
              if (w < 769) {
                selector.dropDown.velocity({
                  height: 12
                }, 500);
              } else {
                selector.dropDown.velocity({
                  height: 0
                }, 500);
              }
            }
            selector.isSelected = true;
            selector.parent.addClass('selected');
            // check if last one
            if (selector.key < _that.selectorArray.length - 1) {
              arr[selector.key + 1].isAvailable = true;
              arr[selector.key + 1].parent.addClass('available');
            }
            selector.option.forEach(function (opt) {
              if (opt.key === option.key) {
                opt.isSelected = true;
                opt.self.addClass('selected');
              } else {
                opt.isSelected = false;
                opt.self.removeClass('selected');
              }
            });
          }
        }
      }
    };

    Selector.prototype.init = function () {
      _that.selectorArray = _that.readSelector(_that.el);
      _that.eventBind(_that.selectorArray);
      // color format
      _that.el.find('.color-selector').find('.color-block').each(function () {
        var cl = $(this);
        cl.attr('data-color', cl.attr('data-color').toLowerCase().split(' ').join('-'));
      });
      //
      _that.selectorArray.forEach(function (slt) {
        slt.option.forEach(function (op) {
          if (op.self.hasClass('selected')) {
            if($('.product-details__info-sku').html().indexOf('SM-F900') > -1)
                slt.toggle.find('.selector-toggle-title').text(slt.toggle.find('.selector-toggle-title').text()+" : "+op.self.find('.name').text());
            else{
                slt.toggle.find('.selector-toggle-title').text(op.self.find('.name').text());
            }
          }
        });
      });
    };

    return Selector;
  })();

  var Thumbnail = (function () {
    var _that;

    // if (getWidth() >= 769) {
    //   var thumbnailImg = $('.thumbnail-img > .product-details__img');
    //   var dataSrc = thumbnailImg.attr('data-lg-src');
    //   thumbnailImg.removeAttr('data-lg-src').attr('src', dataSrc);
    // }

    function Thumbnail(el) {
      this.el = el;
      this.photo = el.siblings('.product-details__photo');
      this.thumbnailArray = [];
      this.photoArray = [];

      _that = this;
    }

    Thumbnail.prototype.readPhoto = function (el) {
      var arr = [];
      // photo object
      var obj = {
        self: null,
        isActive: false,
        img: [],
        key: 0
      };
      // img object
      var obj2 = {
        self: null,
        isActive: false,
        key: 0
      };

      el.find('.photo-color').each(function (idx) {
        var photo = $.extend({}, obj);
        photo.img = [];
        photo.self = $(this);
        if ($(this).hasClass('active')) {
          photo.isActive = true;
        }
        $(this).find('.photo-img').filter(function() {
          return !$(this).hasClass('threesixty');
        }).each(function (idx) {
          if (!$(this).hasClass('video')) {
            var p = $(this).find('.product-details__img');
            if (is_touch_device()) {
              $(this).find('.icon-zoom-in').show();
              $(this).find('.icon-zoom-in').on('touchend click', function(evt) {
                zoomPhoto(p.attr('src').replace('?$product-details-jpg$', '?$default-jpg$'), evt);
              });
            } else {
              p.click(function (evt) {
                zoomPhoto(p.attr('src').replace('?$product-details-jpg$', '?$default-jpg$'), evt);
              });
            }
            if (getWidth() < 769) {
              lazyLoadHandler('mobile', p );
            }
          } else {
            var p = $(this).find('.product-details__img');
            var b = $(this).find('.play-btn-icon');
            p.load(function() {
              b.css('visibility', 'visible');
            })
          }

          var img = $.extend({}, obj2);
          img.self = $(this);
          if ($(this).hasClass('active')) {
            img.isActive = true;
          }
          img.key = idx;
          photo.img.push(img);
        });
        photo.key = idx;
        arr.push(photo);
      });
      return arr;
    };

    Thumbnail.prototype.readThumbnail = function (el) {
      var arr = [];
      // thumbnail object
      var obj = {
        self: null,
        isActive: false,
        img: [],
        key: 0
      };
      // img object
      var obj2 = {
        self: null,
        isRotate: false,
        isVideo: false,
        key: 0
      };

      el.find('.thumbnail-color').each(function (idx) {
        var thumbnail = $.extend({}, obj);
        thumbnail.img = [];
        thumbnail.self = $(this);
        if ($(this).hasClass('active')) {
          thumbnail.isActive = true;
        }
        $(this).find('.thumbnail-img').each(function (idx) {
          var img = $.extend({}, obj2);
          img.self = $(this);
          if ($(this).hasClass('rotate')) {
            img.isRotate = true;
          }
          if ($(this).hasClass('video')) {
            img.isVideo = true;
          }
          img.key = idx;
          thumbnail.img.push(img);
        });
        thumbnail.key = idx;
        arr.push(thumbnail);
      });
      return arr;
    };

    Thumbnail.prototype.eventBind = function (arr, arr2) {
      arr.forEach(function (thumbnail) {
        thumbnail.img.forEach(function (img) {
          img.self.click(function (evt) {
            _that.checkStatus(evt, arr2[thumbnail.key], thumbnail, img);
          });
        });
      });
    };

    Thumbnail.prototype.checkStatus = function (evt, photo, arr, image) {
      // last is not img, but video
      if (image != null && image.key < arr.img.length) {
        var height = $('.product-details__photo').height();
        photo.img.forEach(function (img) {
          if (img.key === image.key) {
            if (!img.self.find('img').get(0).complete || img.self.find('img').get(0).naturalHeight === 0) {
              // set height when load image
              $('.product-details__photo').css('height', height);
              // reset height to auto after image fully loaded
              img.self.find('img').on('load', function() {
                $('.product-details__photo').css('height', 'auto');
              });
            }
            img.isActive = true;
            img.self.addClass('active');

            if (image.isVideo && !img.initVideo) {
              img.initVideo = true;
              img.self.find('.video-container').videoController({
                style: 'inline'
              });

              // hack for ie
              if (/Edge\/|Trident\/|MSIE /.test(window.navigator.userAgent)) {
                var t = img.self.find('.inline-video-container');
                t.css('visibility', 'visible');
                t.css('zIndex', -1);
                img.self.find('.video-container').click(function() {
                  t.css('zIndex', 1);
                  t.css('visibility', 'visible');
                });
              }
            }

          } else {
            img.isActive = false;
            img.self.removeClass('active');
          }
        });
        arr.img.forEach(function (img) {
          if (img.key === image.key) {
            img.self.find('img').addClass('active');
          } else {
            img.self.find('img').removeClass('active');
          }
        });
      }
    };

    Thumbnail.prototype.bindSlick = function(el) {
      if (el && el.children().length > 5) {
        el.slickExtension({
          dots: false,
          arrows: true,
          fade: false,
          infinite: false,
          slidesToShow: 5,
          slidesToScroll: 5,
          appendArrows: el,
          lazyload:'ondemand'
        });
      }
    };

    Thumbnail.prototype.init = function () {
      _that.thumbnailArray = _that.readThumbnail(_that.el);
      _that.photoArray = _that.readPhoto(_that.photo);
      _that.eventBind(_that.thumbnailArray, _that.photoArray);
      _that.bindSlick(_that.el.children());
    };

    return Thumbnail;
  })();

  var Slick = (function () {
    var _that;

    function Slick(el) {
      this.el = el;
      this.photo = el.find('.product-details__photo');
      this.slickArray = [];

      _that = this;
    }

    Slick.prototype.readSlick = function (el) {
      var arr = [];
      // slick object
      var obj = {
        self: null,
        isActive: false,
        key: 0
      };

      el.find('.photo-color').each(function (idx) {
        _that.initSlick($(this));

        var slick = $.extend({}, obj);
        slick.self = $(this);
        if ($(this).hasClass('active')) {
          slick.isActive = true;
        }
        slick.key = idx;
        arr.push(slick);
      });
      return arr;
    };

    Slick.prototype.initSlick = function (el) {
      $(el).slickExtension({
        dots: true,
        arrows: false,
        fade: false,
        mobileOnly: true,
        infinite: false
      });
    };

    Slick.prototype.init = function () {
      _that.slickArray = _that.readSlick(_that.photo);
    };

    return Slick;
  })();

  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.Thumbnail = Thumbnail;
  window.AEMapp.tvPdpConf.Slick = Slick;

  function zoomPhoto(url, evt) {
    $('.product-details__photo-color').zoom({
      url: url,
      magnify: 1,
      eventTarget: evt.currentTarget,
      target: '.container-wrapper-left'
    });

    evt.preventDefault();
    evt.stopPropagation();
  }

  function getWidth() {
    return Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
  }

  function lazyLoadHandler(flag, el) {
    if (flag === 'desktop') {
      if (!el.hasClass('lazyloaded') && !el.hasClass('lazyload')) {
        if (el.attr('data-lazy')) {
          el.addClass('lazyload').removeClass('slick-loading');
        } else {
          el.addClass('lazyloaded').removeClass('slick-loading');
        }
        var dataSrc = el.attr('data-lazy') ? el.attr('data-lazy') : el.attr('src');
        el.removeAttr('data-lazy').attr('data-src', dataSrc).attr('src', dataSrc);
      }
    }
    if(flag === 'mobile') {
      if (el.hasClass('lazyloaded')) {
        var dataSrc = el.attr('data-src');
        el.removeClass('lazyloaded').removeAttr('data-src').attr('src', dataSrc);
      } else if (el.hasClass('lazyload')) {
        var dataSrc = el.attr('data-src');
        el.removeClass('lazyload').removeAttr('data-src').attr('data-lazy', dataSrc);
      }
    }
  }

  $(document).ready(function () {
    var addToCartI18nText = $('.product-detail-i18n').attr('data-i18n-add-to-cart');
    var inYourWishListI18nText = $('.product-detail-i18n').attr('data-i18n-in-your-wishlist');
    var addToWishListI18nText = $('.product-detail-i18n').attr('data-i18n-add-to-wishlist');
    var chooseYourGiftI18nText = $('.product-detail-i18n').attr('data-i18n-choose-your-gift');

    $('#pdp-page .title.section').css('display', 'none');

    function initWishlist() {
      if (!!Cookies.get('xsdcxyn')) {
        $S.getWishlist()
        .then(function(data) {
          if (data.length) {
            for (var i = 0; i < data.length; i++) {
              if (data[i].sku_id == $('.product-details__info-sku').first().text()) {
                $('.cta-wishlist').addClass('selected');
                $('.cta-wishlist img').attr('src', '//image-us.samsung.com/SamsungUS/home/store-locator/icon_wishlist_selected.svg');
                // $('.text', '.cta-wishlist').text(inYourWishListI18nText);
                $('span', '.cta-wishlist').text('In wishlist');
                break;
              }
            }
          }
        })
        .fail(function() {
          console.log('get wishlist failed');
        });
      }
    }

    // init review trigger login drop
    $('.star-details').find('.tl-btn-navigation').on('click', function(event) {
      event.preventDefault ? event.preventDefault() : (event.returnValue = false);
      var url = $(this).prop('href');
      if (window.Cookies('xsdcxyn')) {
        window.location.href = url;
      } else {
        $(document).trigger('onPromptLogin', [url]);
      }
    });

    $('.product-details__info-price').fadeIn();
    if (window.AEMapp.EPP.isEppUser()) {
      $('.product-details__gift').remove();
    } else {
      var toggle = $('.selector-toggle-title', '.product-details__gift');
      var option = $('.select-option', '.product-details__gift');
      var icon = $('.selector-toggle-icon', '.product-details__gift');
      var eppSpan = $('.epp-price', '.product-details__info-results');
      var suggestedSpan = $('.epp-suggested', '.product-details__info-results');
      var monthlySpan = $('.epp-monthly', '.product-details__info-results');
      var samsungPrice = parseFloat(eppSpan.text());
      var totalPrice = suggestedSpan.length > 0 ? parseFloat(suggestedSpan.text()) : null;
      var monthlyPrice = monthlySpan.length > 0 ? parseFloat(monthlySpan.text()) : null;
      if ($('.selected--gift', '.product-details__gift').length) {
        toggle.text($('.selected--gift', '.product-details__gift').find('.model-brief p').text());
      }
      $(document).on('finishEppPrice', function(){
        samsungPrice = parseFloat(eppSpan.text());
        totalPrice = suggestedSpan.length > 0 ? parseFloat(suggestedSpan.text()) : null;
        monthlyPrice = monthlySpan.length > 0 ? parseFloat(monthlySpan.text()) : null;
      });
      $('.ns-pd-select-toggle', '.product-details__gift').click(function() {
        option.toggle();
        icon.toggleClass('icon-down-carat').toggleClass('icon-up-carat');
      });
      if ($(window).width() > 768) {
        $('.ns-gift-option').mouseenter(function() {
          if ($(this).hasClass('selected--gift')) {
            $(this).find('.rollover p').text('Remove this item?');
          } else {
            $(this).find('.rollover p').text('Add this item?');
          }
          $(this).find('.rollover').css('display', 'block');
        });
        $('.ns-gift-option').mouseleave(function() {
          $(this).find('.rollover').css('display', 'none');
        });
      }
      $('.ns-gift-option').click(function(){
        var $el = $(this);
        var tradeInPriceSelected=parseFloat($('.product-details__trade-in--number').html());
        tradeInPriceSelected=isNaN(tradeInPriceSelected)?0:tradeInPriceSelected;
        var numOfMonth=$('.epp-deferred-month','.product-details__financing-wrapper').length==0 ? 24:parseFloat($('.epp-deferred-month','.product-details__financing-wrapper').html());
        var monthlyRate = (numOfMonth==24||isNaN(numOfMonth))? 0.04167:(1/numOfMonth);
        if($el.hasClass("selected--gift")){
          $('.ns-gift-option').removeClass('selected--gift');
          toggle.text(chooseYourGiftI18nText);
          if ($(this).find('.gift-price-not-free').length) {
            eppSpan.text((samsungPrice-tradeInPriceSelected).toFixed(2));
            if (totalPrice) {
              suggestedSpan.text(totalPrice.toFixed(2));
            }
            if (monthlyPrice) {
              monthlySpan.text(((samsungPrice - tradeInPriceSelected) * monthlyRate).toFixed(2));
            }
          }
        }else {
          $('.ns-gift-option').removeClass('selected--gift');
          $el.addClass('selected--gift');
          toggle.text($el.find('.model-brief p').text());
          if ($(this).find('.gift-price-not-free').length) {
            var giftPrice = parseFloat($(this).find('.gift-price-not-free').text())-tradeInPriceSelected;
            eppSpan.text((samsungPrice + giftPrice).toFixed(2));
            if (totalPrice) {
              suggestedSpan.text((totalPrice + giftPrice).toFixed(2));
            }
            if (monthlyPrice) {
              monthlySpan.text(((samsungPrice + giftPrice) * monthlyRate).toFixed(2));
            }
          } else {
            eppSpan.text((samsungPrice-tradeInPriceSelected).toFixed(2));
            if (totalPrice) {
              suggestedSpan.text(totalPrice.toFixed(2));
            }
            if (monthlyPrice) {
              monthlySpan.text(((samsungPrice - tradeInPriceSelected) * monthlyRate).toFixed(2));
            }
          }
        }
        if($('.selected--gift').length > 0) {
          option.hide();
        }
      });
    }

    //addons
    /*
    (function(){
      var $el =  '.product-details';
      var mainAddon = $('.product-details__addons', $el);
      var mainAddonTop = mainAddon.parent().prevAll();
      var mainAddonBottom = $('.product-details__cta-holder-wrapper', $el);
      var label = mainAddon.find('.product-details__addons-label');
      var option = mainAddon.find('.product-details__addons-option');
      var skip = label.find('.skip');
      var text = label.find('.text');
      var selection = option.find('.wrapper');
      var single = option.find('.wrapper[data-price-type="P"]');
      var multiple = option.find('.wrapper[data-price-type="M"]');
      var buyNow = $('.product-details__info-buyNow', $el);
      // price
      var priceLable = $('.product-details__info-price').find('.after:eq(1)');
      var monthlyPriceLable = $('.product-details__financing-price').find('.epp-monthly');
      var price = parseFloat(priceLable.html());
      var monthlyPrice = parseFloat(monthlyPriceLable.html());
      var month = parseInt($('.product-details__financing-price').find('b:eq(1)').html());
      var singleHolder = Array.apply(null, Array(single.length)).map(Number.prototype.valueOf,0);
      var multipleHolder = Array.apply(null, Array(multiple.length)).map(Number.prototype.valueOf,0);
      var additionPrice = $('.addon-monthly', '.product-details__price-wrapper');

      buyNow.click(function() {
        $('.container-wrapper-right').css('minHeight', $('.container-wrapper-right').height());
        mainAddon.prevAll().hide();
        mainAddonTop.hide();
        mainAddonBottom.hide();
        mainAddon.show();
        price = parseFloat(priceLable.html());
        monthlyPrice = parseFloat(monthlyPriceLable.html());
        month = parseInt($('.product-details__financing-price').find('b:eq(1)').html());
        buyNow.hide();
        $('.buy-now-cta-available').show();
      });

      label.click(function(e) {
        e.stopPropagation();
        option.slideToggle(200);
        label.toggleClass('open');
        label.find('.addon-icon').toggleClass('icon-down-carat');
        label.find('.addon-icon').toggleClass('icon-up-carat');
      });
      skip.click(function(e) {
        e.stopPropagation();
        text.text('ADD-ONS (Optional)');
        selection.find('.selection-box').removeClass('selected');
        selection.removeClass('selected');
        mainAddon.prevAll().show();
        mainAddonTop.show();
        mainAddonBottom.show();
        mainAddon.hide();
        $('.container-wrapper-right').css('minHeight', 'none');
        priceLable.html(price);
        monthlyPriceLable.html(monthlyPrice);
        additionPrice.hide();
      });
      selection.each(function() {
        var hide = $(this).find('.wrapper-hide');
        var icon = $(this).find('.addon-icon');
        icon.click(function() {
          icon.toggleClass('icon-down-carat');
          icon.toggleClass('icon-up-carat');
          hide.slideToggle(200);
        });
      });
      single.each(function(idx) {
        var box = $(this).find('.selection-box');
        box.click(function(e) {
          e.stopPropagation();
          $(this).parents('.wrapper').prevAll('[data-price-type="P"]').find('.selection-box').removeClass('selected');
          $(this).parents('.wrapper').nextAll('[data-price-type="P"]').find('.selection-box').removeClass('selected');
          $(this).parents('.wrapper').toggleClass('selected');
          $(this).parents('.wrapper').prevAll('[data-price-type="P"]').removeClass('selected');
          $(this).parents('.wrapper').nextAll('[data-price-type="P"]').removeClass('selected');
          $(this).toggleClass('selected');
          setTitle();
          singleHolder = Array.apply(null, Array(single.length)).map(Number.prototype.valueOf,0);
          if ($(this).hasClass('selected')) {
            singleHolder[idx] = 1;
          } else {
            singleHolder[idx] = 0;
          }
          calcPrice();
        });
      });
      multiple.each(function(idx) {
        var box = $(this).find('.selection-box');
        box.click(function(e) {
          e.stopPropagation();
          $(this).parents('.wrapper').toggleClass('selected');
          $(this).toggleClass('selected');
          setTitle();
          if ($(this).hasClass('selected')) {
            multipleHolder[idx] = 1;
          } else {
            multipleHolder[idx] = 0;
          }
          calcPrice();
        });
      });

      function setTitle() {
        var title = selection.find('.selected')
          .map(function() {
            return $(this).parents('.wrapper-hide').prev('.wrapper-show').find('.name').text();
          })
          .get()
          .join(', ');
        if (title.length) {
          text.text(title);
        } else {
          text.text('ADD-ONS (Optional)');
        }
      }

      function calcPrice() {
        var sp = 0;
        var mp = 0;
        singleHolder.forEach(function(v, i){
          if (v === 1) {
            sp += parseFloat($(single[i]).find('.price div:last-child span:last-child').text());
          }
        });
        multipleHolder.forEach(function(v, i){
          if (v === 1) {
            mp += parseFloat($(multiple[i]).find('.price div:last-child span:last-child').text());
          }
        });
        priceLable.html((price + sp).toFixed(2));
        monthlyPriceLable.html((((price + sp)/month) + mp).toFixed(2));
        if (mp > 0) {
          additionPrice.find('.mp').html(mp);
          additionPrice.show();
        } else {
          additionPrice.hide();
        }
      }
    })();
    */

    //water subscription
      (function(){
        if($('.product-details__subscribe-block').length > 0 && false){

          $('.product-details__subscribe-block').click(function(){
              if(!$(this).hasClass('disabled-subscribe')) {
                  $('.product-details__subscribe-block').removeClass('active-subscribe');
                  $(this).addClass('active-subscribe');

                  if($(this).hasClass('add-to-cart-subscribe')){
                    $('.cta-button.product-details__info-add.subscribe-now-cta').hide();
                    $('.subscribe-now-cta-available').css('display','inline-block');
                    $('.product-anchor-nav__item-right.product-anchor-nav__anchor a .type-p2').html('BUY NOW'); // addtocart

                  }

                  if($(this).hasClass('subscribe-now')){
                      $('.cta-button.product-details__info-add.subscribe-now-cta').css('display','inline-block');
                      $('.subscribe-now-cta-available').hide();
                      $('.product-anchor-nav__item-right.product-anchor-nav__anchor a .type-p2').html('SUBSCRIBE NOW');
                  }
              }
          });

          $('.product-details__subscribe-block-inner').click(function(){

              if($(this).parent().find('.product-details__subscribe-block-outer').length > 0 && !$('.product-details__subscribe-block-outer').hasClass('active')){
                  $('.product-details__subscribe-block-outer').addClass('active');
                  $('.product-details__subscribe-block-outer .rect').addClass('active');
                  $('.cta-button.product-details__info-add.subscribe-now-cta').removeClass('subscribe-cta-disabled');
                  $('.product-details__subscribe-block-outer').velocity({
                      height: $('.product-details__subscribe-block-outer').prop('scrollHeight')
                  }, 500);
              }else{
                  $('.product-details__subscribe-block-outer').removeClass('active');
                  $('.product-details__subscribe-block-outer').velocity({
                      height: 0
                  }, 500);

                  $('.collapsible-content').hide();
                  $('.collapsible').show();
              }
          });

          $('.collapsible').click(function(){
            $(this).hide();
            $('.collapsible-content').show();
            $('.product-details__subscribe-block-outer').velocity({
                height: $('.product-details__subscribe-block-outer').prop('scrollHeight')
            }, 500);
            $('.collapsible-close').show();
          });

          $('.collapsible-close').click(function(){
              $(this).hide();
              $('.collapsible-content').hide();
              $('.product-details__subscribe-block-outer').velocity({
                  height: $('.product-details__subscribe-block-outer--head').innerHeight()+ $('.product-details__subscribe-block-outer--content').innerHeight()+20
              }, 200);

              $('.collapsible').show();
          });

          $('.product-details__subscribe-block-outer .rect').click(function(){
            if($(this).hasClass('active')){
                $(this).removeClass('active');
                $('.cta-button.product-details__info-add.subscribe-now-cta').addClass('subscribe-cta-disabled');
            }else{
                $(this).addClass('active');
                $('.cta-button.product-details__info-add.subscribe-now-cta').removeClass('subscribe-cta-disabled');
            }
          })
        }
      })();

    // // reserve for pick up
    // if ($('.store-locator-holder').length > 0) {
    //   new StoreLocator($('.store-locator-holder'));
    // }

    // var prodId = $('#pdp-page').attr('data-prodid') || '';
    // var catId = $('#pdp-page').attr('data-catid') || '';
    // var prodPrice = $('.product-details__info-price').find('.after').text() || '';
    // var prodName = $('.product-details__info-title').text() || '';
    // var pageType = window.AEMapp.getPageType();

    /* disabled */
    // if(!$('.selector-wrapper').hasClass('show-all-family')){
    //     var selector = new Selector($('.selector-wrapper'));
    //     selector.init();
    // }

    /* move the init to main js */
    // if (!window.AEMapp || !window.AEMapp.tvPdpConf || !window.AEMapp.tvPdpConf.deviceAdapter || !window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()) {
    //   var thumbnail = new Thumbnail($('.product-details__thumbnail'));
    //   thumbnail.init();

    //   var slick = new Slick($('.container-wrapper-left'));
    //   slick.init();
    // }
    

    function enableThreeSixty (path) {
      if (path) {
        var posOfPreset = path.indexOf('scene7.com') > -1 ? path.lastIndexOf('?$') : path.lastIndexOf('.');
        //var preset = path.substring(posOfPreset);
        var preset = '.jpg?$product-details-360-low-jpg$';
        path = path.substring(0, posOfPreset);
        var totalImg = parseInt($('.photo-img-threesixty').attr('img-threesixty-total'));
        var posOfDash = path.lastIndexOf('-');
        var startPos = parseInt(path.substring(posOfDash + 1));
        var pathUrl = path.substring(0, posOfDash) + '-';
        if ($(window).width() > 768) {
          if ($('.threesixty_images', '.photo-img-threesixty').children().length === 0) {
            $('.photo-img-threesixty').ThreeSixty({
              totalFrames: totalImg, // Total no. of image you have for 360 slider
              endFrame: totalImg, // end frame for the auto spin animation
              currentFrame: 0, // This the start frame for auto spin
              imgList: '.threesixty_images', // selector for image list
              progress: '.spinner', // selector to show the loading progress
              imagePath: pathUrl, // path of the image assets
              ext: preset, // file prefix if any
              startFrame: startPos,
              zeroPadding: true,
              responsive: false,
              zeroBased: false,
              width: 'none',
              height: 'none'
            });
          }
        }
      }
    }

    var path = $('.photo-img-threesixty').attr('data-path');
    if (getWidth() >=769) {
      $('.product-details__thumbnail .thumbnail-img.rotate').click(function(){
          enableThreeSixty(path);
      });
    } else {
      enableThreeSixty(path);
    }
    console.log("lazLoad --outer");
    $(window).on('scroll', _.throttle(function () {
      console.log("lazLoad --inner throtteled")
      $('.photo-img').each(function (idx) {
        if (!$(this).hasClass('video') && !$(this).hasClass('lazyLoaded')) {
          var p = $(this).find('.product-details__img');
          console.log("lazLoad --inner")
          lazyLoadHandler('desktop', p);
          !$(this).addClass('lazyLoaded')
        }
      });
    }));


    $(window).on('resize', _.throttle(function () {
      if (getWidth() >= 769) {
        $('.photo-img').each(function (idx) {
          if (!$(this).hasClass('video')) {
            var p = $(this).find('.product-details__img');
            lazyLoadHandler('desktop', p);
          }
        });

        $('.product-details__thumbnail .thumbnail-img.rotate').click(function(){
            enableThreeSixty(path);
        });
      } else {
        $('.photo-img').each(function (idx) {
          if (!$(this).hasClass('video')) {
            var p = $(this).find('.product-details__img');
            lazyLoadHandler('mobile', p);
          }
        });
        enableThreeSixty(path);
      }
    }, 200, {'trailing': true, 'leading': true}));

    if (path) {
      $('.photo-img-threesixty').click(function(){
        if ($(window).width() < 769) {
          $('.product-details__overlay').show();
          if ($('.threesixty_images', '.photo-img-threesixty-mobile').children().length === 0) {
            var posOfPreset = path.indexOf('scene7.com') > -1 ? path.lastIndexOf('?$') : path.lastIndexOf('.');
            //var preset = path.substring(posOfPreset);
            var preset = '.jpg?$product-details-360-low-jpg$';
            path = path.substring(0, posOfPreset);
            var totalImg = parseInt($('.photo-img-threesixty').attr('img-threesixty-total'));
            var posOfDash = path.lastIndexOf('-');
            var startPos = parseInt(path.substring(posOfDash + 1));
            var pathUrl = path.substring(0, posOfDash) + '-';
            $('.photo-img-threesixty-mobile').ThreeSixty({
              totalFrames: totalImg, // Total no. of image you have for 360 slider
              endFrame: totalImg, // end frame for the auto spin animation
              currentFrame: 0, // This the start frame for auto spin
              imgList: '.threesixty_images', // selector for image list
              progress: '.spinner', // selector to show the loading progress
              imagePath: pathUrl, // path of the image assets
              ext: preset, // file prefix if any
              startFrame: startPos,
              zeroPadding: true,
              responsive: false,
              zeroBased: false,
              width: 'none',
              height: 'none'
            });
          }
        }
      });
      $('.product-details__overlay-close').click(function(){
        if ($(window).width() < 769) {
          $('.product-details__overlay').hide();
        }
      })
    }

    if ($(window).width() < 769) {
      $('.video-container').videoController({
        style: 'inline'
      });
    }

    // setLink($('product-details-v2 .product-details__info-add'));

    // var nav = $('.product-anchor-nav-v2');
    // if (nav.length) {
    //   var target = (nav).find('.product-top-nav__cta-wrapper');
    //   setLink(target.find('a'));
    // }
    // $(".product-details__info-description--line").each(function(el) {
    //   $(this).attr('title',$(this).text());
    // });
    // $(".product-details__info-description--line").dotdotdot({
    //   //  configuration goes here
    //   ellipsis: '...',
    //   watch: true,
    //   height:48
    // });
    // window.AEMapp.EPP.loadPrice();

    $('html').click(function(event) {
        if (!$(event.target).is('.top-price-suggested') && !$(event.target).is('.pdp-tooltip')) {
          $('.top-price-suggested').removeClass('active');
          $('.pdp-tooltip').css('display','none');
        }
      });
    $('.top-price-suggested').click(function(event) {
        event.preventDefault;
        $('.top-price-suggested').toggleClass('active');
        if ($('.top-price-suggested').hasClass('active')) {
          $('.pdp-tooltip').css('display','block');

        } else {
        	$('.pdp-tooltip').css('display','none');
        }
      });
  });


    $('.product-details__price-sale').hide();
    $('.product-details__info-saved .save-eppPrice').hide();

    $(window).on('tvPdpConfInit', function() {
      $('.product-details__price-sale').hide();
      $('.product-details__info-saved .save-eppPrice').hide();
    });

    $(document).on('finishEppPrice', function(){
      var prodPriceSale=$('.product-details__price-sale');
      var prodPriceSaved=$('.product-details__info-saved .save-eppPrice');

      var prodNoneEppSavePrice=$('.product-details__info-saved .save-noneEppPrice');
      var prodBeforePrice=$('.product-details__info-saved .before-price');

      if ($('.product-details__price-wrapper .product-details__info-price .epp-price').length && $('.product-details__financing-wrapper').length) {
        if($('.product-details__info .epp-product').hasClass('epp-promo')){
          prodPriceSale.show();
          prodPriceSaved.show();
          prodNoneEppSavePrice.hide();
          prodBeforePrice.hide();
          // if($.cookie("tlgimg")!==null && $.cookie("tlgimg")!==undefined){
          //   prodPriceIcon.attr("src",$.cookie("tlgimg"));
          // }
        }
        var financeId = $('.product-details__financing-wrapper').attr('data-finance-id');
        var finalPrice = parseFloat($('.product-details__price-wrapper .product-details__info-price .epp-price').html().replace(/[\$\,]/g, ''));
        var month = Number($('.product-details__financing-wrapper').attr('data-month'));
        var modelCode = $('.product-details__info-sku').html();
        // SBC-11512
        if (month === 48 && finalPrice < 1000) {
          financeId = 'EIP';
          month = 36;
          $('.product-details__financing-wrapper').attr('data-month', month);
          $('.product-details__financing-wrapper').attr('data-finance-id', financeId);
          var monthPrice = (Math.round(finalPrice * 0.02778 * 100 + 0.499) / 100).toFixed(2);
          $('.product-details__financing-wrapper .product-details__financing-price .epp-monthly').html(monthPrice);
          $('.product-details__financing-wrapper .product-details__financing-price b').eq(1).html(month)
        }
        var changed = (finalPrice < 499.99 && financeId === 'EIP' && month === 36) || (finalPrice <= 1499 && financeId === 'Deferred-Special' && month === 24);
        if (changed) {
          var isHA = window.AEMapp.tvPdpConf.getLocationHref().indexOf('/us/home-appliances') == 0;
          var result = '<div class="product-details__financing-wrapper epp-financing " data-finance-id="Deferred" itemprop="offers" itemscope="" itemtype="http://schema.org/Offer">' +
              (isHA ? '<div class="product-details__financing-br type-p2">or</div>': '') +
              '<p class="product-details__financing-deferred-price">' +
              '<span itemprop="priceCurrency" content="USD">$</span><span class="epp-monthly" itemprop="price" content="">' + (Math.round(finalPrice * 0.08333 * 100 + 0.499) / 100).toFixed(2) +
              '</span>/mo<br>No Interest if Paid in Full<br>Within <span class="epp-deferred-month">12</span> months<sup class="sup-oslash"></sup></p>' +
              '<p class="product-details__financing-message type-p2">excludes tax and shipping</p>' +
              '<a class="product-details__financing-label type-p2" href="/us/financing/" data-link_id="with_samsung_financing" data-link_meta="link_name:with samsung financing" data-link_position="' +
              modelCode + '" data-link_cat="with samsung financing">with samsung financing</a>' +
              '<p class="product-details__financing-interest">Interest is charged from the purchase date<br>if the purchase amount is not paid in full within ' +
              '<span class="epp-deferred-month">12</span><br>months. Standard APR 29.99%. Advertised payment<br>is greater than required minimum payment.</p>' +
              '<meta itemprop="sku" content="' + modelCode + '_installment"><meta itemprop="availability" content="http://schema.org/InStock">'+
              (!isHA ? '<div class="product-details__financing-br type-p2">or</div>': '') +
              '</div>';
          $('.product-details__financing-wrapper.epp-financing').replaceWith(result);
        }
      }
    });

})(jQuery, window);

//modelcode
var _ecr = _ecr || {};
_ecr['ecorebates'] = $('#pdp-page').attr('data-prodid') || '';

$(window).on('load tvPdpConfInit', function(){
  if($('#ecorebates').length > 0) {
    var ecr = document.createElement('script');
    ecr.type = 'text/javascript';
    ecr.async = true;
    ecr.src = ('https:' == document.location.protocol ? 'https://d39vf9bwtb4sua.cloudfront.net' : 'http://static.ecorebates.com') + "/content/scripts/sites/samsung/product.js";
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ecr, s);

    var currentPageUrl = window.AEMapp.tvPdpConf.getLocationHref();
    var ecomFlag = $('#ecorebates').attr('data-ecom') || '';
    if(currentPageUrl.indexOf("home-appliances") > -1 && (ecomFlag == 'N' || ecomFlag === null || ecomFlag ==='')) {
      $('#ecorebates').show();
    } else {
      $('#ecorebates').hide();
    }
  }

  if(window.AEMapp.tvPdpConf.getLocationHref().indexOf("/us/mobile/phones/") > -1 && new RegExp("VZW$").test(_ecr["ecorebates"]) ){
      $('.product-details__info-action').append('<div class="product-detail__verizon-info">Newly purchased devices may be locked to work exclusively on the Verizon Network for 60 days.  For more information visit <a href="https://www.verizonwireless.com/support/device-unlocking-policy/" >https://www.verizonwireless.com/support/device-unlocking-policy/</a><div>');
  }
});

(function ($, window, undefined) {
  // calculate the price difference between current product and other option
  'use strict';
  function updateOptionDetail(fromEppEvent) {
    _.each($('.product-details'), function(el) {
      var keyProduct = $(el).find('.product-details__info-sku').first().text();
      var msrpPrice = $(el).find('.product-details__info-results[data-eppmdlcd=\'' + keyProduct + '\'] .epp-price').text().replace(/[^0-9\.]*/g,'');
      var discount = $(el).find('.product-details__info-results[data-eppmdlcd=\'' + keyProduct + '\'] .epp-price').attr('discount') || 0;
      if (fromEppEvent) discount = 0;
      _.each($(el).find('.option-value'), function(opt) {
        if ($(opt).find('.price-diff').length > 0 && $(opt).attr('data-option-sku') != keyProduct) {
          var optionPrice = $(opt).find('.epp-price').text().replace(/[^0-9\.]*/g,'');
          var diff = Math.round((Number(optionPrice) * 100 - Number(discount) * 100 - Number(msrpPrice) * 100) / 100);
          var text = (diff > 0 ? '+$' : '-$') + Math.abs(diff);
          if (diff == 0) {
            text = '';
          }
          $(opt).find('.price-diff').text(text);
        }
        if ($(opt).hasClass('Carrier')) {
          if (Number(discount) > 0) {
            var sellPrice = $(opt).find('.epp-price').text().replace(/[^0-9\.]*/g,'');
            $(opt).find('.epp-price').text((Number(sellPrice) - Number(discount)).toFixed(2));
            var suggestePrice = $(opt).find('.epp-suggested').text().replace(/[^0-9\.]*/g,'') || sellPrice;
            $(opt).find('.epp-suggested').text(suggestePrice);
          }
          if ($(opt).find('.epp-suggested').text().replace(/[^0-9\.]*/g,'')) {
            $(opt).find('.currency').css('display', 'inline');
          }
        }
      });
      $('.color-selector').find('span[data-active-option]').text($('.color-selector').find('.selected').attr('data-current-selected'));
    });
  }

  if ($('.product-details').length > 0) {
    updateOptionDetail();
    $(document).on('finishEppPrice', function(){
      updateOptionDetail(true);
    });
  }

  $(window).on('tvPdpConfInit', function() {
    if ($('.product-details').length > 0) {
      updateOptionDetail();
      $(document).on('finishEppPrice', function(){
        updateOptionDetail(true);
      });
    }
  });
}(jQuery, window));


//SBC-18812

(function ($, window, undefined) {

  $('.product-details__info-selector').on('click','.show-resolution-overlay',function () {
    console.log('open resolution overlay new')
    $('.resolution-overlay-wrapper').addClass('show')
    document.querySelector("body").style.overflow = "hidden";
  })

  $('.close-resolution-overlay').bind('click', function () {
    $('.resolution-overlay-wrapper').removeClass('show')
    document.querySelector("body").style.overflow = "auto";
  })

}(jQuery, window));

//SBC-19686

(function ($, window, undefined) {

  if($('.product-details__info-label p').text().toLowerCase() === 'new'){
    $('.product-details__info-label').css({"backgroundColor" : '#006BEA'})
  }

  if($('.product-top-nav__font-badge.product-top-nav__badge').text().toLowerCase() === 'new'){
    $('.product-top-nav__font-badge.product-top-nav__badge').css({"backgroundColor" : '#006BEA'})
    $('.product-top-nav__font-badge.product-top-nav__badge').css({"color" : '#FFF'})
  }

}(jQuery, window));

//SBC-19910
(function ($, window, undefined) {

  if($('.selector-option .option-value[data-option-sku="QN77S95CAFXZA"]').length>1){
    $('.selector-option .option-value[data-option-sku="QN77S95CAFXZA"]').first().prepend('<div class="family-option-new">NEW</div>')
  }
  
}(jQuery, window));

(function ($, window, undefined) {
  if ($.validator) {
    $.validator.addMethod("isyoutube",function(value){
            var regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/;
            return value.match(regExp);
    });
    $.validator.addMethod("leftFormValid",function(value){
        return $("#write-review-input-left-phase1").valid();
    });
    $.validator.addMethod("isvalidName",function(value){
            var regExp = new RegExp("^[a-zA-Z0-9 ]*$");
            if (regExp.test(value)) {
                return true;
            } else {
                return false;
            }
    });
  }
  function getParameterByName( name ){
    name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
    var regexS = "[\\?&]"+name+"=([^&#]*)";
    var regex = new RegExp( regexS );
    var results = regex.exec( window.location.href );
    if( results == null )
    return "";
    else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
  }
  function isCIDUser() {
      return ( window.AEMapp.tvPdpConf.getLocationHref().indexOf("/us/home-appliances") > -1 && $.cookie('HARedeem') && $.cookie('HARedeem') == 'true' ) && $.cookie('tppid') && ($.cookie('tppid') == '16568500' || $.cookie('tppid') == '18341500');
  }

  function WriteReview(el){
        var self = this;
        self.$el = $(el);

        var envir ="stg";

        if(window.location.href.indexOf("pre-prod.samsung.com") > -1 || window.location.host.indexOf("stgcl.us.samsung.com") > -1)envir = "stg";
        else if(window.location.href.indexOf("uat.samsung.com") > -1) envir = "uat";
        else if(window.location.href.indexOf("devus.samsung.com") > -1) envir = "dev";
        else if(window.location.href.indexOf("stgwwwus.samsung.com") > -1)envir = "qa";
        else if(window.location.href.indexOf("www.samsung.com") > -1 || window.location.href.indexOf("origincl.us.samsung.com") > -1)envir = "prod";

        self.data={
            'productid':(isCIDUser()?'EMPLOYEE-':'')+self.$el.attr('data-modelCode').replace('/','_'),
            'rating':0,
            'rating_Features':5,
            'rating_Performance':5,
            'rating_Design':5,
            'rating_Value':5,
            'isrecommended':null,
            'contextdatavalue_IncentivizedReview':'false',
            'agreements_reviews_termsAndConditions':false,
            'reviewtext':'',
            'title':''
        };

        self.getUserId = function() {
            if(getParameterByName('usertoken')) {
                return getParameterByName('usertoken');
            } else if (getParameterByName('CID') || getParameterByName('cid')) {
                return btoa(self.data['useremail']);
            } else if (window.Cookies('prof_bpno')) {
                return window.Cookies('prof_bpno');
            } else {
                return btoa(self.data['useremail']);
            }
        };
        self.getCID = function() {
            return (getParameterByName('CID') || getParameterByName('cid'))? 'PIE_EMAIL': 'BV_RATING_SUMMARY';
        }
        self.bvData = {
            'passkey': window.location.href.indexOf("www.samsung.com") > -1 ?'cazyYOSgdvV4AJhcGd18eBaG5v9hyy1bBvfq1WD7wlGSQ':'caD2fzVoskiuo1e5iFJ8nwWrTYa9yNdlhLakJKFVIeofw',
            'action':'submit',
            'campaignid':self.getCID(),
            // 'user': getParameterByName('usertoken') || window.Cookies('prof_bpno') || 'a38ec44320701496fa2c9d0c8cde4c2b7573657269643d73746834693839393435337538716b6c6d357473737435376826646174653d3230313930353037266d61786167653d37',
            'apiversion':5.5,
            'fp': '',
            'locale': 'en_US',
            'contextdatavalue_VerifiedPurchaser': false,
            'agreedtotermsandconditions': true,
            'displaycode': '20545-en_us',
            'sendemailalertwhenpublished': true,
            'sendemailalertwhencommented': true,
            'sendemailalertwhenanswered': true,
        };
        self.internalData={
            'environment':envir,
            'sessionId':$.cookie('ecrSessionId') ? $.cookie('ecrSessionId'):"",
            'step':"0"
        };

        self.photos=[];
        self.video=null;



        self.submitPath = (window.location.href.indexOf("www.samsung.com") > -1 || window.location.href.indexOf("origincl.us.samsung.com") > -1) ? "https://api.bazaarvoice.com/data/submitreview.json?":"https://stg.api.bazaarvoice.com/data/submitreview.json?";
        self.init = function(){
            self.setElement();
            self.bindEvent();

            if(isCIDUser()){
                self.find('.review-cid-input').show();
            }
            if(getParameterByName('usertoken') || getParameterByName('cid').indexOf('eml-') > -1 || getParameterByName('CID').indexOf('eml-') > -1) {
              // $('.write-review-container.write-review').show();
              // $('html body').addClass('no-scroll');
            } else if ( window.Cookies('openReview') && window.Cookies('xsdcxyn')) {
                $('.write-review-container.write-review').show();
                $('html body').addClass('no-scroll');
                // $('#write-review-input-phase0 input[name="name"]').val(window.Cookies('prof_fname') + ' ' + window.Cookies('prof_lname'));
                $('#write-review-input-phase0 input[name="name"]').change();
                window.Cookies.remove('openReview', {domain:'.samsung.com', path: '/'});
                // hide iadvice chat icon
                window.iAdvize && window.iAdvize.navigate && window.iAdvize.navigate('/reviews');
            }

            if(window.AEMapp.tvPdpConf.getLocationHref().indexOf("/us/home-appliances") < 0 ) {
                $('.review-phone').hide();
            }
            $('.write-review-container.write-review input').each(function (el, idx) {
                  if ($(this).val()) {
                    $(this).siblings('label').addClass('filled');
                }
            });
        }

        self.find = function(selector) {
            var jqEL = $(selector, self.$el);
            return jqEL[0] ? jqEL: jqEL;
        }

        self.setElement = function() {
            self.$clickStars = self.find('.inner-content-stars.clickable .icon-star');
            self.$star = {
                "rating":self.find('div[data-star-attr="rating"] .icon-star'),
                "rating_Features":self.find('div[data-star-attr="rating_Features"] .icon-star'),
                "rating_Performance":self.find('div[data-star-attr="rating_Performance"] .icon-star'),
                "rating_Design":self.find('div[data-star-attr="rating_Design"] .icon-star'),
                "rating_Value":self.find('div[data-star-attr="rating_Value"] .icon-star'),
            };

            self.$photoFile = self.find('.inputfile');
            self.$thumbSlider = self.find('.review-media-slider');

            self.$dropDown = self.find('.dropdown');
            self.$rateRecommend = self.find('.rate-group .rate-block');

            self.$phase0  =self.find('.write-phase-0');
            self.$phase1  =self.find('.write-phase-1');

            self.$lessThan3 = self.find('.write-phase-1 .right-phase1');
            self.$moreThan3 = self.find('.write-phase-1 .right-phase2');

            self.$ctaPhase1 = self.find('.button-phase-1');
            self.$ctaPhase0 = self.find('.button-phase-0');
            self.$ctaRightPhase2 = self.find('.button-right-phase-2');

            self.$ctaLeftPhase0 = self.find('.left-button-phase-0');
            self.$ctaLeftPhase1 = self.find('.left-button-phase-1');

            self.$loader = self.find('.spinnerHolder');
            self.$close = self.find('.close-mark');
            self.$serverError = self.find('.server-side-error');

            self.$tcOverlay = self.find('.write-review-overlay-inner');

            self.chatBtn = self.find('.trigger-chatbot');
            
            self.phaseHandle(0);

            if((new Date()).getUTCHours()-4 <= 8 || (new Date()).getUTCHours()-4 >= 18){
                self.$ctaPhase1.html("Write a Review")
            }

            $("#write-review-input-phase0").validate({
                errorContainer: ".error-placeholder",
                ignore: ".ignore",
                onkeyup: false,
                rules: {
                    name: {
                        required: {
                            depends:function(){
                                $(this).val($.trim($(this).val()));
                                return true;
                            }
                        },
                        minlength: 4,
                        isvalidName: true
                    },
                    email: {
                        required: {
                            depends:function(){
                                $(this).val($.trim($(this).val()));
                                return true;
                            }
                        },
                        email: true
                    },
                    rate: {
                        required: true
                    },
                    order: {
                        required: {
                            depends:function(){
                                $(this).val($.trim($(this).val()));
                                return isCIDUser();
                            }
                        }
                    }

                },
                errorElement: "div",
                errorClass: 'error write-review-error',
                messages: {
                    name: {
                        required: "Nickname is required",
                        minlength: "Please enter at least 4 characters",
                        isvalidName: "Your nickname can only contain letters and numbers."
                    },
                    email: {
                        required: "Email is required",
                        email: "Please check your email address"
                    },
                    rate: {
                        required: "Rating is required"
                    },
                    order:{
                        required: "Order Id is required"
                    }

                },
                submitHandler: function(form) {
                    self.data['usernickname'] = $('input[name="name"]', $(form)).val();
                    self.data['useremail'] = $('input[name="email"]', $(form)).val().toLowerCase();
                    self.data['userlocation'] = $('input[name="location"]', $(form)).val();
                    self.internalData['step'] = "1";
                    self.internalData['orderId'] = $('input[name="order"]', $(form)).val();


                    //$("#write-review-input-left-phase0").submit();
                    self.internalPost()
                        .then(function(success) {
                        }).fail(function(error) {
                        });

                    self.renderLeftBlock();

                    // if((new Date()).getUTCHours()-4 > 8 && (new Date()).getUTCHours()-4 <18){
                    //     if(self.data.rating <= '3'){
                    //         self.rightPhaseHandle(0);
                    //     } else{
                    //         self.rightPhaseHandle(1);
                    //     }
                    // }else{
                    //     self.rightPhaseHandle(2);
                    // }

                    if(self.data.rating <= '3'){
                        self.rightPhaseHandle(0);
                    } else{
                        self.rightPhaseHandle(1);
                    }

                    self.phaseHandle(1);
                    if(window.AEMapp.tvPdpConf.getLocationHref().indexOf("/memory-storage/") > -1 || window.AEMapp.tvPdpConf.getLocationHref().indexOf("/smart-home/") > -1 ) {
                        self.rightPhaseHandle(2);
                    }
                    self.leftPhaseHandle(0);
                },
                errorPlacement: function(error, element) {

                    if ((element.attr("name") == "name" || element.attr("name") == "email"|| (isCIDUser() && element.attr("name") == "order"))) {
                        error.insertAfter(element);
                        error.insertAfter(element);
                    }
                    if(element.attr("name") == "rate") {
                        $("#write-review-input-phase0 .inner-content-stars").addClass('error-require');
                    }
                    else
                        return true;
                },
                highlight: function(element, errorClass) {
                    $(element).addClass(errorClass);
                    $(element).siblings('label').addClass(errorClass);
                    $(element).parent().addClass('has-error');

                },
                unhighlight: function(element, errorClass) {
                    $(element).removeClass(errorClass);
                    $(element).siblings('label').removeClass(errorClass);
                    $(element).parent().removeClass('has-error');

                }
            });
            $("#write-review-input-left-phase1").validate({
                errorContainer: ".error-placeholder",
                ignore: ".ignore",
                onkeyup: false,
                rules: {
                    name: {
                        required: {
                            depends:function(){
                                $(this).val($.trim($(this).val()));
                                return true;
                            }
                        },
                        minlength: 4,
                        isvalidName: true
                    },
                    email: {
                        required: {
                            depends:function(){
                                $(this).val($.trim($(this).val()));
                                return true;
                            }
                        },
                        email: true
                    }
                },
                errorElement: "div",
                errorClass: 'error write-review-error',
                messages: {
                    name: {
                        required: "Nickname is required",
                        minlength: "Please enter at least 4 characters",
                        isvalidName: "Your nickname can only contain letters and numbers."
                    },
                    email: {
                        required: "Email is required",
                        email: "Please check your email address"
                    }
                },
                submitHandler: function(form) {
                    self.data['usernickname'] = $('input[name="name"]', $(form)).val();
                    self.data['useremail'] = $('input[name="email"]', $(form)).val().toLowerCase();
                    self.data['userlocation'] = $('input[name="location"]', $(form)).val();


                    self.renderLeftBlock();
                    self.leftPhaseHandle(0);

                },
                errorPlacement: function(error, element) {

                    if ((element.attr("name") == "name" || element.attr("name") == "email") )
                        error.insertAfter(element);
                    else
                        return true;
                },
                highlight: function(element, errorClass) {
                    $(element).addClass(errorClass);
                    $(element).siblings('label').addClass(errorClass);
                    $(element).parent().addClass('has-error');

                },
                unhighlight: function(element, errorClass) {
                    $(element).removeClass(errorClass);
                    $(element).siblings('label').removeClass(errorClass);
                    $(element).parent().removeClass('has-error');

                }
            });
            $("#write-review-input-phase1").validate({
                errorContainer: ".error-placeholder",
                ignore: ".ignore",
                onkeyup: false,
                rules: {
                    headline: {
                        required: {
                            depends:function(){
                                $(this).val($.trim($(this).val()));
                                return true;
                            }
                        },
                        maxlength: 50
                    },
                    review: {
                        required: {
                            depends:function(){
                                $(this).val($.trim($(this).val()));
                                return true;
                            }
                        },
                        minlength: 50,
                        maxlength: 800
                    },
                    agreement:{
                        required:{

                        }
                    },
                    incentivizedReview: {
                        required: window.AEMapp.tvPdpConf.getLocationHref().indexOf("/us/home-appliances") > -1? true: false
                    },
                    "rating_Features": {
                        required: true
                    },
                    "rating_Performance": {
                        required: true
                    },
                    "rating_Design": {
                        required: true
                    },
                    "rating_Value": {
                        required: true
                    },
                    leftInfo:{
                        leftFormValid:true
                    }

                },
                errorElement: "div",
                errorClass: 'error write-review-error',
                messages: {
                    headline: {
                        required: "Headline is required",
                        maxlength:"Characters exceeded max 50."
                    },
                    review: {
                        required: "Review is required",
                        maxlength:"Characters exceeded max 800.",
                        minlength:"Review is too short"
                    },
                    agreement:{
                        required: "Agreement is required",
                    },
                    incentivizedReview: {
                        required: "Please select a value"
                    },
                    "rating_Features": {
                        required: "Rating is required"
                    } ,
                    "rating_Performance": {
                        required: "Rating is required"
                    },
                    "rating_Design": {
                        required: "Rating is required"
                    },
                    "rating_Value": {
                        required: "Rating is required"
                    }

                },
                submitHandler: function(form) {
                    self.data['title'] = $('input[name="headline"]', $(form)).val();
                    self.data['reviewtext'] = (isCIDUser()?'<SAMSUNG EMPLOYEE>  ':'')+$('textarea[name="review"]', $(form)).val().toLowerCase();
                    self.data['agreements_reviews_termsAndConditions'] = true;
                    self.data['contextdatavalue_IncentivizedReview'] = $('select[name="incentivizedReview"]',$(form)).val();
                    self.internalData['step'] = "3";
                    if (typeof window.IGLOO.getBlackbox == 'function') {
                        var bbData = window.IGLOO.getBlackbox();
                        if (bbData.finished) {
                            self.bvData.fp = bbData.blackbox;
                            // Your code to handle blackBoxString
                        }
                    }

                    self.data['userId']= self.getUserId();

                    self.photos.forEach(function(photo,idx){
                        self.data['photourl_'+(idx+1)] = photo.Sizes.normal.Url;
                        self.data['photocaption_'+(idx+1)] = photo.photocaption;
                    });

                    if(self.video!=null){
                        self.data['videourl_1'] = self.video.Url;
                    }

                    if( isCIDUser()){
                        self.data['contextdatavalue_IncentivizedReview'] = 'True';
                        self.bvData['contextdatavalue_Employee'] = 'True';
                    }

                    //$("#write-review-input-left-phase0").submit();
                    self.internalPost()
                        .then(function(success) {
                        }).fail(function(error) {
                    });

                    //$("#write-review-input-left-phase1").submit();
                    self.post(self.submitPath,self.data)
                    .then(function(success) {
                      self.$loader.hide();
                      if(success.HasErrors) {
                        if(success.FormErrors && success.FormErrors.FieldErrorsOrder && success.FormErrors.FieldErrorsOrder[0]) {
                          self.$serverError.text(success.FormErrors.FieldErrors[success.FormErrors.FieldErrorsOrder[0]].Message).show();
                        } else if (success.Errors && success.Errors[0] && success.Errors[0].Message) {
                            self.$serverError.text(success.Errors[0].Message).show();
                        }
                      } else {
                        self.phaseHandle(2);

                        if(window.utag){
                            window.utag.view({
                                pagename_v2 : 'ol:review:thank you',
                            });
                        }
                      }


                      console.log('form submitt');
                    }).fail(function(error) {
                      console.log("error");
                      self.$loader.hide();
                      self.$serverError.text('Something went wrong. Please try again.').show();
                    });

                },
                errorPlacement: function(error, element) {

                    if (element.attr("name") == "headline" || element.attr("name") == "review" || element.attr("name") == "rating_Features"|| element.attr("name") == "rating_Performance" || element.attr("name") == "rating_Design" || element.attr("name") == "rating_Value") {
                        error.insertAfter(element);
                        if (element.attr("name") == "rating_Features" || element.attr("name") == "rating_Performance" || element.attr("name") == "rating_Design" || element.attr("name") == "rating_Value") {
                            $(element).parent().addClass('error-require');
                        }
                    }  else if(element.attr("name") == "agreement")
                        element.addClass("error");
                    else
                        return true;

                },
                highlight: function(element, errorClass) {
                    $(element).addClass(errorClass);
                    $(element).siblings('label').addClass(errorClass);
                    $(element).parent().addClass('has-error');

                },
                unhighlight: function(element, errorClass) {
                    $(element).removeClass(errorClass);
                    $(element).siblings('label').removeClass(errorClass);
                    $(element).parent().removeClass('has-error');

                }
            });
            $("#write-review-video-form").validate({
                errorContainer: ".error-placeholder",
                ignore: ".ignore",
                onkeyup: false,
                rules: {
                    video: {
                        required: {
                            depends:function(){
                                $(this).val($.trim($(this).val()));
                                return true;
                            }
                        },
                        isyoutube: true
                    },

                },
                errorElement: "div",
                errorClass: 'error write-review-error',
                messages: {
                    video: {
                        required: "video link is required",
                        isyoutube:"youtube required"
                    },
                },
                submitHandler: function(form) {
                    var id = self.getYoutubeId($('input[name="video"]', $(form)).val());
                    self.$loader.show();
                    $.ajax({
                        url:'https://www.googleapis.com/youtube/v3/videos?part=snippet&fields=items%2Fsnippet%2Fthumbnails%2Fdefault&key=AIzaSyD1aZoYVpIKzD79SPOp9QLX_X_118xcLUE&id='+id,
                        type:'GET',
                        success: function(data){
                            self.$loader.hide();
                            if(data["items"].length > 0 && data["items"][0]["snippet"]["thumbnails"]["default"]["url"]){
                                self.find('.add-video-phase').hide();

                                self.video = {"Url":$('input[name="video"]', $(form)).val()};
                                self.video["id"] = id;
                                self.video['img'] = data["items"][0]["snippet"]["thumbnails"]["default"]["url"];

                                self.renderThumbnail(self.video,true);
                                self.find('.review-media').show();
                                self.find('.cta-button.video-phase').addClass('disabled');
                                self.find('.video-upload-error').hide();
                            }else{
                                self.$loader.hide();
                                self.find('.video-upload-error').show();
                            }
                        },
                        error: function(data){
                            console.log("error");
                            self.$loader.hide();
                            self.find('.video-upload-error').show();
                        }
                    });

                },
                errorPlacement: function(error, element) {

                    if (element.attr("name") == "video" ) {
                        error.insertAfter(element);
                    }
                    else
                        return true;
                },
                highlight: function(element, errorClass) {
                    $(element).addClass(errorClass);
                    $(element).siblings('label').addClass(errorClass);
                    $(element).parent().addClass('has-error');

                },
                unhighlight: function(element, errorClass) {
                    $(element).removeClass(errorClass);
                    $(element).siblings('label').removeClass(errorClass);
                    $(element).parent().removeClass('has-error');

                }
            });


            Array.prototype.forEach.call(self.$photoFile, function( input ) {
                var label = input.nextElementSibling,
                    labelVal = label.innerHTML;

                input.addEventListener( 'change', function( e ) {
                    var fileName = '';

                    if(this.files && this.files.length > 0){
                        self.$loader.show();
                        var myFormData = new FormData();
                        myFormData.append('photo', this.files[0]);
                        myFormData.append('contenttype', 'review');
                        myFormData.append('passkey','cazyYOSgdvV4AJhcGd18eBaG5v9hyy1bBvfq1WD7wlGSQ');
                        myFormData.append('apiversion','5.5');
                        myFormData.append('displaycode','20545-en_us');
                        myFormData.append('locale','en_US');

                        $.ajax({
                            url: "https://api.bazaarvoice.com/data/uploadphoto.json?",
                            method:'POST',
                            crossDomain: true,
                            asyc:true,
                            processData: false,
                            contentType:false,
                            mimeType:"multipart/form-data; boundary=----WebKitFormBoundaryY8KTpEGKGZm31BHv",
                            data:  myFormData,
                            success:function(data){
                                console.log("success");
                                self.$loader.hide();
                                data = JSON.parse(data);

                                $('.after-upload .img-get').append( $('<img src="'+data.Photo.Sizes.normal.Url+'"/>'));

                                self.photos.push(data.Photo);
                                label.innerHTML = labelVal;
                                self.find('.before-upload').addClass('loaded');
                                self.find('.after-upload').addClass('loaded');
                            },
                            error: function(data){
                                console.log("error");
                                console.log(data);
                                self.$loader.hide();
                            }
                        });
                    }else{
                        self.find('.before-upload').removeClass('loaded');
                        self.find('.after-upload').removeClass('loaded');
                    }

                    if ( this.files && this.files.length > 1 ) {
                        fileName = ( this.getAttribute( 'data-multiple-caption' ) || '' ).replace( '{count}', this.files.length );
                    } else {
                        fileName = e.target.value.split( '\\' ).pop();
                    }

                    if ( fileName ) {
                        label.querySelector( 'span' ).innerHTML = fileName;
                    } else {
                        label.innerHTML = labelVal;
                    }


                });
            });

        }
        self.post = function(path, params){
            self.$loader.show();
            return $.ajax({
                url: path,
                type: 'POST',
                contentType:"application/x-www-form-urlencoded",
                data : $.extend(self.data,self.bvData)
            });
        }

        self.internalPost = function () {
            return $.ajax({
                url: "https://reviewpoint.seacda.com/productreview",
                type: 'POST',
                dataType: 'json',
                'headers': {
                    "x-api-key": "cKeKhOIPmi5r5UjNPKYCP2hOBmVWUN7f5fEO7JnI",
                    "content-type": "application/json",
                },
                data:JSON.stringify($.extend(self.data,self.internalData))
            });
        }

        self.getYoutubeId = function(url){
            var ID = '';
            url = url.replace(/(>|<)/gi,'').split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);
            if(url[2] !== undefined) {
                ID = url[2].split(/[^0-9a-z_\-]/i);
                ID = ID[0];
            }
            else {
                ID = url;
            }
            return ID;
        }


        self.bindEvent = function () {
            self.bindStar();
            self.renderStar('rating');
            self.bindButton();

            $(window).on('resize',function(){
                var size = self.photos.length + (self.video==null? 0 : 1);

                if($(window).width() > 768 && size > 3 && self.$thumbSlider.attr('data-slick-on')=='n'){
                    self.$thumbSlider.attr('data-slick-on','y');
                    self.$thumbSlider.slickExtension({
                        dots: false,
                        fade: false,
                        slidesToShow: 3,
                        infinite: false,
                        arrows: false,
                        touchMove: true,
                        slidesToScroll: 1
                    });
                }

                if($(window).width() <= 768 && self.$thumbSlider.attr('data-slick-on')=='y'){
                    self.$thumbSlider.attr('data-slick-on','n');
                    self.$thumbSlider.slick('unslick');
                }
            })
        }

        self.bindButton = function(){
            self.$ctaPhase0.on('click',function(){
                self.phaseHandle(0);
            });
            self.$ctaRightPhase2.on('click',function(e){
                if(window.utag){
                    utag.link({
                        link_cat: 'customer-support-overlay',
                        link_id: 'user_review_write_review',
                        link_meta:'link_name: write a review',
                        link_position:'rating star_'+self.data.rating+'>customer support_overlay'
                    });
                }

                self.internalData['step'] = "2";

                self.internalPost()
                    .then(function(success) {
                    }).fail(function(error) {
                    });
                if($('#rating').val()) {
                    self.rightPhaseHandle(2);
                } else {
                    $(this).parent().find('.inner-content-stars').addClass('has-error error-require');
                }
                
            });

            self.$ctaLeftPhase1.on('click',function(){
                self.leftPhaseHandle(1);
            });

            self.find('.cta-group.isrecommended .gta-button').on('click',function(e){
                self.data.isrecommended = $(e.target).attr('data-recom-value');
                self.find('.cta-group.isrecommended .gta-button').removeClass('active');
                $(this).addClass('active');
            });

            self.$close.on('click',function(){
                self.$el.hide();
                $('html body').removeClass('no-scroll');
            });

            self.find('.guideline-button').on('click',function (e) {
                e.stopPropagation();
                self.find('.guideline').toggle();
                self.find('.write-review-textarea-group .label-bottom').addClass("filled");
            });
            self.find('.guideline').on('click',function (e) {
                e.stopPropagation();
                $(this).hide();
                $('.write-review-textarea-group textarea').focus();
                self.find('.write-review-textarea-group .label-top').show();
            });

            $('.write-phase-1').on('click', function(e){
                self.find('.guideline').hide();
            });

            self.find('label.agreement-checkbox a').on('click', function(e) {
                e.preventDefault();
                self.$tcOverlay.show();
            });
            self.$tcOverlay.find('.icon-x').on('click', function() {
                self.$tcOverlay.hide();
            });

            self.chatBtn.on('click', function(e) {
                e.preventDefault();
                var lob = window.location.pathname.split('/')[3];
                var product = $('#pdp-page').data('prodid');
                var rating = self.data['rating'];
                var category = $('#pdp-page').data('catname')

                window.utag.link({
                  link_cat: 'review overlay message us',
                  link_id: 'Message Us',
                  link_meta:'link_name:'+ 'Message Us',
                  link_position:'user details_overlay',
                  event_name:'ati_shortvideo_click'
                });

                window.sprChatSettings = window.sprChatSettings || {};
                window.sprChatSettings = {
                    appId: "60addc26b0c0ea0d85c0840c_app_943263",
                    clientContext: {
                        '_c_60bb33172f22ce35aab1bdfa': ['Review Page'],
                    },
                };
                window.sprChat('updateClientContext', {
                    '_c_60d30be749f0c140b6775576': [lob],  // SEA_LOB,
                    '_c_60d3076949f0c140b6773e94': [category],  // SEA_PRODUCT CATEGORY, 
                    '_c_60bb6f1ce957a06967b11f84': [product],  // SEA_Product Model
                    '_c_60bb6f7be957a06967b12a7a': [rating],  // SEA_Product Review Rating
                }); 
                console.debug("data passed to sprChat", {
                    '_c_60d30be749f0c140b6775576': [lob],  // SEA_LOB,
                    '_c_60d3076949f0c140b6773e94': [category],  // SEA_PRODUCT CATEGORY, 
                    '_c_60bb6f1ce957a06967b11f84': [product],  // SEA_Product Model
                    '_c_60bb6f7be957a06967b12a7a': [rating],  // SEA_Product Review Rating
                });
                window.sprChat('enable') 
                window.sprChat('open');
            })

            self.bindPhotoVideoButton();

        }

        self.bindPhotoVideoButton = function(){

            self.find('.cta-button.photo-phase').on('click',function(){
                if(self.photos.length <= 6) {
                    self.find('.add-photo-phase').show();
                }
            });
            self.find('.cta-button.video-phase').on('click',function(){
                if(self.video == null)
                    self.find('.add-video-phase').show();
            });

            self.find('.cta-remove-photo').on('click',function () {
                self.photos.pop();
                self.photoInit();
                self.find('.add-photo-phase').hide();
            });
            self.find('.cta-add-photo').on('click',function () {
                self.photos[self.photos.length-1].photocaption = $('input[name="photocaption"]').val();
                self.photoInit();
                self.find('.add-photo-phase').hide();
                self.renderThumbnail(self.photos[self.photos.length-1],false);
                if(self.photos.length == 6) self.find('.cta-button.photo-phase').addClass('disabled');
                self.find('.review-media').show();

            });

            self.find('.add-phase-title .icon-trigger').on('click',function(){
                $(this).parent().parent().hide();
            });

            $(document).on('click','.review-media-thumbnail-remove', function(){
                var thumbnail = $(this).parent();
                var id = thumbnail.attr('data-thumbnail-id');

                if( self.video != null && self.video.id == id){
                    self.video = null;
                    self.find('.cta-button.video-phase').removeClass('disabled');
                }else{
                    self.photos = self.photos.filter(function (ele) {
                        return ele.Id != id;
                    });
                    if(self.photos.length < 6) self.find('.cta-button.photo-phase').removeClass('disabled');
                    self.find('.review-media-desc span').html(6-self.photos.length);
                }

                var size = self.photos.length + (self.video==null? 0 : 1);

                if(self.$thumbSlider.attr('data-slick-on') == 'y'){
                    self.$thumbSlider.slick('slickRemove', $('.slick-slide',self.$thumbSlider).index(thumbnail));
                }else{
                    thumbnail.remove();
                }
                if(size < 4 && self.$thumbSlider.attr('data-slick-on') == 'y'){
                    self.find('.review-media-slider').slick('unslick');
                    self.$thumbSlider.attr('data-slick-on','n');
                }

                if(size == 0) self.find('.review-media').hide();

            });
        }

        self.handleChatbotPhase = function() {
            $('.right-phase0').hide();
            $('.right-phase1').hide();
            $('.right-phase0-1').show();
            // self.data[ 'rating' ] = 5;
            // $('#' +'rating').val('5');
            // self.renderStar('rating');
        }
        self.renderLeftBlock = function(){
            self.$phase1.find('.left-block.name .left-block-subtitle').html(self.data.usernickname);
            self.$phase1.find('.left-block.email .left-block-subtitle').html(self.data.useremail);
            self.$phase1.find('.left-block.location .left-block-subtitle').html(self.data.userlocation);

            $('input[name="name"]').val(self.data.usernickname);
            $('input[name="name"]').parent().find('.write-review-input-label').addClass('filled');
            $('input[name="email"]').val(self.data.useremail);
            $('input[name="email"]').parent().find('.write-review-input-label').addClass('filled');
            $('input[name="location"]').val(self.data.userlocation);
            $('input[name="location"]').parent().find('.write-review-input-label').addClass('filled');
        }

        self.bindStar = function () {
            self.$clickStars.on('click',function(e){
                var starValue = $(e.target).attr('data-star-val');
                var starAtr = $(e.target).parent().attr('data-star-attr');
                self.data[ starAtr ] = starValue;

                $('#' +starAtr).val(starValue);
                $('#' +starAtr).siblings('.write-review-error').hide();
                $(this).closest('.inner-content-stars').removeClass('error-require');

                self.renderStar(starAtr);
            });
        }
        self.renderStar = function(target){
            self.$star[target].each(function (idx) {
                $(this).removeClass('fill');
                if($(this).attr('data-star-val') <= self.data[target])
                    $(this).addClass('fill');

            });
        }

        self.phaseHandle = function(idx){
            for(var i = 0;i < 3;i++){
                if(i==idx){
                  self.find('.write-phase-'+i)[0].scrollIntoView();
                  self.find('.write-phase-'+i).show();
                }
                else self.find('.write-phase-'+i).hide();
            }
            if(idx === 1) {
                $('.inner-content-stars.display').addClass('hide');
            } else {
                $('.inner-content-stars.display').removeClass('hide');
            }
            $('.right-phase0-1').hide();
            
        }
        self.rightPhaseHandle = function(idx){
            for(var i = 0;i < 3;i++){
                if(i==idx){
                  self.find('.write-phase-1 .right-phase'+idx).show();
                  $('.write-review-container-inner__right')[1].scrollTop = 0;
                }
                else self.find('.write-phase-1 .right-phase'+i).hide();
            }
            if (idx === 2) {
                $('.inner-content-stars.display').removeClass('hide');
            } else {
                $('.inner-content-stars.display').addClass('hide');
            }
            
            $('.right-phase0-1').hide();


            if( $(window).width() <= 768 && idx == 2 && $('.rate-group.netpromoterscore').attr('data-slick')=='N'){
                $('.rate-group.netpromoterscore').attr('data-slick','Y');
                $('.rate-group.netpromoterscore').slickExtension({
                    dots: false,
                    fade: false,
                    slidesToShow: 5,
                    mobileOnly: true,
                    infinite: false,
                    arrows: false,
                    touchMove: true,
                    slidesToScroll: 1
                });
            }
        }

        self.leftPhaseHandle = function(idx){
            for(var i = 0;i < 2;i++){
                if(i==idx)self.find('.write-phase-1 .left-phase'+idx).show();
                else self.find('.write-phase-1 .left-phase'+i).hide();
            }
        }

        self.photoInit = function(){
            self.find('.before-upload').removeClass('loaded');
            self.find('.after-upload').removeClass('loaded');
            $('.after-upload .img-get').html("");
            $('#file').value="";
        }

        self.renderThumbnail = function (ele,isVideo) {

            var size = self.photos.length + (self.video==null? 0 : 1);

            if(self.$thumbSlider.attr('data-slick-on')=='y') self.$thumbSlider.slick('unslick');

            if(isVideo){
                self.$thumbSlider.prepend(
                    $('<div class="review-media-thumbnail" data-thumbnail-id="'+ ele.id+'"><div class="review-media-thumbnail-img">'+
                        '<img src="'+ ele.img+ '" />'+
                        '</div> <div class="review-media-thumbnail-remove">&#10006;</div></div>')
                )
            }else{
                self.$thumbSlider.append(
                    $('<div class="review-media-thumbnail" data-thumbnail-id="'+ ele.Id+'"><div class="review-media-thumbnail-img">'+
                        '<img src="'+ ele.Sizes.thumbnail.Url+ '" />'+
                        '</div> <div class="review-media-thumbnail-remove">&#10006;</div></div>')
                )
                self.find('.review-media-desc span').html(6-self.photos.length);
            }

            if($(window).width() > 768 && size > 3){
                self.$thumbSlider.attr('data-slick-on','y');
                self.$thumbSlider.slickExtension({
                    dots: false,
                    fade: false,
                    slidesToShow: 3,
                    infinite: false,
                    arrows: false,
                    touchMove: true,
                    slidesToScroll: 1
                });
            }

        }

        return {
            init: function() {
                self.init();
            }
        }
    }
  
  function initReview() {
      var reviewIn = false;
      var reviewBvSection = $('#reviews');
      
      $('.bv-write-review').addClass("disabled");
      $('.write-review .write-review-input-group').each(function(index, el) {
        $(el).children('.write-review-input-box').on('focus', function(e, noUtag) {
          $(el).children('.write-review-input-label').addClass('filled');
          $(el).children('.write-review-input-box').addClass('onfocus');

        });
        $(el).children('.write-review-input-box').on('blur', function(e) {
          if (!$(el).children('.write-review-input-box').val()) {
            $(el).children('.write-review-input-label').not('input[name="dob"]').removeClass('filled');
          }

          $(el).children('.write-review-input-box').removeClass('onfocus');
          if ($('#write-review-input-phase0').valid()) {
            $('.button-phase-0').attr('disabled', false);
          }
        });
        $(el).children('.write-review-input-box').on('change', function(e) {
          if (e.target.value !== '') {
            $(this).addClass('filled');
            $(this).siblings('.write-review-input-label').addClass('filled');
          } else {
            $(this).removeClass('filled');
            $(this).siblings('.write-review-input-label').removeClass('filled');
          }
        });
        $(el).find('label').on('click', function(e) {
          $(el).children('.write-review-input-label').addClass('filled');
          $(el).children('.write-review-input-box').focus();
        });
      });
      $('#cutome-write-review').css('display','inline-block');
      $('#cutome-write-review').on('click',function () {
        if(getParameterByName('usertoken') || getParameterByName('cid').indexOf('eml-') > -1 || getParameterByName('CID').indexOf('eml-') > -1) {
          $('.write-review-container.write-review').show();
          $('html body').addClass('no-scroll');
        } else if(!window.Cookies('xsdcxyn')) {
            window.Cookies('openReview', 'true', {domain:'.samsung.com', path: '/'});
            window.location.href = '/us/account/signin/?option=write-review&redirect=' + encodeURIComponent(window.location.href);
        } else {
            $('.write-review-container.write-review').show();
            $('html body').addClass('no-scroll');
            // $('#write-review-input-phase0 input[name="name"]').val(window.Cookies('prof_fname') + ' ' + window.Cookies('prof_lname'));
            $('#write-review-input-phase0 input[name="name"]').change();
        }
        $('.write-review-container.write-review input').each(function (el, idx) {
            if ($(this).val()) {
                $(this).siblings('label').addClass('filled');
            }
        });
        // hide iadvice chat icon
        window.iAdvize && window.iAdvize.navigate && window.iAdvize.navigate('/reviews');
      });

      _.each($('.write-review-container.write-review'), function(el) {
        new WriteReview(el).init();
      });
    

      $(document).on('click','.bv_main_container_row_flex',function(){
          var rtext = $('.bv_avgRating_component_container').text() + $('.bv_numReviews_component_container').text();
          if(window.utag){

              utag.link({
                  link_cat: 'pdp review rating',
                  link_id: rtext,
                  link_meta:'link_name:'+rtext,
                  link_position:'pdp>review rating'
              });
          }
      });

      $(document).on('click','.bv_histogram_row_container',function (e) {
          if(window.utag){
              var star_num = $(this).find('.bv_histogram_row_prefix').text() + " star";
              utag.link({
                  link_cat: 'pdp review rating overlay',
                  link_id: star_num,
                  link_meta:'link_name:'+star_num,
                  link_position:'pdp>review rating overlay'
              });
          }
      });
      $(document).on('click','.bv_button_component_container .bv_button_buttonFull ',function (e) {
          if(window.utag){
              utag.link({
                  link_cat: 'pdp review rating overlay',
                  link_id: 'read reviews',
                  link_meta:'link_name:read reviews',
                  link_position:'pdp>review rating overlay'
              });

          }
      });

      var reviewScrollHandler = function () {
        if (reviewBvSection.length == 0) return true;
          var top_of_element = reviewBvSection.offset().top;
          var bottom_of_element = reviewBvSection.offset().top + reviewBvSection.outerHeight();
          var bottom_of_screen = $(window).scrollTop() + $(window).innerHeight();
          var top_of_screen = $(window).scrollTop();

          if ((bottom_of_screen > top_of_element) && (top_of_screen < bottom_of_element)){
              // the element is visible, do something
              if(!reviewIn){
                  if(window.utag){
                      window.utag.view({
                          pagename_v2 : 'pdp>review rating>read review section',
                      });
                  }
              }
              reviewIn = true;
          } else {
              // the element is not visible, do something else
              reviewIn = false;
          }
      }
      $(window).on('scroll', reviewScrollHandler);

      $(window).one('tvPdpConfUnmount', function() {
        $(document).off('click','.bv_main_container_row_flex');
        $(document).off('click','.bv_main_container_row_flex');
        $(document).off('click','.bv_button_component_container .bv_button_buttonFull ');
        $(window).off('scroll', reviewScrollHandler);
      })
  }

  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.initReview = initReview;

  // $(document).ready(function () {
  //   if (!window.AEMapp.tvPdpConf.deviceAdapter || !window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()) {
  //       initReview();
  //   }
  // });
}(jQuery, window));

(function ($, window, undefined) {
  'use strict';

  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.instances = window.AEMapp.tvPdpConf.instances || {};
  var getLocationHref = window.AEMapp.tvPdpConf.getLocationHref;

  function SoundbarMount($app) {
    var self = this;
    self.$el = $app.el;
    self.$smount = self.$el.find('.product-details__info-smount');

    var availableList = ['HW-Q950A/ZA'];

    var getSoundbarMountPrice = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      var requestData = [{
        'quantity': 1,
        'sku': modelCode,
        'line_items': []
      }];

      _.each(self.$smount.find('.soundbar-mount-list-item'), function(el) { 
        var childLineItem = [{
          'quantity': 1,
          'sku': $(el).data('mdlcd')
        }];

        requestData[0].line_items = childLineItem;
        var apiUrl = $S.arbitrate() + '?siteId=';
        var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
				if ($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) {
					requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
				}

        $.ajax({
          url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
          data: JSON.stringify(requestData),
          type: 'POST',
          dataType: 'json',
          'headers': {
            'content-type': 'application/json'
          }
        }).then(function(res) {
          var lineItem =  res.line_items[Object.keys(res.line_items)[0]];
          _.each(lineItem.line_items, function(ltm) {
            if (ltm.sku_id == lineItem.sku_id) {
              ltm = lineItem;
            }
            var _$card = self.$smount.find('.soundbar-mount-list-item[data-mdlcd="'+ ltm.sku_id +'"]');

            _$card.data('price', ltm.line_item_cost.display_price); 
            _$card.data('msrp', ltm.line_item_cost.regular_price); 
            _$card.find('.sell').text(ltm.line_item_cost.display_price);
            _$card.find('.total').text(ltm.line_item_cost.regular_price);

            if(ltm.line_item_cost.display_price == 0) {
              //set free text
              var sellHTML = 'Free<span class="sell" style="display:none">0</span>';
              _$card.find('.soundbar-mount-item-promo').html(sellHTML);
            }

            if(ltm.line_item_cost.display_price<ltm.line_item_cost.regular_price) {
              _$card.find('.soundbar-mount-item-msrp').show();
             
            }
          })
        });
      })
    }
    
    var setSoundbarMountEL = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      // self.hasSoundbarMount = availableList.includes(modelCode);
      self.hasSoundbarMount = $('.soundbar-mount-wrapper').length>0;
      getSoundbarMountPrice();
      if(self.hasSoundbarMount) {
        self.$smount.show();
      }else {
        self.$smount.hide();
      }
    }

    var bindSoundbarMountEvent = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();

      self.$smount.on('click', '.soundbar-mount-list-item', function() {

        $(this).toggleClass('selected')
        var smountData = '';
        if (self.$smount.find('.soundbar-mount-list-item.selected').length > 0) {
          smountData = _.map(self.$smount.find('.soundbar-mount-list-item.selected'), function(smount) {
            return {
              name: $(smount).data('name'),
              modelCode: $(smount).data('mdlcd'),
              price: Number($(smount).find('.sell').html().replace(/[^0-9.]+/g, '')),
              suggested: Number($(smount).find('.total').html().replace(/[^0-9.]+/g, ''))
            } 
          })
        }

        self.updateSummary('smount', smountData);

      })
    }
    self.init = function() {
      setSoundbarMountEL();
      bindSoundbarMountEvent()
    }
    self.reInit =  function(_$template) {
      self.$smount.html(_$template.find('.product-details__info-smount').html());
      setSoundbarMountEL();
    }
  }
  window.AEMapp.tvPdpConf.instances.SoundbarMount = SoundbarMount;
}(jQuery, window));
(function ($, window, undefined) {
  'use strict';

  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.instances = window.AEMapp.tvPdpConf.instances || {};
  var getLocationHref = window.AEMapp.tvPdpConf.getLocationHref;

  function CommunityReward($app) {
    var self = this;
    self.updateSummary = function(){};
    self.$el = $app.el;
		self.$communityReward = self.$el.find('.product-details__info-rewards');


    var availableList = [];

    var setRewardsEl = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      self.hasRewards = availableList.includes(modelCode);

      if(self.hasRewards) {
        $('.product-details__info-rewards .rewards-wrapper').show();
      }else {
        $('.product-details__info-rewards .rewards-wrapper').hide();
      }
    }

    var bindRewardsEvent = function() {
			self.$communityReward.on('click', '.rewards-details .open-overlay', function(e) {
        e.preventDefault();

        if($('.rewards-popup').hasClass('hide')) {
          $('.rewards-popup').removeClass('hide');
          document.querySelector("body").style.overflow = "hidden";
        }
      })
      self.$communityReward.on('click', '.rewards-popup-close', function() {
        if(!$('.rewards-popup').hasClass('hide')) {
          $('.rewards-popup').addClass('hide');
          document.querySelector("body").style.overflow = "auto";
        }
      })

    }


    self.init = function() {
      setRewardsEl();
      bindRewardsEvent();

    }

    self.reInit =  function(_$template) {
      setRewardsEl();
    }

  }

  window.AEMapp.tvPdpConf.instances.CommunityReward = CommunityReward;
}(jQuery, window));

(function ($, window, undefined) {
  function prependZero(val) {
    if (val < 10) {
      val = '0' + val;
    }
    return val;
  }

  function getTimeRemaining(endtime) {
    var t = Date.parse(endtime) - Date.parse(new Date());
    var seconds = prependZero(Math.floor((t / 1000) % 60));
    var minutes = prependZero(Math.floor((t / 1000 / 60) % 60));
    var hours = prependZero(Math.floor((t / (1000 * 60 * 60)) % 24));
    var days = prependZero(Math.floor(t / (1000 * 60 * 60 * 24)));
      // var days = Math.floor(t / (1000 * 60 * 60 * 24));

    return {
      'total': t,
      'days': days,
      'hours': hours,
      'minutes': minutes,
      'seconds': seconds
    };
  }

  function CountDown(options) {
    this.options = options;
  }

  $.extend(CountDown.prototype, {
    init: function (el) {
      var _this = $(el);
      this.deadline = new Date(Date.parse(new Date()) + this.options.timeRemaining);
      this.daysSpan = _this.find('.days');
      this.hoursSpan = _this.find('.hours');
      this.minutesSpan = _this.find('.minutes');
      this.secondsSpan = _this.find('.seconds');
      this.timeinterval = setInterval(this.updateClock.bind(this), 1000);
      _this.addClass('inited');
      this.updateClock();
    },
    updateClock: function () {
      var t = getTimeRemaining(this.deadline);
      if (this.daysSpan) {
        this.daysSpan.text(t.days);
      }
      if (this.hoursSpan) {
        this.hoursSpan.text(t.hours);
      }
      if (this.minutesSpan) {
        this.minutesSpan.text(t.minutes);
      }
      if (this.secondsSpan) {
        this.secondsSpan.text(t.seconds);
      }
      if (t.total <= 0) {
        clearInterval(this.timeinterval);
        location.reload();
      }
    }
  });

  $.fn.countDown = function (options) {
    var defaults = {
      timeRemaining: 0
    };
    var setting = $.extend({}, defaults, options);
    var countDown = new CountDown(setting);
    if(!$(this).hasClass('inited')) {
      countDown.init(this);
      console.log('countDown init');
    }
  };

  var expireDate = $('.community-countdown').attr('data-target');
    
  if(expireDate) {
      var timeNow = Date.now();
      var timeTarget = new Date(expireDate.replace(/Z$/, '-05:00')).getTime();
      var timeRemaining = parseInt(timeTarget - timeNow);

      if(timeRemaining > 0) {
          $('.community-countdown .mobileReserve__countdown__content-count').countDown({timeRemaining: timeRemaining});
      } else {
          $('.community-countdown .mobileReserve__countdown').hide();

      }
  }
})(jQuery, window);
(function ($, window, undefined) {
  'use strict';

  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.instances = window.AEMapp.tvPdpConf.instances || {};
  var getLocationHref = window.AEMapp.tvPdpConf.getLocationHref;

  function DAOpenbox($app) {
    var self = this;
    self.$el = $app.el;
    self.$openbox = self.$el.find('.product-details__info-openbox');


    var getOpenBoxPrice = function() {
      var modelCode = self.$el.find('.product-details__info-sku').text();
      var requestData = {
        referralUrl: document.referrer,
        marketId: 900013,
        modelCodes: modelCode,
        accessToken: 1111,
      };

      var eppLink = '/us/shop/price.us';
      $.ajax({
        url: eppLink,
        data: requestData,
        type: 'POST',
        dataType: 'json',
      }).then(function(res) {
        var lineItem = _.find(res, {prdMdlCd: modelCode});
        var totalOriginal = Number($('.product-top-nav__pricing').find('.epp-price').html().replace(/[^0-9.]+/g, ''))
        var suggestedTotalOriginal = Number($('.product-top-nav__pricing').find('.epp-suggested').html().replace(/[^0-9.]+/g, ''))
        if (lineItem) {
          var msrpPrice = Number(lineItem.prdPriceInf.replace('$', '').replace(',', ''));
          var sellPrice = Number(lineItem.prdPromoPriceInf.replace('$', '').replace(',', ''));
          var savePrice = msrpPrice - sellPrice;
          self.$openbox.find('.openbox-card-msrpPrice').text('$' + msrpPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
          self.$openbox.find('.openbox-card-sellPrice').text('$' + sellPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
          self.$openbox.find('.openbox-card-savePrice').text('save $' + savePrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
          self.$openbox.find('.price-diff').toggle(savePrice != 0);
          self.$openbox.attr("data-total",totalOriginal)
          self.$openbox.attr("data-suggestedtotal",suggestedTotalOriginal)
        }
        updateSummaryWithOpenbox();
      });

      _.each(self.$openbox.find('.soundbar-mount-list-item'), function(el) { 
        var childLineItem = [{
          'quantity': 1,
          'sku': $(el).data('mdlcd')
        }];

        requestData[0].line_items = childLineItem;
        var apiUrl = $S.arbitrate() + '?siteId=';
        var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
				if ($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) {
					requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
				}

        $.ajax({
          url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
          data: JSON.stringify(requestData),
          type: 'POST',
          dataType: 'json',
          'headers': {
            'content-type': 'application/json'
          }
        }).then(function(res) {
          var lineItem =  res.line_items[Object.keys(res.line_items)[0]];
          _.each(lineItem.line_items, function(ltm) {
            if (ltm.sku_id == lineItem.sku_id) {
              ltm = lineItem;
            }
            var _$card = self.$openbox.find('.soundbar-mount-list-item[data-mdlcd="'+ ltm.sku_id +'"]');

            _$card.data('price', ltm.line_item_cost.display_price); 
            _$card.data('msrp', ltm.line_item_cost.regular_price); 
            _$card.find('.sell').text(ltm.line_item_cost.display_price);
            _$card.find('.total').text(ltm.line_item_cost.regular_price);

            if(ltm.line_item_cost.display_price == 0) {
              //set free text
              var sellHTML = 'Free<span class="sell" style="display:none">0</span>';
              _$card.find('.soundbar-mount-item-promo').html(sellHTML);
            }

            if(ltm.line_item_cost.display_price<ltm.line_item_cost.regular_price) {
              _$card.find('.soundbar-mount-item-msrp').show();
             
            }
          })
        });
      })
    }

    function updateSummaryWithOpenbox() {
      var openboxData = '';
      if (self.$openbox.find('.openbox-card').hasClass('selected')) {
        openboxData = {
          suggestedTotal: Number(self.$openbox.find('.openbox-card-msrpPrice').text().replace('$','').replace(',','')),
          total: Number(self.$openbox.find('.openbox-card-sellPrice').text().replace('$','').replace(',','')),
        }
      }
      self.updateSummary('openbox', openboxData);
    }

    function analytics(name) {
      window.utag && window.utag.link({
        'link_cat': 'h2_pdp_configurator>openbox',
        'link_id': name,
        'link_meta': 'link_name:' + name,
        'link_position': 'h2_pdp_configurator>openbox',
        'event_name': name
      });
    }

    function resetSamsungBundle(){
      if($('.offer__bundle-special').length === 0) return;

      $('.offer__bundle-special').find('.offer__bundle-option.selected').each(function(item, index) {
        $(this).trigger('click');
      })

      $('.offer__bundle-add .install__add').trigger('click');
    }
    
    var setOpenBoxEL = function() {
      if (window.AEMapp.tvPdpConf.isBundleBuilder() || window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()) {
        // as bundle builder and shopapp not supporting openbox price/trigger tag
        self.$openbox.hide();
        return
      }
      if (self.$openbox.find('.openbox-wrapper').length) {
        getOpenBoxPrice();
      } else {
        self.updateSummary('openbox', '');
      }
    }

    var bindOpenBoxEvent = function() {
      self.$openbox.on('click', '.openbox-card', function() {
        $(this).toggleClass('selected')
        // openbox not stackable with premium care, tradein, laundry pair
        var modelCode = self.$el.find('.product-details__info-sku').text();
        if ($(this).hasClass('selected')) {
          self.$el.find('.product-details__info-sku').hide();
          self.$el.find('.product-details__info-sku-ob').html(modelCode + '/OB').show();
          self.$el.find('.product-details__info-premium.normal').hide();
          self.$el.find('.product-details__info-recycle').hide();
          $('.product-details__info-offer').hide();
          $('.product-details__info-summary .bopis').hide();
          resetSamsungBundle();
          analytics('remove_openbox');
        } else {
          self.$el.find('.product-details__info-sku').show();
          self.$el.find('.product-details__info-sku-ob').hide();
          self.$el.find('.product-details__info-premium.normal').show();
          self.$el.find('.product-details__info-recycle').show();
          $('.product-details__info-offer').show();
          $('.product-details__info-summary .bopis').show();
          analytics('add_openbox');
        }
        updateSummaryWithOpenbox();
      });
      self.$openbox.on('click', '.openbox-card-text a', function(e) {
        e.preventDefault();
        e.stopPropagation();
        self.$openbox.find('.openbox-disclaimer').show();
        $('body').css('overflow','hidden');
        analytics('learn_more');
      });
      self.$openbox.on('click','.openbox-disclaimer', function() {
        self.$openbox.find('.openbox-disclaimer').hide();
        $('body').css('overflow','');
        analytics('close_learn_more');
      });
      self.$openbox.on('click','.openbox-disclaimer-popup', function(e) {
        e.stopPropagation();
      });
      self.$openbox.on('click','.openbox-disclaimer-close', function(e) {
        self.$openbox.find('.openbox-disclaimer').hide();
        $('body').css('overflow','');
        analytics('close_learn_more');
      });
    }
    self.init = function() {
      setOpenBoxEL();
      bindOpenBoxEvent();
      if(getLocationHref().indexOf('outlet=true') > -1){
        $('.product-details__info-openbox .openbox-card').trigger('click');
      }
    }
    self.reInit =  function(_$template) {
      self.$openbox.html(_$template.find('.product-details__info-openbox').html());
      setOpenBoxEL();
    }
  }
  window.AEMapp.tvPdpConf.instances.DAOpenbox = DAOpenbox;
}(jQuery, window));



// #1 openbox sku same?
// #2 which existing module need && !summaryObj.openbox in updatesummaryObjec amd proceedToCheckout

(function ($, window, undefined) {
	'use strict';
	function getMainSku() {
		var bundle = $('.product-details__info-bundle-list');
		if (bundle.length > 0) {
			var sku = _.map(bundle.find('[data-model]'), function (el) {
				return $(el).attr('data-model')
			}).filter(function (model) {
				return ~model.toLowerCase().indexOf('rf')
			});
			if (sku.length > 0) { // check rf bundle
				return sku[0];
			}
			sku = _.map(bundle.find('[data-model]'), function (el) {
				return $(el).attr('data-model')
			}).filter(function (model) {
				return ~model.toLowerCase().indexOf('dw')
			});
			if (sku.length > 0) { // check dishwasher bundle
				return sku[0];
			}
			sku = _.map(bundle.find('[data-model]'), function (el) {
				return $(el).attr('data-model')
			});
			return sku[0]
		}
		return $('.product-details__info-sku').first().text();
	}

	window.util_getMainSku = getMainSku;
	window.initialProductSelectedDetails = {};
	function getTmktid() {
		if (window.AEMapp.EPP.checkIfEppPanda && window.AEMapp.EPP.checkIfEppPanda()) {
			return '800003';
		}
		return $.cookie('tmktid') ? $.cookie('tmktid') : 0;
	}
	window.getTmktid = getTmktid;
	function TVPdpConf() {
		var self = this;
		self.selector = '.product-details-v2';
		self.$el = $(self.selector);
		self.summaryObj = {};
		self.$summary = self.$el.find('.product-details__info-summary');
		self.$result = self.$el.find('.product-details__info-results');
		self.$payment = self.$el.find('.product-details__info-purchase');
		self.addonGroupID = $('.product-details__identify').attr('data-group-id');
		self.$offerOverlay = self.$el.find('.s21-offer__overlay');
		self.checkoutFromMultiview = false;
		self.isLanding = true;
		var t = window.AEMapp.tvPdpConf.language.translate;
		var getLocationHref = window.AEMapp.tvPdpConf.getLocationHref;

		self.stackableWithTBYB = getLocationHref().indexOf('us/mobile/audio/headphones/galaxy-buds2') > -1;
		self.isBundleBuilder = $('input[name=bundleMode]').val() == 'true' || window.location.href.indexOf('isBundle=true') > -1;
		if (getLocationHref().indexOf('/us/televisions-home-theater/tvs') > -1) {
			self.$el.find('.product-details__info').addClass('isTv');
			self.category = 'TV';
		}
		if (getLocationHref().indexOf('us/televisions-home-theater/home-theater/sound-bars') > -1 || getLocationHref().indexOf('us/computing/monitors/gaming/55-odyssey-ark-4k-uhd') > -1) {
			//apply tv flex order
			self.$el.find('.product-details__info').addClass('isTv');
		}

		//if(!isBopisAvailable()) self.$el.find('.product-details__info-ship').show();
		self.$el.find('.product-details__info-ship').show();
		self.isBuds = getLocationHref().indexOf('/us/mobile/audio/headphones/galaxy-buds') > -1;

		function updateSummary(type, newVal, replace) {
			//update summry object
			if (replace) {
				self.summaryObj = newVal;
			} else {
				switch (type) {
					case 'recycle':
						self.summaryObj.recycle = newVal; break;//empty or string
					case 'tradein':
						self.summaryObj.tradein = newVal; break;//empty or string
					case 'audiotradein':
						self.summaryObj.audiotradein = newVal; break;//empty or object
					case 'access':
						if (!newVal) delete self.summaryObj.access;
						else {
							self.summaryObj.access = {
								pc: newVal.pc,
								entertainment: newVal.entertainment,
								price: newVal.price,
								deferMonth: newVal.deferMonth
							}
						}
						break;//empty or object
					case 'offer':
						self.summaryObj.offer = newVal; break;//empty or array
					case 'bundle':
						self.summaryObj.bundle = newVal; break;//empty or array
					case 'pc':
						self.summaryObj.pc = newVal; break;//empty or object
					case 'fbt':
						self.summaryObj.fbt = newVal; break;//empty or array
					case 'install':
						self.summaryObj.install = newVal; break;//empty or array
					case 'wallInstall':
						self.summaryObj.wallInstall = newVal; break;//empty or array
					case 'tbyb':
						self.tbybSealed = false;
						self.summaryObj.tbyb = newVal; break;//empty or array
					case 'bezel':
						self.summaryObj.bezel = newVal; break;//empty or array
					case 'smount':
						self.summaryObj.smount = newVal; break;//empty or array
					case 'accessory':
						self.summaryObj.accessory = newVal; break;//empty or array
					case 'preorder':
						self.summaryObj.preOrderOffer = newVal; break;//empty or array
					case 'shelves':
						self.summaryObj.shelves = newVal; break;//empty or array
					case 'openbox':
						self.summaryObj.openbox = newVal; break;// empty or object
					case 'pageaccessory':
						self.summaryObj.pageaccessory = newVal; break;// empty or object
					case 'vipprogram':
						self.summaryObj.vipprogram = newVal; break;// empty or object
				}
			}
			window.summaryObj = window.AEMapp.tvPdpConf.summaryObj = self.summaryObj;
			var total = 0;
			var suggestedTotal = 0;
			try {
				if (self.$el.find('.option-value.selected').length > 0) {
					if ((window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) && (window.initialProductSelectedDetails.modelcode == window.util_getMainSku())) {
						total = Number(window.initialProductSelectedDetails.display_Price);
						total = total || Number(window.initialProductSelectedDetails.display_Price);
						suggestedTotal = Number(window.initialProductSelectedDetails.regular_Price);

					} else {
						const depthSelectCount = $('.option-value.selected').length - 1;
						if (depthSelectCount > 0) {
							total = Number($('.option-value.selected').eq(depthSelectCount).data('samsung'));
							if ($.cookie('tmktid')) {
								total = Number($('.option-value.selected .epp-price').eq(depthSelectCount).html().replace(/[^0-9.]+/g, '')) || total;
							} else {
								total = total || Number($('.option-value.selected .epp-price').eq(depthSelectCount).html().replace(/[^0-9.]+/g, ''));
							}
							suggestedTotal = Number($('.option-value.selected .epp-suggested').eq(depthSelectCount).html().replace(/[^0-9.]+/g, ''));

						} else {
							total = Number($('.option-value.selected').data('samsung'));
							if ($.cookie('tmktid')) {
								total = Number($('.option-value.selected .epp-price').html().replace(/[^0-9.]+/g, '')) || total;
							} else {
								total = total || Number($('.option-value.selected .epp-price').html().replace(/[^0-9.]+/g, ''));
							}
							suggestedTotal = Number($('.option-value.selected .epp-suggested').html().replace(/[^0-9.]+/g, ''));

						}
					}

				} else {

					if ((window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) && (window.initialProductSelectedDetails.modelcode == window.util_getMainSku())) {

						total = Number(window.initialProductSelectedDetails.display_Price);
						total = total || Number(window.initialProductSelectedDetails.display_Price);
						suggestedTotal = Number(window.initialProductSelectedDetails.regular_Price);

					} else {
						total = Number(self.$summary.find('.product .epp-price').data('samsung'));
						if ($.cookie('tmktid')) {
							total = Number(self.$summary.find('.product .epp-price').html().replace(/[^0-9.]+/g, '')) || total;
						} else {
							total = total || Number(self.$summary.find('.product .epp-price').html().replace(/[^0-9.]+/g, ''));
						}
						suggestedTotal = Number(self.$summary.find('.product .epp-suggested').html().replace(/[^0-9.]+/g, ''));
					}

				}
			} catch (e) { }
			var rawPrice = total;
			if (!total) {
				if ((window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) && (window.initialProductSelectedDetails.modelcode == window.util_getMainSku())) {
					total = Number(window.initialProductSelectedDetails.display_Price);
					suggestedTotal = Number(window.initialProductSelectedDetails.regular_Price) || total;

				}
				else {
					total = Number(self.$summary.find('.product .epp-price').text().replace(/[^0-9.]+/g, ''));
					suggestedTotal = Number(self.$summary.find('.product .epp-suggested').html().replace(/[^0-9.]+/g, '')) || total;
				}
			}
			if (window.AEMapp.tvPdpConf.buymoreHelper && window.AEMapp.tvPdpConf.buymoreHelper.isIframe()) {
				window.AEMapp.tvPdpConf.buymoreHelper.setMainSkuPrice(Number(total.toFixed(2)), Number(suggestedTotal.toFixed(2)));
			}
			if (self.summaryObj.openbox && self.summaryObj.openbox.total) {
				total = summaryObj.openbox.total;
				rawPrice = total;
				suggestedTotal = summaryObj.openbox.suggestedTotal;
			} else if (type === 'openbox') { // reset total price when deselect openbox
				total = Number(self.$summary.find('.product .epp-price').attr('content').replace(/[^0-9.]+/g, ''));
				rawPrice = total;
			}

			var ecom = self.$result.data('ecom');
			var stock = self.$result.data('stock');
			var buyable = ecom == 'Y' && stock != 'N';
			var deferMonth = self.deferMonth || Number(self.$summary.find('.epp-deferred-month').data('month'));
			var hasFinance = buyable && !!self.$summary.find('.summary__total').attr('finance');
			var isEIP = self.$summary.find('.summary__total').attr('iseip') == 'Y';
			var isDeferred = self.$summary.find('.summary__total').attr('isdeferred') == 'Y';
			var isAffirm = !!self.paymentId && self.paymentId.toLowerCase() == 'splitpay4';
			var isKlarna = !!self.paymentId && self.paymentId.toLowerCase() == 'klarna_splitpay4';
			self.$summary.toggle(buyable || isBopisAvailable());
			$('.product-top-nav__pricing').toggle(buyable || isBopisAvailable());

			//update summary html
			self.$summary.find('.tradein').toggle(!!self.summaryObj.tradein && (!self.summaryObj.access || !!self.stackableWithAccess) && !self.summaryObj.tbyb);
			self.$summary.find('.access').toggle(!!self.summaryObj.access && !self.summaryObj.tbyb);
			self.$summary.find('.access-title').toggle(!!self.summaryObj.access && !self.summaryObj.tbyb);
			self.$summary.find('.access-sup').toggle(!!self.summaryObj.access && !self.summaryObj.tbyb);
			self.$summary.find('.apr').toggle(!self.summaryObj.access);
			$('.product-top-nav__pricing').toggleClass('hasAccess', !!self.summaryObj.access && !self.summaryObj.tbyb)
			if (self.summaryObj.access && !self.summaryObj.tbyb) {
				// total = self.summaryObj.access.price;
				// suggestedTotal = self.summaryObj.access.price;
				// suggestedTotal = total;
				deferMonth = self.summaryObj.access.deferMonth;
				$('.product-top-nav__cta').text('CHECKOUT');
				self.$el.find('.product-details__info-add').text('CHECKOUT');
				if (self.summaryObj.access.entertainment) self.$summary.find('.access .entertainment .summary__row-title').text(self.summaryObj.access.entertainment.name + ' (included)');
			} else {
				var ctaText = self.$el.find('.product-details__info-add').data('cta');
				$('.product-top-nav__cta').text(ctaText);
				self.$el.find('.product-details__info-add').text(ctaText);
				window.AEMapp.tvPdpConf.pdpEnhancementTV();
			}
			if (self.isBundleBuilder) {
				var addCta = self.$el.find('.product-details__info-add');
				if (addCta.text() == 'ADD TO CART' || addCta.text() == 'BUY NOW') {
					addCta.text('ADD TO BUNDLE');
				}
			}
			self.$summary.find('.product .epp-price').text(total.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
			self.$summary.find('.product .epp-suggested').text(suggestedTotal.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));

			// if (isEIP && total < 500) {
			// 	isEIP = false;
			// 	deferMonth = 6;
			// }

			if (self.summaryObj.pageaccessory && ((window.location.href.indexOf("accessory") > -1) || (window.location.href.indexOf("accessories") > -1))) {
				_.each(self.summaryObj.pageaccessory, function (pageaccessory) {
					total = Number(pageaccessory.price);
					suggestedTotal = Number(pageaccessory.suggested);
				});
			}

			self.$summary.find('.offer').empty();
			if (self.summaryObj.offer && !self.summaryObj.access && (!self.summaryObj.tbyb || self.stackableWithTBYB)) {
				self.$summary.find('.offer span').eq(0).text(self.summaryObj.offer);
				_.each(self.summaryObj.offer, function (offer) {
					total += Number(offer.price);
					suggestedTotal += Number(offer.suggested);
					self.$summary.find('.offer').append('<div class="summary__row"><span class="summary__row-title">' + offer.name + '</span><span><b class="price">' + (offer.price >= 0 ? '$' + offer.price.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') : (offer.modelCode ? 'Free' : '')) + '</b></span></div>');
				});
			}

			self.$summary.find('.bundle').empty();
			if (self.summaryObj.bundle && !self.summaryObj.access && !self.summaryObj.tbyb && !summaryObj.openbox) {
				_.each(self.summaryObj.bundle, function (bundle) {
					var bundlePrice = Number(bundle.price);
					total += bundlePrice;
					suggestedTotal += Number(bundle.suggested);
					self.$summary.find('.bundle').append('<div class="summary__row"><span class="summary__row-title">' + bundle.name + '</span><span><b class="price">' + (bundlePrice > 0 ? '$' + bundlePrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') : 'Free') + '</b></span></div>');
				});
			}

			self.$summary.find('.bezel').empty();
			if (self.bezel && self.bezel.hasBezel && !self.summaryObj.access && !self.summaryObj.tbyb) {
				// self.$summary.find('.bezel').append('<div class="summary__row"><span class="summary__row-title">Bezel - Black</span><span><b class="price">Included</b></span></div>');
				if (self.summaryObj.bezel) {
					_.each(self.summaryObj.bezel, function (bezel) {
						total += Number(bezel.price);
						suggestedTotal += Number(bezel.suggested);
						self.$summary.find('.bezel').append('<div class="summary__row"><span class="summary__row-title">' + bezel.name + '</span><span><b class="price">' + (bezel.price > 0 ? '$' + bezel.price.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') : 'Free') + '</b></span></div>');
					});
				}
			}
			self.$summary.find('.smount').empty();
			if (self.smount && self.smount.hasSoundbarMount && !self.summaryObj.access && !self.summaryObj.tbyb) {
				if (self.summaryObj.smount) {
					_.each(self.summaryObj.smount, function (mount) {
						total += Number(mount.price);
						suggestedTotal += Number(mount.suggested);
						self.$summary.find('.smount').append('<div class="summary__row"><span class="summary__row-title">' + mount.name + '</span><span><b class="price">' + (mount.price > 0 ? '$' + mount.price.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') : 'Free') + '</b></span></div>');
					});
				}
			}

			self.$summary.find('.shelves').empty();
			if (self.shelves && self.shelves.hasShelves && !self.summaryObj.access && !self.summaryObj.tbyb) {
				if (self.summaryObj.shelves) {
					var shelfItem = self.summaryObj.shelves[0];
					total += Number(shelfItem.price);
					suggestedTotal += Number(shelfItem.suggested);
					self.$summary.find('.shelves').append('<div class="summary__row"><span class="summary__row-title">' + shelfItem.name + '</span><span><b class="price">' + ('$' + shelfItem.price.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',')) + '</b></span></div>');
				}
			}

			self.$summary.find('.accessory').empty();
			if (self.accessory && self.accessory.hasAccessory && !self.summaryObj.access && !self.summaryObj.tbyb) {

				if (self.summaryObj.accessory) {
					_.each(self.summaryObj.accessory, function (accessory) {
						total += Number(accessory.price);
						suggestedTotal += Number(accessory.suggested);
						self.$summary.find('.accessory').append('<div class="summary__row"><span class="summary__row-title">' + accessory.name + '</span><span><b class="price">' + (accessory.price >= 0 ? '$' + accessory.price.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') : '') + '</b></span></div>');
					});
				}
			}
			self.$summary.find('.preorder-offer').empty();
			if (self.preOrderOffer && self.preOrderOffer.hasOffer) {
				if (self.summaryObj.preOrderOffer) {
					_.each(self.summaryObj.preOrderOffer, function (offer) {
						var offerTotal = Number(offer.price)
						total += offerTotal;
						suggestedTotal += Number(offer.suggested);
						self.$summary.find('.preorder-offer').append('<div class="summary__row"><span class="summary__row-title">' + offer.name + '</span><span><b class="price">' + (offerTotal >= 0 ? '$' + offerTotal.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') : '') + '</b></span></div>');
					});
				}
			}

			self.$summary.find('.recycle').empty();
			if (self.summaryObj.recycle && self.summaryObj.recycle.modelCode) {
				if (self.summaryObj.recycle.price) {
					total -= Number(self.summaryObj.recycle.price);
				}
				self.$summary.find('.recycle').append('<div class="summary__row"><span class="summary__row-title">Recycle and trade-in discount</span><span><b class="price">' + (self.summaryObj.recycle.price > 0 ? '-$' + self.summaryObj.recycle.price.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') : '') + '</b></span></div>');
			}

			self.$summary.find('.premium').toggle(!!self.summaryObj.pc && !self.summaryObj.access && !self.summaryObj.tbyb);
			if (self.summaryObj.pc && !self.summaryObj.access && !self.summaryObj.tbyb) {
				total += Number(self.summaryObj.pc.price.replace(/[^0-9.]+/g, ''));
				suggestedTotal += Number(self.summaryObj.pc.suggested.replace(/[^0-9.]+/g, ''));
				self.$summary.find('.premium .summary__row-title').text(self.summaryObj.pc.name.split(' - ').join(' '));
				self.$summary.find('.premium span b').text('$' + self.summaryObj.pc.price);
			}

			// Update Pageaccessory data 
			if (self.summaryObj.pageaccessory && ((window.location.href.indexOf("accessory") > -1) || (window.location.href.indexOf("accessories") > -1))) {
				_.each(self.summaryObj.pageaccessory, function (pageaccessory) {
					total = Number(pageaccessory.price);
					suggestedTotal = Number(pageaccessory.suggested);
				});
				self.$summary.find('.product .epp-price').text(total.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				self.$summary.find('.product .epp-suggested').text(suggestedTotal.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				// self.$summary.find('.product .summary__row-price + .summary__row-price').toggle(total < suggestedTotal);
			}
			
			self.$summary.find('.fbt').empty();
			if (self.summaryObj.fbt && self.summaryObj.fbt.length > 0 && !self.summaryObj.access && !self.summaryObj.tbyb) {
				_.each(self.summaryObj.fbt, function (prod) {
					total += Number(prod.price.replace(/[^0-9.]+/g, ''));
					suggestedTotal += Number(prod.suggested.replace(/[^0-9.]+/g, ''));
					self.$summary.find('.fbt').append('<div class="summary__row"><span class="summary__row-title">' + prod.name + '</span><span><b>' + prod.price + '</b></span></div>');
				});
			}

			self.$summary.find('.install').toggle(!!self.summaryObj.install && !self.summaryObj.access && !self.summaryObj.tbyb);
			if (self.summaryObj.install && !self.summaryObj.access && !self.summaryObj.tbyb) {
				total += Number(self.summaryObj.install.price.replace(/[^0-9.]+/g, ''));
				suggestedTotal += Number((self.summaryObj.install.totalPrice || self.summaryObj.install.price).replace(/[^0-9.]+/g, ''));
				self.$summary.find('.install span b').text(self.summaryObj.install.price);
				self.$summary.find('.mount').toggle(!!self.summaryObj.install.mount)
			}

			self.$summary.find('.wall-install').empty();
			if (self.summaryObj.wallInstall && !self.summaryObj.access && !self.summaryObj.tbyb) {
				var wallTotalPrice = Number(self.summaryObj.wallInstall.price.replace(/[^0-9.]+/g, ''));
				total += wallTotalPrice
				suggestedTotal += Number(self.summaryObj.wallInstall.suggested.replace(/[^0-9.]+/g, ''));
				if (self.summaryObj.wallInstall && self.summaryObj.wallInstall.addOn) {
					_.each(self.summaryObj.wallInstall.addOn, function (addon) {
						total += Number(addon.price.replace(/[^0-9.]+/g, ''));
						wallTotalPrice += Number(addon.price.replace(/[^0-9.]+/g, ''))
					})
				}
				self.$summary.find('.wall-install').append('<div class="summary__row"><span class="summary__row-title">' + self.summaryObj.wallInstall.name + '</span><span><b class="price">' + (wallTotalPrice >= 0 ? '$' + wallTotalPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') : '') + '</b></span></div>');
			}
			
		
			/*
				tbyb only stack with tbyb accessories
				tbyb price always 0
			 */
			self.$summary.find('.tbyb').empty();
			if (!!self.summaryObj.tbyb) {
				_.each(self.summaryObj.tbyb, function (item) {
					total += Number((item.msrpPrice || item.sellPrice).replace(/[^0-9.]+/g, ''));
					suggestedTotal += Number((item.msrpPrice || item.sellPrice).replace(/[^0-9.]+/g, ''));
					self.$summary.find('.tbyb').append('<div class="summary__row"><span class="summary__row-title">' + item.name + '</span><span><b>$' + Number(item.sellPrice.replace(/[^0-9.]+/g, '')).toFixed(2) + '</b></span></div>');
				})
				$('.product-details__info-payment-option').addClass('has-tbyb');
				self.$summary.find('.tbyb-free').show();
				$('.product-top-nav__cta').text('TRY NOW');
				self.$el.find('.product-details__info-add').text('TRY NOW');
			} else {
				$('.product-details__info-payment-option').removeClass('has-tbyb');
				self.$summary.find('.tbyb-free').hide();
			}

			self.$summary.find('.audiotradein').toggle(!!self.summaryObj.audiotradein && !self.summaryObj.access && (!self.summaryObj.tbyb || self.stackableWithTBYB));
			var eppDiscount = 1;
			if ($('.product-details__info-results.epp-product').attr('data-eppdiscount')) {
				eppDiscount = Number($('.product-details__info-results.epp-product').attr('data-eppdiscount'));
			}
			if (!!self.summaryObj.audiotradein && !self.summaryObj.access && (!self.summaryObj.tbyb || self.stackableWithTBYB)) {
				self.$summary.find('.product .from').hide();
				total -= self.summaryObj.audiotradein.price * eppDiscount;
				rawPrice += self.summaryObj.audiotradein.price * (1 - eppDiscount);
				self.$summary.find('.product .epp-price').html(formatPrice(rawPrice).replace(/^\$/, ''));
				self.$summary.find('.audiotradein span b').text('-$' + self.summaryObj.audiotradein.price.toFixed(2));
				$('.product-top-nav__pricing').removeClass('hasTradein');
			} else {
				if (self.budsTradeInMaxSaving && self.hasBudsTradeIn && ((!self.tbybSealed && !self.summaryObj.tbyb) || self.stackableWithTBYB)) {
					// if (!self.summaryObj.tbyb) {
					// 	total -= self.budsTradeInMaxSaving * eppDiscount;
					// 	rawPrice -= self.budsTradeInMaxSaving * eppDiscount;
					// }
					self.$summary.find('.product .from').show();
					$('.product-top-nav__pricing').addClass('hasTradein');
					self.$summary.find('.product .epp-price').html(formatPrice(rawPrice).replace(/^\$/, ''));
				} else {
					self.$summary.find('.product .from').hide();
					$('.product-top-nav__pricing').removeClass('hasTradein');
					self.$summary.find('.product .epp-price').html(formatPrice(rawPrice).replace(/^\$/, ''));
				}
			}

			if (window.AEMapp.tvPdpConf.buymoreHelper && window.AEMapp.tvPdpConf.buymoreHelper.isIframe()) {
				window.AEMapp.tvPdpConf.buymoreHelper.updateBuymorePrice(Number(total.toFixed(2)), Number(suggestedTotal.toFixed(2)));
			}

			

			// VIP Program
			self.$summary.find('.vipprogram').empty();
			if (self.summaryObj.vipprogram && self.summaryObj.vipprogram.price && self.summaryObj.vipprogram.sku && !self.summaryObj.access && !self.summaryObj.tbyb) {
				const vipprogramPrice = self.summaryObj.vipprogram.price;
				total += vipprogramPrice;
				self.$summary.find('.vipprogram').append('<div class="summary__row"><span class="summary__row-title">' + "VIP Advantage membership" + '</span><span><b class="price">' + (vipprogramPrice >= 0 ? '$' + vipprogramPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') : '') + '</b></span></div>');
			}
	

			self.$summary.find('.total').text(total.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','))
			$('.product-top-nav__pricing').find('.epp-price').text(total.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
			if (deferMonth) {
				var monthly = (total / deferMonth).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
				self.$summary.find('.epp-monthly').text(monthly);
				self.$summary.find('.epp-deferred-month').text(deferMonth);
				$('.product-top-nav__pricing').find('.epp-monthly').text(monthly);
				$('.product-top-nav__pricing').find('.epp-deferred-month').text(deferMonth);
			}
			if (total < suggestedTotal) {
				$('.product-top-nav__pricing').find('.epp-suggested').text(' $' + suggestedTotal.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				var suggestedMonthly = (suggestedTotal / deferMonth).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
				$('.product-top-nav__pricing').find('.epp-suggested-monthly').text('$' + suggestedMonthly + '/mo');
				if (self.isNEO) {
					$('.product-top-nav__pricing').find('.savings').show();
					var savings = suggestedTotal - total;
					$('.product-top-nav__pricing').find('.epp-savings').text(savings.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				} else {
					$('.product-top-nav__pricing').find('.savings').hide();
				}
				var suggestedBiweekly = (suggestedTotal / 4).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');

				$('.product-top-nav__pricing').find('.affirm-suggested-monthly').html('$' + suggestedBiweekly);

				self.$summary.find('.summary__row.summary__total .epp-suggested').text(' $' + suggestedTotal.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				self.$summary.find('.summary__row.summary__total .epp-suggested').show();
				var totalsaving = suggestedTotal - total;
				self.$summary.find('.summary__row.summary__saving .total__saving').text(totalsaving.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				self.$summary.find('.summary__row.summary__saving').show();
			} else {
				$('.product-top-nav__pricing').find('.epp-suggested').text('');
				$('.product-top-nav__pricing').find('.epp-suggested-monthly').text('');
				$('.product-top-nav__pricing').find('.affirm-suggested-monthly').html('');
				$('.product-top-nav__pricing').find('.savings').hide();
				self.$summary.find('.summary__row.summary__saving').hide();
				self.$summary.find('.summary__row.summary__total .epp-suggested').hide();
			}

			// update payment section price
			self.$payment.find('.total').text(total.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
			self.$payment.find('.split').text((total / 4).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));

			self.$payment.find('.installment_total').text('$' + total.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
			self.$payment.find('.installment_price').text('$' + (total / 4).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));

			if (self.$payment.find('.product-details__info-purchase-card[data-payment="MONTHLY"]').length && deferMonth != 0) {
				self.$payment.find('.monthly').text((total / deferMonth).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				self.$payment.find('.deferMonth').text(deferMonth);
				_.each(self.$payment.find('.product-details__info-purchase-monthly-option'), function (option) {
					var _month = Number($(option).data('month'));
					$(option).find('.monthlyPrice').text((total / _month).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				})
			}

			self.$summary.find('.eip').toggle(hasFinance && isEIP && !self.summaryObj.tbyb && !isAffirm && !isKlarna);
			self.$summary.find('.deferred').toggle(hasFinance && isDeferred && !self.summaryObj.tbyb && !isAffirm && !isKlarna);
			self.$summary.find('.affirm').toggle(isAffirm || isKlarna);
			$('.product-top-nav__pricing.product-top-nav__eip').toggle(!isDeferred && !self.summaryObj.tbyb);
			$('.product-top-nav__pricing.product-top-nav__eip .finance').toggle(hasFinance && isEIP && !self.summaryObj.tbyb);
			$('.product-top-nav__pricing.product-top-nav__deferred').toggle(hasFinance && isDeferred && !self.summaryObj.tbyb);
			$('.product-top-nav__pricing.product-top-nav__tbyb').toggle(!!self.summaryObj.tbyb);
			if (isAffirm || isKlarna) {
				var biweekly = (total / 4).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
				$('.product-top-nav__pricing').find('.affirm-monthly').text(biweekly + ' ');
				$('.product-top-nav__pricing').addClass('hasAffirm');
				self.$summary.find('.affirm-monthly').text(biweekly);
			} else {
				$('.product-top-nav__pricing').removeClass('hasAffirm');
			}
			$('.product-top-nav__placeHolder').css('height', $('.product-top-nav__identifier').height());

			// if(self.reserve && self.reserve.hasReserve) {
			// 	$('.product-top-nav__pricing').hide()
			// }

			//overwrite anchor nav with access deeplink
			if (
				window.location.search.indexOf('access=preselected') > -1
				&& _.filter(self.summaryObj, function (item) { return !!item }).length == 0
				&& self.$accOptions.find('.access__option').length > 0
				&& buyable && !self.summaryObj.tbyb
			) {
				// goto(self.$el.find('.product-details__info-family'));
				$('.product-top-nav__cta').text('CHECKOUT');
				self.$el.find('.product-details__info-add').text('CHECKOUT');
				showAccessOptions();
				total = rawPrice;
				deferMonth = self.$accMain.data('month');
				monthly = (total / deferMonth).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
				$('.product-top-nav__pricing').find('.epp-price').text(total.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				$('.product-top-nav__pricing').find('.epp-monthly').text(monthly);
				$('.product-top-nav__pricing').find('.epp-deferred-month').text(deferMonth);
				$('.product-top-nav__pricing').find('.epp-suggested').text('');
				$('.product-top-nav__pricing').find('.epp-suggested-monthly').text('');
				$('.product-top-nav__pricing').addClass('hasAccess');
			}
		}

		function getRewardsTier() {
			if (($.cookie('prof_id') && $.cookie('xsdcxyn')) || (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() && $.cookie('rewards_tier'))) {
				if ($.cookie("rewards_tier") == null && $.cookie("rewards_tier") == undefined) {
					var ssoRewardsUrl = 'https://www.samsung.com/us/api/ecom/v4/rewards/reward-points';
					var request = {
						url: ssoRewardsUrl,
						method: 'GET',
						headers: {
							'x-ecom-jwt': $.cookie('jwt_USA'),
						},
						success: function (success) {
							console.log('rewardsTier', success);
							getRewardsdata();
							if (success.result == "Platinum" || success.result == "Gold") {
								var careDiv = $('.product-details__info').find('.rewards-hint');
								$(careDiv).css('display', 'flex');
							} else {
								var careDiv = $('.product-details__info').find('.rewards-hint');
								$(careDiv).css('display', 'none');
							}
						},
						fail: function (error) {
							console.log('rewardsTier', error);
						}
					};

					$.ajax(request);
				}
			}
		}
		window.getRewardsTier = getRewardsTier;

		function gotopage(el, forceEnable) {
			if (getLocationHref().indexOf('/us/televisions-home-theater/tvs/') > -1 && !forceEnable) return;
			var anchorOffset = $('#anchor-nav-v2').height() || 0;
			if (anchorOffset == 0) {
				setTimeout(function () {
					gotopage(el);
				}, 200);
			} else {
				var y = $(el).offset().top;
				$("html, body").animate({ scrollTop: y - anchorOffset - 2 }, 300);
			}
		}

		function gotoNext($el, selector) {
			if (getLocationHref().indexOf('/us/televisions-home-theater/tvs/') > -1 || getLocationHref().indexOf('us/computing/monitors') > -1) return;
			var _next = $el.next();
			if (_next.length > 0) {
				if (_next.is(':visible') && _next.hasClass(selector) && _next.height() > 0) {
					gotopage(_next)
				}
				else {
					gotoNext(_next, selector);
				}
			}
		}

		function checkAddonStep(addonGroupID) {
			var hasAccess = self.summaryObj.access;
			var cookie = $.cookie('tvAddonExp');
			// return addonGroupID && !hasAccess && cookie == 'true';
			return addonGroupID && !hasAccess && !self.isBundleBuilder;
		}

		function formatPrice(price, enableFree) {
			if (price == null) return '';
			var res = Number(price);
			if (enableFree && res === 0) return 'Free';
			return res.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
		}

		function getValueFromURL(key) {
			var qs = window.location.search.split('+').join(' ');
			var params = {};
			var re = /[?&]?([^=]+)=([^&]*)/g;
			var tokens
			while (tokens = re.exec(qs)) {
				params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);
			}
			return params[key];
		}

		/*--\\Samsung Recycle//--*/
		var samsungRecycle = function ($recycle) {
			// var selection = {
			// 	model: '',
			// 	manu: '',
			// 	price: 0
			// };

			var selection = {
				modelCode: '',
				brand: '',
				size: '',
				year: '',
				price: 0
			};


			var tradeinMap = {
				'brand': {
					'samsung': {
						'55': '100_ECERT_TI_SA_55U',
						'65': '100_ECERT_TI_SA_55_65',
						'75': '100_ECERT_TI_SA_66_75',
						'76': '100_ECERT_TI_SA_76H',
					},
					'sony': {
						'55': '100_ECERT_TI_SO_55U',
						'65': '100_ECERT_TI_SO_55_65',
						'75': '100_ECERT_TI_SO_66_75',
						'76': '100_ECERT_TI_SO_76H',
					},
					'lg': {
						'55': '100_ECERT_TI_LG_55U',
						'65': '100_ECERT_TI_LG_55_65',
						'75': '100_ECERT_TI_LG_66_75',
						'76': '100_ECERT_TI_LG_76H',
					},
					'others': {
						'55': '100_ECERT_TI_OT_55U',
						'65': '100_ECERT_TI_OT_55_65',
						'75': '100_ECERT_TI_OT_66_75',
						'76': '100_ECERT_OT_SA_76H',
					}
				}
			}

			function setRecycleEl() {
				var sku = $('.product-details__info-sku').html();
				var ecom = self.$result.data('ecom');
				var stock = self.$result.data('stock');
				var buyable = ecom == 'Y' && stock != 'N';
				if (!buyable) {
					$recycle.find('.recycle__wrapper').hide();
					return;
				}
				$recycle.find('.recycle__year').mask('0000')
				// tv skus with $100 credit
				self.tvList = ['QN85Q60CAFXZA', 'QN75Q60CAFXZA', 'QN85Q70CAFXZA', 'QN75Q70CAFXZA', 'QN85Q80CAFXZA', 'QN75Q80CAFXZA', 'QN85QN800CFXZA', 'QN75QN800CFXZA', 'QN65QN800CFXZA', 'QN85QN85CAFXZA', 'QN75QN85CAFXZA', 'QN65QN85CAFXZA', 'QN85QN900CFXZA', 'QN75QN900CFXZA', 'QN65QN900CFXZA', 'QN85QN90CAFXZA', 'QN75QN90CAFXZA', 'QN65QN90CAFXZA', 'QN55QN90CAFXZA', 'QN83S90CAEXZA', 'QN77S90CAFXZA', 'QN65S90CAFXZA', 'QN55S90CAFXZA', 'QN77S95CAFXZA', 'QN65S95CAFXZA', 'QN55S95CAFXZA', 'QN85LS03BAFXZA', 'QN75LS03BAFXZA', 'QN65LS03BAFXZA', 'QN75LST9TAFXZA', 'QN65LST9TAFXZA', 'QN75LST7TAFXZA', 'QN65LST7TAFXZA']
				// tv skus with $50 credit
				self.otherTvList = ['QN70Q60CAFXZA', 'QN65Q60CAFXZA', 'QN55Q60CAFXZA', 'QN65Q70CAFXZA', 'QN55Q70CAFXZA', 'QN65Q80CAFXZA', 'QN55Q80CAFXZA', 'QN55QN85CAFXZA', 'QN55LST7TAFXZA', 'QN55LS03BAFXZA']
				//monitor skus with $100 credit
				self.monitorList = ['LS55BG970NNXGO', 'LS49CG954SNXZA', 'LS49AG952NNXZA']
				self.maxRecyclePrice = 100;
				// var list = ['QN85LS03AAFXZA','QN75LS03AAFXZA','QN65LS03AAFXZA','QN65LS01TAFXZA','QN65LST7TAFXZA','QN75LST7TAFXZA','QN65LST9TAFXZA','QN75LST9TAFXZA','QN85Q80AAFXZA','QN75Q80AAFXZA','QN65Q80AAFXZA','QN85QN85AAFXZA','QN75QN85AAFXZA','QN65QN85AAFXZA','QN85QN90AAFXZA','QN75QN90AAFXZA','QN65QN90AAFXZA','QN98QN90AAFXZA','QN85QN800AFXZA','QN75QN800AFXZA','QN65QN800AFXZA','QN85QN900AFXZA','QN75QN900AFXZA','QN65QN900AFXZA','QN65QN800BFXZA','QN75QN800BFXZA','QN85QN800BFXZA','QN65QN900BFXZA','QN75QN900BFXZA','QN85QN900BFXZA','QN75LS03BAFXZA','QN65LS03BAFXZA','QN85LS03BAFXZA','QN85QN85BAFXZA','QN75QN85BAFXZA','QN65QN85BAFXZA','QN85QN90BAFXZA','QN65QN90BAFXZA','QN75QN90BAFXZA','QN85Q80BAFXZA','QN75Q80BAFXZA','QN65Q80BAFXZA','QN65S95BAFXZA','QN65LS03ADFXZA','QN75LS03ADFXZA'];
				// var recycleEnd = new Date('2022-04-24 23:59:59-05:00').getTime();
				// var recycleStart = new Date('2022-04-17 23:59:59-05:00').getTime();

				var convertToEst = function (date) {
					date = new Date(date)
					var offset = -4.0;
					var utc = date.getTime() + (date.getTimezoneOffset() * 60000);
					var estDate = new Date(utc + (3600000 * offset));
					return estDate
				}

				var targetStartDate = convertToEst(new Date("2023-09-18T12:00:00-04:00"))
				var targetEndDate = convertToEst(new Date("2023-10-02T09:00:00-04:00"))
				var currentDate = convertToEst(new Date());
				var recycleStart = currentDate > targetStartDate;
				var recycleEnded = currentDate > targetEndDate;

				// var list = ['QN85QN900BFXZA','QN75QN900BFXZA','QN65QN900BFXZA','QN85QN800BFXZA','QN75QN800BFXZA','QN98QN90AAFXZA','QN85QN90BAFXZA','QN75QN90BAFXZA','QN65QN90BAFXZA','QN85QN85BAFXZA','QN85Q80BAFXZA','QN85Q70AAFXZA','QN85Q60BAFXZA','QN85LS03BAFXZA','QN75LST9TAFXZA','QN65LST9TAFXZA','QN75LST7TAFXZA','QN65LST7TAFXZA']
				if ((self.tvList.indexOf(sku) > -1 || self.otherTvList.indexOf(sku) > -1 || self.monitorList.indexOf(sku) > -1) && !recycleEnded && recycleStart) {
					$recycle.find('.recycle__wrapper').show();
					self.hasRecycle = true;
					self.hasTradeIn = false;
					if (self.otherTvList.indexOf(sku) > -1) {
						self.maxRecyclePrice = 50;
					}
					$('.product-top-nav__pricing').find('.tradein-value .tradein-range').text('$' + self.maxRecyclePrice)
					$('.product-details__info-install').find('.install__wrapper').attr('style', 'display: none !important');
					$recycle.find('.recycle__credit').text('$' + self.maxRecyclePrice)
					$('.product-top-nav__pricing').addClass('hasRecycle');
				} else {
					$recycle.find('.recycle__wrapper').hide();
					self.hasRecycle = false;
					$('.product-top-nav__pricing').removeClass('hasRecycle');
					reset();
					return;
				}
				var brand = (getValueFromURL('recycleBrand') || '').toLowerCase();
				var isMatch = false;
				var selectBrand = null;
				$recycle.find('.recycle__dropdown-item').each(function () {
					var name = $(this).data('name').toLowerCase();
					if (name === brand) {
						selectBrand = $(this);
						isMatch = true;
						return false;
					}
				})
				if (isMatch) {
					$recycle.find('.recycle__yes input').prop('checked', true);
					setBrand(selectBrand);
					$recycle.find('.recycle__dropdown-term').show();
					setRecycle();
				} else {
					reset();
				}
			}

			function reset() {
				$recycle.find('.recycle__yes input').prop('checked', false);
				$recycle.find('.recycle__yes').find('.recycle__option-title').text('YES');
				$recycle.find('.recycle__option-price').hide();
				$recycle.find('.recycle__dropdown-res').hide();
				$recycle.find('.recycle__dropdown-label').show();
				$recycle.find('#recycle__dropdown-size').hide();
				$recycle.find('.recycle__dropdown-list').hide();
				$recycle.find('.recycle__year').hide();
				$recycle.find('.recycle__year').val('');
				$recycle.find('.recycle__dropdown-res-size').hide();
				$recycle.find('.recycle__dropdown-label-size').show();
				$recycle.find('.recycle__dropdown-list-size').hide();
				$recycle.find('.recycle__dropdown-term').hide();
				$recycle.find('.recycle__dropdown-req').hide();
				$recycle.find('.recycle__dropdown').hide();
				$recycle.find('.recycle__option-edit').hide();
				$recycle.find('.recycle__option-free').show();
				selection = {
					modelCode: '',
					brand: '',
					size: '',
					year: '',
					price: 0
				};
				updateSummary('recycle', '');
				self.tagging.recycleOption(true, '');
			}

			function setRecycle(res) {
				// $recycle.find('.recycle__yes').find('.recycle__option-title').text(selection.manu);
				// $recycle.find('.recycle__option-price').show();
				// var recycleCredit = tradeinMap['brand'][selection.brand][selection.size][selection.year]
				var recycleCredit = '100_ECERT_TI_V2'
				selection.price = 100;
				if (self.otherTvList.indexOf(sku) > -1) {
					recycleCredit = '50_ECERT_TI_V2'
					selection.price = 50;
				}
				selection.modelCode = recycleCredit;
				$recycle.find('.recycle__dropdown').hide();
				$recycle.find('.recycle__option-edit').show();
				$recycle.find('.recycle__option-free').hide();
				updateSummary('recycle', selection);
				self.tagging.recycleOption(false, selection.brand);
			}

			function setBrand(el) {
				selection.brand = el.data('name')
				$recycle.find('.recycle__dropdown-res').find('p').text(el.text());
				$recycle.find('.recycle__dropdown-res').show();
				$recycle.find('.recycle__dropdown-label').hide();
			}

			function setSize(el) {
				selection.size = el.data('name')
				$recycle.find('.recycle__dropdown-res-size').find('p').text(el.text());
				$recycle.find('.recycle__dropdown-res-size').show();
				$recycle.find('.recycle__dropdown-label-size').hide();
			}

			function setYear(el) {
				selection.year = Number(el.val())
			}

			return {
				init: function () {
					setRecycleEl();
					$recycle.on('click', '.recycle__yes', function () {
						$recycle.find('.recycle__no').show();
						$recycle.find('.recycle__dropdown').show();
					});
					$recycle.on('click', '.recycle__no', function () {
						reset();
					});
					$recycle.on('click', '.recycle__dropdown-manu', function () {
						$recycle.find('.recycle__dropdown-list-size').hide();
						$recycle.find('.recycle__dropdown-list').toggle();
					});
					$recycle.on('click', '.recycle__dropdown-size', function () {
						$recycle.find('.recycle__dropdown-list').hide();
						$recycle.find('.recycle__dropdown-list-size').toggle();
					});
					$recycle.on('click', '.recycle__dropdown-item', function () {
						setBrand($(this));
						$recycle.find('.recycle__dropdown-list').hide();
						$recycle.find('#recycle__dropdown-size').show();
					});

					$recycle.on('click', '.recycle__dropdown-item-size', function () {
						setSize($(this));
						$recycle.find('.recycle__dropdown-list-size').hide();
						$recycle.find('.recycle__dropdown-term').show();
						$recycle.find('.recycle__dropdown-req').show();
						$recycle.find('.recycle__year').show();
					});

					$recycle.on('click', '.recycle__confirm', function () {
						setYear($($recycle.find('.recycle__year')))
						setRecycle();
					});
					$recycle.on('click', '.recycle__cancel', function () {
						reset();
					});
					$recycle.find('.recycle__yes label').click();
				},
				reInit: function (_$template) {
					setRecycleEl();
					$recycle.find('.recycle__yes label').click();
				}
			}
		}


		/*--\\Samsung Access//--*/
		var showAccessOptions = function () {
			// When options are not selected, must disable checkout 
			self.$el.find('.product-details__info-add').addClass('disable');
			$('.product-top-nav__cta').addClass('disable');
			self.$accOptions.slideDown(function () {
				var heights = _.map(self.$accOptions.find('.access__option'), function (el) {
					return el.clientHeight;
				});
				self.$accOptions.find('.access__option').css('height', _.max(heights));
				self.$access.find('.access__card').addClass('active');
			});
		}

		self.setAccEl = function () {
			self.$access = self.$el.find('.product-details__info-access');
			self.$accMain = self.$access.find('.access__main');
			self.$accOptions = self.$access.find('.access__list');
			self.$access.toggle(self.$access.find('.access__option').length > 0);
			self.$access.find('.access-price').text(self.$access.find('.access-price').text().trim());
			var pcText = self.$access.find('.access__premium .access__item-title').text();
			if (pcText) {
				pcText = 'TV Care Plan - ' + pcText.replace(/[^0-9]+/g, '') + ' Years';
				self.$access.find('.access__premium .access__item-title').text(pcText);
			}
		}

		self.bindAccEvents = function () {
			self.$access.on('click', '.access__view, .access__edit, .access__card-button .cta-button', function () {
				if (self.summaryObj.access) self.tagging.access(true);
				self.$access.find('.access__card').removeClass('active');
				self.$access.find('.access__card').removeClass('selected');
				self.$accOptions.find('.access__option').removeClass('selected');
				if ($(this).hasClass('add')) {
					showAccessOptions();
				}
				updateSummary('access', '');
				self.$pc.show();
				self.$fbt.show();
				self.$offer.show();
				self.$tradein.toggle(self.hasTradeIn);
				self.$install.show();
				self.$bezel.show();
				self.$smount.show();
				self.$accessory.show();
				self.$shelves.show();
				self.$recycle.show();
				self.$el.find('.product-details__info-payment-option .no-access').show();
				gotopage(self.$access.find('.access__list'));
			});
			self.$access.on('click', '.icon-x', function () {
				self.$accOptions.slideUp(function () {
					gotopage(self.$access);
				});
				self.$access.find('.access__card').removeClass('active');
				if (self.summaryObj.access) self.$access.find('.access__card').addClass('selected');
			});
			self.$access.on('click', '.access__option', function () {
				var isSelected = $(this).hasClass('selected');
				var accessRes = '';
				self.$accOptions.find('.access__option').removeClass('selected');
				if (!isSelected) {
					self.tagging.access(false);
					$(this).addClass('selected');
					accessRes = {
						price: Number(self.$accMain.data('price').replace(/[^0-9\.]+/g, '')),
						deferMonth: self.$accMain.data('month'),
						pc: self.$access.find('.access__premium').data('pc-model'),
						entertainment: {
							modelCode: $(this).data('ent-model'),
							name: $(this).find('.access__item-title').text()
						}
					}
					self.$access.find('.access__card-result .entertainment img').attr('src', $(this).find('.access__item-image').attr('src'));
					self.$access.find('.access__card-result .entertainment .access__card-result-text').text($(this).find('.access__item-title').text());
					self.$accOptions.slideUp(function () {
						self.$pc.hide();
						self.$fbt.hide();
						self.$offer.hide();
						self.$el.find('.product-details__info-payment-option .no-access').hide();
						self.$bezel.hide();
						self.$smount.hide();
						self.$shelves.hide();
						self.$accessory.hide();
						self.$recycle.hide();
						!self.stackableWithAccess && self.$tradein.hide();
						if (!!self.summaryObj.tradein && !!self.tradeinRequest && !!self.stackableWithAccess) {
							self.tradeinRequest.offer_id = String(self.stackableWithAccess);
							$.ajax({
								url: $S.tradeIn(),
								data: JSON.stringify(self.tradeinRequest),
								type: 'POST',
								crossDomain: true,
								processData: false,
								dataType: 'json',
								'headers': {
									"Access-Control-Allow-Origin": "*",
									"Content-Type": "application/json",
									Accept: "*/*"
								},
								error: function (e) {
									console.log('error post trade-in');
									updateSummary('tradein', '');
								},
								success: function (res) {
									var exchangeId = !!res && res.id || '';
									updateSummary('tradein', exchangeId);
								}
							});
						}
						self.$install.hide();
						gotopage(self.$payment.find('.product-details__info-purchase-detail'), true);
					});
					self.$access.find('.access__card').removeClass('active');
					self.$access.find('.access__card').addClass('selected');
				} else {
					self.$pc.show();
					self.$fbt.show();
					self.$offer.show();
					self.$tradein.toggle(self.hasTradeIn);
					self.$install.show();
					self.$bezel.show();
					self.$smount.show();
					self.$shelves.show();
					self.$accessory.show();
					self.$recycle.show();
					gotopage(self.$payment, true);
				}
				// --- enable checkout cta
				self.$el.find('.product-details__info-add').removeClass('disable');
				$('.product-top-nav__cta').removeClass('disable');
				updateSummary('access', accessRes);
			})
			self.$access.on('click', '.access__toggle', function () {
				self.$access.find('.access__card-details').toggleClass('active');
			})
		}

		/*--\\Samsung Recommendations//--*/
		self.setRecommendationEl = function () {
			self.$recommendations = self.$el.find('.product-details__info-recommendations');
			var recommendationOffers = self.$recommendations.find('.product-details__recommendations-title').data('recommendation-offers');
			if (recommendationOffers && recommendationOffers.length > 0) {
				self.$recommendations.find('.product-details__recommendations-list').empty();
				_.each(recommendationOffers, function (recommend) {
					var desc = recommend.description ? recommend.description.split('<br>') : [];
					var descText = desc.reduce(function (desc, item) {
						return desc + "<li>" + item.replace('', '').trim() + "</li>";
					}, '')

					var recommendHtml = '<div class="product-details__recommendations-item">'
						+ '<div class="product-details__recommendations-item-image"><img src="' + recommend.image + '" alt="recommend offer image" /></div>'
						+ '<div class="product-details__recommendations-item-content">'
						+ '<div class="product-details__recommendations-item-content-title">' + recommend.name + '</div>'
						+ (recommend.description ? '<div class="product-details__recommendations-item-content-description"><ul>' + descText + '</ul></div>' : '')
						+ '<a class="product-details__recommendations-item-content-link" href="' + recommend.ctaLink + '">' + recommend.ctaText + '</a>'
						+ '</div></div>';
					self.$recommendations.find('.product-details__recommendations-list').append(recommendHtml);
				});
				self.$recommendations.show();
			} else {
				self.$recommendations.hide();
			}
		}

		/*--\\Samsung Offers//--*/
		var scrollToOffer = function (el) {
			$('html, body').animate({
				scrollTop: el.offset().top - 50 - ($('nav#anchor-nav-v2').height() || 0)
			}, 200);
		}
		var selectBundleOption = function (option) {
			var card = option.parents('.offer-bundle__card');
			var promoPrice = option.data('price');
			var msrpPrice = option.data('suggested');
			var name = option.find('label').text();
			var sku = option.data('mdlcd');
			card.find('img').attr('src', option.data('img'));
			card.find('.offer-bundle__sku').text(sku);
			card.find('.offer-bundle__name').text(name);
			var promo = card.find('.bundle__price-promo');
			var msrp = card.find('.bundle__price-msrp');
			promo.find('span').text(formatPrice(promoPrice, true));
			msrp.find('span').text(formatPrice(msrpPrice, true));
			if (promoPrice === msrpPrice) {
				msrp.hide();
			} else {
				msrp.show();
			}
			// update offer card	
			var offerCard = card.prev('.offer__card');
			offerCard.data('price', promoPrice);
			offerCard.data('suggested', msrpPrice);
			offerCard.data('mdlcd', sku);
			// var offerPromo = offerCard.find('.offer__card-promo');
			// var offerMSRP = offerCard.find('.offer__card-msrp');
			// offerPromo.text('$' + formatPrice(promoPrice, true));
			// offerMSRP.text('$' + formatPrice(msrpPrice, true));
			// if (promoPrice === msrpPrice) {
			// 	offerMSRP.hide();
			// } else {
			// 	offerMSRP.show();
			// }
		}

		var chkAccessoryPrice = function () {
			if ((window.location.href.indexOf("accessory") > -1) || (window.location.href.indexOf("accessories") > -1)) {
				var modelCode = self.$el.find('.product-details__info-sku').text();
				var requestData = [{
					'quantity': 1,
					'sku': modelCode
				}];
				if (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) {
					var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
				} else {
					var apiUrl = $S.arbitrate() + '?siteId=';
				}
				var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
				if (($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) || (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() && $.cookie('rewards_tier'))) {
					requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
				}

				$.ajax({
					url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
					data: JSON.stringify(requestData),
					type: 'POST',
					dataType: 'json',
					'headers': {
						'content-type': 'application/json'
					}
				}).then(function (res) {
					var lineItem = res.line_items[Object.keys(res.line_items)[0]];
					var accessoryRes = [];
					_.each(res.line_items, function (ltm) {
						if (ltm.sku_id == lineItem.sku_id) {
							ltm = lineItem;
						}

						accessoryRes.push({
							price: ltm.line_item_cost.display_price || 0,
							suggested: ltm.line_item_cost.regular_price || 0
						});
					});

					console.log(accessoryRes);
					updateSummary('pageaccessory', accessoryRes);
				});
			}
		}

		var getOfferPrice = function () {
			var modelCode = self.$el.find('.product-details__info-sku').text();
			var requestData = [{
				'quantity': 1,
				'sku': modelCode,
				'line_items': []
			}];

			var childLineItem = [];
			_.each(self.$offer.find('.offer__card'), function (el) {
				if ($(el).data('mdlcd')) {
					childLineItem.push({
						'quantity': 1,
						'sku': $(el).data('mdlcd')
					});

					// bundle option
					var childLineItemBundle = [];
					_.each($(el).next('.offer-bundle__card').find('.offer-bundle__option'), function (ele) {
						childLineItemBundle.push({
							'quantity': 1,
							'sku': $(ele).data('mdlcd')
						});
					})

					if (childLineItemBundle.length > 0) {
						if (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) {
							var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
						} else {
							var apiUrl = $S.arbitrate() + '?siteId=';
						}

						childLineItemBundle.forEach(function (child) {
							var requestDataBundle = [{
								'quantity': 1,
								'sku': modelCode,
								'line_items': [child]
							}];

							$.ajax({
								url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
								data: JSON.stringify(requestDataBundle),
								type: 'POST',
								dataType: 'json',
								'headers': {
									'content-type': 'application/json'
								}
							}).then(function (res) {
								var lineItem = res.line_items[Object.keys(res.line_items)[0]];
								_.each(lineItem.line_items, function (ltm) {
									if (ltm.sku_id == lineItem.sku_id) {
										ltm = lineItem;
									}
									var bundle = $('.offer-bundle__option[data-mdlcd="' + ltm.sku_id + '"]');
									bundle.data('price', ltm.line_item_cost.display_price);
									bundle.data('suggested', ltm.line_item_cost.regular_price);
									if (bundle.find('input').prop('checked')) {
										selectBundleOption(bundle);
									}
								})
							})
						})
					}
				}
			})

			if (childLineItem.length > 0) {
				requestData[0].line_items = childLineItem;

				if (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) {
					var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
				} else {
					var apiUrl = $S.arbitrate() + '?siteId=';
				}
				var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
				if (($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) || (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() && $.cookie('rewards_tier'))) {
					requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
				}


				$.ajax({
					url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
					data: JSON.stringify(requestData),
					type: 'POST',
					dataType: 'json',
					'headers': {
						'content-type': 'application/json'
					}
				}).then(function (res) {
					var lineItem = res.line_items[Object.keys(res.line_items)[0]];
					_.each(lineItem.line_items, function (ltm) {
						if (ltm.sku_id == lineItem.sku_id) {
							ltm = lineItem;
						}
						$('.offer__card[data-mdlcd="' + ltm.sku_id + '"]').find('.offer__card-promo').text('$' + ltm.line_item_cost.display_price);
						$('.offer__card[data-mdlcd="' + ltm.sku_id + '"]').find('.offer__card-msrp').text('$' + ltm.line_item_cost.regular_price);
						$('.offer__card[data-mdlcd="' + ltm.sku_id + '"]').data('price', ltm.line_item_cost.display_price);
						$('.offer__card[data-mdlcd="' + ltm.sku_id + '"]').data('suggested', ltm.line_item_cost.regular_price);
						$('.offer__card[data-mdlcd="' + ltm.sku_id + '"]').find('.offer__card-price').show();
						if (ltm.line_item_cost.display_price == ltm.line_item_cost.regular_price) {
							$('.offer__card[data-mdlcd="' + ltm.sku_id + '"]').find('.offer__card-msrp').hide();
						}
						if (ltm.line_item_cost.display_price == 0) {
							$('.offer__card[data-mdlcd="' + ltm.sku_id + '"]').find('.offer__card-promo').hide();
							$('.offer__card[data-mdlcd="' + ltm.sku_id + '"]').find('.offer__card-price').hide();
						}
					})
					var offerRes = '';
					if (self.$offer.find('.offer__card.selected').length) {
						offerRes = _.map(self.$offer.find('.offer__card.selected'), function (offer) {
							return {
								name: $(offer).hasClass('is-bundle-offer') ? $(offer).find('.offer__card-bundleTitle').text() : $(offer).find('.offer__card-title').text(),
								modelCode: $(offer).data('mdlcd'),
								price: $(offer).data('price') || 0,
								suggested: $(offer).data('suggested') || 0
							}
						});
					}
					updateSummary('offer', offerRes);
				})
			}
		}
		self.setOfferEl = function () {
			var hasOffer = false;
			self.$offer = self.$el.find('.product-details__info-offer');
			self.$offerWrapper = self.$el.find('.offer__section');
			self.offerJson = self.$offer.find('.offer__wrapper').data('offers');
			self.$offer.find('.offer__wrapper').empty();
			var preSelectedList = (getValueFromURL('offerId') || '').split(',');
			if (self.offerJson && self.offerJson.length) {
				_.each(self.offerJson, function (offer) {
					hasOffer = true;
					var promo = offer.salePrice > 0 ? '$' + offer.salePrice.replace(/\B(?=(\d{3})+(?!\d))/g, ',') : '';
					var msrp = offer.regularPrice && offer.regularPrice != offer.salePrice ? '$' + offer.regularPrice.replace(/\B(?=(\d{3})+(?!\d))/g, ',') : '';
					var isPreselected = (offer.preSelect == 'Y' || (offer.offerId && offer.offerId.length > 0 && preSelectedList.indexOf(offer.offerId) > -1)) ? 'Y' : 'N';
					var isCtaOffer = offer.ctaText && offer.ctaLink ? 'Y' : 'N';

					var offerDom = '<div class="offer__card" data-hascta="' + isCtaOffer + '" data-preselect="' + isPreselected + '" data-offerid="' + offer.offerId + '"  data-price="' + offer.salePrice + '" data-suggested="' + offer.regularPrice + '" data-mdlcd="' + offer.authoredModelCode + '"><img src="' + offer.image + '"><div class="offer__card-info"><div class="offer__card-title">' + offer.name + '</div><div class="offer__card-text">' + offer.description + '</div><div class="offer__card-price" style="display: ' + (promo || msrp ? 'block' : 'none') + '"><span class="offer__card-promo">' + promo + '</span><span class="offer__card-msrp">' + msrp + '</span></div>' + (offer.ctaText ? '<a class="offer__card-link" href="' + offer.ctaLink + '" >' + offer.ctaText + '</a>' : '') + '</div>' + '<span class="offer__inactive">ADD</span><span class="offer__active">REMOVE</span>' + '</div>';
					self.$offer.find('.offer__wrapper').append(offerDom);

					var familyOptions = {}
					if (offer.bundleFamilyInfo) {
						Object.keys(offer.bundleFamilyInfo).forEach(function (key) {
							if (offer.bundleFamilyInfo[key].stockFlag !== 'N') familyOptions[key] = offer.bundleFamilyInfo[key];
						})
					}
					if (Object.keys(familyOptions).length > 0) {
						function buildOption(bundle, defaultOption) {
							var color = (bundle.itemDisplay || '').toLowerCase().split(' ').join('-')
							var id = 'pdp-v2-bundle-' + bundle.itemDisplay;
							var option = '<li class="offer-bundle__option" data-mdlcd="' + bundle.model + '" data-price="' + (bundle.promoPrice || bundle.productPrice) + '" data-suggested="' + bundle.productPrice + '" data-img="' + bundle.image + '" data-type="' + bundle.option + '">' +
								'<input type="radio" name="' + bundle.option + '" id="' + id + '" ' + (defaultOption.model === bundle.model ? 'checked' : '') + '>' +
								'<label for="' + id + '" data-color="' + color + '" class="color-block">' + bundle.displayName + '</label>' +
								'<span>' + bundle.itemDisplay + '</span>' +
								'</li>';

							return option;
						}

						// set default option on offer card
						var defaultOption = _.find(familyOptions, function (opt) {
							return offer.authoredModelCode === opt.model;
						}) || familyOptions[0];
						var offerCard = self.$offer.find('.offer__card').last();
						offerCard.data('mdlcd', defaultOption.model);
						offerCard.data('price', defaultOption.promoPrice || defaultOption.productPrice);
						offerCard.data('suggested', defaultOption.productPrice);
						offerCard.addClass('is-bundle-offer');
						offerCard.find('.offer__active').text('EDIT');
						offerCard.find('.offer__inactive').text('VIEW');
						offerCard.find('.offer__card-price').remove();
						offerCard.append('<span class="offer__check"></span>');

						// build frame
						var bundleTemplate = '<div class="offer-bundle__card inactive"><div class="offer-bundle__card-wrapper"><button class="offer-bundle__close">&times;</button>';

						// build image 
						bundleTemplate += '<div class="offer-bundle__img"><img src="' + defaultOption.image + '" alt="' + defaultOption.displayName + '"></div>';

						// build info
						bundleTemplate += '<div class="offer-bundle__info"><div>' +
							'<p class="offer-bundle__sku">' + defaultOption.model + '</p>' +
							'<p class="offer-bundle__name">' + defaultOption.displayName + '</p>' +
							'<div class="offer-bundle__price">' +
							'<span class="bundle__price-promo">$<span>' + (defaultOption.promoPrice || defaultOption.productPrice) + '</span></span>' +
							'<span class="bundle__price-msrp">$<span>' + defaultOption.productPrice + '</span></span>' +
							'</div>' +
							'</div>'
						// build options
						bundleTemplate += '<p class="offer-bundle__label">Choose your ' + defaultOption.option + '</p>';
						bundleTemplate += '<ul class="offer-bundle__options">';
						_.each(familyOptions, function (bundle) {
							bundleTemplate += buildOption(bundle, defaultOption);
						});
						bundleTemplate += '</ul>';

						// build button
						bundleTemplate += '<button class="offer-bundle__button">ADD</button>';

						bundleTemplate += '</div></div></div>';
						self.$offer.find('.offer__wrapper').append(bundleTemplate);
					}
				})
			} else {
				updateSummary('offer', '');
			}
			// hasOffer = hasOffer || (self.$el.find('.frequent-products-tv.container').length && self.$el.find('.frequent-products__list .frequent-products__item').length > 0);
			getOfferPrice();

			if (self.isBundleBuilder) hasOffer = false;
			if (!hasOffer) {
				self.$offerWrapper.hide();
			} else {
				self.$offerWrapper.show();
			}
			// preselect
			setTimeout(function () {
				self.$offer.find('.offer__card').each(function () {
					if ($(this).attr('data-preselect') === 'Y') {
						$(this).trigger('click')
					}
				})
			})
		}

		var isS21Offer = function ($ele) {
			return $ele.data('offerid') && String($ele.data('offerid')).indexOf('multiview') > -1;
		}

		var redirectByMultiViewOffer = function () {
			var baseUrl = '/us/smartphones/galaxy-s21-5g/buy/?offerCID=multiview&skipOffer=OFFER-TVDUMMY806';
			window.location.href = baseUrl;
		}

		self.bindOfferEvents = function () {
			self.$offer.on('click', '.offer__card', function () {
				if ($(this).hasClass('is-bundle-offer')) {
					var card = $(this).next('.offer-bundle__card');
					if (card.hasClass('inactive')) {
						// clear selection & open bundle dropdown
						card.removeClass('inactive');
						card.slideDown();
						$(this).removeClass('selected');
						$(this).find('.offer__card-bundle').remove();
					} else {
						if ($(this).hasClass('bundle-click')) {
							// select bundle offer
							$(this).removeClass('bundle-click');
							card.addClass('inactive');
							card.slideUp();
							$(this).addClass('selected');
							scrollToOffer($(this));
						}
					}
				} else {
					if ($(this).data('hascta') == 'Y') {
						return
					}
					self.tagging.offer($(this).hasClass('selected'), $(this).data('option-value'));
					if (isS21Offer($(this))) {
						self.s21OfferId = $(this).data('mdlcd');
						self.$offerOverlay.show();
					}
					else {
						$(this).toggleClass('selected');
					}
				}
				var offerRes = '';
				if (self.$offer.find('.offer__card.selected').length) {
					offerRes = _.map(self.$offer.find('.offer__card.selected'), function (offer) {
						return {
							name: $(offer).hasClass('is-bundle-offer') ? $(offer).find('.offer__card-bundleTitle').text() : $(offer).find('.offer__card-title').text(),
							modelCode: $(offer).data('mdlcd'),
							price: $(offer).data('price') || 0,
							suggested: $(offer).data('suggested') || 0
						}
					});
				}
				updateSummary('offer', offerRes);
				if (self.$offer.find('.offer__card.selected, .offer__bundle-card.selected').length == self.$offer.find('.offer__card, .offer__bundle-card').length) {
					setTimeout(function () {
						gotoNext(self.$offer, 'product-details__section');
					}, 300);
				}
			});
			self.$offer.on('click', '.product-details__info-FBToffer a', function (e) {
				e.preventDefault();
				$("html, body").animate({ scrollTop: ($('#frequent-products-tv').offset().top - 300) + 'px' }, function () {
					$("html, body").animate({ scrollTop: ($('#frequent-products-tv').offset().top - $('#anchor-nav-v2').height()) + 'px' }, 50)
				});
			})
			// bundle
			self.$offer.on('click', '.offer-bundle__option', function (e) {
				selectBundleOption($(this));
			})
			self.$offer.on('click', '.offer-bundle__button', function (e) {
				var card = $(this).parents('.offer-bundle__card');
				var offerCard = card.prev('.offer__card');
				var promo = $(offerCard).data('price').toString().replace(/[^0-9.]+/g, '') || 0;
				var msrp = $(offerCard).data('suggested').toString().replace(/[^0-9.]+/g, '') || 0;
				offerCard.find('.offer__card-info')
					.append('<div class="offer__card-bundle">' +
						'<p class="offer__card-bundleLabel">Youve selected</p>' +
						'<p class="offer__card-bundleTitle">' + card.find('.offer-bundle__name').text() + '</p>' +
						'<div class="offer__card-bundlePrice">' +
						'<span class="promo">$' + formatPrice(promo, true) + '</span>' +
						(msrp > promo ? '<span class="msrp">$' + formatPrice(msrp, true) + '</span>' : '') +
						'</div>' +
						'</div>')
				offerCard.addClass('bundle-click');
				offerCard.trigger('click');
			})
			self.$offer.on('click', '.offer-bundle__close', function (e) {
				var card = $(this).parents('.offer-bundle__card');
				card.addClass('inactive');
				card.slideUp();
			})
			self.$offer.on('click', '.offer__card-link', function (e) {
				var ctaText = e.target.childNodes[0].textContent;
				utag.link({
					'link_cat': 'he best buy module',
					'link_id': ctaText,
					'link_position': 'best buy module',
					'event_name': 'best buy_' + ctaText
				}
				);
			})


			self.$recycle.on('click', '#radio-1', function (e) {
				window.utag && window.utag.link({
					'link_cat': 'non-buy-spa',
					'link_id': 'yes',
					'link_position': 'trade-in',
					'event_name': 'select_tradein_yes'
				});
			})

			self.$recycle.on('click', '#radio-2', function (e) {
				window.utag && window.utag.link({
					'link_cat': 'non-buy-spa',
					'link_id': 'no',
					'link_position': 'trade-in',
					'event_name': 'select_tradein_no'
				});
			})

			self.$recycle.on('click', '.recycle__dropdown-item', function (e) {
				var name = $(this).data('name').toLowerCase();
				window.utag && window.utag.link({
					'link_cat': 'non-buy-spa',
					'link_id': name,
					'link_position': 'trade-in',
					'event_name': 'select_tradein_brand',
				});
			})


			self.$recycle.on('click', '.recycle__dropdown-item-size', function (e) {
				var size = $(this).text();
				window.utag && window.utag.link({
					'link_cat': 'non-buy-spa',
					'link_id': size,
					'link_position': 'trade-in',
					'event_name': 'select_tradein_size',
				});
			})

			self.$recycle.on('click', '.recycle__confirm', function (e) {
				window.utag && window.utag.link({
					'link_cat': 'non-buy-spa',
					'link_id': 'agree',
					'link_position': 'trade-in',
					'event_name': 'select_tradein_terms_agree',
				});
			})

			self.$recycle.on('click', '.recycle__cancel', function (e) {
				window.utag && window.utag.link({
					'link_cat': 'non-buy-spa',
					'link_id': 'not-sure',
					'link_position': 'trade-in',
					'event_name': 'select_tradein_terms_not_sure',
				});
			})

			self.$recycle.on('click', '.recycle__option-edit', function (e) {
				window.utag && window.utag.link({
					'link_cat': 'non-buy-spa',
					'link_id': 'edit',
					'link_position': 'trade-in',
					'event_name': 'select_tradein_edit',
				});
			})

			document.getElementById("recycleYear").addEventListener("blur", function (e) {
				var year = e.target.value;
				window.utag && window.utag.link({
					'link_cat': 'non-buy-spa',
					'link_id': year,
					'link_position': 'trade-in',
					'event_name': 'enter_model_year',
				});
			})

			// click overlay outside

			self.$offerOverlay.on('click', '.s21-offer__overlay-content, .s21-offer__overlay-title, .s21-offer__overlay-description', function (e) {
				e.stopPropagation();
			})
			self.$offerOverlay.on('click', '.s21-offer__overlay-inner', function (e) {
				e.stopPropagation();
				$('.s21-offer__overlay').hide();
			})
			self.$offerOverlay.on('click', '.s21-offer__overlay-close', function (e) {
				e.stopPropagation();
				$('.s21-offer__overlay').hide();
			})
			self.$offerOverlay.on('click', '.go_check_out', function (e) {
				summaryObj = {
					zipCode: summaryObj.zipCode
				};
				self.checkoutFromMultiview = true;
				$('.product-details__info-add').trigger('click');
			})
			self.$offerOverlay.on('click', '.go_forward', function (e) {
				// 1. add to cart
				// 2. redirect to s21
				e.stopPropagation();
				var lineItems = [];
				var parentObj = {
					"sku_id": $('.product-details__info-sku').html(),
					"quantity": 1,
					"line_items": []
				}
				lineItems.push(parentObj);
				var requestData = {
					"line_items": lineItems,
					'postal_code': self.summaryObj.zipCode,
					"coupon_codes": ["500ECERTHHPTV"]
				};
				var apiPath = (getLocationHref().indexOf('www.samsung.com') > -1 || getLocationHref().indexOf('origincl.us.samsung.com') > -1) ? 'https://www.samsung.com/us/api/ecom/v4/shopping-carts/' : 'https://us.ecom-stg.samsung.com/v4/shopping-carts/';
				$.ajax({
					url: apiPath,
					data: JSON.stringify(requestData),
					type: 'POST',
					dataType: 'json',
					'headers': {
						'x-ecom-app-id': 'temp',
						'content-type': 'application/json'
					},
					xhrFields: {
						withCredentials: true
					},
					crossDomain: true,
					error: function () {
						console.log('error call api add to cart');
					},
					success: function (res) {
						redirectByMultiViewOffer();
						// window.location.href = ~getLocationHref().indexOf('/shopapp') ? 'samsungestore://opencategory#category=N0002401' : 'https://www.samsung.com/us/home-appliances/buy/';
					}
				});
			})
		}

		/*--\\Samsung bundle//--*/
		var scrollToBundle = function () {
			$('html, body').animate({
				scrollTop: self.$bundle.offset().top - 50 - ($('nav#anchor-nav-v2').height() || 0)
			}, 200);
		}
		var calcMaxPrice = function () {
			var maxPrice = 0;
			self.$bundle.find('.offer__bundle-option').each(function () {
				var promoPrice = +$(this).find('.offer__bundle-promo span').text().replace(/[^0-9.]+/g, '');
				var msrpPrice = +$(this).find('.offer__bundle-msrp span').text().replace(/[^0-9.]+/g, '');
				maxPrice = Math.max(msrpPrice - promoPrice, maxPrice);
				self.$bundle.find('.offer__bundle-cardTitle span').text('$' + maxPrice.toFixed(2));
			});
		}
		var getBundlePrice = function () {
			var modelCode = self.$el.find('.product-details__info-sku').text();
			var requests = [];

			_.each(self.$offer.find('.offer__bundle-option'), function (el) {
				var requestData = [{
					'quantity': 1,
					'sku': modelCode,
					'line_items': [{
						'quantity': 1,
						'sku': $(el).data('mdlcd')
					}]
				}];
				if (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) {
					var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
				} else {
					var apiUrl = $S.arbitrate() + '?siteId=';
				}
				var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
				if (($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) || (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() && $.cookie('rewards_tier'))) {
					requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
				}

				requests.push($.ajax({
					url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
					data: JSON.stringify(requestData),
					type: 'POST',
					dataType: 'json',
					'headers': {
						'content-type': 'application/json'
					}
				}));
			})

			$.when.apply(null, requests).then(function (res) {
				function updatePrice(res) {
					var lineItem = res.line_items[Object.keys(res.line_items)[0]];
					_.each(lineItem.line_items, function (ltm) {
						if (ltm.sku_id == lineItem.sku_id) {
							ltm = lineItem;
						}
						var bundle = $('.offer__bundle-option[data-mdlcd="' + ltm.sku_id + '"]');
						bundle.find('.offer__bundle-promo span').text(ltm.line_item_cost.display_price);
						bundle.find('.offer__bundle-msrp span').text(ltm.line_item_cost.regular_price);
						bundle.data('price', ltm.line_item_cost.display_price);
						bundle.data('suggested', ltm.line_item_cost.regular_price);
						if (ltm.line_item_cost.display_price == ltm.line_item_cost.regular_price) {
							bundle.find('.offer__bundle-msrp').hide();
						} else {
							bundle.find('.offer__bundle-msrp').show();
						}
						if (ltm.line_item_cost.display_price == 0) {
							bundle.find('.offer__bundle-promo').hide();
							bundle.find('.offer__bundle-msrp').hide();
						}
					})
				}

				if (arguments.length > 0) {
					requests.length > 1 ? Array.prototype.forEach.call(arguments, function (args) {
						updatePrice(args[0])
					}) : updatePrice(arguments[0]);
					calcMaxPrice();
					updateSummaryWithBundle();
				}
			})
		}
		function updateSummaryWithBundle() {
			var bundleRes = _.map(self.$bundle.find('.offer__bundle-option.selected'), function (bundle) {
				return {
					name: $(bundle).find('.offer__bundle-name').text(),
					modelCode: $(bundle).data('mdlcd'),
					price: $(bundle).data('price').toString().replace(/[^0-9.]+/g, '') || 0,
					suggested: $(bundle).data('suggested').toString().replace(/[^0-9.]+/g, '') || 0
				}
			});
			if (bundleRes.length > 0) self.$bundle.find('.offer__bundle-card').addClass('selected');
			else bundleRes = '';
			updateSummary('bundle', bundleRes);
		}
		self.setBundleEl = function () {
			self.$bundle = self.$el.find('.offer__bundle-special');
			self.$isSoundbarOffer = $('.offer__bundle-special .offer__bundle').data('soundbar-flag') === 'Y';
			// clean price
			var options = self.$bundle.find('.offer__bundle-option');
			var addonHide = checkAddonStep(self.addonGroupID) && self.$bundle.find('.offer__bundle-cardTitle').text().indexOf('sound bar') > -1;
			if (addonHide) {
				self.$bundle.remove();
				return;
			}
			if (options.length > 0 && !addonHide) {
				self.$offerWrapper.show();
			}
			options.each(function () {
				var option = $(this);
				var promo = option.find('.offer__bundle-promo');
				var msrp = option.find('.offer__bundle-msrp');
				var promoPrice = +promo.find('span').text().replace(/[^0-9.]+/g, '');
				var msrpPrice = +msrp.find('span').text().replace(/[^0-9.]+/g, '');
				if (promoPrice) promo.find('span').text(promoPrice);
				if (msrpPrice) msrp.find('span').text(msrpPrice);
				if (promoPrice === msrpPrice) {
					msrp.hide();
				}
			})
			// show more/less controller
			if (options.length <= 3) {
				self.$el.find('.offer__bundle-action').remove();
				self.$bundle.find('.offer__bundle-option').addClass('show');
			} else {
				self.$bundle.find('.offer__bundle-option').each(function (index) {
					if (index > 2) $(this).removeClass('show');
					else $(this).addClass('show');
				})
			}
			calcMaxPrice();
			getBundlePrice();
		}
		self.bindBundleEvents = function () {
			self.$bundle.on('click', '.offer__bundle-card', function () {
				self.$bundle.find('.offer__bundle-wrapper').slideDown();
				scrollToBundle();
			});
			self.$bundle.on('click', '.offer__bundle-title button', function () {
				self.$bundle.find('.offer__bundle-wrapper').slideUp();
				self.$bundle.find('.offer__bundle-add .install__add').trigger('click');
			});
			// self.$bundle.on('click', '.offer__bundle-option', function(e) {
			// 	e.stopPropagation();
			// 	$(this).toggleClass('selected');
			// 	self.$bundle.find('.offer__bundle-wrapper').slideUp();
			// 	scrollToBundle();

			// 	var bundleRes = '';
			// 	if (self.$bundle.find('.offer__bundle-option.selected').length) {
			// 		bundleRes = _.map(self.$bundle.find('.offer__bundle-option.selected'), function(bundle) {
			// 			return {
			// 				name: $(bundle).find('.offer__bundle-name').text(),
			// 				modelCode: $(bundle).data('mdlcd'),
			// 				price: $(bundle).data('price').toString().replace(/[^0-9.]+/g, '') || 0,
			// 				suggested: $(bundle).data('suggested').toString().replace(/[^0-9.]+/g, '') || 0
			// 			}
			// 		});
			// 	}
			// 	var bundleCard = self.$bundle.find('.offer__bundle-card');
			// 	var selectedList = bundleCard.find('.selected-list');
			// 	selectedList.empty();
			// 	if (bundleRes.length > 0) {
			// 		bundleCard.addClass('selected');
			// 		bundleRes.forEach(function(bundle) {
			// 			selectedList.append('<p class="selected-name">' + bundle.name + '</p><p class="selected-price">$<span>' + Number(bundle.price || bundle.suggested).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') + '</span></p>')
			// 		});
			// 	} else {
			// 		bundleCard.removeClass('selected');
			// 	}
			// 	updateSummary('bundle', bundleRes);
			// 	if (self.$offer.find('.offer__card.selected, .offer__bundle-card.selected').length == self.$offer.find('.offer__card, .offer__bundle-card').length) {
			// 		setTimeout(function() {
			// 			gotoNext(self.$offer, 'product-details__section');
			// 		}, 300);
			// 	}
			// });
			self.$bundle.on('click', '.offer__bundle-add .install__add', function (e) {
				e.preventDefault();
				self.$bundle.find('.offer__bundle-wrapper').slideUp();
				scrollToBundle();
				var bundleCard = self.$bundle.find('.offer__bundle-card');
				var selectedList = bundleCard.find('.selected-list');
				selectedList.empty();

				// add soundbar option
				self.$bundleRes = '';
				if (self.$bundle.find('.offer__bundle-option.selected').length) {
					self.$bundleRes = _.map(self.$bundle.find('.offer__bundle-option.selected'), function (bundle) {
						return {
							name: $(bundle).find('.offer__bundle-name').text(),
							modelCode: $(bundle).data('mdlcd'),
							price: $(bundle).data('price').toString().replace(/[^0-9.]+/g, '') || 0,
							suggested: $(bundle).data('suggested').toString().replace(/[^0-9.]+/g, '') || 0
						}
					});
					$('.soundbar__install__section').show();
				}

				if (self.$bundle.find('.soundbar__install__card.selected').length && self.$isSoundbarOffer) {
					var soundbarInstallData = {
						name: 'Professional soundbar mounting',
						modelCode: "L-INST/B1-SBA",
						price: '80.00',
						suggested: '80.00'
					}
					self.$bundleRes.push(soundbarInstallData)
				}





				if (self.$bundleRes.length > 0) {
					bundleCard.addClass('selected');
					self.$bundleRes.forEach(function (bundle) {
						selectedList.append('<p class="selected-name">' + bundle.name + '</p><p class="selected-price">$<span>' + Number(bundle.price || bundle.suggested).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',') + '</span></p>')
					});
				} else {
					bundleCard.removeClass('selected');
				}
				updateSummary('bundle', self.$bundleRes);
				if (self.$offer.find('.offer__card.selected, .offer__bundle-card.selected').length == self.$offer.find('.offer__card, .offer__bundle-card').length) {
					setTimeout(function () {
						gotoNext(self.$offer, 'product-details__section');
					}, 300);
				}

			});

			self.$bundle.on('click', '.soundbar__install__card', function (e) {
				if ($(this).hasClass('selected')) {
					$(this).removeClass('selected');
					$('.soundbar__install__card-edit').text('add');
					// self.$bundleRes = self.$bundleRes.filter(function(bundle){
					// 	return bundle.modelCode!="L-INST/B1-SBA";
					// })
				} else {
					$(this).addClass('selected');
					$('.soundbar__install__card-edit').text('remove')
					// var soundbarInstallData = {
					//   name: 'Professional soundbar mounting',
					//   modelCode: "L-INST/B1-SBA",
					//   price: '99.99',
					// 	suggested: '99.99'
					// }
					// self.$bundleRes.push(soundbarInstallData)
				}
			});

			self.$bundle.on('click', '.offer__bundle-option', function (e) {
				e.stopPropagation();
				$(this).toggleClass('selected');

				if (self.$bundle.find('.offer__bundle-option.selected').length == 0) {
					$('.soundbar__install__card').removeClass('selected');
					$('.soundbar__install__card-edit').text('add');
					$('.soundbar__install__section').hide();
				} else if (self.$bundle.find('.offer__bundle-option.selected').length > 0 && self.$isSoundbarOffer) {
					$('.soundbar__install__section').show();
				}

				// self.$bundleRes = '';
				// if (self.$bundle.find('.offer__bundle-option.selected').length) {
				// 	self.$bundleRes = _.map(self.$bundle.find('.offer__bundle-option.selected'), function(bundle) {
				// 		return {
				// 			name: $(bundle).find('.offer__bundle-name').text(),
				// 			modelCode: $(bundle).data('mdlcd'),
				// 			price: $(bundle).data('price').toString().replace(/[^0-9.]+/g, '') || 0,
				// 			suggested: $(bundle).data('suggested').toString().replace(/[^0-9.]+/g, '') || 0
				// 		}
				// 	});
				// 	$('.soundbar__install__section').show();
				// }else {
				// 	$('.soundbar__install__card').removeClass('selected');
				// 	$('.soundbar__install__card-edit').text('add');
				// 	$('.soundbar__install__section').hide();
				// }
			});
			self.$bundle.on('click', '.offer__bundle-action button', function () {
				var button = $(this)
				self.$bundle.find('.offer__bundle-option').each(function (index) {
					if (index > 2 && button.hasClass('more-active')) $(this).removeClass('show');
					else $(this).addClass('show');
				})
				if (button.hasClass('more-active')) {
					button.removeClass('more-active');
					button.html('See More<span class="icon-down-carat"></span>'); f
				} else {
					button.addClass('more-active');
					button.html('See Less<span class="icon-up-carat"></span>');
				}
			});
		}

		/*--\\Samsung Tradein//--*/
		self.setTradeInEl = function () {
			self.$tradein = self.$el.find('.product-details__info-tradein');
			self.tradeinJson = self.$tradein.find('.exchange-trade-in-json').data('exchange-tradein');
			var hasTradeIn = self.hasTradeIn = self.$tradein.find('.tradein__container').length > 0 && !!self.tradeinJson && Object.keys(self.tradeinJson).length > 0;
			// if(getLocationHref().indexOf('/us/mobile/audio/headphones/') > -1) {
			// 	hasTradeIn = self.hasTradeIn = false;
			// }
			if (self.hasRecycle) {
				hasTradeIn = self.hasTradeIn = false;
			}
			self.$tradein.toggle(hasTradeIn);
			if (hasTradeIn) {
				var tradeInMap = {};
				_.each(self.tradeinJson, function (obj) {
					if (obj.tradeIn) {
						_.each(obj.tradeIn, function (tradein) {
							if (!tradeInMap[tradein.categoryName]) tradeInMap[tradein.categoryName] = {};
							if (!tradeInMap[tradein.categoryName][obj.name.trim()]) tradeInMap[tradein.categoryName][obj.name.trim()] = { crackedTradeIn: [], tradeIn: [] };
							tradeInMap[tradein.categoryName][obj.name.trim()].tradeIn.push(tradein);
						});
						_.each(obj.crackedTradeIn, function (cracked) {
							if (!tradeInMap[cracked.categoryName]) tradeInMap[cracked.categoryName] = {};
							if (!tradeInMap[cracked.categoryName][obj.name.trim()]) tradeInMap[cracked.categoryName][obj.name.trim()] = { crackedTradeIn: [], tradeIn: [] };
							tradeInMap[cracked.categoryName][obj.name.trim()].crackedTradeIn.push(cracked);
						});
					}
				});
				self.tradeInMap = tradeInMap;
				//constuct L1 dropdown
				_.each(Object.keys(self.tradeInMap), function (categoryName) {
					self.$tradein.find('.tradein__category-dropdown').append('<div data-option-value="' + categoryName + '">' + categoryName + '</div>')
				});
			}
			self.stackableWithAccess = self.$tradein.find('.tradein__container').data('access-offerid');
		}
		function resetTradeInElement() {
			self.$tradein.find('.tradein__enroll').show();
			self.$tradein.find('[data-view=1]').slideDown();
			self.$tradein.find('[data-view=2]').hide();
			self.$tradein.find('[data-view=3]').hide();
			self.$tradein.find('.tradein__wrapper').removeClass('selected');
			resetTradeInQuestions();
			self.stackableWithAccess = self.$tradein.find('.tradein__container').data('access-offerid');
		}
		function resetTradeInQuestions() {
			self.$tradein.find('.tradein__bottom').show();
			self.$tradein.find('.tradein__question').hide();
			self.$tradein.find('.tradein__question-item').hide();
			self.$tradein.find('.tradein__question-item').eq(0).show();
			self.$tradein.find('.tradein__question-reset').hide();
			self.$tradein.find('.tradein__question-final').hide();
			self.$tradein.find('.tradein__question-cracked').hide();
			self.$tradein.find('.tradein__question-option').removeClass('selected');
			self.$tradein.find('.tradein__question-skip').removeClass('selected');
		}
		self.bindTradeinEvents = function () {
			//enrollment button
			var tradein = {
				category: '',
				maker: '',
				device: '',
				price: '',
				cracked: false
			}
			self.$tradein.on('click', '.tradein__enroll-option, .tradein__skip, .tradein__question-skip', function () {
				if ($(this).hasClass('tradein__enroll-option')) self.tagging.tradein($(this).data('option-value'));
				if ($(this).hasClass('tradein__question-skip') || $(this).hasClass('tradein__skip')) self.tagging.tradeinDisagree();
				self.$tradein.find('.tradein__enroll-option').removeClass('selected');
				$(this).addClass('selected');
				if ($(this).data('enroll') == true) {
					self.$tradein.find('[data-view=1]').show();
					self.$tradein.find('.tradein__wrapper').slideDown(function () {
						gotopage(self.$tradein.find('.tradein__wrapper'));
					});
				} else {
					self.$tradein.find('[data-view=2]').hide();
					self.$tradein.find('.tradein__wrapper').slideUp(function () {
						gotoNext(self.$tradein, 'product-details__section');
					});
					$('.tradein__category [data-select]').text('Select a Category');
					updateSummary('tradein', '');
					tradein = {
						category: '',
						maker: '',
						device: '',
						cracked: false
					}
					resetTradeInElement();
				}
				self.$tradein.find('.tradein__dropdown').hide();
			});
			//category dropdown
			self.$tradein.on('click', '.tradein__category', function () {
				if (self.$tradein.find('.tradein__category-dropdown').is(':hidden')) {
					self.$tradein.find('.tradein__dropdown').hide();
					self.$tradein.find('.tradein__category-dropdown').show();
				} else {
					self.$tradein.find('.tradein__dropdown').hide();
				}
			});
			//category option
			self.$tradein.on('click', '.tradein__category-dropdown div', function (e) {
				e.stopPropagation();
				self.tagging.tradeinCategory($(this).data('option-value'));
				tradein.category = $(this).text().trim();
				$('.tradein__category [data-select]').text(tradein.category);
				//construct L2 dropdown
				self.$tradein.find('.tradein__maker-dropdown').empty();
				_.each(self.tradeInMap[tradein.category], function (cat, name) {
					self.$tradein.find('.tradein__maker-dropdown').append('<div data-option-value="' + name + '"><span>' + name + '</span></div>');
				});
				tradein.maker = self.$tradein.find('.tradein__maker-dropdown div').eq(0).text().trim();
				self.$tradein.find('.tradein__maker [data-select]').text(tradein.maker);
				self.$tradein.find('.maker').text(tradein.maker);
				//construct L3 dropdown
				self.$tradein.find('.tradein__device-dropdown').empty();
				_.each(self.tradeInMap[tradein.category][tradein.maker].tradeIn, function (device, idx) {
					if (idx == 0) tradein.price = device.price;
					self.$tradein.find('.tradein__device-dropdown').append('<div data-option-value="' + device.name + '" data-mdlCd="' + device.modelCode + '" data-price="' + device.price + '" data-index="' + idx + '"><span>' + device.name + '</span><span>$' + device.price + '<span></div>');
				});
				tradein.device = 0;
				self.$tradein.find('.tradein__price__value').text('$' + tradein.price);
				self.$tradein.find('.tradein__result-value .tradein_value').text('$' + tradein.price);
				self.$tradein.find('.tradein__device [data-select]').text(self.$tradein.find('.tradein__device-dropdown div').eq(0).text().trim().split('$')[0]);
				self.$tradein.find('.device').text(self.$tradein.find('.tradein__device-dropdown div').eq(0).text().trim().split('$')[0]);
				self.$tradein.find('[data-view=2]').slideDown(function () {
					gotopage(self.$tradein.find('[data-view=2]'));
				});
				self.$tradein.find('.tradein__dropdown').hide();
				resetTradeInQuestions();
			});
			//maker dropdown
			self.$tradein.on('click', '.tradein__maker', function () {
				if (self.$tradein.find('.tradein__maker-dropdown').is(':hidden')) {
					self.$tradein.find('.tradein__dropdown').hide();
					self.$tradein.find('.tradein__maker-dropdown').show();
				} else {
					self.$tradein.find('.tradein__dropdown').hide();
				}
			});
			//maker option
			self.$tradein.on('click', '.tradein__maker-dropdown div', function (e) {
				e.stopPropagation();
				self.tagging.tradeinBrand($(this).data('option-value'));
				tradein.maker = $(this).text().trim();
				self.$tradein.find('.tradein__maker [data-select]').text(tradein.maker);
				self.$tradein.find('.maker').text(tradein.maker);
				//construct L3 dropdown
				self.$tradein.find('.tradein__device-dropdown').empty();
				_.each(self.tradeInMap[tradein.category][tradein.maker].tradeIn, function (device, idx) {
					if (idx == 0) tradein.price = device.price;
					self.$tradein.find('.tradein__device-dropdown').append('<div data-option-value="' + device.name + '" data-mdlCd="' + device.modelCode + '" data-price="' + device.price + '" data-index="' + idx + '"><span>' + device.name + '</span><span>$' + device.price + '</span></div>');
				});
				tradein.device = 0;
				self.$tradein.find('.tradein__price__value').text('$' + tradein.price);
				self.$tradein.find('.tradein__result-value .tradein_value').text('$' + tradein.price);
				self.$tradein.find('.tradein__device [data-select]').text(self.$tradein.find('.tradein__device-dropdown div').eq(0).text().trim().split('$')[0]);
				self.$tradein.find('.device').text(self.$tradein.find('.tradein__device-dropdown div').eq(0).text().trim().split('$')[0]);
				self.$tradein.find('.tradein__dropdown').hide();
				resetTradeInQuestions();
			});
			//device dropdown
			self.$tradein.on('click', '.tradein__device', function () {
				if (self.$tradein.find('.tradein__device-dropdown').is(':hidden')) {
					self.$tradein.find('.tradein__dropdown').hide();
					self.$tradein.find('.tradein__device-dropdown').show();
				} else {
					self.$tradein.find('.tradein__dropdown').hide();
				}
			});
			//device option
			self.$tradein.on('click', '.tradein__device-dropdown div', function (e) {
				e.stopPropagation();
				self.tagging.tradeinModel($(this).data('option-value'));
				tradein.device = $(this).data('index');
				tradein.price = $(this).data('price');
				self.$tradein.find('.tradein__price__value').text('$' + tradein.price);
				self.$tradein.find('.tradein__result-value .tradein_value').text('$' + tradein.price);
				self.$tradein.find('.tradein__device [data-select]').text($(this).text().trim().split('$')[0]);
				self.$tradein.find('.device').text($(this).text().trim().split('$')[0]);
				self.$tradein.find('.tradein__dropdown').hide();
				resetTradeInQuestions();
			});
			//action button
			self.$tradein.on('click', '.tradein__action-option[data-requirement=true], .tradein__question-enroll', function () {
				self.tagging.tradeinAgree();
				var isCracked = tradein.cracked ? 'crackedTradeIn' : 'tradeIn';
				var offerId = self.tradeInMap[tradein.category][tradein.maker][isCracked][tradein.device].offerId;
				var deviceId = self.tradeInMap[tradein.category][tradein.maker][isCracked][tradein.device].id;
				if (self.summaryObj.access && self.stackableWithAccess) {
					offerId = String(self.stackableWithAccess);
				}
				var requestData = {
					"device_info": {
						"state": {
							"device_working": "Yes",
							"data_wiped": "Yes",
							"screen_working": !tradein.cracked ? "Yes" : 'No'
						}
					},
					"device_id": deviceId,
					"offer_id": offerId,
					"sku": self.$el.find('.product-details__info-sku').eq(0).text()
				};
				// var endpoint = "https://us.ecom-qa.samsung.com/v1/exchange";
				// if (getLocationHref().indexOf('www') > -1 || getLocationHref().indexOf('stgweb') > -1) endpoint = "https://www.samsung.com/us/api/ecom/v1/exchange";
				// if (getLocationHref().indexOf('stgwww') > -1) endpoint = 'https://us.ecom-stg.samsung.com/v1/exchange';
				$.ajax({
					url: $S.tradeIn(),
					data: JSON.stringify(requestData),
					type: 'POST',
					crossDomain: true,
					processData: false,
					dataType: 'json',
					'headers': {
						"Access-Control-Allow-Origin": "*",
						"Content-Type": "application/json",
						Accept: "*/*"
					},
					error: function (e) {
						console.log('error post trade-in');
						updateSummary('tradein', '');
					},
					success: function (res) {
						self.tradeinRequest = requestData;
						var tradeinImage = self.tradeInMap[tradein.category][tradein.maker][isCracked][tradein.device].imageUrl;
						self.$tradein.find('.tradein__result img').attr('src', tradeinImage);
						self.$tradein.find('.tradein__enroll').hide();
						self.$tradein.find('[data-view=0]').hide();
						self.$tradein.find('[data-view=1]').slideUp();
						self.$tradein.find('[data-view=2]').slideUp();
						self.$tradein.find('[data-view=3]').show();
						self.$tradein.find('.tradein__wrapper').addClass('selected');
						var exchangeId = !!res && res.id || '';
						updateSummary('tradein', exchangeId);
						setTimeout(function () {
							gotoNext(self.$tradein, 'product-details__section');
						}, 400);
					}
				});
			});
			self.$tradein.on('click', '.tradein__action-option[data-requirement=false]', function () {
				self.tagging.tradeinCondition();
				self.$tradein.find('.tradein__bottom').hide();
				self.$tradein.find('.tradein__question').slideDown(function () {
					gotopage(self.$tradein.find('.tradein__question'));
				});
			})
			//question button
			self.$tradein.on('click', '.tradein__question-option', function () {
				$(this).addClass('selected');
				$(this).siblings().removeClass('selected');
				var question = $(this).parents('.tradein__question-item').data('question');
				self.tagging.tradeinQuestion(question, $(this).data('option-value'));
				var answer = $(this).data('answer');
				if (answer == false) {
					if (question < 3) {
						self.$tradein.find('.tradein__question-final').hide();
						self.$tradein.find('.tradein__question-reset').show();
					} else {
						self.$tradein.find('.tradein__question-reset').hide();
						self.$tradein.find('.tradein__question-final').show();
						self.$tradein.find('.tradein__question-cracked').show();
						tradein.cracked = true;
					}
				} else {
					if (question < 3) {
						self.$tradein.find('.tradein__question-reset').hide();
						self.$tradein.find('.tradein__question-item[data-question="' + (question + 1) + '"]').show();
					} else {
						self.$tradein.find('.tradein__question-cracked').hide();
						self.$tradein.find('.tradein__question-final').show();
						tradein.cracked = false;
					}
				}
			});
			self.$tradein.on('click', '.tradein__question-restart', function () {
				self.$tradein.find('.tradein__bottom').show();
				self.$tradein.find('.tradein__question').hide();
				self.$tradein.find('.tradein__question-item').hide();
				self.$tradein.find('.tradein__question-item').eq(0).show();
				self.$tradein.find('.tradein__question-reset').hide();
				self.$tradein.find('.tradein__question-final').hide();
				self.$tradein.find('.tradein__question-cracked').hide();
				self.$tradein.find('.tradein__question-option').removeClass('selected');
				self.$tradein.find('.tradein__question-skip').removeClass('selected');
				gotopage(self.$tradein);
			})
			//edit button
			self.$tradein.on('click', '.tradein__result-edit', function () {
				self.tagging.tradeinEdit();
				self.$tradein.find('.tradein__enroll').show();
				self.$tradein.find('[data-view=0]').show();
				self.$tradein.find('[data-view=1]').slideDown();
				self.$tradein.find('[data-view=2]').slideDown();
				self.$tradein.find('[data-view=3]').hide();
				self.$tradein.find('.tradein__wrapper').removeClass('selected');
			})

			self.$tradein.on('click', '.tradein__work__title', function () {
				self.$tradein.find('.tradein__work__overlay').show();
			});
			self.$tradein.on('click', '.overlay-container .dialog .close', function () {
				self.$tradein.find('.tradein__work__overlay').hide();
			});

			$(document).click(function (event) {
				if ($('.tradein__work__overlay').is(':visible') && !$(event.target).closest(".dialog.box").length && $(event.target).closest(".tradein__work__overlay").length) {
					self.$tradein.find('.tradein__work__overlay').hide();
				}
			})

		}

		/*--\\Samsung Buds Tradein//--*/
		self.setBudsTradeInEl = function () {
			self.$tradeinbuds = self.$el.find('.product-details__info-tradein-buds');
			self.tradeinbudsJson = self.$tradeinbuds.find('.exchange-trade-in-json').data('exchange-tradein');
			self.hasBudsTradeIn = self.$tradeinbuds.find('.tradein__container').length > 0 && !!self.tradeinbudsJson && Object.keys(self.tradeinbudsJson).length > 0;
			var ecom = self.$result.data('ecom');
			var stock = self.$result.data('stock');
			var buyable = ecom == 'Y' && stock != 'N';

			if (window.location.href.indexOf("/us/shop/s23-fe-bundle/") > -1) {
				$('.product-details__info-tradein-buds').hide();
			}

			self.hasBudsTradeIn = self.hasBudsTradeIn && (buyable || isBopisAvailable());

			self.$tradeinbuds.find('.tradein__container').toggle(self.hasBudsTradeIn);
			if (self.hasBudsTradeIn) {

				var tradeInBudsMap = {};
				var maxSaving = 0;
				var minSaving = 999999;
				_.each(self.tradeinbudsJson, function (obj) {
					if (obj.tradeIn) {
						_.each(obj.tradeIn, function (tradein) {
							if (!tradeInBudsMap[tradein.name.trim()]) tradeInBudsMap[tradein.name.trim()] = {};
							tradeInBudsMap[tradein.name.trim()][obj.name.trim()] = tradein;
							maxSaving = Math.max(maxSaving, tradein.price.replace(/[^0-9.]+/g, ''));
							minSaving = Math.min(minSaving, tradein.price.replace(/[^0-9.]+/g, ''));
						});
					}
				});
				self.tradeInBudsMap = tradeInBudsMap;
				// update saving price
				self.$tradeinbuds.find('.tradein__maxSaving').text('$' + maxSaving);
				// set this value to 0 once user accept/deny the tradein
				self.budsTradeInMaxSaving = maxSaving;

				$('.product-top-nav__pricing').find('.tradein-min').text('$' + minSaving)
				$('.product-top-nav__pricing').find('.tradein-max').text('$' + maxSaving)
				//constuct L1 dropdown
				self.$tradeinbuds.find('.tradein__category-dropdown').empty();
				_.each(Object.keys(self.tradeInBudsMap), function (categoryName) {
					self.$tradeinbuds.find('.tradein__category-dropdown').append('<div data-option-value="' + categoryName + '">' + categoryName + '</div>')
				});
			}
			//self.stackableWithAccess = self.$tradeinbuds.find('.tradein__container').data('access-offerid');
		}

		function resetTradeInBudsElement() {
			self.$tradeinbuds.find('.tradein__enroll').show();
			self.$tradeinbuds.find('[data-view=1]').slideDown();
			self.$tradeinbuds.find('[data-view=2]').hide();
			self.$tradeinbuds.find('[data-view=3]').hide();
			self.$tradeinbuds.find('.tradein__wrapper').removeClass('selected');
			self.$tradeinbuds.find('.tradein__select').removeClass('selected');
			// resetTradeInQuestions();
			// self.stackableWithAccess = self.$tradeinbuds.find('.tradein__container').data('access-offerid');
		}

		self.bindBudsTradeinEvents = function () {
			//enrollment button
			var tradein = {
				category: '',
				maker: '',
				device: '',
				cracked: false,
				price: 0
			}

			self.$tradeinbuds.on('click', '.tradein__enroll-option, .tradein__action-option[data-requirement=false]', function () {
				if ($(this).hasClass('tradein__enroll-option')) self.tagging.tradein($(this).data('option-value'));
				self.$tradeinbuds.find('.tradein__enroll-option').removeClass('selected');
				$(this).addClass('selected');
				if ($(this).data('enroll') == true) {
					self.$tradeinbuds.find('[data-view=1]').show();
					self.$tradeinbuds.find('.tradein__wrapper').slideDown(function () {
						gotopage(self.$tradeinbuds.find('.tradein__wrapper'));
					});
				} else {
					self.$tradeinbuds.find('[data-view=2]').hide();
					self.$tradeinbuds.find('.tradein__wrapper').slideUp(function () {
						gotoNext(self.$tradeinbuds, 'product-details__section');
					});
					$('.tradein__category [data-select]').text('Select a Category');
					tradein = {
						category: '',
						maker: '',
						device: '',
						cracked: false
					}
					self.budsTradeInMaxSaving = 0;
					updateSummary('audiotradein', '');
					resetTradeInBudsElement();
				}
				self.$tradeinbuds.find('.tradein__dropdown').hide();
			});

			//category dropdown
			self.$tradeinbuds.on('click', '.tradein__category', function () {
				if (self.$tradeinbuds.find('.tradein__category-dropdown').is(':hidden')) {
					self.$tradeinbuds.find('.tradein__dropdown').hide();
					self.$tradeinbuds.find('.tradein__category-dropdown').show();
				} else {
					self.$tradeinbuds.find('.tradein__dropdown').hide();
				}
			});
			//category option
			self.$tradeinbuds.on('click', '.tradein__category-dropdown div', function (e) {
				e.stopPropagation();
				self.tagging.tradeinCategory($(this).data('option-value'));
				$(this).parents('.tradein__select').addClass('selected');
				tradein.category = $(this).text().trim();
				$('.tradein__category [data-select]').text(tradein.category);
				self.$tradeinbuds.find('.tradein__maker-dropdown').empty();

				var otherMaker = ''
				_.each(self.tradeInBudsMap[tradein.category], function (maker) {
					var option = '<div data-option-value="' + maker.grpNameLvl1 + '" data-price-value="' + maker.price +
						'" data-image-value="' + ($(window).width() > 768 ? maker.imageUrl : maker.imageMobileUrl) +
						'"><span>' + maker.grpNameLvl1 + '</span><span>$' + maker.price + '</span></div>';
					if (maker.grpNameLvl1.toLowerCase() === 'other') otherMaker = option;
					else self.$tradeinbuds.find('.tradein__maker-dropdown').append(option);
				});
				if (otherMaker) self.$tradeinbuds.find('.tradein__maker-dropdown').prepend(otherMaker);
				tradein.maker = self.$tradeinbuds.find('.tradein__maker-dropdown div').eq(0).data('option-value');
				tradein.price = self.$tradeinbuds.find('.tradein__maker-dropdown div').eq(0).data('price-value');
				self.$tradeinbuds.find('.maker').text(tradein.maker);
				self.$tradeinbuds.find('.tradein__reactive .category').text(tradein.category.replace(' audio headset', ''));
				self.$tradeinbuds.find('.tradein__reactive .price').text(tradein.price);
				self.$tradeinbuds.find('.tradein__maker [data-select]').html('<p>Brand</p><div><span>' + tradein.maker + '</span><span>$' + tradein.price + '</span></div>');
				self.$tradeinbuds.find('.tradein__maker [data-select]').parents('.tradein__select').addClass('selected');

				self.$tradeinbuds.find('[data-view=2]').slideDown(function () {
					gotopage(self.$tradeinbuds.find('[data-view=2]'));
				});
				self.$tradeinbuds.find('.tradein__dropdown').hide();
			});

			//maker dropdown
			self.$tradeinbuds.on('click', '.tradein__maker', function () {
				if (self.$tradeinbuds.find('.tradein__maker-dropdown').is(':hidden')) {
					self.$tradeinbuds.find('.tradein__dropdown').hide();
					self.$tradeinbuds.find('.tradein__maker-dropdown').show();
				} else {
					self.$tradeinbuds.find('.tradein__dropdown').hide();
				}
			});
			//maker option
			self.$tradeinbuds.on('click', '.tradein__maker-dropdown div', function (e) {
				e.stopPropagation();
				self.tagging.tradeinBrand($(this).data('option-value'));
				tradein.maker = $(this).data('option-value');
				tradein.price = $(this).data('price-value');
				self.$tradeinbuds.find('.tradein__maker [data-select]').parents('.tradein__select').addClass('selected');
				self.$tradeinbuds.find('.tradein__maker [data-select]').html('<p>Brand</p><div><span>' + tradein.maker + '</span><span>$' + tradein.price + '</span></div>');
				self.$tradeinbuds.find('.maker').text(tradein.maker);
				self.$tradeinbuds.find('.tradein__reactive .category').text(tradein.category.replace(' audio headset', ''));
				self.$tradeinbuds.find('.tradein__reactive .price').text(tradein.price);
				self.$tradeinbuds.find('.tradein__dropdown').hide();
			});

			//action button
			self.$tradeinbuds.on('click', '.tradein__action-option[data-requirement=true]', function () {
				self.tagging.tradeinAgree();
				var api = ~getLocationHref().indexOf('stgcl') ? 'https://us.ecom-stg.samsung.com/us/api/v1/exchange' : window.$S.tradeIn();
				var offerId = self.tradeInBudsMap[tradein.category][tradein.maker].offerId;
				var deviceId = self.tradeInBudsMap[tradein.category][tradein.maker].id;
				var requestData = {
					"device_info": {
						"state": {
							"device_working": "Yes",
							"accessories_included": "Yes"
						}
					},
					"device_id": deviceId,
					"offer_id": offerId,
					"sku": self.$el.find('.product-details__info-sku').eq(0).text()
				};

				$.ajax({
					url: api,
					data: JSON.stringify(requestData),
					type: 'POST',
					crossDomain: true,
					processData: false,
					dataType: 'json',
					'headers': {
						"Access-Control-Allow-Origin": "*",
						"Content-Type": "application/json",
						Accept: "*/*"
					},
					error: function (e) {
						console.log('error post trade-in');
						updateSummary('audiotradein', '');
					},
					success: function (res) {
						self.tradeinRequest = requestData;
						var tradeinImage = self.tradeInBudsMap[tradein.category][tradein.maker].imageUrl;
						self.$tradeinbuds.find('.tradein__result img').attr('src', tradeinImage);
						self.$tradeinbuds.find('.tradein__enroll').hide();
						self.$tradeinbuds.find('[data-view=0]').hide();
						self.$tradeinbuds.find('[data-view=1]').slideUp();
						self.$tradeinbuds.find('[data-view=2]').slideUp();
						self.$tradeinbuds.find('[data-view=3]').show();
						self.$tradeinbuds.find('.tradein__wrapper').addClass('selected');
						var exchangeId = !!res && res.id || '';
						updateSummary('audiotradein', {
							modelCode: exchangeId,
							price: tradein.price
						});
						self.budsTradeInMaxSaving = 0;
						setTimeout(function () {
							gotoNext(self.$tradeinbuds, 'product-details__section');
						}, 400);
					}
				});
			});

			//edit button
			self.$tradeinbuds.on('click', '.tradein__result-edit', function () {
				self.tagging.tradeinEdit();
				self.$tradeinbuds.find('.tradein__enroll').show();
				self.$tradeinbuds.find('[data-view=0]').show();
				self.$tradeinbuds.find('[data-view=1]').slideDown();
				self.$tradeinbuds.find('[data-view=2]').slideDown();
				self.$tradeinbuds.find('[data-view=3]').hide();
				self.$tradeinbuds.find('.tradein__wrapper').removeClass('selected');
			})
		}

		/*--\\buds2 Bopis//--*/
		self.bopis = {
			sku: '',
			postal_code: $.cookie('eddzipcode') || '',
			storeId: $.cookie('storeid') || '',
			edd_message: '',
			storeName: '',
			stockMessage: '',
			skusArray: [],
			payment_method: '',
			available_payments: []
		}

		function handlePriceZeroIssue(){
			const config = { attributes: false, childList: true, characterData: true };

			const priceDivs = document.querySelectorAll('.epp-price');
			if(!priceDivs || !priceDivs.length){
				return;
			}
			let timer = null;

			const handleNewRelicError = ()=>{
				if(timer != null){
					clearTimeout(timer)
				}
				timer = setTimeout(()=>{
					const message = "NavBar Price is $0"
					console.error(message)
					window.newrelic.noticeError(message);
				}, 1000)
			}
			priceDivs.forEach((div)=>{
				if(parseInt(div.textContent) == 0 && window && window.newrelic && window.newrelic.noticeError){
					handleNewRelicError();
					return;
				}
				function callback(mutationsList, observer){
					for(const mutation of mutationsList){
						if(mutation.type === 'characterData' || mutation.type === 'childList'){
							if(parseInt(div.textContent) == 0 && window && window.newrelic && window.newrelic.noticeError){
								handleNewRelicError();
							}
						}
					}
				}
				const observer = new MutationObserver(callback);
				observer.observe(div, config)
			})
		}

		handlePriceZeroIssue();

		// function getSelectedStore(responseData, currentStoreId, finalSku) {
		// 	var _responseData$stores, _responseData$stores$, _responseData$stores2, _responseData$stores3, _responseData$fastest, _responseData$fastest2, _responseData$stores4, _responseData$product6, _responseData$product7, _responseData$product8, _responseData$product9, _responseData$product10;

		// 	var result = {}; // no stores available

		// 	if (!(responseData !== null && responseData !== void 0 && (_responseData$stores = responseData.stores) !== null && _responseData$stores !== void 0 && (_responseData$stores$ = _responseData$stores[0]) !== null && _responseData$stores$ !== void 0 && _responseData$stores$.id) || !(responseData !== null && responseData !== void 0 && (_responseData$stores2 = responseData.stores) !== null && _responseData$stores2 !== void 0 && (_responseData$stores3 = _responseData$stores2[0]) !== null && _responseData$stores3 !== void 0 && _responseData$stores3.display_name)) {
		// 		return result;
		// 	} // If current store name is present in data store list, use that store to retrieve store id


		// 	var currentSelectedStore = currentStoreId && responseData.stores.find(function (s) {
		// 		return (s === null || s === void 0 ? void 0 : s.id) === currentStoreId;
		// 	});

		// 	if (currentSelectedStore !== null && currentSelectedStore !== void 0 && currentSelectedStore.id && currentSelectedStore !== null && currentSelectedStore !== void 0 && currentSelectedStore.display_name) {
		// 		var _responseData$product, _responseData$product2, _responseData$product3, _responseData$product4, _responseData$product5;

		// 		result.storeId = currentSelectedStore === null || currentSelectedStore === void 0 ? void 0 : currentSelectedStore.id;
		// 		result.storeName = currentSelectedStore === null || currentSelectedStore === void 0 ? void 0 : currentSelectedStore.display_name;
		// 		result.stockMessage = (_responseData$product = responseData.products) === null || _responseData$product === void 0 ? void 0 : (_responseData$product2 = _responseData$product[finalSku]) === null || _responseData$product2 === void 0 ? void 0 : (_responseData$product3 = _responseData$product2[0]) === null || _responseData$product3 === void 0 ? void 0 : (_responseData$product4 = _responseData$product3.stores) === null || _responseData$product4 === void 0 ? void 0 : (_responseData$product5 = _responseData$product4.find(function (s) {
		// 			return s.store_id === currentSelectedStore.id;
		// 		})) === null || _responseData$product5 === void 0 ? void 0 : _responseData$product5.availability_custom_stock_message;
		// 		return result;
		// 	} // if fastest store name is available, use matching store to retrieve store id


		// 	var fastestStoreName = finalSku && ((_responseData$fastest = responseData.fastest_delivery) === null || _responseData$fastest === void 0 ? void 0 : (_responseData$fastest2 = _responseData$fastest[finalSku]) === null || _responseData$fastest2 === void 0 ? void 0 : _responseData$fastest2.store_name);
		// 	var fastestStore = fastestStoreName && ((_responseData$stores4 = responseData.stores) === null || _responseData$stores4 === void 0 ? void 0 : _responseData$stores4.find(function (s) {
		// 		return (s === null || s === void 0 ? void 0 : s.display_name) === fastestStoreName;
		// 	}));

		// 	if (fastestStore !== null && fastestStore !== void 0 && fastestStore.id && fastestStore !== null && fastestStore !== void 0 && fastestStore.display_name) {
		// 		var _responseData$fastest3, _responseData$fastest4;

		// 		result.storeId = fastestStore === null || fastestStore === void 0 ? void 0 : fastestStore.id;
		// 		result.storeName = fastestStore === null || fastestStore === void 0 ? void 0 : fastestStore.display_name;
		// 		result.stockMessage = (_responseData$fastest3 = responseData.fastest_delivery) === null || _responseData$fastest3 === void 0 ? void 0 : (_responseData$fastest4 = _responseData$fastest3[finalSku]) === null || _responseData$fastest4 === void 0 ? void 0 : _responseData$fastest4.custom_stock_message;
		// 		return result;
		// 	} // return first store


		// 	var firstStore = responseData.stores[0];
		// 	result.storeId = firstStore === null || firstStore === void 0 ? void 0 : firstStore.id;
		// 	result.storeName = firstStore === null || firstStore === void 0 ? void 0 : firstStore.display_name;
		// 	result.stockMessage = (_responseData$product6 = responseData.products) === null || _responseData$product6 === void 0 ? void 0 : (_responseData$product7 = _responseData$product6[finalSku]) === null || _responseData$product7 === void 0 ? void 0 : (_responseData$product8 = _responseData$product7[0]) === null || _responseData$product8 === void 0 ? void 0 : (_responseData$product9 = _responseData$product8.stores) === null || _responseData$product9 === void 0 ? void 0 : (_responseData$product10 = _responseData$product9.find(function (s) {
		// 		return s.store_id === firstStore.id;
		// 	})) === null || _responseData$product10 === void 0 ? void 0 : _responseData$product10.availability_custom_stock_message;
		// 	return result;
		// }
		// function getSelectedStore(responseData, currentStoreId, finalSku) {
		// 	let result = {};

		// 	// no stores available
		// 	if (!responseData?.stores?.[0]?.id || !responseData?.stores?.[0]?.display_name) {
		// 		return result;
		// 	}

		// 	// If current store name is present in data store list, use that store to retrieve store id
		// 	let currentSelectedStore = (currentStoreId && responseData.stores.find(s => s?.id === currentStoreId))
		// 	if (currentSelectedStore?.id && currentSelectedStore?.display_name) {
		// 		result.storeId = currentSelectedStore?.id;
		// 		result.storeName = currentSelectedStore?.display_name;
		// 		result.stockMessage = responseData.products?.[finalSku]?.[0]?.stores?.find(s => s.store_id === currentSelectedStore.id)?.availability_custom_stock_message;
		// 		return result;
		// 	}

		// 	// if fastest store name is available, use matching store to retrieve store id
		// 	const fastestStoreName = finalSku && responseData.fastest_delivery?.[finalSku]?.store_name;
		// 	let fastestStore = fastestStoreName && responseData.stores?.find(s => s?.display_name === fastestStoreName);
		// 	if (fastestStore?.id && fastestStore?.display_name) {
		// 		result.storeId = fastestStore?.id;
		// 		result.storeName = fastestStore?.display_name;
		// 		result.stockMessage = responseData.fastest_delivery?.[finalSku]?.custom_stock_message;
		// 		return result;
		// 	}

		// 	// return first store
		// 	const firstStore = responseData.stores[0];
		// 	result.storeId = firstStore?.id;
		// 	result.storeName = firstStore?.display_name;
		// 	result.stockMessage = responseData.products?.[finalSku]?.[0]?.stores?.find(s => s.store_id === firstStore.id)?.availability_custom_stock_message;
		// 	return result;
		// }


		function getSelectedStore(responseData, currentStoreId, finalSku) {
			var result = {};

			// no stores available
			if (!responseData || !responseData.stores || !responseData.stores[0] || !responseData.stores[0].id || !responseData.stores[0].display_name) {
				return result;
			}

			// If current store name is present in data store list, use that store to retrieve store id
			var currentSelectedStore = (currentStoreId && responseData.stores.find(function (s) {
				return s.id === currentStoreId;
			}))
			if (currentSelectedStore && currentSelectedStore.id && currentSelectedStore.display_name) {
				result.storeId = currentSelectedStore.id;
				result.storeName = currentSelectedStore.display_name;
				result.stockMessage = '';
				if (responseData.products && responseData.products[finalSku] && responseData.products[finalSku][0] && responseData.products[finalSku][0].stores) {
					var findStore = responseData.products[finalSku][0].stores.find(function (s) {
						return s.store_id === currentSelectedStore.id;
					})
					result.stockMessage = findStore.availability_custom_stock_message;

					if ($.cookie('PickupDate') == 'true' && findStore.availability_custom_stock_message_v2) {
						result.stockMessage = findStore.availability_custom_stock_message_v2;
						result.limitCnt = findStore.limited_quantity_message_v2;
					}
				}

				return result;
			}

			// if fastest store name is available, use matching store to retrieve store id
			var fastestStoreName = finalSku && responseData.fastest_delivery && responseData.fastest_delivery[finalSku] && responseData.fastest_delivery[finalSku].store_name;
			var fastestStore = fastestStoreName && responseData.stores && responseData.stores.find(function (s) {
				return s.display_name === fastestStoreName
			});

			if (fastestStore && fastestStore.id && fastestStore.display_name) {
				result.storeId = fastestStore.id;
				result.storeName = fastestStore.display_name;
				result.stockMessage = responseData.fastest_delivery[finalSku].custom_stock_message;

				if ($.cookie('PickupDate') == 'true' && fastestStoreName && responseData.fastest_delivery[finalSku].availability_custom_stock_message_v2) {
					result.stockMessage = responseData.fastest_delivery[finalSku].availability_custom_stock_message_v2;
					result.limitCnt = responseData.fastest_delivery[finalSku].limited_quantity_message_v2;
				}

				return result;
			}

			// return first store
			var firstStore = responseData.stores[0];
			result.storeId = firstStore.id;
			result.storeName = firstStore.display_name;
			result.stockMessage = responseData.products[finalSku] && responseData.products[finalSku][0] && responseData.products[finalSku][0].stores && responseData.products[finalSku][0].stores.find(function (s) {
				return s.store_id === firstStore.id
			}).availability_custom_stock_message;
			//result.stockMessage = responseData.products?.[finalSku]?.[0]?.stores?.find(s => s.store_id === firstStore.id)?.availability_custom_stock_message;
			return result;
		}

		function renderStorePicker() {
			//var base = getLocationHref().indexOf('www.samsung.com')>-1 ? '': 'https://stgwebus.samsung.com/';
			var iframeBaseUrl = "/us/store-picker/?postalcode=<postalCode>&sku=<sku>&payment_method=<paymentMethod>" + (window.innerWidth < 769 ? "" : "&closeCta=true");
			var iframeurl = iframeBaseUrl.replace('<sku>', self.bopis.sku).replace('<postalCode>', self.bopis.postal_code).replace('<paymentMethod>', self.bopis.payment_method);
			var iframeHtml = '<iframe src=' + iframeurl + ' name="storepicker" height="100%" width="100%" onload="window.hideIframeLoader()"/>';
			$('#iframe-store-container').empty();
			setTimeout(function () {
				document.getElementById('iframe-store-container').innerHTML = iframeHtml;
			}, 500);
		}

		// function isBopisAvailable() {
		// 	var enable =false;
		// 	if(window&&window.bopisEnable&&Array.isArray(window.bopisEnable)) {
		// 		window.bopisEnable.forEach(function(item){
		// 			var itemsku = $('.product-details__info-sku').eq(0).text();
		// 			if(getLocationHref().indexOf(item)>-1 || (itemsku && itemsku.toLowerCase().indexOf(item.toLowerCase())>-1)) enable =true;
		// 		})
		// 	}
		// 	return enable;
		// }

		function isBopisAvailable() {
			var pc_bopis_flag = $('.product-details__info-add').data('isbopis');
			return pc_bopis_flag == 'Y';
		}

		function resetBopisWithPay() {
			if (!isBopisAvailable()) return;
			if (self.paymentId && typeof self.paymentId == 'string' && self.bopis.available_payments) {
				console.log(self.paymentId);
				if (self.bopis.available_payments.indexOf(self.paymentId.toLowerCase()) == -1) {
					self.$bopis.find('.inStorePickUpDetails .pickUpMessage').text('Not available for pickup');
					self.$bopis.find('.inStorePickUpDetails .limitCnt').hide();
					self.$bopis.find('.inStorePickUpLabel .storeName').text('Unavailable');
					if (!$('.bopis .inStorePickUp').hasClass('notAvailable')) $('.bopis .inStorePickUp').addClass('notAvailable')
				} else {
					self.$bopis.find('.inStorePickUpLabel .storeName').text(self.bopis.storeName || 'Select Store');
					self.$bopis.find('.inStorePickUpDetails .pickUpMessage').text(self.bopis.stockMessage);
					self.$bopis.find('.inStorePickUpDetails .limitCnt').hide();
					$('.bopis .inStorePickUp').removeClass('notAvailable');
				}
			}
		}

		function fetchBopisData(postal_code, store_id, limit, payment_method, singleSku) {
			var ecomBase = (window.location.href.indexOf('www.samsung.com') > -1 || window.location.href.indexOf('origincl.us.samsung.com') > -1) ? 'https://www.samsung.com/us/api' : 'https://us.ecom-qa.samsung.com';
			var apiUrl = ecomBase + '/v4/configurator/delivery-pickup-availability';
			var skusArray = [];

			// find skus in order of color => size => model => series => singlr sku
			if ($('.product-details__info-selector.color-selector .selector-option .option-value').length > 0) {
				$('.product-details__info-selector.color-selector .selector-option .option-value').each(function () {
					if ($(this).attr("data-option-sku")) {
						skusArray.push({ "sku": $(this).attr("data-option-sku") });
					}
				});
			} else if ($('.product-details__info-selector[data-family-option="Size"] .selector-option .option-value').length > 0) {
				$('.product-details__info-selector[data-family-option="Size"] .selector-option .option-value').each(function () {
					if ($(this).attr("data-option-sku")) {
						skusArray.push({ "sku": $(this).attr("data-option-sku") });
					}
				});
			} else if ($('.product-details__info-selector[data-family-option="Model"] .selector-option .option-value').length > 0) {
				$('.product-details__info-selector[data-family-option="Model"] .selector-option .option-value').each(function () {
					if ($(this).attr("data-option-sku")) {
						skusArray.push({ "sku": $(this).attr("data-option-sku") });
					}
				});
			} else if ($('.product-details__info-selector[data-family-option="Series"] .selector-option .option-value').length > 0) {
				$('.product-details__info-selector[data-family-option="Series"] .selector-option .option-value').each(function () {
					if ($(this).attr("data-option-sku")) {
						skusArray.push({ "sku": $(this).attr("data-option-sku") });
					}
				});
			}

			// $('.product-details__info-selector.color-selector .selector-option .option-value').each(function() {
			// 	if($(this).attr("data-option-sku")) {
			// 		skusArray.push({"sku":$(this).attr("data-option-sku")});
			// 	}
			// });
			// if(getLocationHref().indexOf('us/computing/monitors') >-1) {
			// 	$('.product-details__info-selector[data-family-option="Size"] .selector-option .option-value').each(function() {
			// 		if($(this).attr("data-option-sku")) {
			// 			skusArray.push({"sku":$(this).attr("data-option-sku")});
			// 		}
			// 	});
			// }

			// if(getLocationHref().indexOf('us/televisions-home-theater/home-theater') >-1) {
			// 	$('.product-details__info-selector[data-family-option="Series"] .selector-option .option-value').each(function() {
			// 		if($(this).attr("data-option-sku")) {
			// 			skusArray.push({"sku":$(this).attr("data-option-sku")});
			// 		}
			// 	});
			// }

			if (skusArray.length === 0) {
				var onesku = self.$el.find('.product-details__info-sku').eq(0).text();
				if (onesku) skusArray.push({ "sku": onesku });
			}
			self.bopis.skusArray = skusArray;

			var body = {
				"consolidate": false,
				"products_details": true,
				"postal_code": postal_code || self.bopis.postal_code,
				"products": singleSku ? [{ "sku": self.bopis.sku }] : skusArray
			}

			if (limit) body['limit'] = 10;
			if (store_id) body['store_id'] = store_id;
			if (payment_method) body['payment_method'] = payment_method;


			$.ajax({
				type: 'POST',
				url: apiUrl,
				contentType: 'application/json',
				// data:  JSON.stringify({
				// 	"limit":10,
				// 	"products": [{"sku":self.bopis.sku}],
				// 	"postal_code": postal_code || self.bopis.postal_code,
				// 	"consolidate": false,
				//   "products_details": true
				// })
				data: JSON.stringify(body)
			}).then(function (data) {

				if (data['fastest_delivery'] && data['fastest_delivery'][self.bopis.sku]) {
					var payObj = data['fastest_delivery'][self.bopis.sku]['payment_methods'] || {};
					self.bopis.available_payments = Object.keys(payObj).map(function (name) {
						return name.toLowerCase();
					});
				}

				$('#cover-spin').hide();
				self.$bopis.find('.deliveryDetails #deliveryZip').text(self.bopis.postal_code);

				var storeCount = data && Array.isArray(data.stores) ? data.stores.length : 0;
				var selectedStore = getSelectedStore(data, self.bopis.storeId, self.bopis.sku);
				self.bopis.storeName = storeCount ? selectedStore.storeName : '';
				self.bopis.storeId = selectedStore.storeId || '';
				self.bopis.stockMessage = selectedStore.stockMessage || '';
				self.bopis.limitCnt = selectedStore.limitCnt || '';
				self.bopis.postal_code = data.postal_code;
				$.cookie('HA-Deeplink-Zipcode', self.bopis.postal_code, {domain: '.samsung.com'});
				$.cookie('eddzipcode', self.bopis.postal_code, { domain: '.samsung.com' });
				$.cookie('storeid', self.bopis.storeId, { domain: '.samsung.com' });

				// set edd overlay
				var deliveryMethod = self.$bopis.find('.outputSection-container');
				deliveryMethod.empty()
				self.$bopis.find('#bopisOverlay .inputSection input').removeClass('noDelivery');
				if (data && data.products && data.products[self.bopis.sku] && getLocationHref().indexOf('us/computing/monitors') < 0 && getLocationHref().indexOf('us/televisions-home-theater/tvs') < 0) {
					var isDeliveryMethodAvailalbe = false;
					if (data.products[self.bopis.sku].length) {
						data.products[self.bopis.sku].forEach(function (item) {
							var deliveryType = item.delivery_method_display_name;
							var deliveryDate = item.delivery_slots && item.delivery_slots[0] && item.delivery_slots[0].edd_custom_stock_message || '';
							var deliveryCost = item.delivery_slots && item.delivery_slots[0] && item.delivery_slots[0].cost || '';
							var deliverySaleprice = deliveryCost.sale_price && deliveryCost.sale_price.value;
							var deliveryPriceText = deliverySaleprice === 0 ? "Free" : (deliverySaleprice && (!isNaN(deliverySaleprice)) && deliverySaleprice > 0) ? "$" + deliverySaleprice.toFixed(2) : "";
							var deliver = '<div class="deliveryType">' + deliveryDate + '<div class="deliverySlots">' + deliveryPriceText + '</div> </div>';
							if (deliveryType && deliveryDate) {
								isDeliveryMethodAvailalbe = true;
								deliveryMethod.append(deliver);
							}
						})
					}
					if (!isDeliveryMethodAvailalbe) {
						self.$bopis.find('#bopisOverlay .inputSection input').addClass('noDelivery');
						var deliver = '<div class="noDelivaryForZip">Delivery unavailable for this zip</div>';
						deliveryMethod.append(deliver);
						$('.product-top-nav__cta-wrapper').find('.product-top-nav__cta').addClass('disable');
						$('.product-details__info-cta').find('.product-details__info-add').addClass('disable');
						$('.product-details__info-ship').get(0).style.setProperty('display', 'none', 'important');
					}
					else{
						$('.product-top-nav__cta-wrapper').find('.product-top-nav__cta').removeClass('disable');
						$('.product-details__info-cta').find('.product-details__info-add').removeClass('disable');
						$('.product-details__info-ship').css('display', 'block');
					}
				}
				else if (!(data.products && data.products[self.bopis.sku]) && getLocationHref().indexOf('us/computing/monitors') < 0 && getLocationHref().indexOf('us/televisions-home-theater/tvs') < 0) {
					self.$bopis.find('#bopisOverlay .inputSection input').addClass('noDelivery');
					var deliver = '<div class="noDelivaryForZip">Delivery unavailable for this zip</div>';
					deliveryMethod.append(deliver);
					$('.product-top-nav__cta-wrapper').find('.product-top-nav__cta').addClass('disable');
					$('.product-details__info-cta').find('.product-details__info-add').addClass('disable');
					$('.product-details__info-ship').get(0).style.setProperty('display', 'none', 'important');
				}
				else{
					$('.product-top-nav__cta-wrapper').find('.product-top-nav__cta').removeClass('disable');
					$('.product-details__info-cta').find('.product-details__info-add').removeClass('disable');
                    $('.product-details__info-ship').css('display', 'block');
				}
				self.bopis.edd_message = data && data.fastest_delivery && data.fastest_delivery[self.bopis.sku] && data.fastest_delivery[self.bopis.sku].edd_custom_stock_message || '';
				var esd_message = data && data.fastest_delivery && data.fastest_delivery[self.bopis.sku] && data.fastest_delivery[self.bopis.sku].esd_custom_stock_message || '';
				var delivery_method_tagging = data && data.fastest_delivery && data.fastest_delivery[self.bopis.sku] && data.fastest_delivery[self.bopis.sku].delivery_options && Object.keys(data.fastest_delivery[self.bopis.sku].delivery_options)[0] || ''
				self.$bopis.find('.deliveryMethod').text(delivery_method_tagging)
				if (getLocationHref().indexOf('us/computing/monitors') > -1 || getLocationHref().indexOf('us/televisions-home-theater/tvs') > -1) {
					if (esd_message) self.$bopis.find('.deliveryDetails .pickUpMessage').text(esd_message);
				} else {
					if (self.bopis.edd_message) self.$bopis.find('.deliveryDetails .pickUpMessage').text(self.bopis.edd_message);
				}
				//if(self.bopis.edd_message) self.$bopis.find('.deliveryDetails .pickUpMessage').text(self.bopis.edd_message);
				if (self.bopis.postal_code) self.$bopis.find('#bopisOverlay .inputSection input').val(self.bopis.postal_code);

				// set store pickup
				var isStorePickUpAvailable = data && data.fastest_delivery && data.fastest_delivery[self.bopis.sku] && data.fastest_delivery[self.bopis.sku].store_pickup_available;
				var isStorePickUpEligible = data && data.fastest_delivery && data.fastest_delivery[self.bopis.sku] && data.fastest_delivery[self.bopis.sku].store_pickup_eligible;

				// check payment method
				if (typeof self.paymentId == 'string' && self.bopis.available_payments.indexOf(self.paymentId.toLowerCase()) == -1) {
					isStorePickUpAvailable = false;
					isStorePickUpEligible = false;
				}

				if (isStorePickUpAvailable) { // when isStorePickUpAvailable is true but show "select store instead of store name"
					self.$bopis.find('.inStorePickUpLabel .storeName').text(self.bopis.storeName || 'Select Store');
					self.$bopis.find('.inStorePickUpDetails .pickUpMessage').text(self.bopis.stockMessage);
					self.$bopis.find('.inStorePickUpDetails .limitCnt .limitCntMessage').text(self.bopis.limitCnt);
					if (self.bopis.limitCnt) {
						self.$bopis.find('.inStorePickUpDetails .limitCnt').show();
					} else {
						self.$bopis.find('.inStorePickUpDetails .limitCnt').hide();
					}
					$('.bopis .inStorePickUp').removeClass('notAvailable');
				} else if (!isStorePickUpAvailable && isStorePickUpEligible) {
					self.$bopis.find('.inStorePickUpDetails .pickUpMessage').text('Pickup unavailable for this ZIP');
					self.$bopis.find('.inStorePickUpDetails .limitCnt').hide();
					self.$bopis.find('.inStorePickUpLabel .storeName').text('Select Store');
					$('.bopis .inStorePickUp').removeClass('notAvailable');
				} else {
					self.$bopis.find('.inStorePickUpDetails .pickUpMessage').text('Not available for pickup');
					self.$bopis.find('.inStorePickUpDetails .limitCnt').hide();
					self.$bopis.find('.inStorePickUpLabel .storeName').text('Unavailable');
					if (!$('.bopis .inStorePickUp').hasClass('notAvailable')) $('.bopis .inStorePickUp').addClass('notAvailable')
				}

				// set summary when oos
				var ecom = self.$result.data('ecom');
				var stock = self.$result.data('stock');
				var buyable = ecom == 'Y' && stock != 'N';
				if (!buyable && isBopisAvailable()) {
					$('.product-details__info-cta .cta-button').text('ADD TO CART');
					$('.product-details__info-cta .product-details__info-add').data('cta', 'ADD TO CART');
					$('.product-details__info-cta .cta-button').attr('href', 'javascript:;');
					if (isStorePickUpAvailable) {
						$('.product-details__info-cta .cta-button').css('pointer-events', 'auto');
						$('.product-details__info-cta .cta-button').css('background-color', '#1428a0');
					} else {
						$('.product-details__info-cta .cta-button').css('pointer-events', 'none');
						$('.product-details__info-cta .cta-button').css('background-color', 'grey');
					}
				}

				var eddOptions = '';

				// set date for other skus
				// if(singleSku&&store_id&&!limit&&$('.edd-container').length) {
				// 	// after slected from iframe, send call to update pick date with single sku andd storeid
				// 	var edd_optionS = data && data.fastest_delivery && data.fastest_delivery[self.bopis.sku] && data.fastest_delivery[self.bopis.sku].custom_stock_message || '';
				// 	$('.edd-container').find('[data-edd-sku="'+self.bopis.sku+'"]').text(edd_optionS);

				// }else {
				// 	if(Array.isArray(self.bopis.skusArray) && self.bopis.skusArray.length>0) {
				// 		eddOptions = '<div class="edd-container">';
				// 		self.bopis.skusArray.forEach(function(item) {
				// 			var edd_option = data && data.fastest_delivery && data.fastest_delivery[item.sku] && data.fastest_delivery[item.sku].custom_stock_message || '';

				// 			eddOptions+= '<div class="edd-option" data-edd-sku="' + item.sku + '">' + edd_option + '</div>'

				// 		})
				// 		eddOptions+= '</div>'
				// 		$('.product-details__info-selector.color-selector .edd-container').remove();
				// 		$('.product-details__info-selector.color-selector').append(eddOptions);
				// 	}

				// }


				if (singleSku && store_id && !limit && $('.edd-container').length) {
					// after slected from iframe, send call to update pick date with single sku andd storeid
					var edd_optionS = data && data.fastest_delivery && data.fastest_delivery[self.bopis.sku] && data.fastest_delivery[self.bopis.sku].custom_stock_message || '';
					$('.product-details__info-selector.color-selector').find('.edd-option[data-edd-sku="' + self.bopis.sku + '"]').text(edd_optionS);

				} else {
					if (Array.isArray(self.bopis.skusArray) && self.bopis.skusArray.length > 0) {
						$('.product-details__info-selector.color-selector .edd-option').remove();
						self.bopis.skusArray.forEach(function (item) {
							var edd_option = data && data.fastest_delivery && data.fastest_delivery[item.sku] && data.fastest_delivery[item.sku].custom_stock_message || '';

							var eddOptionDom = '<div class="edd-option" data-edd-sku="' + item.sku + '">' + edd_option + '</div>'
							$('.product-details__info-selector.color-selector').find('a[data-option-sku="' + item.sku + '"]').append(eddOptionDom);
						})

					}

				}
				var deliveryInfo = $('.product-details__info-results').find('.deliveryDetails .pickUpMessage').text();
				var pickupInfo = $('.product-details__info-results').find('.inStorePickUpDetails .pickUpMessage').text();
				var storeName = $('.product-details__info-results').find('.inStorePickUpDetails .storeName').text();
				var shippingMethod = self.$bopis.find('.deliveryMethod').text();
				var bopisEnabled = (pickupInfo == 'Pickup unavailable for this ZIP' || pickupInfo == 'Not available for pickup' || $('.product-details__info-results').find('.inStorePickUp').hasClass('notAvailable')) ? 'N' : 'Y';

				if (self.isLanding) {
					self.isLanding = false;
					var bopisTagObj = {
						'zip_code':  self.bopis.postal_code,
						'deliver_info': '[' + deliveryInfo + ']',
						'pickup_info': '[' + pickupInfo + ']',
						'store_name': '[' + storeName + ']',
						'shipping_method': '[' + shippingMethod + ']',
						'bopis_enabled': bopisEnabled
					}

					if (window.utag_data) {
						$.extend(window.utag_data, bopisTagObj)
					} else {
						window.utag_data = {}
						$.extend(window.utag_data, bopisTagObj)
					}
				}

				if (self.switchFamilyTagging) {
					self.switchFamilyTagging = false;
					var tagObj = {
						'link_cat': 'pdp',
						'link_id': self.linkTextTagging,
						'link_position': 'family_option',
						'event_name': 'select_' + self.selectedFamilyTagging,
						'zip_code': self.bopis.postal_code,
						'product_id': self.bopis.sku,
						'pickup_info': '[' + pickupInfo + ']',
						'deliver_info': '[' + deliveryInfo + ']',
						'store_name': '[' + storeName + ']',
						'bopis_enabled': bopisEnabled
					}
					window.utag && window.utag.link(tagObj)
				}

				if ($.cookie('user_allow_location') == 'true') {
					$.cookie('user_allow_location', '', { path: '/', domain: '.samsung.com' })
					window.utag && window.utag.link({
						'link_cat': 'pdp',
						'link_id': 'allow',
						'link_position': 'geo location',
						'event_name': 'allow_geo_location',
						'zip_code': self.bopis.postal_code,
						'product_id': self.bopis.sku,
						'pickup_info': '[' + pickupInfo + ']',
						'deliver_info': '[' + deliveryInfo + ']',
						'store_name': '[' + storeName + ']',
						'bopis_enabled': bopisEnabled
					})
				}
				if ($.cookie('user_disallow_location') == 'true') {

					$.cookie('user_disallow_location', '', { path: '/', domain: '.samsung.com' })
					window.utag && window.utag.link({
						'link_cat': 'pdp',
						'link_id': 'disallow',
						'link_position': 'geo location',
						'event_name': 'disallow_geo_location'
					})
				}
			})
		}

		self.setBopisEl = function () {
			self.$bopis = self.$el.find('.product-details__info-summary .bopis');
			self.bopis.sku = $('.product-details__info-sku').html();

			if (window.innerWidth < 769) {
				$('.store-overlay-wrapper .dialog').removeClass('box');
				if (!$('.store-overlay-wrapper .dialog').hasClass('full')) $('.store-overlay-wrapper .dialog').addClass('full');
			} else {
				$('.store-overlay-wrapper .dialog').removeClass('full');
				if (!$('.store-overlay-wrapper .dialog').hasClass('box')) $('.store-overlay-wrapper .dialog').addClass('box');
			}

			if (isBopisAvailable()) {
				if (!$('.product-details__info-selector.color-selector .selector-option').hasClass('bopis-color')) {
					$('.product-details__info-selector.color-selector .selector-option').addClass('bopis-color')
				}

				$('.bopis').show();
				//$('.footer-bopis').show();
				//$('.product-details__info-ship').empty();
				// $('.product-details__info-ship .shipping-info .date').empty();
				// $('.product-details__info-ship .shipping-info b').text('Free Shipping and easy returns');
				window.AEMapp.EDD.fetchLocation().then(function (data) {
					var datazip = data && data.address ? data.address.postal_code : ''
					self.bopis.postal_code = self.bopis.postal_code || datazip || '10001';
					self.$bopis.find('.deliveryDetails #deliveryZip').text(self.bopis.postal_code);
					fetchBopisData(self.bopis.postal_code, self.bopis.store_id, false, self.bopis.payment_method, false)
				});
			} else {
				$('.bopis').hide();
				//$('.footer-bopis').hide();
				$('.product-details__info-ship').show();
				if ($('.product-details__info-selector.color-selector .selector-option').hasClass('bopis-color')) {
					$('.product-details__info-selector.color-selector .selector-option').removeClass('bopis-color')
				}
			}
		}

		self.bindBopisEl = function () {
			self.tagging.bopisDeliveryHide();
			if (!isBopisAvailable()) return;
			// overlay
			$(document).click(function (e) {

				var isInsideOverlay = $.contains(document.getElementById('bopisOverlay'), e.target);
				if (!isInsideOverlay && e.target.id !== 'deliveryZip') {

					if (!$('#bopisOverlay').hasClass('hide')) $('#bopisOverlay').addClass('hide');
				}
			});

			$(document).click(function (e) {

				var isInsideOverlay = $.contains(document.getElementsByClassName('.store-overlay-wrapper'), e.target);
				if (!isInsideOverlay) {

					if (!$('.store-overlay-wrapper').hasClass('hide')) $('.store-overlay-wrapper').addClass('hide');
				}
			});

			self.$bopis.on('click', '#deliveryZip', function (e) {
				e.stopPropagation();
				self.tagging.bopisDeliveryZipClick(self.bopis.postal_code);
				if ($('#bopisOverlay').hasClass('hide')) $('#bopisOverlay').removeClass('hide');
			});

			self.$bopis.on('click', '.inputSection .button', function (e) {
				e.stopPropagation();
				var newzip = $('.inputSection input').val();
				if (newzip == self.bopis.postal_code) return;
				$('#cover-spin').show();
				$.cookie('HA-Deeplink-Zipcode', newzip, {domain: '.samsung.com'});
				$.cookie('eddzipcode', newzip, { domain: '.samsung.com' });
				self.bopis.postal_code = newzip;
				self.tagging.bopisDeliveryZipGo(newzip);
				fetchBopisData(newzip, '', false, self.bopis.payment_method, false)
			});

			self.$bopis.on('click', '.inStorePickUpDetails .storeName', function (e) {
				e.stopPropagation();
				renderStorePicker();
				self.tagging.bopisStorerNameClick(self.bopis.storeName)
				if ($('.store-overlay-wrapper').hasClass('hide')) $('.store-overlay-wrapper').removeClass('hide');
			});

			self.$bopis.on('click', '.store-overlay-wrapper .close', function (e) {
				e.stopPropagation();
				if (!$('.store-overlay-wrapper').hasClass('hide')) $('.store-overlay-wrapper').addClass('hide');
			});

			self.$bopis.on('input', '.inputSection input', function (e) {
				var cur = $(this).val();
				var isValid = /^\d{5}(-\d{4})?$/.test(cur);
				if (isValid) {
					$('.inputSection .errorMsg').text('');
					if ($('.inputSection .button').hasClass('disableContinue')) $('.inputSection .button').removeClass('disableContinue')
				} else {
					$('.inputSection .errorMsg').text('Please enter a valid zipcode');
					if (!$('.inputSection .button').hasClass('disableContinue')) $('.inputSection .button').addClass('disableContinue')
				}
			});

			self.$bopis.on('keyup', '.inputSection input', function (e) {
				var cur = $(this).val();
				if (/^\d{5}(-\d{4})?$/.test(cur) && (e.keyCode == 13 || e.which == 13)) {
					if (cur == self.bopis.postal_code) return;
					$('#cover-spin').show();
					self.bopis.postal_code = cur;
					self.tagging.bopisDeliveryZipGo(cur);
					fetchBopisData(cur, '', false, self.bopis.payment_method, false)
				}
			});

			window.addEventListener('message', function (event) {
				var data = event && event.data;

				if (data && data.event_id === 'storepicker') {
					if (!$('.store-overlay-wrapper').hasClass('hide')) $('.store-overlay-wrapper').addClass('hide');
					if (data && data.data && data.data.closeClicked) {
						return;
					}
					console.log("Data received from iframe callback - ", data);
					var lastzipcode = self.bopis.postal_code;
					self.bopis.storeId = data && data.data ? data.data.storeId : self.bopis.storeId;
					self.bopis.postal_code = data && data.data ? data.data.zipcode : lastzipcode;
					$.cookie('storeid', self.bopis.storeId)
					// if(lastzipcode!=self.bopis.postal_code) {
					// 	fetchBopisData();
					// }else {
					// 	self.$bopis.find('.inStorePickUpLabel .storeName').text(data.data.store_name);
					// }
					fetchBopisData(self.bopis.postal_code, self.bopis.storeId, false, self.bopis.payment_method, true)
				}
			});

			window.hideIframeLoader = function () {
				setTimeout(function () { document.getElementById('iframe-loader').style.display = "none"; }, 1500);
			}

			$('.product-details__info-tbyb .tbyb__card-button').on('click', function (e) {
				if ($(this).hasClass('tbyb__card-add')) {
					if (self.bopis.payment_method != 'tbyb_3pay') {
						self.bopis.payment_method = 'tbyb_3pay';
						fetchBopisData(self.bopis.postal_code, self.bopis.store_id, false, self.bopis.payment_method, false);
					}
				} else if ($(this).hasClass('tbyb__card-skip')) {
					if (self.bopis.payment_method == 'tbyb_3pay') {
						self.bopis.payment_method = '';
						fetchBopisData(self.bopis.postal_code, self.bopis.store_id, false, self.bopis.payment_method, false);
					}
				}
			})

		}

		/*--\\Samsung Premium Care//--*/
		self.setPCEl = function () {
			self.$pc = self.$el.find('.product-details__info-premium');
			var hasPC = false;

			function updatePCPriceWithArbitrate(requestData) {
				if (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) {
					var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
				} else {
					var apiUrl = $S.arbitrate() + '?siteId=';
				}
				var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
				if (($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) || (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() && $.cookie('rewards_tier'))) {
					requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
				}
				$.ajax({
					url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
					data: JSON.stringify(requestData),
					type: 'POST',
					dataType: 'json',
					'headers': {
						'content-type': 'application/json'
					}
				}).then(function (res) {
					var line_items = res.line_items[Object.keys(res.line_items)[0]].line_items;
					_.each(line_items, function (pc) {
						self.$pc.find('.premium-option[data-pcmdlcd="' + pc.sku_id + '"]').find('.pc-price').text(pc.line_item_cost.display_price);
						if (pc.line_item_cost.regular_price > pc.line_item_cost.display_price) {
							var discount = Math.round((pc.line_item_cost.regular_price - pc.line_item_cost.display_price) / pc.line_item_cost.regular_price * 100);
							self.$pc.find('.premium-option[data-pcmdlcd="' + pc.sku_id + '"]').find('.pc-suggested').text(pc.line_item_cost.regular_price);
							self.$pc.find('.premium-option[data-pcmdlcd="' + pc.sku_id + '"]').find('.premium-banner').text(discount + '% Discount');
							self.$pc.find('.premium-option[data-pcmdlcd="' + pc.sku_id + '"]').addClass('banner');

							self.$pc.find('.buds-pc-option[data-pcmdlcd="' + pc.sku_id + '"]').find('.suggested-price').text(pc.line_item_cost.regular_price);
						} else {
							self.$pc.find('.premium-option[data-pcmdlcd="' + pc.sku_id + '"]').removeClass('banner');
						}
					})
				})
			}

			_.each(self.$pc.find('.premium-option'), function (el) {
				hasPC = true;
				var pcName = $(el).data('name');
				$(el).find('.short-name').text(pcName.split('-')[1]?.trim());
				var pcArbitrateRequest = [{
					quantity: 1,
					sku: $('.product-details__info-sku').html(),
					line_items: []
				}];
				pcArbitrateRequest[0].line_items.push({
					quantity: 1,
					sku: $(el).data('pcmdlcd')
				});
				updatePCPriceWithArbitrate(pcArbitrateRequest);
			});
			// Buds Premuim Care SBC-18915
			_.each(self.$pc.find('.buds-pc-option'), function (el) {
				hasPC = true;
				var pcName = $(el).data('name');
				$(el).find('.short-name').text(pcName.split('-')[1]?.trim());
				var pcArbitrateRequest = [{
					quantity: 1,
					sku: $('.product-details__info-sku').html(),
					line_items: []
				}];
				pcArbitrateRequest[0].line_items.push({
					quantity: 1,
					sku: $(el).data('pcmdlcd')
				});
				updatePCPriceWithArbitrate(pcArbitrateRequest);
			});

			_.each(self.$pc.find('.buds-premium-inner-wrapper'), function (el) {
				var pcTitle = $(el).data('name').split('-')[0].trim();
				$(el).find('.pc-card-title').text(pcTitle);
				if (pcTitle === 'Samsung Care+') {
					$(el).find('.buds-premium-inner-headline').text('Powerful Protection for your Galaxy life.');
					$(el).find('.pc-benefits').html(
						'<li>Unlimited repairs for Drops, Spills, and Mechanical Breakdown</li>' +
						'<li>Convenient Mail-in Repair or Replacement</li>' +
						'<li>Samsung Care+ expert 24/7 via phone or online for device setup, and connecting with other devices.</li>' +
						'<li>Samsung Genuine Parts and Certified Technicians</li>')
				} else if (pcTitle === 'Samsung Care+ Essentials') {
					$(el).find('.buds-premium-inner-headline').text('Protection for your Galaxy life covers Mechanical Breakdown')
					$(el).find('.pc-benefits').html(
						'<li>Convenient Mail-in Repair or Replacement</li>' +
						'<li>Samsung Care+ expert 24/7 via phone or online for device setup, and connecting with other devices.</li>' +
						'<li>Samsung Genuine Parts and Certified Technicians</li>')
				}
			});
			if ($('.buds-premium-inner-wrapper').length) {
				$('.buds-premium-inner-wrapper').first().show()
			}
			self.$pc.toggle(hasPC);
		}

		self.bindPCEvents = function () {
			self.$pc.on('click', '.premium-option', function () {
				var pcName = $(this).data('option-value').split('-');
				self.tagging.pc($(this).hasClass('active'), pcName[pcName.length - 1].trim());
				self.$pc.find('.premium-option').removeClass('active');
				var pcResult = '';
				if (!self.summaryObj.pc || self.summaryObj.pc.modelCode != $(this).data('pcmdlcd')) {
					$(this).addClass('active');
					pcResult = {
						modelCode: $(this).data('pcmdlcd'),
						name: $(this).data('name'),
						price: $(this).find('.pc-price').text(),
						suggested: $(this).find('.pc-suggested').text() || $(this).find('.pc-price').text()
					};
				}
				updateSummary('pc', pcResult);
				gotoNext(self.$pc, 'product-details__section');
			});

			// Buds Premuim Care SBC-18915

			self.$pc.on('click', '.buds-pc-option', function () {
				var disclosureTitle = $('.disclosures-header .pc-disclosures-title')
				var disclosureText = $('.disclosures-content .disclosures-text')
				var pcName = $(this).data('option-value').split('-');
				var busPcName = pcName[0].trim();
				self.tagging.pc($(this).hasClass('selected'), pcName[pcName.length - 1].trim());

				if (busPcName === 'Samsung Care+ Essentials') {
					if (!$(this).hasClass('selected')) {
						disclosureTitle.text(busPcName)
						disclosureText.text('Service contract covers out of warranty malfunctions, and tech support. No service fee or deductibles. For approved repairs, unlimited claims are covered, up to the MSRP value of the device per 12-month period. For approved replacements, we will cover one replacement per 12-month period. Coverage is optional. Cancel at any time for a prorated refund. Contains binding arbitration (Certain state exemptions may apply).')
						$('.pc-disclosures-overlay').addClass('show-overlay')
						document.querySelector("body").style.overflow = "hidden";
					}
				} else if (busPcName === 'Samsung Care+') {
					if (!$(this).hasClass('selected')) {
						disclosureTitle.text(busPcName)
						disclosureText.text('Service contract covers Accidental Damage from Handling (ADH), out of warranty malfunctions, and tech support. Claims may incur a $29 service fee. ADH claims are limited to three (3) in a 12-month period. Unlimited mechanical failure claims. Claims are limited to MSRP value of covered device. Device replacement may be a new or refurbished device. Coverage is optional. Cancel at any time for a prorated refund. Contains binding arbitration (Certain state exemptions may apply).')
						$('.pc-disclosures-overlay').addClass('show-overlay')
						document.querySelector("body").style.overflow = "hidden";
					}
				}


				self.$pc.find('.buds-pc-option').removeClass('selected');
				self.$pc.find('.buds-pc-no-coverage').removeClass('selected');

				var pcResult = '';
				if (!self.summaryObj.pc || self.summaryObj.pc.modelCode != $(this).data('pcmdlcd')) {
					$(this).addClass('selected');
					pcResult = {
						modelCode: $(this).data('pcmdlcd'),
						name: $(this).data('name'),
						price: $(this).find('.pc-price').text(),
						suggested: $(this).find('.suggested-price').text() || $(this).find('.pc-price').text()
					};
				}
				updateSummary('pc', pcResult);
				gotoNext(self.$pc, 'product-details__section');
			});

			self.$pc.on('click', '.buds-pc-no-coverage', function () {
				self.$pc.find('.buds-pc-option').removeClass('selected');
				$(this).addClass('selected')
				updateSummary('pc', '')
			})

			self.$pc.on('click', '.view-other-options', function () {
				if ($('.buds-premium-inner-wrapper').hasClass('other-pc-options')) {
					$('.buds-premium-inner-wrapper').removeClass('other-pc-options')
					$(this).css('display', 'none')
				}
			})

			self.$pc.on('click', '.pc-learn-more', function () {
				var pcName = $(this).closest('.buds-premium-inner-wrapper').data('name').split('-')[0].trim();
				$('.pc-overlay-title').text(pcName);
				if (pcName == 'Samsung Care+') {
					$('.description#protection').text('Drops, spills, and mechanical failure are all covered so you can get back to your busy life.')
					$('.pc-descriptions .payment-option').text('One-time payment with coverage for 2 years')
					$('.pc-descriptions .pc-terms').html('<sup>1</sup>Maximum of three (3) Accidental Damage from Handling claims per 12-month period. Additional restrictions may apply. For approved claims, a repair or replacement device will be provided at our discretion. Repair eligibility is subject to change. Service fee of $29 applies to ADH claims. Unlimited claims for mechanical failure. Please see plan terms and conditions for full coverage details.')
				} else if (pcName == 'Samsung Care+ Essentials') {
					$('.description#protection').text('Mechanical breakdowns after the 1 year warranty are covered so you can get back to your busy life.')
					$('.pc-descriptions .payment-option').text('Payment options include a one-time payment with coverage for 2 years')
					$('.pc-descriptions .pc-terms').html('<sup>1</sup>For approved repairs, unlimited claims are covered, up to the MSRP value of the device per 12-month period. For approved replacements, we will cover one replacement per 12-month period. Repair eligibility is subject to change. Please see plan terms and conditions for full coverage details')
				}
				if (!$('.pc-learnmore-overlay').hasClass('show-overlay')) {
					$('.pc-learnmore-overlay').addClass('show-overlay')
					document.querySelector("body").style.overflow = "hidden";
				}
			})

			$('.close-pc-overlay').on('click', function () {
				if ($('.pc-learnmore-overlay').hasClass('show-overlay')) {
					$('.pc-learnmore-overlay').removeClass('show-overlay')
					document.querySelector("body").style.overflow = "auto";
				}
			})

			$('.close-disclosures-overlay').on('click', function () {
				$('.pc-disclosures-overlay').removeClass('show-overlay')
				document.querySelector("body").style.overflow = "auto";
			})
		}

		/*--\\Samsung FBT//--*/
		function getArbitratePrice() {
			var component = $('.product-details-v2 .frequent-products-tv.container');
			if (component.length == 0) {
				updateSummary();
				return false;
			}
			var modelCodesPair = component.data('pair-modelcode').split(',');
			var requestData = [{
				'quantity': 1,
				'sku': modelCodesPair[0],
				'line_items': []
			}];

			var famseqList = {};
			var familyList = {};
			var childLineItem = [];
			_.each($('.frequent-products__list .frequent-products__item'), function (el) {
				var modelCode = $(el).data('eppmdlcd');
				var familySeq = $(el).data('famseq');
				if (familySeq) {
					if (!famseqList.hasOwnProperty(familySeq)) {
						famseqList[familySeq] = modelCode;;
						familyList[modelCode] = [modelCode];
						childLineItem.push({
							'quantity': 1,
							'sku': modelCode
						});
					} else {
						familyList[famseqList[familySeq]].push(modelCode);
					}
				} else {
					childLineItem.push({
						'quantity': 1,
						'sku': modelCode
					});
				}
			})

			requestData[0].line_items = childLineItem;
			if (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) {
				var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
			} else {
				var apiUrl = $S.arbitrate() + '?siteId=';
			}
			var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
			if (($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) || (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() && $.cookie('rewards_tier'))) {
				requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
			}

			$.ajax({
				url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
				data: JSON.stringify(requestData),
				type: 'POST',
				dataType: 'json',
				'headers': {
					'content-type': 'application/json'
				}
			}).then(function (res) {
				var lineItem = res.line_items[Object.keys(res.line_items)[0]];
				var maxSaving = 0;

				function updateCardPrice(ltm) {
					$('.frequent-products__item[data-eppmdlcd="' + ltm.sku_id + '"]').find('.epp-price').text('$' + ltm.line_item_cost.display_price);
					$('.frequent-products__item[data-eppmdlcd="' + ltm.sku_id + '"]').find('.epp-suggested').text('$' + ltm.line_item_cost.regular_price);
					var savePrice = (1000 * ltm.line_item_cost.regular_price - 1000 * ltm.line_item_cost.display_price) / 1000;
					$('.frequent-products__item[data-eppmdlcd="' + ltm.sku_id + '"]').find('.epp-savings').text('$' + savePrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
					if (savePrice == 0) {
						$('.frequent-products__item[data-eppmdlcd="' + ltm.sku_id + '"]').find('.epp-suggested').hide();
						$('.frequent-products__item[data-eppmdlcd="' + ltm.sku_id + '"]').find('.epp-savings').hide();
						$('.frequent-products__item[data-eppmdlcd="' + ltm.sku_id + '"]').find('.frequent-products__item-banner').hide();
					}
					maxSaving = savePrice > maxSaving ? savePrice : maxSaving;
				}

				_.each(lineItem.line_items, function (ltm) {
					if (familyList.hasOwnProperty(ltm.sku_id)) {
						_.each(familyList[ltm.sku_id], function (sku) {
							var _lineItem = _.clone(ltm);
							_lineItem.sku_id = sku;
							updateCardPrice(_lineItem);
						});
					} else {
						updateCardPrice(ltm);
					}
				});

				if (maxSaving > 0) {
					$('.product-details__info-FBToffer .maxSavings').text('$' + maxSaving.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				}

				component.addClass('display');
				updateSummary();
			})
		}
		function matchHeight() {
			self.$fbt.find('.frequent-products__track .frequent-products__bottom-title').matchHeight();
			self.$fbt.find('.frequent-products__track .frequent-products__item--options').matchHeight();
			self.$fbt.find('.frequent-products__track .frequent-products__img').matchHeight();
			self.$fbt.find('.frequent-products__track .frequent-products__bottom').matchHeight();
			self.$fbt.find('.frequent-products__track .frequent-products__item--inner').matchHeight();
		}
		function updateSummaryWithFBT() {
			var fbtItems = _.map(self.$fbt.find('.frequent-products__track .frequent-products__item.selected'), function (el) {
				return {
					modelCode: $(el).data('eppmdlcd'),
					name: $(el).find('.frequent-products__bottom-title').text(),
					price: $(el).find('.epp-price').text().replace(/[^0-9.,$]+/g, ''),
					suggested: $(el).find('.epp-suggested').text()
				}
			});
			updateSummary('fbt', fbtItems);
		}
		self.setFBTEl = function () {
			var component = $('.product-details-v2 .frequent-products-tv.container');
			self.$fbt = component;
			if (component.length > 0 && !self.isBundleBuilder) {
				if (checkAddonStep(self.addonGroupID)) {
					self.$fbt.hide();
					$('.product-details__info-FBToffer').hide();
					return false;
				}
				var prodList = component.find('.frequent-products__list .frequent-products__item');
				var slickBox = component.find('.frequent-products__track');
				slickBox.empty();
				if (prodList.length > 0 && !self.isBundleBuilder) {
					self.$fbt.show();
					var familyMap = {};
					_.each(prodList, function (el, idx) {
						var $el = $(el);
						if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()) {
							$el.find('.frequent-products__bottom-link').attr('href', 'samsungestore://openpdp#product=' + $el.data('eppmdlcd'));
						}
						var famseq = $el.data('famseq');
						if (famseq) {
							familyMap[famseq] = familyMap[famseq] || [];
							familyMap[famseq].push({
								sortOrder: $el.data('sortorder'),
								index: idx,
								modelCode: $el.data('eppmdlcd')
							});
						}
					});

					_.each(familyMap, function (family) {
						if (family.length > 1) {
							var sortedFamily = _.sortBy(family, 'sortOrder');
							//generate family option
							_.each(sortedFamily, function (fam, idx) {
								var _element = prodList.eq(fam.index)
								var optionBlock = _element.find(".frequent-products__item--options");
								_.each(sortedFamily, function (fam2, idx2) {
									var _this = prodList.eq(fam2.index);
									var color = _this.data('familyname').toLowerCase().trim().split(' ').join('-');
									var sortOrder = _this.data('sortorder');
									optionBlock.append('<span ' +
										'class="color-block ' + (idx == idx2 ? 'active' : '') + '" ' +
										'data-sortorder="' + sortOrder + '"' +
										'data-color="' + color + '"></span>')
								});
							});
						}
					});

					var _resultMap = {}
					_.each(prodList, function (item) {
						var famSeq = $(item).data('famseq');
						if (famSeq) {
							if (!_resultMap[famSeq]) {
								_resultMap[famSeq] = true;
								slickBox.append($(item)[0].outerHTML);
							}
						} else {
							slickBox.append($(item)[0].outerHTML);
						}
					});

					getArbitratePrice();
					matchHeight();
				} else {
					self.$fbt.hide();
					$('.product-details__info-FBToffer').hide();
				}
			} else {
				self.$fbt.hide();
				$('.product-details__info-FBToffer').hide();
			}
		}
		self.bindFBTEvents = function () {
			self.$fbt.on('click', '.frequent-products__item', function () {
				if ($(this).hasClass('selected')) {
					self.tagging.fbt(true, $(this).data('option-value'));
					$(this).removeClass('selected');
					updateSummaryWithFBT()
				}
			})
			//TODO switch family option
			self.$fbt.on('click', '.icon-plus, .frequent-products__img', function (e) {
				e.stopPropagation();
				self.tagging.fbt(false, $(this).parents('.frequent-products__item').data('option-value'));
				$(this).parents('.frequent-products__item').addClass('selected');
				updateSummaryWithFBT();
			});

			self.$fbt.on('click', '.color-block', function (e) {
				e.stopPropagation();
				var newOrder = $(this).data('sortorder');
				var newItem = $('.frequent-products__list .frequent-products__item[data-sortorder="' + newOrder + '"]');
				$(this).parents('.frequent-products__item').after(newItem[0].outerHTML);
				$(this).parents('.frequent-products__item').remove();
				updateSummaryWithFBT();
				matchHeight();
			});
		}

		function initWishlist() {
			self.$el.find('.product-details__banner-title').text($('.product-top-nav__badge').text());
			if (!!Cookies.get('xsdcxyn')) {
				$S.getWishlist()
					.then(function (data) {
						if (data.length) {
							for (var i = 0; i < data.length; i++) {
								if (data[i].sku_id == $('.product-details__info-sku').first().text()) {
									$('.cta-wishlist').addClass('selected');
									$('.cta-wishlist img').attr('src', '//image-us.samsung.com/SamsungUS/home/store-locator/icon_wishlist_selected.svg');
									// $('.text', '.cta-wishlist').text(inYourWishListI18nText);
									$('span', '.cta-wishlist').text('In wishlist');
									break;
								}
							}
						}
					})
					.fail(function () {
						console.log('get wishlist failed');
					});
			}
			$('.cta-wishlist').click(function (evt) {
				var target = $(evt.currentTarget);
				if (target.hasClass('selected')) {
					$S.removeFromWishlist({ modelCode: $('.product-details__info-sku').first().text() })
						.then(function () {
							console.log('remove from wishlist succeed!');
							target.toggleClass('selected');
							target.find('img').attr('src', '//image-us.samsung.com/SamsungUS/home/store-locator/icon_wishlist_default.svg');
							// $('.text', target).text(addToWishListI18nText);
							$('span', target).text('Wishlist');
						})
						.fail(function () {
							console.log('remove from wishlist failed');
						});
				} else {
					$S.handleAddToWishlist({ modelCode: $('.product-details__info-sku').first().text() })
						.then(function () {
							console.log('add to wishlist succeed!');
							target.toggleClass('selected');
							target.find('img').attr('src', '//image-us.samsung.com/SamsungUS/home/store-locator/icon_wishlist_selected.svg');
							// $('.text', target).text(inYourWishListI18nText);
							$('span', target).text('In wishlist');
						})
						.fail(function () {
							console.log('add to wishlist failed');
						});
				}
			});
		}

		function callAnalytics() {
			if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()) {
				var modeCode = $('.write-review-container').attr('data-modelcode')
				window.AEMapp.tvPdpConf.deviceAdapter.sendAnalytics(window.location.href, modeCode)
			}
		}

		function initHundredDay() {
			var modelCodeList = [
				//	"QN75LST9TAFXZA",
				//	"QN75LS03AAFXZA",
				//	"QN65LS03AAFXZA",
				//	"QN55LS03AAFXZA",
				//	"QN50LS03AAFXZA",
				//	"QN43LS03AAFXZA",
				//	"QN65LST7TAFXZA",	
				//	"QN75LST7TAFXZA",
				//	"QN55LST7TAFXZA",
				//	"QN43LS05TAFXZA",
				//	"QN43LS01TAFXZA",
				//	"QN55LS01TAFXZA",
				//	"QN32LS03TBFXZA",
				"QN43LS03TAFXZA",
				"QN50LS03TAFXZA",
				"QN55LS03TAFXZA",
				"QN65LS03TAFXZA",
				"QN75LS03TAFXZA",
				//	"SP-LSP7TFAXZA",
				//	"SP-LSP9TFAXZA",
				"HW-Q60T",
				"HW-Q70T",
				"HW-Q800",
				"HW-Q900T",
				"HW-Q950T",
			]
			var modelCode = self.$el.find('.product-details__info-sku').text();

			if (modelCodeList.indexOf(modelCode) >= 0 && !self.tbybAvailable) {
				$('.product-details__hundred-day__trigger__wrapper').show();
				$('.product-details__hundred-day__info').show();
			}

			function openAR() {
				window.utag && window.utag.link({
					'link_cat': 'tv_pdp_configurator>100_day',
					'link_id': '100_day_open',
					'link_meta': 'link_name:open hundred day',
					'link_position': 'tv_pdp_configurator>100_day',
					'event_name': 'hundred-day-open'
				});
				var layer = $(".product-details__hundred-day__wrap");
				layer.show();
			}
			function closeAR() {
				window.utag && window.utag.link({
					'link_cat': 'tv_pdp_configurator>100_day',
					'link_id': '100_day_close',
					'link_meta': 'link_name:close hundred day',
					'link_position': 'tv_pdp_configurator>100_day',
					'event_name': 'hundred-day-close'
				});
				var layer = $(".product-details__hundred-day__wrap");
				layer.hide();
			}

			$('.product-details__hundred-day__trigger').on('click', openAR)
			$('.product-details__hundred-day-close').on('click', closeAR)
			$('.product-details__hundred-day__ctas__close').on('click', closeAR)
			$('.product-details__hundred-day__info').on('click', openAR)
		}

		function initAR() {
			var isShopApp = getLocationHref().indexOf('shopapp') >= 0
			if (!isShopApp && $('.product-details__identify').data('ar-flag') === 'Y') {
				$('.container-wrapper-left__ctas__ar').show();
			} else {
				$('.container-wrapper-left__ctas__ar').hide();
			}
			function openAR() {
				window.utag && window.utag.link({
					'link_cat': 'tv_pdp_configurator>ar',
					'link_id': 'ar_open',
					'link_meta': 'link_name:open ar',
					'link_position': 'tv_pdp_configurator>ar',
					'event_name': 'ar-open'
				});
				var layer = $(".product-details__arlayer__wrap");
				layer.show();
			}
			function closeAR() {
				window.utag && window.utag.link({
					'link_cat': 'tv_pdp_configurator>ar',
					'link_id': 'ar_close',
					'link_meta': 'link_name:close ar',
					'link_position': 'tv_pdp_configurator>ar',
					'event_name': 'ar-close'
				});
				var layer = $(".product-details__arlayer__wrap");
				layer.hide();
			}

			$('.container-wrapper-left__ctas__ar img').on('click', openAR)
			$('.product-details__arlayer-close').on('click', closeAR)
		}

		function initThreeSixty() {
			var path = $('.photo-img-threesixty').attr('data-path');
			if (path) {
				$('.container-wrapper-left__ctas__360').show();
				$('.container-wrapper-left__ctas__360').click(function () {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>360',
						'link_id': '360_open',
						'link_meta': 'link_name:open 360',
						'link_position': 'tv_pdp_configurator>360',
						'event_name': '360 open'
					});
					$('.product-details__overlay').show();
					if ($('.threesixty_images', '.photo-img-threesixty-mobile').children().length === 0) {
						var posOfPreset = path.indexOf('scene7.com') > -1 ? path.lastIndexOf('?$') : path.lastIndexOf('.');
						var preset = path.substring(posOfPreset);
						path = path.substring(0, posOfPreset);
						var totalImg = parseInt($('.photo-img-threesixty').attr('img-threesixty-total'));
						var posOfDash = path.lastIndexOf('-');
						var startPos = parseInt(path.substring(posOfDash + 1));
						var pathUrl = path.substring(0, posOfDash) + '-';
						$('.photo-img-threesixty-mobile').ThreeSixty({
							totalFrames: totalImg, // Total no. of image you have for 360 slider
							endFrame: totalImg, // end frame for the auto spin animation
							currentFrame: 0, // This the start frame for auto spin
							imgList: '.threesixty_images', // selector for image list
							progress: '.spinner', // selector to show the loading progress
							imagePath: pathUrl, // path of the image assets
							ext: preset, // file prefix if any
							startFrame: startPos,
							zeroPadding: true,
							responsive: false,
							zeroBased: false,
							width: 'none',
							height: 'none'
						});
					}
				});
				$('.product-details__overlay-close').click(function () {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>360',
						'link_id': '360_close',
						'link_meta': 'link_name:close 360',
						'link_position': 'tv_pdp_configurator>360',
						'event_name': '360 close'
					});
					if ($(window).width() > 768) {
						$('.product-details__overlay').hide();
					}
				})
			}
		}

		function setColorOption() {
			_.each(self.$el.find('.option-value.Color'), function (el) {
				var color = $(el).find('.color-block').attr('data-color');
				if (color && color != 'none') {
					$(el).find('.color-block').attr('data-color', color.split(' ').join('-').toLowerCase());
				}
			});
		}

		/* Samsung Payment */
		self.setPaymentEl = function () {
			if (self.isBundleBuilder || (self.reserve && self.reserve.hasReserve)) {
				self.$payment.hide();
				return false;
			}
			showChatBot();
			// set default monthly option if no default defer month from aem
			if (self.$payment.find('.product-details__info-purchase-monthly-options .product-details__info-purchase-monthly-option').length > 0 && self.$payment.find('.product-details__info-purchase-monthly-options .product-details__info-purchase-monthly-option.selected').length == 0) {
				self.$payment.find('.product-details__info-purchase-monthly-options .product-details__info-purchase-monthly-option').eq(0).addClass('selected')
			}
			var paymentOptions = self.$payment.find('.product-details__info-purchase-card');
			if (paymentOptions.length > 3) {
				self.$payment.find('.product-details__info-purchase-carousel').slickExtension({
					dots: true,
					arrows: true,
					fade: false,
					infinite: false,
					slidesToShow: 3,
					slidesToScroll: 3,
					appendArrows: self.$payment.find('.product-details__info-purchase-carousel'),
					appendDots: self.$payment.find('.product-details__info-purchase-carousel'),
					responsive: [{
						breakpoint: 500,
						settings: 'unslick'
					}]
				});
			}
			self.$payment.find('.product-details__info-purchase-carousel').equalize({ children: '.product-details__info-purchase-card-name', reset: true });
			_.each(self.$payment.find('.product-details__info-purchase-card .price'), function (el) {
				$(el).text($(el).text().trim());
			});
			var $defualtPayment = paymentOptions.first();
			/*if (self.isBuds) {
				var $payIn4 = self.$payment.find('.product-details__info-purchase-card[data-payment=splitpay4]');
				if ($payIn4.length > -1) {
					$defualtPayment = $payIn4.first();
				}
			}*/
			$defualtPayment.addClass('selected');
			setPaymentDetail($defualtPayment);
		}

		function showChatBot() {
			// SBC-16877
			var sku = $('.product-details__info-sku').html();
			var avalableList = ["QN65QN900AFXZA", "QN75QN900AFXZA", "QN85QN900AFXZA", "QN65QN800AFXZA", "QN75QN800AFXZA", "QN85QN800AFXZA", "QN65QN900BFXZA", "QN75QN900BFXZA", "QN85QN900BFXZA", "QN65QN800BFXZA", "QN75QN800BFXZA", "QN85QN800BFXZA", "QN75QN90BAFXZA",
				"QN85QN90BAFXZA", "QN98QN90AAFXZA", "QN98QN90AAFXZA", "QN85QN85BAFXZA", "QN65S95BAFXZA", "QN75LS03BAFXZA", "QN85LS03BAFXZA", "QN55LST7TAFXZA", "QN65LST7TAFXZA", "QN75LST7TAFXZA", "QN75LST9TAFXZA", "SP-LSP7TFAXZA", "SP-LSP9TFAXZA", "QN75QN85BAFXZA"];
			if (avalableList.indexOf(sku) > -1) {
				self.$payment.find('.payment-chat-container').show();
			}
		}

		function setPaymentDetail($paymentCardEL) {
			var paymentId = $paymentCardEL.data('payment');
			var $paymentDetailEl = self.$payment.find('.product-details__info-purchase-detail [data-payment="' + paymentId + '"]');
			self.$payment.find('.product-details__info-purchase-detail>div').hide();
			$paymentDetailEl.show();
			if (paymentId == 'MONTHLY') {
				self.paymentId = $paymentDetailEl.find('.selected').data('monthly-payment');
				self.deferMonth = Number($paymentDetailEl.find('.selected').data('month'));
			} else {
				self.paymentId = paymentId;
				self.deferMonth = 0;
			}
			if (paymentId == 'SUBSCRIBE') {
				// expand options & disable checkout
				self.$access.find('.access__card-button .cta-button').trigger('click');
			}
			else {
				self.$el.find('.product-details__info-add').removeClass('disable');
				$('.product-top-nav__cta').removeClass('disable');
			}
			updateSummary();
			resetBopisWithPay();
			if (paymentId != 'SUBSCRIBE' && !!self.summaryObj.access) {
				self.$access.find('.access__card-button .cta-button').removeClass('add');
				self.$access.find('.access__card-button .cta-button').trigger('click');
				self.$access.find('.access__card-button .cta-button').addClass('add')
			}
		}

		self.bindPaymentEvents = function () {
			self.$payment.on('click', '.product-details__info-purchase-card', function () {
				if ($(this).hasClass('selected')) return false;
				self.$payment.find('.product-details__info-purchase-card').removeClass('selected');
				$(this).addClass('selected');
				setPaymentDetail($(this))
				self.tagging.paymentPlan($(this).find('.product-details__info-purchase-card-name').text());
				var $selectedInstallmentOption = $('.product-details__info-purchase-installment-option.selected');
				if($selectedInstallmentOption) {
					var selectedPayment = $selectedInstallmentOption.data('installment-payment');
					if (selectedPayment == 'klarna_splitpay4') {
						$('.installment-sign').text('');
					} else if (selectedPayment == 'splitpay4') {
						$('.installment-sign').text('');
					}
				}
			})

			self.$payment.on('click', '.product-details__info-purchase-monthly-option', function () {
				self.$payment.find('.product-details__info-purchase-monthly-option').removeClass('selected');
				$(this).addClass('selected');
				var paymentId = $(this).data('monthly-payment');
				self.paymentId = paymentId;
				self.deferMonth = Number($(this).find('.month').text());
				updateSummary();
				resetBopisWithPay();
				$(this).parents('.product-details__info-purchase-detail-wrapper').find('.product-details__info-purchase-detail-title .month').text(self.deferMonth)
				self.tagging.paymentPlanMonthly(self.deferMonth);
			})

			self.$payment.on('click', '.product-details__info-purchase-installment-option', function () {
				self.$payment.find('.product-details__info-purchase-installment-option').removeClass('selected');
				$(this).addClass('selected');
				var paymentId = $(this).data('installment-payment');
				self.paymentId = paymentId;
				if (paymentId == 'klarna_splitpay4') {
					$('.installment-sign').text('');
				} else if (paymentId == 'splitpay4') {
					$('.installment-sign').text('');
				}
				updateSummary();
				resetBopisWithPay();
			})
		}

		/* Samsung ZipBox */
		function getDeliveryModelcodes(zipcode) {
			if (isBopisAvailable()) {
				if (self.$zipBox.hasClass('visible')) self.$zipBox.toggleClass('visible');
				if (!$('.product-details__info-selector.color-selector .selector-option').hasClass('bopis-color')) {
					$('.product-details__info-selector.color-selector .selector-option').addClass('bopis-color')
				}
				//return;
			} else {
				if ($('.product-details__info-selector.color-selector .selector-option').hasClass('bopis-color')) {
					$('.product-details__info-selector.color-selector .selector-option').removeClass('bopis-color')
				}
				if (self.$el.find('.product-details__info-zipBox').length == 0) return;
				var ecom = self.$result.data('ecom');
				var stock = self.$result.data('stock');
				var buyable = ecom == 'Y' && stock != 'N';
				self.$zipBox.toggleClass('visible', buyable);
			}
			if (self.$zipBox.length == 0) return false;
			self.$zipBox.find('.zipBox-loader').show();
			self.EDDModelCodes = $('.product-details__info-sku').html();
			if ($('.frequent-products-tv.container').length > 0) {
				self.EDDModelCodes += ',' + $('.frequent-products-tv.container').data('pair-modelcode');
			}
			if ($('.offer__bundle-special .offer__bundle-option').length > 0) {
				self.EDDModelCodes += ',' + _.map($('.offer__bundle-special .offer__bundle-option'), function (el) { return $(el).data('mdlcd'); });
			}

			var skus = _.uniq(self.EDDModelCodes.split(','));
			var totalCalls = 0;
			var arr = [];
			while (skus.length) {
				var subSkus = skus.slice(0, 10);
				skus = skus.slice(10);
				arr.push(subSkus.join(','));
				totalCalls += 1;
			}

			function getResults() {
				var promiesArray = [];
				for (var i = 0; i < totalCalls; i++) {
					var deferred = jQuery.Deferred();
					(function (deferred) {
						window.AEMapp.EDD.getDeliveryDate(zipcode, arr[i]).then(function (data) {
							deferred.resolve(data);
							return;
						})
					})(deferred);
					promiesArray.push(deferred);
				}
				return promiesArray;
			}

			var deferreds = getResults();

			$.when.apply($, deferreds).then(function (res1, res2) {
				var data = res1;
				if (data && data.products && res2 && res2.products) {
					data.products = Object.assign({}, data.products, res2.products);
				}
				if (data && data.products) {
					_.each(data.products, function (prod, mdlcd) {
						var message = '';
						var time;
						var freeShipping = true;
						let deliveyStandardMethod = null;
						_.each(prod, function(deli){
							if(deli && deli.delivery_method == 'DM_IM_CE_STANDARD'){
								deliveyStandardMethod = deli;
							}
						})

						if(deliveyStandardMethod){
							if (deliveyStandardMethod.delivery_slots && deliveyStandardMethod.delivery_slots.length > 0) {
								var eddTime = deliveyStandardMethod.delivery_slots[0].earliest_delivery_date;
								var edd = (window.location.href.indexOf('us/computing/memory-storage') > -1 || window.location.href.indexOf('us/computing/monitors') > -1 ) ? deliveyStandardMethod.delivery_slots[0].esd_custom_stock_message : deliveyStandardMethod.delivery_slots[0].edd_custom_stock_message;
								if (!time && eddTime && edd) {
									time = eddTime;
									message = edd;
								}
								if (edd && eddTime && eddTime < time) {
									time = eddTime;
									message = edd;
								}
								if (deliveyStandardMethod.delivery_method.indexOf('DM_CE_STANDARD_SF') > -1) {
									freeShipping = false;
								}
							}
						}
						
						if(message == ''){
							_.each(prod, function (deli) {
								if (deli.delivery_slots && deli.delivery_slots.length > 0) {
									var eddTime = deli.delivery_slots[0].earliest_delivery_date;
									var edd = (getLocationHref().indexOf('us/televisions-home-theater/tvs') > -1 || getLocationHref().indexOf('us/computing/monitors') > -1) ? deli.delivery_slots[0].esd_custom_stock_message : deli.delivery_slots[0].edd_custom_stock_message;
									if (!time && eddTime && edd) {
										time = eddTime;
										message = edd;
									}
									if (edd && eddTime && eddTime < time) {
										time = eddTime;
										message = edd;
									}
									if (deli.delivery_method.indexOf('DM_CE_STANDARD_SF') > -1) {
										freeShipping = false;
									}
								}
							});
						}
						if (message) {
							if (mdlcd == $('.product-details__info-sku').html()) {
								self.$el.find('.product-details__info-ship .shipping-info .date').text(message);
								self.$el.find('.product-details__info-openbox .openbox-card-edd').text(message);
								if (!freeShipping) {
									self.$el.find('.product-details__info-ship .shipping-info .ship__message').text('Standard shipping and easy returns. ');
								} else {
									self.$el.find('.product-details__info-ship .shipping-info .ship__message').text(self.$el.find('.product-details__info-ship .shipping-info .ship__message').data('message'));
								}
								self.$el.find('.ship__info-detail').text(message);
							} else {
								self.$el.find('.offer__bundle-option[data-mdlcd="' + mdlcd + '"] .offer__bundle-ship').text(message);
								self.$el.find('.frequent-products__item[data-eppmdlcd="' + mdlcd + '"] .frequent-products__bottom-ship').text(message);
							}
							self.$zipBox.find('.error').hide();
							if (self.EDDInit) {
								self.$zipBox.find('.zipBox-main').slideUp(function () {
									self.$zipBox.find('input').val('');
								});
								self.$zipBox.removeClass('active');
							}
						} else {
							if (mdlcd == $('.product-details__info-sku').html()) {
								// self.$zipBox.find('.error').text('The product is not available').show();
							}
						}
						// edd date = time > 21
						// trigger self.initSubstitution
						if (time && message && mdlcd == $('.product-details__info-sku').html()) {
							$(window).trigger('substitutionUpdateTV', ['eddUpdate', time]);
						}
					});
				}

				self.$zipBox.find('.zipBox-loader').hide();
				self.EDDInit = true;
			}, function (error) {
				// self.$zipBox.find('.error').text('The product is not available').show();
				console.log('-----------fail to call deliveryDate api-----------', error)
				self.$zipBox.find('.zipBox-loader').hide();
			})
		}
		self.setZipBoxEl = function () {
			self.$zipBox = self.$el.find('.product-details__info-zipBox');
			if ($('.product-details__info-sku').html().indexOf('BNDL-') > -1) {
				self.$zipBox.hide();
				return false;
			}
			if (self.$zipBox.length == 0) return false;
			var ecom = self.$result.data('ecom');
			var stock = self.$result.data('stock');
			var buyable = ecom == 'Y' && stock != 'N';
			self.$zipBox.toggleClass('visible', buyable && !isBopisAvailable());
			if (!buyable) return false;
			self.$zipBox.find('.zipBox-input').mask('00000');
			self.EDDInit = false;
			window.AEMapp.EDD.fetchLocation().then(function (data) {
				if (data && data.address) {
					self.zipCode = data.address.postal_code;
					self.summaryObj.zipCode = self.zipCode;
					self.$zipBox.find('.zipBox-zipcode').text(data.address.postal_code);
                    $.cookie('HA-Deeplink-Zipcode', data.address.postal_code, { path: '/', domain: '.samsung.com' });
                    $.cookie('eddzipcode', data.address.postal_code, { path: '/', domain: '.samsung.com' });
					getDeliveryModelcodes(self.zipCode);
				}
			});
		}
		self.bindZipBoxEvents = function () {
			self.$zipBox.on('click', '.zipBox-title', function () {
				self.$zipBox.find('.zipBox-main').slideToggle(function () {
					self.$zipBox.find('input').val('');
				});
				self.$zipBox.toggleClass('active');
			});

			self.$zipBox.find('input').on('keyup', function (e) {
				self.$zipBox.find('.error').hide();
				var input = $(this).val();
				if (e.keyCode == 13 || e.which == 13 || input.length == 5) {
					if (/\d{5}/.test(input)) {
						self.$zipBox.find('.error').hide();
						if (input == self.zipCode) {
							self.$zipBox.find('.zipBox-main').slideUp(function () {
								self.$zipBox.find('input').val('');
							});
							self.$zipBox.removeClass('active');
						} else {
							self.$zipBox.find('.zipBox-zipcode').text(input);
							$.cookie('HA-Deeplink-Zipcode', input, { path: '/', domain: '.samsung.com' });
							$.cookie('eddzipcode', input, { path: '/', domain: '.samsung.com' });
							self.zipCode = input;
							self.summaryObj.zipCode = self.zipCode;
							getDeliveryModelcodes(self.zipCode);
						}
					} else {
						if (input != '') self.$zipBox.find('.error').text('Invalid zipcode').show();
					}
				}
			});

			// self.$zipBox.find('input').on('focus', function(e) {
			// 	self.$zipBox.find('.error').hide();
			// });

			// self.$zipBox.find('input').on('blur', function(e) {
			// 	var input = $(this).val();
			// 	if (/\d{5}/.test(input)) {
			// 		self.$zipBox.find('.error').hide();
			// 		if (input == self.zipCode) {
			// 			self.$zipBox.find('.zipBox-main').slideUp(function() {
			// 				self.$zipBox.find('input').val('');
			// 			});
			// 			self.$zipBox.removeClass('active');
			// 		} else {
			// 			self.$zipBox.find('.zipBox-zipcode').text(input);
			// 			self.zipCode = input;
			// 			getDeliveryModelcodes(self.zipCode);
			// 		}
			// 	} else {
			// 		if (input != '') self.$zipBox.find('.error').text('Invalid zipcode').show();
			// 	}
			// });

			self.$zipBox.on('click', '.zipBox-location', function (e) {
				if (navigator && navigator.geolocation) {
					var payload = {
						fields: ["postal_code", "country"],
						partner: "Google",
						timezone: new Date().toString().match(/\((.+)\)/, '')[1].split(' ')[0]
					};
					navigator.geolocation.getCurrentPosition(
						function (data) {
							payload.latitude = data.coords.latitude;
							payload.longitude = data.coords.longitude;
							window.AEMapp.EDD.fetchLocationAPI(payload).then(function (data) {
								if (data && data.address) {
									self.zipCode = data.address.postal_code;
									self.summaryObj.zipCode = self.zipCode;
									self.$zipBox.find('.zipBox-zipcode').text(data.address.postal_code);
                    				$.cookie('HA-Deeplink-Zipcode', data.address.postal_code, { path: '/', domain: '.samsung.com' });
                    				$.cookie('eddzipcode', data.address.postal_code, { path: '/', domain: '.samsung.com' });
									getDeliveryModelcodes(self.zipCode);
								}
							})
						}
					);
				}
			});
		}

		/* NEO QLED enhancement for black friday SBC-16480 */
		/* Add all qled 4k for enhancement SBC-16708 */
		function pdpEnhancementNEOQLED() {
			var is8kSkuList = ['QN65QN900AFXZA', 'QN75QN900AFXZA', 'QN85QN900AFXZA', 'QN65QN850AFXZA', 'QN75QN850AFXZA', 'QN85QN850AFXZA', 'QN65QN800AFXZA', 'QN75QN800AFXZA', 'QN85QN800AFXZA', 'SP-LSP3BLAXZA'];
			var is4kUrls = ['/us/televisions-home-theater/tvs/samsung-neo-qled-4k/', '/tvs/the-frame/', '/tvs/qled-4k-tvs/', '/tvs/the-terrace/', '/tvs/the-sero/', '/tvs/the-serif/'];
			var tvType = 'others';
			is4kUrls.forEach(function (url) {
				if (getLocationHref().indexOf(url) > -1) tvType = '4k';
			});
			var modelCode = self.$el.find('.product-details__info-sku').text();
			if (is8kSkuList.indexOf(modelCode) > -1) tvType = '8k';
			if (getLocationHref().indexOf('us/televisions-home-theater/tvs') > -1 || getLocationHref().indexOf('us/televisions-home-theater/home-theater/sound-bars') > -1 || getLocationHref().indexOf('us/computing/monitors/gaming') > -1) {
				self.isNEO = true;
				self.$el.addClass('isNEO');
				$('.product-anchor-nav-v2').addClass('isNEO');
				$('.product-summary').addClass('isNEO');
				var seriesOptions = self.$el.find('.product-details__info-selector[data-family-option=Series] .option-value').length;
				if (seriesOptions.length % 3 != 0) {
					self.$el.find('.product-details__info-selector[data-family-option=Series]').addClass('neo-two-column');
				}
				var selectText = tvType == '4k' ? 'Select your QLED 4K TV Series' : (tvType == '8k' ? 'Select your Neo QLED 8K TV Series' : 'Select your TV Series');
				if (getLocationHref().indexOf('us/televisions-home-theater/tvs') > -1) {
					self.$el.find('.product-details__info-selector[data-family-option=Series] .selector-title b').text(selectText);
				}
				self.$el.find('.product-details__neo-badge').empty();
				if (self.$el.find('.product-details__info-description .bullet').length == 0) {
					_.each(self.$el.find('.product-details__info-description--line'), function (descEl) {
						var rawHtml = $(descEl).html();
						var refinedHtml = '';
						if (rawHtml.indexOf('') > -1) {
							_.each(rawHtml.split(''), function (textRow) {
								if (textRow.trim().length > 0) {
									refinedHtml += '<div class="bullet">' + textRow.trim() + '</div>';
								}
							})
						}
						$(descEl).html(refinedHtml)
					});
				}
				if ($('.product-summary .grid .card__content-area').length > 0) {
					_.each($('.product-summary .grid .card__content-area'), function (el) {
						self.$el.find('.product-details__neo-badge').append('<div class="product-details__neo-badge-card">' + $(el).html() + '</div>')
					})
				}

				// if(getLocationHref().indexOf('us/computing/monitors/gaming/55-odyssey-ark-4k-uhd') >-1) {
				// 	if ($el.find('.product-details__summary--cards.desktop .product-details__summary--cards___card').length > 0) {
				// 		_.each($el.find('.product-details__summary--cards.desktop').eq(0).find('.product-details__summary--cards___card'), function(el) {
				// 			$el.find('.product-details__neo-badge').append(el.outerHTML)
				// 		})
				// 		$el.find('.product-details__summary--cards.desktop').eq(0).hide()
				// 	}
				// }
			}

			if (getLocationHref().indexOf('us/computing/monitors/gaming/55-odyssey-ark-4k-uhd') < 0 && getLocationHref().indexOf('us/computing/monitors/gaming/34-g85sb-qd-oled') < 0 && getLocationHref().indexOf('/us/computing/monitors/gaming/43-odyssey-neo-g7-4k-uhd') < 0 && getLocationHref().indexOf('us/computing/monitors/gaming/49-odyssey-oled-g95sc') < 0 && getLocationHref().indexOf('us/computing/monitors/gaming/') > -1) {
				self.$el.removeClass('isNEO');
				$('.product-anchor-nav-v2').removeClass('isNEO');
				$('.product-summary').removeClass('isNEO');
			}

			if ($('.product-details__info-sku').text() == 'LS34BG850SNXZA' || $('.product-details__info-sku').text() == 'LS43CG702NNXZA' || $('.product-details__info-sku').text() == 'LS49CG954SNXZA') {
				$('.product-details__neo-badge').css({ order: '0' })
			}
		}

		function setEppClub() {
			if (AEMapp.eppStore.isRealEppUser() && $('.product-details__info-club .club-link').length > 0) {
				$('.product-details__info-club').show();
			} else {
				$('.product-details__info-club').hide();
			}
		}

		function resetTimer() {
			function prependZero(val) {
				if (val < 10) {
					val = '0' + val;
				}
				return val;
			}

			function getTimeRemaining(endtime) {
				var t = Date.parse(endtime) - Date.parse(new Date());
				var seconds = prependZero(Math.floor((t / 1000) % 60));
				var minutes = prependZero(Math.floor((t / 1000 / 60) % 60));
				var hours = prependZero(Math.floor((t / (1000 * 60 * 60)) % 24));
				var days = prependZero(Math.floor(t / (1000 * 60 * 60 * 24)));
				// var days = Math.floor(t / (1000 * 60 * 60 * 24));

				return {
					'total': t,
					'days': days,
					'hours': hours,
					'minutes': minutes,
					'seconds': seconds
				};
			}

			function CountDown(options) {
				this.options = options;
			}

			$.extend(CountDown.prototype, {
				init: function (el) {
					var _this = $(el);
					this.deadline = new Date(Date.parse(new Date()) + this.options.timeRemaining);
					this.daysSpan = _this.find('.days');
					this.hoursSpan = _this.find('.hours');
					this.minutesSpan = _this.find('.minutes');
					this.secondsSpan = _this.find('.seconds');
					this.timeinterval = setInterval(this.updateClock.bind(this), 1000);
					_this.addClass('inited');
					this.updateClock();
				},
				updateClock: function () {
					var t = getTimeRemaining(this.deadline);
					if (this.daysSpan) {
						this.daysSpan.text(t.days);
					}
					if (this.hoursSpan) {
						this.hoursSpan.text(t.hours);
					}
					if (this.minutesSpan) {
						this.minutesSpan.text(t.minutes);
					}
					if (this.secondsSpan) {
						this.secondsSpan.text(t.seconds);
					}
					if (t.total <= 0) {
						clearInterval(this.timeinterval);
						location.reload();
					}
				}
			});

			$.fn.countDown = function (options) {
				var defaults = {
					timeRemaining: 0
				};
				var setting = $.extend({}, defaults, options);
				var countDown = new CountDown(setting);
				if (!$(this).hasClass('inited')) {
					countDown.init(this);
					console.log('countDown init');
				}
			};

			var expireDate = $('.tv-offer-bar-countdown.timeDiff').attr('data-target');

			if (expireDate) {
				var timeNow = Date.now();
				var timeTarget = new Date(expireDate.replace(/Z$/, '-05:00')).getTime();
				var timeRemaining = parseInt(timeTarget - timeNow);
				var morethanthreeday = timeRemaining - 1000 * 60 * 60 * 72 > 0;

				if (timeRemaining > 0 && !morethanthreeday) {
					$('.mobileReserve__countdown__content-count').countDown({ timeRemaining: timeRemaining });
				} else {
					$('.mobileReserve__countdown').hide();
					$('.tv-offer-bar-countdown').hide();
					$('.tv-offer-bar-content').css('border', '0');
				}
			}
		}

		function stickTop() {
			var windowTopPosition = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;
			var upperBound = self.$el.find('.row').offset().top;
			if ($('.product-anchor-nav-v2 .product-top-nav__identifier').length) {
				upperBound = $('.product-anchor-nav-v2 .product-top-nav__pos').offset().top;
			}
			var stickyWrapper = self.$el.find('.sticky-wrapper');
			if (stickyWrapper.height() >= self.$el.find('.product-details__info').height()) {
				stickyWrapper.removeClass('sticky-absolute');
				stickyWrapper.removeClass('sticky');
				stickyWrapper.css('top', 'auto');
				return
			}
			var bottomBound = upperBound + self.$el.find('.row').height() - stickyWrapper.height();
			if (windowTopPosition >= upperBound && windowTopPosition < bottomBound) {
				stickyWrapper.removeClass('sticky-absolute');
				stickyWrapper.addClass('sticky');
				stickyWrapper.css('top', $('.product-anchor-nav-v2 .product-top-nav__identifier').height() + 30);
			} else if (windowTopPosition >= bottomBound) {
				stickyWrapper.addClass('sticky-absolute');
				stickyWrapper.removeClass('sticky');
				stickyWrapper.css('top', 'auto');
			} else {
				stickyWrapper.removeClass('sticky-absolute');
				stickyWrapper.removeClass('sticky');
				stickyWrapper.css('top', 'auto');
			}
		};

		function getRewardsdata() {
			/*var domainurl = window.location.origin.indexOf('www.samsung.com') > -1 ? 'us.ecom.samsung.com' : 'us.ecom-qa.samsung.com';
			var fetchskuid = $('.product-details__info-sku').length > 1 ? $('.product-details__info-sku').eq(0).text() : $('.product-details__info-sku').text();
			var fetchresult = {};
			var fetchdata = {
				"sku": fetchskuid,
				"cost": {
					"msrp_price": {
						"currency": "USD",
						"value": 1000
					},
					"sale_price": {
						"currency": "USD",
						"value": 1000
					}
				},
			}
			var tierName = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : 'Silver';
			if (($.cookie('prof_id') && $.cookie('xsdcxyn')) || (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() && $.cookie('rewards_tier'))) {
				fetchdata.rewards_tier = {
					"tier_name": tierName,
					"expiration_date": null,
					"points_needed": null,
					"points_earned_up_to_date": null
				}
			}

			var request = {
				url: 'https://' + domainurl + '/v4/rewards/_fetch-rewards',
				contentType: 'application/json',
				method: 'POST',
				data: JSON.stringify([fetchdata]),
				success: function (res) {
					if (res) {
						var resobj = {};
						if (res[0]) resobj = res[0];
						if (Object.keys(resobj).length > 0) {
							fetchresult.reward_percentage = resobj.rewards.reward_percentage ? resobj.rewards.reward_percentage : '0.5';
							tierName = resobj.rewards.rewards_tier ? resobj.rewards.rewards_tier : tierName;
							if (Object.keys(fetchresult).length > 0) {
								var rewarddesc = $('.product-details__info-reward__desc').length > 1 ? $('.product-details__info-reward__desc').eq(0) : $('.product-details__info-reward__desc');
								var rewardStr = '';
								if (($.cookie('prof_id') && $.cookie('xsdcxyn')) || (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() && $.cookie('rewards_tier'))) {
									rewardStr = 'Earn <b><span class="epp-reward-points">' + fetchresult.reward_percentage + '</span>% back in ' + tierName + ' tier <br/>Samsung Rewards Points';
								} else {
									rewardStr = 'Log in now to earn up to <b><span class="epp-reward-points">' + fetchresult.reward_percentage + '</span>% <br/>back</b> in Samsung Rewards Points';
								}
								console.log('rewardStr', rewardStr);
								rewarddesc.html(rewardStr);
							}
						}
					}
				},
				fail: function (err) {
					console.log('API Failed!' + err);
				}
			};

			if (($.cookie('prof_id') && $.cookie('xsdcxyn')) || (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() && $.cookie('rewards_tier'))) {
				request.headers = {
					'x-ecom-jwt': $.cookie('jwt_USA')
				}
			}

			$.ajax(request);*/
			//SCOM-36458 Show the Tier wise Rewards on the product summary
			var rewarddesc = $('.product-details__info-reward__desc').length > 1 ? $('.product-details__info-reward__desc').eq(0) : $('.product-details__info-reward__desc');
			var rewardMap = {
				"Silver": "Silver earns 1 point per $1",
				"Gold": "Gold earns 2 points per $1",
				"Platinum": "Platinum earns 3 points per $1",
				"vip_advantage":"VIP earns 6 points per $1" 
			};
			var rewardStr = 'Log in to earn up to 3 points per $1';
			var tierName = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : 'Silver';
			if ($.cookie('prof_id') && $.cookie('xsdcxyn') && $.cookie('rewards_tier')){
				rewardStr = rewardMap[tierName] ? rewardMap[tierName] : rewardStr;
			}
			rewarddesc.html(rewardStr);
		}

		function msgPosition() {
			if ($(".product-details__info-premium").length > 0) {
				if ($("#reward-msg").length > 0) {
					$('#reward-msg').append($(".rewards-hint"));
				}
			}
		}

		function setSamsungCareMessage() {
			if ($.cookie('rewards_tier') == "Platinum" || $.cookie('rewards_tier') == "Gold") {
				var careDiv = $('.product-details__info').find('.rewards-hint');
				$(careDiv).css('display', 'flex');
				var rewarddesc = $('.product-details__info').length > 1 ? $('.rewards-hint').eq(0) : $('.rewards-hint-desc');
				var rewardStr = "Platinum Reward Members save 20% off most Samsung Care + and professional services, plus 10% off most accessories."

				if ($.cookie('rewards_tier') == "Gold") {
					rewardStr = "Gold Reward Members save 10% off most accessories."
				}
				rewarddesc.html(rewardStr);
			} else {
				var careDiv = $('.product-details__info').find('.rewards-hint');
				$(careDiv).css('display', 'none');
			}
		}

		self.scrollEventBinder = function () {
			$(window).on('scroll resize', stickTop);
		}

		// update page accessory only
		function fetchPriceForAccPdp() {
			if ((window.AEMapp.tvPdpConf.getLocationHref().indexOf("accessory") > -1) || (window.AEMapp.tvPdpConf.getLocationHref().indexOf("accessories") > -1)) {
				var modelCode = self.$el.find('.product-details__info-sku').text();
				var requestData = [{
					'quantity': 1,
					'sku': modelCode,
					'line_items': [],
				}];

				if (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) {
					var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
				} else {
					var apiUrl = $S.arbitrate() + '?siteId=';
				}
				var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
				if ($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) {
					requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
				}

				$.ajax({
					url: apiUrl + ($.cookie('tmktid') ? $.cookie('tmktid') == 'undefined' ? 0 : $.cookie('tmktid') : 0),
					data: JSON.stringify(requestData),
					type: 'POST',
					dataType: 'json',
					'headers': {
						'content-type': 'application/json'
					}
				})
					.then(function (res) {
						var accessoryRes = [];
						var lineItem = res.line_items[Object.keys(res.line_items)[0]];
						_.each(res.line_items, function (ltm) {
							if (ltm.sku_id == lineItem.sku_id) {
								ltm = lineItem;
							}
							accessoryRes.push({
								price: ltm.line_item_cost.display_price || 0,
								suggested: ltm.line_item_cost.regular_price || 0
							});
						});

						updateSummary('pageaccessory', accessoryRes);
						window.pageAccessoryData = accessoryRes;
					})
			}
		}

		self.init = function () {
			window.AEMapp.tvPdpConf.buymoreHelper && window.AEMapp.tvPdpConf.buymoreHelper.init();
			self.$recycle = self.$el.find('.product-details__info-recycle');
			self.samsungRecycle = samsungRecycle(self.$el.find('.product-details__info-recycle'));

			self.reserve = new window.AEMapp.tvPdpConf.instances.Reserve();
			self.reserve.init()
			//init access
			self.setAccEl();
			self.bindAccEvents();
			self.setRecommendationEl();
			self.setOfferEl();
			self.bindOfferEvents();
			self.setBundleEl();
			self.bindBundleEvents();
			self.setBudsTradeInEl();
			self.bindBudsTradeinEvents();
			self.setTradeInEl();
			self.bindTradeinEvents();
			self.setFBTEl();
			self.bindFBTEvents();
			self.setPCEl();
			self.setBopisEl();
			self.bindBopisEl();
			self.bindPCEvents();
			self.setZipBoxEl();
			self.setPaymentEl();
			self.bindPaymentEvents();
			self.bindZipBoxEvents();
			self.samsungRecycle.init();
			getRewardsdata();
			msgPosition();
			setSamsungCareMessage();
			self.switchFamilyOption();
			self.addToCart();
			initWishlist();
			stickTop();
			initThreeSixty();
			initAR();
			initHundredDay();
			setColorOption();
			window.getRewardsTier();
			window.AEMapp.tvPdpConf.deviceAdapter.enableShopAppUI();
			window.AEMapp.tvPdpConf.deviceAdapter.configShopApp();
			window.AEMapp.tvPdpConf.instances.TVSubstitution();
			$(window).trigger('substitutionUpdateTV', ['init']);
			window.disableOptions();
			pdpEnhancementNEOQLED();
			setEppClub();
			window.cyberOffer();
			chkAccessoryPrice();
			callAnalytics()

			window.AEMapp.tvPdpConf.instances.Installation.prototype.updateSummary = updateSummary;
			window.AEMapp.tvPdpConf.instances.Installation.prototype.tagging = self.tagging;
			window.AEMapp.tvPdpConf.instances.Installation.prototype.gotopage = gotopage;
			self.install = new window.AEMapp.tvPdpConf.instances.Installation($('.product-details-v2'));
			self.$install = self.install.$install;

			window.AEMapp.tvPdpConf.instances.handleVIPProgram.prototype.updateSummary = updateSummary;
			window.AEMapp.tvPdpConf.instances.handleVIPProgram.prototype.tagging = self.tagging;
			window.AEMapp.tvPdpConf.instances.handleVIPProgram.prototype.gotopage = gotopage;
			self.vipprogram = new window.AEMapp.tvPdpConf.instances.handleVIPProgram($('.product-details-v2'));

			window.AEMapp.tvPdpConf.instances.TVBezel.prototype.updateSummary = updateSummary;
			self.bezel = new window.AEMapp.tvPdpConf.instances.TVBezel({
				el: self.$el
			});
			self.bezel.init();
			self.$bezel = self.bezel.$bezel;

			window.AEMapp.tvPdpConf.instances.SoundbarMount.prototype.updateSummary = updateSummary;
			self.smount = new window.AEMapp.tvPdpConf.instances.SoundbarMount({
				el: self.$el
			});
			self.smount.init();
			self.$smount = self.smount.$smount;

			window.AEMapp.tvPdpConf.instances.Accessory.prototype.updateSummary = updateSummary;
			self.accessory = new window.AEMapp.tvPdpConf.instances.Accessory({
				el: self.$el
			});
			self.accessory.init();
			self.$accessory = self.accessory.$accessory;

			window.AEMapp.tvPdpConf.instances.PreOrderOffer.prototype.updateSummary = updateSummary;
			self.preOrderOffer = new window.AEMapp.tvPdpConf.instances.PreOrderOffer({
				el: self.$el
			});
			self.preOrderOffer.init();
			self.$preOrderOffer = self.preOrderOffer.$preOrderOffer;

			window.AEMapp.tvPdpConf.instances.Shelves.prototype.updateSummary = updateSummary;
			self.shelves = new window.AEMapp.tvPdpConf.instances.Shelves({
				el: self.$el
			});
			self.shelves.init();
			self.$shelves = self.shelves.$shelves;

			window.AEMapp.tvPdpConf.instances.WhiteGlove.prototype.updateSummary = updateSummary;
			self.whiteglove = new window.AEMapp.tvPdpConf.instances.WhiteGlove({
				el: self.$el
			});
			self.whiteglove.init();
			self.$whiteglove = self.whiteglove.$whiteglove;

			self.communityReward = new window.AEMapp.tvPdpConf.instances.CommunityReward({
				el: self.$el
			});
			self.communityReward.init();

			window.AEMapp.tvPdpConf.instances.DAOpenbox.prototype.updateSummary = updateSummary;
			self.openbox = new window.AEMapp.tvPdpConf.instances.DAOpenbox({
				el: self.$el
			});
			self.openbox.init();
			self.$openbox = self.openbox.$openbox;

			/*enable tbyb will hide all other options*/
			window.AEMapp.tvPdpConf.instances.TVtbyb.prototype.scope = self;
			self.tbyb = new window.AEMapp.tvPdpConf.instances.TVtbyb(self, updateSummary);
			self.tbyb.init();
			self.$tbyb = self.tbyb.attr().$tbyb;
			self.tbybAvailable = self.tbyb.attr().tbybAvailable;
			self.tbybPreSelect = self.tbyb.attr().tbybPreSelect;
			self.tbybSealed = self.tbybAvailable && !self.tbybPreSelect;
			fetchPriceForAccPdp();
			if (self.tbybAvailable) {
				$('.product-details__hundred-day__trigger__wrapper').hide();
				$('.product-details__hundred-day__info').hide();
			}

			if (!window.AEMapp || !window.AEMapp.tvPdpConf || !window.AEMapp.tvPdpConf.deviceAdapter || !window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()) {
				window.AEMapp.tvPdpConf.initReview();

				var thumbnail = new window.AEMapp.tvPdpConf.Thumbnail($('.product-details__thumbnail'));
				thumbnail.init();
				$('.product-details__thumbnail .icon-left-carat').trigger('click');
				var slick = new window.AEMapp.tvPdpConf.Slick($('.container-wrapper-left'));
				slick.init();
			}
			if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()) {
				$('body').addClass('product-details-v2-shopapp');
				let slick = new window.AEMapp.tvPdpConf.Slick($('.container-wrapper-left'));
				slick.init();
			}

			var deviceType = window.navigator.userAgent.toLowerCase();
			if (deviceType.indexOf("chrome") < 0 && deviceType.indexOf("safari") > -1) {
				$('.product-details__info-payment-option__icons img.applepay').removeClass('applepay');
			}

			if (self.isBuds) {
				$('html, body').animate({
					scrollTop: $('nav#anchor-nav-v2').offset().top
				}, 200);
			}

			self.scrollEventBinder();
			$(document).on('finishEppPrice', function () {
				var tsgmt = Cookies.get('tsgmt');

				if (tsgmt) self.$summary.find('.epp-store').text(tsgmt);
				getArbitratePrice();
				getOfferPrice();
				//update access price
				var accessEppPrice = Number(self.$summary.find('.epp-price').html().replace(/[^0-9.]+/g, ''));
				var accessMonth = Number(self.$access.find('.access-month').text());
				self.$access.find('.access-monthly').text((accessEppPrice / accessMonth).toFixed(2));
				self.$access.find('.access-price').text(self.$summary.find('.epp-price').html().replace(/[^0-9.,]+/g, ''));

				if (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) {
					function formatPrice(price) {
						if (price == null) return '0.00';
						return Number(price).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
					}
					$('.selector-option').find('.option-value').each(function () {
						if (window?.line_item && window?.line_item[$(this).data().optionSku]) {
							var __price__ = window?.line_item[$(this).data().optionSku].line_item_cost.display_price;
							$(this).data('samsung', __price__);
							$(this).attr('data-samsung', __price__);
							$(this).find('.epp-price').html(formatPrice(__price__).replace(/^\$/, ''));
						}

					})
				}
				updateSummary();

			});

			$(document).on('exitStoreSummaryReset', function () {
				updateSummary();
				if(window.location.href.indexOf('/us/mobile/mobile-accessories/') > -1){
					window.location.reload();
				}
			});
			// updateSummary();//init anchor nav price
			self.updateLineItemPricesOnLoad();
			self.updateSelectorOption();
			updateSummary();
			var _options = {};
			if (
				//self.isBuds && 
				($.cookie('offerCID') == 'earlyAccess' || getValueFromURL('offerCID') == 'earlyAccess')) {
				_options.onHolidayPage = true;
			}
			window.AEMapp.EPP.loadPrice(_options);
			$(window).trigger('tvPdpConfInit');


			if (window.location.href.indexOf('/monitors') > -1) {
				self.$el.find('.product-details__info-bundle-cta').hide();
			}
		}
		self.updateLineItemPricesOnLoad = function () {
			var objlength = Object.keys(window.initialProductSelectedDetails).length;
			if (window.location.href.indexOf('-bndl-') == -1 && ((window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() && objlength === 0) || (window.location.href.indexOf('shopapp') > -1 && objlength === 0))) {
				var apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
				var parentSku = window.util_getMainSku();
				var requestData = [{
					'quantity': 1,
					'sku': parentSku,
				}];

				$.ajax({
					url: apiUrl + window.getTmktid(),
					data: JSON.stringify(requestData),
					type: 'POST',
					dataType: 'json',
					'headers': {
						'content-type': 'application/json'
					}
				})
					.then(function (res) {
						_.each(res.line_items, function (ltm) {
							window.initialProductSelectedDetails.modelcode = window.util_getMainSku();
							window.initialProductSelectedDetails.display_Price = ltm.line_item_cost.display_price;
							window.initialProductSelectedDetails.regular_Price = ltm.line_item_cost.regular_price;
							$('.product-top-nav__pricing').find('.epp-price').html(formatPrice(window.initialProductSelectedDetails.display_Price || 0).replace(/^\$/, ''));
							$('.product-top-nav__pricing').find('.epp-suggested').html(formatPrice(window.initialProductSelectedDetails.regular_Price || 0).replace(/^\$/, ''));
							self.$el.find('.product-details__info-purchase-card.selected .product-details__info-purchase-card-bottom .price').html(formatPrice(window.initialProductSelectedDetails.display_Price || 0).replace(/^\$/, ''));
							self.$el.find('.product-details__info-summary .product .epp-price').html(formatPrice(window.initialProductSelectedDetails.display_Price || 0).replace(/^\$/, ''));
							self.$el.find('.product-details__info-summary .summary__total .total').html(formatPrice(window.initialProductSelectedDetails.display_Price || 0).replace(/^\$/, ''));
							self.$el.find('.product-details__info-summary .product .epp-suggested').html(formatPrice(window.initialProductSelectedDetails.regular_Price || 0).replace(/^\$/, ''));
							self.$el.find('.product-details__info-selector[data-family-option = "Series"] .selected .epp-price').html(formatPrice(window.initialProductSelectedDetails.display_Price || 0).replace(/^\$/, ''));
							self.$el.find('.product-details__info-selector[data-family-option = "Series"] .selected .epp-suggested').html(formatPrice(window.initialProductSelectedDetails.regular_Price || 0).replace(/^\$/, ''));
							self.$el.find('.product-details__info-selector[data-family-option = "Size"] .selected .epp-price').html(formatPrice(window.initialProductSelectedDetails.display_Price || 0).replace(/^\$/, ''));
							self.$el.find('.product-details__info-selector[data-family-option = "Size"] .selected .epp-suggested').html(formatPrice(window.initialProductSelectedDetails.regular_Price || 0).replace(/^\$/, ''));
							self.$el.find('.product-details__info-selector[data-family-option = "Size"] .selected').data('samsung', window.initialProductSelectedDetails.display_Price);
							self.$el.find('.product-details__info-selector[data-family-option = "Size"] .selected').attr('data-samsung', window.initialProductSelectedDetails.display_Price);
							self.$el.find('a[data-eppmdlcd = "' + ltm?.sku_id + '"]').find('.epp-price').html(formatPrice(window.initialProductSelectedDetails.display_Price || 0).replace(/^\$/, ''));
						});

					})

			}

		}
		self.updateSelectorOption = function ($template) {
			var $el = $('.product-details-v2 .selector-option');
			var $options = $el.find('.option-value.epp-product');

			function formatPrice(price) {
				if (price == null) return '0.00';
				return Number(price).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
			}
			if ($options && $options.length > 0) {
				$options.each(function () {
					if (((window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) && $(this).data().optionSku)
					|| ((window.location.href.indexOf("accessory") > -1 || window.location.href.indexOf("accessories") > -1) && $(this).data().optionSku)) {
		
						var apiUrl;
						if(window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1){
							apiUrl = $S.arbitrate() + '?channelCode=MobileApp&siteId=';
						}else{
							apiUrl = $S.arbitrate() + '?siteId=';
						}

						var requestData = [{
							'quantity': 1,
							'sku': $(this).data().optionSku,
						}]

						var rewardsTier = $.cookie('rewards_tier') ? $.cookie('rewards_tier') : "";
						if ($.cookie('prof_id') && $.cookie('xsdcxyn') && rewardsTier) {
							requestData[0].trigger_tags = [rewardsTier.toUpperCase()];
						}

						$.ajax({
							url: apiUrl + window.getTmktid(),
							data: JSON.stringify(requestData),
							type: 'POST',
							dataType: 'json',
							'headers': {
								'content-type': 'application/json'
							}
						}).then(function (res) {
							if (!window.line_item) {
								window.line_item = {}
							}
							_.each(res.line_items, function (ltm) {
								window.line_item[ltm?.sku_id] = ltm;
								$el.find('a[data-eppmdlcd = "' + ltm?.sku_id + '"]').attr('data-samsung', formatPrice(ltm.line_item_cost.display_price || 0).replace(/^\$/, ''));
								$el.find('a[data-eppmdlcd = "' + ltm?.sku_id + '"]').data('samsung', formatPrice(ltm.line_item_cost.display_price || 0).replace(/^\$/, ''));
								$el.find('a[data-eppmdlcd = "' + ltm?.sku_id + '"]').find('.epp-price').html(formatPrice(ltm.line_item_cost.display_price || 0).replace(/^\$/, ''));
								$el.find('a[data-eppmdlcd = "' + ltm?.sku_id + '"]').find('.epp-suggested').html(formatPrice(ltm.line_item_cost.regular_price || 0).replace(/^\$/, ''));
								$el.find('a[data-eppmdlcd = "' + ltm?.sku_id + '"]').find('.product-details__info-totalPrice').toggle(ltm.line_item_cost.display_price != ltm.line_item_cost.regular_price)
							});
						})

					}
				});
			}

		}
		self.switchFamilyOption = function () {
			self.$el = $('.product-details-v2');
			self.$selector = self.$el.find('.product-details__info-selector');
			self.$selector.find('.option-value.selected').attr('href', getLocationHref());
			self.$selector.on('click', '.option-value', function (e) {
				e.preventDefault();
				var _this = this;
				self.updateLineItemPricesOnLoad()
				if (!$(this).hasClass('selected') && !$(this).hasClass('disable')) {
					self.tagging.selector($(this).data('option-value'));
					self.switchFamilyTagging = true;
					self.selectedFamilyTagging = $(this).closest('.product-details__info-selector').data('family-option')
					self.linkTextTagging = $(this).data('option-value')

					self.$el.find('.container-wrapper-left .sticky-wrapper').css('opacity', 0);
					var nextMdlCd = $(this).data('eppmdlcd').replace('/', '-');
					var nextUrl = $(this).attr('href').replace(/v2\/$/, '').replace(/shopapp\/$/, '').replace(/bmsm\/$/, '');
					var subPage = getLocationHref().match(/\/(v2|bmsm|shopapp)\//) ? getLocationHref().match(/\/(v2|bmsm|shopapp)\//)[0] : '/';

					if (window.AEMapp.tvPdpConf.buymoreHelper.isIframe()) {
						nextUrl += 'bmsm/';
					} else {
						nextUrl.replace(/\/$/, subPage).replace(/\/$/, '');
					}
					var search = window.location.search;
					// window.AEMapp.tvPdpConf.deviceAdapter.deviceAdapter('showSpinner', []);
					//window.AEMapp.tvPdpConf.deviceAdapter.showSpinner();

					var switchCallSuccess = function (template) {
						var _$template = $(template);
						// self.summarySection = $(template);
						var _nextUrl = nextUrl;
						_nextUrl = _nextUrl.replace(/\/$/, '') + subPage;
						if (!self.isBundleBuilder) window.history.replaceState({}, '', _nextUrl + search)
						// update core flags
						var _resTemplate = _$template.find('.product-details__info-results');
						self.$result.data('stock', _resTemplate.data('stock'));
						self.$result.data('ecom', _resTemplate.data('ecom'));
						self.$result.data('eppmdlcd', _resTemplate.data('eppmdlcd'));
						self.$result.attr('data-eppmdlcd', _resTemplate.data('eppmdlcd'));
						// change eol 
						self.$result.data('eol', _resTemplate.data('eol'));
						//title
						self.$el.find('.product-details__info-title').text(_$template.find('.product-details__info-title').text());
						self.$summary.find('.product .title').text(_$template.find('.product-details__info-title').text());
						//info description
						self.$el.find('.product-details__info-description').html(_$template.find('.product-details__info-description').html());
						//sku
						self.$el.find('.product-details__info-sku').text(_$template.find('.product-details__info-sku').text());
						self.$el.find('.product-details__info-sku-name').text(_$template.find('.product-details__info-sku-name').text());
						//review
						self.$el.find('.review__wrapper').html(_$template.find('.review__wrapper').html());
						self.$el.find('.product-details__info-bundle').html(_$template.find('.product-details__info-bundle').html());
						window.AEMapp.tvPdpConf.initReview();
						// product-reviews
						$('#reviews div[data-bv-show="reviews"]').attr('data-bv-productid', nextMdlCd);
						window.AEMapp.tvPdpConf.productReviewInit && window.AEMapp.tvPdpConf.productReviewInit()
						if (window.AEMapp.tvPdpConf.deviceAdapter.isFlutter() || window.location.href.indexOf('shopapp') > -1) {
							$(_$template).find('.selector-option').find('.option-value').each(function () {
								if (window?.line_item && window?.line_item[$(this).data().optionSku]) {
									var __price__ = window?.line_item[$(this).data().optionSku].line_item_cost.display_price;
									var __price_suggested__ = window?.line_item[$(this).data().optionSku].line_item_cost.regular_price;
									$(this).find('.epp-price').html(formatPrice(__price__).replace(/^\$/, ''));
									$(this).data('samsung', formatPrice(__price__).replace(/^\$/, ''));
									$(this).attr('data-samsung', formatPrice(__price__).replace(/^\$/, ''));
									$(this).find('.epp-suggested').html(formatPrice(__price_suggested__).replace(/^\$/, ''));
								}

							})

						}
						//selector
						self.$selector.find('.option-value').removeClass('selected');
						$(_this).addClass('selected');
						_.each(_$template.find('.product-details__info-selector'), function (section) {
							self.$el.find('.product-details__info-selector[data-family-option="' + $(section).data('family-option') + '"]').html($(section).html())
						})
						setColorOption();
						self.updateSelectorOption();
						//hybrid
						self.$el.find('.product-details__info-hybrid').html(_$template.find('.product-details__info-hybrid').html());
						//addon group id
						var newId = $(_.find(_$template, function (el) { return $(el).hasClass('product-details__identify') })).attr('data-group-id');
						self.$el.find('.product-details__identify').attr('data-group-id', newId);
						self.addonGroupID = newId;

						//initSubstitution
						// self.$el.find('.product-details__info-substitute__wrap').html(_$template.find('.product-details__info-substitute__wrap').html());
						// window.AEMapp.tvPdpConf.instances.initSubstitution();
						// $(window).trigger('substitutionUpdateTV', 'switchFamilyOption');

						//pc
						var pcTemplate = _$template.find('.product-details__info-premium');
						var hasPremium = pcTemplate.find('.premium-option').length > 0;
						self.$pc.html(pcTemplate.html());
						self.$pc.toggle(hasPremium);
						if (hasPremium) {
							self.setPCEl();
							if (self.summaryObj.pc) {
								var pcPreSelect = self.$pc.find('.premium-option[data-pcmdlcd="' + self.summaryObj.pc.modelCode + '"]').length > 0;
								if (pcPreSelect) {
									self.$pc.find('.premium-option[data-pcmdlcd="' + self.summaryObj.pc.modelCode + '"]').trigger('click');
								} else {
									self.summaryObj.pc = '';
								}
							}
						} else {
							self.summaryObj.pc = '';
						}
						//buds pc
						var hasBudsPremium = pcTemplate.find('.buds-pc-option').length > 0;
						self.$pc.toggle(hasBudsPremium);
						if (hasBudsPremium) {
							self.setPCEl();
						}

						//tradein
						var tiTemplate = _$template.find('.product-details__info-tradein');
						self.$tradein.html(tiTemplate.html());
						self.setTradeInEl();

						//buds tradein
						var budsTiTemplate = _$template.find('.product-details__info-tradein-buds');
						self.$tradeinbuds.html(budsTiTemplate.html());
						self.setBudsTradeInEl();
						self.summaryObj.tradein = '';

						// recycle
						self.samsungRecycle.reInit(_$template);
						//recommendation
						self.$recommendations.html(_$template.find('.product-details__info-recommendations').html() || '');
						self.setRecommendationEl();
						//offer
						var offerJson = _$template.find('.offer__wrapper').data('offers') || [];
						self.$offer.find('.offer__wrapper').data('offers', offerJson);
						self.$offer.html(_$template.find('.product-details__info-offer').html() || '');
						self.setOfferEl();
						//fbt
						self.$fbt.removeClass('display');
						self.$fbt.data('pair-modelcode', _$template.filter('.frequent-products-tv.container').data('pair-modelcode'));
						self.$fbt.find('.frequent-products__list').html(_$template.find('.frequent-products__list').html() || '');
						self.setFBTEl();
						if (self.summaryObj.fbt && self.summaryObj.fbt.length > 0) {
							_.each(self.summaryObj.fbt, function (prod) {
								self.$fbt.find('.frequent-products__track .frequent-products__item[data-eppmdlcd="' + prod.modelCode + '"]').addClass('selected');
							});
							updateSummaryWithFBT();
						}
						matchHeight();
						// bundle
						self.$bundle.html(_$template.find('.offer__bundle-special').html() || '');
						self.setBundleEl();
						self.bindBundleEvents();
						if (self.summaryObj.bundle && self.summaryObj.bundle.length > 0) {
							_.each(self.summaryObj.bundle, function (prod) {
								self.$bundle.find('.offer__bundle-option[data-mdlcd="' + prod.modelCode + '"]').addClass('selected');
							});
							updateSummaryWithBundle();
						}
						//bezel
						self.bezel.reInit(_$template);
						self.summaryObj.bezel = '';

						//smount
						self.smount.reInit(_$template);
						self.summaryObj.smount = '';


						//whiteglove
						self.whiteglove.reInit(_$template);

						//accessory
						self.accessory.reInit(_$template);
						self.summaryObj.accessory = '';

						//preorder offerr
						self.summaryObj.preOrderOffer = '';
						self.preOrderOffer.reInit(_$template);

						//shelves
						self.shelves.reInit(_$template);
						self.summaryObj.shelves = '';

						// community rewaard
						self.communityReward.reInit(_$template);

						//openbox
						self.openbox.reInit(_$template);
						self.summaryObj.openbox = '';

						//reward
						$('.product-details__info-reward').removeClass('active');
						$('.product-details__info-reward').html(_$template.find('.product-details__info-reward').html());
						if (_$template.find('.product-details__info-reward').hasClass('active')) $('.product-details__info-reward').addClass('active');
						getRewardsdata();
						//cta
						self.$result.attr('data-eol', _resTemplate.attr('data-eol'));
						self.$result.attr('data-ctaurl', _resTemplate.attr('data-ctaurl') || null);
						self.$result.attr('data-ctatext', _resTemplate.attr('data-ctatext') || null);
						fetchPriceForAccPdp();
						self.$el.find('.product-details__info-cta').html(_$template.find('.product-details__info-cta').html());
						self.$el.find('.product-details__info-wtb').html(_$template.find('.product-details__info-wtb').html());
						//shipping
						self.$el.find('.product-details__info-ship').html(_$template.find('.product-details__info-ship').html());
						//install
						self.$install.html(_$template.find('.product-details__info-install').html() || '');
						self.install.setInstallEl();

						if (self.install.isFree) {
							$('.install__enroll-option.left').trigger('click', true);
						}

						updateSummary('install', '')
						self.install.wallInstallTotalPrice = 0;
						updateSummary('wallInstall', '')
						// substitution, replace substitute__data to update show-summary value
						var substitutedata = _$template.find('.product-details__info-substitute__wrap .product-details__info-substitute__data');
						self.$el.find('.product-details__info-substitute__wrap .product-details__info-substitute__data').replaceWith(substitutedata);
						$(window).trigger('substitutionUpdateTV', ['switchFamilyOption']);

						//payment
						self.$payment.html(_$template.find('.product-details__info-purchase').html() || '');
						self.setPaymentEl();
						//access 
						var accTemplate = _$template.find('.product-details__info-access');
						// var hasAccess = accTemplate.data('access') == 'Y';
						var hasAccess = accTemplate.find('.access__option').length > 0;
						self.$access.toggle(hasAccess);
						if (hasAccess) {
							self.$access.find('.access__main').data('price', accTemplate.find('.access__main').data('price'));
							self.$access.find('.access__main').data('month', accTemplate.find('.access__main').data('month'));
							self.$access.find('.access__main').data('monthly', accTemplate.find('.access__main').data('monthly'));
							self.$access.find('.access__main').html(accTemplate.find('.access__main').html());
							self.$access.find('.access__premium').html(accTemplate.find('.access__premium').html());
							self.$access.find('.price-finance').html(accTemplate.find('.price-finance').html());
							self.$access.find('.access__premium').data('pc-model', accTemplate.find('.access__premium').data('pc-model'));
							self.$access.find('.access__ent').html(accTemplate.find('.access__ent').html());
							self.setAccEl();
							self.bindAccEvents();//bind access event one more time as payment section replaced the entire access section
							if (self.summaryObj.access) {
								var accPreSelect = self.$access.find('.access__option[data-ent-model="' + self.summaryObj.access.entertainment.modelCode + '"]').length > 0;
								if (accPreSelect) {
									self.$access.find('.access__option[data-ent-model="' + self.summaryObj.access.entertainment.modelCode + '"]').trigger('click');
									self.$payment.find('.product-details__info-purchase-card[data-payment="SUBSCRIBE"]').trigger('click');
								} else {
									self.summaryObj.access = '';
								}
							}
						} else {
							self.$access.find('.access__ent').empty();
							self.summaryObj.access = '';
						}
						//tbyb
						self.tbyb.reInit(_$template);
						self.tbybAvailable = self.tbyb.attr().tbybAvailable;
						self.tbybPreSelect = self.tbyb.attr().tbybPreSelect;
						self.tbybSealed = self.tbybAvailable && !self.tbybPreSelect;

						self.$result.data('stock', _resTemplate.data('stock'));
						self.$result.data('ecom', _resTemplate.data('ecom'));
						self.$result.data('eppmdlcd', _resTemplate.data('eppmdlcd'));
						// change eol 
						self.$result.data('eol', _resTemplate.data('eol'));

						self.$summary.find('.summary__total').attr('finance', _$template.find('.summary__total').attr('finance') || '');
						self.$summary.find('.summary__total').attr('iseip', _$template.find('.summary__total').attr('iseip') || 'N');
						self.$summary.find('.summary__total').attr('isdeferred', _$template.find('.summary__total').attr('isdeferred') || 'N');
						self.$summary.find('.summary__total .epp-deferred-month').data('month', _$template.find('.summary__total .epp-deferred-month').data('month'));
						updateSummary();
						window.disableOptions();
						//zipbox
						getDeliveryModelcodes(self.zipCode);

						//vipprogram
						self.vipprogram.setVipProgramEl();

						// sibings
						// self.updateSiblingComps(template);
						self.updateSiblingCompsSeparately(nextUrl, nextMdlCd);
						var _options = {};
						if (self.isBuds && ($.cookie('offerCID') == 'earlyAccess' || getValueFromURL('offerCID') == 'earlyAccess')) {
							_options.onHolidayPage = true;
						}
						window.AEMapp.EPP.loadPrice(_options);

						//image
						self.$el.find('.container-wrapper-left .sticky-wrapper').empty();
						self.$el.find('.container-wrapper-left .slick-dots').remove();
						// if (!window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()) {
						// Reinitiating the slick carousel for app as well as the web
						// This code will be executed iff we switch between product family
						self.$el.find('.container-wrapper-left .sticky-wrapper').html(_$template.find('.container-wrapper-left .sticky-wrapper').html());
						var thumbnail = new window.AEMapp.tvPdpConf.Thumbnail($('.product-details__thumbnail'));
						thumbnail.init();
						$('.product-details__thumbnail .icon-left-carat').trigger('click')
						var slick = new window.AEMapp.tvPdpConf.Slick($('.container-wrapper-left'));
						slick.init();
						self.$el.find('.container-wrapper-left .sticky-wrapper').css('opacity', 1);
						initThreeSixty();
						initAR();
						initHundredDay();
						// }
						window.AEMapp.tvPdpConf.deviceAdapter.enableShopAppUI();
						// window.AEMapp.tvPdpConf.deviceAdapter.deviceAdapter('hideSpinner', []);
						window.AEMapp.tvPdpConf.deviceAdapter.hideSpinner();
						window.AEMapp.tvPdpConf.pdpEnhancementTV();
						pdpEnhancementNEOQLED();
						setEppClub();
						// cyber mondy/black friday badge init
						var replaceBadge = _$template.find('.product-details__info .product-details__info-label').html();
						$('.product-details__info .product-details__info-label').html(replaceBadge);
						window.cyberOffer();

						window.adobe && window.adobe.target && adobe.target.trackEvent({
							"mbox": "target-entity-data",
							"params": {
								"entity.id": nextMdlCd.replace('/', '')
							}
						});

						//bopis
						// self.bopis = {
						// 	sku: '',
						// 	postal_code: $.cookie('eddzipcode') || '',
						// 	storeId: $.cookie('storeid') || '',
						// 	edd_message: '',
						// 	storeName: '',
						// 	stockMessage: '',
						// 	skusArray: [],
						// 	payment_method: ''
						// }
						self.bopis.postal_code = $.cookie('eddzipcode') || '';
						self.bopis.storeId = $.cookie('storeId') || '';

						self.setBopisEl();
						self.bindBopisEl();

						// update family color text
						$('.color-selector').find('span[data-active-option]').text($('.color-selector').find('.selected').attr('data-current-selected'));
						if ($('.selector-option .option-value[data-option-sku="QN77S95CAFXZA"]').length > 1) {
							$('.selector-option .option-value[data-option-sku="QN77S95CAFXZA"]').first().prepend('<div class="family-option-new">NEW</div>')
						}

						if (getLocationHref().indexOf('us/displays/direct-view-led/ia-series/the-wall') > -1) {
							$('.product-details__info-purchase').find('[data-payment="splitpay4"]').hide();
							$('.product-details__info-purchase').find('[data-payment="MONTHLY"]').hide();
						}
					}
					$.ajax({
						type: 'GET',
						dataType: "html",
						url: nextUrl + '_jcr_content/root/responsivegrid/product_details.' + nextMdlCd + '.html'
					}).success(switchCallSuccess).fail(function (error) {
						$.ajax({
							type: 'GET',
							dataType: "html",
							url: nextUrl + '_jcr_content/root/responsivegrid/product_details_copy.' + nextMdlCd + '.html'
						}).success(switchCallSuccess)
					})

					$.ajax({
						type: 'GET',
						dataType: 'html',
						url: nextUrl + '_jcr_content/root/responsivegrid/title.changeModel.' + nextMdlCd + '.html'
					}).then(function (title) {
						$('head title').text($(title).text());
					})

					if (getLocationHref().indexOf('/us/televisions-home-theater/tvs/')) {
						$.ajax({
							type: 'GET',
							dataType: 'html',
							url: nextUrl + '_jcr_content/root/responsivegrid/fb-api.' + nextMdlCd + '.html'
						}).then(function (fb) {
							if ($('.product-details-v2').find('.fb-api').length == 0) return;
							self.$el.find('.fb-api').html($(fb).html())
						})
					}

				}
			})
		}

		self.updateSiblingCompsSeparately = function (nextUrl, nextMdlCd) {
			var updateComp = (function (url, model) {
				return function (comp, fn) {
					var endPoint = url + '_jcr_content/root/responsivegrid/' + comp;
					if (comp != 'fb-api') {
						endPoint += '.' + model + '.html';
					}
					else {
						endPoint += '/';
					}

					$.ajax({
						type: 'GET',
						dataType: 'html',
						url: endPoint
					}).then(function (data) {
						fn(data)
					})
				}
			})(nextUrl, nextMdlCd);

			updateComp('breadcrumb', function (template) {
				var $template = $(template);
				var replacePos = $template.find('.breadscrumb__path').find('li').eq(-1).find('span').html();
				$('.breadscrumb__wrapper').find('.breadscrumb__path').find('li').eq(-1).find('span').html(replacePos);
			});
			updateComp('product_anchor_nav', function (template) {
				var $template = $(template);
				var replaceBadge = $template.find('.product-top-nav__name').html();
				$('.product-top-nav__identifier').find('.product-top-nav__name').html(replaceBadge);
				var replaceName = $template.find('.product-top-nav__name').find('.product-top-nav__font-name').html();
				$('.product-top-nav__identifier').find('.product-top-nav__name').find('.product-top-nav__font-name').html(replaceName);
				var replaceBar = $template.find('.tv-offer-bar').html();
				$('.product-top-nav__identifier').find('.tv-offer-bar').html(replaceBar);
				var replaceNameReview = $template.find('.product-top-nav__review').html();
				$('.product-top-nav__identifier').find('.product-top-nav__review').html(replaceNameReview);
				var replaceNav = $template.find('.nav-vb__dropdown__items').html();
				$('.product-top-nav__items').html(replaceNav)
				$('.product-top-nav__items li').each(function () {
					$(this).addClass('product-top-nav__item');
					$(this).removeClass('nav-vb__dropdown__items__li')
					$(this).children().addClass('product-top-nav__link');
					$(this).children().removeClass('nav-vb__items__li__link')
					$(this).children().wrapInner('<p></p>')
				})
				resetTimer();
				gotoNext(self.$el.find('.product-details__info-family'), 'product-details__section');
			});
			updateComp('product_summary', function (template) {
				if ($('section.product-summary').length > 0)
					$('section.product-summary')[0].innerHTML = template;
				pdpEnhancementNEOQLED();
			});
			updateComp('product_specs', function (template) {
				if ($('section.product-specs').length > 0)
					$('section.product-specs')[0].innerHTML = template;
				window.AEMapp && window.AEMapp.tvPdpConf && window.AEMapp.tvPdpConf.productSpecsInit && window.AEMapp.tvPdpConf.productSpecsInit();
			});
			updateComp('related_products', function (template) {
				if ($('section.related-products').length > 0)
					$('section.related-products')[0].innerHTML = template;
				window.AEMapp && window.AEMapp.tvPdpConf && window.AEMapp.tvPdpConf.relatedProductInit && window.AEMapp.tvPdpConf.relatedProductInit();
			});
			updateComp('product_support', function (template) {
				if ($('section.product-support').length > 0)
					$('section.product-support')[0].innerHTML = template;
				window.AEMapp && window.AEMapp.tvPdpConf && window.AEMapp.tvPdpConf.productSupportInit && window.AEMapp.tvPdpConf.productSupportInit();
			});
			if ($('#fb-api').length) {
				updateComp('fb-api', function (template) {
					var $template = $(template);
					var $content = $template.find('.responsivegrid .aem-Grid.aem-Grid--12');
					var $container = $('#fb-api .responsivegrid .aem-Grid.aem-Grid--12');
					if ($content.length && $container.length) {
						$container.html($content.html());

						// re-init
						window.AEMapp.tvPdpConf.featureBenefitInit && window.AEMapp.tvPdpConf.featureBenefitInit();
						window.AEMapp.tvPdpConf.primarySelectionInit && window.AEMapp.tvPdpConf.primarySelectionInit();
						window.smg && window.smg.aem && window.smg.aem.components && window.smg.aem.components.marketing &&
							window.smg.aem.components.marketing.gallery && window.smg.aem.components.marketing.gallery.init($('body'));
					}
				});
			}
		}

		self.updateSiblingComps = function (template) {
			var $template = $(template);
			// breadscrumb
			var replacePos = $template.find('.breadscrumb__wrapper').find('.breadscrumb__path').find('li').eq(-1).find('span').html();
			$('.breadscrumb__wrapper').find('.breadscrumb__path').find('li').eq(-1).find('span').html(replacePos);
			// text header
			var replaceTitle = $template.find('.title.section').find('.page-title').find('p').html();
			$('.title.section').find('.page-title').find('p').html(replaceTitle);
			// navigator
			var replaceBadge = $template.find('.product-top-nav__identifier').find('.product-top-nav__name').find('.product-top-nav__font-badge').html();
			$('.product-top-nav__identifier').find('.product-top-nav__name').find('.product-top-nav__font-badge').html(replaceBadge)
			var replaceName = $template.find('.product-top-nav__identifier').find('.product-top-nav__name').find('.product-top-nav__font-name').html();
			$('.product-top-nav__identifier').find('.product-top-nav__name').find('.product-top-nav__font-name').html(replaceName);
			// sibling sections
			var pdp = $('.product-details-v2.aem-GridColumn--default--12');
			var pdpParent = $('.product-details-v2.aem-GridColumn--default--12').parent();
			var replacePDP = $template.find('.product-details-v2.aem-GridColumn--default--12');
			while (pdp.next().length > 0) {
				pdp.next().remove();
			}
			while (replacePDP.next().length > 0) {
				replacePDP = replacePDP.next();
				pdpParent.append(replacePDP.clone());
			}
			// reInit
			if (window.AEMapp && window.AEMapp.tvPdpConf) {
				window.AEMapp.tvPdpConf.featureBenefitInit && window.AEMapp.tvPdpConf.featureBenefitInit();
				window.AEMapp.tvPdpConf.productReviewInit && window.AEMapp.tvPdpConf.productReviewInit();
				window.AEMapp.tvPdpConf.productSpecsInit && window.AEMapp.tvPdpConf.productSpecsInit();
				window.AEMapp.tvPdpConf.productSupportInit && window.AEMapp.tvPdpConf.productSupportInit();
				window.AEMapp.tvPdpConf.primarySelectionInit && window.AEMapp.tvPdpConf.primarySelectionInit();
				window.AEMapp.tvPdpConf.contentBlockInit && window.AEMapp.tvPdpConf.contentBlockInit();
				window.AEMapp.tvPdpConf.relatedProductInit && window.AEMapp.tvPdpConf.relatedProductInit();
				window.AEMapp.tvPdpConf.compareTrayInit && window.AEMapp.tvPdpConf.compareTrayInit(window.AEMapp.koViewModel);
				window.AEMapp.tvPdpConf.recentlyViewedInit && window.AEMapp.tvPdpConf.recentlyViewedInit(window.AEMapp.koViewModel);
				window.AEMapp.tvPdpConf.contentCarouselInit && window.AEMapp.tvPdpConf.contentCarouselInit();
				window.smg && window.smg.aem && window.smg.aem.components && window.smg.aem.components.marketing &&
					window.smg.aem.components.marketing.gallery && window.smg.aem.components.marketing.gallery.init($('body'));
			}
		}

		self.addToCart = function () {
			function proceedToCheckout(e) {
				callAnalytics();
				e.preventDefault();
				var sku = self.$el.find('.product-details__info-sku').eq(0).text();
				var modelCode = '&addItem[]=' + encodeURIComponent(sku) + ',1';
				if ((getLocationHref().indexOf('/us/televisions-home-theater/tvs') > -1 || getLocationHref().indexOf('/us/computing/monitors') > -1 || getLocationHref().indexOf('/us/computing/memory-storage') > -1 || getLocationHref().indexOf('/us/televisions-home-theater/home-theater/sound-bars') > -1) && sku.indexOf('BNDL') > -1) {
					// SCOM-72810 - Hardcoding quantity for BNDL-1740080475149
					if (sku === 'BNDL-1740080475149' || getLocationHref().indexOf('bndl-1740080475149') > -1) {
						const qtyJSON = {
							QN55Q70DAFXZA: 3,
							QN65QN900DFXZA: 1,
							QN65QN85DBFXZA: 3,
							UN98DU9000FXZA: 1,
						}
						modelCode = ''
						sku = self.$el.find('.product-details__info-bundle-item').eq(0).data('model');
						_.each($('.product-details__info-bundle-item'), function (el) {
							const clsku = encodeURIComponent($(el).data('model'));
							const qty = qtyJSON[clsku] || 1;
							modelCode += '&addItem[]=' + encodeURIComponent($(el).data('model')) + ',' + qty;
						})
					} else {
						modelCode = ''
						sku = self.$el.find('.product-details__info-bundle-item').eq(0).data('model');
						_.each($('.product-details__info-bundle-item'), function (el) {
							modelCode += '&addItem[]=' + encodeURIComponent($(el).data('model')) + ',1';
						})
					}
				}
				var subModelCodes = '';
				var tbyb = '';
				var fbt = '';
				var pc = '';
				var offer = '';
				var bundle = '';
				var tradein = '';
				var payment = '';
				var install = '';
				var recycle = '';
				var bezel = '';
				var smount = '';
				var accessory = '';
				var shelves = '';
				var preorderOffer = '';
				var wallInstall = '';
				var vipprogram = '';
				// var promoCode = getValueFromURL('promoCode') || '';
				var promoCode = getValueFromURL('promoCode') || (self.checkoutFromMultiview ? '500ECERTHHPTV' : '');
				var cartType = 'cart-info';
				var cartUrl = 'web/app/cart';

				if (promoCode) {
					promoCode = '&promoCode=' + promoCode;
				}

				if (self.paymentId && self.paymentId != "PayinFull") {
					payment = '&paymentPlanId=' + self.paymentId;
				}

				if (self.summaryObj && self.summaryObj.recycle) {
					recycle = '&addChildItem[]=RECYCLE-HAUL-AWY-TV,' + encodeURIComponent(sku) + ',1' + '&addChildItem[]=' + encodeURIComponent(self.summaryObj.recycle.modelCode) + ',' + encodeURIComponent(sku) + ',1,brand,' + self.summaryObj.recycle.brand;

				}

				if (self.summaryObj && self.summaryObj.fbt) {
					self.summaryObj.fbt.forEach(function (prod) {
						fbt += '&addChildItem[]=' + encodeURIComponent(prod.modelCode) + ',' + encodeURIComponent(sku) + ',1';
					});
				}

				if (self.summaryObj && self.summaryObj.offer) {
					self.summaryObj.offer.forEach(function (mdl) {
						if (mdl.modelCode) {
							_.each(mdl.modelCode.split(','), function (offerSku) {
								offer += '&addChildItem[]=' + encodeURIComponent(offerSku) + ',' + encodeURIComponent(sku) + ',1';
							});
						}
					});
				}

				if (self.summaryObj && self.summaryObj.bezel) {
					self.summaryObj.bezel.forEach(function (mdl) {
						if (mdl.modelCode) {
							bezel += '&addChildItem[]=' + encodeURIComponent(mdl.modelCode) + ',' + encodeURIComponent(sku) + ',1';
						}
					});
				}

				if (self.summaryObj && self.summaryObj.smount) {
					self.summaryObj.smount.forEach(function (mdl) {
						if (mdl.modelCode) {
							smount += '&addChildItem[]=' + encodeURIComponent(mdl.modelCode) + ',' + encodeURIComponent(sku) + ',1';
						}
					});
				}

				if (self.summaryObj && self.summaryObj.shelves) {
					self.summaryObj.shelves.forEach(function (mdl) {
						if (mdl.modelCode) {
							shelves += '&addChildItem[]=' + encodeURIComponent(mdl.modelCode) + ',' + encodeURIComponent(sku) + ',1';
						}
					});
				}

				if (self.summaryObj && self.summaryObj.preOrderOffer) {
					self.summaryObj.preOrderOffer.forEach(function (mdl) {
						if (mdl.modelCode) {
							preorderOffer += '&addChildItem[]=' + encodeURIComponent(mdl.modelCode) + ',' + encodeURIComponent(sku) + ',1';
							if (mdl.mount) {
								preorderOffer += '&addChildItem[]=' + encodeURIComponent(mdl.mount) + ',' + encodeURIComponent(sku) + ',1';
							}
						}
					});
				}
				if (self.summaryObj && self.summaryObj.accessory) {
					self.summaryObj.accessory.forEach(function (mdl) {
						if (mdl.modelCode) {
							accessory += '&addChildItem[]=' + encodeURIComponent(mdl.modelCode) + ',' + encodeURIComponent(sku) + ',1';
						}
					});
				}

				if (self.summaryObj && self.summaryObj.bundle) {
					self.summaryObj.bundle.forEach(function (mdl) {
						if (mdl.modelCode) {
							bundle += '&addChildItem[]=' + encodeURIComponent(mdl.modelCode) + ',' + encodeURIComponent(sku) + ',1';
						}
					});
				}

				if (self.summaryObj && self.summaryObj.tradein) tradein = '&exchange_id=' + self.summaryObj.tradein;
				if (self.summaryObj && self.summaryObj.audiotradein) tradein = '&exchange_id=' + self.summaryObj.audiotradein.modelCode;

				if (self.summaryObj && self.summaryObj.pc) {
					pc = '&addChildItem[]=' + encodeURIComponent(self.summaryObj.pc.modelCode) + ',' + encodeURIComponent(sku) + ',1';
				}

				if (self.summaryObj && self.summaryObj.install) {
					install = '&addChildItem[]=' + encodeURIComponent(self.summaryObj.install.modelCode) + ',' + encodeURIComponent(sku) + ',1';
					if (self.summaryObj.install.mount) {
						install += '&addChildItem[]=' + encodeURIComponent(self.summaryObj.install.mount) + ',' + encodeURIComponent(sku) + ',1';
					}
				}

				if (self.summaryObj && self.summaryObj.wallInstall) {
					wallInstall = '&addChildItem[]=' + encodeURIComponent(self.summaryObj.wallInstall.modelCode) + ',' + encodeURIComponent(sku) + ',1';
					if (self.summaryObj.wallInstall.addOn) {
						self.summaryObj.wallInstall.addOn.forEach(function (mdl) {
							if (mdl.modelCode) {
								wallInstall += '&addChildItem[]=' + encodeURIComponent(mdl.modelCode) + ',' + encodeURIComponent(sku) + ',1';
							}
						});
					}
				}

				if(self.summaryObj && self.summaryObj.vipprogram && self.summaryObj.vipprogram.sku){
					var obj = self.summaryObj.vipprogram;
					vipprogram = '&addItem[]=' + encodeURIComponent(obj.sku) + ',' + +'1';
				}

				if (self.summaryObj && self.summaryObj.access && self.summaryObj.access.entertainment && self.summaryObj.access.pc) {
					tbyb = '';
					fbt = '';
					offer = '';
					bundle = '';
					pc = '';
					if (!self.stackableWithAccess) tradein = '';
					install = '';
					bezel = '';
					smount = '';
					shelves = '';
					accessory = '';
					payment = '&paymentPlanId=36_MO_EIP_DAAS_TVS';
					cartType = 'init-cart';
					subModelCodes += '&addChildItem[]=UPGRADE-04,' + encodeURIComponent(sku) + ',1';
					if (self.summaryObj.access.entertainment) {
						subModelCodes += '&addChildItem[]=' + encodeURIComponent(self.summaryObj.access.entertainment.modelCode) + ',' + encodeURIComponent(sku) + ',1';
					}
					if (self.summaryObj.access.pc) {
						pc = '&addChildItem[]=' + encodeURIComponent(self.summaryObj.access.pc) + ',' + encodeURIComponent(sku) + ',1';
					}
				};

				if (self.summaryObj && !!self.summaryObj.tbyb) {
					subModelCodes = '';
					tbyb = '';
					fbt = '';
					if (!self.stackableWithTBYB) offer = '';
					bundle = '';
					pc = '';
					if (!self.stackableWithTBYB) tradein = '';
					install = '';
					recycle = '';
					bezel = '';
					smount = ''
					shelves = '';
					accessory = '';
					wallInstall = '';
					vipprogram = '';
					cartType = 'init-cart';
					self.summaryObj.tbyb.forEach(function (prod) {
						tbyb += '&addChildItem[]=' + encodeURIComponent(prod.modelCode) + ',' + encodeURIComponent(sku) + ',1';
					});
					payment = '&paymentPlanId=tbyb_3pay';
					cartUrl = 'web/app/cart';
					//cartUrl = (window.location.search.indexOf('outlet=true')>-1 && AEMapp.eppStore.isRealEppUser()) ? 'outlet/3155000/web/app/cart' : 'web/app/cart';
				}

				window.location.href = window.location.protocol + '//' + window.location.host + '/us/' + cartUrl + '/#/' + cartType + '/?' + modelCode + subModelCodes + tbyb + fbt + pc + offer + bundle + tradein + install + wallInstall + payment + recycle + bezel + shelves + preorderOffer + smount + accessory + promoCode + vipprogram +'&step=EXPCART';
			}

			function generateBundleChild(name, type, modelCode, monthly, promoPrice, msrpPrice) {
				var ret = {
					name: name,
					quantity: 1,
					type: type,
					sku: modelCode,
					monthly: monthly || false
				}
				if (promoPrice) ret.promoPrice = promoPrice;
				if (msrpPrice) ret.msrpPrice = msrpPrice;
				return ret;
			}

			function proceedToAppCheckout(e) {
				var sku = self.$el.find('.product-details__info-sku').eq(0).text();
				var lineItem = { parent: sku, quantity: 1 };
				var childItem = [];
				var bundleChildItem = [];

				if (self.checkoutFromMultiview) {
					window.multiview_promoCode = "500ECERTHHPTV";
				}
				else {
					delete window.multiview_promoCode;
				}

				// var hasFinance = self.$summary.find('.summary__total').attr('finance');
				// if (hasFinance) {
				// 	lineItem.fin_plan_id = hasFinance;
				// }

				if (self.summaryObj && !!self.summaryObj.tbyb) {
					self.summaryObj.tbyb.forEach(function (prod) {
						childItem.push(prod.modelCode);
					});
					lineItem.fin_plan_id = 'tbyb_3pay';

					if (self.summaryObj && self.summaryObj.tradein && !!self.stackableWithTBYB) {
						lineItem.exchange_id = self.summaryObj.tradein;
					}

					if (self.summaryObj && self.summaryObj.offer && !!self.stackableWithTBYB) {
						self.summaryObj.offer.forEach(function (mdl) {
							if (mdl.modelCode) {
								childItem.push(mdl.modelCode);
							}
						});
					}
				} else if (self.summaryObj && self.summaryObj.access && self.summaryObj.access.entertainment && self.summaryObj.access.pc) {
					lineItem.fin_plan_id = '36_MO_EIP_DAAS_TVS';
					childItem.push('UPGRADE-04');

					if (self.summaryObj.access.entertainment) {
						childItem.push(self.summaryObj.access.entertainment.modelCode);
					}

					if (self.summaryObj.access.pc) {
						childItem.push(self.summaryObj.access.pc)
					}

					if (self.summaryObj && self.summaryObj.tradein && !!self.stackableWithAccess) {
						lineItem.exchange_id = self.summaryObj.tradein;
					}
				} else {
					// if (self.paymentId) {// disable payment for shopapp
					// 	lineItem.fin_plan_id = self.paymentId;
					// }

					if (self.summaryObj && self.summaryObj.fbt) {
						self.summaryObj.fbt.forEach(function (prod) {
							childItem.push(prod.modelCode);
						});
					}

					if (self.summaryObj && self.summaryObj.offer) {
						self.summaryObj.offer.forEach(function (mdl) {
							if (mdl.modelCode) {
								_.each(mdl.modelCode.split(','), function (offerSku) {
									childItem.push(offerSku);
								});
							}
						});
					}

					if (self.summaryObj && self.summaryObj.bezel) {
						self.summaryObj.bezel.forEach(function (mdl) {
							if (mdl.modelCode) {
								childItem.push(mdl.modelCode);
							}
						});
					}

					if (self.summaryObj && self.summaryObj.shelves) {
						self.summaryObj.shelves.forEach(function (mdl) {
							if (mdl.modelCode) {
								childItem.push(mdl.modelCode);
							}
						});
					}

					if (self.summaryObj && self.summaryObj.smount) {
						self.summaryObj.smount.forEach(function (mdl) {
							if (mdl.modelCode) {
								childItem.push(mdl.modelCode);
							}
						});
					}

					if (self.summaryObj && self.summaryObj.accessory) {
						self.summaryObj.accessory.forEach(function (mdl) {
							if (mdl.modelCode) {
								childItem.push(mdl.modelCode);
							}
						});
					}

					if (self.summaryObj && self.summaryObj.preOrderOffer) {
						self.summaryObj.preOrderOffer.forEach(function (mdl) {
							if (mdl.modelCode) {
								childItem.push(mdl.modelCode);
								if (mdl.mount) {
									childItem.push(mdl.mount)
								}
							}
						});
					}

					if (self.summaryObj && self.summaryObj.bundle) {
						self.summaryObj.bundle.forEach(function (bdl) {
							if (bdl.modelCode) {
								childItem.push(bdl.modelCode);
							}
						});
					}

					if (self.summaryObj && self.summaryObj.pc) {
						childItem.push(self.summaryObj.pc.modelCode);
						if (self.isBundleBuilder) bundleChildItem.push(generateBundleChild(self.summaryObj.pc.name, 'premium', self.summaryObj.pc.modelCode, false));
					}

					if (self.summaryObj && self.summaryObj.install) {
						childItem.push(self.summaryObj.install.modelCode);
						if (self.isBundleBuilder) bundleChildItem.push(generateBundleChild('TV mount service', 'install', self.summaryObj.install.modelCode, false));
						if (self.summaryObj.install.mount) {
							childItem.push(self.summaryObj.install.mount);
							if (self.isBundleBuilder) bundleChildItem.push(generateBundleChild('TV and wall mount service', 'install', self.summaryObj.install.mount, false));
						}
					}

					if (self.summaryObj && self.summaryObj.tradein) {
						lineItem.exchange_id = self.summaryObj.tradein;
						if (self.isBundleBuilder) bundleChildItem.push(generateBundleChild('Trade-in discount will be applied in cart', 'tradein', self.summaryObj.tradein, false));
					}

					if (self.summaryObj && self.summaryObj.audiotradein) {
						lineItem.exchange_id = self.summaryObj.audiotradein.modelCode;
						if (self.isBundleBuilder) bundleChildItem.push(generateBundleChild('Trade-in discount will be applied in cart', 'audiotradein', self.summaryObj.audiotradein.modelCode, false));
					}

					if (self.summaryObj && self.summaryObj.recycle) {
						var childObjs = [];
						childObjs.push({
							sku: 'RECYCLE-HAUL-AWY-TV',
							quantity: 1,
						})
						childObjs.push({
							sku: self.summaryObj.recycle.modelCode,
							quantity: 1,
							custom_attributes: {
								brand: self.summaryObj.recycle.brand
							}
						})
						childItem.forEach(function (model) {
							childObjs.push({
								sku: model,
								quantity: 1
							})
						})
						childItem = [];
						lineItem.childObjs = childObjs;
						if (self.isBundleBuilder) {
							bundleChildItem.push(generateBundleChild('Recycle and trade-in discount', 'tradein', self.summaryObj.recycle.modelCode, false, 1, self.summaryObj.recycle.price));
							var recycleItem = generateBundleChild('Recycle and trade-in discount', 'tradein', 'RECYCLE-HAUL-AWY-TV', false, 1);
							recycleItem.brand = self.summaryObj.recycle.brand;
							bundleChildItem.push(recycleItem);
						}
					}
				}

				lineItem.children = childItem;

				var payload = {
					line_items: [lineItem]
				};

				window.AEMapp.tvPdpConf.cartPayload = JSON.stringify(payload);
				delete window.AEMapp.tvPdpConf.cartResult;
				if (self.isBundleBuilder) {
					payload.category = 'tv';
					payload.raw = window.AEMapp.tvPdpConf.cartPayload;
					payload.source = 'product details';
					payload.line_items[0].image = self.$el.find('.product-details__photo .photo-img img').first().attr('src')
					payload.line_items[0].name = self.$el.find('.product-details__info-title').html();
					if (self.category != 'TV') payload.line_items[0].familyInfo = _.map(self.$el.find('.option-value.selected .name'), function (el) { return $(el).text() }).join(' | ');
					payload.line_items[0].children = bundleChildItem;
					if (self.summaryObj.zipCode) {
						window.bundleZipcodeLock = true;
						payload.line_items[0].zipCode = self.summaryObj.zipCode;
					}
					var isEIP = self.$summary.find('.summary__total').attr('iseip') == 'Y';
					var isDeferred = self.$summary.find('.summary__total').attr('isdeferred') == 'Y';
					if (isEIP || isDeferred) {
						payload.line_items[0].deferredMonth = self.$summary.find('.summary__total .epp-deferred-month').data('month');
					}
					if (self.summaryObj.openbox) {
						payload.openbox = true;
					}
					$(window).trigger('bundle:ADD', payload);
				} else {
					window.AEMapp.tvPdpConf.deviceAdapter.deviceAdapter('addCompositeToCartV3', JSON.stringify(payload))
				}
			}

			function deviceAdapter(e) {
				var isAppDevice = window.AEMapp.tvPdpConf.deviceAdapter.isIOS() || window.AEMapp.tvPdpConf.deviceAdapter.isAndroid() || window.AEMapp.tvPdpConf.deviceAdapter.isFlutter();
				if (self.summaryObj && self.summaryObj.openbox) {
					if (window.sessionStorage) window.sessionStorage.setItem("tgt_pzn_config_sets", "DAOpenBox");
				}
				if (isAppDevice && getLocationHref().indexOf('/shopapp') > -1 || self.isBundleBuilder) {
					proceedToAppCheckout(e);
				} else {
					proceedToCheckout(e);
				}
			}

			function proceedAdd(e, from) {
				var pc_bopis_flag = $('.product-details__info-add').data('isbopis');
				var el = $(e.currentTarget);
				// if checkout with class disable, return
				if ($('.product-details__info-add').hasClass('disable')) {
					return;
				}
				// if oos on samsung.com and sku available for configurator, redirect page to configurator
				if (pc_bopis_flag && pc_bopis_flag == 'Y' && (getLocationHref().indexOf('/us/computing/galaxy-books') > -1 || getLocationHref().indexOf('/us/computing/chromebooks') > -1)) {
					var buynowUrl = $('.product-details__info-add').attr('href');
					window.location.href = buynowUrl;
					return;
				}

				function formatPrice(p) {
					var price = typeof p === 'string' ? p : p.toString();
					return price.replace(/[^0-9.]+/g, '');
				}
				if (pc_bopis_flag && pc_bopis_flag == 'Y') {
					var ctaText = $('.product-details__info-add').text();
					var deliveryInfo = $('.product-details__info-results').find('.deliveryDetails .pickUpMessage').text();
					var pickupInfo = $('.product-details__info-results').find('.inStorePickUpDetails .pickUpMessage').text();
					var storeName = $('.product-details__info-results').find('.inStorePickUpDetails .storeName').text();
					var bopisEnabled = (pickupInfo == 'Pickup unavailable for this ZIP' || pickupInfo == 'Not available for pickup' || $('.product-details__info-results').find('.inStorePickUp').hasClass('notAvailable')) ? 'N' : 'Y';
					var linkPosition = from ? 'nav' : 'summary'
					var tagObj = {
						'link_cat': 'pdp',
						'link_id': ctaText,
						'link_position': linkPosition,
						'event_name': 'add_to_cart',
						'zip_code': self.bopis.postal_code,
						'product_id': self.bopis.sku,
						'pickup_info': '[' + pickupInfo + ']',
						'deliver_info': '[' + deliveryInfo + ']',
						'store_name': '[' + storeName + ']',
						'bopis_enabled': bopisEnabled
					}
					window.utag && window.utag.link(tagObj)
				} else {

					self.tagging.cta(el.text());
				}

				if (checkAddonStep(self.addonGroupID)) {
					e.preventDefault();
					var child = []
					var summary = [];

					if (self.summaryObj && self.summaryObj.haDelivery) {
						self.summaryObj.haDelivery.forEach(function (mdl) {
							if (mdl.modelCode) {
								child.push(mdl.modelCode);
								summary.push({
									modelCode: mdl.modelCode,
									name: mdl.name,
									promo: formatPrice(mdl.price),
									msrp: formatPrice(mdl.suggested)
								})
							}
						});
					}
					if (self.summaryObj && self.summaryObj.filter) {
						var filter = self.summaryObj.filter;
						child.push(filter.modelCode);
						summary.push({
							modelCode: filter.modelCode,
							name: filter.name,
							promo: formatPrice(filter.promo),
							msrp: formatPrice(filter.price)
						})
					}
					// tv
					if (self.summaryObj && self.summaryObj.pc && !self.summaryObj.lifeStyle) {
						var pc = self.summaryObj.pc;
						child.push(pc.modelCode);
						summary.push({
							modelCode: pc.modelCode,
							name: pc.name,
							promo: formatPrice(pc.price),
							msrp: formatPrice(pc.price)
						})
					}
					if (self.summaryObj && self.summaryObj.install) {
						var install = self.summaryObj.install;
						child.push(install.modelCode);
						summary.push({
							modelCode: install.modelCode,
							name: 'TV mount service',
							promo: formatPrice(install.price),
							msrp: formatPrice(install.totalPrice || install.price)
						})
						if (install.mount) { // mount price is added with mount service already
							summary.push({
								modelCode: install.mount,
								name: 'mount',
								promo: 0,
								msrp: 0
							})
						}
					}
					if (self.summaryObj && self.summaryObj.offer) {
						self.summaryObj.offer.forEach(function (mdl) {
							if (mdl.modelCode) {
								child.push(mdl.modelCode);
								summary.push({
									modelCode: mdl.modelCode,
									name: mdl.name,
									promo: formatPrice(mdl.price),
									msrp: formatPrice(mdl.suggested),
									isOffer: true
								})
							}
						});
					}
					if (self.summaryObj && self.summaryObj.bezel) {
						self.summaryObj.bezel.forEach(function (mdl) {
							if (mdl.modelCode) {
								child.push(mdl.modelCode);
								summary.push({
									modelCode: mdl.modelCode,
									name: mdl.name,
									promo: formatPrice(mdl.price),
									msrp: formatPrice(mdl.suggested)
								})
							}
						});
					}

					if (self.summaryObj && self.summaryObj.shelves) {
						self.summaryObj.shelves.forEach(function (mdl, idx) {
							if (mdl.modelCode) {
								child.push(mdl.modelCode);
								var obj = {
									modelCode: mdl.modelCode,
									name: mdl.name,
									promo: formatPrice(mdl.price),
									msrp: formatPrice(mdl.suggested)
								}
								if (idx === 0) {
									obj['hideInSummary'] = false
								} else {
									obj['hideInSummary'] = true
								}
								summary.push(obj)
							}
						});
					}

					if (self.summaryObj && self.summaryObj.smount) {
						self.summaryObj.smount.forEach(function (mdl) {
							if (mdl.modelCode) {
								child.push(mdl.modelCode);
								summary.push({
									modelCode: mdl.modelCode,
									name: mdl.name,
									promo: formatPrice(mdl.price),
									msrp: formatPrice(mdl.suggested)
								})
							}
						});
					}

					if (self.summaryObj && self.summaryObj.accessory) {
						self.summaryObj.accessory.forEach(function (mdl) {
							if (mdl.modelCode) {
								child.push(mdl.modelCode);
								summary.push({
									modelCode: mdl.modelCode,
									name: mdl.name,
									promo: formatPrice(mdl.price),
									msrp: formatPrice(mdl.suggested)
								})
							}
						});
					}
					if (self.summaryObj && self.summaryObj.preOrderOffer) {
						self.summaryObj.preOrderOffer.forEach(function (mdl) {
							if (mdl.modelCode) {
								child.push(mdl.modelCode);
								summary.push({
									modelCode: mdl.modelCode,
									name: mdl.name,
									promo: formatPrice(mdl.price),
									msrp: formatPrice(mdl.suggested)
								})
								if (mdl.mount) {
									summary.push({
										modelCode: mdl.mount,
										name: 'mount',
										promo: 0,
										msrp: 0
									})
								}
							}
						});
					}

					if (self.summaryObj && self.summaryObj.bundle) {
						self.summaryObj.bundle.forEach(function (mdl) {
							if (mdl.modelCode) {
								child.push(mdl.modelCode);
								summary.push({
									modelCode: mdl.modelCode,
									name: mdl.name,
									promo: formatPrice(mdl.price),
									msrp: formatPrice(mdl.suggested)
								})
							}
						});
					}
					if (self.summaryObj && self.summaryObj.fbt) {
						self.summaryObj.fbt.forEach(function (mdl) {
							if (mdl.modelCode) {
								child.push(mdl.modelCode);
								summary.push({
									modelCode: mdl.modelCode,
									name: mdl.name,
									promo: formatPrice(mdl.price),
									msrp: formatPrice(mdl.suggested)
								})
							}
						});
					}
					if (self.summaryObj && self.summaryObj.tradein) {
						summary.push({
							modelCode: self.summaryObj.tradein,
							isTradein: true,
							name: 'Trade-in discount will be applied in cart'
						})
					}
					if (self.summaryObj && self.summaryObj.recycle) {
						summary.push({
							brand: self.summaryObj.recycle.brand,
							isRecycle: true,
							modelCode: self.summaryObj.recycle.modelCode,
							promo: self.summaryObj.recycle.price,
							msrp: self.summaryObj.recycle.price,
							name: 'Trade-in discount will be applied in cart'
						})
					}

					var group = self.addonGroupID ? '&groupId=' + self.addonGroupID : '';
					var mainSku = self.$el.find('.product-details__info-sku').eq(0).text();
					var childMsg = child.length > 0 ? '&child=' + child.join(',') : '';
					var tradeInMsg = self.summaryObj && self.summaryObj.tradein ? '&tradeIn=' + self.summaryObj.tradein : '';
					var payment = (self.paymentId && self.paymentId != "PayinFull") ? '&paymentPlanId=' + self.paymentId : '';
					var msg = mainSku + childMsg + tradeInMsg + group + payment;
					var search = window.location.search ? window.location.search + '&sku=' + msg : '?sku=' + msg;
					$.cookie('bespokeSummary', summary, { path: '/' });
					if (window.AEMapp.tvPdpConf.deviceAdapter.isShopApp()) {
						window.location.href = '/us/app/addons/' + search;
					} else {
						window.location.href = '/us/shop/addons/' + search;
					}
				} else if (el.text() === t('ADD TO CART') || el.text() === t('CHECKOUT') || el.text() === t('PRE-ORDER') || el.text() === t('TRY NOW') || el.text() === t('ADD TO BUNDLE')) {
					e.preventDefault();
					$(document).trigger('tagging:cart', [from, self.$el.find('.product-details__info-sku').eq(0).text()]);
					deviceAdapter(e);
				}
				else if (el.text() === t('WHERE TO BUY')) {
					const whereToBuyLink = document.querySelector('.product-details__info-cta a');
					if(whereToBuyLink && whereToBuyLink.href){
							window.location.href = whereToBuyLink.href;
					}
			}
			}

			self.$el.on('click', '.product-details__info-add', function (e) {
				proceedAdd(e, false);
			})

			$('.product-anchor-nav-v2').on('click', '.product-top-nav__cta', function (e) {
				proceedAdd(e, true);
			})
		}

		self.tagging = (function () {
			var familyType = $('.breadscrumb__wrapper').find('.breadscrumb__path').find('li').eq(-2).find('span').text();
			familyType = (familyType || '').toLowerCase().split(' ').join('-');

			// bind event
			$('.product-details__info-buy a').click(function () {
				window.utag && window.utag.link({
					'link_cat': 'tv_pdp_configurator>home',
					'link_id': 'where to buy',
					'link_meta': 'link_name:where to buy',
					'link_position': 'tv_pdp_configurator>' + familyType + '>home',
					'event_name': 'select_home_where to buy'
				});
			});

			$('.access__disclaimer a').click(function () {
				var link = $(this).data('option-value');
				window.utag && window.utag.link({
					'link_cat': 'tv_pdp_configurator>link',
					'link_id': link,
					'link_meta': 'link_name:' + link,
					'link_position': 'tv_pdp_configurator>' + familyType + '>link',
					'event_name': 'select_link_' + link
				});
			});

			$('.product-details__info-hybrid').on('click', 'a', function () {
				window.utag && window.utag.link({
					'link_cat': 'tv_pdp_configurator>link',
					'link_id': 'buying for your business',
					'link_meta': 'link_name:' + 'buying for your business',
					'link_position': 'tv_pdp_configurator>' + familyType,
					'event_name': 'buying for your business'
				});
			});

			return {
				land: function () {
					var tagObj = {
						'page_type': 'configurator>home',
						'pagename_v2': 'tv_pdp_configurator>' + familyType + '>home',
						'page_channel': 'B2C',
						'site_section1': 'televisions-home-theater',
						'site_section2': 'tvs',
						'site_section3': familyType
					};
					if (getValueFromURL('substitution')) {
						tagObj.referrer = getValueFromURL('substitution');
					}
					// 	window.utag && window.utag.view(tagObj);
				},
				cta: function (text) {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>cta',
						'link_id': text,
						'link_meta': 'link_name:' + text,
						'link_position': 'tv_pdp_configurator>' + familyType + '>cta',
						'event_name': 'select_cta_' + text
					});
				},
				selector: function (name) {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>size',
						'link_id': name,
						'link_meta': 'link_name:' + name,
						'link_position': 'tv_pdp_configurator>' + familyType + '>size',
						'event_name': 'select_size_' + familyType + '_' + name
					});
				},
				offer: function (isSelected, name) {
					var status = isSelected ? 'remove' : 'add';
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>offer',
						'link_id': name,
						'link_meta': 'link_name:' + name,
						'link_position': 'tv_pdp_configurator>' + familyType + '>offer',
						'event_name': 'select_offer_' + status + '_' + name
					});
				},
				access: function (isSelected) {
					var status = isSelected ? 'remove' : 'add';
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>access',
						'link_id': 'access',
						'link_meta': 'link_name:access',
						'link_position': 'tv_pdp_configurator>' + familyType + '>access',
						'event_name': 'select_samsung_access_' + status
					});
				},
				pc: function (isSelected, name) {
					var status = isSelected ? 'remove' : 'add';
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>care',
						'link_id': name,
						'link_meta': 'link_name:' + name,
						'link_position': 'tv_pdp_configurator>' + familyType + '>care',
						'event_name': 'select_samsung_care_' + status + '_' + name
					});
				},
				cart: function (isNav, sku) {
					var pos = isNav ? 'continue_header' : 'continue';
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>home',
						'link_id': pos + '_' + sku,
						'link_meta': 'link_name:' + pos + '_' + sku,
						'link_position': 'tv_pdp_configurator>' + familyType + '>home',
						'event_name': 'select_home_' + pos + '_' + sku
					});
				},
				tradein: function (name) {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>tradein',
						'link_id': name,
						'link_meta': 'link_name:' + name,
						'link_position': 'tv_pdp_configurator>' + familyType + '>tradein',
						'event_name': 'select_tradein_' + name
					});
				},
				tradeinCategory: function (name) {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>tradein',
						'link_id': 'category_' + name,
						'link_meta': 'link_name:category_' + name,
						'link_position': 'tv_pdp_configurator>' + familyType + '>tradein',
						'event_name': 'select_tradein_category_' + name
					});
				},
				tradeinBrand: function (name) {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>tradein',
						'link_id': 'brand_' + name,
						'link_meta': 'link_name:brand_' + name,
						'link_position': 'tv_pdp_configurator>' + familyType + '>tradein',
						'event_name': 'select_tradein_brand_' + name
					});
				},
				tradeinModel: function (name) {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>tradein',
						'link_id': 'model_' + name,
						'link_meta': 'link_name:model_' + name,
						'link_position': 'tv_pdp_configurator>' + familyType + '>tradein',
						'event_name': 'select_tradein_model_' + name
					});
				},
				tradeinQuestion: function (idx, name) {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>tradein',
						'link_id': 'questions_q' + idx + '=' + name,
						'link_meta': 'link_name:questions_q' + idx + '=' + name,
						'link_position': 'tv_pdp_configurator>' + familyType + '>tradein',
						'event_name': 'select_tradein_questions_q' + idx + '=' + name
					});
				},
				tradeinCondition: function () {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>tradein',
						'link_id': 'some condition meet',
						'link_meta': 'link_name:some condition meet',
						'link_position': 'tv_pdp_configurator>' + familyType + '>tradein',
						'event_name': 'select_tradein_some condition meet'
					});
				},
				tradeinAgree: function () {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>tradein',
						'link_id': 'agree',
						'link_meta': 'link_name:agree',
						'link_position': 'tv_pdp_configurator>' + familyType + '>tradein',
						'event_name': 'select_tradein_agree'
					});
				},
				tradeinDisagree: function () {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>tradein',
						'link_id': 'no trade-in',
						'link_meta': 'link_name:no trade-in',
						'link_position': 'tv_pdp_configurator>' + familyType + '>tradein',
						'event_name': 'select_tradein_no trade-in'
					});
				},
				tradeinEdit: function () {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>tradein',
						'link_id': 'edit',
						'link_meta': 'link_name:edit',
						'link_position': 'tv_pdp_configurator>' + familyType + '>tradein',
						'event_name': 'select_tradein_edit'
					});
				},
				fbt: function (isSelected, name) {
					var status = isSelected ? 'remove' : 'add';
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>fbt',
						'link_id': name,
						'link_meta': 'link_name:' + name,
						'link_position': 'tv_pdp_configurator>' + familyType + '>fbt',
						'event_name': 'select_fbt_' + status + '_' + name
					});
				},
				install: function (action, name) {
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>mount' + action,
						'link_id': name,
						'link_meta': 'link_name:' + name,
						'link_position': 'tv_pdp_configurator>' + familyType + '>mount' + action,
						'event_name': 'select_tv_mount_' + action
					});
				},
				tbyb: function (isSelected) {
					var status = isSelected ? 'skip' : 'try now';
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>try before you buy',
						'link_id': 'tbyb',
						'link_meta': 'link_name:tbyb',
						'link_position': 'tv_pdp_configurator>' + familyType + '>tbyb',
						'event_name': 'select_samsung_tbyb_' + status
					});
				},
				tbybAccessories: function (isSelected, id) {
					var status = isSelected ? 'remove' : 'add';
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>tbyb>accessories',
						'link_id': 'tbyb accessories',
						'link_meta': 'link_name:tbyb accessories',
						'link_position': 'tv_pdp_configurator>' + familyType + '>tbyb accessories',
						'event_name': status + 'samsung_tbyb_accessories' + id
					});
				},
				recycleOption: function (isSelected, id) {
					var status = isSelected ? 'remove' : 'add';
					window.utag && window.utag.link({
						'link_cat': 'tv_pdp_configurator>recycle>manufacturer',
						'link_id': 'recycle manufacturer',
						'link_meta': 'link_name:recycle manufacturer',
						'link_position': 'tv_pdp_configurator>recycle manufacturer',
						'event_name': status + 'samsung_recycle_manufacturer' + id
					});
				},
				bopisDeliveryHide: function () {
					window.utag && window.utag.link({
						'link_cat': 'bopis',
						'link_id': 'deliveryzippickerhide',
						'link_meta': 'deliveryzippickerhide',
						'link_position': 'buds2>bopis>deliveryzippickerhide'
					});
				},
				bopisDeliveryZipGo: function (zipcode) {
					window.utag && window.utag.link({
						'link_cat': 'bopis',
						'link_id': 'deliveryZipPickerGo_' + zipcode,
						'link_meta': 'deliveryZipPickerGo_' + zipcode,
						'link_position': 'buds2>bopis>deliveryZipPickerGo'
					});
				},
				bopisStorerNameClick: function (name) {
					var zipcode = $('.product-details__info-results').find('#deliveryZip').text();
					var pickupInfo = $('.product-details__info-results').find('.inStorePickUpDetails .pickUpMessage').text();
					var bopisEnabled = (pickupInfo == 'Pickup unavailable for this ZIP' || pickupInfo == 'Not available for pickup' || $('.product-details__info-results').find('.inStorePickUp').hasClass('notAvailable')) ? 'N' : 'Y'
					window.utag && window.utag.link({
						'link_cat': 'pdp',
						'link_id': 'change store',
						'link_position': 'summary',
						'event_name': 'change_store',
						'product_id': self.bopis.sku,
						'zip_code': zipcode,
						'pickup_info': '[' + pickupInfo + ']',
						'store_name': '[' + name + ']',
						'bopis_enable': bopisEnabled
					});
				},
				bopisDeliveryZipClick: function (name) {

					var deliveryInfo = $('.product-details__info-results').find('.deliveryDetails .pickUpMessage').text();
					var pickupInfo = $('.product-details__info-results').find('.inStorePickUpDetails .pickUpMessage').text();
					var storeName = $('.product-details__info-results').find('.inStorePickUpDetails .storeName').text();
					var bopisEnabled = (pickupInfo == 'Pickup unavailable for this ZIP' || pickupInfo == 'Not available for pickup' || $('.product-details__info-results').find('.inStorePickUp').hasClass('notAvailable')) ? 'N' : 'Y';
					window.utag && window.utag.link({
						'link_cat': 'pdp',
						'link_id': 'update zip code',
						'link_position': 'summary',
						'event_name': 'update_zip_code',
						'product_id': self.bopis.sku,
						'zip_code': name ,
						'delivery_info': '[' + deliveryInfo + ']',
						'pickup_info': '[' + pickupInfo + ']',
						'store_name': '[' + storeName + ']',
						'bopis_enable': bopisEnabled
					});
				},
				paymentPlan: function (name) {
					window.utag && window.utag.link({
						'link_cat': 'pdp>payment',
						'link_id':  name,
						'link_meta': 'link_name:' + name,
						'link_position': 'payment',
						'event_name': 'select_' + name + '_click'
					});
				},
				paymentPlanMonthly: function (month) {
					const { productName, productSku } = window.util_get_productName_and_sku();
					window.utag && window.utag.link({
						'link_cat': 'pdp>payment>monthly-payment',
						'link_id': 'monthly_payment_plan_' + month + '_month',
						'link_meta': 'link_name:payment_plan_' + month + '_month',
						'link_position': 'payment>monthly-payment',
						'event_name': 'select_monthlypayment_plan_' + month + '_month_click',
						'product_name' : productName,
						'product_id' : productSku
					});
				},
			}
		})();

		function getValueFromURL(key) {
			var qs = window.location.search.split('+').join(' ');
			var params = {};
			var re = /[?&]?([^=]+)=([^&]*)/g;
			var tokens
			while (tokens = re.exec(qs)) {
				params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);
			}
			return params[key];
		}

		var taggingOnLoad = function (fn) {
			if (window.utag) fn();
			else setTimeout(function () { taggingOnLoad(fn) }, 1000);
		}
		taggingOnLoad(self.tagging.land);

		self.init();

		$(window).one('tvPdpConfUnmount', function () {
			$(document).off('finishEppPrice');
			$(document).off('exitStoreSummaryReset');
			$(window).off('scroll resize', stickTop);
			delete window.AEMapp.PDPv2.instance;
		});
	}

	if ($('input[name=bundleMode]').val() != 'true') {
		new TVPdpConf();
	} else {
		window.AEMapp.PDPv2 = {
			init: function (pdpUrl, modelCode) {
				window.AEMapp.tvPdpConf.deviceAdapter.showSpinner();
				$.ajax({
					type: 'GET',
					dataType: "html",
					url: pdpUrl + '_jcr_content/root/responsivegrid/product_details.' + modelCode + '.html'
				}).success(function (template) {
					if ($('#pdpApp').attr('sku') == modelCode || $('#pdpApp').attr('sku').replace('/', '-') == modelCode) {
						$('#pdpApp').empty();
						$('<div class="product-details-v2">' + template + '</div>').appendTo($('#pdpApp'));
						window.AEMapp.PDPv2.instance = new TVPdpConf();
						if ($('head script[src*="en_US/bv.js"]').length == 0) {
							(function (a, b, c, d) {
								var src = (window.location.href.indexOf('www') > -1 || window.location.href.indexOf("origincl") > -1) ? "https://apps.bazaarvoice.com/deployments/samsung/main_site/production/en_US/bv.js" : "https://apps.bazaarvoice.com/deployments/samsung/main_site/staging/en_US/bv.js"
								a = src;
								var host = location.hostname;
								b = document; c = 'script'; d = b.createElement(c); d.src = a; d.type = 'text/java' + c; d.async = true;
								a = b.getElementsByTagName(c)[0]; a.parentNode.insertBefore(d, a);
							})();
						}
						$.ajax({
							type: 'GET',
							dataType: 'html',
							url: pdpUrl + '_jcr_content/root/responsivegrid/fb-api/'
						}).then(function (data) {
							$('#pdpApp').append(data);
							window.AEMapp.tvPdpConf.featureBenefitInit && window.AEMapp.tvPdpConf.featureBenefitInit();
							window.AEMapp.tvPdpConf.primarySelectionInit && window.AEMapp.tvPdpConf.primarySelectionInit();
							window.smg && window.smg.aem && window.smg.aem.components && window.smg.aem.components.marketing &&
								window.smg.aem.components.marketing.gallery && window.smg.aem.components.marketing.gallery.init($('body'));
						})
					}
				});
			},
			unmount: function () {
				$(window).trigger('tvPdpConfUnmount');
			}
		};
	}

	if (window.location.href.indexOf("/us/shop/s23-fe-bundle/") > -1) {
		$('.product-details__info-tradein-buds').hide();
	}
	// SCOM-24330 Temp solution for SKUwise offer removal
	//SCOM-47952
	const modelCodeInstall = $(".product-details-v2").find('.product-details__info-sku').text() ?? '';
	const removeInstallFreeCodes = [
		'QN75QN850CFXZA',
		'BNDL-1707843007350',
		'BNDL-1707842460821',
		'BNDL-1707842790924',
		'BNDL-1719860809519',
        'BNDL-1719861091861',
        'BNDL-1719861431368',
        'BNDL-1719512604584',
        'BNDL-1719514768002',
        'BNDL-1719516437419',
        'BNDL-1719516783055',
        'BNDL-1719517939356',
        'BNDL-1719518533681',
        'BNDL-1720472209219',
        'BNDL-1720472812410',
        'BNDL-1720473339252',
        'BNDL-1720473626585',
        'BNDL-1720473830617',
        'BNDL-1720467777793',
        'BNDL-1720469670962',
        'BNDL-1720470351669',
        'BNDL-1720470550947',
        'BNDL-1720471754019',
        'BNDL-1720471980487',
        'BNDL-1720459450127',
        'BNDL-1720461002717'
	]

	if (removeInstallFreeCodes.includes(modelCodeInstall)) {
		$('.product-details__info-install').remove();
	}

	// Buzzer Bundle Price Update
	(function priceUpdate() {
		var sku = self && self.$el && self.$el.find('.product-details__info-sku').eq(0).text();
		if(sku){
			if (sku != 'BNDL-1740080475149' || window.location.href.indexOf('buzzer-beater-bundle-bndl-1740080475149') == -1) return;
			if (!window.$) setTimeout(priceUpdate, 250);
		
			let total_price = 0;
			let display_price = 0;
			let total_savings = 0;
			const apiURL = window.location.href.indexOf('www.samsung.com') > -1 ? 'https://www.samsung.com/us/api/ecom/v4/price-engine/product-pricing/_fetch-current-price' : 'https://us.ecom-stg.samsung.com/v4/price-engine/product-pricing/_fetch-current-price';
			const data = {
				"sku": [sku || "BNDL-1740080475149"]
			};
			const options = {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify(data),
			}
			function formatPrice(price) {
				return price.toLocaleString('en-US', {
					style: 'decimal',
					minimumFractionDigits: 0,
					maximumFractionDigits: 2
				});
			}
			fetch(apiURL, options)
				.then(response => response.json())
				.then(data => {
					if (data && data.length) {
						const priceData = data[0];
						total_price = priceData.list_price.value
						display_price = priceData.sale_price.value;
						total_savings = total_price - display_price;
		
						// Hiding Tv Mounts
						$('.install__wrapper').hide();

						// Hiding additional reviews
						// $('.product-details__info-review').hide();
		
						// PDP PRICE MANIPULATIONS
						// Summary Price
						$('.product-details__info-results .summary__row-price .epp-price').attr('content', display_price);
						$('.product-details__info-results .summary__row-price .epp-suggested').attr('content', total_price);
						$('.product-details__info-results .summary__row-price .epp-price').text(formatPrice(display_price));
						$('.product-details__info-results .summary__row-price .epp-suggested').text(formatPrice(total_price));
						$('.product-details__info-results .summary__total .lg .total').text(formatPrice(display_price));
						$('.product-details__info-results .summary__total .epp-suggested').text(formatPrice(total_price));
						$('.product-details__info-results .summary__saving .total__saving').text(formatPrice(total_savings));
		
						// Payment Methods
						$('.product-details__info-purchase .product-details__info-purchase-card').each(function () {
							const payment = $(this).data('payment');
							if (payment == 'PayinFull') {
								$(this).find('.product-details__info-purchase-card-bottom .price').text(formatPrice(display_price));
							} else if (payment == 'klarna_splitpay4') {
								$(this).find('.product-details__info-purchase-card-bottom .price').text(formatPrice(display_price / 4));
							}
						});
		
						// Navbar Price
						$('.product-top-nav__info .epp-price').text(formatPrice(display_price));
						$('.product-top-nav__info .epp-suggested').text(`$${formatPrice(total_price)}`);
		
						$('#pdp-page').data('retailprice', `${display_price | 0}`);
						$('#pdp-page').data('price', `${total_price | 0}`);
					}
				})
				.catch(error => console.error(error));
		}
	})();
}(jQuery, window));
;(function($, window, undefined) {
    'use strict';

    function initialize(){
        if($('.multi-column-container').length > 0){
            $('.multi-column-container .column-wrapper h4').matchHeight({byRow:true});
            $('.multi-column-container .column-wrapper .column-wrapper__desc').matchHeight({byRow:true});
        }
    }

    initialize();

})(jQuery, window);



(function($, window, undefined) {

    var compare = $('.compare-json').data('compare-json');
    function convertToWords(str){
      var splitedWords = str.split('-');
      for (var i = 0; i < splitedWords.length; i++) {
        splitedWords[i] = splitedWords[i].charAt(0).toUpperCase() + splitedWords[i].slice(1);
      }
      return splitedWords.join(' ');
    }
    
    function addRowToTable(specDescription){
      var word = convertToWords(specDescription)
      specDescription = specDescription.replace(/([a-z])([A-Z])/g, "$1-$2").replace(/[\s_]+/g, '-').toLowerCase();
      // var row = `<ul class='compare-row'>
      //   <div class='row-desc'>${word}</div>
      //   <li class='compare-spec-detail' id="column1-${specDescription}"></li>
      //   <li class='compare-spec-detail' id="column2-${specDescription}"></li>
      //   <li class='compare-spec-detail' id="column3-${specDescription}"></li>
      // </ul>`
    
      var row = document.createElement('ul');
      row.setAttribute('class','compare-row');
      var rowDesc = document.createElement('div')
      rowDesc.setAttribute('class','row-desc')
      rowDesc.innerHTML = word
      row.append(rowDesc)
      
      var liItem1 = document.createElement('li')
      liItem1.setAttribute('id',"column1-"+specDescription);
      liItem1.setAttribute('class','compare-spec-detail');
      var liItem2 = document.createElement('li')
      liItem2.setAttribute('id',"column2-"+specDescription);
      liItem2.setAttribute('class','compare-spec-detail');
      var liItem3 = document.createElement('li')
      liItem3.setAttribute('id',"column3-"+specDescription);
      liItem3.setAttribute('class','compare-spec-detail');
    
      row.append(liItem1)
      row.append(liItem2)
      row.append(liItem3)
    
      $('.compare-table').append(row)
    }
    
    function column1Change(selected){
      var selectedProductSpecs = compare.column1[selected.value]
      mapDataToTable(selectedProductSpecs, 'column1', specsDescription)
    }

    function column2Change(selected){
      var selectedProductSpecs = compare.column2[selected.value]
      mapDataToTable(selectedProductSpecs, 'column2', specsDescription)
      
    }
    
    function column3Change(selected) {
      var selectedProductSpecs = compare.column3[selected.value]
      mapDataToTable(selectedProductSpecs, 'column3', specsDescription)
     
    }
    
    function mapDataToTable (selectedProduct, column, idClasses) {
      $("#"+column+"-image").attr("src", selectedProduct.basic.image)

      _.map(idClasses,function(item){
        mapDataHelper(selectedProduct, column, item)
        
      })
    }
    
    
    function mapDataHelper(selectedProduct, column, description){
    
      var index = selectedProduct.specs.findIndex(function(element){ return element.name === description})
      var currentSpec = selectedProduct.specs[index]
      var img, specText
    
      description = description.replace(/([a-z])([A-Z])/g, "$1-$2").replace(/[\s_]+/g, '-').toLowerCase();
    
      if(currentSpec.img){
        img = '<img class=detail-image src='+ currentSpec.img +' />'
      }else{
        img=''
      }
      
      if(currentSpec.text){
        specText = '<p>' + currentSpec.text + '</p>'
      }else{
        specText=''
      }
      $('#'+column+'-'+description).html(img+specText)
    
    }
    
    var specsDescription = []
    
    for (key in compare) {
      compare[key].forEach(function(element){
        _.map(element.specs,function(item){
          if (!specsDescription.includes(item.name) && item.name) {
            specsDescription.push(item.name)
          }
        })
      });
    }
    

    _.map(specsDescription,function(item){
      addRowToTable(item)
    })
    
    for (key in compare) {
      var columnItems = compare[key]
      _.map(columnItems,function(item,index){
        $('#'+ key).append( "<option value=" + index + ">" + item.basic.ctaText + "</option>")
      })
    
    }
    
    if(compare){
      mapDataToTable(compare.column1[0], 'column1', specsDescription)
      mapDataToTable(compare.column2[0], 'column2', specsDescription)
      mapDataToTable(compare.column3[0], 'column3', specsDescription)
      $('.compare-json').show();
    }
      
    var column1Selection = $('.compare-json').find('.compare-table #column1')
    var column2Selection = $('.compare-json').find('.compare-table #column2')
    var column3Selection = $('.compare-json').find('.compare-table #column3')
    
    
    column1Selection.change(function(){
      column1Change(this)
    })
    column2Selection.change(function(){
      column2Change(this)
    })
    column3Selection.change(function(){
      column3Change(this)
    })
    
 })(jQuery, window);
 
/*!
 * samsung.com - Phase2 - gallery-marketing Component
 * src : js/src/smg/aem/components/marketing/ma-g-c-gallery/js/ma-g-c-gallery.smg.js
 *
 * @version 1.0.0
 * @since 2017.01.04
 * @update 2017.11.23 - carousel library change (slick)
 */
;(function (win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.components) {
		win.smg.aem.components = {};
	}

	if('undefined' === typeof win.smg.aem.components.marketing) {
		win.smg.aem.components.marketing = {};
	}

	// Static Values
	var V_STATIC = win.smg.aem.varStatic,
		// Utility Script
		UTIL = win.smg.aem.util,
		// Custom Events
		CST_EVENT = win.smg.aem.customEvent;

	var namespace = win.smg.aem.components.marketing;

	namespace.gallery = (function() {

		var defParams = {
			wrap : '.ma-g-c-gallery',
			dimmed : '.s-layer-dimmed',
			mainCarousel : {
				container : '.slick-container',
				wrap : '.js-main-ma-g-c-carousel',
				linkImg : '.s-slick-img',
				disclaimer : '.ma-g-c-gallery__disclaimer-list',
				disclaimerActive : 'slick-slide-active',
				slickOpts : {
					rtl : $('html').hasClass('rtl'),
					dots : true,
					useTransform : true,
					infinite : false,
					speed : 500,
					arrows : true,
					slidesToShow : 1,
					slidesToScroll : 1,
					responsive: [
						{
							breakpoint: V_STATIC.RESPONSIVE.MOBILE.WIDTH + 1,
							settings: {
								arrows: false
							}
						}
					]
				}
			},
			popupCarousel : {
				container : '.slick-layer-container',
				containerClose: '.s-marketing-close',
				wrap : '.js-popup-ma-g-c-carousel',
				closeBtn : '.s-marketing-close',
				galleryFigure: '.ma-g-c-gallery__figure',
				popupVideoPlay: '.ma-g-c-gallery__figure .js-pop-btn',
				popupVideoClose: '.js-pop-close',
				slickOpts : {
					rtl : $('html').hasClass('rtl'),
					dots : false,
					useTransform : true,
					infinite : false,
					speed : 500,
					arrows : true,
					slidesToShow : 1,
					slidesToScroll : 1
				}
			}
		};
		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;
				this.opts = UTIL.def(defParams, (args || {}));

				this.setElements();
				this.setMainImgData();
				this.setBindEvents();
				this.setSlick();
			},
			setElements : function() {
				this.isShiftTabKey = false;
				this.isLayerFocus = true;
				this.isPopupSlickMove = false;
				this.wrap = this.container.find(this.opts.wrap);
				this.dimmed = this.wrap.find(this.opts.dimmed);
				this.setMainElms();
				this.setPopupElms();
			},
			setMainElms : function() {
				this.opts.mainCarousel.slickOpts.speed = this.container.hasClass(V_STATIC.SUPPORT.TOUCH_DEVICE) ? 150 : 500;
				this.mainCarousel = this.wrap.find(this.opts.mainCarousel.wrap);
				this.linkImg = this.mainCarousel.find(this.opts.mainCarousel.linkImg);
			},
			setPopupElms : function() {
				this.opts.popupCarousel.slickOpts.speed = this.container.hasClass(V_STATIC.SUPPORT.TOUCH_DEVICE) ? 150 : 500;
				this.layer = this.wrap.find(this.opts.popupCarousel.container);
				this.closeBtn = this.layer.find(this.opts.popupCarousel.closeBtn);
				this.popupVideoPlay = this.wrap.find(this.opts.popupCarousel.popupVideoPlay);
				this.popupVideoClose = this.wrap.find(this.opts.popupCarousel.popupVideoClose);
				this.containerClose = this.wrap.find(this.opts.popupCarousel.containerClose);
			},
			setMainImgData : function() {
				var carousels = this.mainCarousel,
					carousel, 
					linkImgs;
				for(var i = 0; i < carousels.length; i++) {
					carousel = this.mainCarousel.eq(i);
					linkImgs = carousel.find(this.opts.mainCarousel.linkImg);
					for(var prop = 0; prop < linkImgs.length; prop++) {
						(function(prop) {
							linkImgs.eq(prop).attr('data-img-index', prop);
						})(prop)
					}
				}
			},
			setBindEvents : function() {
				this.mainCarousel.on('click', this.opts.mainCarousel.linkImg, $.proxy(this.onClickSlideItem, this));
				this.layer.on('click', this.opts.popupCarousel.closeBtn, $.proxy(this.onClickCloseBtn, this));
				this.layer.on('focusin click', '.js-loop-hidden', $.proxy(this.onFocusLoopTempLink, this));
				//this.popupVideoPlay.off('click.magcgallery').on('click.magcgallery', $.proxy(this.popupVideoPlayHandler, this));
				this.popupVideoClose.off('click.magcgallery').on('click.magcgallery', $.proxy(this.popupVideoCloseHandler, this));
				this.containerClose.off('click.magcgallery').on('click.magcgallery', $.proxy(this.containerCloseHandler, this))
				this.wrap.on('keydown', this.opts.layer, $.proxy(this.onKeypressLayer, this));
				this.wrap.off('click.magcgallery').on('click.magcgallery', this.opts.popupCarousel.popupVideoPlay, $.proxy(this.popupVideoPlayHandler, this));
				$(win).on('resize', $.proxy(this.onResize, this));
			},
			onResize : function() {
				var carousel;
				for(var i = 0; i < this.mainCarousel.length; i++) {
					carousel = this.mainCarousel.eq(i);
					if(carousel.hasClass('slick-initialized')) {
						carousel.slick('setPosition');
					}
				}
			},
			onKeypressLayer : function(e) {
				if(e.shiftKey && this.isLayerFocus) {
					$(this.opts.wrap).find(this.opts.popupCarousel.container + ':visible').find('.temp-link-next').focus();
					this.isLayerFocus = false;
					return;
				}
				if (e.keyCode === 9 && !e.shiftKey) {
					this.isLayerFocus = false;
					this.isShiftTabKey = false;
				}
				if (e.keyCode === 9 && e.shiftKey) {
					this.isLayerFocus = false;
					this.isShiftTabKey = true;
				}
			},
			onClickSlideItem : function(e) {
				e.preventDefault();
				var current = $(e.currentTarget),
					index = current.attr('data-img-index'),
					component = current.closest(this.opts.wrap),
					dimmed = component.find(this.opts.dimmed),
					layer = component.find(this.opts.popupCarousel.container),
					innerPlayBtn = null,
					layerCarousel = layer.find(this.opts.popupCarousel.wrap);

				this.setLayer('open', dimmed, layer, index);
				if(layerCarousel.hasClass('slick-initialized')) {
					innerPlayBtn = layerCarousel.find('.slick-slide').eq(index).find(this.opts.popupCarousel.popupVideoPlay);
					if (innerPlayBtn) {
						innerPlayBtn.trigger('click');
					}
					$('body').addClass(V_STATIC.CSS.LAYER_OPENED);
					layerCarousel.slick('setPosition').slick('slickGoTo', index, true);
				}
				this.pauseAutoSlide(component);
			},
			pauseAutoSlide : function(targetCarousel) {
				var targetBtn = targetCarousel.find('.slick-dots-autoplay > button');
				if (!targetBtn.length) {return;}
				targetCarousel.find(this.opts.mainCarousel.wrap).slick('slickPause');
				targetBtn.removeClass('s-autoplay-pause');
				targetBtn.addClass('s-autoplay-play');
			},
			playAutoSlide : function(targetCarousel) {
				var targetBtn = targetCarousel.find('.slick-dots-autoplay > button');
				if (!targetBtn.length) {return;}
				targetCarousel.slick('slickPlay');
				targetBtn.removeClass('s-autoplay-play');
				targetBtn.addClass('s-autoplay-pause');
			},
			popupVideoPlayHandler : function(e) {
				var tar = $(e.currentTarget),
					figure = tar.closest(this.opts.popupCarousel.galleryFigure),
					layer = tar.closest(this.opts.popupCarousel.container),
					layerCarousel = tar.closest(this.opts.popupCarousel.wrap),
					targetVideo = figure.find('.s-video-container');
				
				if(targetVideo.is(':visible')) {
					e.stopImmediatePropagation();
				}
				
				if (!this.isPopupSlickMove) {
					this.setPopupSlickDragBlock(layer, layerCarousel, figure);
				} else {
					e.stopPropagation();
				}
			},
			popupSlickBeforeChange: function() {
				this.isPopupSlickMove = true;
			},
			popupSlickAfterChange: function() {
				this.isPopupSlickMove = false;
			},
			setPopupSlickDragBlock : function(slickContainer, carousel, figure) {
				slickContainer.addClass('s-disabled-nav');
				carousel.slick('setOption', 'draggable', false);
				carousel.slick('setOption', 'swipe', false);
				carousel.addClass('s-video-on');
				figure.addClass('s-video-on');
			},
			setPopupSlickDragRelease : function(slickContainer, carousel, figure) {
				slickContainer.removeClass('s-disabled-nav');
				carousel.slick('setOption', 'draggable', true);
				carousel.slick('setOption', 'swipe', true);
				carousel.removeClass('s-video-on');
				figure.removeClass('s-video-on');
			},
			popupVideoCloseHandler : function(e) {
				var tar = $(e.currentTarget),
					figure = tar.closest(this.opts.popupCarousel.galleryFigure),
					layer = tar.closest(this.opts.popupCarousel.container),
					layerCarousel = tar.closest(this.opts.popupCarousel.wrap);

				this.setPopupSlickDragRelease(layer, layerCarousel, figure);
			},
			containerCloseHandler : function(e) {
				var tar = $(e.currentTarget),
					component = tar.closest(this.opts.popupCarousel.container),
					figure = component.find(this.opts.popupCarousel.galleryFigure),
					layerCarousel = component.find(this.opts.popupCarousel.wrap),
					activeVideo = layerCarousel.find('.slick-active').find('.video-area_5');
			
				if (activeVideo.length) {
					if (activeVideo.is(':visible')) {
						activeVideo.find('.js-pop-close').trigger('click');
					}
				}

				this.setPopupSlickDragRelease(component, layerCarousel, figure);
				$('body').removeClass(V_STATIC.CSS.LAYER_OPENED);

				this.playAutoSlide(tar.closest('.ma-g-c-gallery').find('.js-main-ma-g-c-carousel'));
			},
			setLayer : function(type, dimmed, layer, index) {
				if(type == 'open') {
					dimmed.show();
					layer.prepend('<a href="#" class="js-loop-hidden temp-link-prev"></a>')
						.append('<a href="#" class="js-loop-hidden temp-link-next"></a>')
						.attr('data-main-index', index)
						.show()
						.find('.temp-link-prev').focus();
				} else {
					dimmed.hide();
					layer.removeAttr('data-main-index')
						.removeAttr('tabIndex')
						.hide()
						.find('.js-loop-hidden').remove();
				}
				this.setContentLayerClass(type);
			},
			setContentLayerClass : function(type) {
				var contentWrap = $('#content'),
					changeClass = 'js-slick-layer';
				if(type == 'open') {
					contentWrap.addClass(changeClass);
				} else {
					contentWrap.removeClass(changeClass);
				}
			},
			onFocusLoopTempLink: function(e) {
				e.preventDefault();
				if(e.type == 'focusin') {
					var current = $(e.currentTarget),
						layer = current.closest(this.opts.popupCarousel.container),
						closeBtn = layer.find(this.opts.popupCarousel.closeBtn),
						nextArrow = layer.find('.slick-next'),
						prevArrow = layer.find('.slick-prev');

					if(this.isLayerFocus) {
						return;
					}

					if(this.isShiftTabKey) {
						closeBtn.focus();
					} else {
						if(prevArrow.length && !prevArrow.hasClass('slick-disabled')) {
							prevArrow.focus();
						}else if(nextArrow.length && !nextArrow.hasClass('slick-disabled')) {
							nextArrow.focus();
						}
					}
				}
			},
			onClickCloseBtn : function(e) {
				e.preventDefault();
				var current = $(e.currentTarget),
					component = current.closest(this.opts.wrap),
					dimmed = component.find(this.opts.dimmed),
					figure = component.find(this.opts.galleryFigure),
					layer = current.closest(this.opts.popupCarousel.container),
					layerCarousel = layer.find(this.opts.popupCarousel.wrap),
					index = layer.attr('data-main-index');

				this.setLayer('close', dimmed, layer, index);
				component.find('li:not(.slick-cloned)').find('a[data-img-index=' + index + ']').focus();

				this.isLayerFocus = true;
				this.isShiftTabKey = false;

				this.setPopupSlickDragRelease(layer, layerCarousel, figure);
			},
			setSlick : function() {
				var mainCarousel, popupCarousel;
				for(var i = 0; i < this.wrap.length; i++) {
					mainCarousel = this.wrap.eq(i).find(this.opts.mainCarousel.wrap);
					popupCarousel = this.wrap.eq(i).find(this.opts.popupCarousel.wrap);
					this.setMainSlick(mainCarousel);
					this.setPopupSlick(popupCarousel);
				}
			},
			setMainSlick : function(carousel) {
				for(var i=0; i<this.mainCarousel.length; i++){
					if(!this.mainCarousel.eq(i).hasClass('slick-initialized')){
						var changeOpt = UTIL.slickOptionControlFuncs.changeOpt(this.mainCarousel.eq(i), this.opts.mainCarousel.slickOpts);
						this.mainCarousel.eq(i).slick(changeOpt).on('afterChange', $.proxy(this.onAfterChangeMainCarousel, this));
						UTIL.slickOptionControlFuncs.setToggleButton(this.mainCarousel.eq(i));
					}
				}
			},
			onAfterChangeMainCarousel : function(e, slick, currentSlide) {

				var nextArrow = $(slick.$nextArrow),
					prevArrow = $(slick.$prevArrow),
					disclaimer = $(slick.$slider).closest(this.opts.wrap).find(this.opts.mainCarousel.disclaimer),
					disclaimerLi = disclaimer.find('li').eq(currentSlide);

				this.changeDisclaimer(disclaimer, disclaimerLi);
			},
			changeDisclaimer : function(disclaimer, disclaimerLi) {
				if (disclaimer.length) {
					if(disclaimerLi.text() !== '') {
						disclaimerLi.addClass(this.opts.mainCarousel.disclaimerActive)
									.siblings()
									.removeClass(this.opts.mainCarousel.disclaimerActive);
					} else {
						disclaimerLi.siblings()
									.removeClass(this.opts.mainCarousel.disclaimerActive);
					}
				}
			},
			setPopupSlick : function(carousel) {
				if(!carousel.hasClass('slick-initialized')) {
					if(carousel.children().length > 1) {
						carousel.slick(this.opts.popupCarousel.slickOpts);
						carousel.on('beforeChange', $.proxy(this.popupSlickBeforeChange, this));
						carousel.on('afterChange', $.proxy(this.popupSlickAfterChange, this));
					}
				}
			}
		}

	})();

	$(function() {
		namespace.gallery.init($('body'));
	});
})(window, window.jQuery);

/**
 * Swiper 5.2.0
 * Most modern mobile touch slider and framework with hardware accelerated transitions
 * http://swiperjs.com
 *
 * Copyright 2014-2019 Vladimir Kharlampidi
 *
 * Released under the MIT License
 *
 * Released on: October 26, 2019
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Swiper=t()}(this,(function(){"use strict";var e="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,t="undefined"==typeof window?{document:e,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,i=function(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this};function s(s,a){var r=[],n=0;if(s&&!a&&s instanceof i)return s;if(s)if("string"==typeof s){var o,l,d=s.trim();if(d.indexOf("<")>=0&&d.indexOf(">")>=0){var h="div";for(0===d.indexOf("<li")&&(h="ul"),0===d.indexOf("<tr")&&(h="tbody"),0!==d.indexOf("<td")&&0!==d.indexOf("<th")||(h="tr"),0===d.indexOf("<tbody")&&(h="table"),0===d.indexOf("<option")&&(h="select"),(l=e.createElement(h)).innerHTML=d,n=0;n<l.childNodes.length;n+=1)r.push(l.childNodes[n])}else for(o=a||"#"!==s[0]||s.match(/[ .<>:~]/)?(a||e).querySelectorAll(s.trim()):[e.getElementById(s.trim().split("#")[1])],n=0;n<o.length;n+=1)o[n]&&r.push(o[n])}else if(s.nodeType||s===t||s===e)r.push(s);else if(s.length>0&&s[0].nodeType)for(n=0;n<s.length;n+=1)r.push(s[n]);return new i(r)}function a(e){for(var t=[],i=0;i<e.length;i+=1)-1===t.indexOf(e[i])&&t.push(e[i]);return t}s.fn=i.prototype,s.Class=i,s.Dom7=i;var r={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.add(t[i]);return this},removeClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.remove(t[i]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.toggle(t[i]);return this},attr:function(e,t){var i=arguments;if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var s=0;s<this.length;s+=1)if(2===i.length)this[s].setAttribute(e,t);else for(var a in e)this[s][a]=e[a],this[s].setAttribute(a,e[a]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){var i;if(void 0!==t){for(var s=0;s<this.length;s+=1)(i=this[s]).dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t;return this}if(i=this[0]){if(i.dom7ElementDataStorage&&e in i.dom7ElementDataStorage)return i.dom7ElementDataStorage[e];var a=i.getAttribute("data-"+e);return a||void 0}},transform:function(e){for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransform=e,i.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransitionDuration=e,i.transitionDuration=e}return this},on:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var a=t[0],r=t[1],n=t[2],o=t[3];function l(e){var t=e.target;if(t){var i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),s(t).is(r))n.apply(t,i);else for(var a=s(t).parents(),o=0;o<a.length;o+=1)s(a[o]).is(r)&&n.apply(a[o],i)}}function d(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),n.apply(this,t)}"function"==typeof t[1]&&(a=(e=t)[0],n=e[1],o=e[2],r=void 0),o||(o=!1);for(var h,p=a.split(" "),c=0;c<this.length;c+=1){var u=this[c];if(r)for(h=0;h<p.length;h+=1){var v=p[h];u.dom7LiveListeners||(u.dom7LiveListeners={}),u.dom7LiveListeners[v]||(u.dom7LiveListeners[v]=[]),u.dom7LiveListeners[v].push({listener:n,proxyListener:l}),u.addEventListener(v,l,o)}else for(h=0;h<p.length;h+=1){var f=p[h];u.dom7Listeners||(u.dom7Listeners={}),u.dom7Listeners[f]||(u.dom7Listeners[f]=[]),u.dom7Listeners[f].push({listener:n,proxyListener:d}),u.addEventListener(f,d,o)}}return this},off:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var s=t[0],a=t[1],r=t[2],n=t[3];"function"==typeof t[1]&&(s=(e=t)[0],r=e[1],n=e[2],a=void 0),n||(n=!1);for(var o=s.split(" "),l=0;l<o.length;l+=1)for(var d=o[l],h=0;h<this.length;h+=1){var p=this[h],c=void 0;if(!a&&p.dom7Listeners?c=p.dom7Listeners[d]:a&&p.dom7LiveListeners&&(c=p.dom7LiveListeners[d]),c&&c.length)for(var u=c.length-1;u>=0;u-=1){var v=c[u];r&&v.listener===r?(p.removeEventListener(d,v.proxyListener,n),c.splice(u,1)):r&&v.listener&&v.listener.dom7proxy&&v.listener.dom7proxy===r?(p.removeEventListener(d,v.proxyListener,n),c.splice(u,1)):r||(p.removeEventListener(d,v.proxyListener,n),c.splice(u,1))}}return this},trigger:function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];for(var a=i[0].split(" "),r=i[1],n=0;n<a.length;n+=1)for(var o=a[n],l=0;l<this.length;l+=1){var d=this[l],h=void 0;try{h=new t.CustomEvent(o,{detail:r,bubbles:!0,cancelable:!0})}catch(t){(h=e.createEvent("Event")).initEvent(o,!0,!0),h.detail=r}d.dom7EventData=i.filter((function(e,t){return t>0})),d.dispatchEvent(h),d.dom7EventData=[],delete d.dom7EventData}return this},transitionEnd:function(e){var t,i=["webkitTransitionEnd","transitionend"],s=this;function a(r){if(r.target===this)for(e.call(this,r),t=0;t<i.length;t+=1)s.off(i[t],a)}if(e)for(t=0;t<i.length;t+=1)s.on(i[t],a);return this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var i=this[0],s=i.getBoundingClientRect(),a=e.body,r=i.clientTop||a.clientTop||0,n=i.clientLeft||a.clientLeft||0,o=i===t?t.scrollY:i.scrollTop,l=i===t?t.scrollX:i.scrollLeft;return{top:s.top+o-r,left:s.left+l-n}}return null},css:function(e,i){var s;if(1===arguments.length){if("string"!=typeof e){for(s=0;s<this.length;s+=1)for(var a in e)this[s].style[a]=e[a];return this}if(this[0])return t.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(s=0;s<this.length;s+=1)this[s].style[e]=i;return this}return this},each:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(a){var r,n,o=this[0];if(!o||void 0===a)return!1;if("string"==typeof a){if(o.matches)return o.matches(a);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(a);if(o.msMatchesSelector)return o.msMatchesSelector(a);for(r=s(a),n=0;n<r.length;n+=1)if(r[n]===o)return!0;return!1}if(a===e)return o===e;if(a===t)return o===t;if(a.nodeType||a instanceof i){for(r=a.nodeType?[a]:a,n=0;n<r.length;n+=1)if(r[n]===o)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t,s=this.length;return new i(e>s-1?[]:e<0?(t=s+e)<0?[]:[this[t]]:[this[e]])},append:function(){for(var t,s=[],a=arguments.length;a--;)s[a]=arguments[a];for(var r=0;r<s.length;r+=1){t=s[r];for(var n=0;n<this.length;n+=1)if("string"==typeof t){var o=e.createElement("div");for(o.innerHTML=t;o.firstChild;)this[n].appendChild(o.firstChild)}else if(t instanceof i)for(var l=0;l<t.length;l+=1)this[n].appendChild(t[l]);else this[n].appendChild(t)}return this},prepend:function(t){var s,a;for(s=0;s<this.length;s+=1)if("string"==typeof t){var r=e.createElement("div");for(r.innerHTML=t,a=r.childNodes.length-1;a>=0;a-=1)this[s].insertBefore(r.childNodes[a],this[s].childNodes[0])}else if(t instanceof i)for(a=0;a<t.length;a+=1)this[s].insertBefore(t[a],this[s].childNodes[0]);else this[s].insertBefore(t,this[s].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&s(this[0].nextElementSibling).is(e)?new i([this[0].nextElementSibling]):new i([]):this[0].nextElementSibling?new i([this[0].nextElementSibling]):new i([]):new i([])},nextAll:function(e){var t=[],a=this[0];if(!a)return new i([]);for(;a.nextElementSibling;){var r=a.nextElementSibling;e?s(r).is(e)&&t.push(r):t.push(r),a=r}return new i(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&s(t.previousElementSibling).is(e)?new i([t.previousElementSibling]):new i([]):t.previousElementSibling?new i([t.previousElementSibling]):new i([])}return new i([])},prevAll:function(e){var t=[],a=this[0];if(!a)return new i([]);for(;a.previousElementSibling;){var r=a.previousElementSibling;e?s(r).is(e)&&t.push(r):t.push(r),a=r}return new i(t)},parent:function(e){for(var t=[],i=0;i<this.length;i+=1)null!==this[i].parentNode&&(e?s(this[i].parentNode).is(e)&&t.push(this[i].parentNode):t.push(this[i].parentNode));return s(a(t))},parents:function(e){for(var t=[],i=0;i<this.length;i+=1)for(var r=this[i].parentNode;r;)e?s(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return s(a(t))},closest:function(e){var t=this;return void 0===e?new i([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],s=0;s<this.length;s+=1)for(var a=this[s].querySelectorAll(e),r=0;r<a.length;r+=1)t.push(a[r]);return new i(t)},children:function(e){for(var t=[],r=0;r<this.length;r+=1)for(var n=this[r].childNodes,o=0;o<n.length;o+=1)e?1===n[o].nodeType&&s(n[o]).is(e)&&t.push(n[o]):1===n[o].nodeType&&t.push(n[o]);return new i(a(t))},filter:function(e){for(var t=[],s=0;s<this.length;s+=1)e.call(this[s],s,this[s])&&t.push(this[s]);return new i(t)},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,a;for(i=0;i<e.length;i+=1){var r=s(e[i]);for(a=0;a<r.length;a+=1)this[this.length]=r[a],this.length+=1}return this},styles:function(){return this[0]?t.getComputedStyle(this[0],null):{}}};Object.keys(r).forEach((function(e){s.fn[e]=s.fn[e]||r[e]}));var n={deleteProps:function(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))},nextTick:function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},now:function(){return Date.now()},getTranslate:function(e,i){var s,a,r;void 0===i&&(i="x");var n=t.getComputedStyle(e,null);return t.WebKitCSSMatrix?((a=n.transform||n.webkitTransform).split(",").length>6&&(a=a.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),r=new t.WebKitCSSMatrix("none"===a?"":a)):s=(r=n.MozTransform||n.OTransform||n.MsTransform||n.msTransform||n.transform||n.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===i&&(a=t.WebKitCSSMatrix?r.m41:16===s.length?parseFloat(s[12]):parseFloat(s[4])),"y"===i&&(a=t.WebKitCSSMatrix?r.m42:16===s.length?parseFloat(s[13]):parseFloat(s[5])),a||0},parseUrlQuery:function(e){var i,s,a,r,n={},o=e||t.location.href;if("string"==typeof o&&o.length)for(r=(s=(o=o.indexOf("?")>-1?o.replace(/\S*\?/,""):"").split("&").filter((function(e){return""!==e}))).length,i=0;i<r;i+=1)a=s[i].replace(/#\S+/g,"").split("="),n[decodeURIComponent(a[0])]=void 0===a[1]?void 0:decodeURIComponent(a[1])||"";return n},isObject:function(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object},extend:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i=Object(e[0]),s=1;s<e.length;s+=1){var a=e[s];if(null!=a)for(var r=Object.keys(Object(a)),o=0,l=r.length;o<l;o+=1){var d=r[o],h=Object.getOwnPropertyDescriptor(a,d);void 0!==h&&h.enumerable&&(n.isObject(i[d])&&n.isObject(a[d])?n.extend(i[d],a[d]):!n.isObject(i[d])&&n.isObject(a[d])?(i[d]={},n.extend(i[d],a[d])):i[d]=a[d])}}return i}},o={touch:t.Modernizr&&!0===t.Modernizr.touch||!!(t.navigator.maxTouchPoints>0||"ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),pointerEvents:!!t.PointerEvent&&"maxTouchPoints"in t.navigator&&t.navigator.maxTouchPoints>0,observer:"MutationObserver"in t||"WebkitMutationObserver"in t,passiveListener:function(){var e=!1;try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});t.addEventListener("testPassiveListener",null,i)}catch(e){}return e}(),gestures:"ongesturestart"in t},l=function(e){void 0===e&&(e={});var t=this;t.params=e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach((function(e){t.on(e,t.params.on[e])}))},d={components:{configurable:!0}};l.prototype.on=function(e,t,i){var s=this;if("function"!=typeof t)return s;var a=i?"unshift":"push";return e.split(" ").forEach((function(e){s.eventsListeners[e]||(s.eventsListeners[e]=[]),s.eventsListeners[e][a](t)})),s},l.prototype.once=function(e,t,i){var s=this;if("function"!=typeof t)return s;function a(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];t.apply(s,i),s.off(e,a),a.f7proxy&&delete a.f7proxy}return a.f7proxy=t,s.on(e,a,i)},l.prototype.off=function(e,t){var i=this;return i.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?i.eventsListeners[e]=[]:i.eventsListeners[e]&&i.eventsListeners[e].length&&i.eventsListeners[e].forEach((function(s,a){(s===t||s.f7proxy&&s.f7proxy===t)&&i.eventsListeners[e].splice(a,1)}))})),i):i},l.prototype.emit=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,s,a,r=this;if(!r.eventsListeners)return r;"string"==typeof e[0]||Array.isArray(e[0])?(i=e[0],s=e.slice(1,e.length),a=r):(i=e[0].events,s=e[0].data,a=e[0].context||r);var n=Array.isArray(i)?i:i.split(" ");return n.forEach((function(e){if(r.eventsListeners&&r.eventsListeners[e]){var t=[];r.eventsListeners[e].forEach((function(e){t.push(e)})),t.forEach((function(e){e.apply(a,s)}))}})),r},l.prototype.useModulesParams=function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(i){var s=t.modules[i];s.params&&n.extend(e,s.params)}))},l.prototype.useModules=function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(i){var s=t.modules[i],a=e[i]||{};s.instance&&Object.keys(s.instance).forEach((function(e){var i=s.instance[e];t[e]="function"==typeof i?i.bind(t):i})),s.on&&t.on&&Object.keys(s.on).forEach((function(e){t.on(e,s.on[e])})),s.create&&s.create.bind(t)(a)}))},d.components.set=function(e){this.use&&this.use(e)},l.installModule=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var s=this;s.prototype.modules||(s.prototype.modules={});var a=e.name||Object.keys(s.prototype.modules).length+"_"+n.now();return s.prototype.modules[a]=e,e.proto&&Object.keys(e.proto).forEach((function(t){s.prototype[t]=e.proto[t]})),e.static&&Object.keys(e.static).forEach((function(t){s[t]=e.static[t]})),e.install&&e.install.apply(s,t),s},l.use=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var s=this;return Array.isArray(e)?(e.forEach((function(e){return s.installModule(e)})),s):s.installModule.apply(s,[e].concat(t))},Object.defineProperties(l,d);var h={updateSize:function(){var e,t,i=this.$el;e=void 0!==this.params.width?this.params.width:i[0].clientWidth,t=void 0!==this.params.height?this.params.height:i[0].clientHeight,0===e&&this.isHorizontal()||0===t&&this.isVertical()||(e=e-parseInt(i.css("padding-left"),10)-parseInt(i.css("padding-right"),10),t=t-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10),n.extend(this,{width:e,height:t,size:this.isHorizontal()?e:t}))},updateSlides:function(){var e=this.params,i=this.$wrapperEl,s=this.size,a=this.rtlTranslate,r=this.wrongRTL,o=this.virtual&&e.virtual.enabled,l=o?this.virtual.slides.length:this.slides.length,d=i.children("."+this.params.slideClass),h=o?this.virtual.slides.length:d.length,p=[],c=[],u=[];function v(t){return!e.cssMode||t!==d.length-1}var f=e.slidesOffsetBefore;"function"==typeof f&&(f=e.slidesOffsetBefore.call(this));var m=e.slidesOffsetAfter;"function"==typeof m&&(m=e.slidesOffsetAfter.call(this));var g=this.snapGrid.length,b=this.snapGrid.length,w=e.spaceBetween,y=-f,x=0,T=0;if(void 0!==s){var E,C;"string"==typeof w&&w.indexOf("%")>=0&&(w=parseFloat(w.replace("%",""))/100*s),this.virtualSize=-w,a?d.css({marginLeft:"",marginTop:""}):d.css({marginRight:"",marginBottom:""}),e.slidesPerColumn>1&&(E=Math.floor(h/e.slidesPerColumn)===h/this.params.slidesPerColumn?h:Math.ceil(h/e.slidesPerColumn)*e.slidesPerColumn,"auto"!==e.slidesPerView&&"row"===e.slidesPerColumnFill&&(E=Math.max(E,e.slidesPerView*e.slidesPerColumn)));for(var S,M=e.slidesPerColumn,P=E/M,z=Math.floor(h/e.slidesPerColumn),k=0;k<h;k+=1){C=0;var $=d.eq(k);if(e.slidesPerColumn>1){var L=void 0,I=void 0,D=void 0;if("row"===e.slidesPerColumnFill&&e.slidesPerGroup>1){var O=Math.floor(k/(e.slidesPerGroup*e.slidesPerColumn)),A=k-e.slidesPerColumn*e.slidesPerGroup*O,G=0===O?e.slidesPerGroup:Math.min(Math.ceil((h-O*M*e.slidesPerGroup)/M),e.slidesPerGroup);L=(I=A-(D=Math.floor(A/G))*G+O*e.slidesPerGroup)+D*E/M,$.css({"-webkit-box-ordinal-group":L,"-moz-box-ordinal-group":L,"-ms-flex-order":L,"-webkit-order":L,order:L})}else"column"===e.slidesPerColumnFill?(D=k-(I=Math.floor(k/M))*M,(I>z||I===z&&D===M-1)&&(D+=1)>=M&&(D=0,I+=1)):I=k-(D=Math.floor(k/P))*P;$.css("margin-"+(this.isHorizontal()?"top":"left"),0!==D&&e.spaceBetween&&e.spaceBetween+"px")}if("none"!==$.css("display")){if("auto"===e.slidesPerView){var B=t.getComputedStyle($[0],null),H=$[0].style.transform,N=$[0].style.webkitTransform;if(H&&($[0].style.transform="none"),N&&($[0].style.webkitTransform="none"),e.roundLengths)C=this.isHorizontal()?$.outerWidth(!0):$.outerHeight(!0);else if(this.isHorizontal()){var X=parseFloat(B.getPropertyValue("width")),V=parseFloat(B.getPropertyValue("padding-left")),Y=parseFloat(B.getPropertyValue("padding-right")),F=parseFloat(B.getPropertyValue("margin-left")),W=parseFloat(B.getPropertyValue("margin-right")),R=B.getPropertyValue("box-sizing");C=R&&"border-box"===R?X+F+W:X+V+Y+F+W}else{var q=parseFloat(B.getPropertyValue("height")),j=parseFloat(B.getPropertyValue("padding-top")),K=parseFloat(B.getPropertyValue("padding-bottom")),U=parseFloat(B.getPropertyValue("margin-top")),_=parseFloat(B.getPropertyValue("margin-bottom")),Z=B.getPropertyValue("box-sizing");C=Z&&"border-box"===Z?q+U+_:q+j+K+U+_}H&&($[0].style.transform=H),N&&($[0].style.webkitTransform=N),e.roundLengths&&(C=Math.floor(C))}else C=(s-(e.slidesPerView-1)*w)/e.slidesPerView,e.roundLengths&&(C=Math.floor(C)),d[k]&&(this.isHorizontal()?d[k].style.width=C+"px":d[k].style.height=C+"px");d[k]&&(d[k].swiperSlideSize=C),u.push(C),e.centeredSlides?(y=y+C/2+x/2+w,0===x&&0!==k&&(y=y-s/2-w),0===k&&(y=y-s/2-w),Math.abs(y)<.001&&(y=0),e.roundLengths&&(y=Math.floor(y)),T%e.slidesPerGroup==0&&p.push(y),c.push(y)):(e.roundLengths&&(y=Math.floor(y)),T%e.slidesPerGroup==0&&p.push(y),c.push(y),y=y+C+w),this.virtualSize+=C+w,x=C,T+=1}}if(this.virtualSize=Math.max(this.virtualSize,s)+m,a&&r&&("slide"===e.effect||"coverflow"===e.effect)&&i.css({width:this.virtualSize+e.spaceBetween+"px"}),e.setWrapperSize&&(this.isHorizontal()?i.css({width:this.virtualSize+e.spaceBetween+"px"}):i.css({height:this.virtualSize+e.spaceBetween+"px"})),e.slidesPerColumn>1&&(this.virtualSize=(C+e.spaceBetween)*E,this.virtualSize=Math.ceil(this.virtualSize/e.slidesPerColumn)-e.spaceBetween,this.isHorizontal()?i.css({width:this.virtualSize+e.spaceBetween+"px"}):i.css({height:this.virtualSize+e.spaceBetween+"px"}),e.centeredSlides)){S=[];for(var Q=0;Q<p.length;Q+=1){var J=p[Q];e.roundLengths&&(J=Math.floor(J)),p[Q]<this.virtualSize+p[0]&&S.push(J)}p=S}if(!e.centeredSlides){S=[];for(var ee=0;ee<p.length;ee+=1){var te=p[ee];e.roundLengths&&(te=Math.floor(te)),p[ee]<=this.virtualSize-s&&S.push(te)}p=S,Math.floor(this.virtualSize-s)-Math.floor(p[p.length-1])>1&&p.push(this.virtualSize-s)}if(0===p.length&&(p=[0]),0!==e.spaceBetween&&(this.isHorizontal()?a?d.filter(v).css({marginLeft:w+"px"}):d.filter(v).css({marginRight:w+"px"}):d.filter(v).css({marginBottom:w+"px"})),e.centeredSlides&&e.centeredSlidesBounds){var ie=0;u.forEach((function(t){ie+=t+(e.spaceBetween?e.spaceBetween:0)}));var se=(ie-=e.spaceBetween)-s;p=p.map((function(e){return e<0?-f:e>se?se+m:e}))}if(e.centerInsufficientSlides){var ae=0;if(u.forEach((function(t){ae+=t+(e.spaceBetween?e.spaceBetween:0)})),(ae-=e.spaceBetween)<s){var re=(s-ae)/2;p.forEach((function(e,t){p[t]=e-re})),c.forEach((function(e,t){c[t]=e+re}))}}n.extend(this,{slides:d,snapGrid:p,slidesGrid:c,slidesSizesGrid:u}),h!==l&&this.emit("slidesLengthChange"),p.length!==g&&(this.params.watchOverflow&&this.checkOverflow(),this.emit("snapGridLengthChange")),c.length!==b&&this.emit("slidesGridLengthChange"),(e.watchSlidesProgress||e.watchSlidesVisibility)&&this.updateSlidesOffset()}},updateAutoHeight:function(e){var t,i=[],s=0;if("number"==typeof e?this.setTransition(e):!0===e&&this.setTransition(this.params.speed),"auto"!==this.params.slidesPerView&&this.params.slidesPerView>1)for(t=0;t<Math.ceil(this.params.slidesPerView);t+=1){var a=this.activeIndex+t;if(a>this.slides.length)break;i.push(this.slides.eq(a)[0])}else i.push(this.slides.eq(this.activeIndex)[0]);for(t=0;t<i.length;t+=1)if(void 0!==i[t]){var r=i[t].offsetHeight;s=r>s?r:s}s&&this.$wrapperEl.css("height",s+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this.params,i=this.slides,a=this.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&this.updateSlidesOffset();var r=-e;a&&(r=e),i.removeClass(t.slideVisibleClass),this.visibleSlidesIndexes=[],this.visibleSlides=[];for(var n=0;n<i.length;n+=1){var o=i[n],l=(r+(t.centeredSlides?this.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+t.spaceBetween);if(t.watchSlidesVisibility){var d=-(r-o.swiperSlideOffset),h=d+this.slidesSizesGrid[n];(d>=0&&d<this.size-1||h>1&&h<=this.size||d<=0&&h>=this.size)&&(this.visibleSlides.push(o),this.visibleSlidesIndexes.push(n),i.eq(n).addClass(t.slideVisibleClass))}o.progress=a?-l:l}this.visibleSlides=s(this.visibleSlides)}},updateProgress:function(e){if(void 0===e){var t=this.rtlTranslate?-1:1;e=this&&this.translate&&this.translate*t||0}var i=this.params,s=this.maxTranslate()-this.minTranslate(),a=this.progress,r=this.isBeginning,o=this.isEnd,l=r,d=o;0===s?(a=0,r=!0,o=!0):(r=(a=(e-this.minTranslate())/s)<=0,o=a>=1),n.extend(this,{progress:a,isBeginning:r,isEnd:o}),(i.watchSlidesProgress||i.watchSlidesVisibility)&&this.updateSlidesProgress(e),r&&!l&&this.emit("reachBeginning toEdge"),o&&!d&&this.emit("reachEnd toEdge"),(l&&!r||d&&!o)&&this.emit("fromEdge"),this.emit("progress",a)},updateSlidesClasses:function(){var e,t=this.slides,i=this.params,s=this.$wrapperEl,a=this.activeIndex,r=this.realIndex,n=this.virtual&&i.virtual.enabled;t.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(e=n?this.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+a+'"]'):t.eq(a)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+r+'"]').addClass(i.slideDuplicateActiveClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+r+'"]').addClass(i.slideDuplicateActiveClass));var o=e.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===o.length&&(o=t.eq(0)).addClass(i.slideNextClass);var l=e.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===l.length&&(l=t.eq(-1)).addClass(i.slidePrevClass),i.loop&&(o.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),l.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(e){var t,i=this.rtlTranslate?this.translate:-this.translate,s=this.slidesGrid,a=this.snapGrid,r=this.params,o=this.activeIndex,l=this.realIndex,d=this.snapIndex,h=e;if(void 0===h){for(var p=0;p<s.length;p+=1)void 0!==s[p+1]?i>=s[p]&&i<s[p+1]-(s[p+1]-s[p])/2?h=p:i>=s[p]&&i<s[p+1]&&(h=p+1):i>=s[p]&&(h=p);r.normalizeSlideIndex&&(h<0||void 0===h)&&(h=0)}if((t=a.indexOf(i)>=0?a.indexOf(i):Math.floor(h/r.slidesPerGroup))>=a.length&&(t=a.length-1),h!==o){var c=parseInt(this.slides.eq(h).attr("data-swiper-slide-index")||h,10);n.extend(this,{snapIndex:t,realIndex:c,previousIndex:o,activeIndex:h}),this.emit("activeIndexChange"),this.emit("snapIndexChange"),l!==c&&this.emit("realIndexChange"),(this.initialized||this.runCallbacksOnInit)&&this.emit("slideChange")}else t!==d&&(this.snapIndex=t,this.emit("snapIndexChange"))},updateClickedSlide:function(e){var t=this.params,i=s(e.target).closest("."+t.slideClass)[0],a=!1;if(i)for(var r=0;r<this.slides.length;r+=1)this.slides[r]===i&&(a=!0);if(!i||!a)return this.clickedSlide=void 0,void(this.clickedIndex=void 0);this.clickedSlide=i,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(s(i).attr("data-swiper-slide-index"),10):this.clickedIndex=s(i).index(),t.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}};var p={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this.params,i=this.rtlTranslate,s=this.translate,a=this.$wrapperEl;if(t.virtualTranslate)return i?-s:s;if(t.cssMode)return s;var r=n.getTranslate(a[0],e);return i&&(r=-r),r||0},setTranslate:function(e,t){var i=this.rtlTranslate,s=this.params,a=this.$wrapperEl,r=this.wrapperEl,n=this.progress,o=0,l=0;this.isHorizontal()?o=i?-e:e:l=e,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),s.cssMode?r[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-o:-l:s.virtualTranslate||a.transform("translate3d("+o+"px, "+l+"px, 0px)"),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?o:l;var d=this.maxTranslate()-this.minTranslate();(0===d?0:(e-this.minTranslate())/d)!==n&&this.updateProgress(e),this.emit("setTranslate",this.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,i,s,a){var r;void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),void 0===s&&(s=!0);var n=this,o=n.params,l=n.wrapperEl;if(n.animating&&o.preventInteractionOnTransition)return!1;var d,h=n.minTranslate(),p=n.maxTranslate();if(d=s&&e>h?h:s&&e<p?p:e,n.updateProgress(d),o.cssMode){var c=n.isHorizontal();return 0===t?l[c?"scrollLeft":"scrollTop"]=-d:l.scrollTo?l.scrollTo(((r={})[c?"left":"top"]=-d,r.behavior="smooth",r)):l[c?"scrollLeft":"scrollTop"]=-d,!0}return 0===t?(n.setTransition(0),n.setTranslate(d),i&&(n.emit("beforeTransitionStart",t,a),n.emit("transitionEnd"))):(n.setTransition(t),n.setTranslate(d),i&&(n.emit("beforeTransitionStart",t,a),n.emit("transitionStart")),n.animating||(n.animating=!0,n.onTranslateToWrapperTransitionEnd||(n.onTranslateToWrapperTransitionEnd=function(e){n&&!n.destroyed&&e.target===this&&(n.$wrapperEl[0].removeEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.$wrapperEl[0].removeEventListener("webkitTransitionEnd",n.onTranslateToWrapperTransitionEnd),n.onTranslateToWrapperTransitionEnd=null,delete n.onTranslateToWrapperTransitionEnd,i&&n.emit("transitionEnd"))}),n.$wrapperEl[0].addEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.$wrapperEl[0].addEventListener("webkitTransitionEnd",n.onTranslateToWrapperTransitionEnd))),!0}};var c={setTransition:function(e,t){this.params.cssMode||this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,s=this.params,a=this.previousIndex;if(!s.cssMode){s.autoHeight&&this.updateAutoHeight();var r=t;if(r||(r=i>a?"next":i<a?"prev":"reset"),this.emit("transitionStart"),e&&i!==a){if("reset"===r)return void this.emit("slideResetTransitionStart");this.emit("slideChangeTransitionStart"),"next"===r?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,s=this.previousIndex,a=this.params;if(this.animating=!1,!a.cssMode){this.setTransition(0);var r=t;if(r||(r=i>s?"next":i<s?"prev":"reset"),this.emit("transitionEnd"),e&&i!==s){if("reset"===r)return void this.emit("slideResetTransitionEnd");this.emit("slideChangeTransitionEnd"),"next"===r?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd")}}}};var u={slideTo:function(e,t,i,s){var a;void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var r=this,n=e;n<0&&(n=0);var o=r.params,l=r.snapGrid,d=r.slidesGrid,h=r.previousIndex,p=r.activeIndex,c=r.rtlTranslate,u=r.wrapperEl;if(r.animating&&o.preventInteractionOnTransition)return!1;var v=Math.floor(n/o.slidesPerGroup);v>=l.length&&(v=l.length-1),(p||o.initialSlide||0)===(h||0)&&i&&r.emit("beforeSlideChangeStart");var f,m=-l[v];if(r.updateProgress(m),o.normalizeSlideIndex)for(var g=0;g<d.length;g+=1)-Math.floor(100*m)>=Math.floor(100*d[g])&&(n=g);if(r.initialized&&n!==p){if(!r.allowSlideNext&&m<r.translate&&m<r.minTranslate())return!1;if(!r.allowSlidePrev&&m>r.translate&&m>r.maxTranslate()&&(p||0)!==n)return!1}if(f=n>p?"next":n<p?"prev":"reset",c&&-m===r.translate||!c&&m===r.translate)return r.updateActiveIndex(n),o.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),"slide"!==o.effect&&r.setTranslate(m),"reset"!==f&&(r.transitionStart(i,f),r.transitionEnd(i,f)),!1;if(o.cssMode){var b=r.isHorizontal();return 0===t?u[b?"scrollLeft":"scrollTop"]=-m:u.scrollTo?u.scrollTo(((a={})[b?"left":"top"]=-m,a.behavior="smooth",a)):u[b?"scrollLeft":"scrollTop"]=-m,!0}return 0===t?(r.setTransition(0),r.setTranslate(m),r.updateActiveIndex(n),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,s),r.transitionStart(i,f),r.transitionEnd(i,f)):(r.setTransition(t),r.setTranslate(m),r.updateActiveIndex(n),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,s),r.transitionStart(i,f),r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.$wrapperEl[0].removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].removeEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(i,f))}),r.$wrapperEl[0].addEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].addEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,i,s){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var a=e;return this.params.loop&&(a+=this.loopedSlides),this.slideTo(a,t,i,s)},slideNext:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var s=this.params,a=this.animating;return s.loop?!a&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,this.slideTo(this.activeIndex+s.slidesPerGroup,e,t,i)):this.slideTo(this.activeIndex+s.slidesPerGroup,e,t,i)},slidePrev:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var s=this.params,a=this.animating,r=this.snapGrid,n=this.slidesGrid,o=this.rtlTranslate;if(s.loop){if(a)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}function l(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var d,h=l(o?this.translate:-this.translate),p=r.map((function(e){return l(e)})),c=(n.map((function(e){return l(e)})),r[p.indexOf(h)],r[p.indexOf(h)-1]);return void 0===c&&s.cssMode&&r.forEach((function(e){!c&&h>=e&&(c=e)})),void 0!==c&&(d=n.indexOf(c))<0&&(d=this.activeIndex-1),this.slideTo(d,e,t,i)},slideReset:function(e,t,i){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,i)},slideToClosest:function(e,t,i,s){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===s&&(s=.5);var a=this.activeIndex,r=Math.floor(a/this.params.slidesPerGroup),n=this.rtlTranslate?this.translate:-this.translate;if(n>=this.snapGrid[r]){var o=this.snapGrid[r];n-o>(this.snapGrid[r+1]-o)*s&&(a+=this.params.slidesPerGroup)}else{var l=this.snapGrid[r-1];n-l<=(this.snapGrid[r]-l)*s&&(a-=this.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,this.snapGrid.length-1),this.slideTo(a,e,t,i)},slideToClickedSlide:function(){var e,t=this,i=t.params,a=t.$wrapperEl,r="auto"===i.slidesPerView?t.slidesPerViewDynamic():i.slidesPerView,o=t.clickedIndex;if(i.loop){if(t.animating)return;e=parseInt(s(t.clickedSlide).attr("data-swiper-slide-index"),10),i.centeredSlides?o<t.loopedSlides-r/2||o>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),o=a.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),n.nextTick((function(){t.slideTo(o)}))):t.slideTo(o):o>t.slides.length-r?(t.loopFix(),o=a.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),n.nextTick((function(){t.slideTo(o)}))):t.slideTo(o)}else t.slideTo(o)}};var v={loopCreate:function(){var t=this,i=t.params,a=t.$wrapperEl;a.children("."+i.slideClass+"."+i.slideDuplicateClass).remove();var r=a.children("."+i.slideClass);if(i.loopFillGroupWithBlank){var n=i.slidesPerGroup-r.length%i.slidesPerGroup;if(n!==i.slidesPerGroup){for(var o=0;o<n;o+=1){var l=s(e.createElement("div")).addClass(i.slideClass+" "+i.slideBlankClass);a.append(l)}r=a.children("."+i.slideClass)}}"auto"!==i.slidesPerView||i.loopedSlides||(i.loopedSlides=r.length),t.loopedSlides=Math.ceil(parseFloat(i.loopedSlides||i.slidesPerView,10)),t.loopedSlides+=i.loopAdditionalSlides,t.loopedSlides>r.length&&(t.loopedSlides=r.length);var d=[],h=[];r.each((function(e,i){var a=s(i);e<t.loopedSlides&&h.push(i),e<r.length&&e>=r.length-t.loopedSlides&&d.push(i),a.attr("data-swiper-slide-index",e)}));for(var p=0;p<h.length;p+=1)a.append(s(h[p].cloneNode(!0)).addClass(i.slideDuplicateClass));for(var c=d.length-1;c>=0;c-=1)a.prepend(s(d[c].cloneNode(!0)).addClass(i.slideDuplicateClass))},loopFix:function(){var e,t=this.activeIndex,i=this.slides,s=this.loopedSlides,a=this.allowSlidePrev,r=this.allowSlideNext,n=this.snapGrid,o=this.rtlTranslate;this.allowSlidePrev=!0,this.allowSlideNext=!0;var l=-n[t]-this.getTranslate();if(t<s)e=i.length-3*s+t,e+=s,this.slideTo(e,0,!1,!0)&&0!==l&&this.setTranslate((o?-this.translate:this.translate)-l);else if(t>=i.length-s){e=-i.length+t+s,e+=s,this.slideTo(e,0,!1,!0)&&0!==l&&this.setTranslate((o?-this.translate:this.translate)-l)}this.allowSlidePrev=a,this.allowSlideNext=r},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,i=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass+",."+t.slideClass+"."+t.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}};var f={setGrabCursor:function(e){if(!(o.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked||this.params.cssMode)){var t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){o.touch||this.params.watchOverflow&&this.isLocked||this.params.cssMode||(this.el.style.cursor="")}};var m,g,b,w,y,x,T,E,C,S,M,P,z,k,$,L={appendSlide:function(e){var t=this.$wrapperEl,i=this.params;if(i.loop&&this.loopDestroy(),"object"==typeof e&&"length"in e)for(var s=0;s<e.length;s+=1)e[s]&&t.append(e[s]);else t.append(e);i.loop&&this.loopCreate(),i.observer&&o.observer||this.update()},prependSlide:function(e){var t=this.params,i=this.$wrapperEl,s=this.activeIndex;t.loop&&this.loopDestroy();var a=s+1;if("object"==typeof e&&"length"in e){for(var r=0;r<e.length;r+=1)e[r]&&i.prepend(e[r]);a=s+e.length}else i.prepend(e);t.loop&&this.loopCreate(),t.observer&&o.observer||this.update(),this.slideTo(a,0,!1)},addSlide:function(e,t){var i=this.$wrapperEl,s=this.params,a=this.activeIndex;s.loop&&(a-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+s.slideClass));var r=this.slides.length;if(e<=0)this.prependSlide(t);else if(e>=r)this.appendSlide(t);else{for(var n=a>e?a+1:a,l=[],d=r-1;d>=e;d-=1){var h=this.slides.eq(d);h.remove(),l.unshift(h)}if("object"==typeof t&&"length"in t){for(var p=0;p<t.length;p+=1)t[p]&&i.append(t[p]);n=a>e?a+t.length:a}else i.append(t);for(var c=0;c<l.length;c+=1)i.append(l[c]);s.loop&&this.loopCreate(),s.observer&&o.observer||this.update(),s.loop?this.slideTo(n+this.loopedSlides,0,!1):this.slideTo(n,0,!1)}},removeSlide:function(e){var t=this.params,i=this.$wrapperEl,s=this.activeIndex;t.loop&&(s-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+t.slideClass));var a,r=s;if("object"==typeof e&&"length"in e){for(var n=0;n<e.length;n+=1)a=e[n],this.slides[a]&&this.slides.eq(a).remove(),a<r&&(r-=1);r=Math.max(r,0)}else a=e,this.slides[a]&&this.slides.eq(a).remove(),a<r&&(r-=1),r=Math.max(r,0);t.loop&&this.loopCreate(),t.observer&&o.observer||this.update(),t.loop?this.slideTo(r+this.loopedSlides,0,!1):this.slideTo(r,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},I=(m=t.navigator.platform,g=t.navigator.userAgent,b={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!t.cordova&&!t.phonegap),phonegap:!(!t.cordova&&!t.phonegap),electron:!1},w=t.screen.width,y=t.screen.height,x=g.match(/(Android);?[\s\/]+([\d.]+)?/),T=g.match(/(iPad).*OS\s([\d_]+)/),E=g.match(/(iPod)(.*OS\s([\d_]+))?/),C=!T&&g.match(/(iPhone\sOS|iOS)\s([\d_]+)/),S=g.indexOf("MSIE ")>=0||g.indexOf("Trident/")>=0,M=g.indexOf("Edge/")>=0,P=g.indexOf("Gecko/")>=0&&g.indexOf("Firefox/")>=0,z="Win32"===m,k=g.toLowerCase().indexOf("electron")>=0,$="MacIntel"===m,!T&&$&&o.touch&&(1024===w&&1366===y||834===w&&1194===y||834===w&&1112===y||768===w&&1024===y)&&(T=g.match(/(Version)\/([\d.]+)/),$=!1),b.ie=S,b.edge=M,b.firefox=P,x&&!z&&(b.os="android",b.osVersion=x[2],b.android=!0,b.androidChrome=g.toLowerCase().indexOf("chrome")>=0),(T||C||E)&&(b.os="ios",b.ios=!0),C&&!E&&(b.osVersion=C[2].replace(/_/g,"."),b.iphone=!0),T&&(b.osVersion=T[2].replace(/_/g,"."),b.ipad=!0),E&&(b.osVersion=E[3]?E[3].replace(/_/g,"."):null,b.ipod=!0),b.ios&&b.osVersion&&g.indexOf("Version/")>=0&&"10"===b.osVersion.split(".")[0]&&(b.osVersion=g.toLowerCase().split("version/")[1].split(" ")[0]),b.webView=!(!(C||T||E)||!g.match(/.*AppleWebKit(?!.*Safari)/i)&&!t.navigator.standalone)||t.matchMedia&&t.matchMedia("(display-mode: standalone)").matches,b.webview=b.webView,b.standalone=b.webView,b.desktop=!(b.ios||b.android)||k,b.desktop&&(b.electron=k,b.macos=$,b.windows=z,b.macos&&(b.os="macos"),b.windows&&(b.os="windows")),b.pixelRatio=t.devicePixelRatio||1,b);function D(i){var a=this.touchEventsData,r=this.params,o=this.touches;if(!this.animating||!r.preventInteractionOnTransition){var l=i;l.originalEvent&&(l=l.originalEvent);var d=s(l.target);if(("wrapper"!==r.touchEventsTarget||d.closest(this.wrapperEl).length)&&(a.isTouchEvent="touchstart"===l.type,(a.isTouchEvent||!("which"in l)||3!==l.which)&&!(!a.isTouchEvent&&"button"in l&&l.button>0||a.isTouched&&a.isMoved)))if(r.noSwiping&&d.closest(r.noSwipingSelector?r.noSwipingSelector:"."+r.noSwipingClass)[0])this.allowClick=!0;else if(!r.swipeHandler||d.closest(r.swipeHandler)[0]){o.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,o.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;var h=o.currentX,p=o.currentY,c=r.edgeSwipeDetection||r.iOSEdgeSwipeDetection,u=r.edgeSwipeThreshold||r.iOSEdgeSwipeThreshold;if(!c||!(h<=u||h>=t.screen.width-u)){if(n.extend(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=h,o.startY=p,a.touchStartTime=n.now(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,r.threshold>0&&(a.allowThresholdMove=!1),"touchstart"!==l.type){var v=!0;d.is(a.formElements)&&(v=!1),e.activeElement&&s(e.activeElement).is(a.formElements)&&e.activeElement!==d[0]&&e.activeElement.blur();var f=v&&this.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||f)&&l.preventDefault()}this.emit("touchStart",l)}}}}function O(t){var i=this.touchEventsData,a=this.params,r=this.touches,o=this.rtlTranslate,l=t;if(l.originalEvent&&(l=l.originalEvent),i.isTouched){if(!i.isTouchEvent||"mousemove"!==l.type){var d="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),h="touchmove"===l.type?d.pageX:l.pageX,p="touchmove"===l.type?d.pageY:l.pageY;if(l.preventedByNestedSwiper)return r.startX=h,void(r.startY=p);if(!this.allowTouchMove)return this.allowClick=!1,void(i.isTouched&&(n.extend(r,{startX:h,startY:p,currentX:h,currentY:p}),i.touchStartTime=n.now()));if(i.isTouchEvent&&a.touchReleaseOnEdges&&!a.loop)if(this.isVertical()){if(p<r.startY&&this.translate<=this.maxTranslate()||p>r.startY&&this.translate>=this.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(h<r.startX&&this.translate<=this.maxTranslate()||h>r.startX&&this.translate>=this.minTranslate())return;if(i.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&s(l.target).is(i.formElements))return i.isMoved=!0,void(this.allowClick=!1);if(i.allowTouchCallbacks&&this.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){r.currentX=h,r.currentY=p;var c=r.currentX-r.startX,u=r.currentY-r.startY;if(!(this.params.threshold&&Math.sqrt(Math.pow(c,2)+Math.pow(u,2))<this.params.threshold)){var v;if(void 0===i.isScrolling)this.isHorizontal()&&r.currentY===r.startY||this.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:c*c+u*u>=25&&(v=180*Math.atan2(Math.abs(u),Math.abs(c))/Math.PI,i.isScrolling=this.isHorizontal()?v>a.touchAngle:90-v>a.touchAngle);if(i.isScrolling&&this.emit("touchMoveOpposite",l),void 0===i.startMoving&&(r.currentX===r.startX&&r.currentY===r.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){this.allowClick=!1,a.cssMode||l.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&l.stopPropagation(),i.isMoved||(a.loop&&this.loopFix(),i.startTranslate=this.getTranslate(),this.setTransition(0),this.animating&&this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!a.grabCursor||!0!==this.allowSlideNext&&!0!==this.allowSlidePrev||this.setGrabCursor(!0),this.emit("sliderFirstMove",l)),this.emit("sliderMove",l),i.isMoved=!0;var f=this.isHorizontal()?c:u;r.diff=f,f*=a.touchRatio,o&&(f=-f),this.swipeDirection=f>0?"prev":"next",i.currentTranslate=f+i.startTranslate;var m=!0,g=a.resistanceRatio;if(a.touchReleaseOnEdges&&(g=0),f>0&&i.currentTranslate>this.minTranslate()?(m=!1,a.resistance&&(i.currentTranslate=this.minTranslate()-1+Math.pow(-this.minTranslate()+i.startTranslate+f,g))):f<0&&i.currentTranslate<this.maxTranslate()&&(m=!1,a.resistance&&(i.currentTranslate=this.maxTranslate()+1-Math.pow(this.maxTranslate()-i.startTranslate-f,g))),m&&(l.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),a.threshold>0){if(!(Math.abs(f)>a.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,void(r.diff=this.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY)}a.followFinger&&!a.cssMode&&((a.freeMode||a.watchSlidesProgress||a.watchSlidesVisibility)&&(this.updateActiveIndex(),this.updateSlidesClasses()),a.freeMode&&(0===i.velocities.length&&i.velocities.push({position:r[this.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:r[this.isHorizontal()?"currentX":"currentY"],time:n.now()})),this.updateProgress(i.currentTranslate),this.setTranslate(i.currentTranslate))}}}}}else i.startMoving&&i.isScrolling&&this.emit("touchMoveOpposite",l)}function A(e){var t=this,i=t.touchEventsData,s=t.params,a=t.touches,r=t.rtlTranslate,o=t.$wrapperEl,l=t.slidesGrid,d=t.snapGrid,h=e;if(h.originalEvent&&(h=h.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",h),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&s.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);s.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var p,c=n.now(),u=c-i.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(h),t.emit("tap click",h),u<300&&c-i.lastClickTime<300&&t.emit("doubleTap doubleClick",h)),i.lastClickTime=n.now(),n.nextTick((function(){t.destroyed||(t.allowClick=!0)})),!i.isTouched||!i.isMoved||!t.swipeDirection||0===a.diff||i.currentTranslate===i.startTranslate)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,p=s.followFinger?r?t.translate:-t.translate:-i.currentTranslate,!s.cssMode)if(s.freeMode){if(p<-t.minTranslate())return void t.slideTo(t.activeIndex);if(p>-t.maxTranslate())return void(t.slides.length<d.length?t.slideTo(d.length-1):t.slideTo(t.slides.length-1));if(s.freeModeMomentum){if(i.velocities.length>1){var v=i.velocities.pop(),f=i.velocities.pop(),m=v.position-f.position,g=v.time-f.time;t.velocity=m/g,t.velocity/=2,Math.abs(t.velocity)<s.freeModeMinimumVelocity&&(t.velocity=0),(g>150||n.now()-v.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=s.freeModeMomentumVelocityRatio,i.velocities.length=0;var b=1e3*s.freeModeMomentumRatio,w=t.velocity*b,y=t.translate+w;r&&(y=-y);var x,T,E=!1,C=20*Math.abs(t.velocity)*s.freeModeMomentumBounceRatio;if(y<t.maxTranslate())s.freeModeMomentumBounce?(y+t.maxTranslate()<-C&&(y=t.maxTranslate()-C),x=t.maxTranslate(),E=!0,i.allowMomentumBounce=!0):y=t.maxTranslate(),s.loop&&s.centeredSlides&&(T=!0);else if(y>t.minTranslate())s.freeModeMomentumBounce?(y-t.minTranslate()>C&&(y=t.minTranslate()+C),x=t.minTranslate(),E=!0,i.allowMomentumBounce=!0):y=t.minTranslate(),s.loop&&s.centeredSlides&&(T=!0);else if(s.freeModeSticky){for(var S,M=0;M<d.length;M+=1)if(d[M]>-y){S=M;break}y=-(y=Math.abs(d[S]-y)<Math.abs(d[S-1]-y)||"next"===t.swipeDirection?d[S]:d[S-1])}if(T&&t.once("transitionEnd",(function(){t.loopFix()})),0!==t.velocity){if(b=r?Math.abs((-y-t.translate)/t.velocity):Math.abs((y-t.translate)/t.velocity),s.freeModeSticky){var P=Math.abs((r?-y:y)-t.translate),z=t.slidesSizesGrid[t.activeIndex];b=P<z?s.speed:P<2*z?1.5*s.speed:2.5*s.speed}}else if(s.freeModeSticky)return void t.slideToClosest();s.freeModeMomentumBounce&&E?(t.updateProgress(x),t.setTransition(b),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&i.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(s.speed),t.setTranslate(x),o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))}))):t.velocity?(t.updateProgress(y),t.setTransition(b),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))):t.updateProgress(y),t.updateActiveIndex(),t.updateSlidesClasses()}else if(s.freeModeSticky)return void t.slideToClosest();(!s.freeModeMomentum||u>=s.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var k=0,$=t.slidesSizesGrid[0],L=0;L<l.length;L+=s.slidesPerGroup)void 0!==l[L+s.slidesPerGroup]?p>=l[L]&&p<l[L+s.slidesPerGroup]&&(k=L,$=l[L+s.slidesPerGroup]-l[L]):p>=l[L]&&(k=L,$=l[l.length-1]-l[l.length-2]);var I=(p-l[k])/$;if(u>s.longSwipesMs){if(!s.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(I>=s.longSwipesRatio?t.slideTo(k+s.slidesPerGroup):t.slideTo(k)),"prev"===t.swipeDirection&&(I>1-s.longSwipesRatio?t.slideTo(k+s.slidesPerGroup):t.slideTo(k))}else{if(!s.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(h.target===t.navigation.nextEl||h.target===t.navigation.prevEl)?h.target===t.navigation.nextEl?t.slideTo(k+s.slidesPerGroup):t.slideTo(k):("next"===t.swipeDirection&&t.slideTo(k+s.slidesPerGroup),"prev"===t.swipeDirection&&t.slideTo(k))}}}function G(){var e=this.params,t=this.el;if(!t||0!==t.offsetWidth){e.breakpoints&&this.setBreakpoint();var i=this.allowSlideNext,s=this.allowSlidePrev,a=this.snapGrid;this.allowSlideNext=!0,this.allowSlidePrev=!0,this.updateSize(),this.updateSlides(),this.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&this.isEnd&&!this.params.centeredSlides?this.slideTo(this.slides.length-1,0,!1,!0):this.slideTo(this.activeIndex,0,!1,!0),this.autoplay&&this.autoplay.running&&this.autoplay.paused&&this.autoplay.run(),this.allowSlidePrev=s,this.allowSlideNext=i,this.params.watchOverflow&&a!==this.snapGrid&&this.checkOverflow()}}function B(e){this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function H(){var e=this.wrapperEl;this.previousTranslate=this.translate,this.translate=this.isHorizontal()?-e.scrollLeft:-e.scrollTop,-0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();var t=this.maxTranslate()-this.minTranslate();(0===t?0:(this.translate-this.minTranslate())/t)!==this.progress&&this.updateProgress(this.translate),this.emit("setTranslate",this.translate,!1)}var N=!1;function X(){}var V={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},Y={update:h,translate:p,transition:c,slide:u,loop:v,grabCursor:f,manipulation:L,events:{attachEvents:function(){var t=this.params,i=this.touchEvents,s=this.el,a=this.wrapperEl;this.onTouchStart=D.bind(this),this.onTouchMove=O.bind(this),this.onTouchEnd=A.bind(this),t.cssMode&&(this.onScroll=H.bind(this)),this.onClick=B.bind(this);var r=!!t.nested;if(!o.touch&&o.pointerEvents)s.addEventListener(i.start,this.onTouchStart,!1),e.addEventListener(i.move,this.onTouchMove,r),e.addEventListener(i.end,this.onTouchEnd,!1);else{if(o.touch){var n=!("touchstart"!==i.start||!o.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};s.addEventListener(i.start,this.onTouchStart,n),s.addEventListener(i.move,this.onTouchMove,o.passiveListener?{passive:!1,capture:r}:r),s.addEventListener(i.end,this.onTouchEnd,n),i.cancel&&s.addEventListener(i.cancel,this.onTouchEnd,n),N||(e.addEventListener("touchstart",X),N=!0)}(t.simulateTouch&&!I.ios&&!I.android||t.simulateTouch&&!o.touch&&I.ios)&&(s.addEventListener("mousedown",this.onTouchStart,!1),e.addEventListener("mousemove",this.onTouchMove,r),e.addEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&s.addEventListener("click",this.onClick,!0),t.cssMode&&a.addEventListener("scroll",this.onScroll),this.on(I.ios||I.android?"resize orientationchange observerUpdate":"resize observerUpdate",G,!0)},detachEvents:function(){var t=this.params,i=this.touchEvents,s=this.el,a=this.wrapperEl,r=!!t.nested;if(!o.touch&&o.pointerEvents)s.removeEventListener(i.start,this.onTouchStart,!1),e.removeEventListener(i.move,this.onTouchMove,r),e.removeEventListener(i.end,this.onTouchEnd,!1);else{if(o.touch){var n=!("onTouchStart"!==i.start||!o.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};s.removeEventListener(i.start,this.onTouchStart,n),s.removeEventListener(i.move,this.onTouchMove,r),s.removeEventListener(i.end,this.onTouchEnd,n),i.cancel&&s.removeEventListener(i.cancel,this.onTouchEnd,n)}(t.simulateTouch&&!I.ios&&!I.android||t.simulateTouch&&!o.touch&&I.ios)&&(s.removeEventListener("mousedown",this.onTouchStart,!1),e.removeEventListener("mousemove",this.onTouchMove,r),e.removeEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&s.removeEventListener("click",this.onClick,!0),t.cssMode&&a.removeEventListener("scroll",this.onScroll),this.off(I.ios||I.android?"resize orientationchange observerUpdate":"resize observerUpdate",G)}},breakpoints:{setBreakpoint:function(){var e=this.activeIndex,t=this.initialized,i=this.loopedSlides;void 0===i&&(i=0);var s=this.params,a=this.$el,r=s.breakpoints;if(r&&(!r||0!==Object.keys(r).length)){var o=this.getBreakpoint(r);if(o&&this.currentBreakpoint!==o){var l=o in r?r[o]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerColumn"].forEach((function(e){var t=l[e];void 0!==t&&(l[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}));var d=l||this.originalParams,h=s.slidesPerColumn>1,p=d.slidesPerColumn>1;h&&!p?a.removeClass(s.containerModifierClass+"multirow "+s.containerModifierClass+"multirow-column"):!h&&p&&(a.addClass(s.containerModifierClass+"multirow"),"column"===d.slidesPerColumnFill&&a.addClass(s.containerModifierClass+"multirow-column"));var c=d.direction&&d.direction!==s.direction,u=s.loop&&(d.slidesPerView!==s.slidesPerView||c);c&&t&&this.changeDirection(),n.extend(this.params,d),n.extend(this,{allowTouchMove:this.params.allowTouchMove,allowSlideNext:this.params.allowSlideNext,allowSlidePrev:this.params.allowSlidePrev}),this.currentBreakpoint=o,u&&t&&(this.loopDestroy(),this.loopCreate(),this.updateSlides(),this.slideTo(e-i+this.loopedSlides,0,!1)),this.emit("breakpoint",d)}}},getBreakpoint:function(e){if(e){var i=!1,s=[];Object.keys(e).forEach((function(e){s.push(e)})),s.sort((function(e,t){return parseInt(e,10)-parseInt(t,10)}));for(var a=0;a<s.length;a+=1){var r=s[a];r<=t.innerWidth&&(i=r)}return i||"max"}}},checkOverflow:{checkOverflow:function(){var e=this.params,t=this.isLocked,i=this.slides.length>0&&e.slidesOffsetBefore+e.spaceBetween*(this.slides.length-1)+this.slides[0].offsetWidth*this.slides.length;e.slidesOffsetBefore&&e.slidesOffsetAfter&&i?this.isLocked=i<=this.size:this.isLocked=1===this.snapGrid.length,this.allowSlideNext=!this.isLocked,this.allowSlidePrev=!this.isLocked,t!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock"),t&&t!==this.isLocked&&(this.isEnd=!1,this.navigation.update())}},classes:{addClasses:function(){var e=this.classNames,t=this.params,i=this.rtl,s=this.$el,a=[];a.push("initialized"),a.push(t.direction),t.freeMode&&a.push("free-mode"),t.autoHeight&&a.push("autoheight"),i&&a.push("rtl"),t.slidesPerColumn>1&&(a.push("multirow"),"column"===t.slidesPerColumnFill&&a.push("multirow-column")),I.android&&a.push("android"),I.ios&&a.push("ios"),t.cssMode&&a.push("css-mode"),a.forEach((function(i){e.push(t.containerModifierClass+i)})),s.addClass(e.join(" "))},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" "))}},images:{loadImage:function(e,i,s,a,r,n){var o;function l(){n&&n()}e.complete&&r?l():i?((o=new t.Image).onload=l,o.onerror=l,a&&(o.sizes=a),s&&(o.srcset=s),i&&(o.src=i)):l()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var i=0;i<e.imagesToLoad.length;i+=1){var s=e.imagesToLoad[i];e.loadImage(s,s.currentSrc||s.getAttribute("src"),s.srcset||s.getAttribute("srcset"),s.sizes||s.getAttribute("sizes"),!0,t)}}}},F={},W=function(e){function t(){for(var i,a,r,l=[],d=arguments.length;d--;)l[d]=arguments[d];1===l.length&&l[0].constructor&&l[0].constructor===Object?r=l[0]:(a=(i=l)[0],r=i[1]),r||(r={}),r=n.extend({},r),a&&!r.el&&(r.el=a),e.call(this,r),Object.keys(Y).forEach((function(e){Object.keys(Y[e]).forEach((function(i){t.prototype[i]||(t.prototype[i]=Y[e][i])}))}));var h=this;void 0===h.modules&&(h.modules={}),Object.keys(h.modules).forEach((function(e){var t=h.modules[e];if(t.params){var i=Object.keys(t.params)[0],s=t.params[i];if("object"!=typeof s||null===s)return;if(!(i in r&&"enabled"in s))return;!0===r[i]&&(r[i]={enabled:!0}),"object"!=typeof r[i]||"enabled"in r[i]||(r[i].enabled=!0),r[i]||(r[i]={enabled:!1})}}));var p=n.extend({},V);h.useModulesParams(p),h.params=n.extend({},p,F,r),h.originalParams=n.extend({},h.params),h.passedParams=n.extend({},r),h.$=s;var c=s(h.params.el);if(a=c[0]){if(c.length>1){var u=[];return c.each((function(e,i){var s=n.extend({},r,{el:i});u.push(new t(s))})),u}var v,f,m;return a.swiper=h,c.data("swiper",h),a&&a.shadowRoot&&a.shadowRoot.querySelector?(v=s(a.shadowRoot.querySelector("."+h.params.wrapperClass))).children=function(e){return c.children(e)}:v=c.children("."+h.params.wrapperClass),n.extend(h,{$el:c,el:a,$wrapperEl:v,wrapperEl:v[0],classNames:[],slides:s(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===h.params.direction},isVertical:function(){return"vertical"===h.params.direction},rtl:"rtl"===a.dir.toLowerCase()||"rtl"===c.css("direction"),rtlTranslate:"horizontal"===h.params.direction&&("rtl"===a.dir.toLowerCase()||"rtl"===c.css("direction")),wrongRTL:"-webkit-box"===v.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:h.params.allowSlideNext,allowSlidePrev:h.params.allowSlidePrev,touchEvents:(f=["touchstart","touchmove","touchend","touchcancel"],m=["mousedown","mousemove","mouseup"],o.pointerEvents&&(m=["pointerdown","pointermove","pointerup"]),h.touchEventsTouch={start:f[0],move:f[1],end:f[2],cancel:f[3]},h.touchEventsDesktop={start:m[0],move:m[1],end:m[2]},o.touch||!h.params.simulateTouch?h.touchEventsTouch:h.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video",lastClickTime:n.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:h.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),h.useModules(),h.params.init&&h.init(),h}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return t.prototype.slidesPerViewDynamic=function(){var e=this.params,t=this.slides,i=this.slidesGrid,s=this.size,a=this.activeIndex,r=1;if(e.centeredSlides){for(var n,o=t[a].swiperSlideSize,l=a+1;l<t.length;l+=1)t[l]&&!n&&(r+=1,(o+=t[l].swiperSlideSize)>s&&(n=!0));for(var d=a-1;d>=0;d-=1)t[d]&&!n&&(r+=1,(o+=t[d].swiperSlideSize)>s&&(n=!0))}else for(var h=a+1;h<t.length;h+=1)i[h]-i[a]<s&&(r+=1);return r},t.prototype.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,i=e.params;i.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(s(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||s(),i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function s(){var t=e.rtlTranslate?-1*e.translate:e.translate,i=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(i),e.updateActiveIndex(),e.updateSlidesClasses()}},t.prototype.changeDirection=function(e,t){void 0===t&&(t=!0);var i=this.params.direction;return e||(e="horizontal"===i?"vertical":"horizontal"),e===i||"horizontal"!==e&&"vertical"!==e?this:(this.$el.removeClass(""+this.params.containerModifierClass+i).addClass(""+this.params.containerModifierClass+e),this.params.direction=e,this.slides.each((function(t,i){"vertical"===e?i.style.width="":i.style.height=""})),this.emit("changeDirection"),t&&this.update(),this)},t.prototype.init=function(){this.initialized||(this.emit("beforeInit"),this.params.breakpoints&&this.setBreakpoint(),this.addClasses(),this.params.loop&&this.loopCreate(),this.updateSize(),this.updateSlides(),this.params.watchOverflow&&this.checkOverflow(),this.params.grabCursor&&this.setGrabCursor(),this.params.preloadImages&&this.preloadImages(),this.params.loop?this.slideTo(this.params.initialSlide+this.loopedSlides,0,this.params.runCallbacksOnInit):this.slideTo(this.params.initialSlide,0,this.params.runCallbacksOnInit),this.attachEvents(),this.initialized=!0,this.emit("init"))},t.prototype.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var i=this,s=i.params,a=i.$el,r=i.$wrapperEl,o=i.slides;return void 0===i.params||i.destroyed?null:(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),t&&(i.removeClasses(),a.removeAttr("style"),r.removeAttr("style"),o&&o.length&&o.removeClass([s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach((function(e){i.off(e)})),!1!==e&&(i.$el[0].swiper=null,i.$el.data("swiper",null),n.deleteProps(i)),i.destroyed=!0,null)},t.extendDefaults=function(e){n.extend(F,e)},i.extendedDefaults.get=function(){return F},i.defaults.get=function(){return V},i.Class.get=function(){return e},i.$.get=function(){return s},Object.defineProperties(t,i),t}(l),R={name:"device",proto:{device:I},static:{device:I}},q={name:"support",proto:{support:o},static:{support:o}},j={isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:function(){var e=t.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)},K={name:"browser",proto:{browser:j},static:{browser:j}},U={name:"resize",create:function(){var e=this;n.extend(e,{resize:{resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(){t.addEventListener("resize",this.resize.resizeHandler),t.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){t.removeEventListener("resize",this.resize.resizeHandler),t.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},_={func:t.MutationObserver||t.WebkitMutationObserver,attach:function(e,i){void 0===i&&(i={});var s=this,a=new(0,_.func)((function(e){if(1!==e.length){var i=function(){s.emit("observerUpdate",e[0])};t.requestAnimationFrame?t.requestAnimationFrame(i):t.setTimeout(i,0)}else s.emit("observerUpdate",e[0])}));a.observe(e,{attributes:void 0===i.attributes||i.attributes,childList:void 0===i.childList||i.childList,characterData:void 0===i.characterData||i.characterData}),s.observer.observers.push(a)},init:function(){if(o.observer&&this.params.observer){if(this.params.observeParents)for(var e=this.$el.parents(),t=0;t<e.length;t+=1)this.observer.attach(e[t]);this.observer.attach(this.$el[0],{childList:this.params.observeSlideChildren}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(e){e.disconnect()})),this.observer.observers=[]}},Z={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){n.extend(this,{observer:{init:_.init.bind(this),attach:_.attach.bind(this),destroy:_.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},Q={update:function(e){var t=this,i=t.params,s=i.slidesPerView,a=i.slidesPerGroup,r=i.centeredSlides,o=t.params.virtual,l=o.addSlidesBefore,d=o.addSlidesAfter,h=t.virtual,p=h.from,c=h.to,u=h.slides,v=h.slidesGrid,f=h.renderSlide,m=h.offset;t.updateActiveIndex();var g,b,w,y=t.activeIndex||0;g=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",r?(b=Math.floor(s/2)+a+l,w=Math.floor(s/2)+a+d):(b=s+(a-1)+l,w=a+d);var x=Math.max((y||0)-w,0),T=Math.min((y||0)+b,u.length-1),E=(t.slidesGrid[x]||0)-(t.slidesGrid[0]||0);function C(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(n.extend(t.virtual,{from:x,to:T,offset:E,slidesGrid:t.slidesGrid}),p===x&&c===T&&!e)return t.slidesGrid!==v&&E!==m&&t.slides.css(g,E+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:E,from:x,to:T,slides:function(){for(var e=[],t=x;t<=T;t+=1)e.push(u[t]);return e}()}),void C();var S=[],M=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var P=p;P<=c;P+=1)(P<x||P>T)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+P+'"]').remove();for(var z=0;z<u.length;z+=1)z>=x&&z<=T&&(void 0===c||e?M.push(z):(z>c&&M.push(z),z<p&&S.push(z)));M.forEach((function(e){t.$wrapperEl.append(f(u[e],e))})),S.sort((function(e,t){return t-e})).forEach((function(e){t.$wrapperEl.prepend(f(u[e],e))})),t.$wrapperEl.children(".swiper-slide").css(g,E+"px"),C()},renderSlide:function(e,t){var i=this.params.virtual;if(i.cache&&this.virtual.cache[t])return this.virtual.cache[t];var a=i.renderSlide?s(i.renderSlide.call(this,e,t)):s('<div class="'+this.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return a.attr("data-swiper-slide-index")||a.attr("data-swiper-slide-index",t),i.cache&&(this.virtual.cache[t]=a),a},appendSlide:function(e){if("object"==typeof e&&"length"in e)for(var t=0;t<e.length;t+=1)e[t]&&this.virtual.slides.push(e[t]);else this.virtual.slides.push(e);this.virtual.update(!0)},prependSlide:function(e){var t=this.activeIndex,i=t+1,s=1;if(Array.isArray(e)){for(var a=0;a<e.length;a+=1)e[a]&&this.virtual.slides.unshift(e[a]);i=t+e.length,s=e.length}else this.virtual.slides.unshift(e);if(this.params.virtual.cache){var r=this.virtual.cache,n={};Object.keys(r).forEach((function(e){var t=r[e],i=t.attr("data-swiper-slide-index");i&&t.attr("data-swiper-slide-index",parseInt(i,10)+1),n[parseInt(e,10)+s]=t})),this.virtual.cache=n}this.virtual.update(!0),this.slideTo(i,0)},removeSlide:function(e){if(null!=e){var t=this.activeIndex;if(Array.isArray(e))for(var i=e.length-1;i>=0;i-=1)this.virtual.slides.splice(e[i],1),this.params.virtual.cache&&delete this.virtual.cache[e[i]],e[i]<t&&(t-=1),t=Math.max(t,0);else this.virtual.slides.splice(e,1),this.params.virtual.cache&&delete this.virtual.cache[e],e<t&&(t-=1),t=Math.max(t,0);this.virtual.update(!0),this.slideTo(t,0)}},removeAllSlides:function(){this.virtual.slides=[],this.params.virtual.cache&&(this.virtual.cache={}),this.virtual.update(!0),this.slideTo(0,0)}},J={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){n.extend(this,{virtual:{update:Q.update.bind(this),appendSlide:Q.appendSlide.bind(this),prependSlide:Q.prependSlide.bind(this),removeSlide:Q.removeSlide.bind(this),removeAllSlides:Q.removeAllSlides.bind(this),renderSlide:Q.renderSlide.bind(this),slides:this.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){if(this.params.virtual.enabled){this.classNames.push(this.params.containerModifierClass+"virtual");var e={watchSlidesProgress:!0};n.extend(this.params,e),n.extend(this.originalParams,e),this.params.initialSlide||this.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},ee={handle:function(i){var s=this.rtlTranslate,a=i;a.originalEvent&&(a=a.originalEvent);var r=a.keyCode||a.charCode;if(!this.allowSlideNext&&(this.isHorizontal()&&39===r||this.isVertical()&&40===r||34===r))return!1;if(!this.allowSlidePrev&&(this.isHorizontal()&&37===r||this.isVertical()&&38===r||33===r))return!1;if(!(a.shiftKey||a.altKey||a.ctrlKey||a.metaKey||e.activeElement&&e.activeElement.nodeName&&("input"===e.activeElement.nodeName.toLowerCase()||"textarea"===e.activeElement.nodeName.toLowerCase()))){if(this.params.keyboard.onlyInViewport&&(33===r||34===r||37===r||39===r||38===r||40===r)){var n=!1;if(this.$el.parents("."+this.params.slideClass).length>0&&0===this.$el.parents("."+this.params.slideActiveClass).length)return;var o=t.innerWidth,l=t.innerHeight,d=this.$el.offset();s&&(d.left-=this.$el[0].scrollLeft);for(var h=[[d.left,d.top],[d.left+this.width,d.top],[d.left,d.top+this.height],[d.left+this.width,d.top+this.height]],p=0;p<h.length;p+=1){var c=h[p];c[0]>=0&&c[0]<=o&&c[1]>=0&&c[1]<=l&&(n=!0)}if(!n)return}this.isHorizontal()?(33!==r&&34!==r&&37!==r&&39!==r||(a.preventDefault?a.preventDefault():a.returnValue=!1),(34!==r&&39!==r||s)&&(33!==r&&37!==r||!s)||this.slideNext(),(33!==r&&37!==r||s)&&(34!==r&&39!==r||!s)||this.slidePrev()):(33!==r&&34!==r&&38!==r&&40!==r||(a.preventDefault?a.preventDefault():a.returnValue=!1),34!==r&&40!==r||this.slideNext(),33!==r&&38!==r||this.slidePrev()),this.emit("keyPress",r)}},enable:function(){this.keyboard.enabled||(s(e).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(s(e).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},te={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){n.extend(this,{keyboard:{enabled:!1,enable:ee.enable.bind(this),disable:ee.disable.bind(this),handle:ee.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}};var ie={lastScrollTime:n.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return t.navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var t="onwheel"in e;if(!t){var i=e.createElement("div");i.setAttribute("onwheel","return;"),t="function"==typeof i.onwheel}return!t&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(t=e.implementation.hasFeature("Events.wheel","3.0")),t}()?"wheel":"mousewheel"},normalize:function(e){var t=0,i=0,s=0,a=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),s=10*t,a=10*i,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(s=e.deltaX),e.shiftKey&&!s&&(s=a,a=0),(s||a)&&e.deltaMode&&(1===e.deltaMode?(s*=40,a*=40):(s*=800,a*=800)),s&&!t&&(t=s<1?-1:1),a&&!i&&(i=a<1?-1:1),{spinX:t,spinY:i,pixelX:s,pixelY:a}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var i=e,s=this,a=s.params.mousewheel;if(s.params.cssMode&&i.preventDefault(),!s.mouseEntered&&!a.releaseOnEdges)return!0;i.originalEvent&&(i=i.originalEvent);var r=0,o=s.rtlTranslate?-1:1,l=ie.normalize(i);if(a.forceToAxis)if(s.isHorizontal()){if(!(Math.abs(l.pixelX)>Math.abs(l.pixelY)))return!0;r=l.pixelX*o}else{if(!(Math.abs(l.pixelY)>Math.abs(l.pixelX)))return!0;r=l.pixelY}else r=Math.abs(l.pixelX)>Math.abs(l.pixelY)?-l.pixelX*o:-l.pixelY;if(0===r)return!0;if(a.invert&&(r=-r),s.params.freeMode){var d={time:n.now(),delta:Math.abs(r),direction:Math.sign(r)},h=s.mousewheel.lastEventBeforeSnap,p=h&&d.time<h.time+500&&d.delta<=h.delta&&d.direction===h.direction;if(!p){s.mousewheel.lastEventBeforeSnap=void 0,s.params.loop&&s.loopFix();var c=s.getTranslate()+r*a.sensitivity,u=s.isBeginning,v=s.isEnd;if(c>=s.minTranslate()&&(c=s.minTranslate()),c<=s.maxTranslate()&&(c=s.maxTranslate()),s.setTransition(0),s.setTranslate(c),s.updateProgress(),s.updateActiveIndex(),s.updateSlidesClasses(),(!u&&s.isBeginning||!v&&s.isEnd)&&s.updateSlidesClasses(),s.params.freeModeSticky){clearTimeout(s.mousewheel.timeout),s.mousewheel.timeout=void 0;var f=s.mousewheel.recentWheelEvents;f.length>=15&&f.shift();var m=f.length?f[f.length-1]:void 0,g=f[0];if(f.push(d),m&&(d.delta>m.delta||d.direction!==m.direction))f.splice(0);else if(f.length>=15&&d.time-g.time<500&&g.delta-d.delta>=1&&d.delta<=6){var b=r>0?.8:.2;s.mousewheel.lastEventBeforeSnap=d,f.splice(0),s.mousewheel.timeout=n.nextTick((function(){s.slideToClosest(s.params.speed,!0,void 0,b)}),0)}s.mousewheel.timeout||(s.mousewheel.timeout=n.nextTick((function(){s.mousewheel.lastEventBeforeSnap=d,f.splice(0),s.slideToClosest(s.params.speed,!0,void 0,.5)}),500))}if(p||s.emit("scroll",i),s.params.autoplay&&s.params.autoplayDisableOnInteraction&&s.autoplay.stop(),c===s.minTranslate()||c===s.maxTranslate())return!0}}else{if(n.now()-s.mousewheel.lastScrollTime>60)if(r<0)if(s.isEnd&&!s.params.loop||s.animating){if(a.releaseOnEdges)return!0}else s.slideNext(),s.emit("scroll",i);else if(s.isBeginning&&!s.params.loop||s.animating){if(a.releaseOnEdges)return!0}else s.slidePrev(),s.emit("scroll",i);s.mousewheel.lastScrollTime=(new t.Date).getTime()}return i.preventDefault?i.preventDefault():i.returnValue=!1,!1},enable:function(){var e=ie.event();if(this.params.cssMode)return this.wrapperEl.removeEventListener(e,this.mousewheel.handle),!0;if(!e)return!1;if(this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(t=s(this.params.mousewheel.eventsTarged)),t.on("mouseenter",this.mousewheel.handleMouseEnter),t.on("mouseleave",this.mousewheel.handleMouseLeave),t.on(e,this.mousewheel.handle),this.mousewheel.enabled=!0,!0},disable:function(){var e=ie.event();if(this.params.cssMode)return this.wrapperEl.addEventListener(e,this.mousewheel.handle),!0;if(!e)return!1;if(!this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(t=s(this.params.mousewheel.eventsTarged)),t.off(e,this.mousewheel.handle),this.mousewheel.enabled=!1,!0}},se={update:function(){var e=this.params.navigation;if(!this.params.loop){var t=this.navigation,i=t.$nextEl,s=t.$prevEl;s&&s.length>0&&(this.isBeginning?s.addClass(e.disabledClass):s.removeClass(e.disabledClass),s[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass)),i&&i.length>0&&(this.isEnd?i.addClass(e.disabledClass):i.removeClass(e.disabledClass),i[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass))}},onPrevClick:function(e){e.preventDefault(),this.isBeginning&&!this.params.loop||this.slidePrev()},onNextClick:function(e){e.preventDefault(),this.isEnd&&!this.params.loop||this.slideNext()},init:function(){var e,t,i=this.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(e=s(i.nextEl),this.params.uniqueNavElements&&"string"==typeof i.nextEl&&e.length>1&&1===this.$el.find(i.nextEl).length&&(e=this.$el.find(i.nextEl))),i.prevEl&&(t=s(i.prevEl),this.params.uniqueNavElements&&"string"==typeof i.prevEl&&t.length>1&&1===this.$el.find(i.prevEl).length&&(t=this.$el.find(i.prevEl))),e&&e.length>0&&e.on("click",this.navigation.onNextClick),t&&t.length>0&&t.on("click",this.navigation.onPrevClick),n.extend(this.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;t&&t.length&&(t.off("click",this.navigation.onNextClick),t.removeClass(this.params.navigation.disabledClass)),i&&i.length&&(i.off("click",this.navigation.onPrevClick),i.removeClass(this.params.navigation.disabledClass))}},ae={update:function(){var e=this.rtl,t=this.params.pagination;if(t.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var i,a=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,r=this.pagination.$el,n=this.params.loop?Math.ceil((a-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;if(this.params.loop?((i=Math.ceil((this.activeIndex-this.loopedSlides)/this.params.slidesPerGroup))>a-1-2*this.loopedSlides&&(i-=a-2*this.loopedSlides),i>n-1&&(i-=n),i<0&&"bullets"!==this.params.paginationType&&(i=n+i)):i=void 0!==this.snapIndex?this.snapIndex:this.activeIndex||0,"bullets"===t.type&&this.pagination.bullets&&this.pagination.bullets.length>0){var o,l,d,h=this.pagination.bullets;if(t.dynamicBullets&&(this.pagination.bulletSize=h.eq(0)[this.isHorizontal()?"outerWidth":"outerHeight"](!0),r.css(this.isHorizontal()?"width":"height",this.pagination.bulletSize*(t.dynamicMainBullets+4)+"px"),t.dynamicMainBullets>1&&void 0!==this.previousIndex&&(this.pagination.dynamicBulletIndex+=i-this.previousIndex,this.pagination.dynamicBulletIndex>t.dynamicMainBullets-1?this.pagination.dynamicBulletIndex=t.dynamicMainBullets-1:this.pagination.dynamicBulletIndex<0&&(this.pagination.dynamicBulletIndex=0)),o=i-this.pagination.dynamicBulletIndex,d=((l=o+(Math.min(h.length,t.dynamicMainBullets)-1))+o)/2),h.removeClass(t.bulletActiveClass+" "+t.bulletActiveClass+"-next "+t.bulletActiveClass+"-next-next "+t.bulletActiveClass+"-prev "+t.bulletActiveClass+"-prev-prev "+t.bulletActiveClass+"-main"),r.length>1)h.each((function(e,a){var r=s(a),n=r.index();n===i&&r.addClass(t.bulletActiveClass),t.dynamicBullets&&(n>=o&&n<=l&&r.addClass(t.bulletActiveClass+"-main"),n===o&&r.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),n===l&&r.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next"))}));else{var p=h.eq(i),c=p.index();if(p.addClass(t.bulletActiveClass),t.dynamicBullets){for(var u=h.eq(o),v=h.eq(l),f=o;f<=l;f+=1)h.eq(f).addClass(t.bulletActiveClass+"-main");if(this.params.loop)if(c>=h.length-t.dynamicMainBullets){for(var m=t.dynamicMainBullets;m>=0;m-=1)h.eq(h.length-m).addClass(t.bulletActiveClass+"-main");h.eq(h.length-t.dynamicMainBullets-1).addClass(t.bulletActiveClass+"-prev")}else u.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),v.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next");else u.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),v.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next")}}if(t.dynamicBullets){var g=Math.min(h.length,t.dynamicMainBullets+4),b=(this.pagination.bulletSize*g-this.pagination.bulletSize)/2-d*this.pagination.bulletSize,w=e?"right":"left";h.css(this.isHorizontal()?w:"top",b+"px")}}if("fraction"===t.type&&(r.find("."+t.currentClass).text(t.formatFractionCurrent(i+1)),r.find("."+t.totalClass).text(t.formatFractionTotal(n))),"progressbar"===t.type){var y;y=t.progressbarOpposite?this.isHorizontal()?"vertical":"horizontal":this.isHorizontal()?"horizontal":"vertical";var x=(i+1)/n,T=1,E=1;"horizontal"===y?T=x:E=x,r.find("."+t.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+T+") scaleY("+E+")").transition(this.params.speed)}"custom"===t.type&&t.renderCustom?(r.html(t.renderCustom(this,i+1,n)),this.emit("paginationRender",this,r[0])):this.emit("paginationUpdate",this,r[0]),r[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](t.lockClass)}},render:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,i=this.pagination.$el,s="";if("bullets"===e.type){for(var a=this.params.loop?Math.ceil((t-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length,r=0;r<a;r+=1)e.renderBullet?s+=e.renderBullet.call(this,r,e.bulletClass):s+="<"+e.bulletElement+' class="'+e.bulletClass+'"></'+e.bulletElement+">";i.html(s),this.pagination.bullets=i.find("."+e.bulletClass)}"fraction"===e.type&&(s=e.renderFraction?e.renderFraction.call(this,e.currentClass,e.totalClass):'<span class="'+e.currentClass+'"></span> / <span class="'+e.totalClass+'"></span>',i.html(s)),"progressbar"===e.type&&(s=e.renderProgressbar?e.renderProgressbar.call(this,e.progressbarFillClass):'<span class="'+e.progressbarFillClass+'"></span>',i.html(s)),"custom"!==e.type&&this.emit("paginationRender",this.pagination.$el[0])}},init:function(){var e=this,t=e.params.pagination;if(t.el){var i=s(t.el);0!==i.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&i.length>1&&1===e.$el.find(t.el).length&&(i=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&i.addClass(t.clickableClass),i.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(i.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&i.addClass(t.progressbarOppositeClass),t.clickable&&i.on("click","."+t.bulletClass,(function(t){t.preventDefault();var i=s(this).index()*e.params.slidesPerGroup;e.params.loop&&(i+=e.loopedSlides),e.slideTo(i)})),n.extend(e.pagination,{$el:i,el:i[0]}))}},destroy:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),this.pagination.bullets&&this.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click","."+e.bulletClass)}}},re={setTranslate:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=this.rtlTranslate,i=this.progress,s=e.dragSize,a=e.trackSize,r=e.$dragEl,n=e.$el,o=this.params.scrollbar,l=s,d=(a-s)*i;t?(d=-d)>0?(l=s-d,d=0):-d+s>a&&(l=a+d):d<0?(l=s+d,d=0):d+s>a&&(l=a-d),this.isHorizontal()?(r.transform("translate3d("+d+"px, 0, 0)"),r[0].style.width=l+"px"):(r.transform("translate3d(0px, "+d+"px, 0)"),r[0].style.height=l+"px"),o.hide&&(clearTimeout(this.scrollbar.timeout),n[0].style.opacity=1,this.scrollbar.timeout=setTimeout((function(){n[0].style.opacity=0,n.transition(400)}),1e3))}},setTransition:function(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=e.$dragEl,i=e.$el;t[0].style.width="",t[0].style.height="";var s,a=this.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,r=this.size/this.virtualSize,o=r*(a/this.size);s="auto"===this.params.scrollbar.dragSize?a*r:parseInt(this.params.scrollbar.dragSize,10),this.isHorizontal()?t[0].style.width=s+"px":t[0].style.height=s+"px",i[0].style.display=r>=1?"none":"",this.params.scrollbar.hide&&(i[0].style.opacity=0),n.extend(e,{trackSize:a,divider:r,moveDivider:o,dragSize:s}),e.$el[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](this.params.scrollbar.lockClass)}},getPointerPosition:function(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY},setDragPosition:function(e){var t,i=this.scrollbar,s=this.rtlTranslate,a=i.$el,r=i.dragSize,n=i.trackSize,o=i.dragStartPos;t=(i.getPointerPosition(e)-a.offset()[this.isHorizontal()?"left":"top"]-(null!==o?o:r/2))/(n-r),t=Math.max(Math.min(t,1),0),s&&(t=1-t);var l=this.minTranslate()+(this.maxTranslate()-this.minTranslate())*t;this.updateProgress(l),this.setTranslate(l),this.updateActiveIndex(),this.updateSlidesClasses()},onDragStart:function(e){var t=this.params.scrollbar,i=this.scrollbar,s=this.$wrapperEl,a=i.$el,r=i.$dragEl;this.scrollbar.isTouched=!0,this.scrollbar.dragStartPos=e.target===r[0]||e.target===r?i.getPointerPosition(e)-e.target.getBoundingClientRect()[this.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),s.transition(100),r.transition(100),i.setDragPosition(e),clearTimeout(this.scrollbar.dragTimeout),a.transition(0),t.hide&&a.css("opacity",1),this.params.cssMode&&this.$wrapperEl.css("scroll-snap-type","none"),this.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this.scrollbar,i=this.$wrapperEl,s=t.$el,a=t.$dragEl;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),i.transition(0),s.transition(0),a.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this.params.scrollbar,i=this.scrollbar,s=this.$wrapperEl,a=i.$el;this.scrollbar.isTouched&&(this.scrollbar.isTouched=!1,this.params.cssMode&&(this.$wrapperEl.css("scroll-snap-type",""),s.transition("")),t.hide&&(clearTimeout(this.scrollbar.dragTimeout),this.scrollbar.dragTimeout=n.nextTick((function(){a.css("opacity",0),a.transition(400)}),1e3)),this.emit("scrollbarDragEnd",e),t.snapOnRelease&&this.slideToClosest())},enableDraggable:function(){if(this.params.scrollbar.el){var t=this.scrollbar,i=this.touchEventsTouch,s=this.touchEventsDesktop,a=this.params,r=t.$el[0],n=!(!o.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},l=!(!o.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};o.touch?(r.addEventListener(i.start,this.scrollbar.onDragStart,n),r.addEventListener(i.move,this.scrollbar.onDragMove,n),r.addEventListener(i.end,this.scrollbar.onDragEnd,l)):(r.addEventListener(s.start,this.scrollbar.onDragStart,n),e.addEventListener(s.move,this.scrollbar.onDragMove,n),e.addEventListener(s.end,this.scrollbar.onDragEnd,l))}},disableDraggable:function(){if(this.params.scrollbar.el){var t=this.scrollbar,i=this.touchEventsTouch,s=this.touchEventsDesktop,a=this.params,r=t.$el[0],n=!(!o.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},l=!(!o.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};o.touch?(r.removeEventListener(i.start,this.scrollbar.onDragStart,n),r.removeEventListener(i.move,this.scrollbar.onDragMove,n),r.removeEventListener(i.end,this.scrollbar.onDragEnd,l)):(r.removeEventListener(s.start,this.scrollbar.onDragStart,n),e.removeEventListener(s.move,this.scrollbar.onDragMove,n),e.removeEventListener(s.end,this.scrollbar.onDragEnd,l))}},init:function(){if(this.params.scrollbar.el){var e=this.scrollbar,t=this.$el,i=this.params.scrollbar,a=s(i.el);this.params.uniqueNavElements&&"string"==typeof i.el&&a.length>1&&1===t.find(i.el).length&&(a=t.find(i.el));var r=a.find("."+this.params.scrollbar.dragClass);0===r.length&&(r=s('<div class="'+this.params.scrollbar.dragClass+'"></div>'),a.append(r)),n.extend(e,{$el:a,el:a[0],$dragEl:r,dragEl:r[0]}),i.draggable&&e.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},ne={setTransform:function(e,t){var i=this.rtl,a=s(e),r=i?-1:1,n=a.attr("data-swiper-parallax")||"0",o=a.attr("data-swiper-parallax-x"),l=a.attr("data-swiper-parallax-y"),d=a.attr("data-swiper-parallax-scale"),h=a.attr("data-swiper-parallax-opacity");if(o||l?(o=o||"0",l=l||"0"):this.isHorizontal()?(o=n,l="0"):(l=n,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*t*r+"%":o*t*r+"px",l=l.indexOf("%")>=0?parseInt(l,10)*t+"%":l*t+"px",null!=h){var p=h-(h-1)*(1-Math.abs(t));a[0].style.opacity=p}if(null==d)a.transform("translate3d("+o+", "+l+", 0px)");else{var c=d-(d-1)*(1-Math.abs(t));a.transform("translate3d("+o+", "+l+", 0px) scale("+c+")")}},setTranslate:function(){var e=this,t=e.$el,i=e.slides,a=e.progress,r=e.snapGrid;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t,i){e.parallax.setTransform(i,a)})),i.each((function(t,i){var n=i.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(n+=Math.ceil(t/2)-a*(r.length-1)),n=Math.min(Math.max(n,-1),1),s(i).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t,i){e.parallax.setTransform(i,n)}))}))},setTransition:function(e){void 0===e&&(e=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t,i){var a=s(i),r=parseInt(a.attr("data-swiper-parallax-duration"),10)||e;0===e&&(r=0),a.transition(r)}))}},oe={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,s=e.targetTouches[1].pageX,a=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(s-t,2)+Math.pow(a-i,2))},onGestureStart:function(e){var t=this.params.zoom,i=this.zoom,a=i.gesture;if(i.fakeGestureTouched=!1,i.fakeGestureMoved=!1,!o.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.fakeGestureTouched=!0,a.scaleStart=oe.getDistanceBetweenTouches(e)}a.$slideEl&&a.$slideEl.length||(a.$slideEl=s(e.target).closest(".swiper-slide"),0===a.$slideEl.length&&(a.$slideEl=this.slides.eq(this.activeIndex)),a.$imageEl=a.$slideEl.find("img, svg, canvas"),a.$imageWrapEl=a.$imageEl.parent("."+t.containerClass),a.maxRatio=a.$imageWrapEl.attr("data-swiper-zoom")||t.maxRatio,0!==a.$imageWrapEl.length)?(a.$imageEl.transition(0),this.zoom.isScaling=!0):a.$imageEl=void 0},onGestureChange:function(e){var t=this.params.zoom,i=this.zoom,s=i.gesture;if(!o.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;i.fakeGestureMoved=!0,s.scaleMove=oe.getDistanceBetweenTouches(e)}s.$imageEl&&0!==s.$imageEl.length&&(o.gestures?i.scale=e.scale*i.currentScale:i.scale=s.scaleMove/s.scaleStart*i.currentScale,i.scale>s.maxRatio&&(i.scale=s.maxRatio-1+Math.pow(i.scale-s.maxRatio+1,.5)),i.scale<t.minRatio&&(i.scale=t.minRatio+1-Math.pow(t.minRatio-i.scale+1,.5)),s.$imageEl.transform("translate3d(0,0,0) scale("+i.scale+")"))},onGestureEnd:function(e){var t=this.params.zoom,i=this.zoom,s=i.gesture;if(!o.gestures){if(!i.fakeGestureTouched||!i.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!I.android)return;i.fakeGestureTouched=!1,i.fakeGestureMoved=!1}s.$imageEl&&0!==s.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,s.maxRatio),t.minRatio),s.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+i.scale+")"),i.currentScale=i.scale,i.isScaling=!1,1===i.scale&&(s.$slideEl=void 0))},onTouchStart:function(e){var t=this.zoom,i=t.gesture,s=t.image;i.$imageEl&&0!==i.$imageEl.length&&(s.isTouched||(I.android&&e.preventDefault(),s.isTouched=!0,s.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,s.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this.zoom,i=t.gesture,s=t.image,a=t.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(this.allowClick=!1,s.isTouched&&i.$slideEl)){s.isMoved||(s.width=i.$imageEl[0].offsetWidth,s.height=i.$imageEl[0].offsetHeight,s.startX=n.getTranslate(i.$imageWrapEl[0],"x")||0,s.startY=n.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),this.rtl&&(s.startX=-s.startX,s.startY=-s.startY));var r=s.width*t.scale,o=s.height*t.scale;if(!(r<i.slideWidth&&o<i.slideHeight)){if(s.minX=Math.min(i.slideWidth/2-r/2,0),s.maxX=-s.minX,s.minY=Math.min(i.slideHeight/2-o/2,0),s.maxY=-s.minY,s.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!s.isMoved&&!t.isScaling){if(this.isHorizontal()&&(Math.floor(s.minX)===Math.floor(s.startX)&&s.touchesCurrent.x<s.touchesStart.x||Math.floor(s.maxX)===Math.floor(s.startX)&&s.touchesCurrent.x>s.touchesStart.x))return void(s.isTouched=!1);if(!this.isHorizontal()&&(Math.floor(s.minY)===Math.floor(s.startY)&&s.touchesCurrent.y<s.touchesStart.y||Math.floor(s.maxY)===Math.floor(s.startY)&&s.touchesCurrent.y>s.touchesStart.y))return void(s.isTouched=!1)}e.preventDefault(),e.stopPropagation(),s.isMoved=!0,s.currentX=s.touchesCurrent.x-s.touchesStart.x+s.startX,s.currentY=s.touchesCurrent.y-s.touchesStart.y+s.startY,s.currentX<s.minX&&(s.currentX=s.minX+1-Math.pow(s.minX-s.currentX+1,.8)),s.currentX>s.maxX&&(s.currentX=s.maxX-1+Math.pow(s.currentX-s.maxX+1,.8)),s.currentY<s.minY&&(s.currentY=s.minY+1-Math.pow(s.minY-s.currentY+1,.8)),s.currentY>s.maxY&&(s.currentY=s.maxY-1+Math.pow(s.currentY-s.maxY+1,.8)),a.prevPositionX||(a.prevPositionX=s.touchesCurrent.x),a.prevPositionY||(a.prevPositionY=s.touchesCurrent.y),a.prevTime||(a.prevTime=Date.now()),a.x=(s.touchesCurrent.x-a.prevPositionX)/(Date.now()-a.prevTime)/2,a.y=(s.touchesCurrent.y-a.prevPositionY)/(Date.now()-a.prevTime)/2,Math.abs(s.touchesCurrent.x-a.prevPositionX)<2&&(a.x=0),Math.abs(s.touchesCurrent.y-a.prevPositionY)<2&&(a.y=0),a.prevPositionX=s.touchesCurrent.x,a.prevPositionY=s.touchesCurrent.y,a.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+s.currentX+"px, "+s.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,i=e.image,s=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;var a=300,r=300,n=s.x*a,o=i.currentX+n,l=s.y*r,d=i.currentY+l;0!==s.x&&(a=Math.abs((o-i.currentX)/s.x)),0!==s.y&&(r=Math.abs((d-i.currentY)/s.y));var h=Math.max(a,r);i.currentX=o,i.currentY=d;var p=i.width*e.scale,c=i.height*e.scale;i.minX=Math.min(t.slideWidth/2-p/2,0),i.maxX=-i.minX,i.minY=Math.min(t.slideHeight/2-c/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),t.$imageWrapEl.transition(h).transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}},onTransitionEnd:function(){var e=this.zoom,t=e.gesture;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,i,a,r,n,o,l,d,h,p,c,u,v,f,m,g,b=this.zoom,w=this.params.zoom,y=b.gesture,x=b.image;(y.$slideEl||(y.$slideEl=this.clickedSlide?s(this.clickedSlide):this.slides.eq(this.activeIndex),y.$imageEl=y.$slideEl.find("img, svg, canvas"),y.$imageWrapEl=y.$imageEl.parent("."+w.containerClass)),y.$imageEl&&0!==y.$imageEl.length)&&(y.$slideEl.addClass(""+w.zoomedSlideClass),void 0===x.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,i="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=x.touchesStart.x,i=x.touchesStart.y),b.scale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,b.currentScale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,e?(m=y.$slideEl[0].offsetWidth,g=y.$slideEl[0].offsetHeight,a=y.$slideEl.offset().left+m/2-t,r=y.$slideEl.offset().top+g/2-i,l=y.$imageEl[0].offsetWidth,d=y.$imageEl[0].offsetHeight,h=l*b.scale,p=d*b.scale,v=-(c=Math.min(m/2-h/2,0)),f=-(u=Math.min(g/2-p/2,0)),(n=a*b.scale)<c&&(n=c),n>v&&(n=v),(o=r*b.scale)<u&&(o=u),o>f&&(o=f)):(n=0,o=0),y.$imageWrapEl.transition(300).transform("translate3d("+n+"px, "+o+"px,0)"),y.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+b.scale+")"))},out:function(){var e=this.zoom,t=this.params.zoom,i=e.gesture;i.$slideEl||(i.$slideEl=this.clickedSlide?s(this.clickedSlide):this.slides.eq(this.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas"),i.$imageWrapEl=i.$imageEl.parent("."+t.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(e.scale=1,e.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+t.zoomedSlideClass),i.$slideEl=void 0)},enable:function(){var e=this.zoom;if(!e.enabled){e.enabled=!0;var t=!("touchstart"!==this.touchEvents.start||!o.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},i=!o.passiveListener||{passive:!1,capture:!0};o.gestures?(this.$wrapperEl.on("gesturestart",".swiper-slide",e.onGestureStart,t),this.$wrapperEl.on("gesturechange",".swiper-slide",e.onGestureChange,t),this.$wrapperEl.on("gestureend",".swiper-slide",e.onGestureEnd,t)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.on(this.touchEvents.start,".swiper-slide",e.onGestureStart,t),this.$wrapperEl.on(this.touchEvents.move,".swiper-slide",e.onGestureChange,i),this.$wrapperEl.on(this.touchEvents.end,".swiper-slide",e.onGestureEnd,t),this.touchEvents.cancel&&this.$wrapperEl.on(this.touchEvents.cancel,".swiper-slide",e.onGestureEnd,t)),this.$wrapperEl.on(this.touchEvents.move,"."+this.params.zoom.containerClass,e.onTouchMove,i)}},disable:function(){var e=this.zoom;if(e.enabled){this.zoom.enabled=!1;var t=!("touchstart"!==this.touchEvents.start||!o.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},i=!o.passiveListener||{passive:!1,capture:!0};o.gestures?(this.$wrapperEl.off("gesturestart",".swiper-slide",e.onGestureStart,t),this.$wrapperEl.off("gesturechange",".swiper-slide",e.onGestureChange,t),this.$wrapperEl.off("gestureend",".swiper-slide",e.onGestureEnd,t)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.off(this.touchEvents.start,".swiper-slide",e.onGestureStart,t),this.$wrapperEl.off(this.touchEvents.move,".swiper-slide",e.onGestureChange,i),this.$wrapperEl.off(this.touchEvents.end,".swiper-slide",e.onGestureEnd,t),this.touchEvents.cancel&&this.$wrapperEl.off(this.touchEvents.cancel,".swiper-slide",e.onGestureEnd,t)),this.$wrapperEl.off(this.touchEvents.move,"."+this.params.zoom.containerClass,e.onTouchMove,i)}}},le={loadInSlide:function(e,t){void 0===t&&(t=!0);var i=this,a=i.params.lazy;if(void 0!==e&&0!==i.slides.length){var r=i.virtual&&i.params.virtual.enabled?i.$wrapperEl.children("."+i.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):i.slides.eq(e),n=r.find("."+a.elementClass+":not(."+a.loadedClass+"):not(."+a.loadingClass+")");!r.hasClass(a.elementClass)||r.hasClass(a.loadedClass)||r.hasClass(a.loadingClass)||(n=n.add(r[0])),0!==n.length&&n.each((function(e,n){var o=s(n);o.addClass(a.loadingClass);var l=o.attr("data-background"),d=o.attr("data-src"),h=o.attr("data-srcset"),p=o.attr("data-sizes");i.loadImage(o[0],d||l,h,p,!1,(function(){if(null!=i&&i&&(!i||i.params)&&!i.destroyed){if(l?(o.css("background-image",'url("'+l+'")'),o.removeAttr("data-background")):(h&&(o.attr("srcset",h),o.removeAttr("data-srcset")),p&&(o.attr("sizes",p),o.removeAttr("data-sizes")),d&&(o.attr("src",d),o.removeAttr("data-src"))),o.addClass(a.loadedClass).removeClass(a.loadingClass),r.find("."+a.preloaderClass).remove(),i.params.loop&&t){var e=r.attr("data-swiper-slide-index");if(r.hasClass(i.params.slideDuplicateClass)){var s=i.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+i.params.slideDuplicateClass+")");i.lazy.loadInSlide(s.index(),!1)}else{var n=i.$wrapperEl.children("."+i.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');i.lazy.loadInSlide(n.index(),!1)}}i.emit("lazyImageReady",r[0],o[0])}})),i.emit("lazyImageLoad",r[0],o[0])}))}},load:function(){var e=this,t=e.$wrapperEl,i=e.params,a=e.slides,r=e.activeIndex,n=e.virtual&&i.virtual.enabled,o=i.lazy,l=i.slidesPerView;function d(e){if(n){if(t.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(a[e])return!0;return!1}function h(e){return n?s(e).attr("data-swiper-slide-index"):s(e).index()}if("auto"===l&&(l=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+i.slideVisibleClass).each((function(t,i){var a=n?s(i).attr("data-swiper-slide-index"):s(i).index();e.lazy.loadInSlide(a)}));else if(l>1)for(var p=r;p<r+l;p+=1)d(p)&&e.lazy.loadInSlide(p);else e.lazy.loadInSlide(r);if(o.loadPrevNext)if(l>1||o.loadPrevNextAmount&&o.loadPrevNextAmount>1){for(var c=o.loadPrevNextAmount,u=l,v=Math.min(r+u+Math.max(c,u),a.length),f=Math.max(r-Math.max(u,c),0),m=r+l;m<v;m+=1)d(m)&&e.lazy.loadInSlide(m);for(var g=f;g<r;g+=1)d(g)&&e.lazy.loadInSlide(g)}else{var b=t.children("."+i.slideNextClass);b.length>0&&e.lazy.loadInSlide(h(b));var w=t.children("."+i.slidePrevClass);w.length>0&&e.lazy.loadInSlide(h(w))}}},de={LinearSpline:function(e,t){var i,s,a,r,n,o=function(e,t){for(s=-1,i=e.length;i-s>1;)e[a=i+s>>1]<=t?s=a:i=a;return i};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(n=o(this.x,e),r=n-1,(e-this.x[r])*(this.y[n]-this.y[r])/(this.x[n]-this.x[r])+this.y[r]):0},this},getInterpolateFunction:function(e){this.controller.spline||(this.controller.spline=this.params.loop?new de.LinearSpline(this.slidesGrid,e.slidesGrid):new de.LinearSpline(this.snapGrid,e.snapGrid))},setTranslate:function(e,t){var i,s,a=this,r=a.controller.control;function n(e){var t=a.rtlTranslate?-a.translate:a.translate;"slide"===a.params.controller.by&&(a.controller.getInterpolateFunction(e),s=-a.controller.spline.interpolate(-t)),s&&"container"!==a.params.controller.by||(i=(e.maxTranslate()-e.minTranslate())/(a.maxTranslate()-a.minTranslate()),s=(t-a.minTranslate())*i+e.minTranslate()),a.params.controller.inverse&&(s=e.maxTranslate()-s),e.updateProgress(s),e.setTranslate(s,a),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(r))for(var o=0;o<r.length;o+=1)r[o]!==t&&r[o]instanceof W&&n(r[o]);else r instanceof W&&t!==r&&n(r)},setTransition:function(e,t){var i,s=this,a=s.controller.control;function r(t){t.setTransition(e,s),0!==e&&(t.transitionStart(),t.params.autoHeight&&n.nextTick((function(){t.updateAutoHeight()})),t.$wrapperEl.transitionEnd((function(){a&&(t.params.loop&&"slide"===s.params.controller.by&&t.loopFix(),t.transitionEnd())})))}if(Array.isArray(a))for(i=0;i<a.length;i+=1)a[i]!==t&&a[i]instanceof W&&r(a[i]);else a instanceof W&&t!==a&&r(a)}},he={makeElFocusable:function(e){return e.attr("tabIndex","0"),e},addElRole:function(e,t){return e.attr("role",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){var t=this.params.a11y;if(13===e.keyCode){var i=s(e.target);this.navigation&&this.navigation.$nextEl&&i.is(this.navigation.$nextEl)&&(this.isEnd&&!this.params.loop||this.slideNext(),this.isEnd?this.a11y.notify(t.lastSlideMessage):this.a11y.notify(t.nextSlideMessage)),this.navigation&&this.navigation.$prevEl&&i.is(this.navigation.$prevEl)&&(this.isBeginning&&!this.params.loop||this.slidePrev(),this.isBeginning?this.a11y.notify(t.firstSlideMessage):this.a11y.notify(t.prevSlideMessage)),this.pagination&&i.is("."+this.params.pagination.bulletClass)&&i[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){if(!this.params.loop){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;i&&i.length>0&&(this.isBeginning?this.a11y.disableEl(i):this.a11y.enableEl(i)),t&&t.length>0&&(this.isEnd?this.a11y.disableEl(t):this.a11y.enableEl(t))}},updatePagination:function(){var e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each((function(i,a){var r=s(a);e.a11y.makeElFocusable(r),e.a11y.addElRole(r,"button"),e.a11y.addElLabel(r,t.paginationBulletMessage.replace(/{{index}}/,r.index()+1))}))},init:function(){this.$el.append(this.a11y.liveRegion);var e,t,i=this.params.a11y;this.navigation&&this.navigation.$nextEl&&(e=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(t=this.navigation.$prevEl),e&&(this.a11y.makeElFocusable(e),this.a11y.addElRole(e,"button"),this.a11y.addElLabel(e,i.nextSlideMessage),e.on("keydown",this.a11y.onEnterKey)),t&&(this.a11y.makeElFocusable(t),this.a11y.addElRole(t,"button"),this.a11y.addElLabel(t,i.prevSlideMessage),t.on("keydown",this.a11y.onEnterKey)),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.on("keydown","."+this.params.pagination.bulletClass,this.a11y.onEnterKey)},destroy:function(){var e,t;this.a11y.liveRegion&&this.a11y.liveRegion.length>0&&this.a11y.liveRegion.remove(),this.navigation&&this.navigation.$nextEl&&(e=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(t=this.navigation.$prevEl),e&&e.off("keydown",this.a11y.onEnterKey),t&&t.off("keydown",this.a11y.onEnterKey),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.off("keydown","."+this.params.pagination.bulletClass,this.a11y.onEnterKey)}},pe={init:function(){if(this.params.history){if(!t.history||!t.history.pushState)return this.params.history.enabled=!1,void(this.params.hashNavigation.enabled=!0);var e=this.history;e.initialized=!0,e.paths=pe.getPathValues(),(e.paths.key||e.paths.value)&&(e.scrollToSlide(0,e.paths.value,this.params.runCallbacksOnInit),this.params.history.replaceState||t.addEventListener("popstate",this.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||t.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=pe.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var e=t.location.pathname.slice(1).split("/").filter((function(e){return""!==e})),i=e.length;return{key:e[i-2],value:e[i-1]}},setHistory:function(e,i){if(this.history.initialized&&this.params.history.enabled){var s=this.slides.eq(i),a=pe.slugify(s.attr("data-history"));t.location.pathname.includes(e)||(a=e+"/"+a);var r=t.history.state;r&&r.value===a||(this.params.history.replaceState?t.history.replaceState({value:a},null,a):t.history.pushState({value:a},null,a))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,i){if(t)for(var s=0,a=this.slides.length;s<a;s+=1){var r=this.slides.eq(s);if(pe.slugify(r.attr("data-history"))===t&&!r.hasClass(this.params.slideDuplicateClass)){var n=r.index();this.slideTo(n,e,i)}}else this.slideTo(0,e,i)}},ce={onHashCange:function(){var t=e.location.hash.replace("#","");if(t!==this.slides.eq(this.activeIndex).attr("data-hash")){var i=this.$wrapperEl.children("."+this.params.slideClass+'[data-hash="'+t+'"]').index();if(void 0===i)return;this.slideTo(i)}},setHash:function(){if(this.hashNavigation.initialized&&this.params.hashNavigation.enabled)if(this.params.hashNavigation.replaceState&&t.history&&t.history.replaceState)t.history.replaceState(null,null,"#"+this.slides.eq(this.activeIndex).attr("data-hash")||"");else{var i=this.slides.eq(this.activeIndex),s=i.attr("data-hash")||i.attr("data-history");e.location.hash=s||""}},init:function(){if(!(!this.params.hashNavigation.enabled||this.params.history&&this.params.history.enabled)){this.hashNavigation.initialized=!0;var i=e.location.hash.replace("#","");if(i)for(var a=0,r=this.slides.length;a<r;a+=1){var n=this.slides.eq(a);if((n.attr("data-hash")||n.attr("data-history"))===i&&!n.hasClass(this.params.slideDuplicateClass)){var o=n.index();this.slideTo(o,0,this.params.runCallbacksOnInit,!0)}}this.params.hashNavigation.watchState&&s(t).on("hashchange",this.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&s(t).off("hashchange",this.hashNavigation.onHashCange)}},ue={run:function(){var e=this,t=e.slides.eq(e.activeIndex),i=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(i=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=n.nextTick((function(){e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),e.params.cssMode&&e.autoplay.running&&e.autoplay.run()}),i)},start:function(){return void 0===this.autoplay.timeout&&(!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0))},stop:function(){return!!this.autoplay.running&&(void 0!==this.autoplay.timeout&&(this.autoplay.timeout&&(clearTimeout(this.autoplay.timeout),this.autoplay.timeout=void 0),this.autoplay.running=!1,this.emit("autoplayStop"),!0))},pause:function(e){this.autoplay.running&&(this.autoplay.paused||(this.autoplay.timeout&&clearTimeout(this.autoplay.timeout),this.autoplay.paused=!0,0!==e&&this.params.autoplay.waitForTransition?(this.$wrapperEl[0].addEventListener("transitionend",this.autoplay.onTransitionEnd),this.$wrapperEl[0].addEventListener("webkitTransitionEnd",this.autoplay.onTransitionEnd)):(this.autoplay.paused=!1,this.autoplay.run())))}},ve={setTranslate:function(){for(var e=this.slides,t=0;t<e.length;t+=1){var i=this.slides.eq(t),s=-i[0].swiperSlideOffset;this.params.virtualTranslate||(s-=this.translate);var a=0;this.isHorizontal()||(a=s,s=0);var r=this.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:r}).transform("translate3d("+s+"px, "+a+"px, 0px)")}},setTransition:function(e){var t=this,i=t.slides,s=t.$wrapperEl;if(i.transition(e),t.params.virtualTranslate&&0!==e){var a=!1;i.transitionEnd((function(){if(!a&&t&&!t.destroyed){a=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)s.trigger(e[i])}}))}}},fe={setTranslate:function(){var e,t=this.$el,i=this.$wrapperEl,a=this.slides,r=this.width,n=this.height,o=this.rtlTranslate,l=this.size,d=this.params.cubeEffect,h=this.isHorizontal(),p=this.virtual&&this.params.virtual.enabled,c=0;d.shadow&&(h?(0===(e=i.find(".swiper-cube-shadow")).length&&(e=s('<div class="swiper-cube-shadow"></div>'),i.append(e)),e.css({height:r+"px"})):0===(e=t.find(".swiper-cube-shadow")).length&&(e=s('<div class="swiper-cube-shadow"></div>'),t.append(e)));for(var u=0;u<a.length;u+=1){var v=a.eq(u),f=u;p&&(f=parseInt(v.attr("data-swiper-slide-index"),10));var m=90*f,g=Math.floor(m/360);o&&(m=-m,g=Math.floor(-m/360));var b=Math.max(Math.min(v[0].progress,1),-1),w=0,y=0,x=0;f%4==0?(w=4*-g*l,x=0):(f-1)%4==0?(w=0,x=4*-g*l):(f-2)%4==0?(w=l+4*g*l,x=l):(f-3)%4==0&&(w=-l,x=3*l+4*l*g),o&&(w=-w),h||(y=w,w=0);var T="rotateX("+(h?0:-m)+"deg) rotateY("+(h?m:0)+"deg) translate3d("+w+"px, "+y+"px, "+x+"px)";if(b<=1&&b>-1&&(c=90*f+90*b,o&&(c=90*-f-90*b)),v.transform(T),d.slideShadows){var E=h?v.find(".swiper-slide-shadow-left"):v.find(".swiper-slide-shadow-top"),C=h?v.find(".swiper-slide-shadow-right"):v.find(".swiper-slide-shadow-bottom");0===E.length&&(E=s('<div class="swiper-slide-shadow-'+(h?"left":"top")+'"></div>'),v.append(E)),0===C.length&&(C=s('<div class="swiper-slide-shadow-'+(h?"right":"bottom")+'"></div>'),v.append(C)),E.length&&(E[0].style.opacity=Math.max(-b,0)),C.length&&(C[0].style.opacity=Math.max(b,0))}}if(i.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),d.shadow)if(h)e.transform("translate3d(0px, "+(r/2+d.shadowOffset)+"px, "+-r/2+"px) rotateX(90deg) rotateZ(0deg) scale("+d.shadowScale+")");else{var S=Math.abs(c)-90*Math.floor(Math.abs(c)/90),M=1.5-(Math.sin(2*S*Math.PI/360)/2+Math.cos(2*S*Math.PI/360)/2),P=d.shadowScale,z=d.shadowScale/M,k=d.shadowOffset;e.transform("scale3d("+P+", 1, "+z+") translate3d(0px, "+(n/2+k)+"px, "+-n/2/z+"px) rotateX(-90deg)")}var $=j.isSafari||j.isUiWebView?-l/2:0;i.transform("translate3d(0px,0,"+$+"px) rotateX("+(this.isHorizontal()?0:c)+"deg) rotateY("+(this.isHorizontal()?-c:0)+"deg)")},setTransition:function(e){var t=this.$el;this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}},me={setTranslate:function(){for(var e=this.slides,t=this.rtlTranslate,i=0;i<e.length;i+=1){var a=e.eq(i),r=a[0].progress;this.params.flipEffect.limitRotation&&(r=Math.max(Math.min(a[0].progress,1),-1));var n=-180*r,o=0,l=-a[0].swiperSlideOffset,d=0;if(this.isHorizontal()?t&&(n=-n):(d=l,l=0,o=-n,n=0),a[0].style.zIndex=-Math.abs(Math.round(r))+e.length,this.params.flipEffect.slideShadows){var h=this.isHorizontal()?a.find(".swiper-slide-shadow-left"):a.find(".swiper-slide-shadow-top"),p=this.isHorizontal()?a.find(".swiper-slide-shadow-right"):a.find(".swiper-slide-shadow-bottom");0===h.length&&(h=s('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"left":"top")+'"></div>'),a.append(h)),0===p.length&&(p=s('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"right":"bottom")+'"></div>'),a.append(p)),h.length&&(h[0].style.opacity=Math.max(-r,0)),p.length&&(p[0].style.opacity=Math.max(r,0))}a.transform("translate3d("+l+"px, "+d+"px, 0px) rotateX("+o+"deg) rotateY("+n+"deg)")}},setTransition:function(e){var t=this,i=t.slides,s=t.activeIndex,a=t.$wrapperEl;if(i.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var r=!1;i.eq(s).transitionEnd((function(){if(!r&&t&&!t.destroyed){r=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)a.trigger(e[i])}}))}}},ge={setTranslate:function(){for(var e=this.width,t=this.height,i=this.slides,a=this.$wrapperEl,r=this.slidesSizesGrid,n=this.params.coverflowEffect,l=this.isHorizontal(),d=this.translate,h=l?e/2-d:t/2-d,p=l?n.rotate:-n.rotate,c=n.depth,u=0,v=i.length;u<v;u+=1){var f=i.eq(u),m=r[u],g=(h-f[0].swiperSlideOffset-m/2)/m*n.modifier,b=l?p*g:0,w=l?0:p*g,y=-c*Math.abs(g),x=l?0:n.stretch*g,T=l?n.stretch*g:0;Math.abs(T)<.001&&(T=0),Math.abs(x)<.001&&(x=0),Math.abs(y)<.001&&(y=0),Math.abs(b)<.001&&(b=0),Math.abs(w)<.001&&(w=0);var E="translate3d("+T+"px,"+x+"px,"+y+"px)  rotateX("+w+"deg) rotateY("+b+"deg)";if(f.transform(E),f[0].style.zIndex=1-Math.abs(Math.round(g)),n.slideShadows){var C=l?f.find(".swiper-slide-shadow-left"):f.find(".swiper-slide-shadow-top"),S=l?f.find(".swiper-slide-shadow-right"):f.find(".swiper-slide-shadow-bottom");0===C.length&&(C=s('<div class="swiper-slide-shadow-'+(l?"left":"top")+'"></div>'),f.append(C)),0===S.length&&(S=s('<div class="swiper-slide-shadow-'+(l?"right":"bottom")+'"></div>'),f.append(S)),C.length&&(C[0].style.opacity=g>0?g:0),S.length&&(S[0].style.opacity=-g>0?-g:0)}}(o.pointerEvents||o.prefixedPointerEvents)&&(a[0].style.perspectiveOrigin=h+"px 50%")},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},be={init:function(){var e=this.params.thumbs,t=this.constructor;e.swiper instanceof t?(this.thumbs.swiper=e.swiper,n.extend(this.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),n.extend(this.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):n.isObject(e.swiper)&&(this.thumbs.swiper=new t(n.extend({},e.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),this.thumbs.swiperCreated=!0),this.thumbs.swiper.$el.addClass(this.params.thumbs.thumbsContainerClass),this.thumbs.swiper.on("tap",this.thumbs.onThumbClick)},onThumbClick:function(){var e=this.thumbs.swiper;if(e){var t=e.clickedIndex,i=e.clickedSlide;if(!(i&&s(i).hasClass(this.params.thumbs.slideThumbActiveClass)||null==t)){var a;if(a=e.params.loop?parseInt(s(e.clickedSlide).attr("data-swiper-slide-index"),10):t,this.params.loop){var r=this.activeIndex;this.slides.eq(r).hasClass(this.params.slideDuplicateClass)&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,r=this.activeIndex);var n=this.slides.eq(r).prevAll('[data-swiper-slide-index="'+a+'"]').eq(0).index(),o=this.slides.eq(r).nextAll('[data-swiper-slide-index="'+a+'"]').eq(0).index();a=void 0===n?o:void 0===o?n:o-r<r-n?o:n}this.slideTo(a)}}},update:function(e){var t=this.thumbs.swiper;if(t){var i="auto"===t.params.slidesPerView?t.slidesPerViewDynamic():t.params.slidesPerView;if(this.realIndex!==t.realIndex){var s,a=t.activeIndex;if(t.params.loop){t.slides.eq(a).hasClass(t.params.slideDuplicateClass)&&(t.loopFix(),t._clientLeft=t.$wrapperEl[0].clientLeft,a=t.activeIndex);var r=t.slides.eq(a).prevAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index(),n=t.slides.eq(a).nextAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index();s=void 0===r?n:void 0===n?r:n-a==a-r?a:n-a<a-r?n:r}else s=this.realIndex;t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(s)<0&&(t.params.centeredSlides?s=s>a?s-Math.floor(i/2)+1:s+Math.floor(i/2)-1:s>a&&(s=s-i+1),t.slideTo(s,e?0:void 0))}var o=1,l=this.params.thumbs.slideThumbActiveClass;if(this.params.slidesPerView>1&&!this.params.centeredSlides&&(o=this.params.slidesPerView),t.slides.removeClass(l),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(var d=0;d<o;d+=1)t.$wrapperEl.children('[data-swiper-slide-index="'+(this.realIndex+d)+'"]').addClass(l);else for(var h=0;h<o;h+=1)t.slides.eq(this.realIndex+h).addClass(l)}}},we=[R,q,K,U,Z,J,te,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){n.extend(this,{mousewheel:{enabled:!1,enable:ie.enable.bind(this),disable:ie.disable.bind(this),handle:ie.handle.bind(this),handleMouseEnter:ie.handleMouseEnter.bind(this),handleMouseLeave:ie.handleMouseLeave.bind(this),lastScrollTime:n.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[]}})},on:{init:function(){!this.params.mousewheel.enabled&&this.params.cssMode&&this.mousewheel.disable(),this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.params.cssMode&&this.mousewheel.enable(),this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){n.extend(this,{navigation:{init:se.init.bind(this),update:se.update.bind(this),destroy:se.destroy.bind(this),onNextClick:se.onNextClick.bind(this),onPrevClick:se.onPrevClick.bind(this)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var t,i=this.navigation,a=i.$nextEl,r=i.$prevEl;!this.params.navigation.hideOnClick||s(e.target).is(r)||s(e.target).is(a)||(a?t=a.hasClass(this.params.navigation.hiddenClass):r&&(t=r.hasClass(this.params.navigation.hiddenClass)),!0===t?this.emit("navigationShow",this):this.emit("navigationHide",this),a&&a.toggleClass(this.params.navigation.hiddenClass),r&&r.toggleClass(this.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){n.extend(this,{pagination:{init:ae.init.bind(this),render:ae.render.bind(this),update:ae.update.bind(this),destroy:ae.destroy.bind(this),dynamicBulletIndex:0}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){this.params.loop?this.pagination.update():void 0===this.snapIndex&&this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){this.params.pagination.el&&this.params.pagination.hideOnClick&&this.pagination.$el.length>0&&!s(e.target).hasClass(this.params.pagination.bulletClass)&&(!0===this.pagination.$el.hasClass(this.params.pagination.hiddenClass)?this.emit("paginationShow",this):this.emit("paginationHide",this),this.pagination.$el.toggleClass(this.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){n.extend(this,{scrollbar:{init:re.init.bind(this),destroy:re.destroy.bind(this),updateSize:re.updateSize.bind(this),setTranslate:re.setTranslate.bind(this),setTransition:re.setTransition.bind(this),enableDraggable:re.enableDraggable.bind(this),disableDraggable:re.disableDraggable.bind(this),setDragPosition:re.setDragPosition.bind(this),getPointerPosition:re.getPointerPosition.bind(this),onDragStart:re.onDragStart.bind(this),onDragMove:re.onDragMove.bind(this),onDragEnd:re.onDragEnd.bind(this),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(e){this.scrollbar.setTransition(e)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){n.extend(this,{parallax:{setTransform:ne.setTransform.bind(this),setTranslate:ne.setTranslate.bind(this),setTransition:ne.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTransition:function(e){this.params.parallax.enabled&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this,t={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach((function(i){t[i]=oe[i].bind(e)})),n.extend(e,{zoom:t});var i=1;Object.defineProperty(e.zoom,"scale",{get:function(){return i},set:function(t){if(i!==t){var s=e.zoom.gesture.$imageEl?e.zoom.gesture.$imageEl[0]:void 0,a=e.zoom.gesture.$slideEl?e.zoom.gesture.$slideEl[0]:void 0;e.emit("zoomChange",t,s,a)}i=t}})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd:function(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap:function(e){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(e)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()},slideChange:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.params.cssMode&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){n.extend(this,{lazy:{initialImageLoaded:!1,load:le.load.bind(this),loadInSlide:le.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){this.params.lazy.enabled&&(this.params.lazy.loadOnTransitionStart||!this.params.lazy.loadOnTransitionStart&&!this.lazy.initialImageLoaded)&&this.lazy.load()},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()},slideChange:function(){this.params.lazy.enabled&&this.params.cssMode&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){n.extend(this,{controller:{control:this.params.controller.control,getInterpolateFunction:de.getInterpolateFunction.bind(this),setTranslate:de.setTranslate.bind(this),setTransition:de.setTransition.bind(this)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition:function(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var e=this;n.extend(e,{a11y:{liveRegion:s('<span class="'+e.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(he).forEach((function(t){e.a11y[t]=he[t].bind(e)}))},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){n.extend(this,{history:{init:pe.init.bind(this),setHistory:pe.setHistory.bind(this),setHistoryPopState:pe.setHistoryPopState.bind(this),scrollToSlide:pe.scrollToSlide.bind(this),destroy:pe.destroy.bind(this)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)},slideChange:function(){this.history.initialized&&this.params.cssMode&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){n.extend(this,{hashNavigation:{initialized:!1,init:ce.init.bind(this),destroy:ce.destroy.bind(this),setHash:ce.setHash.bind(this),onHashCange:ce.onHashCange.bind(this)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()},slideChange:function(){this.hashNavigation.initialized&&this.params.cssMode&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var e=this;n.extend(e,{autoplay:{running:!1,paused:!1,run:ue.run.bind(e),start:ue.start.bind(e),stop:ue.stop.bind(e),pause:ue.pause.bind(e),onVisibilityChange:function(){"hidden"===document.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===document.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(t){e&&!e.destroyed&&e.$wrapperEl&&t.target===this&&(e.$wrapperEl[0].removeEventListener("transitionend",e.autoplay.onTransitionEnd),e.$wrapperEl[0].removeEventListener("webkitTransitionEnd",e.autoplay.onTransitionEnd),e.autoplay.paused=!1,e.autoplay.running?e.autoplay.run():e.autoplay.stop())}}})},on:{init:function(){this.params.autoplay.enabled&&(this.autoplay.start(),document.addEventListener("visibilitychange",this.autoplay.onVisibilityChange))},beforeTransitionStart:function(e,t){this.autoplay.running&&(t||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(e):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},touchEnd:function(){this.params.cssMode&&this.autoplay.paused&&!this.params.autoplay.disableOnInteraction&&this.autoplay.run()},destroy:function(){this.autoplay.running&&this.autoplay.stop(),document.removeEventListener("visibilitychange",this.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){n.extend(this,{fadeEffect:{setTranslate:ve.setTranslate.bind(this),setTransition:ve.setTransition.bind(this)}})},on:{beforeInit:function(){if("fade"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"fade");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};n.extend(this.params,e),n.extend(this.originalParams,e)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){n.extend(this,{cubeEffect:{setTranslate:fe.setTranslate.bind(this),setTransition:fe.setTransition.bind(this)}})},on:{beforeInit:function(){if("cube"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"cube"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};n.extend(this.params,e),n.extend(this.originalParams,e)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){n.extend(this,{flipEffect:{setTranslate:me.setTranslate.bind(this),setTransition:me.setTransition.bind(this)}})},on:{beforeInit:function(){if("flip"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"flip"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};n.extend(this.params,e),n.extend(this.originalParams,e)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){n.extend(this,{coverflowEffect:{setTranslate:ge.setTranslate.bind(this),setTransition:ge.setTransition.bind(this)}})},on:{beforeInit:function(){"coverflow"===this.params.effect&&(this.classNames.push(this.params.containerModifierClass+"coverflow"),this.classNames.push(this.params.containerModifierClass+"3d"),this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){n.extend(this,{thumbs:{swiper:null,init:be.init.bind(this),update:be.update.bind(this),onThumbClick:be.onThumbClick.bind(this)}})},on:{beforeInit:function(){var e=this.params.thumbs;e&&e.swiper&&(this.thumbs.init(),this.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(e){var t=this.thumbs.swiper;t&&t.setTransition(e)},beforeDestroy:function(){var e=this.thumbs.swiper;e&&this.thumbs.swiperCreated&&e&&e.destroy()}}}];return void 0===W.use&&(W.use=W.Class.use,W.installModule=W.Class.installModule),W.use(we),W}));
//# sourceMappingURL=swiper.min.js.map
/*!
 * samsung.com - flagship - fr-g-lineup-comparison
 * src : /samsungp5/components/flagship/fr-g-lineup-comparison/clientlibs/devjs/fr-g-lineup-comparison.js
 *
 * @version 1.0.0
 * @since 2019.11.21
 */
;(function(win, $){
	'use strict';

	if ('undefined' === typeof win.smg) {
		win.smg = {};
	}
	if ('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}
	if ('undefined' === typeof win.smg.aem.component) {
		win.smg.aem.component = {};
	}
	if ('undefined' === typeof win.smg.aem.component.flagship) {
		win.smg.aem.component.flagship = {};
	}

	var V_STATIC = win.smg.aem.varStatic,
		UTIL = win.smg.aem.util,
		CST_EVENT = win.smg.aem.customEvent;

	var namespace = win.smg.aem.component.flagship;

	namespace.lineupComparison = (function() {
		var defParams = {
			section : '.fr-lineup-comparison',
			contentsWrap : '.fr-lineup-comparison__contents',
			categoryList : '.fr-lineup-comparison__category-list',
			comparison : {
				wrap : '.fr-lineup-comparison__wrap',
				top : '.fr-lineup-comparison__category-top, .fr-lineup-comparison__product',
				itemImg : '.fr-lineup-comparison__product-image-wrap',
				itemName : '.fr-lineup-comparison__product-name',
				drawLineClass : 'fr-lineup-comparison__contents-draw-line'
			},
			seeMoreDetails : {
				button : '.fr-lineup-comparison__seemore-cta',
				activeClass : 'fr-lineup-comparison--see-more'
			},
			carousel : {
				container : '.fr-lineup-comparison__data-swiper',
				selector : '.fr-lineup-comparison__swiper-index',
				item : '.fr-lineup-comparison__data-item',
				swiperOptsPC : {
					init : false,
					slidesPerView : 4.7,
					navigation : {
						nextEl : '.swiper-button-next',
						prevEl : '.swiper-button-prev'
					}
				},
				swiperOptsMO : {
					init : false,
					slidesPerView : 2.2
				}
			},
			tooltip : {
				wrap : '.fr-lineup-comparison__category-tooltip',
				button : '.fr-lineup-comparison__category-tooltip-cta',
				layer : '.fr-lineup-comparison__category-tooltip-layer',
				closeButton : '.fr-lineup-comparison__category-tooltip-close'
			},
			showMaxCarouselItem : 4
		};

		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;
				this.opts = UTIL.def(defParams, (args || {}));

				this.setElements();
				this.setItemsMatchHeight();
				this.setBindEvents();
			},
			setElements : function() {
				this.section = $(this.opts.section);
				this.sectionLength = this.section.length;

				this.swiper = this.section.find(this.opts.carousel.container);
				this.swiperOpts = this.opts.carousel.swiperOptsPC;

				this.tooltipWrap = this.section.find(this.opts.tooltip.wrap);

				this.pageTrack = (typeof digitalData === 'object') && (typeof digitalData.page === 'object') && (typeof digitalData.page.pageInfo === 'object') && (typeof digitalData.page.pageInfo.pageTrack === 'string') ? digitalData.page.pageInfo.pageTrack : '';

				this.swiperArr = [];
				this.isMobile = false;
			},
			setBindEvents : function() {
				if (!UTIL.isAemEditMode()) {
					this.container.on(CST_EVENT.RESPONSIVE.CHANGE, $.proxy(this.onResponsiveChange, this));
					this.container.trigger(CST_EVENT.RESPONSIVE.GET_STATUS);
				}

				this.tooltipWrap.on('click.lineupcomparison touchstart.lineupcomparison touchend.lineupcomparison', this.opts.tooltip.button, $.proxy(this.onClickTooltipButton, this));
				this.tooltipWrap.on('mouseenter.lineupcomparison mouseleave.lineupcomparison', $.proxy(this.onHoverTooltipButton, this));
				this.tooltipWrap.on('click.lineupcomparison touchend.lineupcomparison', this.opts.tooltip.closeButton, $.proxy(this.onClickTooltipCloseButton, this));
			},
			onFocusoutTooltip : function(e) {
				e.preventDefault();
				var nextTooltipEle = $(e.relatedTarget).parents(this.opts.tooltip.wrap).get(0);
				for (var i = 0; i < this.tooltipWrap.length; i++) {
					var $tooltip = this.tooltipWrap.eq(i);
					if ($tooltip.get(0) !== nextTooltipEle) {
						$tooltip.removeClass('is-tooltip-hover').removeClass('is-tooltip-click');
					}
				}
			},
			onHoverTooltipButton : function(e) {
				e.preventDefault();
				var $tooltip = $(e.currentTarget);
				if (e.type === 'mouseenter') {
					$tooltip.addClass('is-tooltip-hover');
					if (!$tooltip.hasClass('is-tooltip-click')) {
						this.tooltipWrap.removeClass('is-tooltip-click');
					}
				} else {
					$tooltip.removeClass('is-tooltip-hover');
				}
			},
			onClickTooltipButton : function(e) {
				e.preventDefault();
				var $tooltip = $(e.currentTarget).parent();

				if (e.type === 'touchstart') {
					this.tooltipWrap.removeClass('is-tooltip-click').removeClass('is-tooltip-hover');
				} else {
					if (!$tooltip.hasClass('is-tooltip-click')) {
						$tooltip.addClass('is-tooltip-click');
						$tooltip.off('focusoutside clickoutside touchendoutside').on('focusoutside clickoutside touchendoutside', function(){
							$(this).removeClass('is-tooltip-click').removeClass('is-tooltip-hover');
							$(this).off('focusoutside clickoutside touchendoutside');
						});
					} else {
						this.tooltipWrap.removeClass('is-tooltip-click').removeClass('is-tooltip-hover');
					}
				}
			},
			onClickTooltipCloseButton : function(e) {
				var $tooltip = $(e.currentTarget).parents(this.opts.tooltip.wrap);

				$tooltip.removeClass('is-tooltip-click');
				$tooltip.removeClass('is-tooltip-hover');
			},
			onResponsiveChange : function(e, data) {
				if (data.RESPONSIVE_NAME === V_STATIC.RESPONSIVE.MOBILE.NAME) {
					this.isMobile = true;
					this.opts.showMaxCarouselItem = 2;
					this.swiperOpts = this.opts.carousel.swiperOptsMO;
				} else {
					this.isMobile = false;
					this.opts.showMaxCarouselItem = 4;
					this.swiperOpts = this.opts.carousel.swiperOptsPC;
				}
				this.setSeeMoreCTA();
				this.initSwiperCarousel();
			},
			initSwiperCarousel : function() {
				if (this.swiperArr.length > 0) {
					for (var i = 0; i < this.swiperArr.length; i++) {
						this.swiperArr[i].destroy();
					}
				}
				this.swiperArr = [];
				this.setSwiperCarousel();
			},
			setSwiperCarousel : function() {
				var _this = this;
				if (this.swiper.length < 1) return;
				for (var i = 0; i < this.swiper.length; i++) {
					var $swiper = _this.swiper.eq(i),
						$itemList = $swiper.find(_this.opts.carousel.item),
						swiperSelector = _this.opts.carousel.selector + '_' + i,
						$nextArrow = $swiper.parent().find('.swiper-button-next'),
						$prevArrow = $swiper.parent().find('.swiper-button-prev'),
						nextArrowSelector = '.swiper-next-index_' + i,
						prevArrowSelector = '.swiper-prev-index_' + i;

					_this.swiperOpts.on = {};
					_this.swiperOpts.navigation = {};

					$swiper.addClass(swiperSelector.substring(1));
					$swiper.removeClass('swiper-no-swiping');
					$itemList.addClass('swiper-slide');

					if ($itemList.length > _this.opts.showMaxCarouselItem) {
						if (!_this.isMobile) {
							$nextArrow.addClass(nextArrowSelector.substring(1));
							$prevArrow.addClass(prevArrowSelector.substring(1));
							
							_this.swiperOpts.navigation = {
								nextEl : nextArrowSelector,
								prevEl : prevArrowSelector
							};

							_this.swiperOpts.on = {
								'init' : function() {
									_this.onInitSwiperCarousel(this);
								},
								'transitionStart sliderMove' : function() {
									_this.onMoveSwiperCarousel(this);
								}
							};
						}
					} else {
						$nextArrow.hide();
						$prevArrow.hide();
						$swiper.addClass('swiper-no-swiping');
						$itemList.removeClass('swiper-slide');
					}

					_this.swiperArr[i] = new Swiper(swiperSelector, _this.swiperOpts);
					_this.swiperArr[i].init();
					_this.offNavArrowEvent(_this.swiperArr[i]);
				}
			},
			onInitSwiperCarousel : function(swiper) {
				var $container = swiper.$el.parent();

				$container.addClass('s-has-next-item');
				$container.removeClass('s-has-prev-item');

				this.setCarouselItemTabindex(swiper);
				if (!$container.hasClass('swiper-container-initialized')) {
					this.setSwiperArrowTagging($container);
				}
			},
			onMoveSwiperCarousel : function(swiper) {
				var $container = swiper.$el.parent(),
					$nextArrow = swiper.navigation.$nextEl;

				this.setCarouselItemTabindex(swiper);
				if ($nextArrow.hasClass('swiper-button-disabled')) {
					$container.removeClass('s-has-next-item');
					$container.addClass('s-has-prev-item');
				} else {
					$container.removeClass('s-has-prev-item');
					$container.addClass('s-has-next-item');
				}
			},
			setCarouselItemTabindex : function(swiper) {
				var swiperTrans = swiper.translate * (-1),
					swiperSnapGrid = swiper.snapGrid,
					currentSlide = swiperSnapGrid.indexOf(swiperTrans),
					maxViewCarouselItem = currentSlide + this.opts.showMaxCarouselItem + 1;

				if (!this.isMobile) {
					swiper.slides.find('a, button').attr('tabindex', '-1');
					for (var i = currentSlide; i < maxViewCarouselItem; i++) { 
						if (i > swiper.slides.length - 1) return;
						swiper.slides.eq(i).find('a, button').removeAttr('tabindex');
					}
				} else {
					swiper.slides.find('a, button').removeAttr('tabindex');
				}
			},
			setSwiperArrowTagging : function($container) {
				var $nextArrow = $container.find('.swiper-button-next'),
					$prevArrow = $container.find('.swiper-button-prev');

				if (!$prevArrow.length && !$nextArrow.length) return;

				$prevArrow.attr({
					'data-omni-type' : 'microsite_pcontentinter',
					'ga-ca' : this.pageTrack
				});
				$nextArrow.attr({
					'data-omni-type' : 'microsite_pcontentinter',
					'ga-ca' : this.pageTrack
				});
				if ($('html').hasClass('rtl')) {
					$prevArrow.attr({
						'data-omni' : 'rolling:right arrow',
						'ga-ac' : 'rolling:right arrow'
					});
					$nextArrow.attr({
						'data-omni' : 'rolling:left arrow',
						'ga-ac' : 'rolling:left arrow'
					});
				} else {
					$prevArrow.attr({
						'data-omni' : 'rolling:left arrow',
						'ga-ac' : 'rolling:left arrow'
					});
					$nextArrow.attr({
						'data-omni' : 'rolling:right arrow',
						'ga-ac' : 'rolling:right arrow'
					});
				}
			},
			offNavArrowEvent : function(swiper) {
				var $nextArrow = swiper.navigation.$nextEl,
					$prevArrow = swiper.navigation.$prevEl;
				if ($nextArrow && $prevArrow) {
					$nextArrow.off('keydown');
					$prevArrow.off('keydown');
				}
			},
			setSeeMoreCTA : function() {
				var _this = this,
					$seeMoreCTA = _this.section.find(_this.opts.seeMoreDetails.button);

				$seeMoreCTA.each(function(){
					var $comparisonWrap = $(this).parents(_this.opts.comparison.wrap);
					$(this).off('click.lineupcomparison').on('click.lineupcomparison', $.proxy(function(){
						$comparisonWrap.toggleClass(_this.opts.seeMoreDetails.activeClass);
					}, this));
				});
			},
			setItemsMatchHeight : function() {
				for (var i = 0; i < this.sectionLength; i++) {
					var section = this.section.eq(i);
					section.heightMatch({
						listWrap : this.opts.comparison.wrap,
						matchElements : this.getMatchElementsArr(section),
						forceMobile	: true
					});
				}
				setTimeout($.proxy(this.drawContentLine, this), 500);
			},
			getMatchElementsArr: function(section) {
				var $categoryList = $(section).find(this.opts.categoryList).children(),
					matchElementsArr = [
						this.opts.comparison.itemImg,
						this.opts.comparison.itemName,
						this.opts.comparison.top,
					];
				$categoryList.each(function(){
					matchElementsArr.push('.' + $(this).attr('class'));
				});
				return matchElementsArr;
			},
			drawContentLine : function() {
				for (var i = 0; i < this.sectionLength; i++) {
					var $contentsWrap = this.section.eq(i).find(this.opts.contentsWrap);
					if (!$contentsWrap.hasClass(this.opts.comparison.drawLineClass)) {
						$contentsWrap.addClass(this.opts.comparison.drawLineClass);
					}
				}
			}
		};
	})();

	$(function(){
		namespace.lineupComparison.init($('body'));
	});
})(window, window.jQuery);
(function($, window, undefined) {
    'use strict';
      function initialize(el, randomID) {
            $('.primary-selection-nomargin__text-slider', el).addClass(' text-slider-' + randomID);
            $('.primary-selection-nomargin__img-slider', el).addClass(' image-slider-' + randomID);
          var id = $(el).attr('data-componentId');
          var initDots = function(ele) {
              if ($(window).width() < 769) {
                  var imageHeight = $(ele).find('.primary-selection-nomargin__img-slider .slick-current').height();
                  setTimeout(function(){ $(ele).find('.slick-dots--samsung').css('top', imageHeight + 'px', 'bottom', 'inherit');}, 100);
                  $(ele).find('.slick-arrow').css({
                      'top': imageHeight / 2 - 62 + 'px',
                      'margin': '0'
                  });
              }
          }
          if (id <= 2) {
              if (id == 2) {
                  if ($(window).width() > 768) {
                      $('.primary-selection-nomargin__products', el).equalize({children: '.product-name', reset: true});
                      $('.primary-selection-nomargin__products', el).equalize({children: '.product-description', reset: true});
                  }
                  $(window).resize(function() {
                      if ($(window).width() > 768) {
                          $('.primary-selection-nomargin__products', el).equalize({children: '.product-name', reset: true});
                          $('.primary-selection-nomargin__products', el).equalize({children: '.product-description', reset: true});
                      }else {
                          $('.product-name').css('height', '');
                          $('.product-description').css('height', '');
                      }
                  });
              }
          } else {
              if ($(window).width() > 768) {
                  $('.primary-selection-nomargin__product-text', el).equalize({children: '.product-name', reset: true});
                  $('.primary-selection-nomargin__product-text', el).equalize({children: '.product-description', reset: true});
              }
              $(window).resize(function() {
                  if ($(window).width() > 768) {
                      setTimeout(function() {
                          $('.primary-selection-nomargin__product-text', el).not('.slick-initialized').equalize({children: '.product-name', reset: true});
                          $('.primary-selection-nomargin__product-text', el).not('.slick-initialized').equalize({children: '.product-description', reset: true});
                      }, 50);
                  }
              });


              $(el).find('.primary-selection-nomargin__img-slider').slickExtension({
                  dots: true,
                  fade: false,
                  asNavFor: '.text-slider-' + randomID,
                  adaptiveHeight: false,
                  mobileOnly: true,
                  infinite: true,
                  arrows: false,
                  touchMove: false,
                  dotsClass: 'slick-dots slick-dots--samsung'
              });

              $(el).find('.primary-selection-nomargin__text-slider').slickExtension({
                  dots: false,
                  fade: false,
                  asNavFor: '.image-slider-' +randomID,
                  adaptiveHeight: false,
                  mobileOnly: true,
                  infinite: true,
                  arrows: false
              });
              initDots(el);
              $(el).find('.primary-selection-nomargin__img-slider').on('afterChange', function(slick, currentSlide) {
                  initDots(el);
              });
              $(window).on('resize', function() {
                  setTimeout(function() {initDots(el);}, 100);
              })
          }
      }

      $(function() {
          $('.primary-selection-nomargin__identify').each(function(idx, el) {
              $.lazysizesLoaded(el, '.primary-selection-nomargin__img')
                  .done(function(){
                      console.log('primary selection done');
                      var randomID =  idx;
                      initialize(el, randomID);
                  });

          });
          if ($('.primary-selection-nomargin__identify').length > 0) {
            window.AEMapp.EPP.loadPrice();
          }
      });
})(jQuery, window);

(function($, ko, window, koViewModel, undefined){
    'use strict';
  
    function compareTrayInit(koViewModel) {
      //for each component if any 
      $('.section.compare-tray').each(function() {
        var comp = this;
        var $comp = $(this);
        //get a view-model instance
        var compareTrayVM = new koViewModel.CompareTrayVM();
        //apply data bindings
        console.log('apply bindings');
        console.log(comp);
        ko.applyBindings(compareTrayVM, comp); 
        // create custom bindings
        //attach the view-model instance to the dom for future reference
        $comp.data('viewModel', compareTrayVM);
      });    
    }
  
    $(function(){
      compareTrayInit(koViewModel);
    });
  
    window.AEMapp = window.AEMapp || {};
    window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
    window.AEMapp.tvPdpConf.compareTrayInit = compareTrayInit;
  
  })(jQuery, ko, window, window.AEMapp.koViewModel);
  
  
(function($, ko, window, koViewModel, undefined) {
    'use strict';
    koViewModel.addingToCompare = false;
  
    var CompareTrayVM = function(){
      //create this alias based on ko recommendations
      var self = this;
      self.compareUrl = ko.observable('');
      self.products = ko.observableArray([{}, {}, {}, {}]);
      self.isFull = ko.observable(false);
      self.isDiff = ko.observable(false);
      self.isMobile = ko.observable(false);
      self.numOfProducts = ko.computed(function(){
        return self.products().filter(function(o) { return !!o.modelCode}).length;
      });
      self.productData = {};
      self.alert = $('.compare-tray__alert');

      var pimSiteCode = $('input[id="data-pim-sitecode"]').attr('value') || 'us';
      var fullMsgI18nText = $('.compare-tray-i18n').attr('data-i18n-message-full');
      var diffMsgI18nText = $('.compare-tray-i18n').attr('data-i18n-message-diff');
      var currencySymbolI18nText = $('.compare-tray-i18n').attr('data-i18n-currency-symbol');
  
      var url = '/us/consumer/shop/productJson.json';
      self.init = function() {
        if (Cookies.getJSON('compareTray')) {
          self.modelCodes = [];
          Cookies.getJSON('compareTray').forEach(function(ct) {
            self.modelCodes.push(ct.mdlCd);
          });
          self.service(url, decodeURIComponent(self.modelCodes));
        }
      };
  
  
      self.checkIfShow = function(p1) {
        if(p1) {
          return !(p1 == "" || p1 == 0);
        }
        return false;
      };
  
      self.filter = function(obj, predicate) {
        var result = [], key;
        predicate.split(',').forEach(function(mdlCd) {
          if (obj.hasOwnProperty(mdlCd)) {
            result.push(obj[mdlCd]);
          }
        });
        return result;
      };
  
      self.validateObj = function(data) {

        var validData = { 'products': [] };
        if (Array.isArray(data) && data.length) {
            for (var i = 0; i < data.length; i++) {
              var curProd = data[i];
              // Ensure there is a valid modelCode
              if (curProd && curProd.modelCode) {
                var product = {};
    
                // Set basic product info with fallbacks
                product.modelCode = curProd.modelCode || '';
                product.imageAlt = curProd.displayName || '';
                product.imageTitle = curProd.displayName || '';
                product.productTitle = curProd.displayName || '';
                product.productImage = curProd.imageUrl || '';
                product.url = (curProd.deepLink && curProd.deepLink.replace(/\/$/, '')) || curProd.pdpUrl || '';
                product.productEcom = curProd.ecomFlag || 'N';
                product.stockFlag = curProd.stockFlag || 'N';
    
                // Correct product price by checking if price object exists and removing '$'
                if (curProd.price && (curProd.price.promoPrice || curProd.price.price)) {
                  var rawPrice = curProd.price.promoPrice || curProd.price.price || '';
                  product.productPrice = rawPrice.replace('$', '');
                } else {
                  product.productPrice = '';
                }
    
                // Append compare tray parameter to image URL if not already present
                if (product.productImage !== '' && product.productImage.indexOf('?$') === -1) {
                  product.productImage += '?$compare-tray-png$';
                }
    
                // Ensure at least one essential attribute exists before adding to validData
              if (product.productImage !== '' || product.productTitle !== '' || product.url !== '') {
                validData.products.push(product);
              }
            }
          }
        }
        return validData;
      };
  
      self.service = function(url, modelCodes, isf) {
        Cookies.getJSON('compareTray').forEach(function(ct) {
          self.isMobile(ct.catId == 'N0002101');
        });
        var dataObj = {};
        window.AEMapp.eppPending++;
        $.get(url).done(function(data) {
          var ret = data;
          try {
            ret = JSON.parse(data);
          } catch (e) {
          }
          dataObj = self.filter(ret, modelCodes);
          dataObj = self.validateObj(dataObj);
            //chat CTA overlay issue
          $('.sp-g-chatbot-star__container__blue__cta-holder').css('bottom', '85px');
          $('.sp-g-samsung-chatbot-container__button').css('bottom', '80px');
          var tempData = dataObj.products.concat([{},{},{},{}]);
          self.products(tempData.slice(0,4));
          picturefill(); // for ie
          if (dataObj.products.length > 1) {
            self.compareUrl(self.setUrl());
          }
          if (isf && $(window).width() > 768) {
            if (window.AEMapp.addToCompareTimer) {
              clearTimeout(window.AEMapp.addToCompareTimer);
            }
            self.show();
          }
          if (!$('.compare-tray__content').is(":visible")) {
            self.show();
          }
          self.matchHeight();
        }).always(function() {
            AEMapp.EPP.tryInit();
          })
          .fail(function(data) {
            console.log(data);
          });
      };
  
      self.setUrl = function() {
        var ret = Cookies.getJSON('compareTray');
        var tmp = [];
        ret.forEach(function(ct) {
          tmp.push(ct.mdlCd);
        });
        tmp.join(',');
        return '/us/compare/#category/' + ret[0].catId + '/products/' + tmp;
      };
  
      self.show = function() {
        var tr = $('.compare-tray__trigger');
        $('.compare-tray__close').show();
        // $('.compare-tray__title').slideUp('slow');
        $('.compare-tray__content').slideDown('slow', function() {
          self.matchHeight();
        });
      };
  
      self.remove = function(d) {
        var pos = 0;
        self.products().forEach(function(prod, idx) {
          if (prod.productTitle === d.productTitle) {
            pos = idx;
          }
        });
        var remove = self.modelCodes[pos];
        self.modelCodes.splice(pos, 1);
        var ret1 = self.products();
        ret1.splice(pos, 1);
        self.products(ret1.concat([{}]));
        var ret2 = Cookies.getJSON('compareTray');
        ret2.splice(pos, 1);
        Cookies.set('compareTray', ret2, {expires: 30});
        self.isFull(false);
        if (ret1.filter(function(o){return !!o.modelCode}).length === 0) {
          self.isDiff(false);
        }
        $.event.trigger({
          type: 'removeFromCompare',
          message: [remove],
          time: new Date()
        });
        
        var compareUrl = self.compareUrl();
        var res1 = compareUrl.replace(remove+',', "");  
        var res2 = res1.replace(','+remove, "");
        self.compareUrl(res2);
        //chat CTA overlay issue
          $('.sp-g-chatbot-star__container__blue__cta-holder').css('bottom', '40px');
          $('.sp-g-samsung-chatbot-container__button').css('bottom', '80px');
        self.matchHeight();
  
        if (window.utag) {
          utag.link({link_cat:'close', link_id:'product_card_close', link_meta:'link_name: close', link_position:'products compare>' + remove});
        }
      };
  
      self.removeAll = function() {
        var remove = self.modelCodes;
        self.modelCodes = [];
        Cookies.remove('compareTray');
        self.products([{}, {}, {}, {}]);
        self.isDiff(false);
        self.isFull(false);
        self.alert.hide();
        $.event.trigger({
          type: 'removeFromCompare',
          message: remove,
          time: new Date()
        });
          //chat CTA overlay issue
        $('.sp-g-chatbot-star__container__blue__cta-holder').css('bottom', '40px');
        $('.sp-g-samsung-chatbot-container__button').css('bottom', '40px');
        if (window.utag) {
          utag.link({link_cat:'close', link_id:'comparison_window_close', link_meta:'link_name: close', link_position:'comparison window'});
        }
      };
  
      self.init();
  
      self.alert.find('.icon-x').on('click', function() {
        self.alert.hide();
      });
  
      self.matchHeight = function() {
        setTimeout(function() {
          $('.compare-tray__main').equalize({children: '.compare-tray__card__name', reset: true});
          $('.compare-tray__main').equalize({children: '.compare-tray__card__price', reset: true});
          $(".compare-tray__main").equalize({children: '.compare-tray__info', reset:  true});
        }, 0);
      }
  
      $(window).on('resize', function() {
        self.matchHeight();
      });
  
      $(document).on('addToCompare', function(data) {
        koViewModel.addingToCompare = true;
        if (data.message === 'full') {
          self.isFull(true);
          self.show();
          // window.alert(fullMsgI18nText);
          self.alert.find('#alert-message').text(fullMsgI18nText);
          self.alert.show();
        } else if (data.message === 'diff') {
          self.isDiff(true);
          self.show();
          // window.alert(diffMsgI18nText);
          self.alert.find('#alert-message').text(diffMsgI18nText);
          self.alert.show();
        } else {
          self.modelCodes = data.message;
          self.service(url, decodeURIComponent(data.message), data.first);
        }
      });
    };
    //expose it to global namespace
    koViewModel.CompareTrayVM = CompareTrayVM;
  
    $(document).on('click', '.compare-tray__chatbox a', function(e) {
      e.preventDefault();
      var chatUrl = 'https://www.samsung.com/us/expert-chat/?compare_instant';
      if ($(window).width() < 768) {
          window.open (chatUrl, 'newwindow');
      } else {
          window.open (chatUrl, 'newwindow', 'height=700, width=440, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no');
      }
    });
  })(jQuery, ko, window, window.AEMapp.koViewModel);
  
;(function($, window, undefined) {
    'use strict';

    function initialize(){
        if($('.rtb-container').length > 0 && $(window).width() > 768){
            $('.rtb-container .column-wrapper h4').matchHeight({byRow:true});
            $('.rtb-container .column-wrapper .column-wrapper__desc').matchHeight({byRow:true});
        }

        $('.slick-column-wrapper').not('.slick-initialized').slickExtension({
            dots: true,
            fade: false,
            slidesToShow: 1,
            mobileOnly: true,
            infinite: false,
            arrows: false,
            touchMove: true,
            slidesToScroll: 1
        });
    }

    initialize();

})(jQuery, window);

/**
 * Created by SDSA on 3/4/2016.
 * Default options: {
 *  orientation: "vertical",
 *  animation: "normal",
 *  element: ".animation-element"
 * }
 * Add animation-element class to your element.
 */
$(window).load(function() {
    (function($, window, document) {
      'use strict';
      var $window = $(window);
      var _that;
      function SubtleScroll(options) {
        this.options = options;
        _that = this;
      }
    
      SubtleScroll.prototype.checkIn = function() {
        var $animationElements = $(_that.options.element);
        var animationClass = _that.options.animation;
        var windowHeight = $window.height();
        var windowTopPosition = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;
        var windowBottomPosition = (windowTopPosition + windowHeight);
    
        $.each($animationElements, function() {
          var $element = $(this);
          var elementHeight = $element.outerHeight();
          var elementTopPosition = $element.offset().top;
          var elementBottomPosition = (elementTopPosition + elementHeight);
          //check to see if this current container is within viewport
          if ((elementBottomPosition >= windowTopPosition) &&
            (elementTopPosition + elementHeight / 2 <= windowBottomPosition)) {
            $element.addClass('in-view');
            $element.addClass(animationClass);
          } else if ((elementBottomPosition < windowTopPosition) ||
            (elementTopPosition > windowBottomPosition)) {
            $element.removeClass('in-view');
            $element.removeClass(animationClass);
          }
        });
      };
    
      $.fn.subtleScroll = function(options) {
        var defaults = {
          orientation: 'vertical',
          animation: 'normal',
          element: '.animation-element'
        };
        var setting = $.extend({}, defaults, options);
        var subtleScroll = new SubtleScroll(setting);
        $window.on('scroll resize', subtleScroll.checkIn);
    
        console.log('subtle scroll init');
      };
    
    })(jQuery, window, document);
    
        $(document).ready(function() {
        'use strict';
        if(typeof $.fn.subtleScroll === 'function') {
            $().subtleScroll({
        
            });
        }
        });
    
        //initialize the video
    
    $(function() {
        'use strict';
        
        function featureBenefitInit() {
            $('section.feature-benefit').each(function(idx, el) {
            if(typeof $.fn.videoController === 'function'){
                $('.ns-feature-benefit-video-trigger', el).videoController({style: 'inline', el: $('.video-button-overlay', el)});
            }else {
                console.log('missing videoController.js');
            }
        
            $('.subHeadDiscPopUp').off('click').on( "click", function() {
                $(this).parents('.container.disclaimer-pop-up').siblings('.fb.disclaimerPopUp').show();
            });
            });
        }
        
        featureBenefitInit();
        
        window.AEMapp = window.AEMapp || {};
        window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
        window.AEMapp.tvPdpConf.featureBenefitInit = featureBenefitInit;
    });
    
});
(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(require('jquery'), require('window')) :
        typeof define === 'function' && define.amd ? define('isInViewport', ['jquery', 'window'], factory) :
            (factory(global.$,global.window));
}(this, (function ($,window) { 'use strict';

    $ = 'default' in $ ? $['default'] : $;
    window = 'default' in window ? window['default'] : window;

    /**
     * @author  Mudit Ameta
     * @license https://github.com/zeusdeux/isInViewport/blob/master/license.md MIT
     */

// expose isInViewport as a custom pseudo-selector
    $.extend($.expr[':'], {
        // if $.expr.createPseudo is available, use it
        'in-viewport': $.expr.createPseudo
            ? $.expr.createPseudo(function (argsString) { return function (currElement) { return isInViewport(currElement, getSelectorArgs(argsString)); }; })
            : function (currObj, index, meta) { return isInViewport(currObj, getSelectorArgs(meta[3])); }
    });


// expose isInViewport as a function too
// this lets folks pass around actual objects as options (like custom viewport)
// and doesn't tie 'em down to strings. It also prevents isInViewport from
// having to look up and wrap the dom element corresponding to the viewport selector
    $.fn.isInViewport = function(options) {
        return this.filter(function (i, el) { return isInViewport(el, options); })
    };

    $.fn.run = run;

// lets you chain any arbitrary function or an array of functions and returns a jquery object
    function run(args) {
        var this$1 = this;

        if (arguments.length === 1 && typeof args === 'function') {
            args = [args];
        }

        if (!(args instanceof Array)) {
            throw new SyntaxError('isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions')
        }

        args.forEach(function (arg) {
            if (typeof arg !== 'function') {
                console.warn('isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions');
                console.warn('isInViewport: Ignoring non-function values in array and moving on');
            } else {
                [].slice.call(this$1).forEach(function (t) { return arg.call($(t)); });
            }
        });

        return this
    }


// gets the width of the scrollbar
    function getScrollbarWidth(viewport) {
        // append a div that has 100% width to get true width of viewport
        var el = $('<div></div>').css({
            width: '100%'
        });
        viewport.append(el);

        // subtract true width from the viewport width which is inclusive
        // of scrollbar by default
        var scrollBarWidth = viewport.width() - el.width();

        // remove our element from DOM
        el.remove();
        return scrollBarWidth
    }


// Returns true if DOM element `element` is in viewport
    function isInViewport(element, options) {
        var ref = element.getBoundingClientRect();
        var top = ref.top;
        var bottom = ref.bottom;
        var left = ref.left;
        var right = ref.right;

        var settings = $.extend({
            tolerance: 0,
            viewport: window
        }, options);
        var isVisibleFlag = false;
        var $viewport = settings.viewport.jquery ? settings.viewport : $(settings.viewport);

        if (!$viewport.length) {
            console.warn('isInViewport: The viewport selector you have provided matches no element on page.');
            console.warn('isInViewport: Defaulting to viewport as window');
            $viewport = $(window);
        }

        var $viewportHeight = $viewport.height();
        var $viewportWidth = $viewport.width();
        var typeofViewport = $viewport[0].toString();

        // if the viewport is other than window recalculate the top,
        // bottom,left and right wrt the new viewport
        // the [object DOMWindow] check is for window object type in PhantomJS
        if ($viewport[0] !== window && typeofViewport !== '[object Window]' && typeofViewport !== '[object DOMWindow]') {
            // use getBoundingClientRect() instead of $.Offset()
            // since the original top/bottom positions are calculated relative to browser viewport and not document
            var viewportRect = $viewport[0].getBoundingClientRect();

            // recalculate these relative to viewport
            top = top - viewportRect.top;
            bottom = bottom - viewportRect.top;
            left = left - viewportRect.left;
            right = right - viewportRect.left;

            // get the scrollbar width from cache or calculate it
            isInViewport.scrollBarWidth = isInViewport.scrollBarWidth || getScrollbarWidth($viewport);

            // remove the width of the scrollbar from the viewport width
            $viewportWidth -= isInViewport.scrollBarWidth;
        }

        // handle falsy, non-number and non-integer tolerance value
        // same as checking using isNaN and then setting to 0
        // bitwise operators deserve some love too you know
        settings.tolerance = ~~Math.round(parseFloat(settings.tolerance));

        if (settings.tolerance < 0) {
            settings.tolerance = $viewportHeight + settings.tolerance; // viewport height - tol
        }

        // the element is NOT in viewport iff it is completely out of
        // viewport laterally or if it is completely out of the tolerance
        // region. Therefore, if it is partially in view then it is considered
        // to be in the viewport and hence true is returned. Because we have adjusted
        // the left/right positions relative to the viewport, we should check the
        // element's right against the viewport's 0 (left side), and the element's
        // left against the viewport's width to see if it is outside of the viewport.

        if (right <= 0 || left >= $viewportWidth) {
            return isVisibleFlag
        }

        // if the element is bound to some tolerance
        isVisibleFlag = settings.tolerance ? top <= settings.tolerance && bottom >= settings.tolerance : bottom > 0 && top <= $viewportHeight;

        return isVisibleFlag
    }


// get the selector args from the args string proved by Sizzle
    function getSelectorArgs(argsString) {
        if (argsString) {
            var args = argsString.split(',');

            // when user only gives viewport and no tolerance
            if (args.length === 1 && isNaN(args[0])) {
                args[1] = args[0];
                args[0] = void 0;
            }

            return {
                tolerance: args[0] ? args[0].trim() : void 0,
                viewport: args[1] ? $(args[1].trim()) : void 0
            }
        }
        return {}
    }

})));

//# sourceMappingURL=isInViewport.js.map
(function($, window, undefined) {
    $(window).load(function() {

        function featureBenefitFullBleedImgInit(refresh = false) {
            $('.feature-benefit-full-bleed-image__image-container').each(function (index, element) {

                var initUploadedVideo = function () {
    
                    var vdHeight = $(element).height();
                    var vdWidth = $(element).width();
                    var vdSrc = $(element).attr('data-video-src') ? $(element).attr('data-video-src') : '//vjs.zencdn.net/v/oceans.mp4';
                    var setting  = {
                        autoplay: $(element).attr('data-vidautoplay'),
                        loopplay:  $(element).attr('data-vidloopplay'),
                        // controls:  $(element).attr('data-vidcontrol'),
                    };
                    var videoID = "full-bleed-media-" + index;
                    var videoElement = document.createElement("video");
                    videoElement.id = videoID;
                    $(videoElement).insertAfter($(element));
    
                    $('#'+videoID).css({
                        'width': vdWidth,
                        'height': vdHeight,
                        'position': 'absolute',
                        'top': '0',
                        'background-color': 'black',
                        'visibility': 'hidden'
                    }).attr({
                        alt: "inline video",
                        title: "inline video",
                        loop: false,
                        isInit: false
                    }).append( "<source>");
    
                    $('#'+videoID).find('source').attr({
                        src: vdSrc,
                        type: 'video/mp4'
                    });
    
                    $(element).find('.fullBleed-play-btn-container').on('click', function () {
                        $('#'+videoID).css('visibility','visible');
                        $('#'+videoID)[0].play();
                    });
    
                    $('#'+videoID).click(function(){
                        if(this.paused){
                            this.play();
                        }else {
                            this.pause();
                        }
                    });
    
    
                    //video autoplay
                    if(setting.autoplay === 'true'){
                        $(window).on('scroll', _.throttle(function () {
                            if( $('#'+videoID).is( ':in-viewport' )){
                                if($('#'+videoID).attr('isInit') == 'false'){
                                    $('#'+videoID).css('visibility','visible');
                                    $('#'+videoID)[0].play();
                                    $('#'+videoID).attr('isInit','true');
                                }
    
                            }
                        },200));
                    }
                    //video end callback
                    $('#'+videoID).on('ended',function(){
                        $(this).css('visibility', 'hidden')
                    });
    
                };
    
    
                var initImageGif = function () {
                    var gifSrc = $(element).attr('data-gif-src') ? $(element).attr('data-gif-src') : 'https://upload.wikimedia.org/wikipedia/commons/2/2c/Rotating_earth_%28large%29.gif';
                    //desktop src change
                    $(element).find('source').attr('data-srcset', gifSrc);
                    $(element).find('source').attr('srcset',gifSrc);
                    //mobile src change
                    $(element).find('img').attr('data-srcset',gifSrc);
                    $(element).find('img').attr('srcset',gifSrc);
                };
    
                var initGlobalVideo = function () {
                    if($(element).attr('data-vidid') === undefined){
                        $(element).parent().find('.fullBleed-play-btn-container').hide();
                    }else if($(element).attr('data-vidid') !== undefined){
                      $(element).videoController({style: 'inline', el: $(element).parent().find('.fullBleed-play-btn')});
                    }
                };
    
                var playBtnCenterAlign = function (ele) {
    
                    if ($(window).width() < 769){
                        if($(element).find('.feature-benefit-full-bleed-image__text-block').hasClass("middle-center-mobile") || $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass("bottom-center-mobile") || $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass("bottom-left-mobile") || $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass("top-center-mobile")){
                            setTimeout(function () {
                                    var mobilecomponentHeight = $(element).height();
                                    if( $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass( "top-center-mobile" )){
                                        var topMobileDist = mobilecomponentHeight - $(element).find('.feature-benefit-full-bleed-image__text-block').height() - parseInt($(element).find('.feature-benefit-full-bleed-image__text-block').css('top'));
                                        $(element).parent().find('.fullBleed-play-btn-center').css('bottom',topMobileDist*0.5 + 'px');
                                    }
    
                                    if( $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass( "middle-center-mobile" )){
                                        var midlleMobileDist = parseInt($(element).find('.feature-benefit-full-bleed-image__text-block').css('top')) - 85;
                                        $(element).parent().find('.fullBleed-play-btn-center').css('bottom',midlleMobileDist*0.5 + 'px');
                                    }
    
                                    if( $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass("bottom-center-mobile")){
                                        $(element).parent().find('.fullBleed-play-btn-center').css('bottom', '60%');
                                    }
    
                                    if( $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass("bottom-left-mobile")){
                                        $(element).parent().find('.fullBleed-play-btn-center').css('bottom', '60%');
                                    }
                            },50);
                        }
                    }
    
                    if( $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass( "top-center" ) || $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass( "middle-center" )  || $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass( "bottom-center" )){
                        setTimeout(function () {
                            if($(window).width() > 769){
                                var componentHeight = $(element).height();
                                var textTop = parseInt($(element).find('.feature-benefit-full-bleed-image__text-block').css('top')); //with px
                                var textHeight = $(element).find('.feature-benefit-full-bleed-image__text-block').height();
                                var spaceRemain = (componentHeight - textHeight - textHeight) * 0.5;
                                var playBtnBottom = spaceRemain + 'px';
                                $(element).parent().find('.fullBleed-play-btn-center').css('bottom',playBtnBottom);
    
                                if( $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass( "top-center" )){
                                    var topSpaceRemain = spaceRemain + 100;
                                    var topplayBtnBottom = topSpaceRemain + 'px';
                                    $(element).parent().find('.fullBleed-play-btn-center').css('bottom',topplayBtnBottom);
                                }
    
                                if( $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass( "middle-center" )){
                                    var middleSpaceRemain = spaceRemain - 20;
                                    var middleplayBtnBottom = middleSpaceRemain + 'px';
                                    $(element).parent().find('.fullBleed-play-btn-center').css('bottom',middleplayBtnBottom);
                                }
    
                                if( $(element).find('.feature-benefit-full-bleed-image__text-block').hasClass( "bottom-center" )){
                                    var bottonTextBtnPostion = componentHeight - (textHeight * 0.75)- 40;
                                    $(element).parent().find('.fullBleed-play-btn-center').css('bottom',bottonTextBtnPostion + 'px')
                                }
                            }
                        },50);
    
                        setTimeout(function () {
                            if ($(window).width() > 769){
                               if( $(element).parent().hasClass('buffer-bottom')){
                                   var position = parseInt($(element).parent().find('.fullBleed-play-btn-center').css('bottom')) + 88; //with px
                                   $(element).parent().find('.fullBleed-play-btn-center').css('bottom',position + 'px')
                               }
                            }
                        },100);
                    }
                };
    
    
                var btnSizePositionAdjust = function () {
                    if ($(window).width() > 769){
                        setTimeout(function () {
                            var adjustPosition = parseInt($(element).parent().find('.fullBleed-play-btn-center').css('bottom')) - 40; //with px
                            $(element).parent().find('.fullBleed-play-btn-center').css('bottom',adjustPosition + 'px');
                            if($(element).find('.feature-benefit-full-bleed-image__text-block').hasClass( "middle-center" )){
                                var adjustMidllePosition = parseInt($(element).parent().find('.fullBleed-play-btn-center').css('bottom')) + 40; //with px
                                $(element).parent().find('.fullBleed-play-btn-center').css('bottom',adjustMidllePosition + 'px');
                            }
                        },300);
                    }
                };
    
    
                $.lazysizesLoaded(element, '.lazyload')
                    .done(function() {
                        playBtnCenterAlign();
                        btnSizePositionAdjust();
                        switch ($(element).attr('data-vidtype')){
                            case 'video':
                                initUploadedVideo();
                                break;
                            case 'imageGif':
                                initImageGif();
                                break;
                            default:
                                initGlobalVideo();
                                break;
                        }
                    });

                if (refresh) {
                    playBtnCenterAlign();
                    btnSizePositionAdjust();
                    switch ($(element).attr('data-vidtype')){
                        case 'video':
                            initUploadedVideo();
                            break;
                        case 'imageGif':
                            initImageGif();
                            break;
                        default:
                            initGlobalVideo();
                            break;   
                    }
                }
    
                $('.subHeadDiscPopUp').on( "click", function() {
                    $(this).parents('.feature-benefit-full-bleed-image__image-container').siblings('.fbfull.disclaimerPopUp').show();
                });
    
            });
        }
        featureBenefitFullBleedImgInit();

        window.AEMapp = window.AEMapp || {};
        window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
        window.AEMapp.tvPdpConf.featureBenefitFullBleedImgInit = featureBenefitFullBleedImgInit;
    });
})(jQuery, window);





(function($, window, undefined) {
    'use strict';
    function initialize(el) {
        $('.ns-feature-benefit-bundle__img-display', el).not('.slick-initialized').slickExtension({
            enableAnchor: true,
            dots: false,
            fade: true,
            arrows: false,
            links: true,
            adaptiveHeight: false,
            mobileOnly: false,
            infinite: false,
            linkClass: 'ns-feature-benefit-bundle__list',
            swipe: false,
            equalize: [[$('.ns-feature-benefit-bundle__main'), $(el)]],
            responsive: [
                {
                    breakpoint: 769,
                    settings: {
                        dots: true,
                        links: false,
                        touchMove: false,
                        fade: false,
                        swipe: true,
                        asNavFor: $('.ns-feature-benefit-bundle__list', el)
                    }
                }
            ]
        });


        $('.ns-feature-benefit-bundle__list', el).not('.slick-initialized').slickExtension({
            enableAnchor: true,
            dots: false,
            fade: false,
            arrows: false,
            asNavFor: $('.ns-feature-benefit-bundle__img-display', el),
            adaptiveHeight: false,
            mobileOnly: true,
            infinite: false,
            touchMove: false
        });


        $('.ns-feature-benefit-bundle__img-display .img-display__slide', el).show();
        $('.ns-feature-benefit-bundle__list', el)
            .find('li:first-child')
            .addClass('slick-active');
    }

    $(function() {
        function featureBenefitBundleInit() {
            $('.feature-benefit-bundle').each(function(idx, el) {
                // $(el).find('.feature-benefit-bundle__list__item').find('a').click(function(e){console.log(e.target)})
                initialize(el);
                $(el).find('.feature-benefit-bundle__dropdown').each(function(idx,ele){
                    $(ele).click(function(){
                        $(el).find('.feature-benefit-bundle__mobile-wrapper').slideToggle(500, function(){
                            $(ele).find('.feature-benefit-bundle__dropdown-right').toggleClass('icon-dash icon-plus');
                            var expandStatus = $(el).find('.feature-benefit-bundle__mobile-wrapper').is(':visible') ? 'expand' : 'collapse';
                            var sectionHeader = $(el).find('li.current-active').find('.list-item__description__title').text();
                            var appText = $(el).find('.feature-benefit-bundle__dropdown-left').text();
                            utag.link({
                                link_cat: expandStatus,
                                link_id: sectionHeader + '_' + appText + '_' + expandStatus,
                                link_meta:'link_name:' + expandStatus,
                                link_position: sectionHeader + '>' + appText
                            });
                        });
                    });
                });
            });
        }
        featureBenefitBundleInit();

        window.AEMapp = window.AEMapp || {};
        window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
        window.AEMapp.tvPdpConf.featureBenefitBundleInit = featureBenefitBundleInit;

    });

})(jQuery, window);

(function($, window, undefined) {
	'use strict';
	var slickOpts = {
		dots: true,
		arrows: true,
		speed: 500,
		dotsClass: 'slick-dots slick-dots--samsung',
        lazyLoad: 'ondemand',
		adaptiveHeight: false,
		centerMode: true,
		infinite: false,
		centerPadding: '95px',
		slidesToShow: 1,
		responsive: [{
			breakpoint: 769,
			settings: {
				dots: true,
				arrows: false,
				centerMode: false
			}
		}]
	};

	var initDots = function(ele) {
		var headerText =  $(ele).find('.slick-current').find('.cm-g-content-carousel__container__slide-section__slide__text__title') && $(ele).find('.slick-current').find('.cm-g-content-carousel__container__slide-section__slide__text__title').text();
		if(window.utag && headerText.length > 0) {
			utag.link && utag.link({
				link_cat: 'slide navigation',
				link_id: headerText + '_carousel',
				link_meta: 'link_name:carousel',
				link_position: headerText
			});
		}
		if ($(window).width() > 768) {
			$('.slick-current .video-slide', $(ele)).find('.play').attr({
				'data-link_cat': 'play video',
				'data-link_id': headerText + '_play_video',
				'data-link_meta': 'link_name:play video',
				'data-link_position': headerText
			});
			var imageHeight = $(ele).find('.slick-current .cm-g-content-carousel__container__slide-section__slide__image').height();
			var containerHeight = $(ele).find('.cm-g-content-carousel__container__slide-section').height();
			$(ele).find('.slick-dots--samsung').css('top', imageHeight + 34 + 'px', 'bottom', 'inherit');
			$(ele).find('.slick-arrow').css({
				'top': imageHeight / 2 - 62 + 'px',
				'margin': '0'
			});
			$('.slick-current .video-slide', $(ele)).videoController({style: 'inline', el: $('.slick-current .play',$(ele))});
		} else {
			$('.slick-current .video-slide', $(ele)).videoController({style: 'inline', el: $('.slick-current .play',$(ele))});
		}
	}
	var initSlick = function(ele) {
		$(ele).children('.cm-g-content-carousel__container__slide-section').on('init', function() {
			initDots(ele);
		});

		$(ele).children('.cm-g-content-carousel__container__slide-section').slick(slickOpts);

		$(ele).children('.cm-g-content-carousel__container__slide-section').on('beforeChange', function(slick, currentSlide) {
			var videos = $(ele).find('.slick-current .video-slide iframe') || $(ele).find('.slick-current .video-slide object').parent();
			if(videos.length)
				$(ele).find('.slick-current .video-slide').data('plugin_videoController')._pauseVideo();
		});

		$(ele).children('.cm-g-content-carousel__container__slide-section').on('afterChange', function(slick, currentSlide) {
			initDots(ele);
		});
		initDots(ele);
	};
	$(window).on('resize', function() {
		$('.cm-g-content-carousel__container').each(function(idx, el) {
			setTimeout(function(){
				initDots(el);
			}, 100);
		});
	});

	$(function() {
		var contentCarouselInit = function() {
			$('.cm-g-content-carousel__container').each(function(idx, el) {
				$(el).find('.lazyload').first().one('load', function() {
					initSlick(el);
				});
				if(window.Cookies('xsdcxyn')) {
					$(el).find('.cm-g-content-carousel__container__slide-section__slide__text__link__container .cta-button.after-login').addClass('show');
				}
				$(el).find('.open-dialog').on('click', function(e) {
					e.preventDefault();
					var overlayHtml = $(this).closest('.cm-g-content-carousel__container__slide-section__slide').find('.carousel-pop-outter').html();
					var $overlayHtml = $(overlayHtml);
					var $domoverlay = $('<div class="cm-g-contnet-carousel-overlay"></div>');
					if(window.Cookies('xsdcxyn')) {
						$overlayHtml.find('.before-login').remove();
					} else {
						$overlayHtml.find('.after-login').remove();
						$overlayHtml.find('.before-login.cta-button').on('click', function(e) {
							e.preventDefault();
							if($(this).attr('href')) {
								window.location.href = $(this).attr('href');
							} else {
								window.location.href = '/us/account/signin/?option=coffer&redirect=' + encodeURIComponent(window.location.href); 
							}
							 
						});
					}
					$domoverlay.append($overlayHtml);
					$('body').append($domoverlay).ready(function(){
						var emailformat = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
					    $('body, html').addClass('no-scroll');
						$domoverlay.find('.carousel-pop, .carousel-pop__close').on('click',function(e) {
							$(this).closest('.cm-g-contnet-carousel-overlay').remove();
							$('body, html').removeClass('no-scroll');
						});

						$domoverlay.find('.carousel-pop__wrapper').on('click', function(e) {
							e.stopPropagation();
						});
						$domoverlay.find('.submit-email').on('click', function(e) {
							e.preventDefault();
							$domoverlay.find('.spinnerHolder').show();
							$domoverlay.find('.error-msg').text('').hide();

							if($domoverlay.find('.email-input').val() && emailformat.test($domoverlay.find('.email-input').val())) {
								//do ajax call
								var offerAPI = 'https://samsung.review.eprize.com/v1/codedistributionapril20/partners/request_code';
								if(window.location.href.indexOf('www.samsung.com') > -1) {
									offerAPI = 'https://samsung.promo.eprize.com/v1/codedistributionapril20/partners/request_code';
								}
								$.ajax({
								    url: offerAPI,
								    method: 'POST',
								    dataType: 'json',
								    cache: false,
								    contentType: "application/json",
								    data: JSON.stringify({ email: $domoverlay.find('.email-input').val(), "partner_id": $domoverlay.find('.carousel-pop__main').data('partnerid')}),
								    crossDomain: true,
								    success: function(data) {
								    	$domoverlay.find('.spinnerHolder').hide();
										$domoverlay.find('.before-submit').hide();
										$domoverlay.find('.after-submit').show();
								    },
								    error: function(err) {
								    	$domoverlay.find('.spinnerHolder').hide();
								    	var msg = 'Oops, something went wrong, please try later.';
								    	if(err.responseJSON && err.responseJSON.status === "ALREADY_REDEEMED") {
								    		msg = "This email has already redeemed."
								    	} else if(err.responseJSON && err.responseJSON.status === "USER_INELIGIBLE") {
								    		msg = "You have already redeemed this offer. Please see terms & conditions."
								    	}
								    	$domoverlay.find('.error-msg').text(msg).show();
								    }
								});
								// //success
								// setTimeout(function(){
								// 	$domoverlay.find('.spinnerHolder').hide();
								// 	$domoverlay.find('.before-submit').hide();
								// 	$domoverlay.find('.after-submit').show();
								// }, 1000);

								// //faled
								// setTimeout(function(){
								// 	$domoverlay.find('.spinnerHolder').hide();
								// }, 1000);
							} else {
								$domoverlay.find('.error-msg').text('Please enter a valid email').show();
								$domoverlay.find('.spinnerHolder').hide();
							}
						});
					});
				});

			});
		}
		contentCarouselInit();

		window.AEMapp = window.AEMapp || {};
	  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
	  window.AEMapp.tvPdpConf.contentCarouselInit = contentCarouselInit;
	});


})(jQuery, window);
(function($, window, document) {
    $('.sp-g-chatbot__container__blue__cta').on('click', function (e) {
          $('.samsung_chat_proactive_layer .proactive_c_layer_chatNow_cta').click();
    });
    $(window).on('scroll', _.throttle(function () {
        if($("div[class^='BackToTopButton-backToTopButton']").length === 1){
            if($(window).width() > 767) {
                if(window.scrollY >= 400){
                    $('.sp-g-chatbot__container__blue__cta-holder').css('bottom', '8%')
                }else {
                    $('.sp-g-chatbot__container__blue__cta-holder').css('bottom', '40px')
                }
            }else {
                if(window.scrollY >= 100){
                    $('.sp-g-chatbot__container__blue__cta-holder').css('bottom', '20%')
                }else {
                    $('.sp-g-chatbot__container__blue__cta-holder').css('bottom', '20px')
                }
            }
          }
    }, 500));
    $('.sp-g-chatbot-star__container__blue__cta_disable').on('click', function (e) {
        if(e.target.className && e.target.className.indexOf('active') !== -1){
            $('.chatBotContainer-ha').show();
        }else {
            if(e.target.className.indexOf('sp-g-chatbot-star__container__blue__cta__close') !== -1){
                $('.sp-g-chatbot-star .sp-g-chatbot-star__container__blue__cta').addClass('sp-g-chatbot-star__container__blue__cta_small');
            }else{
                $('.sp-g-chatbot-star__container__blue__cta__close').click();
                $('.samsung_chat_proactive_layer .proactive_c_layer_chatNow_cta').click();
                $('.sp-g-chatbot-star__container__blue__cta').removeClass('sp-g-chatbot-star__container__blue__cta_disable').addClass('sp-g-chatbot-star__container__blue__cta_active');
            }  
        }
    });
  
    if($.cookie('isChatBotAutoOpen-HA') === 'true'){
        $('.sp-g-chatbot-star__container__blue__cta').addClass('sp-g-chatbot-star__container__blue__cta_active').removeClass('sp-g-chatbot-star__container__blue__cta_disable');
    }
  
})(jQuery, window, document);
(function($, window, undefined){

    function contentBlockInit() {
        var currentWindowWidth = $(window).width();

        var initVideo = function(ele){
            $(ele).find('.contentBlock-wrapper__image-container').each(function (index, ele) {
                if($(ele).attr('data-vidid') === undefined){
                    $(ele).find('.contentblock-play').hide();
                }else if($(ele).attr('data-vidid') !== undefined){
                    $(ele).videoController({style: 'inline', el: $(ele).find('.contentblock-play')});
                }
            });

            setTimeout(function(){
                onYouTubeIframeAPIReady();
                onBrightCoverAPIReady();
            }, 1000);
        };


        var onYouTubeIframeAPIReady = function() {
            var videos = $('.contentBlock-wrapper iframe'); // the iframes elements
            $(videos).each(function (index, ele) {
                if( $(videos[index]).parent().parent().attr('data-hoverPlay') === 'true'  && $(window).width() > 769 ){
                    $(videos[index]).parent().parent().mouseenter(function(e) {
                        $(e.target.closest('.contentBlock-wrapper__image-container')).data('plugin_videoController')._playVideo();
                    });
                    $(videos[index]).parent().parent().mouseleave(function(e) {
                        $(e.target.closest('.contentBlock-wrapper__image-container')).data('plugin_videoController')._pauseVideo();
                    });
                }
            });
        };

        var onBrightCoverAPIReady = function() {
            var videos = $('.contentBlock-wrapper object').parent();// the iframes elements
            $(videos).each(function (index, ele) {
                if( $(videos[index]).parent().attr('data-hoverPlay') === 'true'  && $(window).width() > 769 ){
                    $(videos[index]).parent().mouseenter(function(e) {
                        $(e.target.closest('.contentBlock-wrapper__image-container')).data('plugin_videoController')._playVideo();
                    });
                    $(videos[index]).parent().mouseleave(function(e) {
                        $(e.target.closest('.contentBlock-wrapper__image-container')).data('plugin_videoController')._pauseVideo();
                    });
                }
            });
        };



        var dotsPositionAlign = function () {
          $('.contentBlock-wrapper').each(function(index, ele){
            var $imageContainer = $(ele).find('.slick-current .contentBlock-wrapper__image-container').first();
            var img_height =  $imageContainer.height();
            if ($(ele).hasClass('buffer-top')) {
              img_height += 88;
            }
            var slick_dots_topDistance = img_height + 6 + 'px';
            $(ele).closest('.container').find('.slick-dots').css({
                'bottom' : 'inherit',
                'top' : slick_dots_topDistance
            });
          });
        };


        $(window).on('load', function () {

            setTimeout(function(){
                if(window.innerWidth >= 769){
                    $('.contentBlock-title').length >0 && $('.contentBlock-title').matchHeight();
                    $('.contentBlock__desc').length >0 && $('.contentBlock__desc').matchHeight();
                }

            }, 4000);

        });



        var emptyImagePositionAlign = function () {
            if($('.contentBlock--left').find('Picture').length === 0){
                var verticalAlignMargin = $('.contentBlock--right .contentBlock-wrapper__image-container').height();
                $('.contentBlock--left .contentBlock-wrapper__text-container').css('margin-top', verticalAlignMargin);
            }

            if($('.contentBlock--right').find('Picture').length === 0){
                var verticalAlignMargin = $('.contentBlock--left .contentBlock-wrapper__image-container').height();
                $('.contentBlock--right .contentBlock-wrapper__text-container').css('margin-top', verticalAlignMargin);
            }
        };

        $(".single-item").on('init', function(event, slick, currentSlide, nextSlide){
            emptyImagePositionAlign();
            setTimeout(function(){
                dotsPositionAlign();
            }, 1000);
        });

        emptyImagePositionAlign();

        if(window.innerWidth >= 769){
            $('.contentBlock-title').length >0 && $('.contentBlock-title').matchHeight();
            $('.contentBlock__desc').length >0 && $('.contentBlock__desc').matchHeight();
        }

        var contentBlock_Utag = function (ele) {
            utag.link({
                link_cat: $(ele).attr('data-link_cat'),
                link_id:  $(ele).attr('data-link_id'),
                link_meta: $(ele).attr('data-link_meta'),
                link_position: $(ele).attr('data-link_position'),
            });
        };


        $('.contentBlock__btn').each(function (index,ele) {
            $(ele).on('click', function (e) {
                contentBlock_Utag($(ele));
            })
        });

        $('.contentblock-play').each(function (index,ele) {
            $(ele).on('click', function (e) {
                contentBlock_Utag($(ele));
            })
        });


        var initSlick = function (el) {
            $(el).on('init', function(event, slick, currentSlide, nextSlide){
                setTimeout(function(){
                    dotsPositionAlign();
                }, 1000);
            });
            $(el).slickExtension({
                dots: true,
                arrows: false,
                infinite: true,
                dotsClass: 'slick-dots slick-dots--samsung',
                mobileOnly: true,
            });
            dotsPositionAlign();
        };


        $( document ).ready(function() {
            $('.contentBlock-wrapper').each(function(idx, el) {
                $.lazysizesLoaded(el, '.lazyload')
                    .done(function() {
                        setTimeout(function(){
                            if($(el).find('.contentBlock--left').length !== 0) {
                                if($(el).find('.contentBlock--left').find('.contentImage').length !== 0 && $(el).find('.contentBlock--right').find('.contentImage').length !== 0) {
                                    initSlick(el);
                                    initVideo(el);
                                }
                                if($(el).find('.contentBlock--left').find('.contentImage').length !== 0 && $(el).find('.contentBlock--right').find('.contentImage').length == 0) {
                                    if (window.innerWidth < 769) {
                                        $(el).find('.contentBlock--right').hide(0, function () {
                                            initVideo(el);
                                        });
                                    }else {
                                        initVideo(el);
                                    }
                                }
                                if ($(el).find('.contentBlock--left').find('.contentImage').length === 0 && $(el).find('.contentBlock--right').find('.contentImage').length !== 0) {
                                    if (window.innerWidth < 769) {
                                        $(el).find('.contentBlock--left').hide(0, function () {
                                            initVideo(el);
                                        });
                                    }else {
                                        initVideo(el);
                                    }
                                }
                            }
                            else {
                                if(window.innerWidth > 769){
                                    initVideo(el);
                                }else {
                                    initVideo(el);
                                }
                            }
                        }, 0);
                    });
            });


        }); 
    }

    contentBlockInit();

    window.AEMapp = window.AEMapp || {};
    window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
    window.AEMapp.tvPdpConf.contentBlockInit = contentBlockInit;

})(jQuery, window);

(function($, window, undefined) {
    'use strict';

  function primarySelectionInit() {
    function initialize(el, randomID) {
      $('.primary-selection-new-variation__text-slider', el).addClass(' text-slider-' + randomID);
      $('.primary-selection-new-variation__img-slider', el).addClass(' image-slider-' + randomID);
      var id = $(el).attr('data-componentId');
      var initDots = function(ele) {
        if ($(window).width() < 769) {
          var imageHeight = $(ele).find('.primary-selection-new-variation__img-slider .slick-current').height();
          setTimeout(function(){ $(ele).find('.slick-dots--samsung').css('top', imageHeight + 'px', 'bottom', 'inherit');}, 100);
          $(ele).find('.slick-arrow').css({
            'top': imageHeight / 2 - 62 + 'px',
            'margin': '0'
          });
        }
      }
      if (id > 1) {
        if ($(window).width() > 768) {
          $('.primary-selection-new-variation__product-text', el).equalize({children: '.product-name', reset: true});
          $('.primary-selection-new-variation__product-text', el).equalize({children: '.product-description', reset: true});
        }
        $(window).resize(function() {
          if ($(window).width() > 768) {
            setTimeout(function() {
              $('.primary-selection-new-variation__product-text', el).not('.slick-initialized').equalize({children: '.product-name', reset: true});
              $('.primary-selection-new-variation__product-text', el).not('.slick-initialized').equalize({children: '.product-description', reset: true});
            }, 50);
          }
        });


        $(el).find('.primary-selection-new-variation__img-slider').slickExtension({
          dots: true,
          fade: false,
          asNavFor: '.text-slider-' + randomID,
          adaptiveHeight: false,
          mobileOnly: true,
          infinite: true,
          arrows: false,
          touchMove: false,
          dotsClass: 'slick-dots slick-dots--samsung'
        });

        $(el).find('.primary-selection-new-variation__text-slider').slickExtension({
          dots: false,
          fade: false,
          asNavFor: '.image-slider-' +randomID,
          adaptiveHeight: false,
          mobileOnly: true,
          infinite: true,
          arrows: false
        });
        initDots(el);
        $(el).find('.primary-selection-new-variation__img-slider').on('afterChange', function(slick, currentSlide) {
          initDots(el);
        });
        $(window).on('resize', function() {
          setTimeout(function() {initDots(el);}, 100);
        })
      }
    }
    
    $('.primary-selection-new-variation__identify').each(function(idx, el) {
      $.lazysizesLoaded(el, '.primary-selection-new-variation__img')
      .done(function(){
        console.log('primary selection done');
        var randomID =  idx;
        initialize(el, randomID);
      });

    });
    
    $('.primary-selection-new-variation__link').each(function () {
      const isDiscoverSamsungEvent = window.location.href.indexOf('/shop/all-deals/discover-samsung-event') > -1;
      if (isDiscoverSamsungEvent) {
        const bannertName = $(this).closest(".primary-selection-new-variation").prev(".header-text-block").find(".header-textBlock-wrapper--desktop").find(".textBlock-wrapper__title").text();
        var productTitleHTML = document.createElement('div');
        productTitleHTML.innerHTML = $(this).data('link_position');
        $(this).attr("data-link_cat", "discover samsung event");
        $(this).attr("data-link_id", $(this).text());
        $(this).attr("data-link_position", `${bannertName}>${productTitleHTML.textContent}`);
        $(this).attr("data-event_name", `select_${bannertName}_${$(this).text()}_click`);
      }
    });

    if ($('.primary-selection-new-variation__identify').length > 0) window.AEMapp.EPP.loadPrice();
  }

  primarySelectionInit();

  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.primarySelectionInit = primarySelectionInit;

})(jQuery, window);


(function($, window, document, undefined) {
  'use strict';
  // The actual ui constructor
  $(window).on('load', function(){
  function RecentlyViewedUIAgent(element, options) {
    this.defaults = {
      gutter: 24,
      numOfCards: 0
    };
    this.ele = element;
    this.$ele = $(element);
    this.options = $.extend({}, this.defaults, options);
    this._name = 'recently-viewed-ui-agent';
    this.init();
  }

  $.extend(RecentlyViewedUIAgent.prototype, {
    init: function() {
      var base = this;
      //base.$ele.addClass('recently-viewed--unpopulated');
      base.isMobileView = ($(window).width() < 769);
      base.$container = $('.container', base.$ele);
      base.$productCardsContainer = $('.recently-viewed__products', base.$ele);
    },
    render: function(numOfCards) {
      var base = this;
      if (numOfCards) {
        base.options.numOfCards = numOfCards;
      }

      var $productCards = $('.recently-viewed__product-card', base.$productCardsContainer);
      if (base.options.numOfCards === 1) {
        $productCards.addClass('col-lg-offset-4');
      } else if (base.options.numOfCards === 2) {
        $($productCards[0]).addClass('col-lg-offset-1');
        $($productCards[1]).addClass('col-lg-offset-2');
        base.carouselInit();
        base.createCarouselMobile();
      } else if (base.options.numOfCards === 3) {
        //$($productCards[0]).addClass('col-lg-offset-2');
        //$($productCards[1]).addClass('col-lg-offset-1');
        //$($productCards[2]).addClass('col-lg-offset-1');
        base.carouselInit();
        base.createCarouselMobile();
      } else if (base.options.numOfCards >= 4) {
        base.preCarousel();
        base.carouselInit();
        base.createCarousel();
        base.postCarousel();
      }
      base.postRender();
    },
    preCarousel: function() {
      var base = this;
      base.$contentContainer = $('.product-card__content', base.$ele);
      base.$productCardsContainer.width((base.$container.width() - base.defaults.gutter) * 9 / 12).addClass('recently-viewed--carousel');
      if ($(window).width() > 768) {
        base.$contentContainer.addClass('product-card__content--carousel');
      }
    },
    postCarousel: function() {
      var base = this;
      //base.recalculate();
      base.bindListeners();
      // eq
      $('.recently-viewed--carousel').equalize({children: '.product-card__title', reset: true});
    },
    destroy: function() {
      var base = this;
      base.$productCardsContainer.hide();
      base.$imgSlider.slick('unslick');
    },
    postRender: function() {
      var base = this;
      setTimeout(function(){
        base.$container.removeClass('recently-viewed--unpopulated');
      }, 2500);
      setTimeout(function(){
        base.$productCardsContainer.fadeIn(1000);
      }, 3000);
    },
    carouselInit: function() {
      var base = this;
      base.$imgSlider = $('.img-slider', this.$ele);
    },
    recalculate: function() {
      var base = this;
      var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
      if (w < 768) {
        $('.recently_viewed__product', this.$imgSlider).each(function() {
          $(this).css('paddingLeft', 0);
          $(this).css('paddingRight', 0);
        });
      } else if (w >= 768) {
        var gutter = parseInt($('.row').css('marginRight'), 10);
        var padding = (gutter + parseInt((base.$imgSlider[0].clientWidth / 9), 10)) / 2;
        $('.recently-viewed__product', base.$imgSlider).each(function() {
          $(this).css('paddingLeft', padding);
          $(this).css('paddingRight', padding);
        });
      }
    },
    bindListeners: function() {
      var base = this;
      $(window).resize(function() {
        base.$productCardsContainer.width((base.$container.width() - base.defaults.gutter) * 9 / 12);
        if ($(window).width() > 768 && base.options.numOfCards >= 4) {
          if(!base.$contentContainer.hasClass('product-card__content--carousel')){
            base.$contentContainer.addClass('product-card__content--carousel');
          }
        }
        $('.recently-viewed--carousel').equalize({children: '.product-card__title', reset: true});
        // if(base.viewChange()) {// if the view changes from mobile to desktop or vice versa
        //   //base.destroy();
        //   //base.render();
        // } else {//if the viewport width changes without crossing the breakpoint
        //   base.$productCardsContainer.width((base.$container.width() - base.defaults.gutter) * 9 / 12);
        //   //base.recalculate();
        // }
        // //update isMobileView
        // base.isMobileView = ($(window).width() < 769);
        // console.log(base.isMobileView);
      });
    },
    viewChange: function() {
      var base = this;
      console.log('viewChange: ', base.isMobileView, ($(window).width() < 769));
      return base.isMobileView !== ($(window).width() < 769);
    },
    createCarouselMobile: function() {
      var base = this;
      base.$imgSlider.slickExtension({
        dots: true,
        fade: false,
        arrows: false,
        adaptiveHeight: false,
        mobileOnly: true,
        infinite: false
      });
    },
    createCarousel: function() {
      var base = this;
      base.$imgSlider.delay(2000).slickExtension({
        dots: true,
        fade: false,
        adaptiveHeight: false,
        mobileOnly: false,
        infinite: false,
        slidesToShow: 3,
        slidesToScroll: 3,
        responsive: [{
          breakpoint: 768,
          settings: {
            arrows: false,
            slidesToShow: 1,
            slidesToScroll: 1
          }
        }]
      });
      base.$buttonLeft = $('.slick-prev', this.$ele);
      base.$buttonLeft.attr({
        'data-link_meta': "link_name:navigate",
        'data-link_cat': "navigate",
        'data-bind': "attr: {'data-link_id': $root.pageType + '_left_navigate', 'data-link_position': $root.componentName + '>left'}"
      });
      base.$buttonRight = $('.slick-next', this.$ele);
      base.$buttonRight.attr({
        'data-link_meta': "link_name:navigate",
        'data-link_cat': "navigate",
        'data-bind': "attr: {'data-link_id': $root.pageType + '_right_navigate', 'data-link_position': $root.componentName + '>right'}"
      });
    }
  });
  //append it into global namespace
  window.AEMapp.ui.RecentlyViewedUIAgent = RecentlyViewedUIAgent;
});
})(jQuery, window, document);

(function($, Cookies, window, undefined) {
  'use strict';
  $(window).on('load', function(){
  if (typeof window.AEMapp.pdpUtilities === 'undefined') {
    window.AEMapp.pdpUtilities = {};
  }
  window.AEMapp.pdpUtilities.recentlyViewedDeferred = $.Deferred();
  $(function() {
    var modelCode = $('#pdp-page').attr('data-prodid');
    console.log('modelCode' + modelCode);
    var recentlyViewed = [],
      updatedRecentlyViewed = [];
    var date = new Date();

    if (Cookies.get('recentlyViewed') !== undefined) {
      recentlyViewed = Cookies.getJSON('recentlyViewed');
    }

    recentlyViewed.forEach(function(obj, index) {
      if (((date.getTime() - obj.timeStamp) < 30 * 24 * 60 * 60 * 1000) && (obj.modelCode !== modelCode) && (index < 7) && (obj.modelCode !== '')) {
        updatedRecentlyViewed.push(obj);
      }
    });
    //resolve the deferred object, pass in the updated array of product references
    window.AEMapp.pdpUtilities.recentlyViewedDeferred.resolve(updatedRecentlyViewed);
    //add current product to the array if modelCode is not empty
    if(modelCode && modelCode !== 'HHP-ADH1-PB4') {
      updatedRecentlyViewed.unshift({
        modelCode: modelCode,
        timeStamp: date.getTime()
      });
    }
    console.log('set cookie');
    console.log(updatedRecentlyViewed);
    //Cookies.set('recentlyViewed', updatedRecentlyViewed, {
    //  expires: 30
   // }); // if after 30 days of no visit the whole cookie will be deleted due to inactivity

  });
  });
})(jQuery, Cookies, window);

/*global AEMapp*/
/*global ko*/

(function($, ko, window, document, undefined) {
  'use strict';
  $(window).on('load', function(){
  var imageStyle = $('input[name="imageStyleRecently"]').attr('value') || 'jpg';
  var RecentlyViewedVM = function(comp) {
    //create this alias based on ko recommendations
    var self = this;
    self.comp = comp;
    self.$comp = $(comp);
    var defaults = {
      url: '/etc.clientlibs/samsung/clientlibs/us/consumer/clientlib-dependencies/resources/json-api/recently-viewed.json'
    };

    var id = $('#pdp-page').attr('data-prodid') || $('#gpdp-page').attr('data-prodid') || '';

    //properties--observables
    self.products = ko.observableArray([]);
    self.pageType = AEMapp.getPageType();
    self.componentName = 'recently-viewed';
    // self.numOfProducts = ko.computed(function(){
    //   return self.products().length;
    // });

    //methods
    self.init = function() {
      console.log('view model init', this.comp);
      //initialize ui agent
      //data binding
      console.log('apply binding');
      console.log(self.comp);
      ko.applyBindings(self, self.comp);
      //attach the view-model instance to the dom for future reference
      self.$comp.data('viewModel', self);
    };

    self.validateObj = function(data) {
      var validData = {'products': []};
      var i;
      var product;
      var curProd;
      if (data.length) {
        for (i = 0; i < data.length; i++) {
          if (validData.products.length < 6) {
            product = {};
            curProd = data[i];
            if (curProd.modelCode != id) {
              product.imageAlt = curProd.displayName || '';
              product.imageTitle = curProd.displayName || '';
              product.productImage = curProd.imageUrl || '';
              product.productTitle = curProd.displayName || '';
              product.productPrice = curProd.price.promoPrice === '' ? curProd.price.price : curProd.price.promoPrice;
              product.productMdlCode = curProd.modelCode || '';
              product.productEcom = curProd.ecomFlag || 'N';
              product.productCatId = '';
              product.productUrl = curProd.pdpUrl || '';
              if (product.productPrice.charAt(0) === '$') {
                product.productPrice = product.productPrice.substr(1);
              }
              if(product.productImage != '') {
                if(product.productImage.indexOf('?$') == -1) {
                  product.productImage += '?$recently-viewed-' + imageStyle + '$';
                }
              }
              if (product.productImage != '' || product.productTitle != '' || product.productUrl != '') {
                validData.products.push(product);
              }
            }
          } else {
            return validData;
          }
          //$('.recently-viewed--carousel').equalize({children: '.product-card__title'});
          /*if (validData.products.length < 6) {
            validData.products.push({
              'productTitle': 'Samsung Galaxy S6, 32GB<sup></sup>, (AT&T), Gold Platinum',
              'productImage': '',
              'productPrice': '$249.99',
              'productMdlCode': 'HAF-CU1-2P/XAA',
              'productEcom': 'Y'
            });
          }*/
        }
      }
      return validData;
    };

    self.service = function(url, modelCodes) {
      function filter(obj, predicate) {
        var result = [], key;
        for (key in obj) {
          if (obj.hasOwnProperty(key) && predicate.indexOf(key) > -1) {
            result.push(obj[key]);
          }
        }
        return result;
      }

      var dataObj = {};
      window.AEMapp.eppPending++;
      $.get(url || defaults.url, function(data) {
        //var mappedTasks = $.map(data, function(item) { return new Task(item) });
        //remapping of the returned data structure -> client-side data structure here
      }).done(function(data) {
        var ret = data;
        try {
          ret = JSON.parse(data);
        } catch (e) {
        }
        dataObj = filter(ret, modelCodes);
        dataObj = self.validateObj(dataObj);
        console.log('recently-viewed----------->', dataObj);
        self.products(dataObj.products);
        self.uiAgent = new window.AEMapp.ui.RecentlyViewedUIAgent(self.comp);
        self.uiAgent.render(dataObj.products.length);
      })
      .fail(function(data) {
        console.log('fail - recently viewed');
        console.log(data);
      })
      .always(function() {
        console.log('always - recently viewed');
        AEMapp.EPP.tryInit();
      });
      // $.getJSON(url || defaults.url, function(data) {
      //   console.log('data service: ', data);
      //   //var mappedTasks = $.map(data, function(item) { return new Task(item) });
      //   //remapping of the returned data structure -> client-side data structure here
      //   self.products(data.products);
      //   self.uiAgent.render(data.products.length);
      // });
    };

    self.populateProducts = function(modelCodes, siteCode) {
      self.service('/us/consumer/shop/productJson.json', modelCodes.join(','));
    };
    //init
    self.init();
  };
  //expose it to global namespace
  window.AEMapp.koViewModel.RecentlyViewedVM = RecentlyViewedVM;
});
})(jQuery, ko, window, document);


(function($, ko, koViewModel, window, undefined) {
  'use strict';
  function recentlyViewedInit(koViewModel) {
      $('.section.recently-viewed').each(function() {
        var comp = this;
        var pimSiteCode = $('.recently-viewed-i18n').attr('data-pim-sitecode');
        //get a view-model instance
        var recentlyViewedVM = new koViewModel.RecentlyViewedVM(comp);

        var recentlyViewedInit = function(recentlyViewed) {
          var modelCodeArray = [];
          console.log('recentlyViewed: ' + recentlyViewed);
          if (recentlyViewed) {
            recentlyViewed.forEach(function(obj, index) {
              modelCodeArray.push(obj.modelCode);
            });
          }
          //call the service method and update the view
          modelCodeArray.length > 0 && recentlyViewedVM.populateProducts(modelCodeArray, pimSiteCode);
        };
        //if not on pdp page, get the cookie and render content
        if ($('#pdp-page').length === 0) {
          console.log('on non-pdp page, recentlyViewed: ');
          recentlyViewedInit(Cookies.getJSON('recentlyViewed'));
        } else { // if on pdp page, wait for the page init cookie processing
          console.log('on pdp page');
          var rvDeferred = window.AEMapp.pdpUtilities.recentlyViewedDeferred;
          if (typeof rvDeferred !== undefined) {
            //resolve deferred object for pdp cookie processing
            rvDeferred.then(recentlyViewedInit);
          }
        }
      });
  }

  $(window).on('load', function(){
    recentlyViewedInit(koViewModel);
  });
  

  window.AEMapp = window.AEMapp || {};
  window.AEMapp.tvPdpConf = window.AEMapp.tvPdpConf || {};
  window.AEMapp.tvPdpConf.recentlyViewedInit = recentlyViewedInit;

})(jQuery, window.ko, window.AEMapp.koViewModel, window);

(function($, window, undefined){

    $('.cm-g-cross-sell-carousel__img-wrapper').matchHeight({byRow:true});
    
    $('.product-card__title').matchHeight({byRow:true});
    
	$('.product-card__price').matchHeight({byRow:true});

    if((window.screen.width < 769)){
        $('.cm-g-cross-sell-carousel__slider').slick({
            dots: true,
            fade: false,
            arrows: false,
            adaptiveHeight: true,
            mobileOnly: true,
            infinite: false,
            slidesToShow: 1,
            slidesToScroll: 1
        });
    } else {
        $('.cm-g-cross-sell-carousel__slider').slick({
            dots: false,
            fade: false,
            adaptiveHeight: true,
            mobileOnly: false,
            infinite: false,
            slidesToShow: 3,
            slidesToScroll: 3,
            responsive: [{
                breakpoint: 768,
                settings: {
                    arrows: false,
                    slidesToShow: 1,
                    slidesToScroll: 1
                }
            }]
        });
    }

})(jQuery, window);

