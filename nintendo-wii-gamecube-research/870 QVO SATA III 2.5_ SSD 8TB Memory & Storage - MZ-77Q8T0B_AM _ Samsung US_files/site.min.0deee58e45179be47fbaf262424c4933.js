(function(a,f,h,m){a(f).on("load",function(){function n(c,k){this.defaults={gutter:24,numOfCards:0};this.ele=c;this.$ele=a(c);this.options=a.extend({},this.defaults,k);this._name="recently-viewed-ui-agent";this.init()}a.extend(n.prototype,{init:function(){this.isMobileView=769>a(f).width();this.$container=a(".container",this.$ele);this.$productCardsContainer=a(".recently-viewed__products",this.$ele)},render:function(c){c&&(this.options.numOfCards=c);c=a(".recently-viewed__product-card",this.$productCardsContainer);
1===this.options.numOfCards?c.addClass("col-lg-offset-4"):2===this.options.numOfCards?(a(c[0]).addClass("col-lg-offset-1"),a(c[1]).addClass("col-lg-offset-2"),this.carouselInit(),this.createCarouselMobile()):3===this.options.numOfCards?(this.carouselInit(),this.createCarouselMobile()):4<=this.options.numOfCards&&(this.preCarousel(),this.carouselInit(),this.createCarousel(),this.postCarousel());this.postRender()},preCarousel:function(){this.$contentContainer=a(".product-card__content",this.$ele);this.$productCardsContainer.width(9*
(this.$container.width()-this.defaults.gutter)/12).addClass("recently-viewed--carousel");768<a(f).width()&&this.$contentContainer.addClass("product-card__content--carousel")},postCarousel:function(){this.bindListeners();a(".recently-viewed--carousel").equalize({children:".product-card__title",reset:!0})},destroy:function(){this.$productCardsContainer.hide();this.$imgSlider.slick("unslick")},postRender:function(){var c=this;setTimeout(function(){c.$container.removeClass("recently-viewed--unpopulated")},
2500);setTimeout(function(){c.$productCardsContainer.fadeIn(1E3)},3E3)},carouselInit:function(){this.$imgSlider=a(".img-slider",this.$ele)},recalculate:function(){var c=Math.max(h.documentElement.clientWidth,f.innerWidth||0);if(768>c)a(".recently_viewed__product",this.$imgSlider).each(function(){a(this).css("paddingLeft",0);a(this).css("paddingRight",0)});else if(768<=c){var k=(parseInt(a(".row").css("marginRight"),10)+parseInt(this.$imgSlider[0].clientWidth/9,10))/2;a(".recently-viewed__product",
this.$imgSlider).each(function(){a(this).css("paddingLeft",k);a(this).css("paddingRight",k)})}},bindListeners:function(){var c=this;a(f).resize(function(){c.$productCardsContainer.width(9*(c.$container.width()-c.defaults.gutter)/12);768<a(f).width()&&4<=c.options.numOfCards&&(c.$contentContainer.hasClass("product-card__content--carousel")||c.$contentContainer.addClass("product-card__content--carousel"));a(".recently-viewed--carousel").equalize({children:".product-card__title",reset:!0})})},viewChange:function(){console.log("viewChange: ",
this.isMobileView,769>a(f).width());return this.isMobileView!==769>a(f).width()},createCarouselMobile:function(){this.$imgSlider.slickExtension({dots:!0,fade:!1,arrows:!1,adaptiveHeight:!1,mobileOnly:!0,infinite:!1})},createCarousel:function(){this.$imgSlider.delay(2E3).slickExtension({dots:!0,fade:!1,adaptiveHeight:!1,mobileOnly:!1,infinite:!1,slidesToShow:3,slidesToScroll:3,responsive:[{breakpoint:768,settings:{arrows:!1,slidesToShow:1,slidesToScroll:1}}]});this.$buttonLeft=a(".slick-prev",this.$ele);
this.$buttonLeft.attr({"data-link_meta":"link_name:navigate","data-link_cat":"navigate","data-bind":"attr: {'data-link_id': $root.pageType + '_left_navigate', 'data-link_position': $root.componentName + '\x3eleft'}"});this.$buttonRight=a(".slick-next",this.$ele);this.$buttonRight.attr({"data-link_meta":"link_name:navigate","data-link_cat":"navigate","data-bind":"attr: {'data-link_id': $root.pageType + '_right_navigate', 'data-link_position': $root.componentName + '\x3eright'}"})}});f.AEMapp.ui.RecentlyViewedUIAgent=
n})})(jQuery,window,document);
(function(a,f,h,m){a(h).on("load",function(){"undefined"===typeof h.AEMapp.pdpUtilities&&(h.AEMapp.pdpUtilities={});h.AEMapp.pdpUtilities.recentlyViewedDeferred=a.Deferred();a(function(){var n=a("#pdp-page").attr("data-prodid");console.log("modelCode"+n);var c=[],k=[],d=new Date;f.get("recentlyViewed")!==m&&(c=f.getJSON("recentlyViewed"));c.forEach(function(q,l){2592E6>d.getTime()-q.timeStamp&&q.modelCode!==n&&7>l&&""!==q.modelCode&&k.push(q)});h.AEMapp.pdpUtilities.recentlyViewedDeferred.resolve(k);n&&
"HHP-ADH1-PB4"!==n&&k.unshift({modelCode:n,timeStamp:d.getTime()});console.log("set cookie");console.log(k)})})})(jQuery,Cookies,window);
(function(a,f,h,m,n){a(h).on("load",function(){var c=a('input[name\x3d"imageStyleRecently"]').attr("value")||"jpg";h.AEMapp.koViewModel.RecentlyViewedVM=function(k){var d=this;d.comp=k;d.$comp=a(k);var q=a("#pdp-page").attr("data-prodid")||a("#gpdp-page").attr("data-prodid")||"";d.products=f.observableArray([]);d.pageType=AEMapp.getPageType();d.componentName="recently-viewed";d.init=function(){console.log("view model init",this.comp);console.log("apply binding");console.log(d.comp);f.applyBindings(d,
d.comp);d.$comp.data("viewModel",d)};d.validateObj=function(l){var p={products:[]},g;if(l.length)for(g=0;g<l.length;g++)if(6>p.products.length){var b={};var e=l[g];e.modelCode!=q&&(b.imageAlt=e.displayName||"",b.imageTitle=e.displayName||"",b.productImage=e.imageUrl||"",b.productTitle=e.displayName||"",b.productPrice=""===e.price.promoPrice?e.price.price:e.price.promoPrice,b.productMdlCode=e.modelCode||"",b.productEcom=e.ecomFlag||"N",b.productCatId="",b.productUrl=e.pdpUrl||"","$"===b.productPrice.charAt(0)&&
(b.productPrice=b.productPrice.substr(1)),""!=b.productImage&&-1==b.productImage.indexOf("?$")&&(b.productImage+="?$recently-viewed-"+c+"$"),""==b.productImage&&""==b.productTitle&&""==b.productUrl||p.products.push(b))}else break;return p};d.service=function(l,p){var g={};h.AEMapp.eppPending++;a.get(l||"/etc.clientlibs/samsung/clientlibs/us/consumer/clientlib-dependencies/resources/json-api/recently-viewed.json",function(b){}).done(function(b){var e=b;try{e=JSON.parse(b)}catch(t){}b=e;e=[];for(var r in b)b.hasOwnProperty(r)&&
-1<p.indexOf(r)&&e.push(b[r]);g=e;g=d.validateObj(g);console.log("recently-viewed-----------\x3e",g);d.products(g.products);d.uiAgent=new h.AEMapp.ui.RecentlyViewedUIAgent(d.comp);d.uiAgent.render(g.products.length)}).fail(function(b){console.log("fail - recently viewed");console.log(b)}).always(function(){console.log("always - recently viewed");AEMapp.EPP.tryInit()})};d.populateProducts=function(l,p){d.service("/us/consumer/shop/productJson.json",l.join(","))};d.init()}})})(jQuery,ko,window,document);
(function(a,f,h,m,n){function c(k){a(".section.recently-viewed").each(function(){var d=a(".recently-viewed-i18n").attr("data-pim-sitecode"),q=new k.RecentlyViewedVM(this),l=function(g){var b=[];console.log("recentlyViewed: "+g);g&&g.forEach(function(e,r){b.push(e.modelCode)});0<b.length&&q.populateProducts(b,d)};if(0===a("#pdp-page").length)console.log("on non-pdp page, recentlyViewed: "),l(Cookies.getJSON("recentlyViewed"));else{console.log("on pdp page");var p=m.AEMapp.pdpUtilities.recentlyViewedDeferred;
typeof p!==n&&p.then(l)}})}a(m).on("load",function(){c(h)});m.AEMapp=m.AEMapp||{};m.AEMapp.tvPdpConf=m.AEMapp.tvPdpConf||{};m.AEMapp.tvPdpConf.recentlyViewedInit=c})(jQuery,window.ko,window.AEMapp.koViewModel,window);