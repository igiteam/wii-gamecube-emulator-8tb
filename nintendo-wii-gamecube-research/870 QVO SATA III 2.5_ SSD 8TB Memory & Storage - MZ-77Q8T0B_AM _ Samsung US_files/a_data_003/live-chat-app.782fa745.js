((self||this)["webpackJsonp@sprinklrjs/chat-web-client"]=(self||this)["webpackJsonp@sprinklrjs/chat-web-client"]||[]).push([[115],{1007:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}));var a=n(523),o=n.n(a),i=n(11),c=n.n(i),r=n(2),s=n(202),l=n(285);function d(e){const t=Object(s.a)();t&&t.setUser&&t.setUser({id:e.userId,username:o()(`${e.firstName||""} ${e.lastName||""}`),email:e.email||""})}const u=(e,t)=>{const{appId:n}=Object(r.a)(),{chatUser:a}=e;if(!c()(t,"otherConfigs.settings.disableSentry")&&!Object(s.a)()){const e=window.document.createElement("script");e.src=Object(l.d)("js/sentry/6.18.2/sentry.min.js"),e.onload=()=>{Object(s.a)().onLoad((()=>{Object(s.a)().init({tunnel:"https://www.samsung.com/chat/sentry",ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications","Network Error"],denyUrls:[/extension:\/\//i]}),Object(s.a)().setTag("appId",n),Object(s.a)().setTag("appVersion","hBiP5Uf7-e"),Object(s.a)().setTag("env",Object({NODE_ENV:"production",PUBLIC_URL:"https://live-chat-static.sprinklr.com/chat/hBiP5Uf7-e",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CDN_URL:"live-chat-static.sprinklr.com",REACT_APP_SSO_SUBSCRIBER_BASE_URL:"https://live-chat-static.sprinklr.com",REACT_APP_MEET_URL:"https://meet-prod.sprinklr.com",REACT_APP_VERSION:"hBiP5Uf7-e",REACT_APP_HOST:"https://www.samsung.com/chat"}).HOST_NAME),d(a)}))},window.document.body.appendChild(e)}}},1008:function(e,t,n){var a=n(655);e.exports=function(e,t){for(var n=e.length;n--&&a(t,e[n],0)>-1;);return n}},1035:function(e,t,n){"use strict";var a=n(191),o=n.n(a),i=n(210),c=n.n(i);const r=o.a.createContext([null,c.a]);t.a=r},1041:function(e,t,n){"use strict";var a=n(191),o=n(1042),i=n.n(o),c=n(1),r=n.n(c),s=n(31),l=n.n(s),d=n(206),u=n.n(d),b=n(329),O=n.n(b),f=n(529),p=n.n(f),v=n(880),y=n.n(v),j=n(101),g=n.n(j),h=n(51),m=n.n(h),I=n(50),C=n.n(I),T=n(60),E=n.n(T),x=n(246),S=n(1197),_=n(279),A=n(232);t.a=(e,t)=>{const n=Object(a.useRef)(!1);n.current=r()(e);const{getValue:o,defaultValue:c=!0,logOnFailure:s=!1,logOnSuccess:d=!1,subscribe:b}=t,f=Object(a.useRef)({}),v=Object(a.useRef)();v.current=Object(a.useMemo)((()=>new Set(u()(O()(e),(e=>{var t;return null===e||void 0===e||null===(t=e.details)||void 0===t?void 0:t.id})))),[e]);const[j,h]=Object(a.useState)(0),I=Object(a.useRef)([void 0]),T=Object(a.useRef)(null);Object(a.useEffect)((()=>()=>{T.current&&u()(T.current,(e=>e&&e.clear()))}),[]),T.current=Object(a.useMemo)((()=>(f.current&&C()(f.current,((e,t)=>{var n;let{filterAction:a}=e;null!==(n=v.current)&&void 0!==n&&n.has(t)||(null===a||void 0===a||a.clear(),delete f.current[t])})),l()(e)?null:(I.current=n.current?p()(y()(e),g()(void 0)):[],u()(O()(e),((e,t)=>{var n,a;if(m()(e))return null;if(f.current[null===(n=e.details)||void 0===n?void 0:n.id]){var o;const{filterAction:t,filter:n}=f.current[null===(o=e.details)||void 0===o?void 0:o.id];if(E()(n,e))return t;var c;null===t||void 0===t||t.clear(),delete f.current[null===(c=e.details)||void 0===c?void 0:c.id]}const r=e=>{I.current[t]=x.a.getField(e),h((e=>e+1))},s=S.a.createFilterAction(e,{subscribe:(e,t)=>b(e,i()(r,e),t),getFilterBuilder:S.a.createFilterAction});return null!==(a=e.details)&&void 0!==a&&a.id&&(f.current[e.details.id]={filterAction:s,filter:e}),s}))))),[e,b]);const P=Object(a.useMemo)((()=>T.current?u()(T.current,((e,t)=>e?(Object(_.a)(`--- Filter ${t} match start ---`,Object(A.a)()),e.matches(o(),{logOnFailure:s,logOnSuccess:d})):!!c)):[!!c]),[e,o,c,j]);return Object(a.useMemo)((()=>n.current?u()(P,((e,t)=>({hasPassed:e,changeSource:I.current[t]}))):{hasPassed:!!P[0],changeSource:I.current[0]}),[P,I.current])}},1042:function(e,t,n){var a=n(88),o=n(1024),i=n(874),c=n(749),r=a((function(e,t){var n=c(t,i(r));return o(e,32,void 0,t,n)}));r.placeholder={},e.exports=r},1043:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(191),o=n(206),i=n.n(o),c=n(221),r=n.n(c),s=n(337),l=n.n(s),d=n(1044),u=n(246);const b=()=>{const e=Object(d.b)(d.a.VERTICAL),t=Object(a.useRef)({}),n=Object(a.useRef)(e);n.current=e,l()((()=>{i()(t.current,(e=>{e()}))}),[e.scrollDepth,e.scrollPercent]);const o=Object(a.useCallback)(((e,n)=>{const a=u.a.getId(e);return t.current={...t.current,[a]:n},()=>{t.current=r()(t.current,a)}}),[]);return{getValue:Object(a.useCallback)((()=>({scrollDepth:n.current.scrollDepth,scrollPercent:n.current.scrollPercent})),[]),subscribe:o}}},1044:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return l}));var a=n(191),o=n(287),i=n.n(o),c=n(3);const r={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},s=e=>{let{clientWindow:t,scrollDirection:n}=e;const a=t.document;let o,i;if(n===r.HORIZONTAL){const e=a.documentElement.scrollWidth;o=a.documentElement.scrollLeft+a.documentElement.clientWidth,i=e?Math.round(o/e*100):100}else{const e=a.documentElement.scrollHeight;o=a.documentElement.scrollTop+a.documentElement.clientHeight,i=e?Math.round(o/e*100):100}return{scrollDepth:o,scrollPercent:i}},l=e=>{const t=Object(c.a)(),[n,o]=Object(a.useState)((()=>(e=>{let{clientWindow:t,scrollDirection:n}=e;return t?s({clientWindow:t,scrollDirection:n}):{scrollDepth:0,scrollPercent:0}})({clientWindow:t,scrollDirection:e})));return Object(a.useEffect)((()=>{if(t){const n=i()((()=>{const n=s({clientWindow:t,scrollDirection:e});o(n)}),1e3);return t.addEventListener("scroll",n),()=>{t.removeEventListener("scroll",n)}}}),[]),n}},1045:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(191),o=n(206),i=n.n(o),c=n(221),r=n.n(c),s=n(337),l=n.n(s),d=n(1044),u=n(246);const b=()=>{const e=Object(d.b)(d.a.HORIZONTAL),t=Object(a.useRef)({}),n=Object(a.useRef)(e);n.current=e,l()((()=>{i()(t.current,(e=>{e()}))}),[e.scrollDepth,e.scrollPercent]);const o=Object(a.useCallback)(((e,n)=>{const a=u.a.getId(e);return t.current={...t.current,[a]:n},()=>{t.current=r()(t.current,a)}}),[]);return{getValue:Object(a.useCallback)((()=>({scrollDepth:n.current.scrollDepth,scrollPercent:n.current.scrollPercent})),[]),subscribe:o}}},1048:function(e,t,n){var a=n(655),o=n(80),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var r=null==n?0:o(n);return r<0&&(r=i(c+r,0)),a(e,t,r)}},1049:function(e,t,n){"use strict";t.a=class{constructor(e,t){if(this.poll=()=>{this.isActive&&(this.timeoutId=window.setTimeout((()=>{this.handler().finally((()=>{this.enableBackOff&&(this.interval+=this.baseInterval),this.poll()}))}),this.interval))},this.start=()=>{this.isActive||(this.isActive=!0,this.timeoutId=window.setTimeout((()=>{this.handler().finally((()=>{this.poll()}))}),0))},this.stop=()=>{this.isActive=!1,this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=void 0),this.enableBackOff&&(this.interval=this.baseInterval)},!e)throw new Error("No poll handler defined");var n;this.handler=(n=e,()=>n().catch((()=>{}))),this.baseInterval=t.pollInterval,this.enableBackOff=t.enableBackOff,this.interval=t.pollInterval,this.timeoutId=void 0,this.isActive=!1}}},1050:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(664);const o=/^\/logout$/,i=e=>{let{searchParams:t,callback:n}=e;Object(a.a)({route:o,searchParams:t,callback:n})}},1051:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(191);const o=n.n(a).a.createContext(void 0)},1055:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return f}));var a=n(469),o=n.n(a),i=n(313),c=n(32);const r=[i.g.BOTTOM_LEFT,i.g.CENTER_LEFT,i.g.TOP_LEFT],s=[i.g.BOTTOM_RIGHT,i.g.CENTER_RIGHT,i.g.TOP_RIGHT],l=e=>{let{triggerAlign:t,frameAlign:n}=e;if(r.includes(t))switch(n){case i.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT:return i.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT;case i.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_RIGHT:return i.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_LEFT;case i.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT:return i.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT;case i.c.VIEWPORT_BOTTOM_RIGHT_BOX_BOTTOM_RIGHT:return i.c.VIEWPORT_BOTTOM_LEFT_BOX_BOTTOM_LEFT;default:return n||i.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT}switch(n){case i.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT:return i.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT;case i.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_LEFT:return i.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_RIGHT;case i.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT:return i.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT;case i.c.VIEWPORT_BOTTOM_LEFT_BOX_BOTTOM_LEFT:return i.c.VIEWPORT_BOTTOM_RIGHT_BOX_BOTTOM_RIGHT;default:return n||i.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT}},d=[i.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT,i.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_LEFT,i.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT,i.c.VIEWPORT_BOTTOM_LEFT_BOX_BOTTOM_LEFT],u=[i.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_RIGHT,i.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT,i.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT,i.c.VIEWPORT_BOTTOM_RIGHT_BOX_BOTTOM_RIGHT],b=e=>t=>(e=>{var t;let{framePath:n,styles:a}=e;const o=a.trigger.align,i=null===(t=a[n])||void 0===t?void 0:t.align;if(o&&i){if(s.includes(o)&&d.includes(i))return!0;if(r.includes(o)&&u.includes(i))return!0}return!1})({framePath:e,styles:t})?{...t,[e]:{...t[e],align:l({triggerAlign:t.trigger.align,frameAlign:t[e].align})}}:t,O=e=>{const{trigger:t}=null!==e&&void 0!==e?e:c.a,{align:n=i.g.BOTTOM_RIGHT,orientation:a=i.i.HORIZONTAL}=null!==t&&void 0!==t?t:c.a;let o=null!==n&&void 0!==n?n:i.g.BOTTOM_RIGHT;return"left"===n&&(o=i.g.BOTTOM_LEFT),"right"===n&&(o=i.g.BOTTOM_RIGHT),{...e,trigger:{...e.trigger,orientation:a,align:o}}},f=e=>o()([O,b("frame"),b("proactivePrompt")])(e)},1056:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return p}));var a=n(191),o=n(283),i=n.n(o),c=n(31),r=n.n(c),s=n(868),l=n(666),d=n(265),u=n(192);const b={byIds:{}},O=Object(a.createContext)(b),f=(e,t)=>{if(t.type===d.w){const{id:n,details:a}=t.payload;return r()(e.byIds[n])?i()(e,{byIds:{$merge:{[n]:a}}}):i()(e,{byIds:{[n]:{$merge:a}}})}return e},p=e=>{let{children:t}=e;const[n,o]=Object(a.useReducer)(f,b),i=Object(l.a)(),c=Object(a.useCallback)((e=>{const{type:t,payload:n}=e,a=null===i||void 0===i?void 0:i.find((e=>{var t,a;return(null===e||void 0===e||null===(t=e.provider)||void 0===t||null===(a=t.details)||void 0===a?void 0:a.id)===n.id}));a&&o({type:t,payload:{...n,id:a.id}})}),[i]);return Object(s.a)(d.w,c),Object(u.jsx)(O.Provider,{value:n},t)}},1058:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n(191),o=n.n(a),i=n(210),c=n.n(i),r=n(668),s=n(192);const l={debug:c.a,info:c.a,error:c.a,warning:c.a,cleanup:c.a},d=o.a.createContext(l),u=e=>{let{videoConversationId:t,conversationId:n,isAudioCall:a,children:o}=e;const i=Object(r.a)({videoConversationId:t,conversationId:n,isAudioCall:a});return Object(s.jsx)(d.Provider,{value:i},o)}},1059:function(e,t,n){"use strict";var a=n(211);const o=()=>n.e(23).then(n.bind(null,1611)),i=e=>n(1385)(`./${e.toLowerCase()}/pages`),c=Object(a.a)(o);c.preload=e=>Promise.all([i(e),o()]),t.a=c},1060:function(e,t,n){"use strict";var a=n(210),o=n.n(a),i=n(770);const c=5;function r(e,t){return new Promise(((n,a)=>{setTimeout((()=>{e().then(n,a)}),t)}))}const s={},l=(e,t)=>{s[t]=e,e.catch(o.a).finally((()=>{delete s[t]}))};t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{maxAttempts:n=c}=t;function a(e){return 1e3*(e?Math.pow(2,Math.min(e-1,n)):0)}function o(e,t){return r(e,a(t)).catch((a=>{if(t===n)throw a;return o(e,t+1)}))}const d=Object(i.a)(e.toString());if(d in s)return s[d];const u=o(e,0);return l(u,d),u}},1061:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(191),o=n(196),i=n(205),c=n(213),r=n(207),s=n(774),l=n(2);const d=e=>Object(c.t)(Object(r.c)(e)),u=()=>{const e=(e=>{var t,n;return!(null===(t=e.coBrowsingConfigV2)||void 0===t||null===(n=t.liveObserveConfig)||void 0===n||!n.enabled)})(Object(i.a)()),t=Object(o.d)(d),n=Object(c.z)(t),r=Object(c.u)(t),u=Object(c.b)(t),[b,O]=Object(a.useState)();Object(a.useEffect)((()=>{(async()=>{try{const e=await s.a.get(Object(l.a)().appId);O(null!==e&&void 0!==e?e:null)}catch(e){O(null)}})()}),[]);const{conversationIdsWithAgents:f,conversationIdsWithActiveSession:p}=Object(a.useMemo)((()=>{const e=[],t=[];return Object.values(r).forEach((n=>{var a,o;null!==n&&void 0!==n&&null!==(a=n.liveObserve)&&void 0!==a&&a.allowed&&e.push(n.id),null!==n&&void 0!==n&&null!==(o=n.liveObserve)&&void 0!==o&&o.active&&t.push(n.id)})),{conversationIdsWithAgents:e,conversationIdsWithActiveSession:t}}),[r]);return{checkStatus:Object(a.useCallback)((()=>{if(!n||!e)return{allowed:!1};return p.length>0&&null===b?{allowed:!1}:f.length>0?{allowed:!0}:{allowed:!1}}),[n,e,p.length,b,f.length]),noOfOpenConversation:null!==n&&void 0!==n?n:0,configured:e,conversationsLoaded:u,persistedState:b,conversationIdsWithActiveSession:p,conversationIdsWithAgents:f}}},1062:function(e,t,n){"use strict";function a(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function o(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function i(e,t){try{var n=this.props,a=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,a)}finally{this.props=n,this.state=a}}function c(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,c=null,r=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?c="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(c="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?r="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(r="UNSAFE_componentWillUpdate"),null!==n||null!==c||null!==r){var s=e.displayName||e.name,l="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+s+" uses "+l+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==c?"\n  "+c:"")+(null!==r?"\n  "+r:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=a,t.componentWillReceiveProps=o),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var d=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var a=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;d.call(this,e,t,a)}}return e}n.r(t),n.d(t,"polyfill",(function(){return c})),a.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0},1063:function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var a;(a=n(239))&&a.__esModule;t.timeoutsShape=null;t.classNamesShape=null},1064:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a="trigger-close-icon-container"},1066:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(191),o=n(287),i=n.n(o),c=n(501);const r=Object(c.c)(),s=e=>{const t=Object(a.useRef)(!1),n=Object(a.useRef)(0);return{onTouchStart:Object(a.useCallback)((()=>{t.current=!0}),[]),onTouchMove:Object(a.useCallback)(i()((()=>{t.current=!1}),100),[]),onTouchEnd:Object(a.useCallback)((n=>{t.current&&e(),t.current=!1,n.stopPropagation(),n.preventDefault()}),[e]),onTouchCancel:Object(a.useCallback)((()=>{t.current=!1}),[]),onDragStart:Object(a.useCallback)((e=>{n.current=e.timeStamp}),[]),onDragStop:Object(a.useCallback)((a=>{r&&!t.current&&a.timeStamp-n.current<=100&&(t.current=!1,e()),n.current=0}),[e])}}},1067:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n(245),o=n(256);const i="/livechat/conversation";let c=null;const r=()=>Object(a.a)(void 0,void 0,void 0,(function*(){if(c)return c;const e=yield Object(o.c)(`${i}/message-feedback/config`);return c=yield e.data,c})),s=e=>{let{messageId:t,feedbackRating:n,filledForm:c}=e;return Object(a.a)(void 0,void 0,void 0,(function*(){return Object(o.c)(`${i}/message-feedback/submit-feedback`,Object.assign({messageId:t,feedbackRating:n},c?{filledForm:c}:{}))}))}},1068:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return b}));var a=n(245),o=n(256);const i="/video-chat/conversation";function c(e){let{videoConversationId:t,shouldWaitForConnection:n}=e;return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(o.c)(`${i}/accept/${t}?shouldWaitForConnection=${n}`)).data}))}function r(e){let{videoConversationId:t}=e;return Object(a.a)(this,void 0,void 0,(function*(){return Object(o.c)(`${i}/leave/${t}`)}))}const s=e=>{let{videoConversationId:t}=e;return Object(a.a)(void 0,void 0,void 0,(function*(){return(yield Object(o.c)(`${i}/fetch/conversation/${t}`)).data}))};function l(e){let{conversationId:t,audioOnly:n,messageText:c,sourceButtonId:r,postBackChatMessageId:s,shouldWaitForConnection:l,videoConversationId:d,activityEventType:u,autoInitiateCall:b}=e;return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(o.c)(`${i}/initiate/${t}`,{audioOnly:n,messageText:c,clickedButtonId:r,postBackChatMessageId:s,shouldWaitForConnection:l,videoChatConversationId:d,activityEventType:u,autoInitiateCall:b})).data}))}function d(e){let{videoConversationId:t,meetingId:n}=e;return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(o.c)(`${i}/participant/connected/${t}?meetingId=${n}`)).data}))}function u(e){return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(o.c)(`${i}/fetch/ongoing/conversation?caseId=${e}`)).data}))}function b(e){let{videoConversationId:t,reason:n,subReason:c}=e;return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(o.c)(`${i}/callFailed/${t}`,{reason:n,subReason:c})).data}))}},1069:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class a{}a.getMessageType=e=>e.payload.type,a.getConversationId=e=>e.conversationId,a.getSender=e=>e.sender,a.getCreationTime=e=>e.creationTime,a.getPayload=e=>e.payload},1209:function(e,t,n){"use strict";n(191);var a=n(772),o=n(194),i=n(251),c=n(671);const r=Object(o.a)("div",{target:"e1kwqiqk0"})("width:100%;position:relative;height:",(e=>Object(i.a)(Object(c.c)(e))),";");var s=n(212),l=n(192);var d=()=>Object(l.jsx)(a.b,{className:"flex-column-container full-height"},Object(l.jsx)(r,null),Object(l.jsx)("div",{className:"flex-item-1 p-x-4 p-y-4 p-t-6"},Object(l.jsx)(a.a,{className:"full-height"},Object(l.jsx)(s.c,{className:"flex-row-container center-x-y full-height"})))),u=n(888);var b=()=>Object(l.jsx)("div",{className:"flex-column-container full-height"},Object(l.jsx)(u.c,null,Object(l.jsx)(u.b,null)),Object(l.jsx)("div",{className:"flex-item-1 spr"},Object(l.jsx)(s.c,{className:"flex-row-container center-x-y full-height"}))),O=n(889),f=n(238);var p=()=>{const e=Object(f.a)().isDarkMode;return Object(l.jsx)("div",{className:"flex-column-container full-height"},Object(l.jsx)(c.b,null,Object(l.jsx)(c.a,null)),Object(l.jsx)(O.a,{isDarkMode:e,className:"flex-item-1 spr"},Object(l.jsx)(s.c,{className:"flex-row-container center-x-y full-height"})))},v=n(255),y=n(0),j=n(17);t.a=()=>{const e=Object(y.A)()===j.b,t=Object(v.a)(),{location:{pathname:n}}=t;return"/home"===n&&!Object(y.F)()?e?Object(l.jsx)(b,null):Object(l.jsx)(d,null):Object(l.jsx)(p,null)}},1211:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(1737),o=n(1614),i=n(371),c=n(652),r=n(999),s=Object(i.a)((function(e,t){if(0===e.length||Object(r.a)(t))return!1;for(var n=t,a=0;a<e.length;){if(Object(r.a)(n)||!Object(c.a)(e[a],n))return!1;n=n[e[a]],a+=1}return!0})),l=Object(i.a)((function(e,t){return s([e],t)}));const d=Object(a.a)("isSSOAuthorized"),u=Object(a.a)("authToken"),b=Object(a.a)("oneTimeToken");class O{}O.isSSOAuthorized=Object(o.a)(d),O.getAuthToken=Object(o.a)(u),O.hasIsSSOAuthorized=e=>e&&l("isSSOAuthorized",e),O.getOneTimeToken=Object(o.a)(b)},1213:function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var a=n(191),o=n.n(a),i=n(31),c=n.n(i),r=n(50),s=n.n(r),l=n(358),d=n.n(l),u=n(210),b=n.n(u),O=n(196),f=n(271),p=n(254);var v=()=>e=>{const t={eventId:e.label,eventType:e.action.id,additional:{...e.additional,conversationId:e.conversationId,page:e.page,appId:e.appId,userId:e.userId}};Object(f.a)({topic:p.e,payload:{data:t}})},y=n(256),j=n(241),g=n(202);const h=new Set([j.a.AGENT_ASSIGNED.id,j.a.CALL_ENDED.id,j.a.CALL_MISSED.id,j.a.CALL_DECLINED.id,j.a.CALL_FAILED.id,j.a.CALL_PAGE_MAXIMISED.id,j.a.CALL_PAGE_MINIMISED.id,j.a.ATTACHMENT_BUTTON_CLICKED.id,j.a.SEND_BUTTON_CLICKED.id,j.a.SESSION_ACTIVE.id]);var m=()=>async e=>{if(h.has(e.action.id))return;const t={page:e.page,userAgent:e.userAgent,device:e.device,timeZone:e.timeZone,eventType:e.action.label,eventId:e.label,conversationId:e.conversationId,sourceType:"LIVE_CHAT",sourceSubType:e.sourceSubType,...e.additional};try{await Object(y.c)("/livechat/prompt/browse/event",t)}catch(n){Object(g.b)(n)}},I=n(238),C=n(223),T=n(217),E=n(392),x=n(762),S=n(391),_=n(220),A=n(310),P=n(2),R=n(0),w=n(643),N=n(521),M=n(192);const L=o.a.createContext(b.a);let k=[];const D=e=>Object(A.b)(Object(_.e)(e)),U=e=>{var t;const o=Object(I.a)(),i=Object(C.a)(),r=Object(a.useRef)(k),l=Object(x.a)(),[u,b]=Object(a.useState)(!c()(r.current)),f=Object(T.a)(S.c),p=Object(T.a)(S.b),y=Object(O.d)(D),g=Object(R.R)()||!l,h=null===(t=Object(E.a)())||void 0===t?void 0:t.userId,_=null===i||void 0===i?void 0:i.sendSessionActiveEvent,A=()=>{(e=>{var t,a,o,i;const c=[],r=null===e||void 0===e||null===(t=e.analyticsSettings)||void 0===t||null===(a=t.googleAnalytics)||void 0===a?void 0:a.trackerId,s=null===e||void 0===e||null===(o=e.analyticsSettings)||void 0===o||null===(i=o.sprinklrAnalytics)||void 0===i?void 0:i.enabled;return null!==r&&void 0!==r&&r.startsWith("UA-")?c.push(n.e(164).then(n.bind(null,1742)).then((e=>e.default.createTracker({trackerId:r}))).catch((()=>{}))):null!==r&&void 0!==r&&r.startsWith("G-")&&c.push(n.e(99).then(n.bind(null,1743)).then((e=>e.default.createTracker({trackerId:r}))).catch((()=>{}))),s&&c.push(m()),c.push(v()),Promise.all(c)})(i).then((e=>{r.current=d()(e),k=r.current,b(!0)}))};return Object(a.useEffect)((()=>{if(u&&y.length){const e={...y[0],category:"Sprinklr Widget",device:o.device,page:o.pageUrl,userAgent:o.userAgent,timeZone:o.timeZone,appId:Object(P.a)().appId,userId:h};((e,t)=>{Object(w.c)((()=>{s()(e,(e=>{e(t)}))}))})(r.current,e),p()}else!l&&y.length&&p()}),[y,u,l]),Object(a.useEffect)((()=>{g?(r.current=[],k=r.current,b(!1)):A()}),[g]),Object(a.useEffect)((()=>{let e;return _&&(e=N.d.on((e=>{if(e.type===N.e)f({label:j.a.SESSION_ACTIVE.label,action:j.a.SESSION_ACTIVE})}))),()=>{var t;return null===(t=e)||void 0===t?void 0:t()}}),[_]),Object(M.jsx)(L.Provider,{value:f},e.children)};t.b=o.a.memo(U)},1223:function(e,t,n){"use strict";var a=n(191),o=n(221),i=n.n(o),c=n(305),r=n.n(c),s=n(11),l=n.n(s),d=n(422),u=n.n(d),b=n(50),O=n.n(b),f=n(337),p=n.n(f),v=(n(197),n(881));n(192);var y=function(){return Object(a.useContext)(v.b)},j=n(246),g=n(32),h=n(232);const m=(e,t)=>(u()(l()(e,t))||g.a).startTime||0,I=e=>{let{startTime:t,expectedElapsedTime:n,onTimeout:a}=e;const o=n-(t?Object(h.a)()-t:0);let i;return o>0&&(i=window.setTimeout((()=>{a()}),o)),i};t.a=()=>{const{pagesMetaData:e,currentPageUrl:t}=y(),n=Object(a.useRef)(m(e,t));n.current=m(e,t);const o=Object(a.useRef)({}),c=Object(a.useCallback)(((e,t)=>{const a=j.a.getId(e),c=r()(j.a.getValues(e));return o.current={...o.current,[a]:{timeoutId:I({startTime:n.current,expectedElapsedTime:c,onTimeout:t}),onChangeCallback:t,filterValue:c}},()=>{clearTimeout(l()(o.current,`${a}.timeoutId`)),o.current=i()(o.current,a)}}),[]);p()((()=>{O()(o.current,(e=>{const{timeoutId:t,onChangeCallback:a,filterValue:o}=e;clearTimeout(t),a(),e.timeoutId=I({startTime:n.current,expectedElapsedTime:o,onTimeout:a})}))}),[t]);return{subscribe:c,getValue:Object(a.useCallback)((()=>n.current?Object(h.a)()-n.current:0),[])}}},1225:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return x}));var a=n(245),o=n(344),i=n(2),c=n(52),r=n(442),s=n(50),l=n.n(s),d=n(1391),u=n.n(d),b=n(6),O=n.n(b),f=n(31),p=n.n(f),v=n(355),y=n.n(v),j=n(256),g=n(285),h=n(252);const m="x-chat-token",I=e=>{let{data:t,url:n}=e,a="";return p()(t)||l()(t,(function(e,t){t!==m&&(a+=`${encodeURIComponent(t)}=${encodeURIComponent(O()(e)?JSON.stringify(e):e)}&`)})),a?`${n}?${a.slice(0,-1)}`:n};const C=e=>{var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)};function T(e,t){return Object(a.a)(this,void 0,void 0,(function*(){if(null===t||void 0===t?void 0:t.isWebview){const{url:t,data:n={}}=e,a=I({url:t,data:Object.assign(Object.assign({},n),{generateUrl:!0})}),{data:{fileName:o,url:i}}=yield Object(j.c)(a),c=document.createElement("a");c.setAttribute("href",`livechat-app:url=${Object(g.a)(i,[{key:"fileName",value:o}])}`),c.style.display="none",document.body.appendChild(c),c.click(),setTimeout((()=>C(c)),3e4)}else{const t=function(e){let{url:t,data:n,method:a=h.a.POST,contentType:o}=e;const i=y()(),c=document.createElement("form"),{body:r}=document,s=I({data:n,url:t});return c.setAttribute("id",`spr-chat-download-form-${i}`),c.setAttribute("target","_top"),c.setAttribute("action",s),c.setAttribute("method",a),c.style.display="none",o&&(c.enctype=o),(null===n||void 0===n?void 0:n[m])&&(c.innerHTML=`<input type="hidden" id="x-chat-token" name="x-chat-token" value="${u()(n[m])}">`),r.appendChild(c),c}(e);t.submit(),setTimeout((()=>C(t)),3e4)}}))}function E(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield Object(r.a)(o.a.getAppId(Object(i.a)()));T({url:"https://www.samsung.com/chat/api/livechat/conversation/downloadChatTranscript",data:{timeZone:Object(c.h)(),"x-chat-token":t,conversationId:e}},{isWebview:Object(i.a)().webview})}))}function x(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield Object(r.a)(o.a.getAppId(Object(i.a)())),n=Object(c.h)();T({url:"https://www.samsung.com/chat/api/livechat/conversation/downloadAttachment",data:Object.assign({timeZone:n,"x-chat-token":t},e)},{isWebview:Object(i.a)().webview})}))}},1318:function(e,t,n){var a=n(655);e.exports=function(e,t){for(var n=-1,o=e.length;++n<o&&a(t,e[n],0)>-1;);return n}},1369:function(e,t,n){var a=n(126)("length");e.exports=a},1370:function(e,t){var n="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",r="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+a+"|"+o+")"+"?",l="[\\ufe0e\\ufe0f]?",d=l+s+("(?:\\u200d(?:"+[i,c,r].join("|")+")"+l+s+")*"),u="(?:"+[i+a+"?",a,c,r,n].join("|")+")",b=RegExp(o+"(?="+o+")|"+u+d,"g");e.exports=function(e){for(var t=b.lastIndex=0;b.test(e);)++t;return t}},1377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(446),o=a.__importStar(n(191)),i=n(191),c=a.__importDefault(n(1378)),r=a.__importDefault(n(1379));t.default=function(e){return function(t){var n,s;s=o.isValidElement(t)?(n=t).props:t;var l=c.default({buffered:[],time:0,duration:0,paused:!0,muted:!1,volume:1}),d=l[0],u=l[1],b=i.useRef(null),O=function(e,t){return function(n){try{t&&t(n)}finally{e&&e(n)}}},f=function(){return u({paused:!1})},p=function(){return u({paused:!0})},v=function(){var e=b.current;e&&u({muted:e.muted,volume:e.volume})},y=function(){var e=b.current;if(e){var t=e.duration,n=e.buffered;u({duration:t,buffered:r.default(n)})}},j=function(){var e=b.current;e&&u({time:e.currentTime})},g=function(){var e=b.current;e&&u({buffered:r.default(e.buffered)})};n=n?o.cloneElement(n,a.__assign(a.__assign({controls:!1},s),{ref:b,onPlay:O(s.onPlay,f),onPause:O(s.onPause,p),onVolumeChange:O(s.onVolumeChange,v),onDurationChange:O(s.onDurationChange,y),onTimeUpdate:O(s.onTimeUpdate,j),onProgress:O(s.onProgress,g)})):o.createElement(e,a.__assign(a.__assign({controls:!1},s),{ref:b,onPlay:O(s.onPlay,f),onPause:O(s.onPause,p),onVolumeChange:O(s.onVolumeChange,v),onDurationChange:O(s.onDurationChange,y),onTimeUpdate:O(s.onTimeUpdate,j),onProgress:O(s.onProgress,g)}));var h=!1,m={play:function(){var e=b.current;if(e&&!h){var t=e.play();if("object"===typeof t){h=!0;var n=function(){h=!1};t.then(n,n)}return t}},pause:function(){var e=b.current;if(e&&!h)return e.pause()},seek:function(e){var t=b.current;t&&void 0!==d.duration&&(e=Math.min(d.duration,Math.max(0,e)),t.currentTime=e)},volume:function(e){var t=b.current;t&&(e=Math.min(1,Math.max(0,e)),t.volume=e,u({volume:e}))},mute:function(){var e=b.current;e&&(e.muted=!0)},unmute:function(){var e=b.current;e&&(e.muted=!1)}};return i.useEffect((function(){var e=b.current;e&&(u({volume:e.volume,muted:e.muted,paused:e.paused}),s.autoPlay&&e.paused&&m.play())}),[s.src]),[n,d,m,b]}}},1378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(191);t.default=function(e){void 0===e&&(e={});var t=a.useState(e),n=t[0],o=t[1];return[n,a.useCallback((function(e){o((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[o])]}},1379:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}},1384:function(e,t,n){e.exports=n(305)},1385:function(e,t,n){var a={"./classic/pages":[1606,17,128],"./modern/pages":[1605,17,129]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(o)}))}o.keys=function(){return Object.keys(a)},o.id=1385,e.exports=o},1386:function(e,t,n){"use strict";var a=n(1387);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var o=a(n(1388));e.exports=t.default},1387:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},1388:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},1389:function(e,t,n){"use strict";function a(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=a(e.className,t):e.setAttribute("class",a(e.className&&e.className.baseVal||"",t))}},1390:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};a.get||a.set?Object.defineProperty(t,n,a):t[n]=e[n]}return t.default=e,t}(n(239)),o=r(n(191)),i=r(n(309)),c=n(1062);n(1063);function r(e){return e&&e.__esModule?e:{default:e}}var s="unmounted";t.UNMOUNTED=s;var l="exited";t.EXITED=l;var d="entering";t.ENTERING=d;var u="entered";t.ENTERED=u;var b="exiting";t.EXITING=b;var O=function(e){var t,n;function a(t,n){var a;a=e.call(this,t,n)||this;var o,i=n.transitionGroup,c=i&&!i.isMounting?t.enter:t.appear;return a.appearStatus=null,t.in?c?(o=l,a.appearStatus=d):o=u:o=t.unmountOnExit||t.mountOnEnter?s:l,a.state={status:o},a.nextCallback=null,a}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var c=a.prototype;return c.getChildContext=function(){return{transitionGroup:null}},a.getDerivedStateFromProps=function(e,t){return e.in&&t.status===s?{status:l}:null},c.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},c.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==d&&n!==u&&(t=d):n!==d&&n!==u||(t=b)}this.updateStatus(!1,t)},c.componentWillUnmount=function(){this.cancelNextCallback()},c.getTimeouts=function(){var e,t,n,a=this.props.timeout;return e=t=n=a,null!=a&&"number"!==typeof a&&(e=a.exit,t=a.enter,n=void 0!==a.appear?a.appear:t),{exit:e,enter:t,appear:n}},c.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=i.default.findDOMNode(this);t===d?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===l&&this.setState({status:s})},c.performEnter=function(e,t){var n=this,a=this.props.enter,o=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,i=this.getTimeouts(),c=o?i.appear:i.enter;t||a?(this.props.onEnter(e,o),this.safeSetState({status:d},(function(){n.props.onEntering(e,o),n.onTransitionEnd(e,c,(function(){n.safeSetState({status:u},(function(){n.props.onEntered(e,o)}))}))}))):this.safeSetState({status:u},(function(){n.props.onEntered(e)}))},c.performExit=function(e){var t=this,n=this.props.exit,a=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:b},(function(){t.props.onExiting(e),t.onTransitionEnd(e,a.exit,(function(){t.safeSetState({status:l},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:l},(function(){t.props.onExited(e)}))},c.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},c.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},c.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(a){n&&(n=!1,t.nextCallback=null,e(a))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},c.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var a=null==t&&!this.props.addEndListener;e&&!a?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},c.render=function(){var e=this.state.status;if(e===s)return null;var t=this.props,n=t.children,a=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,["children"]);if(delete a.in,delete a.mountOnEnter,delete a.unmountOnExit,delete a.appear,delete a.enter,delete a.exit,delete a.timeout,delete a.addEndListener,delete a.onEnter,delete a.onEntering,delete a.onEntered,delete a.onExit,delete a.onExiting,delete a.onExited,"function"===typeof n)return n(e,a);var i=o.default.Children.only(n);return o.default.cloneElement(i,a)},a}(o.default.Component);function f(){}O.contextTypes={transitionGroup:a.object},O.childContextTypes={transitionGroup:function(){}},O.propTypes={},O.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},O.UNMOUNTED=0,O.EXITED=1,O.ENTERING=2,O.ENTERED=3,O.EXITING=4;var p=(0,c.polyfill)(O);t.default=p},1391:function(e,t,n){var a=n(1392),o=n(33),i=/[&<>"']/g,c=RegExp(i.source);e.exports=function(e){return(e=o(e))&&c.test(e)?e.replace(i,a):e}},1392:function(e,t,n){var a=n(533)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=a},1736:function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return _}));var a=n(653),o=n.n(a),i=n(857),c=n.n(i),r=n(11),s=n.n(r),l=n(31),d=n.n(l),u=n(2),b=n(3),O=n(0),f=n(1001),p=n(814),v=n(344),y=n(1211),j=n(865),g=n(387),h=n(1007),m=n(827),I=n(202),C=n(245),T=n(954);async function E(){try{const t=Object(u.a)();if(d()(t))throw new Error;await Object(T.b)({sessionExpiryParams:{onClearUserSession:j.d}});const{applicationConfig:a,handshakeDetails:o,error:i}=await function(){var e,t;return Object(C.a)(this,void 0,void 0,(function*(){const n=Object(u.a)();let a,o;try{const{applicationConfigResolvedObject:i,handshakeResponseResolvedObject:c}=yield Object(T.a)(n);if("rejected"===i.status)throw new Error;if(a=i.value,"rejected"===c.status)throw c.reason;o=c.value;let r={ANALYTICS:!0};return(null===(t=null===(e=a.otherConfigs)||void 0===e?void 0:e.settings)||void 0===t?void 0:t.cookieConsent)&&(r=n.cookieConsent?Object(u.d)(n.cookieConsent):{ANALYTICS:!1}),Object(u.f)(r),Object(T.d)(a),{applicationConfig:a,handshakeDetails:o}}catch(i){return{applicationConfig:a,handshakeDetails:o,error:i}}}))}();if(a&&o&&!i){if(await Object(T.e)({applicationConfig:a,handshakeDetails:o}),!Object(O.Q)()){const{ssoParams:t,shouldTriggerSSOBasedOnAppConfig:n}=Object(m.a)(o,a);if(n){try{await Object(m.c)({ssoId:t.idpId})}catch(e){Object(I.b)(e)}return}}Object(h.a)(o,a),a.hasPrompts&&n.e(67).then(n.bind(null,1703)).then((e=>{let{default:t}=e;t(a,o)}));return void(0,(await Promise.resolve().then(n.bind(null,948))).default)(null,{applicationConfig:a,handshakeDetails:o,chatSettings:t,subscribeToEvent:j.c})}if(i){const e=v.a.getUserSettings(t);if(!(Object(g.g)(i)&&e&&y.a.getOneTimeToken(e)&&a))throw i;(0,(await Promise.resolve().then(n.bind(null,948))).default)(i,{applicationConfig:a,handshakeDetails:o,chatSettings:t,subscribeToEvent:j.c})}}catch(e){await Object(j.b)(e)}}var x=n(1059),S=n(643);const _=()=>{if(function(){async function e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];Object(p.a)(f.a.getQueue(),e,...n)}const t=Object(u.c)();e.q=t?t.q:[],e.loaded=!0,Object(b.d)().sprChat=e}(),Object(O.P)()){const e=Object(O.A)();x.a.preload(e)}const e=Object(u.c)();f.a.addCmdToQueue(f.a.getQueue(),...e.q),E();const{meetingId:t,user:a,otp:i}=Object(u.a)(),r=s()(a,"oneTimeToken");d()(t)&&d()(r)&&d()(i)||e("open");const{autoTrigger:l}=Object(u.a)();let v;v=!0===l?0:o()(l)?1e3*Math.max(l,0):null,c()(v)||setTimeout((()=>{e("openNewConversation")}),v),Object(S.c)((()=>Promise.resolve().then(n.bind(null,948))))}},1746:function(e,t,n){"use strict";var a=n(191);t.a=function(e,t){var n=function(){var e=Object(a.useRef)(!0);return e.current?(e.current=!1,!0):e.current}();Object(a.useEffect)((function(){if(!n)return e()}),t)}},208:function(e,t,n){"use strict";var a=n(191),o=n(1213);t.a=function(){return Object(a.useContext)(o.a)}},224:function(e,t,n){"use strict";var a=n(193);t.a=Object(a.d)({goBack:{id:"goBack",defaultMessage:"Go back"},liveChatBox:{id:"liveChatBox",defaultMessage:"Live chat box"},liveChatNotification:{id:"liveChatNotification",defaultMessage:"Live chat notification"},closeChat:{id:"closeChat",defaultMessage:"Close chat"},liveChat:{id:"liveChat",defaultMessage:"Live chat"},conversationClosed:{id:"conversationClosed",defaultMessage:"Conversation closed"},submit:{id:"submit",defaultMessage:"Submit"},textArea:{id:"textArea",defaultMessage:"Send your message here"},attachment:{id:"attachment",defaultMessage:"Attachment"},emoji:{id:"emoji",defaultMessage:"Emoji"},moreActions:{id:"moreActions",defaultMessage:"More actions"},unreadMessages:{id:"unreadMessages",defaultMessage:"{count} Unread messages"},unreadMessage:{id:"unreadMessage",defaultMessage:"{count} Unread message"},newNotifications:{id:"newNotifications",defaultMessage:"{count} New notifications"},newNotification:{id:"newNotification",defaultMessage:"{count} New notification"},agentImage:{id:"agentImage",defaultMessage:"Agent Image"},brandImage:{id:"brandImage",defaultMessage:"Brand Image"},homeScreen:{id:"homeScreen",defaultMessage:"Live chat home screen"},newConversationCard:{id:"newConversationCard",defaultMessage:"New conversation"},existingConversationCard:{id:"existingConversationCard",defaultMessage:"Existing conversations"},conversationScreen:{id:"conversationScreen",defaultMessage:"Conversation Screen"},conversationListScreen:{id:"conversationListScreen",defaultMessage:"Conversation List Screen"},persistentMenu:{id:"persistentMenu",defaultMessage:"Menu"},brandLogo:{id:"brandLogo",defaultMessage:"Logo of {name}"},confirmationDialog:{id:"confirmationDialog",defaultMessage:"Confirmation dialog"},close:{id:"close",defaultMessage:"Close"},openChat:{id:"openChat",defaultMessage:"Open chat"},startListening:{id:"startListening",defaultMessage:"Start Listening"},stopListening:{id:"stopListening",defaultMessage:"Stop Listening"},homePageContent:{id:"homePageContent",defaultMessage:"Home Page Content"},success:{id:"success",defaultMessage:"Success"},failed:{id:"failed",defaultMessage:"Failed"}})},255:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(191),o=n(1051);function i(){return Object(a.useContext)(o.a)}},261:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(191);const o=e=>{const t=Object(a.useRef)(e);return t.current=e,t}},266:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"j",(function(){return b})),n.d(t,"h",(function(){return O})),n.d(t,"d",(function(){return f})),n.d(t,"i",(function(){return p}));var a=n(1042),o=n.n(a),i=n(265);function c(e){return{type:e?i.b:i.d,payload:{}}}function r(){return{type:i.l,payload:{}}}const s=o()(c,!0);o()(c,!1);function l(){return{type:i.g,payload:{}}}function d(e){return{type:i.n,payload:e}}function u(e,t,n){return{type:i.x,payload:{userPreferenceKey:e,newValue:t,oldValue:n}}}function b(e,t){return{type:i.y,payload:{userPreferenceKey:e,value:t}}}const O=e=>{let{value:t}=e;return{type:i.t,payload:{value:t}}};function f(e){let{waitTime:t,reason:n}=e;return{type:i.m,payload:{waitTime:t,reason:n}}}function p(){return{type:i.u,payload:{}}}},274:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n(191),o=n(196),i=n(220),c=n(213);const r=e=>Object(c.t)(Object(i.c)(e)),s=e=>{const t=Object(a.useCallback)((t=>{if(e){const n=r(t);return Object(c.i)(n,e)}}),[e]);return Object(o.d)(t)}},275:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),t.b={DIALOGUE:"DIALOGUE",MEDIA:"MEDIA"};const a={FAILED:"FAILED",UPLOADED:"UPLOADED",UPLOADING:"UPLOADING"}},281:function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));var a=n(1737),o=n(1710),i=n(1614);const c=Object(a.a)("conversationScreen"),r=Object(a.a)("callScreen"),s=Object(a.a)("videoCall"),l=Object(a.a)("audioCall"),d=Object(a.a)("settings"),u=Object(a.a)("trigger"),b=Object(a.a)("proactivePrompt"),O=Object(a.a)("theme"),f=Object(a.a)("icons"),p=Object(a.a)("minimizeChatBoxOnCloseInPhone"),v=Object(a.a)("header"),y=Object(a.a)("label"),j=Object(a.a)("openInFullScreen"),g=Object(a.a)("label"),h=Object(a.a)("defaultHidden"),m=Object(a.a)("initiallyHidden"),I=Object(a.a)("hideWhenOpen"),C=Object(a.a)("canManuallyRemove"),T=Object(a.a)("invisibilityCriteria"),E=Object(a.a)("animation"),x=Object(a.a)("contactDetailsMessage"),S=Object(a.a)("maximumOpenConversations"),_=Object(a.a)("hour12"),A=Object(a.a)("externalLocaleData"),P=Object(a.a)("homeScreen"),R=Object(a.a)("conversationCard"),w=Object(a.a)("hideWavingHandIcon"),N=Object(a.a)("shouldShow"),M=Object(a.a)("agents"),L=Object(a.a)("button"),k=Object(a.a)("enableIndividualMessageDismissal"),D=Object(a.a)("infoCard"),U=Object(a.a)("existingConversationCard"),B=Object(a.a)("showHeader");class G{}G.getDefaultMessages=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.lastMessage},G.getWaitTimeConfig=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.waitTimeConfig},G.getSurveyActionsToShowByVariant=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.surveyScreen)||void 0===t?void 0:t.actionsToShowByVariant},G.getActionsToShowByVariant=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.actionsToShowByVariant},G.getConversationActionOnPageCloseByScope=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.actionOnPageCloseByScope},G.shouldShowSenderNameInConversationScreen=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.showSenderName},G.getFooterActionsToShow=e=>{var t,n;return null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.actionsToShow},G.getActionOnPageCloseByScope=e=>{var t;return null===(t=e.allScreens)||void 0===t?void 0:t.actionOnPageCloseByScope},G.getAnalyticsSettings=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.settings)||void 0===t?void 0:t.analyticsSettings},G.hour12Enabled=Object(o.a)(Object(i.a)(_),Object(i.a)(d)),G.getTheme=Object(o.a)(Object(i.a)(O)),G.getIcons=Object(o.a)(Object(i.a)(f),Object(i.a)(O)),G.conversationTagsEnabled=e=>{var t;return null===(t=e.allScreens)||void 0===t?void 0:t.conversationTagsEnabled},G.showCaseNumberEnabled=e=>{var t;return null===(t=e.allScreens)||void 0===t?void 0:t.showCaseNumber},G.isSprinklrAnalyticsEnabled=e=>{var t,n,a;return null===(a=null===(n=null===(t=e.settings)||void 0===t?void 0:t.analyticsSettings)||void 0===n?void 0:n.sprinklrAnalytics)||void 0===a?void 0:a.enabled},G.getGoogleTrackerId=e=>{var t,n,a;return null===(a=null===(n=null===(t=e.settings)||void 0===t?void 0:t.analyticsSettings)||void 0===n?void 0:n.googleAnalytics)||void 0===a?void 0:a.trackerId},G.getMaximumOpenConversations=Object(o.a)(Object(i.a)(S),Object(i.a)(d)),G.getDisableManualNewConversation=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.settings)||void 0===t?void 0:t.disableManualNewConversation},G.getUserPreferences=Object(i.a)(d),G.getContactDetailsMessage=Object(o.a)(Object(i.a)(x),Object(i.a)(c)),G.getTriggerConfig=Object(i.a)(u),G.getInvisibilityCriteriaOfTrigger=Object(o.a)(Object(i.a)(T),G.getTriggerConfig),G.getAnimationInfoOfTrigger=Object(o.a)(Object(i.a)(E),G.getTriggerConfig),G.getTriggerLabel=Object(o.a)(Object(i.a)(g),G.getTriggerConfig),G.isChatTriggerHidden=Object(o.a)(Object(i.a)(h),Object(i.a)(u)),G.isChatTriggerInitiallyHidden=Object(o.a)(Object(i.a)(m),Object(i.a)(u)),G.isTriggerHiddenWhenMaximised=Object(o.a)(Object(i.a)(I),Object(i.a)(u)),G.canTriggerBeManuallyRemoved=Object(o.a)(Object(i.a)(C),Object(i.a)(u)),G.getExternalLocaleData=Object(o.a)(Object(i.a)(A),Object(i.a)(d)),G.shouldHideWavingHandIcon=Object(o.a)(Object(i.a)(w),Object(i.a)(R),Object(i.a)(P)),G.shouldShowAgents=Object(o.a)(Object(i.a)(N),Object(i.a)(M),Object(i.a)(R),Object(i.a)(P)),G.getAgents=Object(o.a)(Object(i.a)(M),Object(i.a)(R),Object(i.a)(P)),G.shouldShowHeaderInExistingConversationCard=Object(o.a)(Object(i.a)(B),Object(i.a)(U),Object(i.a)(P)),G.isMinimizeOnCloseInPhoneForVideoCall=Object(o.a)(Object(i.a)(p),Object(i.a)(s)),G.getNewConversationButton=Object(o.a)(Object(i.a)(L),Object(i.a)(R),Object(i.a)(P)),G.isMinimizeOnCloseInPhoneForAudioCall=Object(o.a)(Object(i.a)(p),Object(i.a)(l)),G.shouldCallOpenInFullScreen=Object(o.a)(Object(i.a)(j),Object(i.a)(r)),G.getVideoCallHeaderLabel=Object(o.a)(Object(i.a)(y),Object(i.a)(v),Object(i.a)(s)),G.getAudioCallHeaderLabel=Object(o.a)(Object(i.a)(y),Object(i.a)(v),Object(i.a)(l)),G.getPromptEnableIndividualMessageDismissal=Object(o.a)(Object(i.a)(k),Object(i.a)(b)),G.getChatMessageComposerMaxCharacters=e=>{var t,n,a;return null===(a=null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.chatMessageComposer)||void 0===a?void 0:a.maxCharacters},G.getChatMessageComposerSendButton=e=>{var t,n,a;return null===(a=null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.chatMessageComposer)||void 0===a?void 0:a.sendButton},G.shouldHideOnDisableManualResponse=e=>{var t,n,a;return null===(a=null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.chatMessageComposer)||void 0===a?void 0:a.hideOnDisableManualResponse},G.getInfoCard=Object(o.a)(Object(i.a)(D),Object(i.a)(c))},288:function(e,t,n){"use strict";var a=n(197),o=n(191),i=n(199),c=n(497),r=n(201),s=n(0),l=n(612),d=n(886),u=n(726),b=n(192);const O=Object(o.forwardRef)(((e,t)=>{const n=Object(r.a)(),O=Object(i.b)(),f=n||Object(l.a)(),p=Object(o.useMemo)((()=>Object(s.Q)()?Object(u.i)({theme:O,isPhone:n}):Object(d.e)({theme:O,isContained:f})),[O,n,f]);return Object(b.jsx)(c.a,Object(a.a)({ref:t,borderRadiusStyles:p},e))}));t.a=Object(o.memo)(O)},323:function(e,t,n){"use strict";var a=n(191),o=n(196),i=n(213),c=n(207),r=n(214);const s=e=>Object(i.A)(Object(c.c)(e));t.a=()=>{const e=Object(o.c)(),t=Object(o.d)(s),n=t.loaded;return Object(a.useEffect)((()=>{n||e(Object(r.i)())}),[]),t}},326:function(e,t,n){"use strict";var a=n(191),o=n(1041),i=n(605),c=n(246);var r=()=>{const{subscribe:e,getValue:t}=Object(i.a)();return{subscribe:Object(a.useCallback)(((t,n)=>{const a=c.a.getId(t);return e(a,n)}),[e]),getValue:t}},s=n(1223),l=n(196),d=n(337),u=n.n(d),b=n(221),O=n.n(b),f=n(206),p=n.n(f),v=n(213),y=n(207);const j=e=>Object(v.z)(Object(v.t)(Object(y.c)(e)));var g=()=>{const e=Object(a.useRef)(),t=Object(a.useRef)({}),n=Object(l.d)(j);e.current=n,u()((()=>{p()(t.current,(e=>{e()}))}),[e.current]);return{subscribe:Object(a.useCallback)(((e,n)=>{const a=c.a.getId(e);return t.current={...t.current,[a]:n},()=>{t.current=O()(t.current,a)}}),[]),getValue:Object(a.useCallback)((()=>e.current),[])}},h=n(323);var m=()=>{const e=Object(a.useRef)(),t=Object(a.useRef)({}),n=Object(h.a)().ids.length;e.current=n,u()((()=>{p()(t.current,(e=>{e()}))}),[e.current]);return{subscribe:Object(a.useCallback)(((e,n)=>{const a=c.a.getId(e);return t.current={...t.current,[a]:n},()=>{t.current=O()(t.current,a)}}),[]),getValue:Object(a.useCallback)((()=>e.current),[])}},I=n(11),C=n.n(I),T=n(263),E=n.n(T),x=n(472),S=n(464);var _=()=>{const e=Object(a.useRef)(0),t=Object(x.a)();e.current=S.a.getTimeToAvailability(t);const n=Object(a.useRef)({}),o=Object(a.useCallback)((()=>e.current),[]);return{subscribe:Object(a.useCallback)(((t,a)=>{const o=c.a.getId(t),i=C()(t,"details.timeToBusinessHours");let r,s=-1;return!E()(i)&&i>0?s=i:!E()(e.current)&&e.current>0&&(s=e.current),s>=0&&(r=window.setTimeout(a,s)),n.current={...n.current,[o]:r},()=>{clearTimeout(C()(n.current,`${o}.timeoutId`)),n.current=O()(n.current,o)}}),[]),getValue:o}},A=n(238);var P=()=>{const{device:e}=Object(A.a)(),t=Object(a.useRef)({}),n=Object(a.useRef)(e);n.current=e,u()((()=>{p()(t.current,(e=>{e()}))}),[n.current]);const o=Object(a.useCallback)(((e,n)=>{const a=c.a.getId(e);return t.current={...t.current,[a]:n},()=>{t.current=O()(t.current,a)}}),[]);return{getValue:Object(a.useCallback)((()=>n.current),[]),subscribe:o}},R=n(346);const w={[R.a.USER_IP_DETAILS_CITY]:"city",[R.a.USER_IP_DETAILS_COUNTRY_LONG]:"countryLong",[R.a.USER_IP_DETAILS_COUNTRY_SHORT]:"countryShort",[R.a.USER_IP_DETAILS_REGION]:"region"};var N=()=>{const e=Object(a.useRef)(),t=Object(x.a)();e.current=S.a.getUserIPDetails(t);const n=Object(a.useRef)({});u()((()=>{p()(n.current,(e=>{e()}))}),[e.current]);return{subscribe:Object(a.useCallback)(((e,t)=>{const a=c.a.getId(e);return n.current={...n.current,[a]:t},()=>{n.current=O()(n.current,a)}}),[]),getValue:Object(a.useCallback)((()=>t=>{var n;const a=c.a.getField(t);return null===(n=e.current)||void 0===n?void 0:n[w[a]]}),[])}},M=n(336),L=n(2),k=n(0);var D=()=>{const e=Object(L.a)(),t=Object(a.useRef)(e.userContext),n=Object(a.useRef)({}),o=Object(a.useCallback)((e=>{t.current=e,p()(n.current,(e=>{e()}))}),[]);Object(a.useEffect)((()=>(Object(k.S)("userContext",o),()=>{Object(k.T)("userContext",o)})),[]);return{subscribe:Object(a.useCallback)(((e,t)=>{const a=e.id;return n.current={...n.current,[a]:t},()=>{n.current=O()(n.current,a)}}),[]),getValue:Object(a.useCallback)((()=>e=>{var n,a;const o=e.field,i=Object(M.c)(o);return null===(n=t.current)||void 0===n||null===(a=n[i])||void 0===a?void 0:a[0]}),[])}},U=n(1043),B=n(1045),G=n(31),$=n.n(G),F=n(60),V=n.n(F),H=n(50),W=n.n(H),z=n(223),q=n(229),K=n(504),X=n(663),Z=n(338),Y=n(561),Q=n(420),J=n(220),ee=n(332);const te="ANY";var ne=()=>{const e=Object(h.a)(),t=Object(z.a)(),n=Object(q.a)(),o=Object(l.d)(y.b),i=Object(l.d)(y.c),{isLocked:r}=Object(Z.d)({chatState:o,chatConversationsState:i,customizationSettings:t,getLocaleMessage:n}),s=Object(K.a)(),d=Object(l.d)(J.b),u=Object(Q.c)(d),b=$()(u),f=Object(X.a)((t=>{if(t===te)return{[ee.a.AUDIO]:s&&b&&(!r||!!Object(Y.b)(e,ee.a.AUDIO)),[ee.a.VIDEO]:s&&b&&(!r||!!Object(Y.b)(e,ee.a.VIDEO))};const{audioCallEnabled:n,videoCallEnabled:a,closed:o}=e.byId[t]||{},i=!o&&s&&b;return{[ee.a.AUDIO]:i&&(null===n||void 0===n||n),[ee.a.VIDEO]:i&&(null===a||void 0===a||a)}})),v=Object(a.useRef)({}),j=Object(a.useRef)({}),g=Object(a.useCallback)(((e,t)=>{const n=c.a.getId(e);j.current={...j.current,[n]:t};const{conversationId:a=te}=c.a.getDetails(e)||{};return v.current[a]=f(a),()=>{j.current=O()(j.current,n)}}),[]),m=Object(a.useCallback)((()=>e=>{const{callTypes:t,conversationId:n=te}=c.a.getDetails(e)||{},a=null===t||void 0===t?void 0:t.includes(ee.a.AUDIO),o=null===t||void 0===t?void 0:t.includes(ee.a.VIDEO),{[ee.a.AUDIO]:i,[ee.a.VIDEO]:r}=v.current[n]||{};return a&&!o?!!i:(o&&!a||!!i)&&!!r}),[]);let I=!1;return W()(v.current,((e,t)=>{const n=f(t);V()(n,e)||(I=!0,v.current[t]=n)})),I&&p()(j.current,(e=>{null===e||void 0===e||e()})),{subscribe:g,getValue:m}},ae=n(261),oe=n(227),ie=n(228);var ce=()=>{const e=Object(l.d)(J.h),t=Object(ie.d)(e),n=Object(oe.c)(t),o=Object(a.useRef)({}),i=Object(ae.a)(n);u()((()=>{p()(o.current,(e=>{e()}))}),[i.current]);const r=Object(a.useCallback)(((e,t)=>{const n=c.a.getId(e);return o.current={...o.current,[n]:t},()=>{o.current=O()(o.current,n)}}),[]);return{getValue:Object(a.useCallback)((()=>i.current),[]),subscribe:r}},re=n(210),se=n.n(re),le=n(51),de=n.n(le),ue=n(256),be=n(1049);const Oe=new class{constructor(){this.subscribers={},this.filterPoller=void 0,this.visibilitychangeHandler=()=>{var e;if(document.hidden)null===(e=this.filterPoller)||void 0===e||e.stop();else if(Object.keys(this.subscribers).length>0){var t;null===(t=this.filterPoller)||void 0===t||t.start()}},this.startPolling=()=>{var e;window.document.addEventListener("visibilitychange",this.visibilitychangeHandler),null===(e=this.filterPoller)||void 0===e||e.start()},this.stopPolling=()=>{var e;window.document.removeEventListener("visibilitychange",this.visibilitychangeHandler),null===(e=this.filterPoller)||void 0===e||e.stop()},this.subscribe=(e,t)=>{const n=e.id;return this.subscribers[n]={cb:t,filter:{field:e.field,filterType:e.filterType,details:e.details}},1===Object.keys(this.subscribers).length&&this.startPolling(),()=>{delete this.subscribers[n],0===Object.keys(this.subscribers).length&&this.stopPolling()}},this.subscribers={};this.filterPoller=new be.a((async()=>{try{const{data:e}=await Object(ue.c)("livechat/conversation/process-filters",{filterDetails:Object.keys(this.subscribers).reduce(((e,t)=>(e.push({id:t,filter:this.subscribers[t].filter}),e)),[])},{headers:{"x-chat-auto":!0}});Object.keys(e).forEach((t=>{this.subscribers[t].cb(e[t])}))}catch(e){}}),{pollInterval:12e4})}};var fe=Object.freeze(Oe),pe=n(1050);const ve=(()=>{const e={};return{get:t=>e[t],set:(t,n)=>{e[t]=n}}})(),ye="AVAILABLE_AGENTS",je="AGENT_OUT_OF_CAPACITY",ge="WORK_QUEUE_WAIT_TIME",he={[ye]:e=>{const t=S.a.getNoOfAgentsAvailable(e);return e=>{var n,a;return null!==(n=null===(a=e.details)||void 0===a?void 0:a.noOfAgentsAvailable)&&void 0!==n?n:t}},[je]:e=>{const t=S.a.getNumberOfPendingCases(e);return e=>{var n,a;return null!==(n=null===(a=e.details)||void 0===a?void 0:a.numberOfPendingCases)&&void 0!==n?n:t}},[ge]:e=>{const t=S.a.getWorkQueueWaitTime(e);return e=>{var n,a;return null!==(n=null===(a=e.details)||void 0===a?void 0:a.estimatedWaitTimeForWorkQueue)&&void 0!==n?n:t}}};var me=e=>{const t=Object(x.a)(),n=he[e];return(e=>{var t,n;const o=null===(t=Object(z.a)())||void 0===t||null===(n=t.filterPoll)||void 0===n?void 0:n.enable;return Object(pe.a)({callback:()=>{fe.stopPolling()}}),{getValue:Object(a.useCallback)((()=>e=>ve.get(e.id)),[]),subscribe:Object(a.useCallback)(((t,n)=>{de()(ve.get(t.id))&&ve.set(t.id,e(t));const a=o?fe.subscribe(t,(a=>{const o=e({details:a});ve.get(t.id)!==o&&(ve.set(t.id,o),n())})):se.a;return()=>{a()}}),[o])}})(Object(a.useMemo)((()=>n(t)),[t]))},Ie=n(274),Ce=n(664),Te=n(758);const Ee=e=>Object(Ie.a)(e).byCaseId,xe=e=>Object(v.v)(Object(Ie.a)(e));var Se=()=>{var e;const[t,n]=Object(a.useState)(void 0),o=Object(l.d)(Ee),i=Object(l.d)(xe);Object(Ce.a)({route:/.*/,callback:e=>{n(Object(Te.c)(e.pathname,e.hash).matchedConversationId)},listenOnMount:!0}),Object(a.useEffect)((()=>{const e=Object(Z.a)(t);e&&o[e]&&Object(v.D)(o[e])&&n(o[e])}),[o,t]);const{agentAssigned:r=!1,workQueueAssigned:s=!1}=null!==(e=Object(Ie.b)(t))&&void 0!==e?e:{},d=Object(a.useMemo)((()=>{const e=!t||!i.includes(t);return(e=>{let{agentAssigned:t,workQueueAssigned:n,isTemporaryConversation:a}=e;return a?null:t?"AGENT":n?"WORK_QUEUE":"BOT"})({agentAssigned:r,workQueueAssigned:s,isTemporaryConversation:e})}),[r,s,i,t]),b=Object(a.useRef)({}),f=Object(ae.a)(d);u()((()=>{p()(b.current,(e=>{e()}))}),[f.current]);const y=Object(a.useCallback)(((e,t)=>{const n=c.a.getId(e);return b.current={...b.current,[n]:t},()=>{b.current=O()(b.current,n)}}),[]);return{getValue:Object(a.useCallback)((()=>e=>{var t;return null!==(t=f.current)&&void 0!==t?t:{...e,details:{...e.details,result:!1}}}),[]),subscribe:y}},_e=n(287),Ae=n.n(_e),Pe=n(3);var Re=()=>{const[e,t]=Object(a.useState)(!1),n=Object(a.useRef)(null),o=Object(Pe.a)(),i=Object(a.useRef)({}),r=Object(ae.a)(e);u()((()=>{p()(i.current,(e=>{e()}))}),[e]);const s=Object(a.useCallback)(Ae()((()=>{t(!0),n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{t(!1)}),1e3)}),100),[]),l=Object(a.useCallback)(((e,t)=>{const a=c.a.getId(e),r=0===Object.keys(i.current).length;return i.current={...i.current,[a]:t},r&&o&&o.addEventListener("scroll",s),()=>{i.current=O()(i.current,a),0===Object.keys(i.current).length&&o&&(o.removeEventListener("scroll",s),n.current&&(clearTimeout(n.current),n.current=null))}}),[o,s]);return{getValue:Object(a.useCallback)((()=>r.current),[]),subscribe:l}},we=n(52);var Ne=()=>{const{getValue:e,subscribe:t}=r(),{getValue:n,subscribe:o}=Object(s.a)(),{getValue:i,subscribe:l}=ne(),{getValue:d,subscribe:u}=g(),{getValue:b,subscribe:O}=m(),{getValue:f,subscribe:p}=_(),{getValue:v,subscribe:y}=me(ye),{getValue:j,subscribe:h}=me(ge),{getValue:I,subscribe:C}=me(je),{getValue:T,subscribe:E}=P(),{getValue:x,subscribe:S}=N(),{getValue:A,subscribe:w}=D(),{getValue:L,subscribe:k}=Object(U.a)(),{getValue:G,subscribe:$}=Object(B.a)(),{getValue:F,subscribe:V}=ce(),{getValue:H,subscribe:W}=Se(),{getValue:z,subscribe:q}=Re();return{getValue:Object(a.useCallback)((()=>({[R.a.CURRENT_URL]:e(),[R.a.TOTAL_TIME_SPENT]:n(),[R.a.IS_CONVERSATION_OPEN]:d(),[R.a.DOES_CONVERSATION_EXIST]:b(),[R.a.AVAILABLE_AGENTS]:v(),[R.a.WORK_QUEUE_WAIT_TIME]:j(),[R.a.AGENT_OUT_OF_CAPACITY]:I(),[R.a.BUSINESS_HOURS]:f(),[R.a.DEVICE_TYPE]:T(),[R.a.USER_IP_DETAILS_CITY]:x(),[R.a.USER_IP_DETAILS_COUNTRY_LONG]:x(),[R.a.USER_IP_DETAILS_COUNTRY_SHORT]:x(),[R.a.USER_IP_DETAILS_REGION]:x(),[R.a.USER_AGENT]:Object(we.g)(),[R.a.PROFILE_CUSTOM_FIELD]:A(),[R.a.VERTICAL_PAGE_SCROLL_DEPTH]:L(),[R.a.HORIZONTAL_PAGE_SCROLL_DEPTH]:G(),[R.a.INITIATE_OUTGOING_CALL]:i(),[R.a.IS_USER_AUTHENTICATED]:F(),[R.a.CASE_ASSIGNMENT]:H(),[R.a.PAGE_SCROLL]:z()})),[e,n,d,b,f,v,j,I,T,x,A,L,G,i,F,H,z]),subscribe:Object(a.useCallback)(((e,n)=>{if(Object(M.e)(c.a.getField(e)))return w(e,n);switch(c.a.getField(e)){case R.a.TOTAL_TIME_SPENT:return o(e,n);case R.a.CURRENT_URL:return t(e,n);case R.a.IS_CONVERSATION_OPEN:return u(e,n);case R.a.DOES_CONVERSATION_EXIST:return O(e,n);case R.a.AVAILABLE_AGENTS:return y(e,n);case R.a.WORK_QUEUE_WAIT_TIME:return h(e,n);case R.a.AGENT_OUT_OF_CAPACITY:return C(e,n);case R.a.BUSINESS_HOURS:return p(e,n);case R.a.DEVICE_TYPE:return E(e,n);case R.a.USER_IP_DETAILS_CITY:case R.a.USER_IP_DETAILS_COUNTRY_LONG:case R.a.USER_IP_DETAILS_COUNTRY_SHORT:case R.a.USER_IP_DETAILS_REGION:return S(e,n);case R.a.VERTICAL_PAGE_SCROLL_DEPTH:return k(e,n);case R.a.HORIZONTAL_PAGE_SCROLL_DEPTH:return $(e,n);case R.a.INITIATE_OUTGOING_CALL:return l(e,n);case R.a.IS_USER_AUTHENTICATED:return V(e,n);case R.a.CASE_ASSIGNMENT:return W(e,n);case R.a.PAGE_SCROLL:return q(e,n);default:return null}}),[t,o,u,O,p,y,h,C,E,S,w,k,$,l,V,W,q])}},Me=n(32);t.a=(e,t)=>{const{getValue:n,subscribe:i}=Ne(),c=Object(a.useCallback)((()=>{var e,a;return{...null!==(e=null===t||void 0===t||null===(a=t._getStaticValueMap)||void 0===a?void 0:a.call(t))&&void 0!==e?e:Me.a,...n()}}),[n,null===t||void 0===t?void 0:t._getStaticValueMap]);return Object(o.a)(e,{...t,getValue:c,subscribe:i})}},333:function(e,t,n){"use strict";var a=n(497);n.d(t,"a",(function(){return a.a}));n(288)},338:function(e,t,n){"use strict";n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return I})),n.d(t,"d",(function(){return C})),n.d(t,"b",(function(){return T})),n.d(t,"f",(function(){return E})),n.d(t,"c",(function(){return x}));n(31);var a=n(11),o=n.n(a),i=n(263),c=n.n(i),r=n(1048),s=n.n(r),l=n(50),d=n.n(l),u=n(466),b=n(257),O=n(220),f=n(213),p=n(308),v=n(49),y=n(0);const j=/^CASE_(\w+)/,g=/^CONVERSATION_(\w+)/,h=e=>e&&!!e.match(g),m=e=>e&&!!e.match(j),I=e=>m(e)?e.match(j)[0].split("_")[1]:void 0;function C(e){let{chatState:t,chatConversationsState:n,customizationSettings:a,getLocaleMessage:i}=e;const r=Object(f.t)(n),s=Object(b.a)(t),l=Object(b.d)(t),d=null===a||void 0===a?void 0:a.maximumOpenConversations,u=o()(d,"limit"),O=Object(f.z)(r),p=!!u&&!c()(O)&&u<=O,v=!!o()(d,"replaceNewConversationButton");let y;return s?y=l:p&&(y=v?void 0:i(d,"label")),{isLocked:s||p,lockReason:y}}const T=e=>{const t=Object(O.c)(e),n=Object(f.t)(t),a=Object(p.b)().location.pathname,o=Object(u.a)(a,{path:"/conversation/:conversationId/:transientId?"});if(!o)return{isConversationPath:!1,conversationId:void 0};const i=null===o||void 0===o?void 0:o.params.conversationId,c=null===o||void 0===o?void 0:o.params.transientId;if(c&&["survey","guided-workflow","knowledge-base","sprinklr-entities","personal-shopper"].includes(c))return{isConversationPath:!0,conversationId:i};if("all"===i)return{isConversationPath:!1,conversationId:void 0};if("new"===i)return{isConversationPath:!0,conversationId:c||v.g};if("last"===i){return{isConversationPath:!0,conversationId:Object(f.b)(n)?Object(f.f)(Object(f.A)(t))||v.g:void 0}}if(h(i))return{isConversationPath:!0,conversationId:i};const r=I(i);return m(i)&&r?{isConversationPath:!0,conversationId:Object(f.l)(n,r)}:{isConversationPath:!0,conversationId:i}},E=(e,t)=>-1===s()(Object(f.v)(e),t),x=e=>{const t=e.chatConversations.conversations.byId;let n=e.chatConversations.conversations.ids;if(Object(y.E)()){const{conversationId:t}=T(e);if(!t)return!1;n=[t]}let a=!1;return d()(n,(e=>{if(t[e]&&!t[e].closed&&!t[e].deleted&&t[e].agentAssigned)return a=!0,!1})),a}},348:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(191),o=n(499),i=n.n(o),c=n(1),r=n.n(c),s=n(643);const l={defer:!0,skip:!1},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;const n=Object(a.useRef)(e),{defer:o=!0,skip:c}=t,d=Object(a.useRef)(),u=Object(a.useCallback)((()=>r()(n.current)?n.current.forEach((e=>e.preload())):n.current.preload()),[]);Object(a.useEffect)((()=>{let e;return c||(i()(o)||!o?d.current=setTimeout(u,o||0):e=Object(s.c)(u)),()=>{var t;d.current&&(clearTimeout(d.current),d.current=void 0),null===(t=e)||void 0===t||t()}}),[c,o,u])}},360:function(e,t,n){"use strict";var a=n(967);n.d(t,"a",(function(){return a.a}))},374:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0);function o(){return Object(a.A)()}},376:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={CONVERSATION:"CONVERSATION",NEW_CONVERSATION:"NEW_CONVERSATION",LAST_CONVERSATION:"LAST_CONVERSATION",EXISTING_CONVERSATION:"EXISTING_CONVERSATION",CONVERSATION_LIST:"CONVERSATION_LIST",HOME:"HOME",KNOWLEDGE_BASE:"KNOWLEDGE_BASE",KNOWLEDGE_BASE_LIST:"KNOWLEDGE_BASE_LIST",SURVEY:"SURVEY",GUIDED_WORKFLOW:"GUIDED_WORKFLOW",401:"401",LOGOUT:"LOGOUT",SPRINKLR_ENTITIES:"SPRINKLR_ENTITIES",PERSONAL_SHOPPER:"PERSONAL_SHOPPER"}},392:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(196),o=n(228),i=n(207);const c=e=>Object(o.c)(Object(i.h)(e));function r(){return Object(a.d)(c)}},393:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(191);const o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.useCallback)((e=>{t.forEach((t=>{t&&("function"===typeof t?t(e):t.current=e)}))}),[...t])}},394:function(e,t,n){"use strict";var a=n(1058),o=n(191);t.a=function(){return Object(o.useContext)(a.a)}},395:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"l",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"j",(function(){return l})),n.d(t,"x",(function(){return d})),n.d(t,"q",(function(){return u})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return O})),n.d(t,"o",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"h",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"i",(function(){return j})),n.d(t,"u",(function(){return g})),n.d(t,"v",(function(){return h})),n.d(t,"r",(function(){return m})),n.d(t,"w",(function(){return I})),n.d(t,"s",(function(){return C})),n.d(t,"t",(function(){return T})),n.d(t,"p",(function(){return E})),n.d(t,"f",(function(){return x})),n.d(t,"k",(function(){return S}));var a=n(525);function o(e){return{type:a.g,payload:e}}function i(e){return{type:a.h,payload:e}}function c(e){return{type:a.m,payload:e}}function r(e){return{type:a.t,payload:e}}function s(e){return{type:a.i,payload:e}}function l(e){return{type:a.p,payload:e}}function d(e){return{type:a.y,payload:e}}function u(e){return{type:a.w,payload:e}}function b(e){return{type:a.c,payload:e}}function O(e){return{type:a.d,payload:e}}function f(e){return{type:a.f,payload:e}}function p(e){return{type:a.e,payload:e}}function v(e){return{type:a.n,payload:e}}function y(e){return{type:a.b,payload:e}}function j(e){return{type:a.o,payload:e}}function g(e){return{type:a.l,payload:e}}function h(e){return{type:a.s,payload:e}}function m(e){return{type:a.u,payload:e}}function I(e){return{type:a.a,payload:e}}function C(e){return{type:a.j,payload:e}}function T(e){return{type:a.q,payload:e}}function E(e){return{type:a.v,payload:e}}function x(e){return{type:a.k,payload:e}}function S(e){return{type:a.r,payload:e}}},421:function(e,t,n){"use strict";var a=n(191),o=n(1036),i=n.n(o),c=n(1035);var r=function(){return Object(a.useContext)(c.a)};t.a=e=>{const[t,n]=r(),o=i()(),c=Object(a.useCallback)((t=>{o()&&n({stateKey:e,state:t})}),[e,n,o]);return Object(a.useEffect)((()=>()=>{n({stateKey:e,state:null})}),[]),[t&&t.stateKey===e?t.state:null,c]}},443:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(11),o=n.n(a),i=n(1737),c=n(1614),r=n(1710);const s=Object(i.a)("otherConfigs"),l=Object(i.a)("mobileConfigs"),d=Object(i.a)("workQueueId"),u=Object(i.a)("cards"),b=Object(i.a)("partnerId"),O=Object(i.a)("name"),f=Object(i.a)("id"),p=Object(i.a)("accountUserId"),v=Object(i.a)("filter"),y=Object(i.a)("visibilityConfig"),j=Object(i.a)("noDisplayConfig"),g=Object(i.a)("triggerAnimationConfig"),h=Object(i.a)("defaultLocale"),m=Object(i.a)("supportedLocales"),I=Object(i.a)("callConfiguration"),C=Object(i.a)("autoExpireUserSessionTimeInMinutes"),T=Object(i.a)("maximumContentLength"),E=Object(i.a)("attachmentTypes");class x{}x.getCustomizationConfig=Object(c.a)(s),x.getMobileConfig=Object(c.a)(l),x.getWorkQueueId=Object(c.a)(d),x.getCards=Object(c.a)(u),x.getParnterId=Object(c.a)(b),x.getAppId=Object(c.a)(f),x.getAccountUserId=Object(c.a)(p),x.getVisibilityConfigFilter=Object(r.a)(Object(c.a)(v),Object(c.a)(y)),x.getNoDisplayConfigFilter=Object(r.a)(Object(c.a)(v),Object(c.a)(j)),x.getTriggerAnimationConfigFilter=Object(r.a)(Object(c.a)(v),Object(c.a)(g)),x.getDefaultLocale=Object(c.a)(h),x.getSupportedLocales=Object(c.a)(m),x.getAccountDisplayName=Object(c.a)(O),x.getCallConfiguration=Object(c.a)(I),x.getMaximumContentLength=Object(c.a)(T),x.getAttachmentTypes=Object(c.a)(E),x.getAutoExpireUserSessionTimeInMinutes=Object(c.a)(C),x.getAudioCallConfiguration=e=>{const t=x.getCallConfiguration(e);return o()(t,"audioConfig")||e.audioChatConfiguration},x.getVideoCallConfiguration=e=>{const t=x.getCallConfiguration(e);return o()(t,"videoConfig")||e.videoChatConfiguration},x.getCallAccountId=e=>{const t=x.getCallConfiguration(e);return o()(t,"accountId")||e.videoChatProviderAccountId}},473:function(e,t,n){"use strict";t.a={CONVERSATION:"CONVERSATION",BANNER:"BANNER",KNOWLEDGE_BASE:"KNOWLEDGE_BASE",INFO_CARD:"INFO_CARD",STATUS_CARD:"STATUS_CARD",CONVERSATION_HISTORY:"CONVERSATION_HISTORY"}},474:function(e,t,n){"use strict";var a=n(191),o=n(202);let i=!1;const c={childList:!0,subtree:!0,attributes:!0};t.a=(e,t)=>{const[n,r]=Object(a.useState)();Object(a.useLayoutEffect)((()=>{const a=[];if(n)if(e.MutationObserver){const o=new e.MutationObserver(t);o.observe(n,c),a.push((()=>o.disconnect()))}else i||(i=!0,Object(o.b)(new Error("window.MutationObserver is undefined")));return()=>{a.forEach((e=>e()))}}),[n,t]);return Object(a.useCallback)((e=>{e&&r(e)}),[])}},475:function(e,t,n){"use strict";var a=n(191),o=n(202);let i=!1;t.a=(e,t)=>{const[n,c]=Object(a.useState)();Object(a.useLayoutEffect)((()=>{const a=[];if(n)if(e.ResizeObserver){const o=new e.ResizeObserver(t);o.observe(n),a.push((()=>o.disconnect()))}else i||(i=!0,Object(o.b)(new Error("window.ResizeObserver is undefined")));return()=>{a.forEach((e=>e()))}}),[n,t]);return Object(a.useCallback)((e=>{e&&c(e)}),[])}},476:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};a.get||a.set?Object.defineProperty(t,n,a):t[n]=e[n]}t.default=e}(n(239));var a=r(n(1386)),o=r(n(1389)),i=r(n(191)),c=r(n(1390));n(1063);function r(e){return e&&e.__esModule?e:{default:e}}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s.apply(this,arguments)}var l=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))},d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,o.default)(e,t)}))},u=function(e){var t,n;function a(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).onEnter=function(e,n){var a=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),l(e,a),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var a=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,a),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var a=t.getClassNames("appear").doneClassName,o=t.getClassNames("enter").doneClassName,i=n?a+" "+o:o;t.removeClasses(e,n?"appear":"enter"),l(e,i),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),l(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),l(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,a="string"===typeof n,o=a?(a&&n?n+"-":"")+e:n[e];return{className:o,activeClassName:a?o+"-active":n[e+"Active"],doneClassName:a?o+"-done":n[e+"Done"]}},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.removeClasses=function(e,t){var n=this.getClassNames(t),a=n.className,o=n.activeClassName,i=n.doneClassName;a&&d(e,a),o&&d(e,o),i&&d(e,i)},o.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,l(e,t))},o.render=function(){var e=s({},this.props);return delete e.classNames,i.default.createElement(c.default,s({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},a}(i.default.Component);u.defaultProps={classNames:""},u.propTypes={};var b=u;t.default=b,e.exports=t.default},477:function(e,t,n){"use strict";var a=n(191),o=n.n(a),i=n(661),c=n.n(i),r=n(263),s=n.n(r),l=n(777),d=n(192);const u=e=>{let{shouldPlay:t,unreadCount:n,children:i}=e;const{play:r}=Object(l.b)(),u=c()(n);return Object(a.useEffect)((()=>{!s()(u)&&n&&t&&n>u&&r(l.a.MESSAGE)}),[n,r,u,t]),Object(d.jsx)(o.a.Fragment,null,i)};t.a=o.a.memo(u)},495:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(197),o=(n(191),n(15)),i=n.n(o),c=n(1199),r=n(212),s=n(194);const l=Object(s.a)("div",{target:"ex7k1ut0"})({name:"1txt44t",styles:"top:0;left:0;margin:0;padding:0;overflow:hidden;position:absolute;width:100%;height:100%;background-color:var(--spr-lc-bgc-9);"}),d=Object(s.a)("div",{target:"ex7k1ut1"})({name:"3f9jy3",styles:"top:50%;left:50%;position:absolute;transform:translate(-50%,-50%);"});var u=n(192);var b=()=>Object(u.jsx)(l,null,Object(u.jsx)(d,null,Object(u.jsx)(r.c,null))),O=n(200),f=n(223),p=n(238);var v=e=>{const{direction:t,localeDataLoading:n}=Object(O.a)(),{nonce:o}=Object(p.a)(),r=Object(f.a)(),s=(e=>i()(e,((e,t,n)=>(e[n]=i()(t,((e,t)=>{let{type:n,src:a}=t;return"SCRIPT"===n?`${e} <script defer src="${a}"><\/script>`:"CSS"===n?`${e} <link rel="stylesheet" href="${a}">`:e}),""),e)),{}))(null===r||void 0===r?void 0:r.externalResources),{shouldHideLocaleLoader:l,...d}=e;return Object(u.jsx)(c.a,Object(a.a)({},d,{direction:t,externalResources:s,nonce:o}),e.children,!l&&n&&Object(u.jsx)(b,null))}},497:function(e,t,n){"use strict";var a=n(197),o=n(191),i=n(216),c=n.n(i),r=n(194),s=n(203);const l=Object(r.a)("div",{target:"e25sgar0"})(Object(s.e)(s.k,s.g),";");var d=n(767),u=n(219),b=n(1384),O=n.n(b),f=n(422),p=n.n(f),v=n(321),y=n.n(v),j=n(1048),g=n.n(j),h=n(474),m=n(393),I=n(768),C=n(0);const T="Tab",E="Esc",x="Escape",S=e=>{if(!e)return!1;const t=e.getBoundingClientRect(),n=t.width>0&&t.height>0,a=Object(C.h)(),o=a?document.querySelector(a):null;if(!o)return n;const i=o.getBoundingClientRect(),c=i.top>=0&&i.left>=0&&i.bottom<=window.innerHeight&&i.right<=window.innerWidth;return n&&c};var _=(e,t,n,a)=>{const i=Object(o.useRef)(null),{document:c,window:r}=Object(o.useContext)(u.FrameContext),s=Object(o.useRef)(void 0),l=Object(o.useRef)(void 0),[d,b]=Object(o.useState)(s.current),f=Object(o.useCallback)((()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.querySelectorAll(I.a)}),[]),v=Object(o.useCallback)((()=>{const e=i.current,o=f();if(!e||!t||null===o||void 0===o||!o.length)return void b(void 0);const r=O()(o),d=p()(o);if(s.current=r,l.current=d,!e.contains(c.activeElement)){if(a)return;if(n){const e=c.getElementById(n);e&&b(y()(o,e)||r)}else b(r)}}),[t,n,i.current,a,f]);Object(o.useEffect)((()=>{v()}),[n,v,t]);const j=Object(h.a)(r,v),C=Object(m.a)(j,i),_=Object(o.useCallback)((n=>{if(t)switch(n.key){case T:n.shiftKey&&c.activeElement===s.current?(n.preventDefault(),l.current&&l.current.focus()):n.shiftKey||c.activeElement!==l.current||(n.preventDefault(),s.current&&s.current.focus());break;case E:case x:e(n),n.stopPropagation()}}),[e,t]);Object(o.useEffect)((()=>{S(d)&&r.setTimeout((()=>{null===d||void 0===d||d.focus()}),0)}),[d]);const A=Object(o.useRef)();Object(o.useEffect)((()=>{const e=i.current,t=e=>{A.current=e.target};return null===e||void 0===e||e.addEventListener("focusin",t),()=>null===e||void 0===e?void 0:e.removeEventListener("focusin",t)}),[]);const P=Object(o.useCallback)((()=>{const e=f(),t=A.current;if(!e||!t||e.length<2)return;const n=g()(e,t);if(-1===n)return;const a=e[(n+1)%e.length];setTimeout((()=>null===a||void 0===a?void 0:a.focus()),0)}),[f,c]);return Object(o.useMemo)((()=>({ref:C,eventHandlers:{onKeyDown:_},focusNextElement:P})),[C,_,P])},A=n(192);const P=Object(o.forwardRef)(((e,t)=>{const{onBlur:n,className:i,component:r="div",shouldAddDummyFocusableContainer:s=!0,enabled:u=!0,borderRadiusStyles:b,containerClassname:O="full-width full-height",firstFocusSelector:f,"aria-label":p,disableAutoFocus:v}=e,{ref:y,eventHandlers:j,focusNextElement:g}=_(n,u,f,v),h=Object(m.a)(y,t),I=Object(o.useMemo)((()=>({focusNextElement:g})),[g]);return Object(A.jsx)(d.a.Provider,{value:I},Object(A.jsx)("div",Object(a.a)({ref:h,className:O},j),Object(A.jsx)(l,{css:b,className:O,tabIndex:s&&u?0:-1,"aria-label":p},Object(A.jsx)(r,{className:c()(i,"full-height")},e.children))))}));t.a=P},504:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(205),o=n(619);const i=()=>{const e=Object(a.a)();return Object(o.c)(e)}},506:function(e,t,n){"use strict";n.d(t,"e",(function(){return d})),n.d(t,"s",(function(){return u})),n.d(t,"j",(function(){return b})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return j})),n.d(t,"c",(function(){return g})),n.d(t,"v",(function(){return h})),n.d(t,"r",(function(){return m})),n.d(t,"f",(function(){return I})),n.d(t,"q",(function(){return C})),n.d(t,"m",(function(){return T})),n.d(t,"k",(function(){return E})),n.d(t,"w",(function(){return x})),n.d(t,"t",(function(){return S})),n.d(t,"u",(function(){return _})),n.d(t,"n",(function(){return A})),n.d(t,"p",(function(){return P})),n.d(t,"o",(function(){return R})),n.d(t,"l",(function(){return w}));var a=n(245),o=n(729),i=n(256),c=n(860),r=n(387);const s=new o.a,l="/livechat/conversation";function d(e){let{size:t,cursor:n}=e;return Object(a.a)(this,void 0,void 0,(function*(){let e=`${l}/fetch?sortKey=lastInteractionTime`;t&&(e=`${e}&size=${t}`),n&&n.after&&(e=`${e}&after=${n.after}`),n&&n.before&&(e=`${e}&before=${n.before}`);return(yield Object(i.c)(e)).data}))}function u(e,t){return Object(a.a)(this,void 0,void 0,(function*(){const{httpHeaders:n,multiSubmitResponseUrl:a}=e;return(yield s.post(a,t,{headers:Object.assign(Object.assign({},n),{"Content-Type":"application/json"}),baseURL:""})).data}))}function b(e){return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(i.c)(`${l}/fetch/${e}`)).data}))}function O(e){return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(i.c)(`${l}/fetch/case/${e}`)).data}))}function f(e){return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(i.c)(`${l}/fetch/externalCase/${e}`)).data}))}function p(e,t){let{size:n,cursor:o}=t;return Object(a.a)(this,void 0,void 0,(function*(){const t=[{key:"conversationId",value:e.split("#")[0]}];n&&t.push({key:"size",value:n}),o&&t.push({key:"cursor",value:o}),t.push({key:"includeMaskedDeletedMessages",value:!0});const a=t.map((e=>`${e.key}=${e.value}`)).join("&");return(yield Object(i.c)(`${l}/fetchMessages?${a}`)).data}))}function v(e,t){var n;return Object(a.a)(this,void 0,void 0,(function*(){try{const a=yield Object(i.c)(`${l}/closeConversation?conversationId=${e}`);return null===t||void 0===t||t.resolve({surveyUrl:null===(n=a.data)||void 0===n?void 0:n.surveyUrl}),a.data}catch(a){if(Object(r.f)(a))return null===t||void 0===t?void 0:t.resolve();throw null===t||void 0===t||t.reject(a),a}}))}function y(e){var t;return Object(a.a)(this,void 0,void 0,(function*(){try{const n=yield Object(i.c)(`${l}/closeAll`);return null===e||void 0===e||e.resolve({surveyUrl:null===(t=n.data)||void 0===t?void 0:t.surveyUrl}),n.data}catch(n){if(Object(r.f)(n))return null===e||void 0===e?void 0:e.resolve();throw null===e||void 0===e||e.reject(n),n}}))}function j(e,t){var n;return Object(a.a)(this,void 0,void 0,(function*(){try{const a=yield Object(i.c)(`${l}/delete?conversationId=${e}`);return null===t||void 0===t||t.resolve({surveyUrl:null===(n=a.data)||void 0===n?void 0:n.surveyUrl}),a.data}catch(a){if(Object(r.f)(a))return null===t||void 0===t?void 0:t.resolve();throw null===t||void 0===t||t.reject(a),a}}))}function g(e){var t;return Object(a.a)(this,void 0,void 0,(function*(){try{const n=yield Object(i.c)(`${l}/deleteAll`);return null===e||void 0===e||e.resolve({surveyUrl:null===(t=n.data)||void 0===t?void 0:t.surveyUrl}),n.data}catch(n){if(Object(r.f)(n))return null===e||void 0===e?void 0:e.resolve();throw null===e||void 0===e||e.reject(n),n}}))}function h(e,t){return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(i.c)(`${l}/updateDisclaimer/${e}?disclaimerStatus=${t}`)).data}))}function m(e){return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(i.c)(`${l}/send`,e)).data}))}function I(e){return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(i.c)("/livechat/appointment/slots",{slotDefinitionId:e.slotDefinitionId,startTime:e.selectedDate.getTime(),endTime:e.selectedDate.getTime()+864e5,timeZone:e.timeZone,params:e.appointmentAssetParams,messageId:e.messageId})).data}))}function C(e){return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(i.c)("/livechat/appointment/reserve",{startTime:e.selectedDate.getTime(),selectedSlot:e.selectedSlot,slotDefinitionId:e.slotDefinitionId,timeZone:e.timeZone,params:e.appointmentAssetParams,messageId:e.messageId})).data}))}function T(e){return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(i.c)(`${l}/new`,e)).data}))}function E(e,t,n,o){return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(i.c)(`${l}/suggestions`,Object.assign({conversationId:e,query:t,locale:o},n))).data}))}function x(e){let{context:t,updateLatest:n,payload:a}=e;return c.a.info({chatConversationId:null===a||void 0===a?void 0:a.conversationId,message:`${null===a||void 0===a?void 0:a.conversationId}: Update latest conversation context service called`,additionalDetails:{actionPayload:a}}),Object(i.c)(`${l}/updateConversationDetails?updateLatest=${n}`,t)}function S(e){let{conversationId:t,context:n,payload:a}=e;return c.a.info({chatConversationId:t,message:`${t}: Update conversation context service called`,additionalDetails:{actionPayload:a}}),Object(i.c)(`${l}/updateConversationDetails?conversationId=${t}`,n)}function _(e){let{conversationContext:t,conversationId:n}=e;return Object(i.c)(`${l}/updateWhitelistedCfOnCase?conversationId=${n}`,t)}function A(e){return Object(i.c)(`${l}/cancelAsset/${e}`)}function P(e){return Object(a.a)(this,void 0,void 0,(function*(){return Object(i.c)(`${l}/markSurveyOpened/${e}`)}))}function R(e){return Object(a.a)(this,void 0,void 0,(function*(){return Object(i.c)(`${l}/markTimeOfDelivery?messageIds=${e.join(",")}`)}))}function w(e){return Object(a.a)(this,void 0,void 0,(function*(){return(yield Object(i.c)(`${l}/generateVoiceNote`,Object.assign(Object.assign({},e),{tempConversationId:e.conversationId}))).data}))}},523:function(e,t,n){var a=n(37),o=n(129),i=n(85),c=n(1008),r=n(1318),s=n(86),l=n(33);e.exports=function(e,t,n){if((e=l(e))&&(n||void 0===t))return o(e);if(!e||!(t=a(t)))return e;var d=s(e),u=s(t),b=r(d,u),O=c(d,u)+1;return i(d,b,O).join("")}},528:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return _}));var a=n(197),o=n(191),i=n.n(o),c=n(196),r=n(862),s=n.n(r),l=n(54),d=n.n(l),u=n(31),b=n.n(u),O=n(1),f=n.n(O),p=n(286),v=n.n(p),y=n(206),j=n.n(y),g=n(326),h=n(374),m=n(205),I=n(1046),C=n(817),T=n(2),E=n(311),x=n(192);const S=e=>{let{children:t}=e;const{otherConfigs:n,configFilters:a}=Object(m.a)(),r=Object(c.c)(),l=!!n.theme.styleFilters,u=Object(o.useRef)({}),O=Object(o.useMemo)((()=>d()(n.theme,Object(T.a)().theme)),[Object(T.a)().theme]),p=Object(h.a)(),{appFilters:y,adaptedAppFilters:S}=Object(o.useMemo)((()=>{var e;const t=Object(C.b)({legacyStyleFilters:Object(I.a)(null===(e=n.theme)||void 0===e?void 0:e.styleFilters),configFilters:a,skin:p});return{appFilters:t,adaptedAppFilters:f()(t)?j()(t,(e=>e.filter)):Object(I.c)(t,"")}}),[p]),_=Object(g.a)(S),A=Object(o.useMemo)((()=>{const e=f()(y)?y:S,t=v()(e,((e,t)=>_[t].hasPassed));if(!b()(t)){if(l){const e=s()(n);return e.theme.styles=Object(I.e)({styles:O.styles,passedStyleFilters:t}),e}return Object(I.d)({otherConfigs:n,passedFilters:t})}return n}),[n,y,S,O,_]);return u.current!==A&&(u.current=A,r({type:E.e,payload:{customizationConfig:A}})),Object(x.jsx)(i.a.Fragment,null,t)},_=e=>function(t){const n=Object(c.d)(I.b);return Object(x.jsx)(e,Object(a.a)({},t,{customization:n}))}},529:function(e,t,n){var a=n(98),o=n(90),i=n(80),c=4294967295,r=Math.min;e.exports=function(e,t){if((e=i(e))<1||e>9007199254740991)return[];var n=c,s=r(e,c);t=o(t),e-=c;for(var l=a(s,t);++n<e;)t(n);return l}},531:function(e,t,n){"use strict";n.d(t,"s",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"i",(function(){return c})),n.d(t,"p",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"o",(function(){return d})),n.d(t,"m",(function(){return u})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return O})),n.d(t,"n",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return v})),n.d(t,"l",(function(){return y})),n.d(t,"j",(function(){return j})),n.d(t,"h",(function(){return g})),n.d(t,"q",(function(){return h})),n.d(t,"r",(function(){return m})),n.d(t,"k",(function(){return I}));var a=n(752);function o(){return{type:a.o,payload:{}}}function i(e){return{type:a.k,payload:e}}function c(){return{type:a.p,payload:{}}}function r(){return{type:a.s,payload:{}}}function s(e){return{type:a.i,payload:e}}function l(e){return{type:a.j,payload:e}}function d(e){return{type:a.e,payload:e}}function u(e){return{type:a.h,payload:e}}function b(e){return{type:a.a,payload:e}}function O(e){return{type:a.c,payload:e}}function f(e){return{type:a.f,payload:e}}function p(e){return{type:a.b,payload:e}}function v(e){return{type:a.d,payload:e}}function y(e){return{type:a.g,payload:e}}function j(e){return{type:a.q,payload:e}}function g(e){return{type:a.r,payload:e}}function h(e){return{type:a.m,payload:e}}function m(e){return{type:a.n,payload:e}}const I=e=>({type:a.l,payload:e})},532:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(191),o=n(892);const i=()=>Object(a.useContext)(o.a)},533:function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},563:function(e,t,n){var a=n(1369),o=n(59),i=n(1370);e.exports=function(e){return o(e)?i(e):a(e)}},565:function(e,t,n){"use strict";var a=n(199),o=n(191),i=n(891),c=n(532),r=n(195),s=n(1055),l=n(313);t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CHAT";const t=Object(a.b)(),n="PROMPT"===e?Object(r.d)("proactivePrompt.align",Object(r.d)("frame.align")({theme:t}))({theme:t}):Object(r.d)("frame.align")({theme:t}),{isTriggerDraggedOnLeft:d}=Object(c.a)(),u=Object(i.a)();return Object(o.useMemo)((()=>{if(u){const e=Object(s.a)({frameAlign:n,triggerAlign:d?l.g.BOTTOM_LEFT:l.g.BOTTOM_RIGHT});return{xEdgeToAlign:d?l.b.LEFT:l.b.RIGHT,alignType:e}}return{alignType:n,xEdgeToAlign:"L"===n.slice(-1)?l.b.LEFT:l.b.RIGHT}}),[d,u,n])}},566:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={DEFAULT:"DEFAULT",PULSE:"PULSE"}},619:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s}));var a=n(443),o=n(285);const i={AMAZON_CHIME:"chime",ZOOM:"zoom"},c=e=>e.call,r=(e,t)=>{let{isFullScreen:n,isPhone:a,isAudioCall:c,locale:r,appId:s,vendor:l,direction:d}=t;const u=[{key:"fs",value:n},{key:"video",value:!c},{key:"device",value:a?"MOBILE":"DESKTOP"},{key:"locale",value:r},{key:"dir",value:d}];return`${`https://meet-prod.sprinklr.com/${s}`}/${e}/${i[l]}?${Object(o.g)(u)}`},s=e=>!!a.a.getCallAccountId(e)},645:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return x}));var a=n(191),o=n.n(a),i=n(665),c=n.n(i),r=n(196),s=n(210),l=n.n(s),d=n(883),u=n(504),b=n(761),O=n(207),f=n(257);const p=e=>Object(f.g)(Object(O.b)(e));var v=n(500),y=n(205),j=n(220),g=n(228),h=n(285),m=n(192);const I={MESSAGE:"message",AGENT_ASSIGNMENT:"agentAssignment",CALL:"call"},C=o.a.createContext({play:l.a,pause:l.a}),T={[I.MESSAGE]:Object(h.d)("audio/message.mp3"),[I.AGENT_ASSIGNMENT]:Object(h.d)("audio/agentAssignment.mp3"),[I.CALL]:Object(h.d)("audio/call.mp3")},E=(e,t)=>{var n,a,o;return null!==(n=null===e||void 0===e||null===(a=e.allScreens)||void 0===a||null===(o=a.notifications)||void 0===o?void 0:o[t])&&void 0!==n?n:T[t]},x=e=>{let{children:t}=e;const{otherConfigs:n}=Object(y.a)(),o=Object(r.d)(j.h),i=Object(g.d)(o),s=Object(v.b)({category:"LIVE_CHAT",userId:i}),[l,,O,f]=c()({src:"","data-testid":"messageAudio",preload:"none"}),[h,,T,x]=c()({src:"","data-testid":"callPickedByAgentNotifAudio",preload:"none"}),[S,,_,A]=c()({src:"",loop:!0,"data-testid":"callAudio",preload:"none"}),P=Object(u.a)(),R=(()=>{const e=Object(r.d)(p).enableSoundNotification.enabled,t=Object(b.a)();return e&&t})(),w=Object(b.a)(),N=Object(a.useCallback)((()=>{f.current&&(f.current.src=E(n,I.MESSAGE)),x.current&&(x.current.src=E(n,I.AGENT_ASSIGNMENT)),A.current&&(A.current.src=E(n,I.CALL))}),[]),M=Object(a.useCallback)((e=>{switch(e){case I.MESSAGE:return R?O.play():Promise.resolve();case I.AGENT_ASSIGNMENT:return T.play();case I.CALL:return _.play()}return Promise.resolve()}),[O,T,_,R]),L=Object(a.useCallback)((e=>{const t=M(e);"object"===typeof t&&t.catch((t=>s.warning(`Sound Notification Failed for ${e}:  ${t}`)))}),[M]),k=Object(a.useCallback)((e=>{switch(e){case I.MESSAGE:return O.pause();case I.AGENT_ASSIGNMENT:return T.pause();case I.CALL:return _.pause()}}),[O,T,_]),D=Object(a.useMemo)((()=>({play:L,pause:k})),[L,k]);return Object(m.jsx)(C.Provider,{value:D},Object(m.jsx)(d.b,{onClick:N},w&&l,P&&h,P&&S,t))};t.c=C},653:function(e,t,n){var a=n(4).isFinite;e.exports=function(e){return"number"==typeof e&&a(e)}},656:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(256);const o=async()=>Object(a.c)("/livechat/conversation/refresh-token"),i=async()=>(await Object(a.c)("/livechat/conversation/getSessionToken")).data},663:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(191),o=n(261);const i=e=>{const t=Object(o.a)(e);return Object(a.useCallback)((function(){return t.current(...arguments)}),[t])}},664:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(191),o=n(255),i=n(261);const c=e=>{let{route:t,searchParams:n,callback:c,listenOnMount:r=!1}=e;const s=Object(o.a)(),l=Object(i.a)(c),d=Object(a.useRef)(!1);Object(a.useEffect)((()=>{const e=e=>{!t.test(e.pathname)||n&&!e.search.includes(n)||l.current(e)};r&&!d.current&&(d.current=!0,e(s.location));const a=s.listen((t=>{e(t)}));return()=>{a()}}),[])}},665:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(446).__importDefault(n(1377)).default("audio");t.default=a},666:function(e,t,n){"use strict";var a=n(191),o=n(205),i=n(209),c=n(0),r=n(473);const s=new Set([r.a.CONVERSATION,r.a.KNOWLEDGE_BASE,r.a.CONVERSATION_HISTORY]);t.a=()=>{var e,t,n;const l=Object(o.a)(),d=Object(i.a)(),u=Object(c.k)(),b=null===(e=l.cardConfigs)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.cards,O=(null===d||void 0===d||null===(n=d.homeScreen)||void 0===n?void 0:n.conversationCard)||{},f=(null===l||void 0===l?void 0:l.cards)||[],p=Object(a.useMemo)((()=>[{type:r.a.CONVERSATION,id:r.a.CONVERSATION,...O},...f]),[O,f]);return Object(a.useMemo)((()=>u?(null!==b&&void 0!==b?b:p).filter((e=>s.has(e.type))):null!==b&&void 0!==b?b:p),[u,b,p])}},667:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(211);const o=Object(a.a)((()=>Promise.all([n.e(0),n.e(1),n.e(3),n.e(36)]).then(n.bind(null,1609))))},668:function(e,t,n){"use strict";var a=n(191),o=n(196),i=n(240),c=n(327),r=n(762),s=n(220),l=n(228),d=n(252),u=n(232),b=n(654);const O=(new i.a).setUrl("/video-chat/conversation/log/event").setType(d.a.POST).build(),f="AUDIO_CALL",p="VIDEO_CALL";t.a=e=>{let{videoConversationId:t,conversationId:n,isAudioCall:i}=e;const d=Object(r.a)(),[v]=Object(c.a)(O,{ignoreResults:!0}),y=Object(a.useCallback)((e=>{const t=Object(u.a)();return e.forEach((e=>{e.offsetTime=t-e.logTime})),v(e)}),[v]),j=Object(o.d)(s.h),g=Object(l.d)(j),h=i?f:p,m=Object(a.useCallback)((e=>{const{message:a}=e;return{videoConversationId:t,logMessage:`USER: ${a}`,loggerSnUserId:g,category:h,loggerSnType:"SPRINKLR_LIVE_CHAT",logTime:Object(u.a)(),additionalDetails:{conversationId:n}}}),[n,t,g,h]),I=Object(a.useMemo)((()=>new b.a(y,{batch:!0,adapter:m,skip:!t||!d})),[y,m,t]);return Object(a.useEffect)((()=>()=>{I.cleanup()}),[]),I}},669:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(211);const o=Object(a.a)((()=>Promise.all([n.e(7),n.e(20)]).then(n.bind(null,1607))))},670:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a="COMPOSER_ID"},671:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return r}));var a=n(194),o=n(195);const i=Object(a.a)("div",{target:"e6slia10"})("min-height:",(e=>Object(o.d)("header.minHeight")(e)),";padding:",(e=>Object(o.g)("header.padding")(e)),";display:flex;justify-content:flex-end;align-items:center;"),c=Object(a.a)("div",{target:"e6slia11"})("width:100%;",(e=>!e.isContained&&{backgroundColor:`${Object(o.d)("header.backgroundColor")(e)}`,backgroundImage:`${Object(o.d)("header.gradients")(e)}`,borderBottom:`${Object(o.d)("header.borderBottom")(e)}`,padding:"var(--spr-lc-safe-area-top) var(--spr-lc-safe-area-right) 0 var(--spr-lc-safe-area-left)"}),""),r=e=>Object(o.d)("header.lg.paddingTop",0)(e)+Object(o.d)("header.lg.paddingBottom",0)(e)+Object(o.d)("header.lg.logo.height",0)(e)+Object(o.d)("header.lg.logo.marginTop",0)(e)+Object(o.d)("header.lg.logo.marginBottom",0)(e)+Object(o.d)("header.lg.description.marginTop",0)(e)+Object(o.d)("header.lg.description.marginBottom",0)(e)+52},672:function(e,t,n){"use strict";var a=n(209);t.a=()=>{var e;return!(null===(e=Object(a.a)().trigger)||void 0===e||!e.useCustomTrigger)}},673:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(191),o=n(878);const i=()=>"MOBILE"===Object(a.useContext)(o.a).device},674:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(15),o=n.n(a),i=n(896),c=n.n(i);const r=/%%\[(\w+)\]/g,s=(e,t)=>e?c()(e,r,((e,n)=>Object.prototype.hasOwnProperty.call(t,n)?t[n]:e)):"",l=(e,t)=>e&&"string"!==typeof e?o()(e,((e,n,a)=>(e[a]=s(n,t),e)),{}):s(e,t)},675:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(31),o=n.n(a),i=n(15),c=n.n(i);const r=(e,t)=>c()(t,((e,t)=>{if(!t)return e;const n="*".repeat(null===t||void 0===t?void 0:t.length);return e.replace(t,n)}),e),s=e=>{let{text:t,maskingConfigs:n}=e;if(!t)return{};const{maskedText:a,maskedValues:i}=c()(n,((e,t)=>{let n;try{n=new RegExp(t.jsRegex,"g")}catch(i){return e}const{updatedText:a,capturedGroups:o}=((e,t,n,a)=>{let o=e.exec(t),i=t;const c={};for(;o&&0!==o[0].length;)n&&o.groups&&Object.entries(o.groups).forEach((e=>{let[t,n]=e;var i;c[t]=null!==(i=c[t])&&void 0!==i?i:[];let r={};if(a){const e=o.index;r={startIndex:e,endIndex:e+n.length-1}}c[t].push(Object.assign(Object.assign({},r),{value:n}))})),i=r(i,o),o=e.exec(i);return{capturedGroups:c,updatedText:i}})(n,e.maskedText,t.saveMaskedData,t.showAgentUnmaskedData);return{maskedText:a,maskedValues:Object.assign(Object.assign({},e.maskedValues),o)}}),{maskedText:t,maskedValues:{}});return{maskedText:a,maskedValues:o()(i)?void 0:i}}},676:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(305),o=n.n(a);const i=e=>{const t=o()(e);return"PROMPT"===(null===t||void 0===t?void 0:t.type)?t.item:void 0}},677:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}));var a=n(826),o=n(464),i=n(264),c=n(443),r=n(232);const s=(e,t)=>`${c.a.getParnterId(t)}_${c.a.getAppId(t)}_${i.a.getId(o.a.getChatUser(e))}_${Object(r.a)()}_${Math.random().toString(16).substr(2,8)}`;let l;const d=(e,t)=>{const n=o.a.getChatSessionToken(e),i=s(e,t),c=o.a.getInboxServerUrl(e),r=o.a.getUserInbox(e),d=null===e||void 0===e?void 0:e.fanPublishTopic;return l=new a.a({userName:n,clientId:i,inboxServerUrl:c,userInbox:r,fanPublishTopic:d}),l},u=()=>l},724:function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return T}));var a=n(191),o=n(196),i=n(31),c=n.n(i),r=n(217),s=n(472),l=n(773),d=n(1061),u=n(428),b=n(207),O=n(531),f=n(372),p=n(890),v=n(659);const y={initiateCobrowseSession:O.f,endCobrowseSession:O.e,markCobrowseSessionStartFailed:O.h};var j=n(774),g=n(2),h=n(202),m=n(211),I=n(192);const C=Object(m.a)((()=>Promise.all([n.e(0),n.e(1),n.e(69)]).then(n.bind(null,1708)))),T=Object(m.a)((()=>Promise.all([n.e(0),n.e(7),n.e(19)]).then(n.bind(null,1718))));t.c=e=>{let{parentFrameRef:t}=e;const n=Object(o.d)(b.f),{configured:i}=(()=>{const{checkStatus:e,noOfOpenConversation:t,configured:n,conversationsLoaded:i,persistedState:s,conversationIdsWithActiveSession:l,conversationIdsWithAgents:O}=Object(d.a)(),j=Object(o.d)(b.f),g=Object(u.a)(),{initiateCobrowseSession:h,endCobrowseSession:m,markCobrowseSessionStartFailed:I}=Object(r.a)(y);return Object(a.useEffect)((()=>{if(!i)return;const{allowed:t}=e();var n;c()(j)?null===s&&t?h({type:f.a.REQUEST,silent:!0}):null===s&&l.length>0&&I({silent:!0,reason:p.a.PERSISTED_STATE_NOT_FOUND,type:f.a.REQUEST}):Object(v.b)(j)&&(t&&g&&(j.sessionState===f.d.FAILED&&"reason"in(n=j)&&"string"===typeof n.reason&&(j.reason===p.a.PERSISTED_STATE_NOT_FOUND||j.reason===p.a.RESUME_SESSION_FAILED)||j.sessionState===f.d.ENDED)?h({type:f.a.REQUEST,silent:!0}):O.length||m({markCompletedSession:!0}))}),[i,j,t,O,l.length,s,e,g]),{configured:n}})(),m=Object(r.a)(O.q),E=Object(s.a)(),x=!Object(l.a)(E),{appId:S}=Object(a.useMemo)((()=>Object(g.a)()),[]);return Object(a.useEffect)((()=>{if(!x)return;(async()=>{try{const e=await j.a.get(S);if(e){const{type:t}=e;i||Object(g.c)()("open"),m({...e,type:null!==t&&void 0!==t?t:f.a.REQUEST})}}catch(e){Object(h.b)(e)}})()}),[m,S,x,i]),c()(n)?null:Object(I.jsx)(a.Suspense,{fallback:null},n.type===f.a.REQUEST?Object(I.jsx)(C,null):null,n.type===f.a.AGENT_PRESENT?Object(I.jsx)(T,{parentFrameRef:t}):null)}},726:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"i",(function(){return j})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"h",(function(){return I})),n.d(t,"g",(function(){return C}));var a=n(194),o=n(192),i=n(444),c=n.n(i),r=n(495),s=n(195),l=n(530),d=n(251),u=n(313);const b=e=>{let{theme:t,triggerWidth:n,triggerHeight:a,triggerXpadding:o,triggerYpadding:i,isTriggerHiddenWhenMaximised:c,triggerTopOffsetBeforeReposition:r,xEdgeToAlign:l,alignType:d}=e;const b=Object(s.d)("frame.alignTo")({theme:t}),O=Object(s.d)("frame.sXMargin")({theme:t}),f=(e=>{let{isTriggerHiddenWhenMaximised:t,alignType:n,frameSYMargin:a,triggerHeight:o,triggerYpadding:i,alignTo:c=u.d.TRIGGER,triggerTopOffsetBeforeReposition:r}=e;if(c===u.d.VIEWPORT)return a;const s=null!==r&&void 0!==r?r:i;return t?s:n===u.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT||n===u.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT?s+a:o+s+a})({triggerYpadding:i,triggerTopOffsetBeforeReposition:r,triggerHeight:a,isTriggerHiddenWhenMaximised:c,frameSYMargin:Object(s.d)("frame.sYMargin")({theme:t}),alignType:d,alignTo:b}),p=(e=>{let{alignType:t,frameSXMargin:n,triggerWidth:a,triggerXpadding:o,alignTo:i=u.d.TRIGGER}=e;if(i===u.d.VIEWPORT)return n;switch(t){case u.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT:case u.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_LEFT:case u.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT:case u.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_RIGHT:return a+o+n;case u.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT:case u.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT:default:return o+n}})({alignType:d,frameSXMargin:O,triggerWidth:n,triggerXpadding:o,alignTo:b});return{xEdgeToAlign:l,xOffset:p,yOffset:f,triggerTopOffsetBeforeReposition:r}},O=e=>{let{yOffset:t,xEdgeToAlign:n,xOffset:a,theme:o,isMaximized:i,triggerTopOffsetBeforeReposition:c,alignTo:r}=e;const l=`calc(100% - ${t}px)`;return` \n    ${null!=c&&r!==u.d.VIEWPORT?`top: ${c}px;`:`bottom: ${t}px;`}\n    height: ${l};\n    max-height: ${i?l:Object(s.d)("frame.height")({theme:o})};\n    ${n}: ${a}px;\n    max-width: calc(100% - ${a}px);\n    min-width: 200px;\n    transform-origin: ${null!=c&&r!==u.d.VIEWPORT?`top ${n}`:`bottom ${n}`};\n    width: ${i?`${Object(s.d)("frame.maximizedWidth")({theme:o})}px`:`${Object(s.d)("frame.width")({theme:o})}px`};\n    `};const f=200,p=Object(a.a)("div",{target:"e19bzbh60"})("transition:width ",f,"ms ease,max-height ",f,"ms ease;position:fixed;box-sizing:border-box;z-index:",(e=>Object(s.d)("frame.zIndex")(e)),";padding:",(e=>Object(s.g)("frame.margin")(e)),";transform:",(e=>`translateZ(${Object(s.d)("frame.translateZ")(e)}px)`),";",(e=>(e=>{const t=Object(d.c)(Object(s.d)("frame.marginTop")({theme:e})),n=Object(d.c)(Object(s.d)("frame.marginBottom")({theme:e})),a=Object(d.c)(Object(s.d)("frame.marginLeft")({theme:e})),o=Object(d.c)(Object(s.d)("frame.marginRight")({theme:e}));return c()([t,n,a,o],(e=>e>0))})(e.theme)&&`background-color: ${Object(l.j)(Object(s.d)("frame.overlay.opacity")(e),Object(s.d)("frame.overlay.backgroundColour")(e))};`),";"),v=Object(a.a)(p,{target:"e19bzbh61"})((e=>{let{theme:t,isMaximized:n,isPhone:a,triggerPosition:o,triggerTopOffsetBeforeReposition:i,isTriggerHiddenWhenMaximised:c,xEdgeToAlign:r,alignType:l}=e;return(e=>{let{isTriggerHiddenWhenMaximised:t,theme:n,isMaximized:a,isPhone:o,triggerPosition:i,triggerTopOffsetBeforeReposition:c,alignType:r,xEdgeToAlign:l}=e;if(o)return"\n    height: 100%;\n    width: 100vw;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    max-height: 100vh;\n    max-width: 100vw;\n    min-width: 100vw;\n  ";const d=Object(s.d)("frame.alignTo")({theme:n}),u=b({theme:n,isTriggerHiddenWhenMaximised:t,triggerWidth:i.width,triggerHeight:i.height,triggerXpadding:i[i.edge],triggerTopOffsetBeforeReposition:c,triggerYpadding:i.bottom,alignType:r,xEdgeToAlign:l});return O({...u,theme:n,isMaximized:a,alignTo:d})})({theme:t,isMaximized:n,isPhone:a,triggerPosition:o,triggerTopOffsetBeforeReposition:i,isTriggerHiddenWhenMaximised:c,xEdgeToAlign:r,alignType:l})}),""),y=Object(a.a)(p,{target:"e19bzbh62"})((e=>{let{theme:t,isMaximized:n,isPhone:a,triggerPosition:o,isTriggerHiddenWhenMaximised:i,xEdgeToAlign:c,alignType:r}=e;return(e=>{let{isTriggerHiddenWhenMaximised:t,theme:n,isMaximized:a,isPhone:o,triggerPosition:i,xEdgeToAlign:c,alignType:r}=e;const{xOffset:s,yOffset:l}=b({theme:n,isTriggerHiddenWhenMaximised:t,triggerHeight:i.height,triggerWidth:i.width,triggerXpadding:c===u.b.LEFT?i.left:i.right,triggerYpadding:i.bottom,xEdgeToAlign:c,alignType:r});if(o)return`\n      top: 0;\n      bottom: ${l}px;\n      ${c}: ${s}px;\n      ${c===u.b.LEFT?u.b.RIGHT:u.b.LEFT}: 0;\n      width: calc(100vw - ${s}px);\n      height: calc(100% - ${l}px);\n      min-width: calc(100vw - ${s}px);\n      max-width:  100vh;\n      max-height: 100vh;\n    `;return O({xEdgeToAlign:c,xOffset:s,yOffset:l,theme:n,isMaximized:a})})({theme:t,isMaximized:n,isPhone:a,triggerPosition:o,isTriggerHiddenWhenMaximised:i,xEdgeToAlign:c,alignType:r})}),""),j=e=>{if(e.isPhone){const t=Object(d.c)(Object(s.d)("frame.marginTop")(e)),n=Object(d.c)(Object(s.d)("frame.marginBottom")(e)),a=Object(d.b)(Object(s.d)("frame.borderRadius")(e)),i=t>0?a[0]:0,c=t>0?a[1]:0,r=n>0?a[2]:0,l=n>0?a[3]:0;return Object(o.css)("border-radius:",i,"px ",c,"px ",r,"px ",l,"px;")}return Object(o.css)("border-radius:",Object(s.d)("frame.borderRadius")(e),";")},g=Object(a.a)("div",{target:"e19bzbh63"})("height:100%;width:100%;position:relative;overflow:hidden;box-shadow:",(e=>Object(s.d)("frame.boxShadow")(e)),";",(e=>e.isPhone&&"box-shadow: none;"),";",j,";"),h="spr-chat-box-anim",m=Object(a.a)(r.a,{target:"e19bzbh64"})("border:0 none;height:100%;width:100%;position:absolute;bottom:0;",(e=>e.xEdgeToAlign),":0;"),I=e=>Object(o.css)(e.isPhone?(e=>Object(o.css)(`\n  .spr-chat__box.${h}-enter {\n    opacity: 0;\n    transform: translateZ(${Object(s.d)("frame.translateZ")(e)}px) translateY(20px) ;\n  }\n\n  .spr-chat__box.${h}-enter.${h}-enter-active {\n    opacity: 1;\n    transform: translateZ(${Object(s.d)("frame.translateZ")(e)}px) translateY(0px) ;\n    transition: opacity 0.16s linear, transform 0.08s linear;\n  }\n\n  .spr-chat__box.${h}-enter-done {\n    transform: translateZ(${Object(s.d)("frame.translateZ")(e)}px) ;\n  }\n\n  .spr-chat__box.${h}-exit {\n    opacity: 1;\n    transform: translateZ(${Object(s.d)("frame.translateZ")(e)}px) translateY(0);\n  }\n  .spr-chat__box.${h}-exit.${h}-exit-active {\n    opacity: 0;\n    transform: translateZ(${Object(s.d)("frame.translateZ")(e)}px) translateY(20px);\n    transition: opacity 0.16s linear, transform 0.08s linear;\n  }\n`,""))(e):(e=>`\n.spr-chat__box.${h}-enter {\n  transform: translateZ(${Object(s.d)("frame.translateZ")(e)}px) scale(0);\n  opacity: 0;\n}\n.spr-chat__box.${h}-enter.${h}-enter-active {\n  transform: translateZ(${Object(s.d)("frame.translateZ")(e)}px) scale(1);\n  opacity: 1;\n  transition: opacity 0.16s ease-out 0s, transform 0.16s linear;\n}\n.spr-chat__box.${h}-exit {\n  transform: translateZ(${Object(s.d)("frame.translateZ")(e)}px) scale(1);\n  opacity: 1;\n}\n.spr-chat__box.${h}-exit.${h}-exit-active {\n  transform: translateZ(${Object(s.d)("frame.translateZ")(e)}px) scale(0);\n  opacity: 0;\n  transition: opacity 0.16s ease-out 0s, transform 0.2s cubic-bezier(0.2, 0.2, 0.8, 0.8);\n}\n`)(e),""),C={name:"2b9rdz",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}"}},753:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return O}));var a=n(191),o=n.n(a),i=n(196),c=n(421),r=n(521),s=n(265),l=n(0),d=n(192);const u="sessionExpiryModal",b=o.a.createContext(null),O=Object(a.memo)((e=>{const[t,n]=Object(a.useState)(null),[o,O]=Object(c.a)(u),f=Object(i.c)(),p=Object(l.Q)();return Object(a.useEffect)((()=>{const e=r.d.on((e=>{switch(e.type){case r.c:n(e.payload.targetDate);break;case r.b:n(null)}}));return()=>e()}),[p]),Object(a.useEffect)((()=>{if(t)return p&&f({type:s.d}),void O(!0);o&&O(!1)}),[t]),Object(d.jsx)(b.Provider,{value:t},e.children)}));t.c=b},758:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(466),o=n(11),i=n.n(o),c=n(311),r=n(560);function s(e,t){const n=Object(a.a)(e,{path:"/conversation/:conversationId/:transientId?"});if(!n)return{};const o=i()(n.params,"conversationId"),c=i()(n.params,"transientId");return"all"===o?{isConversationPath:!1,isDefiniteConversation:!1,matchedConversationId:void 0}:"new"===o?{isConversationPath:!0,isDefiniteConversation:!1,matchedConversationId:t?t.slice(1):c}:"last"===o?{isConversationPath:!0,isDefiniteConversation:!1,matchedConversationId:o}:{isConversationPath:!0,isDefiniteConversation:!0,matchedConversationId:o}}const l=e=>e.type===c.d&&i()(e,"payload.status")===r.a.CONNECTED,d=e=>e.type===c.d&&i()(e,"payload.status")===r.a.DISCONNECTED},761:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(223);const o=()=>{const e=Object(a.a)();return!(null===e||void 0===e||!e.enableSoundNotification)}},762:function(e,t,n){"use strict";var a=n(191),o=n(2),i=n(0);t.a=()=>{var e;const[t,n]=Object(a.useState)(!(null===(e=Object(o.a)().cookieConsent)||void 0===e||!e.ANALYTICS)),c=e=>n(!(null===e||void 0===e||!e.ANALYTICS));return Object(a.useEffect)((()=>(Object(i.S)("cookieConsent",c),()=>{Object(i.T)("cookieConsent",c)})),[]),t}},767:function(e,t,n){"use strict";var a=n(191),o=n(210),i=n.n(o);const c=Object(a.createContext)({focusNextElement:i.a});t.a=c},768:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a='\n  a[href]:not([tabindex="-1"]):not([disabled]), area[href]:not([tabindex="-1"]):not([disabled]), \n  input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), \n  textarea:not([disabled]):not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), \n  iframe:not([tabindex="-1"]):not([disabled]), object:not([tabindex="-1"]):not([disabled]), [tabindex="0"]:not([disabled]), \n  [contenteditable]:not([tabindex="-1"]):not([disabled])'},769:function(e,t,n){"use strict";var a=n(191),o=n(196),i=n(240),c=n(327),r=n(762),s=n(220),l=n(228),d=n(252),u=n(654);const b=(new i.a).setUrl("/video-chat/conversation/log/event").setType(d.a.POST).build();t.a=e=>{let{videoConversationId:t,conversationId:n}=e;const i=Object(r.a)(),[d]=Object(c.a)(b,{ignoreResults:!0}),O=Object(o.d)(s.h),f=Object(l.d)(O),p=Object(a.useCallback)((e=>{const{eventType:n,activityAdditionalDetails:a}=e;return{videoConversationId:t,loggerSnUserId:f,eventType:n,loggerSnType:"SPRINKLR_LIVE_CHAT",offsetTime:0,activityAdditionalDetails:a}}),[n,t,f]);return Object(a.useMemo)((()=>new u.a(d,{adapter:p,skip:!t||!i})),[d,p,t,i])}},770:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a=e=>e.split("").reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)),0)},771:function(e,t,n){"use strict";var a=n(191),o=n.n(a),i=n(267),c=n.n(i),r=n(287),s=n.n(r),l=n(756),d=n(219),u=n(1206),b=n(475),O=n(224),f=n(670),p=n(192);const v=()=>`${f.a}_${c.a.v4()}`,y=Object(a.forwardRef)(((e,t)=>{const{shouldDisableInput:n,placeholder:o,input:i,className:c,handleFocus:r,handleBlur:y,handleChange:j,handleEnter:g,containerRef:h}=e,[m,I]=Object(a.useState)(v()),{window:C}=Object(a.useContext)(d.FrameContext),T=Object(a.useRef)(),{formatMessage:E}=Object(l.a)(),x=Object(a.useCallback)(s()((()=>{var e;const t=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect().width;T.current!==t&&(T.current=t,I(v()))}),250),[]),S=Object(b.a)(C,x);return Object(a.useEffect)((()=>{h.current&&S(h.current)}),[]),Object(p.jsx)(u.a,{ref:t,key:m,"aria-label":o||E(O.a.textArea),disabled:n,className:c,placeholder:o,value:i,onKeyDown:g,onChange:j,onFocus:r,onBlur:y,minRows:1,maxRows:8,id:f.a,"data-testid":"textarea"})}));t.a=o.a.memo(y)},772:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var a=n(194),o=n(195);const i=Object(a.a)("div",{target:"e13xym9v0"})((e=>({backgroundColor:Object(o.d)("header.lg.backgroundColor",Object(o.d)("header.backgroundColor")(e))(e),backgroundImage:Object(o.d)("header.lg.gradients")(e)})),";padding:var(--spr-lc-safe-area-top) var(--spr-lc-safe-area-right) var(--spr-lc-safe-area-bottom) var(--spr-lc-safe-area-left);"),c=Object(a.a)("div",{target:"e13xym9v1"})("border-radius:",Object(o.d)("card.borderRadius"),";background-color:var(--spr-lc-bgc-16);")},773:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(191);function o(e){const t=Object(a.useRef)();return Object(a.useEffect)((()=>{t.current=e}),[e]),t.current}},774:function(e,t,n){"use strict";var a=n(818),o=n(344),i=n(2);const c=e=>`spr-cobrowse-state_${e}`,r=!!o.a.getSessionOrigin(Object(i.a)());t.a={get:async e=>{try{const t=c(e);if(!r)return a.d.getItem(t);const n=await a.c.getItem(t);if(!n){const e=await a.d.getItem(t);if(e)return a.d.removeItem(t),await a.c.setItem(t,e),e}return n}catch(t){return void console.warn(t)}},set:(e,t)=>r?a.c.setItem(c(e),t):a.d.setItem(c(e),t),remove:e=>r?a.c.removeItem(c(e)):a.d.removeItem(c(e))}},775:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(191);var a=n(192);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(this,arguments)}function i(e){return Object(a.jsx)("svg",o({viewBox:"0 0 14 14","data-icon-name":"Chevron",focusable:"false"},e),Object(a.jsx)("path",{d:"M13.728 4.935a.931.931 0 00-1.316 0L7 10.346l-5.41-5.41a.932.932 0 00-1.318 0 .929.929 0 000 1.315l6.07 6.07a.931.931 0 001.316 0l6.07-6.07a.931.931 0 000-1.315z"}))}},776:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(329),o=n.n(a),i=n(263),c=n.n(i);let r;function s(e,t){const n=o()(e);return function(e,t,n){return[...Array(n)].map(((n,a)=>(a+t)%e.length)).map((t=>e[t]))}(n,function(e){return c()(r)&&(r=Math.floor(Math.random()*e.length)),r}(n),t)}},777:function(e,t,n){"use strict";var a=n(191),o=n(645);n.d(t,"a",(function(){return o.b})),t.b=function(){return Object(a.useContext)(o.c)}},778:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1060);const o=()=>Object(a.a)((()=>n.e(57).then(n.bind(null,1604))),{maxAttempts:3})},779:function(e,t,n){"use strict";n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"e",(function(){return j})),n.d(t,"h",(function(){return g})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return m}));var a=n(31),o=n.n(a),i=n(11),c=n.n(i),r=n(213),s=n(561),l=n(269),d=n(204),u=n(614),b=n(237),O=n(525);const f=e=>({[s.a.MIC]:!1,[s.a.CAMERA]:!1,[s.a.DRAG]:!e,[s.a.FULL_SCREEN]:e}),p=e=>e===l.e.WAITING,v=e=>e===l.g.WAITING?l.g.WAITING:l.g.SETUP,y=(e,t)=>((e,t)=>{switch(e.state){case u.a.CALL_INITIATED:case u.a.CALL_STARTING:return t.WAITING;case u.a.CALL_OFFER_ACCEPTED:return t.SETUP;default:return t.JOINED}})(e,t?l.e:l.g),j=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e?b.a.AUDIO_CALL_JOIN_CTA_CLICKED:b.a.VIDEO_CALL_JOIN_CTA_CLICKED:e?b.a.AUDIO_CALL_JOIN_BACK_CTA_CLICKED:b.a.VIDEO_CALL_JOIN_BACK_CTA_CLICKED},g=e=>{let{callDetails:t}=e;return!o()(t)},h=e=>t=>(t.type===O.l||t.type===O.e)&&c()(t,"payload.videoConversationId")===e,m=(e,t,n)=>Object(r.o)(e,t).items.find((e=>{var t,a;return(null===(a=null===(t=e.messagePayload)||void 0===t?void 0:t.attachment)||void 0===a?void 0:a.type)===d.b.VIDEO_CHAT&&e.messagePayload.attachment.videoChatConversationId===n}))},780:function(e,t,n){"use strict";t.a={INIT:0,STARTED:1,COMPLETED:2,ABORTED:3,ERROR:4,PAUSE:5}},781:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));const a="@chatPrompt/PROMPT_ACTION_TRIGGER",o="@proactiveConversation/PROACTIVE_CONVERSATION_ACTION_TRIGGER"},782:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));const a={NEW_CONVERSATION:"NEW_CONVERSATION",CLOSE:"CLOSE",URL:"OPEN_URL",VIDEO_CALL:"VIDEO_CALL",AUDIO_CALL:"AUDIO_CALL",OPEN_LAST_CONVERSATION:"OPEN_LAST_CONVERSATION"},o={ENGAGED:"ENGAGED",CLOSED:"CLOSED",TRIGGERED:"TRIGGERED"}},783:function(e,t,n){"use strict";var a=n(355),o=n.n(a);t.a=new class{constructor(){this.subscribers={},this.emit=e=>{var t;Object.keys(null!==(t=this.subscribers[e.type])&&void 0!==t?t:{}).forEach((t=>{this.subscribers[e.type][t](e)}))},this.on=e=>{let{type:t,subscriber:n}=e;this.subscribers[t]||(this.subscribers[t]={});const a=o()("PUSH_EVENTS");return this.subscribers[t][a]=n,()=>{delete this.subscribers[t][a]}}}}},825:function(e,t,n){"use strict";var a=n(197),o=n(194),i=(n(191),n(193)),c=n(1065),r=n(224),s=n(192);var l=e=>Object(s.jsx)("div",{className:"sr-only","aria-live":"polite",id:e.notificationId},Object(s.jsx)(c.a,Object(a.a)({},e.message,{values:{count:Object(s.jsx)(i.b,{value:e.unreadCount})}})));const d=Object(o.a)("div",{target:"eobaybk0"})({name:"3zfe4h",styles:"background:var(--spr-lc-bgc-15);color:var(--spr-lc-c-15);font-size:var(--spr-lc-fs-xs);font-weight:600;border-radius:50%;"}),u=Object(i.d)({moreThanTenNotifications:{id:"moreThanTenNotifications",defaultMessage:"{value}+"}});t.a=function(e){return Object(s.jsx)(d,{"data-testid":e.notificationId,className:`center-x-y ${e.className}`},Object(s.jsx)(l,{message:1===e.count?r.a.newNotification:r.a.newNotifications,unreadCount:e.count,notificationId:e.notificationId}),(t=e.count)>=10?Object(s.jsx)(c.a,Object(a.a)({},u.moreThanTenNotifications,{values:{value:Object(s.jsx)(i.b,{value:9})}})):Object(s.jsx)(i.b,{value:t}));var t}},827:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return j}));var a=n(285),o=n(2),i=n(442),c=n(559),r=n(856),s=n(52),l=n(3),d=n(656),u=n(227);const b=async e=>{let{ssoId:t,conversationId:n,messageId:o,returnUrl:i}=e;const c=await(async e=>{let{ssoId:t,conversationId:n,messageId:a,returnUrl:o}=e;const{token:i}=await Object(d.a)(),c=[{key:"idpId",value:t},{key:"x-chat-token",value:i},{key:"v",value:"1"}];return n&&c.push({key:"conversationId",value:n}),a&&c.push({key:"messageId",value:a}),o&&c.push({key:"returnUrl",value:o}),c})({ssoId:t,conversationId:n,messageId:o,returnUrl:i});return`https://www.samsung.com/chat/api/livechat/authenticate/begin?${Object(a.g)(c)}`},O=(e,t)=>{var n,a;const i=(e=>{var t,n;return null===(t=e.userSessionConfig)||void 0===t||null===(n=t.authenticationMethods)||void 0===n?void 0:n.find((e=>"SSO"===e.type))})(t),c=e.chatUser.loginMethod,r=!(null===i||void 0===i||!i.idpId)&&!(null===(n=Object(o.a)().user)||void 0===n||!n.isSSOAuthorized),s=!(null===i||void 0===i||!i.idpId)&&!(null===(a=t.userSessionConfig)||void 0===a||!a.disableAnonymousUserSession)&&!((null===c||void 0===c?void 0:c.type)===u.a.SSO&&(null===c||void 0===c?void 0:c.id)===i.idpId);return s||r?{ssoParams:i,shouldTriggerSSOBasedOnAppSettings:r,shouldTriggerSSOBasedOnAppConfig:s}:{}},f=()=>Object(r.a)({src:`${Object(a.d)("html/listener.html")}?appId=${Object(o.a)().appId}`,id:"subscriberIframe"}),p=e=>new Promise(((t,n)=>{const a=Object(c.d)("/logout",(()=>{l()})),r=async e=>{if(e.origin.match(/(sprinklr\.com)/g)&&"string"===typeof e.data)try{const{params:n}=JSON.parse(e.data);await Object(i.l)(Object(o.a)().appId,n.authToken),t(n)}catch{n()}finally{s()}},s=()=>{d(),a&&a(),window.removeEventListener("message",r)},l=()=>{s(),n()},d=e(l);window.addEventListener("message",r)})),v=async e=>{let{ssoId:t,conversationId:n,messageId:a,ssoTimeout:o}=e;const i=(e=>{const t=window.screen.width/2,n=window.screen.height/2,a=t-t/2,o=n-n/2;return window.open(e,"_blank",`height=${n},width=${t},top=${o},left=${a}`)})(await b({ssoId:t,conversationId:n,messageId:a})),{removeIframe:c}=f();return p((e=>{i||e();const t=setInterval((()=>{i&&i.closed&&e()}),1500);let n;return o&&(n=setTimeout((()=>{e()}),o)),()=>{clearInterval(t),n&&clearTimeout(n)}})).finally((()=>{i&&i.close(),c()}))},y=async e=>{let{ssoId:t,conversationId:n,messageId:a}=e;const{removeIframe:o}=Object(r.a)({src:await b({ssoId:t,conversationId:n,messageId:a}),id:"spr-live-chat-hidden-iframe-sso"}),{removeIframe:i}=f();return p((e=>{const t=setTimeout(e,1e4);return()=>clearTimeout(t)})).finally((()=>{o(),i()}))},j=async e=>{let{ssoId:t}=e;const n=Object(s.b)(),a=Object(l.d)(),o=encodeURIComponent(n),i=await b({ssoId:t,returnUrl:o});a.location.replace(i)}},829:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n(211),o=n(1060);var i=n(191),c=n(205),r=n(192);const s=(l=()=>n.e(71).then(n.bind(null,1713)),Object(a.a)((()=>Object(o.a)(l,{maxAttempts:3}))));var l;const d=e=>{var t;const{catalogConfig:n}=Object(c.a)();return null!==n&&void 0!==n&&n.catalogId?Object(r.jsx)(i.Suspense,{fallback:null!==(t=e.fallback)&&void 0!==t?t:null},Object(r.jsx)(s,e)):e.children}},835:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s}));var a=n(197),o=n(191),i=n(771),c=n(211),r=n(192);const s=Object(c.a)((()=>n.e(70).then(n.bind(null,1702))));var l=Object(o.forwardRef)(((e,t)=>Object(r.jsx)(o.Suspense,{fallback:Object(r.jsx)(i.a,e)},Object(r.jsx)(s,Object(a.a)({ref:t},e)))))},857:function(e,t){e.exports=function(e){return null===e}},865:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return O}));var a=n(737),o=n(859),i=n(858),c=n(271),r=n(814),s=n(559),l=n(254);const d=e=>{a.a.on(e),Object(o.e)(o.a.SUCCESS)},u=async e=>{Object(o.e)(o.a.FAIL),Object(i.c)(!1),await Object(r.b)(),Object(c.a)({topic:l.b,payload:{error:!0,errorPayload:{type:"BOOT_FAILED",message:e}}})},b=()=>{Object(o.e)(o.a.EXPIRED)},O=e=>{var t;Object(s.a)()||Object(s.e)({shouldReboot:null===(t=e.payload)||void 0===t?void 0:t.shouldReboot})}},880:function(e,t,n){var a=n(65),o=n(57),i=n(12),c=n(250),r=n(563);e.exports=function(e){if(null==e)return 0;if(i(e))return c(e)?r(e):e.length;var t=o(e);return"[object Map]"==t||"[object Set]"==t?e.size:a(e).length}},881:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(191),o=n.n(a),i=n(422),c=n.n(i),r=n(283),s=n.n(r),l=n(880),d=n.n(l),u=n(605),b=n(232),O=n(192);const f=o.a.createContext({}),p=Object(a.memo)((e=>{const{getValue:t,subscribe:n}=Object(u.a)(),o=t(),[i,r]=Object(a.useState)((()=>({pagesMetaData:{[o]:[{startTime:Object(b.a)(),endTime:void 0}]},currentPageUrl:o})));return Object(a.useEffect)((()=>{const e=n("page-context-subscriber",(e=>{let{currentUrl:t,previousUrl:n}=e;r((e=>(e=>{let{prevPageContextValue:t,previousUrl:n,currentUrl:a}=e;const o=Object(b.a)(),i=t.pagesMetaData,r=s()(c()(i[n]),{endTime:{$set:o}});return s()(t,{pagesMetaData:{[n]:{$splice:[[d()(i[n])-1,1,r]]},[a]:{$set:[...i[a]||[],{startTime:o,endTime:void 0}]}},currentPageUrl:{$set:a}})})({prevPageContextValue:e,previousUrl:n,currentUrl:t})))}));return()=>{e()}}),[]),Object(O.jsx)(f.Provider,{value:i},e.children)}));t.b=f},885:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var a=n(194),o=n(360),i=n(203),c=n(195);const r=Object(a.a)(o.a,{target:"e1yw42fw0"})("position:absolute;top:40px;height:12px;width:12px;",(e=>{let{isPhone:t}=e;return t&&"\n    height: 14px;\n    width: 14px;\n    top: 20px;\n   "}),";padding:0;",Object(i.e)(i.i,i.h),";"),s=Object(a.a)(r,{target:"e1yw42fw1"})("height:28px;width:28px;background:",(e=>Object(c.a)("white")(e)),";"),l=Object(a.a)(s,{target:"e1yw42fw2"})("margin-top:var(--spr-lc-safe-area-top);",(e=>{let{isPhone:t,direction:n}=e;return t?`${Object(i.d)("right: calc(20px + var(--spr-lc-safe-area-right))","left: calc(20px + var(--spr-lc-safe-area-left))")({direction:n})};`:`${Object(i.d)("right: calc(40px + var(--spr-lc-safe-area-right))","left: calc(40px + var(--spr-lc-safe-area-left))")({direction:n})};`}),"")},886:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return O}));var a=n(194),o=n(195),i=n(495),c=n(192);const r={"%":1,vw:1,vh:1,vmin:1,vmax:1},s=Object(a.a)(i.a,{target:"ewsnucf0"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),l=Object(a.a)("div",{target:"ewsnucf1"})("height:100%;width:100%;display:flex;align-items:center;justify-content:center;background-image:",Object(o.d)("page.gradients"),";background-color:",Object(o.d)("page.backgroundColor"),";"),d=e=>{const{absoluteValue:t}=Object(o.b)("page.minPadding",{defaultUnit:"px"})(e);return Object(c.css)("border-radius:",t?Object(o.d)("frame.borderRadius")(e):"0px",";",!e.isContained&&(e=>{const{absoluteValue:t,styleValue:n,unit:a}=Object(o.b)("page.maxWidth",{defaultUnit:"px"})(e),{absoluteValue:i,styleValue:c,unit:s}=Object(o.b)("page.maxHeight",{defaultUnit:"px"})(e),l=Object(o.d)("frame.borderRadius")(e);return r[s]&&r[a]?100===i||100===t?"":`border-radius: ${l};`:r[s]?100===i?"":`\n        @media screen and (min-width: calc(${n} + 1px)) {\n          border-radius: ${l};\n        };\n      `:r[a]?100===t?"":`\n        @media screen and (min-height: calc(${c} + 1px)) {\n          border-radius: ${l};\n        };\n      `:`\n      @media screen and (min-width: calc(${n} + 1px)) and (min-height: calc(${c} + 1px)) {\n        border-radius: ${l};\n      };\n    `})(e),";")},u=Object(a.a)("div",{target:"ewsnucf2"})((e=>{const{absoluteValue:t,unit:n}=Object(o.b)("page.minPadding",{defaultUnit:"px"})(e),a=2*t+n;return Object(c.css)("height:calc(100% - ",a,");width:calc(100% - ",a,");")})," box-shadow:",(e=>Object(o.d)("frame.boxShadow")(e)),";overflow:hidden;background-color:var(--spr-lc-bgc-1);",(e=>Object(o.d)("body.backgroundImage")(e)?`background-image: ${Object(o.d)("body.backgroundImage")(e)};`:""),";",(e=>!e.isContained&&`max-width: ${Object(o.d)("page.maxWidth")(e)};\n     max-height: ${Object(o.d)("page.maxHeight")(e)};\n  `)," ",d,";"),b={name:"2b9rdz",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}"},O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(c.css)("html,body{height:100%;}body{margin:0;}",e,"")}},887:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n(191),o=n.n(a),i=n(210),c=n.n(i),r=n(769),s=n(192);const l={debug:c.a,info:c.a,error:c.a,warning:c.a},d=o.a.createContext(l),u=e=>{let{videoConversationId:t,conversationId:n,children:a}=e;const o=Object(r.a)({videoConversationId:t,conversationId:n});return Object(s.jsx)(d.Provider,{value:o},a)}},888:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n(194),o=n(195),i=n(671);const c=32,r=Object(a.a)("div",{target:"e1b8encq0"})("background-color:",(e=>Object(o.d)("header.lg.backgroundColor",Object(o.d)("header.backgroundColor")(e))(e)),";background-image:",Object(o.d)("header.lg.gradients"),";padding:",Object(o.g)("header.lg.padding"),";padding-bottom:",(e=>c+Object(o.d)("header.lg.paddingBottom")(e)),"px;height:",(e=>e.height||(e=>Object(i.c)(e)+c)(e)),"px;transition:",(e=>e.showTransition&&"height 0.2s ease-out"),";"),s=Object(a.a)("div",{target:"e1b8encq1"})({name:"anqr8i",styles:"width:100%;height:100%;padding:var(--spr-lc-safe-area-top) var(--spr-lc-safe-area-right) var(--spr-lc-safe-area-bottom) var(--spr-lc-safe-area-left);"})},889:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(194),o=n(203);const i=Object(a.a)("div",{target:"e18hq32b0"})((e=>Object(o.b)(e)),";")},890:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={BUNDLE_DOWNLOAD_FAILED:"BUNDLE_DOWNLOAD_FAILED",SESSION_CREATION_FAILED:"SESSION_CREATION_FAILED",OTP_SEND_FAILED:"OTP_SEND_FAILED",POSTBACK_SEND_FAILED:"POSTBACK_SEND_FAILED",RESUME_SESSION_FAILED:"RESUME_SESSION_FAILED",PERSISTED_STATE_NOT_FOUND:"PERSISTED_STATE_NOT_FOUND"}},891:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(199),o=n(209),i=n(672),c=n(313),r=n(195);const s=()=>{var e;const t=Object(o.a)(),n=Object(i.a)(),s=Object(a.b)(),l=Object(r.d)("trigger.orientation")({theme:s})===c.i.VERTICAL;return!(null===(e=t.trigger)||void 0===e||!e.draggable)&&!n&&!l}},892:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(191),o=n.n(a),i=n(210),c=n.n(i);const r=o.a.createContext({triggerPosition:null,onAction:c.a})},893:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(191);const o=Object(a.createContext)({setIsFrameMaximized:()=>null,isFrameMaximized:!1,isFrameManuallyResized:!1})},894:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return c}));const a=e=>{let{value:t,viewportHeight:n,triggerHeight:a}=e;return t<0?0:Math.min(t,n-a)},o=e=>{let{bottom:t,viewportHeight:n,triggerSize:a}=e;const o=Math.max(n-t-a,0);return t>o?o:void 0},i=e=>{let t=!0;return[Object.keys(e).reduce(((n,a)=>{const o=e[a].isOpen,i=e[a].canDragIfOpen;return t=t&&(!o||i),n+(o?e[a].height:0)}),0),t]},c=e=>{let{value:t,viewportWidth:n,triggerWidth:a}=e;return Math.max(0,Math.min(t,n-a))}},895:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(224);const o=e=>{let{totalUnreadCount:t=0,isMinimized:n=!0,formatMessage:o,formatNumber:i}=e;return t>0&&n?o(1===t?a.a.newNotification:a.a.newNotifications,{count:i(t)}):""}},896:function(e,t,n){var a=n(33);e.exports=function(){var e=arguments,t=a(e[0]);return e.length<3?t:t.replace(e[1],e[2])}},948:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ky})),n.d(t,"reInitApp",(function(){return Xy}));var a=n(191),o=n.n(a),i=n(309),c=n.n(i),r=n(192),s=n(196),l=n(500),d=n(1217),u=n(753),b=n(877);const O=e=>Object(r.jsx)(b.a,{history:e.history},Object(r.jsx)(u.b,null,e.children));var f=n(616),p=n(528),v=n(645),y=n(1035);const j=e=>{const t=Object(a.useState)(null);return Object(r.jsx)(y.a.Provider,{value:t},e.children)};var g=n(243),h=n(881),m=n(641),I=n(1051),C=n(884);class T extends o.a.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){var t;(e=>"ChunkLoadError"===(null===e||void 0===e?void 0:e.name))(e)&&(null===(t=this.props.logger)||void 0===t||t.error(`${(e=>e.request.split("/").slice(-1)[0])(e)} Chunk failed to load`))}render(){const{hasError:e}=this.state,{children:t,fallbackRender:n=null}=this.props;return e?n:t}}var E=T,x=n(1213),S=n(337),_=n.n(S),A=n(205),P=n(472),R=n(326),w=n(443),N=n(257),M=n(207),L=n(271),k=n(279),D=n(814),U=n(858),B=n(254),G=n(0);const $=e=>Object(N.e)(Object(M.b)(e)),F=e=>{const t=Object(P.a)(),n=Object(A.a)(),o=Object(s.d)($),i=Object(G.P)(),c=w.a.getVisibilityConfigFilter(n),{hasPassed:r}=Object(R.a)(i?void 0:c,{logOnSuccess:!0,defaultValue:!1}),l=!r&&o;return Object(a.useEffect)((()=>{r&&Object(k.a)("Sprinklr Chat hidden by visibility criteria"),o||Object(k.a)("Sprinklr Chat disabled by sdk"),Object(U.c)(l),Object(L.a)({topic:B.c,payload:{data:{isChatVisible:l}}})}),[r,o,l]),Object(a.useEffect)((()=>((async()=>{await Object(D.b)(),Object(L.a)({topic:B.a,payload:{}}),Object(L.a)({topic:B.b,payload:{error:!1}})})(),()=>{Object(L.a)({topic:B.c,payload:{data:{isChatVisible:!1}}})})),[]),_()((()=>{Object(D.b)()}),[t]),l?e.children:null};var V=o.a.memo(F),H=n(639),W=n(617),z=n(199),q=n(952),K=n(644),X=n(221),Z=n.n(X),Y=n(15),Q=n.n(Y);const J=e=>{let{isDarkMode:t,theme:n,targetDocument:i,container:c,children:s}=e;const{targetElement:l,cssVariables:d}=Object(a.useMemo)((()=>{const e=i&&c?i.querySelector(c):null,a=Q()(t?n.tokens.dark:Z()(n.tokens,"dark"),((e,t,n)=>`${e}${n}:${t};`),"");let o;return o=e?t?`.spr-lc-dark{${a}}`:`.spr-lc-light{${a}}`:`:root {${a}}`,{targetElement:e,cssVariables:o}}),[n.tokens,t,i,c]);return Object(a.useLayoutEffect)((()=>{l&&function(e,t){t?e.classList.contains("spr-lc-dark")||(e.classList.add("spr-lc-dark"),e.classList.remove("spr-lc-light")):e.classList.contains("spr-lc-light")||(e.classList.add("spr-lc-light"),e.classList.remove("spr-lc-dark"))}(l,t)}),[l,t]),Object(r.jsx)(o.a.Fragment,null,Object(r.jsx)(r.Global,{styles:Object(r.css)(d,"","")}),s)};var ee=n(248),te=n(817);var ne=e=>{let{theme:t,isDarkMode:n,targetDocument:o,container:i,skipAutoGenerate:c,children:s}=e;const{skin:l}=Object(ee.a)(),d=Object(a.useMemo)((()=>{if(c)return t;const e=Object(te.a)({appColors:t.colors,appTypography:t.typography,appIcons:t.icons,appTokens:t.tokens});return Object(te.c)({appBase:e,styles:t.styles,skin:l})}),[t,l,c]);return Object(r.jsx)(z.a,{theme:d},Object(r.jsx)(J,{isDarkMode:n,targetDocument:o,container:i,theme:d},s))},ae=n(878);function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oe.apply(this,arguments)}const ie={direction:"ltr",device:"DESKTOP",skin:"CLASSIC",intl:{locale:"en",messages:{},defaultLocale:"en"},ownerDocument:window.document},ce=e=>{let{direction:t,device:n,skin:o,ownerDocument:i,intl:c,children:s,themeConfig:l,nonce:d}=e;const u=Object(a.useMemo)((()=>((e,t)=>Object(K.a)({container:e.head,nonce:t}))(i,d)),[i,d]);return Object(r.jsx)(r.CacheProvider,{value:u},Object(r.jsx)(q.a,c,Object(r.jsx)(ae.b,{isDarkMode:l.isDarkMode,direction:t,device:n,skin:o},Object(r.jsx)(ne,oe({},l,{targetDocument:i}),s))))};ce.defaultProps=ie;var re=ce,se=n(374),le=n(209),de=n(1055);var ue=e=>{let{children:t}=e;const{theme:n}=Object(le.a)(),{fontConfig:o}=Object(A.a)(),i=Object(se.a)(),c=Object(a.useMemo)((()=>Object(te.c)({appBase:Object(te.a)({appColors:n.colors,appTypography:n.typography,appIcons:n.icons,appTokens:n.tokens,fontConfig:o}),styles:Object(de.b)(n.styles),skin:i})),[n,i,o]);return Object(r.jsx)(z.a,{theme:c},t)},be=n(238),Oe=n(200),fe=n(3),pe=n(48);const ve=Object(W.c)((e=>{let{intl:t,children:n}=e;const o=Object(be.a)(),i=Object(Oe.a)(),c=Object(se.a)(),s=Object(z.b)(),l=Object(a.useMemo)((()=>({locale:t.locale,messages:t.messages,defaultLocale:t.defaultLocale})),[t]),d=Object(a.useMemo)((()=>({theme:s,isDarkMode:o.isDarkMode,skipAutoGenerate:!0,container:`#${pe.a}`})),[s,o.isDarkMode]);return Object(r.jsx)(re,{ownerDocument:Object(fe.d)().document,direction:i.direction,device:o.device,skin:c,intl:l,themeConfig:d,nonce:o.nonce},n)})),ye=e=>{let{children:t}=e;return Object(r.jsx)(ue,null,Object(r.jsx)(ve,null,t))};var je=o.a.memo(ye),ge=n(206),he=n.n(ge),me=n(1),Ie=n.n(me);const Ce=e=>{let{id:t,filters:n,cb:o}=e;const i=Object(R.a)(n);return Object(a.useEffect)((()=>{o({data:{id:t,filters:n,results:Ie()(i)?he()(i,(e=>({passed:e.hasPassed}))):{passed:i.hasPassed}}})}),[i,n,o]),null},Te=e=>Object(N.c)(Object(M.b)(e)),Ee=o.a.memo((e=>{const t=Object(s.d)(Te);return Object(r.jsx)(o.a.Fragment,null,he()(t,((e,t)=>{let{filters:n,cb:a}=e;return Object(r.jsx)(Ce,{key:t,id:t,filters:n,cb:a})})),e.children)}));var xe=n(1056),Se=n(197),_e=n(255),Ae=n(664),Pe=n(193),Re=n(210),we=n.n(Re),Ne=n(667),Me=n(270),Le=n(194),ke=n(530),De=n(495),Ue=n(766),Be=n(195);const Ge=e=>Object(r.css)("fill:",Object(Be.a)("black")({theme:e}),";height:12px;width:12px;"),$e=Object(Le.a)("div",{target:"e12trxni0"})("position:fixed;top:0;left:0;z-index:",(e=>Object(Be.d)("frame.zIndex")(e)),";transform:translatez(",(e=>Object(Be.d)("frame.translateZ")(e)),"px) !important;height:100%;width:100%;"),Fe=Object(Le.a)(De.a,{target:"e12trxni1"})({name:"774i4t",styles:"height:100%;width:100%;border-width:0px;"}),Ve=e=>Object(r.css)(".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}body{background-color:",Object(ke.l)(.2,Object(Be.a)("charcoal")({theme:e})),";background-image:none;}"),He=Object(Le.a)(Ue.c,{target:"e12trxni2"})({name:"hgqvtn",styles:"width:48px;height:48px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"}),We=Object(Le.a)(Ue.c,{target:"e12trxni3"})({name:"uwwqev",styles:"width:100%;height:100%;"});var ze=n(885),qe=n(333),Ke=n(201),Xe=n(198),Ze=n(275);const Ye=Object(Pe.d)({preview:{id:"preview",defaultMessage:"Preview"}});var Qe={name:"1cqsrz9",styles:"border-radius:inherit;"};var Je=Object(W.c)((e=>{let{previewItem:t,intl:n}=e;const o=Object(z.b)(),i=Object(Ke.a)(),c=Object(_e.a)(),s=!!t&&t.type===Ze.b.DIALOGUE,{direction:l}=Object(Oe.a)(),d=Object(a.useCallback)((e=>{null===e||void 0===e||e.stopPropagation(),null===e||void 0===e||e.preventDefault(),c.goBack()}),[c]),u=Object(a.useMemo)((()=>s||i?we.a:d),[s,i,d]);return Object(r.jsx)($e,{className:"spr-chat__modal-box spr-live-chat-frame"},Object(r.jsx)(Fe,{name:"spr-chat__modal-frame","aria-label":n.formatMessage(Ye.preview),title:n.formatMessage(Ye.preview)},Object(r.jsx)(r.Global,{styles:Ve(o)}),Object(r.jsx)(a.Suspense,{fallback:Object(r.jsx)(qe.a,{onBlur:u,borderRadiusStyles:Qe},Object(r.jsx)(He,null,Object(r.jsx)(We,{className:"center-x center-y"})),!s&&Object(r.jsx)(ze.a,{Icon:Me.a,iconCss:Ge(o),iconName:Xe.a.CLOSE,"aria-label":Xe.a.CLOSE,direction:l,isPhone:i,onClick:d}))},Object(r.jsx)(Ne.a,{previewItem:t,handleClearPreview:d}))))})),et=n(11),tt=n.n(et);var nt=e=>{if(!e.search.includes("preview=1"))return null;const t=tt()(e.state,"sprPreview.type");switch(t){case Ze.b.DIALOGUE:return{type:t,message:tt()(e.state,"sprPreview.message"),title:tt()(e.state,"sprPreview.title"),locationParams:tt()(e.state,"sprPreview.locationParams"),cancelLabel:tt()(e.state,"sprPreview.cancelLabel"),confirmationLabel:tt()(e.state,"sprPreview.confirmationLabel"),feedbackConfig:tt()(e.state,"sprPreview.feedbackConfig"),onConfirm:tt()(e.state,"sprPreview.onConfirm"),onCancel:tt()(e.state,"sprPreview.onCancel")};case Ze.b.MEDIA:return{type:t,attachments:tt()(e.state,"sprPreview.attachments"),attachmentIndex:tt()(e.state,"sprPreview.attachmentIndex"),additional:tt()(e.state,"sprPreview.additional"),linkPreview:tt()(e.state,"sprPreview.linkPreview"),mediaUploadStatus:tt()(e.state,"sprPreview.mediaUploadStatus"),downloadParams:tt()(e.state,"sprPreview.downloadParams")};default:return null}};var at=()=>{const e=Object(_e.a)(),[t,n]=Object(a.useState)((()=>nt(e.location))),o=Object(a.useRef)(e.location.search),i=Object(a.useRef)(e.location.state);return Object(Ae.a)({route:/.*/,callback:()=>{const{search:t,state:a}=e.location;t===o.current&&a===i.current||(n(nt(e.location)),o.current=t,i.current=a)}}),t?Object(r.jsx)(Je,{previewItem:t}):null},ot=n(31),it=n.n(ot),ct=n(217),rt=n(661),st=n.n(rt),lt=n(394),dt=n(669),ut=n(1058),bt=n(887),Ot=n(220),ft=n(420),pt=n(269),vt=n(266);const yt=e=>Object(ft.d)(Object(Ot.b)(e)),jt=e=>Object(ft.f)(Object(Ot.b)(e)),gt=e=>Object(N.i)(Object(M.b)(e)),ht=e=>Object(ft.r)(Object(Ot.b)(e)),mt=e=>Object(ft.i)(Object(Ot.b)(e)),It=e=>{const t=Object(Ke.a)(),n=Object(s.d)(jt),o=Object(s.d)(yt),i=Object(s.d)(ht),c=Object(s.d)(gt),l=Object(ct.a)(vt.g),d=Object(s.d)(mt),u=Object(lt.a)(),b=n.state,O=o.state,f=st()(b),p=st()(O);return Object(a.useEffect)((()=>{c&&(t&&b&&b!==f||O===pt.e.WAITING)&&l(!1)}),[c,b,f,l,O,p]),Object(a.useEffect)((()=>{const e=()=>{u.info({message:`Currently on live chat tab: ${!document.hidden}`})};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[u]),it()(n)&&(i||it()(o))||t&&c&&!d?null:Object(r.jsx)(a.Suspense,{fallback:null},Object(r.jsx)(dt.a,Object(Se.a)({},e,{outgoingCallDetails:n,incomingCallDetails:o})))},Ct=e=>Object(ft.c)(Object(Ot.b)(e)),Tt=e=>Object(ft.n)(Object(Ot.b)(e)),Et=e=>{const t=Object(s.d)(Ct),n=Object(s.d)(Tt);return Object(r.jsx)(bt.b,{videoConversationId:t.videoConversationId,conversationId:t.conversationId},Object(r.jsx)(ut.b,{videoConversationId:t.videoConversationId,conversationId:t.conversationId,isAudioCall:n},Object(r.jsx)(It,e)))};var xt=o.a.memo(Et),St=n(1059),_t=n(829),At=n(835),Pt=n(1209),Rt=n(348),wt=n(462),Nt=n(49);var Mt=()=>{const e=Object(le.a)();return Object(a.useMemo)((()=>Object(wt.c)(e,"conversationScreen").some((e=>{let{type:t}=e;return t===Nt.b.PERSONAL_SHOPPER}))),[e])};var Lt=()=>{var e,t;const n=Object(se.a)(),o=Mt(),i=null===(e=Object(A.a)())||void 0===e||null===(t=e.richTextComposer)||void 0===t?void 0:t.enabled,[c,s]=Object(a.useState)();return Object(Rt.a)(_t.a,{skip:!o}),Object(Rt.a)(At.a,{skip:!i}),Object(a.useLayoutEffect)((()=>{St.a.preload(n).then((e=>{let[t]=e;s(t)}))}),[]),Object(r.jsx)("div",{className:"flex-column-container full-height full-width spr ovf-hidden"},c?Object(r.jsx)(a.Suspense,{fallback:Object(r.jsx)(Pt.a,null)},Object(r.jsx)(St.a,{pages:c,shouldMountShopperContext:o})):Object(r.jsx)(Pt.a,null))},kt=n(886),Dt=n(208),Ut=n(376);const Bt=["/conversation/"],Gt={survey:Ut.a.SURVEY,401:Ut.a[401],home:Ut.a.HOME,"guided-workflow":Ut.a.GUIDED_WORKFLOW,logout:Ut.a.LOGOUT},$t=e=>{let t;const n=null===e||void 0===e?void 0:e.split("/");if(n&&n.length>1)switch(n[1]){case"knowledge-base":n.length>2&&(t="article"===n[2]?Ut.a.KNOWLEDGE_BASE:Ut.a.KNOWLEDGE_BASE_LIST);break;case"conversation":{let e=n.length>3&&n[3];"survey"===e?t=Ut.a.SURVEY:"guided-workflow"===e?t=Ut.a.GUIDED_WORKFLOW:"knowledge-base"===e?t=Ut.a.KNOWLEDGE_BASE:"sprinklr-entities"===e?t=Ut.a.SPRINKLR_ENTITIES:"personal-shopper"===e?(n[4],t=Ut.a.PERSONAL_SHOPPER):n.length>2&&(t="all"===n[2]?Ut.a.CONVERSATION_LIST:Ut.a.CONVERSATION);break}default:t=Gt[n[1]]}return t};var Ft=n(237);const Vt=(e,t)=>{var n;const a=null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n.pathname,o=$t(a);o&&((e,t)=>!("REPLACE"===t&&Bt.filter((t=>null===e||void 0===e?void 0:e.match(t))).length))(a,null===e||void 0===e?void 0:e.action)&&t({action:Ft.a.PAGE_OPENED,additional:{value:o}})},Ht=()=>{const e=Object(Dt.a)(),t=Object(_e.a)(),n=Object(a.useRef)(t.location.pathname);Object(a.useEffect)((()=>{Vt(t,e)}),[]),Object(Ae.a)({route:/.*/,callback:()=>{t.location.pathname!==n.current&&(Vt(t,e),n.current=t.location.pathname)}})};var Wt=n(612);var zt=o.a.memo(Object(W.c)((e=>{const t=Object(Ke.a)(),n=Object(Dt.a)();return Ht(),Object(a.useEffect)((()=>(n({action:Ft.a.CONVERSATION_WINDOW_OPENED}),()=>{n({action:Ft.a.CONVERSATION_WINDOW_CLOSED})})),[]),Object(r.jsx)(kt.b,null,Object(r.jsx)(kt.a,{ref:e.pageBoxRef,className:"spr",isContained:t||Object(Wt.a)()},Object(r.jsx)(Lt,null)))}))),qt=n(724),Kt=n(211);const Xt=Object(Kt.a)((()=>Promise.all([n.e(0),n.e(1),n.e(149)]).then(n.bind(null,1729))));var Zt=()=>{const e=Object(A.a)();return null!==e&&void 0!==e&&e.autoExpireUserSessionTimeInMinutes?Object(r.jsx)(a.Suspense,{fallback:null},Object(r.jsx)(Xt,null)):null},Yt=n(305),Qt=n.n(Yt),Jt=n(672),en=n(213);const tn=Object(Kt.a)((()=>n.e(65).then(n.bind(null,1679)))),nn=e=>Object(N.h)(Object(M.b)(e)),an=e=>Object(en.b)(Object(en.t)(Object(Ot.c)(e))),on=e=>Qt()(Object(M.d)(e));var cn=e=>{var t,n;const o=Object(s.d)(on),i=Object(s.d)(nn),c=Object(s.d)(an),l=Object(le.a)(),d=Object(Jt.a)(),u=!(null===l||void 0===l||null===(t=l.proactivePrompt)||void 0===t||!t.showWithBoxOpen),b=!(null===l||void 0===l||null===(n=l.trigger)||void 0===n||!n.hideWhenOpen);return o&&!(i&&!d&&!u)&&c?Object(r.jsx)(a.Suspense,{fallback:null},Object(r.jsx)(tn,Object(Se.a)({},e,{proactiveItem:o,showWithBoxOpen:u,isTriggerHiddenWhenMaximised:b}))):null},rn=n(287),sn=n.n(rn),ln=n(474),dn=n(475),un=n(427),bn=n(891),On=n(2),fn=n(313);const pn=e=>Object(Be.d)("trigger.yPadding",20)({theme:e}),vn=(e,t,n)=>{const a=Object(Be.d)("trigger.align")({theme:e}),o=Object(Be.d)("trigger.orientation")({theme:e})===fn.i.VERTICAL,i=Object(Be.d)("trigger.height")({theme:e});return a===fn.g.CENTER_LEFT||a===fn.g.CENTER_RIGHT?(t-(o?n:i))/2:pn(e)},yn=(e,t)=>{if(!e)return null;const{width:n,height:a,left:o,top:i}=e.getBoundingClientRect();return{width:n,height:a,left:o,right:t.innerWidth-o-n,bottom:t.innerHeight-i-a}};var jn=n(505),gn=n(892);const hn=Object(Kt.a)((()=>n.e(30).then(n.bind(null,1747)))),mn=e=>{var t;let{children:n}=e;const o=null!==(t=Object(fe.a)())&&void 0!==t?t:Object(fe.d)(),i=Object(On.a)().triggerContainer,c=Object(a.useRef)(!0),s=Object(un.a)(),l=Object(a.useMemo)((()=>i?o.document.querySelector(i):null),[i]),[d,u]=Object(a.useState)((()=>yn(l,o))),b=Object(a.useCallback)(sn()((()=>{u((()=>yn(l,o)))}),200),[]),O=Object(ln.a)(o,b),f=Object(dn.a)(o,b);c.current&&(c.current=!1,l&&(O(l),f(l))),Object(a.useLayoutEffect)((()=>{l&&b()}),[s]);const p=Object(a.useMemo)((()=>({triggerPosition:d,onAction:we.a})),[d]);return l?Object(r.jsx)(gn.a.Provider,{value:p},n):(Object(k.a)('Error in Sprinklr Live Chat. "triggerContainer" missing in window.sprChatSettings.'),null)},In=e=>{var t;let{children:n}=e;const{height:i,width:c}=Object(un.a)(),s=null!==(t=Object(fe.a)())&&void 0!==t?t:Object(fe.d)(),l=Object(z.b)(),d=Object(Be.d)("trigger.width")({theme:l}),u=Object(Be.d)("trigger.height")({theme:l}),b=Object(Be.d)("trigger.orientation")({theme:l})===fn.i.VERTICAL,O=(e=>Object(Be.d)("trigger.xPadding",20)({theme:e}))(l),f=pn(l),p=Object(Be.d)("trigger.align")({theme:l}),v=Object(jn.c)(p),y=Object(jn.d)(p),[j,g]=Object(a.useState)(d),[h,m]=Object(a.useState)((()=>({[v?fn.b.LEFT:fn.b.RIGHT]:O,bottom:y?NaN:vn(l,s.innerHeight,d)})));Object(a.useEffect)((()=>{b&&m((e=>({...e,bottom:vn(l,s.innerHeight,j)})))}),[b,l,i,j]);const I=Object(a.useCallback)((e=>{let{type:t,payload:n}=e;switch(t){case"UPDATE_WIDTH":g(n);break;case"UPDATE_POSITION":m((e=>({...e,...n})))}}),[]),C=Object(bn.a)(),T=Object(a.useMemo)((()=>{let e;const t=v?h.left:s.innerWidth-j-h.right,n=v?s.innerWidth-j-h.left:h.right;return e=C?t<=c/2?fn.b.LEFT:fn.b.RIGHT:v?fn.b.LEFT:fn.b.RIGHT,{triggerPosition:{height:u,width:j,bottom:h.bottom,left:t,right:n,edge:e,...y?{top:f}:void 0},onAction:I}}),[u,h.bottom,h.left,j,c,v,y,s.innerWidth,C,f]);return C?Object(r.jsx)(o.a.Suspense,{fallback:null},Object(r.jsx)(hn,{positionContextValue:T},n)):Object(r.jsx)(gn.a.Provider,{value:T},n)},Cn=e=>{let{children:t}=e;const n=Object(Jt.a)()?mn:In;return Object(r.jsx)(n,null,t)};var Tn=n(223),En=n(224);var xn=Object(W.c)((e=>{var t;const n=Object(le.a)(),i=Object(Tn.a)(),c=Object(a.useRef)(),s=e.intl.formatMessage,l=!(null===(t=n.trigger)||void 0===t||!t.useCustomTrigger),d=Object(kt.f)(null===i||void 0===i?void 0:i.pageGlobalStyles);return Object(r.jsx)(o.a.Fragment,null,Object(r.jsx)(r.Global,{styles:d}),Object(r.jsx)(kt.c,{"aria-label":s(En.a.liveChat),name:"spr-chat__page-frame",title:s(En.a.liveChat)},Object(r.jsx)(r.Global,{styles:kt.d}),Object(r.jsx)(Zt,null),Object(r.jsx)(zt,Object(Se.a)({},e,{pageBoxRef:c}))),l?Object(r.jsx)(Cn,null,Object(r.jsx)(cn,null)):null,Object(r.jsx)(xt,{parentFrameRef:c}),Object(r.jsx)(qt.c,{parentFrameRef:c}),Object(r.jsx)(at,null))})),Sn=n(476),_n=n.n(Sn),An=n(726),Pn=n(893),Rn=n(532),wn=n(894),Nn=n(565);var Mn=n(241);const Ln=e=>Object(N.i)(Object(M.b)(e)),kn=Object(W.c)((e=>{var t;const n=Object(s.d)(Ln),i=e.intl.formatMessage,c=Object(Dt.a)(),l=Object(Ke.a)(),[d,u]=Object(a.useState)(!1),[b,O]=Object(a.useState)(!1);Ht();const f=Object(a.useCallback)(((e,t)=>{u(e),O(t)}),[]),{triggerPosition:p}=Object(Rn.a)(),{xEdgeToAlign:v,alignType:y}=Object(Nn.a)("CHAT"),j=Object(Jt.a)()?An.b:An.c;_()((()=>{const e=n?Mn.a.CONVERSATION_WINDOW_CLOSED:Mn.a.CONVERSATION_WINDOW_OPENED;c({action:e})}),[n]);const g=Object(a.useMemo)((()=>({setIsFrameMaximized:f,isFrameMaximized:d,isFrameManuallyResized:b})),[f,d]),h=Object(le.a)(),m=!(null===h||void 0===h||null===(t=h.trigger)||void 0===t||!t.hideWhenOpen),{styles:I,triggerTopOffsetBeforeReposition:C}=(e=>{let{isMinimized:t,isPhone:n,isTriggerHiddenWhenMaximised:o}=e;const i=Object(a.useRef)(),c=Object(a.useRef)(),r=Object(z.b)(),{triggerPosition:s,onAction:l}=Object(Rn.a)(),d=Object(a.useRef)(),{height:u}=Object(un.a)(),b=Object(Be.d)("frame.sYMargin")({theme:r}),{alignType:O}=Object(Nn.a)("CHAT"),f=O===fn.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT||O===fn.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT,p=Object(Be.b)("frame.height",{})({theme:r}).absoluteValue,v=Object(a.useMemo)((()=>p+(o||f?-s.height:b)),[p,b,o,f,s.height]);return Object(a.useLayoutEffect)((()=>{t===c.current||n?t&&(d.current=Object(wn.c)({viewportHeight:u,triggerSize:s.height,bottom:s.bottom})):(c.current=t,o||l({type:"REPOSITION_TRIGGER",payload:{height:t?0:v,type:"box",isOpen:!t,reset:t,canDragIfOpen:!1}}))}),[t,n,l,o,v,s.bottom,s.height,u]),Object(a.useMemo)((()=>{i.current=Object(An.h)({theme:r,isPhone:n})}),[r,n]),{styles:i.current,triggerTopOffsetBeforeReposition:d.current}})({isMinimized:n,isPhone:l,isTriggerHiddenWhenMaximised:m});return Object(r.jsx)(o.a.Fragment,null,Object(r.jsx)(r.Global,{styles:I}),Object(r.jsx)(_n.a,{in:!n,classNames:An.f,timeout:{enter:An.a,exit:An.a},mountOnEnter:!0,unmountOnExit:!0,appear:!0},Object(r.jsx)(Pn.a.Provider,{value:g},Object(r.jsx)(j,{className:"spr-chat__box spr-live-chat-frame",ref:e.frameRef,isPhone:l,triggerPosition:p,triggerTopOffsetBeforeReposition:C,isMaximized:d,isTriggerHiddenWhenMaximised:m,xEdgeToAlign:v,alignType:y},Object(r.jsx)(An.e,{isPhone:l},Object(r.jsx)(An.d,{"aria-label":i(En.a.liveChat),name:"spr-chat__box-frame",isPhone:l,title:i(En.a.liveChat),xEdgeToAlign:v},Object(r.jsx)(r.Global,{styles:An.g}),Object(r.jsx)("div",{className:"full-height full-width"},Object(r.jsx)(Zt,null),Object(r.jsx)(Lt,null))))))))}));var Dn=o.a.forwardRef(((e,t)=>Object(r.jsx)(kn,{frameRef:t}))),Un=n(756),Bn=n(219),Gn=n(203),$n=n(566),Fn=n(259),Vn=n(251);const Hn={[$n.a.PULSE]:e=>{const t=Object(Be.d)("trigger.borderColor")({theme:e}),n=r.keyframes`0%{box-shadow:0 0 0 0 ${Object(ke.k)(t,.6)}}100%{box-shadow:0 0 0 10px ${Object(ke.k)(t,0)}}`;return Object(r.css)("animation:",n," 2s ease infinite;")}},Wn=e=>{const{triggerAnimationInfo:t,theme:n}=e,a=tt()(t,"effect"),o=Hn[a];return o?o(n):""},zn=e=>{const t=Math.min(Object(Be.d)("trigger.width")(e),Object(Be.d)("trigger.height")(e));return Math.min(Math.max(...Object(Vn.b)(Object(Be.d)("trigger.borderRadius",t/2)(e))),t/2)*(1-2**-.5)},qn=e=>.13*Object(Be.d)("trigger.overlayIconButton.button.height")(e),Kn=e=>Object(Be.d)("trigger.height")(e)-.5*Object(Be.d)("trigger.overlayIconButton.button.height")(e)-(zn(e)-qn(e)),Xn=e=>{let{direction:t,theme:n}=e;return`${t===Fn.a.LTR?"right":"left"}: ${-.5*Object(Be.d)("trigger.overlayIconButton.button.height")({theme:n})+zn({theme:n})-qn({theme:n})}px`},Zn=Object(Le.a)("div",{target:"eg0frzz0"})("width:",(e=>Object(Be.d)("trigger.overlayIconButton.button.width")(e)),"px;height:",(e=>Object(Be.d)("trigger.overlayIconButton.button.height")(e)),"px;border-radius:",(e=>Object(Be.d)("trigger.overlayIconButton.borderRadius",(Object(Be.d)("trigger.overlayIconButton.button.height")(e)+(Object(Be.d)("trigger.removeIcon.border")(e)?2:0))/2+"px")(e)),";background-color:",Object(Be.d)("trigger.removeIcon.backgroundColor"),";border:",Object(Be.d)("trigger.removeIcon.border"),";position:absolute;bottom:",(e=>Kn(e)),"px;",(e=>Xn(e)),";cursor:pointer;display:flex;align-items:center;justify-content:center;visibility:hidden;transform:translatez(",Object(Be.d)("frame.translateZ"),"px);z-index:",Object(Be.d)("frame.zIndex"),";",Gn.o,"{visibility:visible;}"),Yn=Object(Le.a)("div",{target:"eg0frzz1"})({name:"l1tuuh",styles:"width:100%;height:100%;display:flex;align-items:center;justify-content:center;"}),Qn=Object(Le.a)(Xe.b,{target:"eg0frzz2"})("width:",(e=>Object(Be.d)("trigger.overlayIconButton.icon.width")(e)),"px;height:",(e=>Object(Be.d)("trigger.overlayIconButton.icon.height")(e)),"px;fill:",Object(Be.d)("trigger.removeIcon.fill"),";"),Jn=`\n  ${Zn} {\n    visibility: visible;\n  }\n  & ~ .spr-chat__notification-container {\n    visibility: hidden;\n  }\n`,ea=Object(Le.a)("div",{target:"eg0frzz3"})((e=>e.enableTriggerHideIcon&&`\n    &:hover {\n      ${e.applyRemoveIconStyles&&Jn};\n    }\n  `),";"),ta=e=>{let{showTrigger:t,showLabel:n,labelWidth:a,theme:o}=e;return n&&t?a+Object(Be.d)("trigger.icon.width")({theme:o})+8+48:Object(Be.d)("trigger.width")({theme:o})},na=Object(Le.a)("div",{target:"eg0frzz4"})("background:transparent;box-shadow:",Object(Be.d)("trigger.boxShadow"),";border-radius:",(e=>Object(Be.d)("trigger.borderRadius",Object(Be.d)("trigger.height")(e)/2+"px}")(e)),";height:",(e=>e.triggerPosition.height),"px;position:relative;transition:",(e=>{let{enableTriggerWidthTransition:t,animationDuration:n}=e;return t?`width ${n}s`:"none"}),";visibility:",(e=>{let{showTrigger:t}=e;return t?"visible":"hidden"}),";width:",(e=>e.triggerPosition.width),"px;"),aa=Object(Le.a)(De.a,{target:"eg0frzz5"})("border-radius:",(e=>Object(Be.d)("trigger.borderRadius",Object(Be.d)("trigger.height")(e)/2+"px}")(e)),";border:0 none;height:100%;width:100%;position:static !important;"),oa=(e,t)=>{const n=!((Object(Be.d)("trigger.backgroundUrls")({theme:e})||Object(Be.d)("trigger.icon.url")({theme:e}))&&t.isMinimized);return Object(r.css)("body{background-color:",n?Object(Be.d)("trigger.backgroundColor")({theme:e}):"transparent",";background-image:none;}")},ia=Object(Le.a)("button",{target:"eg0frzz6"})("border:none;cursor:pointer;position:absolute;top:0;left:0;height:100%;width:100%;-webkit-touch-callout:none !important;-webkit-user-select:none !important;background:transparent;border-radius:inherit;",Object(Gn.e)(Gn.l,Gn.h),";");var ca=n(966);const ra=Object(Le.a)("div",{target:"e1t174p80"})("cursor:pointer;position:relative;overflow:hidden;border-radius:",(e=>Object(Be.d)("trigger.borderRadius",Object(Be.d)("trigger.height")(e)/2+"px")(e)),";height:",(e=>Object(Be.d)("trigger.height")(e)),"px;background-color:transparent;"),sa=Object(Le.a)(ra,{target:"e1t174p81"})("border:",(e=>`${Object(Be.d)("trigger.borderWidth")(e)}px solid ${Object(Be.d)("trigger.borderColor")(e)}`),";background-size:cover;"),la=Object(Le.a)(ra,{target:"e1t174p82"})("background-color:",Object(Be.d)("trigger.backgroundColor"),";"),da={name:"15vzngf",styles:"bottom:0;top:0;transform:translate3d(-50%,-50%,0);transition:transform 0.16s linear,opacity 0.08s linear,-webkit-transform 0.16s linear;width:100%;"},ua={name:"w8476o",styles:"transform:rotate(90deg) scale(0);opacity:0;"},ba={name:"12ovxee",styles:"transform:scale(0);opacity:0;"},Oa={name:"k4n0ja",styles:"transform:rotate(0deg) scale(1);opacity:1;"},fa={name:"20dbs8",styles:"transform:scale(1);opacity:1;"},pa=Object(Le.a)(Xe.b,{target:"e1t174p83"})("fill:",Object(Be.d)("trigger.closeIcon.color"),";height:",Object(Be.d)("trigger.closeIcon.height"),"px;width:",Object(Be.d)("trigger.closeIcon.width"),"px;"),va=Object(Le.a)("div",{target:"e1t174p84"})(da,";"),ya=Object(Le.a)("div",{target:"e1t174p85"})(da,";"),ja=Object(Le.a)("h2",{target:"e1t174p86"})("color:",Object(Be.d)("trigger.icon.color"),";",(e=>Object(Gn.c)("font-size","var(--spr-lc-fs-lg)","var(--spr-lc-fs-xl)")(e))," font-weight:600;margin-bottom:0;margin-top:0;line-height:1.4;white-space:nowrap;",Object(Gn.d)("margin-left: 8px","margin-right: 8px;"),";"),ga=Object(Le.a)(Xe.b,{target:"e1t174p87"})("height:",Object(Be.d)("trigger.icon.height"),"px;width:",Object(Be.d)("trigger.icon.width"),"px;fill:",Object(Be.d)("trigger.icon.color"),";");var ha=n(673);function ma(){return ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ma.apply(this,arguments)}function Ia(){return Ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ia.apply(this,arguments)}function Ca(){return Ca=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ca.apply(this,arguments)}function Ta(){return Ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ta.apply(this,arguments)}function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ea.apply(this,arguments)}function xa(){return xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xa.apply(this,arguments)}function Sa(){return Sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sa.apply(this,arguments)}var _a=n(775);function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Aa.apply(this,arguments)}function Pa(){return Pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pa.apply(this,arguments)}const Ra=e=>Object(Be.d)("trigger.backgroundUrls")({theme:e})||Object(Be.d)("trigger.icon.url")({theme:e});var wa=o.a.memo((e=>{const{onLoad:t,onError:n,customTriggerIconUrl:o,...i}=e,c=Object(a.useRef)(null);return Object(a.useEffect)((()=>{if(c.current&&o){const e=new Image,a=()=>{c.current.style.backgroundImage=`url("${o}")`,t(!0)};return e.addEventListener("load",a),e.addEventListener("error",n),e.src=o,()=>{e.removeEventListener("load",a),e.removeEventListener("error",n)}}}),[o,n,t]),Object(r.jsx)(sa,Pa({},i,{ref:c}))})),Na=n(760);const Ma={MINIMIZED:"MINIMIZED",MAXIMIZED:"MAXIMIZED"},La={[Na.a.BOX]:{Icon:function(e){return Object(r.jsx)("svg",ma({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerBox",focusable:"false"},e),Object(r.jsx)("path",{d:"M12.7,0.3L12.7,0.3H1.3C-0.2,0.3,0,1.7,0,1.7v7.7c0,1.1,0.9,1.2,1.2,1.2c0.1,0,0.1,0,0.1,0h3.6c0.5,0,0.7,0.2,0.7,0.2 l4.5,2.9c0.1,0.1,0.2,0.1,0.3,0.1c0.6,0,0.7-0.8,0.7-0.8v-2.3h1.6c1.3,0,1.4-1.2,1.4-1.2V1.5C14.1,0.4,12.9,0.3,12.7,0.3z M8.2,7.4 H2.5C2.2,7.4,2,7.2,2,6.9c0-0.3,0.2-0.5,0.5-0.5h5.7c0.3,0,0.5,0.2,0.5,0.5S8.5,7.4,8.2,7.4z M11.2,4.4H2.5C2.2,4.4,2,4.2,2,3.9 c0-0.3,0.2-0.5,0.5-0.5h8.8c0.3,0,0.5,0.2,0.5,0.5C11.7,4.2,11.5,4.4,11.2,4.4z"}))},Component:ga},[Na.a.BUBBLE]:{Icon:function(e){return Object(r.jsx)("svg",Ia({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerBubble",focusable:"false"},e),Object(r.jsx)("path",{d:"M12.9,2.5c-0.9-1.1-2.5-2-3.8-2.3C3.5-0.9,0.7,3.3,0.3,4.9c-0.9,4.9,1.2,7.6,2.5,8.9C2.9,14,3.1,14,3.1,13.9 c-0.2-3,1.7-3.5,5.6-3.3c1.4,0.1,4.7-1.1,5-3.7C14,5.3,14.1,4.1,12.9,2.5z M3.1,6.5c-0.4,0-0.8-0.4-0.8-0.8s0.4-0.8,0.8-0.8 s0.8,0.4,0.8,0.8C3.9,6.1,3.5,6.5,3.1,6.5z M6.9,6.5c-0.4,0-0.8-0.4-0.8-0.8s0.4-0.8,0.8-0.8s0.8,0.4,0.8,0.8 C7.7,6.1,7.3,6.5,6.9,6.5z M10.7,6.5c-0.4,0-0.8-0.4-0.8-0.8s0.4-0.8,0.8-0.8c0.4,0,0.8,0.4,0.8,0.8C11.6,6.1,11.2,6.5,10.7,6.5z"}))},Component:ga},[Na.a.COLLABORATORS]:{Icon:function(e){return Object(r.jsx)("svg",Ca({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerCollaborators",focusable:"false"},e),Object(r.jsx)("path",{d:"M12.103 7.498c.077 0 .145 0 .216.005l.11.013-.02-.157a5.233 5.233 0 00-2.392-3.729l-.247-.148A2.925 2.925 0 017.22 5.37l-.224.008A2.944 2.944 0 014.3 3.673l-.078-.192-.212.126a5.236 5.236 0 00-2.445 3.908 1.823 1.823 0 01.325-.018 2.893 2.893 0 012.945 2.836A2.797 2.797 0 014.11 12.2l-.155.16.114.072a5.598 5.598 0 002.625.822l.322.01.336-.01a5.591 5.591 0 002.724-.894 2.744 2.744 0 01-.88-2.026 2.86 2.86 0 012.907-2.836z"}),Object(r.jsx)("path",{d:"M1.893 8.51a1.934 1.934 0 00-1.087.332l-.015.011a1.801 1.801 0 00-.792 1.481 1.858 1.858 0 001.72 1.816l.174.008.17-.008a1.856 1.856 0 001.723-1.816A1.889 1.889 0 001.893 8.51zm10.214 0a1.864 1.864 0 00-1.893 1.824 1.837 1.837 0 001.248 1.715 1.936 1.936 0 00.477.102l.168.007.17-.008a1.822 1.822 0 00-.17-3.64zM6.998 4.366a1.864 1.864 0 001.894-1.824A1.848 1.848 0 006.998.737 1.864 1.864 0 005.105 2.56a1.849 1.849 0 001.893 1.805z"}))},Component:ga},[Na.a.CLOUD]:{Icon:function(e){return Object(r.jsx)("svg",Ta({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerCloud",focusable:"false"},e),Object(r.jsx)("path",{d:"M7.1,0C3.2,0,0.1,3.1,0.1,6.9c0,1.7,0.5,3,1.5,4.2l-1,2.5C0.5,13.8,0.6,14,0.8,14h0.1l3.7-0.6C5.4,13.7,6,13.8,7,13.8h0.1 c3.8,0,6.8-3.1,6.8-6.9C13.9,3.1,10.9,0,7.1,0z M3.2,7.8C2.8,7.8,2.4,7.4,2.4,7s0.4-0.8,0.8-0.8S4,6.6,4,7C4,7.5,3.7,7.8,3.2,7.8z M7.2,7.8C6.7,7.8,6.4,7.4,6.4,7s0.4-0.8,0.8-0.8S8,6.6,8,7C7.9,7.5,7.6,7.8,7.2,7.8z M11,7.8c-0.4,0-0.8-0.4-0.8-0.8 s0.4-0.8,0.8-0.8c0.4,0,0.8,0.4,0.8,0.8C11.8,7.5,11.5,7.8,11,7.8z"}))},Component:ga},[Na.a.MIC]:{Icon:function(e){return Object(r.jsx)("svg",Sa({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerMic",focusable:"false"},e),Object(r.jsx)("path",{id:"Shape-Copy-3",d:"M7.1,0C4.5,0,2.5,2,2.5,4.5V6H2.3c-1.1,0-2,0.9-2,2v1.2c0,1.1,0.9,2,2,2h1.5c0.3,0,0.5-0.2,0.5-0.5V6.4 C4.3,6.2,4.1,6,3.9,6H3.4V4.5c0-2,1.6-3.6,3.7-3.6s3.7,1.6,3.7,3.6V6h-0.5C9.9,6,9.8,6.2,9.8,6.4v4.2c0,0.3,0.2,0.5,0.5,0.5h0.4 c-0.1,0.3-0.3,0.5-0.6,0.7c-0.4,0.3-1,0.5-1.9,0.6c-0.2-0.4-0.6-0.7-1.1-0.7c-0.7,0-1.2,0.5-1.2,1.2C5.8,13.5,6.3,14,7,14 c0.5,0,0.9-0.3,1.1-0.8c1-0.1,1.9-0.3,2.4-0.8c0.5-0.4,0.8-0.9,0.9-1.4h0.2c1.1,0,2-0.9,2-2V7.9c0-1.1-0.9-2-2-2h-0.2V4.5 C11.6,2,9.6,0,7.1,0z"}))},Component:ga},[Na.a.ELLIPSIS]:{Icon:function(e){return Object(r.jsx)("svg",Ea({viewBox:"0 0 32 32","data-icon-name":"ChatTriggerEllipsis",focusable:"false"},e),Object(r.jsx)("path",{id:"Combined-Shape",fillRule:"evenodd",clipRule:"evenodd",d:"M28.28387,3.51813C30.33623,3.51813,32,5.1819,32,7.23426 v14.45782c0,2.05236-1.66377,3.71613-3.71613,3.71613l-1.29445-0.00002l0.61046,3.88583 c0.02475,0.1576,0.00841,0.31823-0.04651,0.46661l-0.04838,0.10876c-0.21984,0.41951-0.71518,0.60119-1.14754,0.43933 l-0.10658-0.04768l-9.26093-4.85285L3.71613,25.40821C1.66377,25.40821,0,23.74444,0,21.69208V7.23426 C0,5.1819,1.66377,3.51813,3.71613,3.51813H28.28387z M16,11.3664c-1.7103,0-3.09677,1.38647-3.09677,3.09677 S14.2897,17.55995,16,17.55995s3.09678-1.38647,3.09678-3.09678S17.7103,11.3664,16,11.3664z M7.52941,12.639 c-1.03959,0-1.88235,0.81671-1.88235,1.82417s0.84276,1.82417,1.88235,1.82417s1.88235-0.81671,1.88235-1.82417 S8.56901,12.639,7.52941,12.639z M24.47059,12.639c-1.0396,0-1.88235,0.81671-1.88235,1.82417s0.84276,1.82417,1.88235,1.82417 c1.03959,0,1.88235-0.81671,1.88235-1.82417S25.51018,12.639,24.47059,12.639z"}))},Component:ga},[Na.a.ELLIPSIS_STROKE]:{Icon:function(e){return Object(r.jsx)("svg",xa({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerEllipsisStroke",focusable:"false"},e),Object(r.jsx)("path",{d:"M2.4,13.8c-0.2-0.1-0.3-0.2-0.3-0.4v-2.6H1.7C0.7,10.8,0,10,0,9.1V1.9c0-1,0.8-1.7,1.7-1.7h10.5c1,0,1.7,0.8,1.7,1.7v7.2 c0,1-0.8,1.7-1.7,1.7H5.7l-2.8,2.8C2.7,13.8,2.5,13.9,2.4,13.8L2.4,13.8z M0.8,1.9v7.2c0,0.5,0.4,0.9,0.9,0.9h0.8 C2.8,10,3,10.2,3,10.5v2l2.2-2.3C5.3,10.1,5.4,10,5.5,10h6.8c0.5,0,0.9-0.4,0.9-0.9V1.9c0-0.5-0.4-0.9-0.9-0.9H1.7 C1.2,1,0.8,1.4,0.8,1.9z M6.2,5.5C6.2,5,6.6,4.7,7,4.7c0.5,0,0.8,0.4,0.8,0.8C7.8,6,7.5,6.3,7,6.3S6.2,6,6.2,5.5L6.2,5.5z M9.3,5.5 c0-0.5,0.4-0.8,0.8-0.8c0.5,0,0.8,0.4,0.8,0.8c0,0.5-0.3,0.8-0.8,0.8S9.3,6,9.3,5.5L9.3,5.5z M3,5.5C3,5,3.4,4.7,3.8,4.7 c0.5,0,0.8,0.4,0.8,0.8c0,0.5-0.4,0.8-0.8,0.8l0,0C3.4,6.3,3,6,3,5.5L3,5.5z"}))},Component:ga},[Na.a.CROSS]:{Icon:function(e){return Object(r.jsx)("svg",Aa({viewBox:"0 0 14 14","data-icon-name":"Close",focusable:"false"},e),Object(r.jsx)("path",{d:"M12.8 12.7c.3-.3.3-.8 0-1L8 7l4.6-4.7c.3-.3.3-.8 0-1.1-.3-.3-.8-.3-1.1 0L6.9 6 2.3 1.3C2 1 1.5 1 1.2 1.3s-.3.7 0 1L5.9 7l-4.7 4.7c-.3.3-.3.8 0 1.1.3.3.8.3 1 0l4.7-4.7 4.7 4.6c.3.3.8.3 1.2 0z"}))},Component:pa},[Na.a.CHEVRON]:{Icon:_a.a,Component:pa}};var ka=o.a.memo((e=>{const{className:t,minimizedIconClassName:n,maximizedIconClassName:i,triggerIconName:c=Na.a.BUBBLE,label:s,innerLabelRef:l,mode:d=Ma.MINIMIZED,closeIconName:u=Na.a.CROSS,onLoad:b=we.a,customTriggerIconUrl:O}=e,{Icon:f,Component:p}=La[c],{Icon:v,Component:y}=La[u],j=Object(z.b)(),[g,h]=Object(a.useState)(!1),m=Object(a.useMemo)((()=>Ra(j)),[j]),I=Object(ha.a)(),{direction:C}=Object(ee.a)(),T=d===Ma.MINIMIZED,E=!it()(m)&&T&&!g,x=!I,S=x||T;Object(a.useEffect)((()=>{E||b(!0)}),[b,E]);const _=Object(a.useCallback)((()=>{h(!0)}),[]);return E?Object(r.jsx)(wa,{"data-testid":"custom-trigger",className:t,theme:j,onLoad:b,onError:_,customTriggerIconUrl:O}):Object(r.jsx)(la,{className:t,theme:j},Object(r.jsx)(o.a.Fragment,null,x&&Object(r.jsx)(va,{className:`center-x-y ${i}`,css:T?ua:Oa},Object(r.jsx)(y,{alt:v})),S&&Object(r.jsx)(ya,{className:`center-x-y ${n}`,css:T?fa:ba,"data-testid":"default-trigger"},Object(r.jsx)(p,{alt:f}),s?Object(r.jsx)(ja,{ref:l,className:"m-b-0",direction:C,isPhone:I,theme:j},s):null)))})),Da=n(229),Ua=n(261);var Ba=n(442),Ga=n(895),$a=n(228),Fa=n(776);const Va=(()=>{let e;return{set(t){e=t},get:()=>e}})();var Ha=n(281),Wa=n(1064);const za=e=>Object(N.i)(Object(M.b)(e)),qa=e=>Object(M.d)(e),Ka=e=>{var t;const{direction:n}=Object(Oe.a)(),{showTrigger:o,handleShowTriggerStateChange:i,triggerHandlers:c,hideChatTrigger:l,totalUnreadCount:d}=e,{onTouchStart:u,onTouchEnd:b,...O}=c,f=Object(Ua.a)(o),{formatMessage:p,formatNumber:v}=Object(Un.a)(),y=Object(le.a)(),j=Object(z.b)(),g=Object(Ke.a)(),{triggerPosition:h,onAction:m,isDragging:I}=Object(Rn.a)(),C="vertical"===j.styles.trigger.orientation,T=Object(a.useRef)(),E=Object(a.useRef)(null),x=Object(Da.a)()(Ha.a.getTriggerConfig(y),"label"),[S,_]=Object(a.useState)(!0),[P,w]=Object(a.useState)(x),[N,L]=Object(a.useState)(!1),[k,D]=Object(a.useState)(),U=Object(s.d)(za),B=Object(s.d)(qa),G=Object(s.d)(M.h),$=null===(t=Object($a.c)(G))||void 0===t?void 0:t.userId,F=Ha.a.getAnimationInfoOfTrigger(y),{showChatTriggerAnimation:V}=(()=>{var e,t;const[n,o]=Object(a.useState)(!1),i=Object(A.a)(),c=Object(le.a)(),r=null===(e=i.triggerAnimationConfig)||void 0===e?void 0:e.filter,{hasPassed:s}=Object(R.a)(r,{defaultValue:!1,logOnSuccess:!0}),l=null===(t=c.trigger)||void 0===t?void 0:t.animation,d=tt()(l,"effect");return Object(a.useEffect)((()=>{!it()(r)&&d&&o(s)}),[r,d,s]),{showChatTriggerAnimation:n}})(),H=st()(P);Object(a.useEffect)((()=>(o&&!g&&(T.current=window.requestAnimationFrame((()=>{window.requestAnimationFrame((()=>{L(!0)}))}))),()=>{T.current&&window.cancelAnimationFrame(T.current)})),[o,g]),Object(a.useEffect)((()=>{const e=g&&!C?"":x;H!==e&&w(e)}),[g,x,H,C]);const W=Ra(j),q=Object(Be.d)("trigger.backgroundUrlsABConfig")({theme:j});Object(a.useMemo)((()=>{!q&&(null===W||void 0===W?void 0:W.length)>0&&Va.set(Object(Fa.a)(W,1)[0])}),[W,q]),Object(a.useEffect)((()=>{(async()=>{if(q){let e=await Object(Ba.d)($,q.id);if(!e||!W.includes(e)){const t=Math.floor(100*Math.random());let n=0,a=0;for(let e=0;e<q.weights.length;e+=1)if(a+=q.weights[e],t<a){n=e;break}e=W[n],await Object(Ba.n)($,q.id,e)}Va.set(e)}D(Va.get())})()}),[$,W,q]);const K=Ha.a.canTriggerBeManuallyRemoved(y)&&U&&it()(B),X=Object(a.useMemo)((()=>Object(Be.d)("trigger.icon.type")({theme:j})),[j]),Z=Object(a.useMemo)((()=>Object(Be.d)("trigger.closeIcon.type")({theme:j})),[j]),Y=Object(a.useCallback)((()=>{var e;m({type:"UPDATE_WIDTH",payload:ta({showLabel:U&&!!P,showTrigger:f.current,labelWidth:(e=E.current,e?Math.ceil(e.clientWidth):0),theme:j})})}),[U,P,j]),Q=Object(a.useCallback)((()=>{f.current&&Y()}),[Y]),J=Object(a.useCallback)((e=>{i(e),Y()}),[Y]),ee=Object(a.useCallback)((e=>{_(e)}),[]),te=Object(Ga.a)({totalUnreadCount:d,formatMessage:p,formatNumber:v,isMinimized:U}),ne=p(U?En.a.openChat:En.a.closeChat),ae=Object(a.useRef)();return Object(r.jsx)(ea,{enableTriggerHideIcon:K,applyRemoveIconStyles:S,"data-testid":"triggerContainer"},Object(r.jsx)(na,{showTrigger:o,css:V?Wn({triggerAnimationInfo:F,theme:j}):"",triggerPosition:h,enableTriggerWidthTransition:!C&&N,animationDuration:P!==H?.25:.08,theme:j,className:"spr-chat__trigger-box spr-live-chat-frame"},Object(r.jsx)(ia,Object(Se.a)({id:"spr-chat__trigger-button","aria-label":`${ne} ${te}`,onTouchStart:()=>{ee(!1),u(),ae.current=window.setTimeout((()=>{ee(!0),ae.current=void 0}),700)},onTouchEnd:e=>{ae.current&&window.clearTimeout(ae.current),b(e)},onContextMenu:e=>{e.preventDefault(),ee(!0)}},O)),Object(r.jsx)(aa,{"aria-label":p(En.a.liveChat),name:"spr-chat__trigger-frame",contentDidMount:Q,shouldHideLocaleLoader:!0,title:p(En.a.liveChat),tabIndex:-1},Object(r.jsx)(r.Global,{styles:oa(j,{isMinimized:U})}),Object(r.jsx)("div",{className:"full-height full-width"},Object(r.jsx)(Bn.FrameContextConsumer,null,(e=>{let{window:t}=e;return Object(r.jsx)(ca.a,{window:t,onResize:Y,resizeRefs:E},(e=>Object(r.jsx)(ka,{className:"full-width",label:P,triggerIconName:X,closeIconName:Z,mode:U?Ma.MINIMIZED:Ma.MAXIMIZED,onLoad:J,innerLabelRef:e,minimizedIconClassName:"spa",maximizedIconClassName:"spa",customTriggerIconUrl:k})))}))))),K&&o&&!I&&Object(r.jsx)(Zn,{onClick:l,"data-testid":"triggerCloseIconContainer",direction:n,className:Wa.a},Object(r.jsx)(Yn,null,Object(r.jsx)(Qn,{alt:Me.a,name:Xe.a.CLOSE}))))};var Xa=o.a.memo(Ka),Za=n(825);const Ya=Object(Le.a)("div",{target:"e5qlxka0"})("display:flex;background:transparent;overflow:hidden;border-radius:",(e=>Object(Be.d)("trigger.overlayIconButton.borderRadius",Object(Be.d)("trigger.overlayIconButton.button.height")(e)/2+"px")(e)),";position:absolute;bottom:",(e=>Kn(e)),"px;",(e=>Xn(e)),";height:",Object(Be.d)("trigger.overlayIconButton.button.height"),"px;width:",Object(Be.d)("trigger.overlayIconButton.button.width"),"px;transform:translatez(",Object(Be.d)("frame.translateZ"),"px);z-index:",Object(Be.d)("frame.zIndex"),";box-shadow:var(--spr-lc-bxs-3);"),Qa=Object(Le.a)(De.a,{target:"e5qlxka1"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),Ja=Object(Le.a)(Za.a,{target:"e5qlxka2"})("font-size:",Object(Be.d)("trigger.overlayIconButton.fontSize"),";height:",Object(Be.d)("trigger.overlayIconButton.button.height"),"px;width:",Object(Be.d)("trigger.overlayIconButton.button.width"),"px;line-height:",Object(Be.d)("trigger.overlayIconButton.button.height"),"px;border-radius:",(e=>Object(Be.d)("trigger.overlayIconButton.borderRadius",Object(Be.d)("trigger.overlayIconButton.button.height")(e)/2+"px")(e)),";"),eo="spr-chat-proactive-box-anim",to=Object(r.css)(".",eo,"-enter{opacity:0;}.",eo,"-enter.",eo,"-enter-active{opacity:1;transition:opacity 0.3s ease,transform 0.15s ease;}.",eo,"-enter-done,.",eo,"-appear{}.",eo,"-exit{opacity:1;}.",eo,"-exit.",eo,"-exit-active{opacity:0;transition:opacity 0s ease,transform 0s ease;}"),no=Object(Le.a)("div",{target:"e5qlxka3"})({name:"79elbk",styles:"position:relative;"});var ao=n(477);const oo=e=>{const t=Object(z.b)(),{isDragging:n}=Object(Rn.a)(),{direction:a}=Object(Oe.a)(),{isTriggerLoaded:i,isMinimized:c,totalUnreadCount:s}=e,{formatMessage:l}=Object(Un.a)();return Object(r.jsx)(o.a.Fragment,null,Object(r.jsx)(r.Global,{styles:to}),Object(r.jsx)(_n.a,{in:c,timeout:{enter:300,exit:0},classNames:eo,mountOnEnter:!0,unmountOnExit:!0,appear:!0},Object(r.jsx)(no,{className:"spr-chat__notification-container"},Object(r.jsx)(ao.a,{unreadCount:s,shouldPlay:!0}),s>0&&i&&!n?Object(r.jsx)(Ya,{className:"spr-chat__notification-box spr-live-chat-frame","data-testid":"notification-frame-container",theme:t,direction:a},Object(r.jsx)(Qa,{name:"spr-chat__notification-frame","aria-label":l(En.a.liveChatNotification),title:l(En.a.liveChatNotification)},Object(r.jsx)(Ja,{className:"center-x-y",count:s}))):null)))};var io=o.a.memo(oo),co=n(51),ro=n.n(co);const so=Object(Le.a)("div",{target:"ezg1tqb0"})("position:fixed;",(e=>ro()(e.triggerPosition.top)?`bottom: ${e.triggerPosition.bottom}px`:`top: ${e.triggerPosition.top}px`),";",(e=>{const t=e.triggerPosition.edge;return`${[t]}: ${[e.triggerPosition[t]]}px;`})," z-index:",Object(Be.d)("frame.zIndex"),";",(e=>{let{theme:t,triggerPosition:n}=e;const a=Object(Be.d)("trigger.orientation")({theme:t}),o=Object(Be.d)("trigger.align")({theme:t}),i=Math.abs((n.width-n.height)/2),c=Object(Be.d)("frame.translateZ")({theme:t});if(a===fn.i.VERTICAL)switch(o){case"B_L":case"C_L":return`transform: rotate(90deg) translate3d(-${i}px, ${i}px, ${c}px)`;case"T_L":return`transform: rotate(90deg) translate3d(${i}px, ${i}px, ${c}px)`;case"B_R":case"C_R":return`transform: rotate(270deg) translate3d(${i}px, ${i}px, ${c}px)`;case"T_R":return`transform: rotate(270deg) translate3d(-${i}px, ${i}px, ${c}px)`;default:return`transform: translateZ(${c}px)`}return`transform: translateZ(${c}px)`}),";",(e=>!e.isDragging&&"transition: bottom 0.16s linear"),";",(e=>e.isDragAllowed?"cursor: grab":"cursor: pointer"),";"),lo=Object(Kt.a)((()=>n.e(30).then(n.bind(null,1680)).then((e=>({default:e.DraggableContainer}))))),uo=e=>{let{children:t,shouldDrag:n,...i}=e;return n?Object(r.jsx)(a.Suspense,{fallback:null},Object(r.jsx)(lo,i,t)):Object(r.jsx)(o.a.Fragment,null,t)};var bo=n(1066);const Oo=e=>Object(N.i)(Object(M.b)(e)),fo=e=>Object(N.i)(Object(M.b)(e));var po=n(232),vo=n(265);const yo=e=>Object(M.b)(e).meta.isTriggerManuallyHidden,jo=()=>{var e;(()=>{const e=Object(ct.a)(vt.h),t=Object(A.a)(),n=w.a.getNoDisplayConfigFilter(t),{hasPassed:o}=Object(R.a)(n,{defaultValue:!1,logOnSuccess:!0}),i=Object(s.d)(fo);Object(a.useEffect)((()=>{!it()(n)&&i&&(o&&Object(k.a)("Sprinklr Chat hidden by display criteria"),e({value:o}))}),[n,i,o])})();const t=Object(ct.a)(vt.c),n=null===(e=Object(le.a)().trigger)||void 0===e?void 0:e.hideTimeout,o=Object(s.c)(),i=Object(a.useRef)(null),c=Object(a.useRef)(!n),r=Object(s.d)(yo),l=Object(s.d)(Ot.h),d=Object($a.d)(l),u=Object(Dt.a)();c.current||(c.current=!0,Object(Ba.c)(d).then((e=>{e&&Object(po.a)()<=e?i.current=window.setTimeout((()=>{o({type:vo.q,payload:{}})}),e-Object(po.a)()):o({type:vo.q,payload:{}})})));const b=Object(a.useCallback)((async()=>{n&&(await Object(Ba.m)(d,Object(po.a)()+n),i.current=window.setTimeout((()=>{o({type:vo.q,payload:{}})}),n)),u({action:Mn.a.CHAT_TRIGGER_REMOVED}),t()}),[n,t,o,d]);return Object(a.useEffect)((()=>{r||(Object(Ba.j)(d),i.current&&(window.clearTimeout(i.current),i.current=null))}),[r]),b},go=e=>Object(N.i)(Object(M.b)(e)),ho=e=>Object(N.h)(Object(M.b)(e)),mo=e=>Object(en.B)(Object(en.t)(Object(M.c)(e)));var Io=()=>{const e=Object(z.b)(),[t,n]=Object(a.useState)(!1),{triggerPosition:o,isDragAllowed:i,isDragging:c}=Object(Rn.a)(),l=Object(Ke.a)(),d=Object(s.d)(go),u=Object(s.d)(ho),b=Object(s.d)(mo),O=jo(),f=Object(Dt.a)(),p=st()(u),v=st()(t);Object(a.useEffect)((()=>{(p||!v)&&!(u||!t)&&f({action:Mn.a.TRIGGER_VISIBLE})}),[t,v,u,p,f]);const{triggerHandlers:y,dragHandlers:{onDragStart:j,onDragStop:g}}=(e=>{const t=Object(z.b)(),n=Object(ct.a)(vt.g),o=Object(s.d)(Oo),i=Object(Dt.a)(),c=Object(a.useMemo)((()=>Ra(t)),[t]),r=Object(a.useCallback)((()=>{e||(n(!o),o&&i({action:Mn.a.CHAT_TRIGGER_CLICKED,...(null===c||void 0===c?void 0:c.length)>1?{additional:{triggerImageUrl:Va.get()}}:{}}))}),[e,o,n]),{onDragStart:l,onDragStop:d,onTouchStart:u,onTouchMove:b,onTouchEnd:O,onTouchCancel:f}=Object(bo.a)(r);return Object(a.useMemo)((()=>({triggerHandlers:{onTouchStart:u,onTouchMove:b,onTouchEnd:O,onTouchCancel:f,onClick:r},dragHandlers:{onDragStart:l,onDragStop:d}})),[u,b,O,f,r,l,d])})(!!c),h=u||l&&!d,m=Object(bn.a)();return h?null:Object(r.jsx)(uo,{shouldDrag:m,onDragStart:j,onDragStop:g},Object(r.jsx)(so,{theme:e,shouldDrag:m,isDragAllowed:!!i,isDragging:!!c,triggerPosition:o},Object(r.jsx)(Xa,{triggerHandlers:y,showTrigger:t,handleShowTriggerStateChange:n,hideChatTrigger:O,totalUnreadCount:b}),Object(r.jsx)(io,{isTriggerLoaded:t,isMinimized:d,totalUnreadCount:b})))};var Co=()=>{const e=Object(a.useRef)(null);return Object(r.jsx)(Cn,null,Object(r.jsx)(cn,{chatBoxFrameRef:e}),Object(r.jsx)(Io,null),Object(r.jsx)(Dn,{ref:e}),Object(r.jsx)(xt,{parentFrameRef:e}),Object(r.jsx)(qt.c,{parentFrameRef:e}),Object(r.jsx)(at,null))},To=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current},Eo=n(1746),xo=n(392),So=n(391);const _o={initPollerConnection:So.d,initPusherConnection:So.e},Ao=e=>Object(en.z)(Object(en.t)(Object(M.c)(e)));var Po=()=>{const e=Object(G.P)()?xn:Co;return(()=>{var e;const t=null===(e=Object(xo.a)())||void 0===e?void 0:e.userId,{initPusherConnection:n,initPollerConnection:o}=Object(ct.a)(_o),i=Object(s.d)(Ao),c=To(i);Object(Eo.a)((()=>{n()}),[t]),Object(a.useEffect)((()=>{!c&&i&&o()}),[i,c,o]),Object(a.useEffect)((()=>{n()}),[n])})(),Object(r.jsx)(H.b,null,Object(r.jsx)(Ee,null,Object(r.jsx)(xe.b,null,Object(r.jsx)(V,null,Object(r.jsx)(je,null,Object(r.jsx)(x.b,null,Object(r.jsx)(o.a.Fragment,null,Object(r.jsx)(e,null))))))))},Ro=n(564);var wo=function(e){let{applicationConfig:t,store:n,history:o}=e;const i=Object(fe.d)(),c=Object(fe.c)(),u=Object(a.useMemo)((()=>Object(Ro.a)(i.document,c)),[i.document,c]),b=Object(a.useMemo)((()=>Object($a.d)(n.getState().usersMap)),[n]),y=Object(l.b)({category:"LIVE_CHAT",userId:b});return Object(r.jsx)(E,{logger:y},Object(r.jsx)(r.CacheProvider,{value:u},Object(r.jsx)(m.a,{window:i},Object(r.jsx)(s.a,{store:n},Object(r.jsx)(f.c.Provider,{value:t},Object(r.jsx)(j,null,Object(r.jsx)(d.b,{nonce:c},Object(r.jsx)(v.a,null,Object(r.jsx)(C.b,null,Object(r.jsx)(O,{history:o},Object(r.jsx)(g.b,null,Object(r.jsx)(h.a,null,Object(r.jsx)(I.a.Provider,{value:o},Object(r.jsx)(p.a,null,Object(r.jsx)(Po,null)))))))))))))))},No=n(343),Mo=function(e){return"@@redux-saga/"+e},Lo=Mo("CANCEL_PROMISE"),ko=Mo("CHANNEL_END"),Do=Mo("IO"),Uo=Mo("MATCH"),Bo=Mo("MULTICAST"),Go=Mo("SAGA_ACTION"),$o=Mo("SELF_CANCELLATION"),Fo=Mo("TASK"),Vo=Mo("TASK_CANCEL"),Ho=Mo("TERMINATE"),Wo=Mo("LOCATION");function zo(){return zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zo.apply(this,arguments)}var qo=function(e){return null===e||void 0===e},Ko=function(e){return null!==e&&void 0!==e},Xo=function(e){return"function"===typeof e},Zo=function(e){return"string"===typeof e},Yo=Array.isArray,Qo=function(e){return e&&Xo(e.then)},Jo=function(e){return e&&Xo(e.next)&&Xo(e.throw)},ei=function e(t){return t&&(Zo(t)||ai(t)||Xo(t)||Yo(t)&&t.every(e))},ti=function(e){return e&&Xo(e.take)&&Xo(e.close)},ni=function(e){return Xo(e)&&e.hasOwnProperty("toString")},ai=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};var oi=function(e,t){var n;void 0===t&&(t=!0);var a=new Promise((function(a){n=setTimeout(a,e,t)}));return a[Lo]=function(){clearTimeout(n)},a},ii=function(e){return function(){return e}}(!0),ci=function(){};var ri=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var si=function(e,t){zo(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))};function li(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function di(e){var t=!1;return function(){t||(t=!0,e())}}var ui=function(e){throw e},bi=function(e){return{value:e,done:!0}};function Oi(e,t,n){void 0===t&&(t=ui),void 0===n&&(n="iterator");var a={meta:{name:n},next:e,throw:t,return:bi,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(a[Symbol.iterator]=function(){return a}),a}function fi(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var pi=function(e){return Array.apply(null,new Array(e))},vi=function(e){return function(t){return e(Object.defineProperty(t,Go,{value:!0}))}},yi=function(e){return e===Ho},ji=function(e){return e===Vo},gi=function(e){return yi(e)||ji(e)};function hi(e,t){var n=Object.keys(e),a=n.length;var o,i=0,c=Yo(e)?pi(a):{},r={};return n.forEach((function(e){var n=function(n,r){o||(r||gi(n)?(t.cancel(),t(n,r)):(c[e]=n,++i===a&&(o=!0,t(c))))};n.cancel=ci,r[e]=n})),t.cancel=function(){o||(o=!0,n.forEach((function(e){return r[e].cancel()})))},r}function mi(e){return{name:e.name||"anonymous",location:Ii(e)}}function Ii(e){return e[Wo]}var Ci={isEmpty:ii,put:ci,take:ci};function Ti(e,t){void 0===e&&(e=10);var n=new Array(e),a=0,o=0,i=0,c=function(t){n[o]=t,o=(o+1)%e,a++},r=function(){if(0!=a){var t=n[i];return n[i]=null,a--,i=(i+1)%e,t}},s=function(){for(var e=[];a;)e.push(r());return e};return{isEmpty:function(){return 0==a},put:function(r){var l;if(a<e)c(r);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[o]=r,i=o=(o+1)%e;break;case 4:l=2*e,n=s(),a=n.length,o=n.length,i=0,n.length=l,e=l,c(r)}},take:r,flush:s}}var Ei=function(){return Ci},xi=function(e){return Ti(e,3)},Si=function(e){return Ti(e,4)},_i=Object.freeze({__proto__:null,none:Ei,fixed:function(e){return Ti(e,1)},dropping:function(e){return Ti(e,2)},sliding:xi,expanding:Si}),Ai="TAKE",Pi="PUT",Ri="ALL",wi="RACE",Ni="CALL",Mi="FORK",Li="CANCEL",ki="SELECT",Di="ACTION_CHANNEL",Ui="CANCELLED",Bi=function(e,t){var n;return(n={})[Do]=!0,n.combinator=!1,n.type=e,n.payload=t,n},Gi=function(e){return Bi(Mi,zo({},e.payload,{detached:!0}))};function $i(e,t){return void 0===e&&(e="*"),ei(e)?Bi(Ai,{pattern:e}):ti(n=e)&&n[Bo]&&Ko(t)&&ei(t)?Bi(Ai,{channel:e,pattern:t}):ti(e)?Bi(Ai,{channel:e}):void 0;var n}function Fi(e,t){return qo(t)&&(t=e,e=void 0),Bi(Pi,{channel:e,action:t})}function Vi(e){var t=Bi(Ri,e);return t.combinator=!0,t}function Hi(e){var t=Bi(wi,e);return t.combinator=!0,t}function Wi(e,t){var n,a=null;return Xo(e)?n=e:(Yo(e)?(a=e[0],n=e[1]):(a=e.context,n=e.fn),a&&Zo(n)&&Xo(a[n])&&(n=a[n])),{context:a,fn:n,args:t}}function zi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Bi(Ni,Wi(e,n))}function qi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Bi(Mi,Wi(e,n))}function Ki(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Gi(qi.apply(void 0,[e].concat(n)))}function Xi(e){return void 0===e&&(e=$o),Bi(Li,e)}function Zi(e){void 0===e&&(e=ri);for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Bi(ki,{selector:e,args:n})}function Yi(e,t){return Bi(Di,{pattern:e,buffer:t})}var Qi=zi.bind(null,oi);function Ji(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var ec=Ji,tc=[],nc=0;function ac(e){try{cc(),e()}finally{rc()}}function oc(e){tc.push(e),nc||(cc(),sc())}function ic(e){try{return cc(),e()}finally{sc()}}function cc(){nc++}function rc(){nc--}function sc(){var e;for(rc();!nc&&void 0!==(e=tc.shift());)ac(e)}var lc=function(e){return function(t){return e.some((function(e){return fc(e)(t)}))}},dc=function(e){return function(t){return e(t)}},uc=function(e){return function(t){return t.type===String(e)}},bc=function(e){return function(t){return t.type===e}},Oc=function(){return ii};function fc(e){var t="*"===e?Oc:Zo(e)?uc:Yo(e)?lc:ni(e)?uc:Xo(e)?dc:ai(e)?bc:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var pc={type:ko},vc=function(e){return e&&e.type===ko};function yc(e){void 0===e&&(e=Si());var t=!1,n=[];return{take:function(a){t&&e.isEmpty()?a(pc):e.isEmpty()?(n.push(a),a.cancel=function(){li(n,a)}):a(e.take())},put:function(a){if(!t){if(0===n.length)return e.put(a);n.shift()(a)}},flush:function(n){t&&e.isEmpty()?n(pc):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var a=0,o=e.length;a<o;a++){(0,e[a])(pc)}}}}}function jc(e,t){void 0===t&&(t=Ei());var n,a=!1,o=yc(t),i=function(){a||(a=!0,Xo(n)&&n(),o.close())};return n=di(n=e((function(e){vc(e)?i():o.put(e)}))),a&&n(),{take:o.take,flush:o.flush,close:i}}function gc(){var e=function(){var e,t=!1,n=[],a=n,o=function(){a===n&&(a=n.slice())},i=function(){t=!0;var e=n=a;a=[],e.forEach((function(e){e(pc)}))};return(e={})[Bo]=!0,e.put=function(e){if(!t)if(vc(e))i();else for(var o=n=a,c=0,r=o.length;c<r;c++){var s=o[c];s[Uo](e)&&(s.cancel(),s(e))}},e.take=function(e,n){void 0===n&&(n=Oc),t?e(pc):(e[Uo]=n,o(),a.push(e),e.cancel=di((function(){o(),li(a,e)})))},e.close=i,e}(),t=e.put;return e.put=function(e){e[Go]?t(e):oc((function(){t(e)}))},e}function hc(e,t){var n=e[Lo];Xo(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var mc,Ic=0,Cc=function(){return++Ic};function Tc(e){e.isRunning()&&e.cancel()}var Ec=((mc={}).TAKE=function(e,t,n){var a=t.channel,o=void 0===a?e.channel:a,i=t.pattern,c=t.maybe,r=function(e){e instanceof Error?n(e,!0):!vc(e)||c?n(e):n(Ho)};try{o.take(r,Ko(i)?fc(i):null)}catch(s){return void n(s,!0)}n.cancel=r.cancel},mc.PUT=function(e,t,n){var a=t.channel,o=t.action,i=t.resolve;oc((function(){var t;try{t=(a?a.put:e.dispatch)(o)}catch(c){return void n(c,!0)}i&&Qo(t)?hc(t,n):n(t)}))},mc.ALL=function(e,t,n,a){var o=a.digestEffect,i=Ic,c=Object.keys(t);if(0!==c.length){var r=hi(t,n);c.forEach((function(e){o(t[e],i,r[e],e)}))}else n(Yo(t)?[]:{})},mc.RACE=function(e,t,n,a){var o=a.digestEffect,i=Ic,c=Object.keys(t),r=Yo(t)?pi(c.length):{},s={},l=!1;c.forEach((function(e){var t=function(t,a){l||(a||gi(t)?(n.cancel(),n(t,a)):(n.cancel(),l=!0,r[e]=t,n(r)))};t.cancel=ci,s[e]=t})),n.cancel=function(){l||(l=!0,c.forEach((function(e){return s[e].cancel()})))},c.forEach((function(e){l||o(t[e],i,s[e],e)}))},mc.CALL=function(e,t,n,a){var o=t.context,i=t.fn,c=t.args,r=a.task;try{var s=i.apply(o,c);if(Qo(s))return void hc(s,n);if(Jo(s))return void Mc(e,s,r.context,Ic,mi(i),!1,n);n(s)}catch(l){n(l,!0)}},mc.CPS=function(e,t,n){var a=t.context,o=t.fn,i=t.args;try{var c=function(e,t){qo(e)?n(t):n(e,!0)};o.apply(a,i.concat(c)),c.cancel&&(n.cancel=c.cancel)}catch(r){n(r,!0)}},mc.FORK=function(e,t,n,a){var o=t.context,i=t.fn,c=t.args,r=t.detached,s=a.task,l=function(e){var t=e.context,n=e.fn,a=e.args;try{var o=n.apply(t,a);if(Jo(o))return o;var i=!1;return Oi((function(e){return i?{value:e,done:!0}:(i=!0,{value:o,done:!Qo(o)})}))}catch(c){return Oi((function(){throw c}))}}({context:o,fn:i,args:c}),d=function(e,t){return e.isSagaIterator?{name:e.meta.name}:mi(t)}(l,i);ic((function(){var t=Mc(e,l,s.context,Ic,d,r,void 0);r?n(t):t.isRunning()?(s.queue.addTask(t),n(t)):t.isAborted()?s.queue.abort(t.error()):n(t)}))},mc.JOIN=function(e,t,n,a){var o=a.task,i=function(e,t){if(e.isRunning()){var n={task:o,cb:t};t.cancel=function(){e.isRunning()&&li(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(Yo(t)){if(0===t.length)return void n([]);var c=hi(t,n);t.forEach((function(e,t){i(e,c[t])}))}else i(t,n)},mc.CANCEL=function(e,t,n,a){var o=a.task;t===$o?Tc(o):Yo(t)?t.forEach(Tc):Tc(t),n()},mc.SELECT=function(e,t,n){var a=t.selector,o=t.args;try{n(a.apply(void 0,[e.getState()].concat(o)))}catch(i){n(i,!0)}},mc.ACTION_CHANNEL=function(e,t,n){var a=t.pattern,o=yc(t.buffer),i=fc(a),c=function t(n){vc(n)||e.channel.take(t,i),o.put(n)},r=o.close;o.close=function(){c.cancel(),r()},e.channel.take(c,i),n(o)},mc.CANCELLED=function(e,t,n,a){n(a.task.isCancelled())},mc.FLUSH=function(e,t,n){t.flush(n)},mc.GET_CONTEXT=function(e,t,n,a){n(a.task.context[t])},mc.SET_CONTEXT=function(e,t,n,a){var o=a.task;si(o.context,t),n()},mc);function xc(e,t){return e+"?"+t}function Sc(e){var t=e.name,n=e.location;return n?t+"  "+xc(n.fileName,n.lineNumber):t}function _c(e){var t=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))}((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var Ac=null,Pc=[],Rc=function(){Ac=null,Pc.length=0},wc=function(){var e=Pc[0],t=Pc.slice(1),n=e.crashedEffect?function(e){var t=Ii(e);return t?t.code+"  "+xc(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+Sc(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map((function(e){return"    created by "+Sc(e.meta)})),[_c(Pc)]).join("\n")};function Nc(e,t,n,a,o,i,c){var r;void 0===c&&(c=ci);var s,l,d=0,u=null,b=[],O=Object.create(n),f=function(e,t,n){var a,o=[],i=!1;function c(e){t(),s(),n(e,!0)}function r(t){o.push(t),t.cont=function(r,s){i||(li(o,t),t.cont=ci,s?c(r):(t===e&&(a=r),o.length||(i=!0,n(a))))}}function s(){i||(i=!0,o.forEach((function(e){e.cont=ci,e.cancel()})),o=[])}return r(e),{addTask:r,cancelAll:s,abort:c,getTasks:function(){return o}}}(t,(function(){b.push.apply(b,f.getTasks().map((function(e){return e.meta.name})))}),p);function p(t,n){if(n){if(d=2,(i={meta:o,cancelledTasks:b}).crashedEffect=Ac,Pc.push(i),v.isRoot){var a=wc();Rc(),e.onError(t,{sagaStack:a})}l=t,u&&u.reject(t)}else t===Vo?d=1:1!==d&&(d=3),s=t,u&&u.resolve(t);var i;v.cont(t,n),v.joiners.forEach((function(e){e.cb(t,n)})),v.joiners=null}var v=((r={})[Fo]=!0,r.id=a,r.meta=o,r.isRoot=i,r.context=O,r.joiners=[],r.queue=f,r.cancel=function(){0===d&&(d=1,f.cancelAll(),p(Vo,!1))},r.cont=c,r.end=p,r.setContext=function(e){si(O,e)},r.toPromise=function(){return u||(u=ec(),2===d?u.reject(l):0!==d&&u.resolve(s)),u.promise},r.isRunning=function(){return 0===d},r.isCancelled=function(){return 1===d||0===d&&1===t.status},r.isAborted=function(){return 2===d},r.result=function(){return s},r.error=function(){return l},r);return v}function Mc(e,t,n,a,o,i,c){var r=e.finalizeRunEffect((function(t,n,a){if(Qo(t))hc(t,a);else if(Jo(t))Mc(e,t,l.context,n,o,!1,a);else if(t&&t[Do]){(0,Ec[t.type])(e,t.payload,a,d)}else a(t)}));u.cancel=ci;var s={meta:o,cancel:function(){0===s.status&&(s.status=1,u(Vo))},status:0},l=Nc(e,s,n,a,o,i,c),d={task:l,digestEffect:b};return c&&(c.cancel=l.cancel),u(),l;function u(e,n){try{var o;n?(o=t.throw(e),Rc()):ji(e)?(s.status=1,u.cancel(),o=Xo(t.return)?t.return(Vo):{done:!0,value:Vo}):o=yi(e)?Xo(t.return)?t.return():{done:!0}:t.next(e),o.done?(1!==s.status&&(s.status=3),s.cont(o.value)):b(o.value,a,u)}catch(i){if(1===s.status)throw i;s.status=2,s.cont(i,!0)}}function b(t,n,a,o){void 0===o&&(o="");var i,c=Cc();function s(n,o){i||(i=!0,a.cancel=ci,e.sagaMonitor&&(o?e.sagaMonitor.effectRejected(c,n):e.sagaMonitor.effectResolved(c,n)),o&&function(e){Ac=e}(t),a(n,o))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:c,parentEffectId:n,label:o,effect:t}),s.cancel=ci,a.cancel=function(){i||(i=!0,s.cancel(),s.cancel=ci,e.sagaMonitor&&e.sagaMonitor.effectCancelled(c))},r(t,c,s)}}function Lc(e,t){var n=e.channel,a=void 0===n?gc():n,o=e.dispatch,i=e.getState,c=e.context,r=void 0===c?{}:c,s=e.sagaMonitor,l=e.effectMiddlewares,d=e.onError,u=void 0===d?fi:d;for(var b=arguments.length,O=new Array(b>2?b-2:0),f=2;f<b;f++)O[f-2]=arguments[f];var p=t.apply(void 0,O);var v,y=Cc();if(s&&(s.rootSagaStarted=s.rootSagaStarted||ci,s.effectTriggered=s.effectTriggered||ci,s.effectResolved=s.effectResolved||ci,s.effectRejected=s.effectRejected||ci,s.effectCancelled=s.effectCancelled||ci,s.actionDispatched=s.actionDispatched||ci,s.rootSagaStarted({effectId:y,saga:t,args:O})),l){var j=No.d.apply(void 0,l);v=function(e){return function(t,n,a){return j((function(t){return e(t,n,a)}))(t)}}}else v=ri;var g={channel:a,dispatch:vi(o),getState:i,sagaMonitor:s,onError:u,finalizeRunEffect:v};return ic((function(){var e=Mc(g,p,r,y,mi(t),!0,void 0);return s&&s.effectResolved(y,e),e}))}var kc=function(e){var t,n=void 0===e?{}:e,a=n.context,o=void 0===a?{}:a,i=n.channel,c=void 0===i?gc():i,r=n.sagaMonitor,s=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(n,["context","channel","sagaMonitor"]);function l(e){var n=e.getState,a=e.dispatch;return t=Lc.bind(null,zo({},s,{context:o,channel:c,dispatch:a,getState:n,sagaMonitor:r})),function(e){return function(t){r&&r.actionDispatched&&r.actionDispatched(t);var n=e(t);return c.put(t),n}}}return l.run=function(){return t.apply(void 0,arguments)},l.setContext=function(e){si(o,e)},l},Dc=kc,Uc=n(345),Bc=n.n(Uc),Gc=n(268);class $c{constructor(){this.data={}}setReducer(e){return this.data.reducer=e,this}setSaga(e){return this.data.saga=e,this}setPreloadedState(e){return this.data.preloadedState=e,this}setApplicationConfig(e){return e&&(this.data.applicationConfig=e),this}setHandshakeDetails(e){return e&&(this.data.handshakeDetails=e),this}setChatSettings(e){return e&&(this.data.chatSettings=e),this}setCustomMiddleswares(e){return it()(e)||(this.data.customMiddlewares=e),this}build(){const{applicationConfig:e,handshakeDetails:t,chatSettings:n,customMiddlewares:a,reducer:o,preloadedState:i,saga:c}=this.data,r=n.clientContext;Bc()(o,"Reducer is not configured");const s=[];s.push(...null!==a&&void 0!==a?a:[]);const l=Dc();s.push(l);const d=Object(No.e)(o,i,Object(No.a)(...s));c&&l.run(c);const u={payload:{applicationConfig:e,handshakeDetails:t,clientContext:r,shouldContinueSession:!it()(i)},type:Gc.a};return d.dispatch(u),this.data.store=d,d}}var Fc=function(e){return{done:!0,value:e}},Vc={};function Hc(e){return ti(e)?"channel":ni(e)?String(e):Xo(e)?e.name:String(e)}function Wc(e,t,n){var a,o,i,c=t;function r(t,n){if(c===Vc)return Fc(t);if(n&&!o)throw c=Vc,n;a&&a(t);var r=n?e[o](n):e[c]();return c=r.nextState,i=r.effect,a=r.stateUpdater,o=r.errorState,c===Vc?Fc(t):i}return Oi(r,(function(e){return r(null,e)}),n)}function zc(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];var i,c={done:!1,value:$i(e)},r=function(e){return{done:!1,value:qi.apply(void 0,[t].concat(a,[e]))}},s=function(e){return i=e};return Wc({q1:function(){return{nextState:"q2",effect:c,stateUpdater:s}},q2:function(){return{nextState:"q1",effect:r(i)}}},"q1","takeEvery("+Hc(e)+", "+t.name+")")}function qc(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];var i,c,r={done:!1,value:$i(e)},s=function(e){return{done:!1,value:qi.apply(void 0,[t].concat(a,[e]))}},l=function(e){return{done:!1,value:Xi(e)}},d=function(e){return i=e},u=function(e){return c=e};return Wc({q1:function(){return{nextState:"q2",effect:r,stateUpdater:u}},q2:function(){return i?{nextState:"q3",effect:l(i)}:{nextState:"q1",effect:s(c),stateUpdater:d}},q3:function(){return{nextState:"q1",effect:s(c),stateUpdater:d}}},"q1","takeLatest("+Hc(e)+", "+t.name+")")}function Kc(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];var i,c={done:!1,value:$i(e)},r=function(e){return{done:!1,value:zi.apply(void 0,[t].concat(a,[e]))}},s=function(e){return i=e};return Wc({q1:function(){return{nextState:"q2",effect:c,stateUpdater:s}},q2:function(){return{nextState:"q1",effect:r(i)}}},"q1","takeLeading("+Hc(e)+", "+t.name+")")}function Xc(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return qi.apply(void 0,[zc,e,t].concat(a))}var Zc=n(283),Yc=n.n(Zc),Qc=n(50),Jc=n.n(Qc),er=n(358),tr=n.n(er),nr=n(880),ar=n.n(nr),or=n(857),ir=n.n(or),cr=n(231),rr=n(245),sr=n(222),lr=n(301),dr=n(234),ur=n(202),br=n(657),Or=n(506),fr=n(214);function*pr(e){let{chatMessage:t,conversationId:n,transientId:a,postbackParentMessageId:o,error:i}=e;try{yield Fi({type:cr.P,payload:{chatMessage:new sr.a(t).setCreationTime(Object(po.a)()).build(),conversationId:sr.a.getConversationId(t)}}),yield Fi({payload:{conversationId:n,transientId:a,postbackParentMessageId:o,error:i},type:cr.M})}catch(c){Object(ur.b)(c)}}function*vr(e){try{Object(dr.p)(e)&&(yield Fi(Object(fr.r)(e)))}catch(t){Object(ur.b)(t)}}function yr(e){return Object(rr.a)(this,void 0,void 0,(function*(){let t=e;Object(dr.o)(e)||(t=Z()(e,"id"));return yield Object(Or.r)(t)}))}function*jr(e){try{const t=sr.a.getConversationId(e),n=yield zi(yr,e);return Object(dr.p)(n)&&(yield Fi({payload:{chatMessage:n,conversationId:t,transientId:e.id},type:cr.N})),n}catch(t){return void Object(ur.b)(t)}}function*gr(e){var t,n;try{const o=e.id,i=sr.a.getConversationId(e);let c,r=e;const s=tt()(lr.a.getAttachment(sr.a.getMessagePayload(e)),"messageId"),l=Object(br.a)({attachments:null===(t=null===e||void 0===e?void 0:e.messagePayload)||void 0===t?void 0:t.mediaAttachments,withErrors:!0});it()(l)||(r=Yc()(e,{messagePayload:{mediaAttachments:{$apply:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(br.a)({attachments:e})}}}}));try{if(n=r.messagePayload,it()(null===n||void 0===n?void 0:n.text)&&it()(null===n||void 0===n?void 0:n.mediaAttachments)&&it()(null===n||void 0===n?void 0:n.attachment))throw new Error;c=yield zi(yr,r)}catch(a){throw yield zi(pr,{chatMessage:e,conversationId:i,transientId:o,postbackParentMessageId:s,error:{status:1}}),a}Object(dr.p)(c)&&(yield Fi({payload:{chatMessage:c,conversationId:i,transientId:o},type:cr.N}))}catch(o){throw Object(ur.b)(o),o}}var hr=n(256);function mr(e){let{file:t,conversationId:n,messageId:a,buttonId:o}=e;return Object(rr.a)(this,void 0,void 0,(function*(){let e=`/livechat/upload?conversationId=${n}`;a&&o&&(e+=`&chatMessageId=${a}&buttonId=${o}`);return(yield Object(hr.c)(e,{file:t,fileName:t.name},{multipart:!0})).data}))}function*Ir(e){try{const{maximumContentLength:t}=e,n=Object(rr.c)(e,["maximumContentLength"]);if(e.file.size>t){throw{response:{status:413,statusText:"Payload Too Large"}}}return{token:yield zi(mr,n)}}catch(t){return{error:t}}}var Cr=n(951),Tr=n(204);function*Er(e){let{attachment:t,conversationId:n,maximumContentLength:a,postbackSenderMessageId:o}=e;var i,c,r;try{const e=[zi(Ir,{file:t.file,maximumContentLength:a,conversationId:n,messageId:o,buttonId:Object(dr.g)(t)?null===t||void 0===t?void 0:t.buttonId:void 0})];t.previewImageFile&&e.push(zi(Ir,{file:t.previewImageFile,maximumContentLength:a,conversationId:n}));const s=yield Vi(e),l=null===(i=s[0])||void 0===i?void 0:i.token,d=null===(c=s[0])||void 0===c?void 0:c.error,u=null===(r=s[1])||void 0===r?void 0:r.token;return URL.revokeObjectURL(t.url),t.type===Tr.b.VIDEO&&t.previewImageUrl&&URL.revokeObjectURL(t.previewImageUrl),{token:l,error:d,previewImageToken:u}}catch(s){return{}}}function*xr(e){let{chatMessage:t,attachments:n,conversationId:a,maximumContentLength:o,postbackSenderMessageId:i}=e;const c=yield Vi(n.map((e=>zi(Er,{attachment:e,conversationId:a,maximumContentLength:o,postbackSenderMessageId:i}))));return Object(Cr.f)({chatMessage:t,results:c})}function*Sr(e){let{outgoingMessage:t,attachments:n,maximumContentLength:a,conversationId:o,postbackSenderMessageId:i}=e;const c=yield zi(xr,{chatMessage:t,attachments:n,conversationId:o,maximumContentLength:a,postbackSenderMessageId:i});yield zi(gr,c)}var _r=n(778);var Ar=()=>Object(rr.a)(void 0,void 0,void 0,(function*(){return(yield Object(_r.a)()).default})),Pr=n(834);const Rr=(e,t)=>{const n=lr.a.getAttachment(sr.a.getMessagePayload(e));return Yc()(e,{messagePayload:{attachment:{$merge:Object.assign(Object.assign({},n.showSubmittedContent?{clickedButtonId:t.buttonId}:{}),{submitted:!n.reSubmittable})}}})},wr=(e,t)=>{const n=lr.a.getAttachment(sr.a.getMessagePayload(e));return Yc()(e,{messagePayload:{attachment:{$merge:Object.assign(Object.assign({},n.showSubmittedContent?{filledForm:t.filledForm}:{}),t.type===Tr.b.CANCEL_FORM_POST_BACK?{cancelled:!0}:{submitted:!0})}}})},Nr={[Tr.b.CARD]:Rr,[Tr.b.CAROUSEL]:Rr,[Tr.b.CO_BROWSE_INVITE]:Rr,[Tr.b.PRODUCT_CARD]:Rr,[Tr.b.PRODUCT_SHOWCASE_CARD]:Rr,[Tr.b.INFO_CARD]:Rr,[Tr.b.PRODUCT_BANNER]:Rr,[Tr.b.PRODUCT_LIST]:Rr,[Tr.b.FORM]:wr,[Tr.b.CONTACT_DETAILS_FORM]:wr,[Tr.b.SECURE_FORM]:wr,[Tr.b.APPOINTMENT]:(e,t)=>Yc()(e,{messagePayload:{attachment:{$merge:{selectedDate:t.selectedDate,selectedSlot:t.selectedSlot,submitted:!0}}}}),[Tr.b.SURVEY]:(e,t)=>Yc()(e,{messagePayload:{attachment:{$merge:{opened:!!t.opened,submitted:!!t.submitted}}}}),[Tr.b.VIDEO_CHAT]:(e,t)=>{var n;return(null===(n=null===e||void 0===e?void 0:e.messagePayload)||void 0===n?void 0:n.attachment)?Yc()(e,{messagePayload:{attachment:{currentState:{$merge:{state:t.state,createdTime:Object(po.a)()}},previousStates:{$push:[e.messagePayload.attachment.currentState]}}}}):e},[Tr.b.RICH_TEXT_CAROUSEL]:Rr,[Tr.b.SPRINKLR_ENTITIES]:Rr,[Tr.b.SURVEY_QUESTION]:(e,t)=>{const n=lr.a.getAttachment(sr.a.getMessagePayload(e));return Yc()(e,{messagePayload:{attachment:{$merge:Object.assign(Object.assign({},n.showSubmittedContent?{response:t.response}:{}),{submitted:!0})}}})},[Tr.b.QUICK_SELECT_PILLS]:Rr},Mr=(e,t)=>{var n,a;if(!e||!(null===t||void 0===t?void 0:t.messagePayload))return{};switch(null===(a=null===(n=e.messagePayload)||void 0===n?void 0:n.attachment)||void 0===a?void 0:a.type){case Tr.b.CAROUSEL:case Tr.b.CO_BROWSE_INVITE:case Tr.b.PRODUCT_CARD:case Tr.b.PRODUCT_SHOWCASE_CARD:case Tr.b.INFO_CARD:case Tr.b.PRODUCT_BANNER:case Tr.b.PRODUCT_LIST:case Tr.b.CARD:return{buttonId:t.messagePayload.attachment.buttonId};case Tr.b.SURVEY:return{submitted:!t.messagePayload.attachment.reSubmittable,opened:!0};case Tr.b.SECURE_FORM:case Tr.b.FORM:case Tr.b.CONTACT_DETAILS_FORM:{const e=t.messagePayload.attachment;return{filledForm:e.filledForm,type:e.type}}case Tr.b.APPOINTMENT:{const e=t.messagePayload.attachment;return{selectedDate:e.selectedDate,selectedSlot:e.selectedSlot}}case Tr.b.SURVEY_QUESTION:return{response:t.messagePayload.attachment.response};default:return{}}};function*Lr(e){let{chatMessage:t,conversationId:n,params:a}=e;var o,i;try{const e=null===(i=null===(o=null===t||void 0===t?void 0:t.messagePayload)||void 0===o?void 0:o.attachment)||void 0===i?void 0:i.type;if(!e)return null;const c=Nr[e];if(c){const e=c(t,a);return yield Fi({type:cr.P,payload:{chatMessage:e,conversationId:n}}),e}}catch(c){Object(ur.b)(c)}return null}function*kr(e,t){const{postback:n,conversationId:a,inReplyToChatMessageId:o,sender:i}=t.payload,{messageId:c,postbackType:r,values:{attachments:s}=[]}=n;let l,d;try{if(r===Tr.b.ATTACH_MEDIA_POST_BACK)return void(yield zi(Ur,{maximumContentLength:e.maximumContentLength},{attachments:s,inReplyToChatMessageId:o,sender:i,conversationId:a,postback:n,promise:t.promise}));const u=yield Zi(en.h);d=Object(Pr.c)(Object(en.o)(u,a),c);const b=(yield zi(Ar)).makeTemplatePostbackAttachmentMessage(t.payload);l=yield zi(Lr,{chatMessage:d,conversationId:a,params:Mr(d,b)}),b&&(yield zi(vr,b),yield zi(gr,b),t.promise.resolve())}catch(u){l&&(yield Fi({type:cr.P,payload:{chatMessage:d,conversationId:a}})),t.promise.reject(),Object(ur.b)(u)}}function*Dr(){try{const{payload:{applicationConfig:e}}=yield $i(Gc.a);yield Xc(cr.hb,kr,e)}catch(e){Object(ur.b)(e)}}var Ur=function*(e,t){var n,a,o,i;let c,r;const{conversationId:s,sender:l,inReplyToChatMessageId:d,attachments:u,text:b}=t;try{const i=t.postback,{maximumContentLength:O}=e,f=(yield Ar()).makeMediaAttachmentsMessage({attachments:Object(br.d)(u),conversationId:s,sender:l,inReplyToChatMessageId:d,text:b,postback:i});if(i){const e=yield Zi(en.h);r=Object(en.m)(Object(en.o)(e,s),i.messageId),c=yield zi(Lr,{chatMessage:r,conversationId:s,params:Mr(r,f)})}yield Fi(Object(fr.r)(f)),yield zi(Sr,{outgoingMessage:f,attachments:u,conversationId:s,maximumContentLength:null!==(a=null===(n=null===i||void 0===i?void 0:i.values)||void 0===n?void 0:n.maximumContentLength)&&void 0!==a?a:O}),null===(o=t.promise)||void 0===o||o.resolve()}catch(O){c&&(yield Fi({type:cr.P,payload:{chatMessage:r,conversationId:s}})),null===(i=t.promise)||void 0===i||i.reject(),Object(ur.b)(O)}};function*Br(e,t){try{if(n=t.payload,!it()(n.attachments))return void(yield zi(Ur,e,Object.assign({},t.payload)));const a=(yield Ar()).makeTextMessage(t.payload);yield zi(vr,a),yield zi(gr,a)}catch(a){Object(ur.b)(a)}var n}function*Gr(){try{const{payload:{applicationConfig:e}}=yield $i(Gc.a);yield Xc(cr.bb,Br,{maximumContentLength:e.maximumContentLength})}catch(e){Object(ur.b)(e)}}function*$r(e){try{const t=(yield Ar()).makeLocationAttachmentMessage(e.payload);yield zi(vr,t),yield zi(gr,t)}catch(t){Object(ur.b)(t)}}function*Fr(){try{yield Xc(cr.J,$r)}catch(e){Object(ur.b)(e)}}function*Vr(e){try{const t=(yield Ar()).makeQuickReplyPostbackAttachmentMessage(e.payload);t&&(yield zi(vr,t),yield zi(gr,t))}catch(t){Object(ur.b)(t)}}function*Hr(){try{yield Xc(cr.ab,Vr)}catch(e){Object(ur.b)(e)}}var Wr=n(329),zr=n.n(Wr),qr=n(227),Kr=n(662),Xr=n(264),Zr=n(425);const Yr=e=>({userId:e,email:"",firstName:"",userType:"PARTNER",phoneNo:"",profileImageUrl:"",locale:"en",agentPersonaDetail:{name:"BRAND_DISPLAY_NAME",image:"BRAND_DISPLAY_IMAGE"}});function*Qr(e){try{const t=he()(e,(e=>e.sender)),n=yield zi(Kr.b,e),a=he()(n,(e=>Xr.a.getId(e)));let o=[];Jc()(t,(e=>{!a.includes(e)&&Object(qr.e)(e)&&(o=[...o,Yr(e)])})),yield Fi({type:Zr.e,payload:{users:[...n,...o]}})}catch(t){Object(ur.b)(t)}}function*Jr(e){try{const t=zr()(e);if(0===t.length)return;const n=((e,t)=>{const n={};return Q()(t,((t,a)=>{const o=a.sender;return n[o]||!!Object($a.g)(e,o)||(n[o]=o,t.push(a)),t}),[])})(yield Zi($a.i),t);if(0===n.length)return;yield zi(Qr,n)}catch(t){Object(ur.b)(t)}}function*es(e){try{yield zi(Qr,zr()(e))}catch(t){Object(ur.b)(t)}}var ts=n(359);function*ns(e){const t=e?zr()(e):ts.a;if(0===t.length)return;const n=sr.a.getConversationId(t[0]),a=he()(t,(e=>({sender:sr.a.getSender(e),conversationId:n})));yield zi(Jr,a)}var as=n(470),os=n(460),is=n(310),cs=n(464),rs=n(32);let ss={};const ls=e=>Object(is.d)(Object(is.c)(e));function*ds(e){try{const{conversationId:n,visiblePrompt:a}=e.payload;if(ss[n]){for(;;){const[t,a]=yield Hi([$i(cr.S),$i(cr.T)]);if(tt()(t||a,"payload.transientConversationId")===n){e.promise&&(t&&e.promise.resolve({conversationResponse:t.payload.conversationResponse}),a&&e.promise.reject(Object(as.a)(a.payload.error)));break}}return}try{ss[n]=!0;const t=yield Zi(en.h),o=yield Zi(ls),i=Object(en.o)(t,n),c=Object(en.t)(t),r=Object(en.j)(c,n),s=tt()(Object(en.i)(c,n),"assignToUser"),l=Object(en.C)(i),d=Object(en.g)(Object(en.t)(t),n)||{},u=d.clickedOnPrompt,b=Object(os.g)(o),O=yield zi(Or.m,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{chatMessages:Object(en.n)(i).map((e=>({messagePayload:sr.a.getMessagePayload(e),sender:sr.a.getSender(e)})))}:void 0),{createCase:Object(en.G)(Object(en.t)(t),n),startedByContext:Object.assign(Object.assign({},r),b)}),d),e.payload.appContext),!u&&a?{creativeId:a.additional.creativeId,interceptId:a.additional.interceptId,clickedOnPrompt:!1}:{}),{assignToUser:s})),f=yield Zi($a.i),p=Object($a.b)(f),v=Object($a.d)(f);yield Fi({payload:{transientConversationId:n,conversationResponse:O,botUserIds:p,userId:v},type:cr.S});const y=O.chatMessages;if(null===y||void 0===y?void 0:y.length){const e=y[y.length-1];yield Fi(Object(fr.n)(O.id,e.id))}e.promise&&e.promise.resolve({conversationResponse:O})}catch(t){yield Fi({type:cr.T,payload:{transientConversationId:e.payload.conversationId,error:t}}),e.promise&&e.promise.reject(Object(as.a)(t)),Object(ur.b)(t)}finally{delete ss[e.payload.conversationId]}}catch(n){}}function*us(e){try{const t=tr()(zr()(Ha.a.getDefaultMessages(w.a.getCustomizationConfig(e)))),n=tr()(t.map(((e,t)=>Object(as.c)(e,Nt.g,`${Nt.f}${t}`))));if(n.length){const e=yield Zi($a.i),t=n.map((t=>{const n=Object(os.e)(e,sr.a.getSender(t));return Fi(Object(fr.s)(t,n))}));yield Vi(t)}return n}catch(t){Object(ur.b)(t)}}function*bs(e,t){try{const n=Ha.a.getContactDetailsMessage(w.a.getCustomizationConfig(e)),a=[];if(n&&Object(as.e)(n,cs.a.getChatUser(t))){const e=Object(as.c)(n,Nt.g,Nt.e),t=yield Zi($a.i),o=Object(os.e)(t,sr.a.getSender(e));a.push(e),yield Fi(Object(fr.s)(e,o))}return a}catch(n){Object(ur.b)(n)}}function*Os(e,t){try{const n=yield zi(us,e),a=yield zi(bs,e,t);return[...n,...a]}catch(n){Object(ur.b)(n)}}function fs(){ss={}}function*ps(){try{const t=tt()(Object($a.c)(yield Zi($a.i)),"userId");for(;;)try{const e=yield Zi(en.h),n=Object(en.o)(e,Nt.g),a=Object(en.m)(n,Nt.e);if(!a)break;const{payload:{users:o}}=yield $i(Zr.e),i=o.find((e=>e.userId===t));i&&!Object(as.e)(a,i)&&(yield Fi(Object(fr.t)(Nt.g,Nt.e)))}catch(e){Object(ur.b)(e)}}catch(e){Object(ur.b)(e)}}function*vs(){try{yield Xc(Gc.c,fs)}catch(e){Object(ur.b)(e)}}function*ys(){try{yield Xc(cr.R,ds)}catch(e){Object(ur.b)(e)}}function*js(){try{const{payload:{applicationConfig:e,handshakeDetails:t}}=yield $i(Gc.a);yield zi(Os,e,null!==t&&void 0!==t?t:rs.a),yield Vi([qi(ps),qi(ys),qi(vs)])}catch(e){Object(ur.b)(e)}}var gs=n(331);function*hs(e){try{const{payload:t}=e,{actionParams:n}=t;n.actionType===gs.a&&(yield Fi(Object(fr.v)({conversationId:t.conversationId,action:{attachment:n.attachment,values:n.values,actionId:n.actionId}})))}catch(t){Object(ur.b)(t)}}function*ms(e){try{const{payload:t}=e,{actionParams:n}=t;n.actionType===gs.b&&(yield Fi(Object(fr.w)({conversationId:t.conversationId,action:{attachment:n.attachment,values:n.values,actionId:n.actionId}})))}catch(t){Object(ur.b)(t)}}function*Is(e){try{yield Vi([zi(hs,e),zi(ms,e)])}catch(t){Object(ur.b)(t)}}function*Cs(e){try{const{payload:t}=e,{actionParams:n}=t;let a=we.a;new Promise(((e,t)=>{const n=setTimeout((()=>t(new Error("Timeout"))),6e4);a=(a,o)=>(clearTimeout(n),o?t(o):e(a))})).then((t=>{const n=Yc()(e,{payload:{actionParams:{values:{$merge:t}}}});e.promise.resolve(n)})).catch((t=>e.promise.reject(t)));yield Fi(Object(fr.x)({conversationId:t.conversationId,action:{attachment:n.attachment,values:n.values,actionId:n.actionId},callback:a}))}catch(t){e.promise.reject(t),Object(ur.b)(t)}}function*Ts(e){const{messageId:t,conversationId:n}=e.payload,a=yield Zi(en.h),o=Object(en.m)(Object(en.o)(a,n),t);let i;try{i=yield zi(Lr,{chatMessage:o,conversationId:n,params:{opened:!0}}),yield zi(Or.p,t)}catch(c){i&&(yield Fi({type:cr.P,payload:{chatMessage:o,conversationId:n}})),Object(ur.b)(c)}}function*Es(e){try{const{attachment:t}=e.payload;return void(tt()(t,"opened")||(yield zi(Ts,e)))}catch(t){Object(ur.b)(t)}}function*xs(){try{yield Xc(cr.eb,Es)}catch(e){Object(ur.b)(e)}}var Ss=n(1067);function*_s(e){const{chatMessage:t,feedbackRating:n,filledForm:a,syncWithBackend:o=!0}=e.payload,{id:i,conversationId:c}=t;try{const r=Object.assign(Object.assign({},t),{messagePayload:Object.assign(Object.assign({},t.messagePayload),{feedbackRating:n})});yield Fi({type:cr.P,payload:{chatMessage:r,conversationId:c}}),o&&(yield zi(Ss.b,Object.assign({messageId:i,feedbackRating:n},a?{filledForm:{plainFieldValues:Object.assign({},a.values)}}:{}))),e.promise.resolve({updatedChatMessage:r})}catch(r){yield Fi({type:cr.P,payload:{chatMessage:t,conversationId:c}}),e.promise.reject(Object(as.a)(r)),Object(ur.b)(r)}}function*As(){try{yield Xc(cr.H,_s)}catch(e){Object(ur.b)(e)}}var Ps=n(311),Rs=n(357),ws=n(1032),Ns=n(852),Ms=n(304),Ls=n(387);const ks="/livechat/event";function Ds(e){return Object(rr.a)(this,void 0,void 0,(function*(){return Object(hr.c)(`${ks}/publish`,Object.assign({type:e.type},e.payload))}))}var Us=n(560),Bs=n(465),Gs=n(294);const $s=e=>Object(is.e)(Object(is.c)(e));function Fs(e){return e===gs.a||e===gs.b}function Vs(e){return e===gs.c}function Hs(e){return e===Gs.a.OPEN_URL}function Ws(e){return e===Gs.a.OPEN_AGENT_PRESENT_URL}function zs(e){return e===Gs.a.DIAL}function qs(e){return e===Gs.a.FETCH_APPOINTMENT_TIME_SLOTS}function Ks(e){return e===Gs.a.RESERVE_APPOINTMENT_TIME_SLOT}function Xs(e){return e===Gs.a.VIDEO_CALL}function Zs(e){return e===Gs.a.AUDIO_CALL}function Ys(e){return e===Gs.a.REJOIN_CALL}function Qs(e){return e===Gs.a.ACCOUNT_LINK}function*Js(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;try{if(!(yield Zi($s)))for(;;){const{payload:e}=yield $i(Ps.d);if(e.status===Us.a.CONNECTED)break}return yield zi(e,t)}catch(a){if(Object(Ls.e)(a)&&n>1)return yield zi(Js,e,t,n-1);throw a}}function el(e,t){return ws.a.makeMessage({messageId:e.id,messagePayload:sr.a.getMessagePayload(e),conversationId:t,sender:sr.a.getSender(e),creationTime:sr.a.getCreationTime(e),clientMessageId:sr.a.getClientMessageId(e),deleted:sr.a.getDeleted(e),senderChatUser:sr.a.getSenderChatUser(e)})}function*tl(e){try{const{payload:t}=e,{conversationId:n,cursor:a}=t,o=yield zi(Or.g,n,{size:t.size,cursor:a}),i=tr()(o.results.map((e=>el(e,n))));yield zi(ns,i),yield Fi({payload:{conversationMessagesResponse:Object.assign(Object.assign({},o),{results:i}),conversationId:n,cursor:a},type:cr.r}),e.promise&&e.promise.resolve(Object.assign(Object.assign({},o),{results:i}))}catch(t){e.promise&&e.promise.reject(Object(as.a)(t)),yield Fi({type:cr.s,payload:{conversationId:e.payload.conversationId}}),Object(ur.b)(t)}}function*nl(e){try{const{payload:t,promise:n}=e,{conversationId:a,includeAll:o}=t,i=o?yield zi(Or.c,n):yield zi(Or.d,a,n);yield Fi(Object(fr.h)({conversationId:a,includeAll:o,deleted:!0,surveyUrl:null===i||void 0===i?void 0:i.surveyUrl}))}catch(t){Object(ur.b)(t)}}function*al(){try{yield Xc(cr.m,nl)}catch(e){Object(ur.b)(e)}}function*ol(e){try{const{payload:t,promise:n}=e,{conversationId:a,includeAll:o}=t,i=o?yield zi(Or.a,n):yield zi(Or.b,a,n);yield Fi(Object(fr.h)({conversationId:a,includeAll:o,closed:!0,surveyUrl:null===i||void 0===i?void 0:i.surveyUrl}))}catch(t){Object(ur.b)(t)}}function*il(){try{yield Xc(cr.l,ol)}catch(e){Object(ur.b)(e)}}function*cl(){try{yield Xc(cr.q,tl)}catch(e){Object(ur.b)(e)}}function*rl(e){try{const{query:t,conversationId:n,faqAttachment:a,locale:o}=e.payload,i=yield zi(Or.k,n,t,a,o);e.promise&&e.promise.resolve(i)}catch(t){e.promise&&e.promise.reject(),Object(ur.b)(t)}}function*sl(){try{yield Xc(cr.G,rl)}catch(e){Object(ur.b)(e)}}function*ll(e){try{const t=Q()(e,((e,t)=>{const n=Rs.a.getParticipants(t);return Jc()(n,(n=>{e.push({sender:n,conversationId:t.id})})),e}),[]);yield zi(Jr,t)}catch(t){Object(ur.b)(t)}}function*dl(e){var t,n;try{const n=yield zi(Or.e,e.payload);yield zi(ll,n.results);const a=yield Zi($a.i),o=Object($a.b)(a),i=Object($a.d)(a);null===(t=e.promise)||void 0===t||t.resolve(n),yield Fi({payload:{conversationResponse:n,botUserIds:o,chatUserId:i},type:cr.j})}catch(a){null===(n=e.promise)||void 0===n||n.reject(Object(as.a)(a)),Object(ur.b)(a)}}function*ul(){try{yield function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return qi.apply(void 0,[Kc,e,t].concat(a))}(cr.i,dl)}catch(e){Object(ur.b)(e)}}function*bl(){var e,t;try{for(;;){const o=yield $i(cr.x),{conversationId:i,caseId:c,appContext:r,isPhone:s,clientContext:l}=o.payload,d=yield Zi($a.i),u=Object($a.b)(d),b=Object($a.d)(d);try{const t=yield zi(Or.h,o.payload.caseId);if(yield Fi({payload:{caseId:c,conversationResponse:t,botUserIds:u,chatUserId:b},type:cr.y}),null===(e=null===t||void 0===t?void 0:t.deflectionParams)||void 0===e?void 0:e.initiateCall){const{type:e}=t.deflectionParams;yield Fi(Object(fr.f)({conversationId:t.id,isPhone:s,deflectionType:e,source:{autoInitiateCall:!0,type:Nt.c.SOCIAL_TO_LIVE_CHAT_DEFLECTION}}))}}catch(n){try{if(Object(Ls.b)(n))throw n;{const e=yield zi(Or.m,Object.assign({createCase:!0,caseId:c,startedByContext:l},r));yield Fi({payload:{caseId:c,conversationResponse:e,botUserIds:u,chatUserId:b,loaded:!0},type:cr.y});const n=yield Zi((e=>Object(en.h)(e).conversations));if(n.byId[e.id]||(yield Fi({payload:{openConversationCount:(n.totalOpenConversations||0)+1},type:cr.jb})),null===(t=null===e||void 0===e?void 0:e.deflectionParams)||void 0===t?void 0:t.initiateCall){const{type:t}=e.deflectionParams;yield Fi(Object(fr.f)({conversationId:e.id,isPhone:s,deflectionType:t,source:{autoInitiateCall:!0,type:Nt.c.SOCIAL_TO_LIVE_CHAT_DEFLECTION}}))}}}catch(a){yield Fi({payload:{conversationId:i,error:Object(as.a)(a)},type:cr.z})}}}}catch(o){Object(ur.b)(o)}}function*Ol(e){let{conversationId:t,externalCaseId:n}=e;try{let e;if(t)e=yield zi(Or.j,t);else{if(!n)throw new Error("Provide either conversationId or externalCaseId");e=yield zi(Or.i,n)}return{response:e}}catch(a){return Object(ur.b)(a),{error:a}}}function*fl(){var e;try{for(;;){let n,a;try{const t=yield $i(cr.A);n=t.payload.conversationId,a=t.payload.externalCaseId;const o=t.payload.isPhone,{response:i,error:c}=yield zi(Ol,{conversationId:n,externalCaseId:a});if(c)throw c;const r=yield Zi($a.i),s=Object($a.b)(r),l=Object($a.d)(r);if(yield Fi({payload:{conversationResponse:i,botUserIds:s,chatUserId:l},type:cr.B}),null===(e=null===i||void 0===i?void 0:i.deflectionParams)||void 0===e?void 0:e.initiateCall){const{type:e}=i.deflectionParams;yield Fi(Object(fr.f)({conversationId:i.id,isPhone:o,deflectionType:e,source:{autoInitiateCall:!0,type:Nt.c.SOCIAL_TO_LIVE_CHAT_DEFLECTION}}))}}catch(t){yield Fi({payload:Object.assign(Object.assign(Object.assign({},n?{conversationId:n}:{}),a?{externalCaseId:a}:{}),{error:Object(as.a)(t)}),type:cr.C}),Object(ur.b)(t)}}}catch(n){Object(ur.b)(n)}}function*pl(e){try{const{conversationId:n,chatMessage:a}=e.payload,o=yield Zi(en.h),i=Object(en.i)(Object(en.t)(o),n);if(null===i||void 0===i?void 0:i.deleted)return null;for(;;){const e=yield Zi($s);try{if(e){const e=el(a,n);return yield zi(ns,e),e}yield $i(Ps.d)}catch(t){if(Object(ur.b)(t),!Object(Ls.e)(t))break}}return null}catch(n){return Object(ur.b)(n),null}}function*vl(e){try{const t=e.payload;yield Fi(Object(fr.y)({type:t.actionType,payload:Z()(e.payload,["actionType"])}))}catch(t){Object(ur.b)(t)}}function*yl(e){try{const t=yield zi(pl,e);t&&(yield Fi({type:cr.P,payload:{chatMessage:t,conversationId:sr.a.getConversationId(t)}}))}catch(t){Object(ur.b)(t)}}function*jl(e){try{const t=yield Zi(en.h),n=Object(en.t)(t),a=Object($a.c)(yield Zi($a.i)),{sender:o,deleted:i,closed:c,caseNumber:r,conversationId:s,requestClientId:l,caseId:d}=e.payload,u=Object(en.i)(n,s);(o!==(null===a||void 0===a?void 0:a.userId)||l&&l!==Ns.a.get()||r&&u&&!u.caseNumber&&!i&&!c||d&&u&&!u.caseId&&!i&&!c)&&(yield Fi(Object(fr.h)(e.payload)),r&&u&&!u.caseNumber&&(yield Fi(Object(So.c)({action:Ft.a.NEW_CONVERSATION_CREATED,conversationId:s,additional:{caseNumber:r}}))))}catch(t){Object(ur.b)(t)}}function*gl(e){try{const{conversationId:t,videoCallEnabled:n,audioCallEnabled:a}=e.payload;yield Fi({type:cr.e,payload:{conversationId:t,videoCallEnabled:n,audioCallEnabled:a}})}catch(t){Object(ur.b)(t)}}function*hl(e){try{const{payload:t}=e,{actionParams:n}=t;Fs(n.actionType)&&(yield zi(Is,e),e.promise.resolve(e))}catch(t){e.promise.reject(),Object(ur.b)(t)}}function*ml(e){try{const{payload:t}=e,{actionParams:n}=t;Vs(n.actionType)&&(yield zi(Cs,e))}catch(t){Object(ur.b)(t)}}function*Il(e){try{const{payload:t}=e,{actionParams:n,conversationId:a}=t;if(Qs(n.actionType)){const t=Object(Ms.a)(n.actionId,n.attachment);yield Fi(Object(So.a)({ssoId:t.accountLinkUrl,conversationId:a,messageId:n.messageId})(Object(as.d)(e)))}}catch(t){e.promise.reject(),Object(ur.b)(t)}}function*Cl(e){var t;try{const{actionParams:{attachment:n,values:a},applicationConfig:o}=e.payload,i=n,c=yield zi(as.b,{values:a,publicKeyForEncryption:i.publicKeyForEncryption,enableLegacyEncryption:!!(null===(t=o.otherConfigs.settings)||void 0===t?void 0:t.enableLegacyEncryption)});return{fieldNameVsToken:yield zi(Or.s,i,c),originalData:a.originalData}}catch(n){return Object(ur.b)(n),e.promise.reject(),null}}function*Tl(e){try{const{actionParams:{attachment:t,actionId:n,values:a,messageId:o},conversationId:i}=e.payload,c=tt()(Object(Ms.a)(n,t),"surveyUrl","");yield Fi(Object(fr.p)({surveyUrl:c,conversationId:i})),yield Fi({type:cr.eb,payload:{messageId:o,conversationId:i,attachment:t}});const[r]=yield Hi([$i(cr.fb),$i(cr.cb),$i(cr.gb)]);return r?a:null}catch(t){return Object(ur.b)(t),null}}function*El(e){try{const{actionParams:{actionType:t,values:n}}=e.payload;if(function(e){return e===Gs.a.SECURE_FORM_POST_BACK}(t))return yield zi(Cl,e);if(function(e){return e===Gs.a.ACCEPT_CO_BROWSE||e===Gs.a.DENY_CO_BROWSE}(t)){yield Fi({type:cr.g,payload:e.payload});const{payload:t}=yield $i(cr.h);return t.values}return function(e){return e===Gs.a.SURVEY_POST_BACK}(t)?yield zi(Tl,e):n}catch(t){return Object(ur.b)(t),null}}function*xl(e){try{const{payload:a}=e,{actionParams:o,appContext:i}=a;if(!Fs(t=o.actionType)&&!Hs(t)&&!Ws(t)&&!zs(t)&&!qs(t)&&!Ks(t)&&!Zs(t)&&!Xs(t)&&!Ys(t)&&!Qs(t)&&!Vs(t))try{const t=yield zi(El,e);ir()(t)?e.promise&&e.promise.resolve(e):yield Fi(Object(fr.E)({conversationId:a.conversationId,sender:a.sender,postback:{attachment:o.attachment,values:t,additional:o.additional,appContext:i,messageId:o.messageId,postbackId:o.actionId,postbackType:o.actionType,maskingDetails:o.maskingDetails},inReplyToChatMessageId:a.inReplyToChatMessageId})(Object(as.d)(e)))}catch(n){e.promise.reject(),Object(k.a)(n)}}catch(a){e.promise.reject(),Object(ur.b)(a)}var t}function*Sl(e){try{const{actionParams:{messageId:t,actionId:n,actionType:a,attachment:o},conversationId:i}=e.payload;Ws(a)&&(yield Fi(Object(fr.o)({conversationId:i,messageId:t,buttonId:n,attachment:o})(Object(as.d)(e))))}catch(t){e.promise.reject(),Object(ur.b)(t)}}function*_l(e){try{const{actionParams:{attachment:t,actionId:n,actionType:a}}=e.payload;Hs(a)&&(yield Fi(Object(fr.q)({attachment:t,actionId:n})(Object(as.d)(e))))}catch(t){e.promise.reject(),Object(ur.b)(t)}}function*Al(e){try{const{payload:t}=e,{actionParams:n}=t;zs(n.actionType)&&(yield Fi(Object(fr.m)({attachment:n.attachment,actionId:n.actionId})(Object(as.d)(e))))}catch(t){e.promise.reject(),Object(ur.b)(t)}}function*Pl(e){try{yield Fi({type:cr.d,payload:e.payload,promise:e.promise})}catch(t){e.promise.reject(),Object(ur.b)(t)}}function*Rl(e){try{const{payload:n}=e,{actionParams:a,conversationId:o,appContext:i}=n,c=qs(a.actionType),r=Ks(a.actionType);let s,l;if(c||r)try{const t=yield Zi(en.h);let n;s=Object(en.m)(Object(en.o)(t,o),a.messageId),c&&(yield Fi({type:cr.P,payload:{chatMessage:Yc()(s,{messagePayload:{attachment:{$merge:{slots:void 0}}}}),conversationId:o}}),l=yield zi(Or.f,{selectedDate:a.values.selectedDate,slotDefinitionId:a.attachment.slotDefinitionConfigId,timeZone:i.timeZone,appointmentAssetParams:a.attachment.params,messageId:a.messageId}),yield Fi({type:cr.P,payload:{chatMessage:Yc()(s,{messagePayload:{attachment:{$merge:{slots:l}}}}),conversationId:o}})),r&&(l=yield zi(Or.q,{selectedDate:a.values.selectedDate,selectedSlot:a.values.selectedSlot,timeZone:i.timeZone,slotDefinitionId:a.attachment.slotDefinitionConfigId,appointmentAssetParams:a.attachment.params,messageId:a.messageId}),n=l.reservationId,n||(yield Fi({type:cr.P,payload:{chatMessage:Yc()(s,{messagePayload:{attachment:{$merge:Object.assign(Object.assign({},l.slots?{slots:l.slots}:{}),l.availableDates?{availableDates:l.availableDates}:{})}}}),conversationId:o}}))),e.promise.resolve({actionType:a.actionType,response:{reservationId:n,selectedSlot:a.values.selectedSlot,selectedDate:a.values.selectedDate,visibleSlots:a.values.visibleSlots}})}catch(t){Object(ur.b)(t),e.promise.reject({actionType:a.actionType,response:{error:l}})}}catch(n){e.promise.reject(),Object(ur.b)(n)}}function*wl(e){try{yield Vi([zi(hl,e),zi(ml,e),zi(xl,e),zi(_l,e),zi(Sl,e),zi(Al,e),zi(Il,e),zi(Rl,e),zi(Pl,e)])}catch(t){Object(ur.b)(t)}}function*Nl(e,t){try{const n=Yc()(e,{payload:{actionParams:{$set:Object.assign(Object.assign({},Z()(e.payload.actionParams,["actionTypes"])),{actionType:t})}}}),a=new Promise(((e,t)=>{n.promise={resolve:e,reject:t}}));return yield zi(wl,n),yield a}catch(n){throw Object(ur.b)(n),n}}function*Ml(e){try{const t=e.payload.actionParams.actionTypes;let n=e;for(let e=0;e<ar()(t);e+=1)n=yield zi(Nl,n,t[e]);e.promise.resolve(n)}catch(t){e.promise.reject(t),Object(ur.b)(t)}}function*Ll(){try{yield Xc(cr.c,Ml)}catch(e){Object(ur.b)(e)}}function*kl(e){try{let n,a;try{const{disclaimerStatus:t}=e.payload,o=yield Zi(en.h),i=Object(en.t)(o);n=e.payload.conversationId,a=tt()(Object(en.k)(i,n),"disclaimerStatus"),yield Fi({type:cr.w,payload:{conversationId:n,disclaimerStatus:t}}),yield zi(Or.v,n,t),e.promise.resolve()}catch(t){e.promise.reject(),yield Fi({type:cr.w,payload:{conversationId:n,disclaimerStatus:a}}),Object(ur.b)(t)}}catch(n){Object(ur.b)(n)}}function*Dl(){try{yield Xc(cr.v,kl)}catch(e){Object(ur.b)(e)}}function*Ul(e){var t,n,a;try{const{context:a,filters:o}=e.payload,i=yield Zi(en.h),c=Object(en.A)(i),r=Object(en.e)(c,o||Object(en.p)());r?(yield zi(Js,Or.t,{context:a,conversationId:r,payload:e.payload}),null===(t=e.promise)||void 0===t||t.resolve({conversationId:r})):null===(n=e.promise)||void 0===n||n.reject(Bs.a.NOT_FOUND)}catch(o){null===(a=e.promise)||void 0===a||a.reject(Object(as.a)(o)),Object(ur.b)(o)}}function*Bl(e){var t;try{yield $i(cr.j),yield zi(Ul,e)}catch(n){null===(t=e.promise)||void 0===t||t.reject(Object(as.a)(n)),Object(ur.b)(n)}}function*Gl(e){var t,n,a;try{const{context:a,conversationId:o,includeDeleted:i}=e.payload;if(o)return yield zi(Js,Or.t,{context:a,conversationId:o,payload:e.payload}),void(null===(t=e.promise)||void 0===t||t.resolve({conversationId:o}));if(i)return yield zi(Js,Or.w,{context:a,updateLatest:i,payload:e.payload}),void(null===(n=e.promise)||void 0===n||n.resolve({conversationId:o}));const c=yield Zi(en.h),r=Object(en.t)(c);if(Object(en.b)(r))return void(yield zi(Ul,e));yield qi(Bl,e)}catch(o){null===(a=e.promise)||void 0===a||a.reject(Object(as.a)(o)),Object(ur.b)(o)}}function*$l(e){try{const{conversationContext:t,conversationId:n}=e.payload;yield zi(Js,Or.u,{conversationContext:t,conversationId:n}),yield Fi({type:cr.n,payload:{conversationContext:t,conversationId:n}}),e.promise.resolve({conversationId:n})}catch(t){e.promise.reject(Object(as.a)(t)),Object(ur.b)(t)}}function*Fl(){try{yield Xc(cr.o,Gl)}catch(e){Object(ur.b)(e)}}function*Vl(){try{yield Xc(cr.p,$l)}catch(e){Object(ur.b)(e)}}function*Hl(e){var t,n;try{const{lastReadMessageId:n}=e.payload;yield zi(Ds,{type:"MESSAGE_READ",payload:{messageId:n}}),null===(t=e.promise)||void 0===t||t.resolve()}catch(a){Object(ur.b)(a),null===(n=e.promise)||void 0===n||n.reject(Object(as.a)(a))}}function*Wl(){try{yield Xc(cr.V,Hl)}catch(e){Object(ur.b)(e)}}function*zl(){try{yield Vi([qi(ul),qi(fl),qi(sl),qi(js),qi(cl),qi(al),qi(il),qi(Gr),qi(Fr),qi(Dr),qi(Hr),qi(Ll),qi(Fl),qi(Vl),qi(bl),qi(Dl),qi(Wl),qi(xs),qi(As)])}catch(e){Object(ur.b)(e)}}const ql={},Kl="START_TYPING",Xl="STOP_TYPING";function*Zl(e,t){try{yield zi(Ds,{type:e,payload:{conversationId:t}})}catch(n){Object(ur.b)(n)}}function*Yl(e,t){for(;;)try{yield qi(Zl,Kl,e),yield Qi(25e3),yield $i(t)}catch(n){Object(ur.b)(n)}}function*Ql(e,t){let n,a;try{for(n=yc(_i.dropping(1)),a=yield qi(Yl,e,n);;){const e=yield $i(t);if(e.type!==cr.kb)break;n.put(e)}}catch(o){Object(ur.b)(o)}finally{yield qi(Zl,Xl,e),n&&n.close(),a&&a.cancel()}}function*Jl(e,t){for(;;)try{let n;if(n=yield $i(t),n.type!==cr.kb)continue;yield zi(Ql,e,t)}catch(n){Object(ur.b)(n)}}function*ed(){try{for(;;)try{const e=yield Hi([$i(cr.kb),$i(cr.lb)]),t=tr()(e)[0],{payload:{conversationId:n}}=t;let a=ql[n];a||(a=yc(_i.sliding(1)),ql[n]=a,yield qi(Jl,n,a)),a.put(t)}catch(e){Object(ur.b)(e)}}catch(e){Object(ur.b)(e)}}function*td(){try{yield qi(ed)}catch(e){Object(ur.b)(e)}}var nd=n(347),ad=n.n(nd),od=n(267),id=n.n(od),cd=n(445),rd=n.n(cd),sd=n(390);const ld={};function*dd(){throw yield Qi(3e4),new Error("")}function*ud(e){let t,{userConversationChannel:n,conversationId:a,sender:o,startTime:i,typingEvent:c,senderChatUser:r}=e;try{for(yield Fi({type:cr.a,payload:{conversationId:a,userId:o,actionTime:i,typingEvent:c,senderChatUser:r}}),t=yield qi(dd);;){const e=yield $i(n);if(e.type===sd.j)t.isCancelled()||(yield Xi(t)),t=yield qi(dd),yield Fi({type:cr.a,payload:{conversationId:a,userId:o,actionTime:e.payload.actionTime,typingEvent:e.payload.typingEvent,senderChatUser:r}});else{const t=yield Zi(en.h),n=Object(en.o)(t,a),i=Object(en.y)(n,o);if(i&&sr.a.getCreationTime(i)<e.payload.actionTime)break}}}catch(s){Object(ur.b)(s)}finally{yield Fi({type:cr.b,payload:{conversationId:a,userId:o}}),t&&!t.isCancelled()&&(yield Xi(t))}}function*bd(e){let{userConversationChannel:t,conversationId:n,sender:a}=e;for(;;)try{let e;if(e=yield $i(t),e.type!==sd.j)continue;yield zi(ud,{userConversationChannel:t,conversationId:n,sender:a,senderChatUser:e.payload.senderChatUser,startTime:e.payload.actionTime,typingEvent:e.payload.typingEvent})}catch(o){}}function*Od(e){try{const{payload:{conversationId:t,sender:n}}=e,a=yield Zi($a.i),o=Qt()(Object(os.e)(a,n)),i=function(e,t){return`${e}_${t}`}(t,o);let c=ld[i];c||(c=yc(_i.sliding(1)),ld[i]=c,yield qi(bd,{userConversationChannel:c,conversationId:t,sender:o})),c.put(e)}catch(t){Object(ur.b)(t)}}function*fd(e){try{yield Vi(e.map((e=>zi(Od,e))))}catch(t){Object(ur.b)(t)}}function*pd(e){try{yield Vi(e.map((e=>zi(Od,e))))}catch(t){Object(ur.b)(t)}}const vd=["AGENT_ASSIGNED","AGENT_UNASSIGNED","AGENT_ASSIGNMENT_CHANGED","WORK_QUEUE_ASSIGNED"];function*yd(e,t,n){try{if((a=e)&&vd.includes(a.type)){const{newAgentId:a,oldAgentId:o,queueId:i}=e,c=[],r=[];o&&(c.push({conversationId:t,sender:o}),r.push(o)),a&&(c.push({conversationId:t,sender:a}),r.push(a)),yield zi(Jr,c),yield Fi(Object(fr.h)({conversationId:t,agentAssigned:!!a,participants:r,workQueueAssigned:!!i}));const s=yield Zi((e=>a?Object($a.g)(Object($a.i)(e),a):void 0)),l={currentlyAssignedUser:s,previouslyAssignedUser:yield Zi((e=>o?Object($a.g)(Object($a.i)(e),o):void 0)),assignmentTime:n};a&&(yield Fi(Object(So.c)({conversationId:t,additional:l,action:Ft.a.AGENT_ASSIGNED})))}}catch(o){Object(ur.b)(o)}var a}function*jd(e){try{const{conversationId:t,messagePayload:n,creationTime:a}=e,o=n.events;yield Vi(o.map((e=>zi(yd,e,t,a))))}catch(t){Object(ur.b)(t)}}function*gd(e){try{const t=e.data;Object(dr.j)(t)&&(yield Vi([zi(jd,t)]))}catch(t){Object(ur.b)(t)}}const hd=(()=>{const e=new Set;return{add:t=>e.add(t),has:t=>e.has(t),delete:t=>e.delete(t),clear:()=>e.clear()}})(),md=(()=>{let e=[];return{set:t=>{e=t},get:()=>e,push:t=>{e=[...e,...zr()(t)]},clear:()=>{e=[]}}})();function Id(e){return e.type===sd.w}function Cd(e){return e.type===sd.v}function Td(e){return e.type===sd.j}function Ed(e){return e.type===sd.k}function*xd(e){try{const{data:t}=e;if(t){yield zi(gd,e);const n=yield Zi($a.i),a=Object(os.e)(n,sr.a.getSender(t));yield Fi(Object(fr.s)(t,a))}}catch(t){Object(ur.b)(t)}}function*Sd(e){try{const t=e.filter(Id);yield Vi(t.map((e=>zi(xd,e))));const n=t.reduce(((e,t)=>{const{data:n}=t;return n&&e.push(sr.a.getId(n)),e}),[]);it()(n)||(yield zi(Or.o,n))}catch(t){Object(ur.b)(t)}}function*_d(e){try{const t=e.filter(Td);if(!t.length)return;yield zi(fd,t)}catch(t){Object(ur.b)(t)}}function*Ad(e){try{const t=e.filter(Ed);if(!t.length)return;yield zi(pd,t)}catch(t){Object(ur.b)(t)}}function*Pd(e){var t,n,a;try{const{data:o}=e;if(!o)return;const{conversation:i,userInitiated:c,applicationConfig:r,conversationId:s}=o,l=yield Zi(en.h),d=yield Zi((e=>!!Object(en.i)(Object(en.h)(e).conversations,s)));if(!i||d)return;const u=yield Zi($a.i),b=Object($a.b)(u),O=Object($a.d)(u);yield Fi({payload:{conversationResponse:i,botUserIds:b,chatUserId:O},type:cr.B});const f=Object(en.t)(l);yield Fi({payload:{openConversationCount:(f.totalOpenConversations||0)+1},type:cr.jb});(null===(a=null===(n=null===(t=r.otherConfigs)||void 0===t?void 0:t.settings)||void 0===n?void 0:n.proactiveNotifications)||void 0===a?void 0:a.types.includes("AGENT_INITIATED_CONVERSATION"))&&!c&&(yield Fi(Object(fr.c)({type:"CONVERSATION",item:i})))}catch(o){Object(ur.b)(o)}}function*Rd(e){try{const t=e.filter(Cd);if(!t.length)return;yield Vi(t.map((e=>zi(Pd,e))))}catch(t){Object(ur.b)(t)}}function*wd(e){try{yield Vi([zi(Sd,e),zi(_d,e),zi(Ad,e),zi(Rd,e)])}catch(t){Object(ur.b)(t)}}function*Nd(e){try{const{id:t,data:n}=e;if(hd.add(t),Jc()(md.get(),(e=>{if(e.id===t)return e.data=n,!1})),t===tt()(Qt()(md.get()),"id")){const e={resolvedEvents:[],unresolvedEvents:[]},{resolvedEvents:t,unresolvedEvents:n}=Q()(md.get(),((e,t)=>hd.has(t.id)&&it()(e.unresolvedEvents)?(hd.delete(t.id),Object.assign(Object.assign({},e),{resolvedEvents:[...e.resolvedEvents,t]})):Object.assign(Object.assign({},e),{unresolvedEvents:[...e.unresolvedEvents,t]})),e);md.set(n),yield qi(wd,t)}}catch(t){Object(ur.b)(t)}}function*Md(e){try{if(Id(e)){const t=yield zi(pl,e);yield zi(Nd,{id:e.id,data:t})}}catch(t){Object(ur.b)(t)}}function*Ld(e){try{if(Td(e)){const t=rd()(e.payload,["conversationId","sender"]);yield zi(Jr,t),yield zi(Nd,{id:e.id,data:{}})}}catch(t){Object(ur.b)(t)}}function*kd(e){try{Ed(e)&&(yield zi(Nd,{id:e.id,data:{}}))}catch(t){Object(ur.b)(t)}}function*Dd(e,t){try{if(Cd(e)){const{conversationId:n,userInitiated:a,conversation:o}=e.payload;yield zi(Nd,{id:e.id,data:{conversation:o,conversationId:n,userInitiated:a,applicationConfig:t}})}}catch(n){Object(ur.b)(n)}}function*Ud(e,t){try{yield Vi([zi(Md,e),zi(Ld,e),zi(kd,e),zi(Dd,e,t)])}catch(n){Object(ur.b)(n)}}function*Bd(e,t){try{md.push(e),yield Vi(e.map((e=>qi(Ud,e,t))))}catch(n){Object(ur.b)(n)}}var Gd=n(974),$d=n.n(Gd),Fd=n(527),Vd=n.n(Fd);function Hd(e){return e.type===sd.u}function Wd(e){return e.type===sd.i}function zd(e){return e.type===sd.s}function qd(e){return e.type===sd.l}function Kd(e){return e.type===sd.q}function Xd(e){return e.type===sd.m}function Zd(e){return e.type===sd.r}function*Yd(e){try{yield Vi(e.filter(Kd).map((e=>zi(vl,e))))}catch(t){Object(ur.b)(t)}}function*Qd(e){try{yield Vi(e.filter(Hd).map((e=>zi(yl,e))))}catch(t){Object(ur.b)(t)}}function*Jd(e){try{yield Vi($d()(e.filter(qd).map((e=>[zi(es,{sender:e.payload.chatUserId,conversationId:e.payload.conversationId}),Fi(Object(So.c)({conversationId:e.payload.conversationId,action:Ft.a.USER_PROFILE_UPDATED,additional:{sender:e.payload.chatUserId}}))]))))}catch(t){Object(ur.b)(t)}}function*eu(e){try{yield Vi(e.filter(Xd).map((e=>zi(jl,e))))}catch(t){Object(ur.b)(t)}}function*tu(e){try{yield Vi(e.filter(Wd).map((e=>zi(gl,e))))}catch(t){Object(ur.b)(t)}}function*nu(e){try{yield Vi(Vd()(e.filter(zd),(e=>e.payload.conversationId)).map((e=>Fi({type:"@teams-app/FETCH_MESSAGE_READ_STATUS",payload:{conversationId:e.payload.conversationId}}))))}catch(t){Object(ur.b)(t)}}function*au(e){try{yield Vi(e.filter(Zd).map((e=>Fi(Object(fr.h)({conversationId:e.payload.conversationId,liveObserve:e.payload.liveObserve})))))}catch(t){Object(ur.b)(t)}}function*ou(e){try{yield Vi([zi(Yd,e),zi(Qd,e),zi(Jd,e),zi(eu,e),zi(tu,e),zi(nu,e),zi(au,e)])}catch(t){Object(ur.b)(t)}}const iu=[sd.w,sd.j,sd.k,sd.v];function*cu(e,t){try{const{events:n}=t.payload;let a=[],o=[];Jc()(n,(e=>{ad()(iu,e.type)?a=[...a,Object.assign(Object.assign({},e),{id:id()()})]:o=[...o,e]})),yield zi(Bd,a,e),yield zi(ou,o)}catch(n){Object(ur.b)(n)}}function*ru(){try{const{payload:{applicationConfig:e}}=yield $i(Gc.a);yield Xc(Ps.j,cu,e)}catch(e){Object(ur.b)(e)}}function*su(){try{yield $i(Gc.c),hd.clear(),md.clear()}catch(e){Object(ur.b)(e)}}function*lu(){try{yield Vi([qi(ru),qi(su)])}catch(e){Object(ur.b)(e)}}function*du(e){try{const e=yield Zi(en.h),t=Object(en.t)(e);if(!Object(en.b)(t))return;yield Fi(Object(fr.i)({size:t.ids.length}))}catch(t){Object(ur.b)(t)}}function*uu(){try{const e=yield Zi(en.h),t=Object(en.t)(e),n=Object(en.r)(e),a=Q()(n,((e,n,a)=>{const o=n.messages;if(!a.startsWith(Nt.g)&&Object(en.a)(o)&&!Object(en.E)(t,a)){const t=Object(fr.j)(a,{size:Object(en.n)(o).length})();e.push(Fi(t))}return e}),[]);a.length&&(yield Vi(a))}catch(e){Object(ur.b)(e)}}function*bu(){try{const e=yield zi(Kr.a);yield Fi({type:Zr.e,payload:{users:[e]}})}catch(e){Object(ur.b)(e)}}function*Ou(e){try{yield Vi([qi(du,e),qi(uu),qi(bu)])}catch(t){Object(ur.b)(t)}}function*fu(){try{const{payload:{applicationConfig:e}}=yield $i(Gc.a);yield Xc(Ps.k,Ou,{applicationConfig:e})}catch(e){Object(ur.b)(e)}}function*pu(){try{yield Vi([qi(zl),qi(td),qi(lu),qi(fu)])}catch(e){Object(ur.b)(e)}}function*vu(e){try{const t=e.payload,n=Object($a.c)(yield Zi($a.i));n&&(yield zi(Kr.c,Object.assign(Object.assign({},n),{customContext:t})),yield Fi(Object(So.c)({action:Ft.a.USER_PROFILE_UPDATED})))}catch(t){Object(ur.b)(t)}}function*yu(){try{yield Xc(Zr.d,vu)}catch(e){Object(ur.b)(e)}}function*ju(){try{yield Vi([qi(yu)])}catch(e){Object(ur.b)(e)}}var gu=n(395),hu=n(619),mu=n(658),Iu=n(561),Cu=n(525);function Tu(e){return e.type===sd.d}function Eu(e){return e.type===sd.c}function xu(e){return e.type===sd.b}function Su(e){return e.type===sd.e}function _u(e){return e.type===sd.h}function*Au(e,t){try{const n=Object($a.c)(yield Zi($a.i));yield Vi(e.filter(Tu).map((e=>{var a,o;const i=e.payload.participantInfos.find((e=>e.snId===(null===n||void 0===n?void 0:n.userId))),c=e.payload.type,r=null!==(a=null===i||void 0===i?void 0:i.permissions)&&void 0!==a?a:Object(Iu.e)(c,null===(o=t.callConfiguration)||void 0===o?void 0:o.allUserPermissions);return Fi(Object(gu.o)({conversationId:e.payload.conversationId,videoConversationId:e.payload.videoConversationId,permissions:r,participantInfos:e.payload.participantInfos,type:c}))})))}catch(n){Object(ur.b)(n)}}function*Pu(e){try{const t=yield Zi(hu.a);yield Vi(e.filter(Eu).map((e=>{const{callDetails:n,isIncomingCall:a,isOutgoingCall:o}=Object(mu.a)(t,e.payload.videoConversationId),i=a&&n.state===pt.e.WAITING;if((a||o)&&!Object(Iu.h)({isIncomingCall:a,state:n.state}))return Fi(i?Object(gu.q)({videoConversationId:e.payload.videoConversationId}):Object(gu.m)({callDetails:n,isIncomingCall:a,notifyAgent:!1,notifyUser:!0,videoConversationId:e.payload.videoConversationId,endedBy:e.payload.videoParticipantId}))})).filter((e=>e)))}catch(t){Object(ur.b)(t)}}function*Ru(e){try{const t=yield Zi(hu.a);yield Vi(e.filter(Su).map((e=>{const{callDetails:n,isIncomingCall:a,isOutgoingCall:o}=Object(mu.a)(t,e.payload.videoConversationId);if((a||o)&&!Object(Iu.h)({isIncomingCall:a,state:n.state}))return Fi(Object(gu.h)({isIncomingCall:a,conversationId:e.payload.conversationId,videoConversationId:e.payload.videoConversationId}))})).filter((e=>e)))}catch(t){Object(ur.b)(t)}}function*wu(e){try{const t=yield Zi(hu.a),n=e.filter(xu).map((e=>{const{callDetails:n,isOutgoingCall:a}=Object(mu.a)(t,e.payload.videoConversationId);if(a&&!Object(Iu.h)({isIncomingCall:!1,state:n.state}))return Fi(Object(gu.c)({isIncomingCall:!1,conversationId:e.payload.conversationId,videoConversationId:e.payload.videoConversationId}))})).filter((e=>e));yield Vi(n)}catch(t){Object(ur.b)(t)}}function*Nu(e){try{const t=yield Zi(hu.a);yield Vi(e.filter((e=>function(e){return e.type===sd.f}(e))).map((e=>{const{callDetails:n}=Object(mu.a)(t,e.payload.videoConversationId);return n.state===pt.g.WAITING?Fi(Object(gu.v)({videoConversationId:e.payload.videoConversationId,callInfo:{conversation:e.payload.conversation,participant:e.payload.participant}})):Fi({type:Cu.x,payload:{participantInfos:Object(Iu.d)(e.payload.conversation),participantPermissions:e.payload.participant.permissions,videoConversationId:e.payload.videoConversationId}})})))}catch(t){Object(ur.b)(t)}}function*Mu(e){try{yield Vi(e.filter((e=>function(e){return e.type===sd.g}(e))).map((e=>Fi({type:Cu.x,payload:{participantInfos:Object(Iu.d)(e.payload.conversation),videoConversationId:e.payload.videoConversationId}}))))}catch(t){Object(ur.b)(t)}}function*Lu(e){try{yield Vi(e.filter(_u).map((e=>Fi({type:Cu.x,payload:{videoConversationId:e.payload.videoConversationId,participantPermissions:e.payload.permissions}}))))}catch(t){Object(ur.b)(t)}}function*ku(e,t){try{const{events:n}=t.payload;yield Vi([zi(Pu,n),zi(Au,n,e),zi(wu,n),zi(Nu,n),zi(Ru,n),zi(Lu,n),zi(Mu,n)])}catch(n){Object(ur.b)(n)}}function*Du(){try{const{payload:{applicationConfig:e}}=yield $i(Gc.a);yield Xc(Ps.j,ku,e)}catch(e){Object(ur.b)(e)}}var Uu=n(1068),Bu=n(779),Gu=n(332),$u=n(614);const Fu={VIDEO_CHAT:Gu.a.VIDEO,AUDIO_CHAT:Gu.a.AUDIO};function*Vu(e,t,n){try{const a=yield Zi(en.h),o=Object(Bu.b)(a,e,t);o&&(yield zi(Lr,{chatMessage:o,conversationId:e,params:{state:n}}))}catch(a){Object(ur.b)(a)}}function*Hu(e){try{const{notifyAgent:t,notifyUser:n,callDetails:a,videoConversationId:o,isIncomingCall:i}=e.payload,c=a.conversationId;if(yield Fi(Object(So.c)({conversationId:c,action:Ft.a.CALL_ENDED,additional:{videoConversationId:o,userInitiated:!n}})),yield zi(Vu,c,o,$u.a.CALL_ENDED),!t)return;if(!i&&!a.hasInitiateSucceeded&&a.state===pt.g.WAITING){if((yield $i(Object(Iu.f)(o))).type===Cu.e)return}if(i&&a.state===pt.e.ACCEPTED){if((yield $i(Object(Bu.c)(o))).type===Cu.e)return}yield zi(Uu.c,{videoConversationId:o})}catch(t){Object(ur.b)(t)}}function*Wu(e){try{e.payload.isOutgoingWaiting&&(yield zi(Hu,e)),yield Fi({type:cr.bb,payload:{text:e.payload.text,sender:e.payload.sender,conversationId:e.payload.conversationId}})}catch(t){Object(ur.b)(t)}}function*zu(e){var t,n;try{const{actionParams:{messageId:a,actionId:o},conversationId:i}=e.payload,c=yield Zi(hu.a),r=Object(ft.f)(c),s=null===(t=r.source)||void 0===t?void 0:t.messageId;if(s&&a===s&&o!==(null===(n=r.source)||void 0===n?void 0:n.sourceButtonId)){const e=yield Zi(en.h),t=Object(en.m)(Object(en.o)(e,i),a);t&&!lr.a.getAttachment(sr.a.getMessagePayload(t)).reSubmittable&&(yield Fi(Object(gu.m)({notifyAgent:!0,notifyUser:!1,callDetails:r,isIncomingCall:!1,videoConversationId:r.videoConversationId})))}}catch(a){Object(ur.b)(a)}}function*qu(e,t){try{yield Fi(Object(gu.r)({conversationId:t.payload.conversationId,controls:Object(Bu.g)(t.payload.isPhone),type:t.payload.type,source:t.payload.source,allUserPermissions:e,videoConversationId:id.a.v4()}))}catch(n){Object(ur.b)(n)}}function*Ku(e){let{error:t,videoConversationId:n,reason:a,isIncomingCall:o}=e;try{const e=yield Zi(hu.a),i=o?Object(ft.d)(e):Object(ft.f)(e);if(it()(i)||i.videoConversationId!==n||Object(Iu.h)({isIncomingCall:o,state:i.state}))return;if(Object(Ls.h)(t)||Object(Ls.a)(t)&&Object(Ls.e)(t)){const e=tt()(t,"response.data.error")||Object(as.a)(t);if(e===pt.a.CALL_ALREADY_ENDED)return void(yield Fi({type:Cu.c,payload:{videoConversationId:n,notifyAgent:!1,notifyUser:!0,callDetails:i,isIncomingCall:o}}));yield Fi({type:Cu.e,payload:{videoConversationId:n,reason:a,subReason:e}})}}catch(i){Object(ur.b)(i)}}function*Xu(e){try{const{videoConversationId:t}=e.payload;yield Fi(Object(gu.b)({videoConversationId:t,controls:Object(Bu.g)(e.payload.isPhone)}));const n=yield zi(Uu.a,{videoConversationId:t,shouldWaitForConnection:!0});yield Fi({type:Cu.x,payload:{participantPermissions:n.participant.permissions,participantInfos:n.conversation.participantInfos,videoConversationId:n.conversation.id}}),yield Fi(Object(gu.u)({videoConversationId:t}))}catch(t){Object(ur.b)(t),yield zi(Ku,{videoConversationId:e.payload.videoConversationId,isIncomingCall:!0,error:t,reason:pt.d.ACCEPT_FAILED})}}function*Zu(e){let t;try{const{videoConversationId:n,source:a}=e.payload,{autoInitiateCall:o,creativeId:i,interceptId:c,interceptTargetId:r,messageId:s,messageText:l,sourceButtonId:d,type:u}=a||{},b=yield Zi(hu.a);let O=Object(ft.f)(b).conversationId;if(O.startsWith(Nt.g)){const e=yield $i(Object(os.i)(O));if(e.type!==cr.S)throw e.payload.error;O=e.payload.conversationResponse.id,yield Fi({type:Cu.x,payload:{videoConversationId:n,conversationId:O}})}const f=Object(ft.h)(b,n);if(yield Fi(Object(So.c)({conversationId:O,action:f?Ft.a.AUDIO_CALL_OUTGOING_STARTING:Ft.a.VIDEO_CALL_OUTGOING_STARTING,sourceSubType:u,additional:{videoConversationId:n,creativeId:i,interceptId:c,interceptTargetId:r,sourceButtonId:d,messageId:s}})),s){const e=yield Zi(en.h);t=Object(en.m)(Object(en.o)(e,O),s),yield zi(Lr,{chatMessage:t,conversationId:O,params:{buttonId:d}})}const p=yield zi(Uu.b,{conversationId:O,audioOnly:f,messageText:l,sourceButtonId:d,postBackChatMessageId:s,shouldWaitForConnection:!0,videoConversationId:n,activityEventType:"CALL_STARTED",autoInitiateCall:o});yield Fi({type:Cu.x,payload:{hasInitiateSucceeded:!0,agentWaitTime:p.conversation.agentWaitTime,participantInfos:p.conversation.participantInfos,participantPermissions:p.participant.permissions,videoConversationId:p.conversation.id}})}catch(n){t&&(yield Fi({type:cr.P,payload:{chatMessage:t,conversationId:e.payload.conversationId}})),yield zi(Ku,{videoConversationId:e.payload.videoConversationId,reason:pt.f.INITIATE_FAILED,error:n,isIncomingCall:!1}),Object(ur.b)(n)}}function*Yu(e){try{const{conversationId:n,type:a,isPhone:o,prevState:i,videoConversationId:c,participantInfos:r,participantPermissions:s}=e.payload,l=yield Zi(hu.a),d=Object(ft.c)(l);if(Object(Bu.h)({callDetails:d}))return;const u=a===Gu.a.AUDIO,b=Object(Bu.d)(i);yield Fi(Object(So.c)({conversationId:n,action:Object(Bu.e)(u,b),additional:{videoConversationId:c}})),yield Fi(Object(gu.s)({conversationId:n,videoConversationId:c,state:b?pt.e.ACCEPTED:pt.e.SETUP,controls:Object(Bu.g)(o),type:a,participantPermissions:s,participantInfos:r}));let O=yield zi(Uu.e,n);if(it()(O))return void(yield Fi({type:Cu.c,payload:{videoConversationId:e.payload.videoConversationId,notifyAgent:!1,notifyUser:!0,isIncomingCall:!0}}));if(yield Fi({type:Cu.x,payload:{participantPermissions:O.participant.permissions,participantInfos:O.conversation.participantInfos,videoConversationId:O.conversation.id}}),b){try{O=yield zi(Uu.a,{videoConversationId:O.conversation.id,shouldWaitForConnection:!0}),yield Fi({type:Cu.x,payload:{participantPermissions:O.participant.permissions,participantInfos:O.conversation.participantInfos,videoConversationId:O.conversation.id}})}catch(t){return Object(ur.b)(t),void(yield zi(Ku,{videoConversationId:e.payload.videoConversationId,reason:pt.d.ACCEPT_FAILED,error:t,isIncomingCall:!0}))}yield Fi(Object(gu.u)({videoConversationId:O.conversation.id}))}}catch(t){return Object(ur.b)(t),void(yield zi(Ku,{videoConversationId:e.payload.videoConversationId,reason:pt.d.REJOIN_FAILED,error:t,isIncomingCall:!0}))}}function*Qu(e){try{const{conversationId:t,type:n,isPhone:a,prevState:o,videoConversationId:i,participantInfos:c,participantPermissions:r}=e.payload,s=yield Zi(hu.a),l=Object(ft.c)(s);if(Object(Bu.h)({callDetails:l}))return;const d=n===Gu.a.AUDIO;yield Fi(Object(So.c)({conversationId:t,action:Object(Bu.e)(d),additional:{videoConversationId:i}})),yield Fi(Object(gu.t)({conversationId:t,videoConversationId:i,state:Object(Bu.f)(o),controls:Object(Bu.g)(a),type:n,participantPermissions:r,participantInfos:c}));const u=yield zi(Uu.e,e.payload.conversationId);if(it()(u))return void(yield Fi({type:Cu.c,payload:{videoConversationId:e.payload.videoConversationId,notifyAgent:!1,notifyUser:!0}}));yield Fi({type:Cu.x,payload:{agentWaitTime:u.conversation.agentWaitTime,participantPermissions:u.participant.permissions,participantInfos:u.conversation.participantInfos,videoConversationId:u.conversation.id}})}catch(t){Object(ur.b)(t),yield zi(Ku,{videoConversationId:e.payload.videoConversationId,reason:pt.f.REJOIN_FAILED,error:t,isIncomingCall:!1})}}function*Ju(e){try{const t=e.payload,{isIncomingCall:n}=t,a=Object(rr.c)(t,["isIncomingCall"]);n?yield Fi(Object(gu.f)(a)):yield Fi(Object(gu.k)(a))}catch(t){Object(ur.b)(t)}}function*eb(e){const t=yield Zi(hu.a),{videoConversationId:n}=e.payload,{isOutgoingCall:a}=Object(mu.a)(t,n);try{const t=a?gu.l:gu.g;yield Fi(t({videoConversationId:n})),yield zi(Uu.f,e.payload)}catch(o){yield zi(Ku,{videoConversationId:n,reason:a?pt.f.JOIN_FAILED:pt.d.JOIN_FAILED,error:o,isIncomingCall:!a}),Object(ur.b)(o)}}function*tb(e){try{const t=yield Zi(hu.a),{callDetails:n,isIncomingCall:a}=Object(mu.a)(t,e.payload.videoConversationId);if(n.reason&&n.reason!==e.payload.reason)return;const o=n.conversationId,i=n.videoConversationId;if(yield Fi(Object(So.c)({conversationId:o,action:Ft.a.CALL_FAILED,additional:{videoConversationId:e.payload.videoConversationId}})),yield zi(Vu,o,i,$u.a.CALL_FAILED),!a&&!n.hasInitiateSucceeded){if((yield $i(Object(Iu.f)(i))).type===Cu.e)return}yield zi(Uu.g,{videoConversationId:e.payload.videoConversationId,reason:e.payload.reason,subReason:e.payload.subReason})}catch(t){Object(ur.b)(t)}}function*nb(e){try{const{isIncomingCall:t,conversationId:n,videoConversationId:a}=e.payload;yield Fi(Object(So.c)({conversationId:n,action:Ft.a.CALL_DECLINED,additional:{videoConversationId:a,userInitiated:t}})),yield zi(Vu,n,a,$u.a.CALL_DECLINED),yield zi(Uu.c,{videoConversationId:a})}catch(t){Object(ur.b)(t)}}function*ab(e){try{const{conversationId:t,videoConversationId:n,isIncomingCall:a}=e.payload;yield Fi(Object(So.c)({conversationId:t,action:Ft.a.CALL_MISSED,additional:{videoConversationId:n,userInitiated:a}})),yield zi(Vu,t,n,$u.a.CALL_MISSED)}catch(t){Object(ur.b)(t)}}function*ob(e){var t,n;try{const{payload:a}=e,{actionParams:{actionId:o,actionType:i,attachment:c,messageId:r,values:s},conversationId:l,appContext:d,applicationConfig:u}=a,b=null===(t=null===u||void 0===u?void 0:u.callConfiguration)||void 0===t?void 0:t.allUserPermissions;if(Ys(i)){s.participantPermissions||Object(ur.b)(`Participant permissions (${s.participantPermissions}) unset`),s.participantInfos||Object(ur.b)("Participant infos is unset");const t=s.audioOnly?Gu.a.AUDIO:Gu.a.VIDEO;yield Fi(Object(gu.p)({conversationId:l,isPhone:d.isPhone,type:t,isIncomingCall:s.isIncomingCall,videoConversationId:s.videoChatConversationId,participantPermissions:null!==(n=s.participantPermissions)&&void 0!==n?n:Object(Iu.e)(t,b),participantInfos:s.participantInfos,prevState:Object(Bu.a)(s.currentState,s.isIncomingCall)})),e.promise&&e.promise.resolve(e)}else if(Xs(i)||Zs(i)){const t=yield Zi(hu.a);if(Object(ft.a)(t))return void(e.promise&&e.promise.reject());const n=Xs(i)?Gu.a.VIDEO:Gu.a.AUDIO,a=tt()(Object(Ms.a)(o,c),"title","");let s={};o&&(s={sourceButtonId:o,messageId:r,messageText:a,type:Nt.c.CONVERSATION_MESSAGE}),yield Fi(Object(gu.i)({conversationId:l,isPhone:d.isPhone,type:n,source:s})),e.promise&&e.promise.resolve(e)}}catch(a){e.promise.reject(),Object(ur.b)(a)}}function*ib(e){let{isPhone:t,conversationId:n,deflection:a}=e;try{const{type:e,source:o}=a;yield Fi(Object(gu.i)({conversationId:n,isPhone:t,type:e,source:o}))}catch(o){Object(ur.b)(o)}}function*cb(e){let{payload:t}=e;try{const{conversationId:e,isPhone:n,source:a,deflectionType:o}=t;yield qi(ib,{conversationId:e,isPhone:n,deflection:{type:Fu[o],source:a}})}catch(n){Object(ur.b)(n)}}function*rb(){var e;try{const{payload:{applicationConfig:t}}=yield $i(Gc.a);yield Xc(Cu.g,Xu),yield Xc(Cu.c,Hu),yield Xc(Cu.o,qu,null===(e=null===t||void 0===t?void 0:t.callConfiguration)||void 0===e?void 0:e.allUserPermissions),yield Xc(Cu.u,Zu),yield Xc(Cu.d,Wu),yield Xc(Cu.v,Ju),yield Xc(Cu.k,Yu),yield Xc(Cu.r,Qu),yield Xc(cr.c,zu),yield Xc(Cu.y,eb),yield Xc(Cu.e,tb),yield Xc(Cu.b,nb),yield Xc(Cu.n,ab),yield Xc(cr.d,ob),yield Xc(cr.k,cb)}catch(t){Object(ur.b)(t)}}function*sb(){try{yield Vi([qi(Du),qi(rb)])}catch(e){Object(ur.b)(e)}}var lb=n(738);function db(e){try{const{cookieConsent:t}=e.payload;Object(On.f)(t),e.promise.resolve({})}catch(t){e.promise.reject(t),Object(ur.b)(t)}}function*ub(){try{const{payload:{applicationConfig:e}}=yield $i(Gc.a);if(!e.otherConfigs.settings.cookieConsent)return;yield Xc(lb.a,db)}catch(e){Object(ur.b)(e)}}function*bb(){try{yield Vi([qi(ub)])}catch(e){Object(ur.b)(e)}}var Ob=n(531),fb=n(372);function pb(e){return e.type===sd.o}function vb(e){return e.type===sd.n}function*yb(){try{const e=yield Zi(Ot.f);it()(e)||(yield Fi(Object(Ob.i)()))}catch(e){Object(ur.b)(e)}return null}function*jb(e){try{const t=yield Zi(Ot.f);yield Vi(e.filter(pb).map((e=>{if(t.type!==fb.a.REQUEST)return null;const{status:n}=e.payload;return"LIVE"===n?zi(yb):"COMPLETED"===n?Fi(Object(Ob.e)({endedByAgent:!0})):null})))}catch(t){Object(ur.b)(t)}}function*gb(e){try{const{type:t,control:n}=yield Zi(Ot.f);yield Vi(e.filter(vb).map((e=>{if(t!==fb.a.REQUEST||n.state!==fb.b.PENDING)return null;const{status:a}=e.payload;return"FULL_DEVICE_CANCELLED"===a&&n.mode===fb.c.FULL_DEVICE?Fi(Object(Ob.b)({mode:fb.c.FULL_DEVICE})):"REMOTE_CANCELLED"===a&&n.mode===fb.c.REMOTE_CONTROL?Fi(Object(Ob.b)({mode:fb.c.REMOTE_CONTROL})):null})))}catch(t){Object(ur.b)(t)}}function*hb(e){try{const{events:t}=e.payload;yield Vi([zi(jb,t),zi(gb,t)])}catch(t){Object(ur.b)(t)}}function*mb(){try{yield Xc(Ps.j,hb)}catch(e){Object(ur.b)(e)}}var Ib=n(659);const Cb="/co-browse/conversation",Tb=(e,t)=>t.messageId?`${Cb}/${e}?messageId=${t.messageId}`:`${Cb}/live-observe/${e}`,Eb=e=>Object(rr.a)(void 0,void 0,void 0,(function*(){var{markCompletedSession:t}=e,n=Object(rr.c)(e,["markCompletedSession"]);const a=Tb(t?"completed":"cancelled",n);return(yield Object(hr.c)(a)).data})),xb=e=>{let{messageId:t,actionPayload:n}=e;return Object(rr.a)(void 0,void 0,void 0,(function*(){return(yield Object(hr.c)(Tb("push",{messageId:t}),{type:"CO_BROWSE",payload:n})).data}))},Sb=e=>{let{payload:t,messageId:n}=e;return Object(rr.a)(void 0,void 0,void 0,(function*(){return yield Object(hr.c)(Tb("push/status",{messageId:n}),Object.assign(Object.assign({},t),{type:"CO_BROWSE_STATUS"}))}))},_b=e=>{let{otp:t,additionalInfo:n,messageId:a}=e;return Object(rr.a)(void 0,void 0,void 0,(function*(){return Sb({messageId:a,payload:{status:"SUCCESS",otp:t,additionalInfo:n}})}))},Ab=e=>{let{reason:t,messageId:n}=e;return Object(rr.a)(void 0,void 0,void 0,(function*(){return Sb({messageId:n,payload:{status:"FAILED",reason:t}})}))},Pb=e=>{let{payload:t,messageId:n}=e;const a=Tb("event",{messageId:n});return Object(hr.c)(a,t)},Rb=e=>{let{messageId:t}=e;return Object(rr.a)(void 0,void 0,void 0,(function*(){const e=Tb("session/live",{messageId:t});return(yield Object(hr.c)(e)).data}))};var wb=n(752),Nb=n(890);function*Mb(e){try{const{messageId:t}=yield Zi(Ot.f);yield zi(xb,{messageId:t,actionPayload:e.payload})}catch(t){Object(ur.b)(t)}}function*Lb(e){const t=yield Zi(Ot.f),{type:n}=t;try{const{otp:a,additionalInfo:o}=e.payload;if(Object(Ib.b)(t))yield zi(_b,{otp:a,additionalInfo:o}),yield Fi(Object(Ob.k)({type:fb.a.REQUEST,silent:!0}));else{const{messageId:e,conversationId:i,agentId:c}=t;yield zi(_b,{messageId:e,otp:a,additionalInfo:o}),yield Fi(Object(Ob.k)({messageId:e,conversationId:i,agentId:c,type:n}))}}catch(a){try{Object(Ib.b)(t)?(yield Fi(Object(Ob.g)({reason:Nb.a.OTP_SEND_FAILED,type:n,silent:!0})),yield zi(Ab,{reason:Nb.a.OTP_SEND_FAILED})):(yield Fi(Object(Ob.g)({reason:Nb.a.OTP_SEND_FAILED,type:n})),yield zi(Ab,{messageId:t.messageId,reason:Nb.a.OTP_SEND_FAILED}))}catch(o){Object(ur.b)(a)}}}function*kb(e){try{const t=e.payload,{reason:n,type:a,silent:o}=t,i=Object(rr.c)(t,["reason","type","silent"]);yield Fi(Object(Ob.g)({reason:n,type:a,silent:o}));const c=yield zi(Ab,Object.assign(Object.assign({},i),{reason:n}));204!==c.status&&201!==c.status||!Object(Ib.b)(e.payload)||(yield Fi(Object(fr.h)({includeAll:!0,liveObserve:{active:!1}})))}catch(t){Object(ur.b)(t)}}function*Db(e){let{messageId:t}=e;try{const[e,n]=yield Hi([$i((e=>{let{type:n,payload:a}=e;return n===cr.N&&tt()(a,"chatMessage.messagePayload.attachment.messageId")===t})),$i((e=>{let{type:n,payload:a}=e;return n===cr.M&&tt()(a,"postbackParentMessageId")===t})),$i(wb.i),$i(wb.j)]);e&&(yield Fi(Object(Ob.s)())),n&&(yield Fi(Object(Ob.g)({reason:Nb.a.POSTBACK_SEND_FAILED,type:fb.a.REQUEST})))}catch(n){Object(ur.b)(n)}}function*Ub(e){let{payload:t}=e;try{const e=yield Zi(Ot.f);yield zi(Pb,Object(Ib.b)(e)?{payload:t}:{messageId:e.messageId,payload:t})}catch(n){Object(ur.b)(n)}}function*Bb(e){try{const{endedByAgent:t,markCompletedSession:n}=e.payload;if(t)return;return void("messageId"in e.payload?yield zi(Eb,{messageId:e.payload.messageId,markCompletedSession:n}):yield zi(Eb,{markCompletedSession:n}))}catch(t){Object(ur.b)(t)}}function*Gb(e){try{const{mode:t}=e.payload;yield Fi(Object(Ob.c)(e.payload)),yield Fi(Object(Ob.l)({type:t,payload:{status:"ACCEPT"}}))}catch(t){Object(ur.b)(t)}}function*$b(e){try{const{settings:{skipUserPermissionForRemoteControl:t}={}}=e.payload;t&&(yield Fi(Object(Ob.k)({skipUserPermissionForRemoteControl:t})))}catch(t){Object(ur.b)(t)}}function*Fb(e){try{const{mode:t}=e.payload;yield Fi(Object(Ob.l)({type:t,payload:{status:"REJECT"}}))}catch(t){Object(ur.b)(t)}}function*Vb(e){try{const{mode:t,shouldNotifyAgent:n}=e.payload;n&&(yield Fi(Object(Ob.l)({type:t,payload:{status:"STOP"}})))}catch(t){Object(ur.b)(t)}}function*Hb(e){const t=e.payload;let n;try{let e=!1;if(t.type===fb.a.REQUEST&&t.silent){n=!0;const[t]=yield Vi([zi(Rb,{})]);e=t}else if(t.type===fb.a.REQUEST&&!t.silent||t.type===fb.a.AGENT_PRESENT){const{messageId:n,agentId:a,conversationId:o}=t,[i]=yield Vi([zi(Rb,{messageId:n}),zi(Jr,{sender:a,conversationId:o})]);e=i}e?yield Fi(Object(Ob.r)(t)):yield Fi(Object(Ob.g)(Object.assign({reason:Nb.a.RESUME_SESSION_FAILED,type:t.type},t.type===fb.a.REQUEST?{silent:!!n}:{})))}catch(a){yield Fi(Object(Ob.h)(Object.assign(Object.assign(Object.assign({},t),{reason:Nb.a.RESUME_SESSION_FAILED}),t.type===fb.a.REQUEST?{silent:!!n}:{}))),Object(ur.b)(a)}}function*Wb(e){try{e.payload.type===fb.a.AGENT_PRESENT&&(yield Fi(Object(Ob.k)(e.payload))),e.payload.type===fb.a.REQUEST&&e.payload.silent&&(yield Fi(Object(Ob.s)()))}catch(t){Object(ur.b)(t)}}function*zb(e){var t,n;try{const{conversationId:n,messageId:a,url:o}=e.payload,i=yield Zi(Ot.c),c=Object(en.m)(Object(en.o)(i,n),a);yield Fi(Object(Ob.f)({messageId:a,conversationId:n,agentId:c.sender,agentPresentUrl:o,type:fb.a.AGENT_PRESENT})),yield zi(Lr,{chatMessage:c,conversationId:n,params:{}}),null===(t=e.promise)||void 0===t||t.resolve()}catch(a){null===(n=e.promise)||void 0===n||n.reject(),Object(ur.b)(a)}}function*qb(e){try{const{actionParams:{messageId:t,actionType:n,values:a},conversationId:o}=e.payload;if(n===Gs.a.ACCEPT_CO_BROWSE){const e=yield Zi((e=>Object(en.m)(Object(en.o)(Object(Ot.c)(e),o),t))),n=sr.a.getSender(e);yield Fi(Object(Ob.f)({messageId:t,conversationId:o,agentId:n,type:fb.a.REQUEST,silent:!1})),yield Ki(Db,{messageId:t})}yield Fi({type:cr.h,payload:{values:a}})}catch(t){Object(ur.b)(t),yield Fi({type:cr.h,payload:{values:null}})}}function*Kb(){try{yield Vi([Xc(wb.q,Lb),Xc(wb.r,kb),Xc(wb.i,Bb),Xc(wb.a,Gb),Xc(wb.f,Fb),Xc(wb.d,Vb),Xc(wb.c,$b),Xc(wb.g,Mb),Xc(wb.m,Hb),Xc(wb.h,Ub),Xc(wb.k,Wb),Xc(cr.X,zb),Xc(cr.g,qb)])}catch(e){Object(ur.b)(e)}}function*Xb(){yield Vi([qi(Kb),qi(mb)])}function*Zb(){try{yield Vi([qi(pu),qi(ju),qi(sb),qi(bb),qi(Xb)])}catch(e){Object(ur.b)(e)}}function*Yb(){try{const e=yield qi(Zb);yield $i(Gc.c),yield Qi(0),yield Xi(e)}catch(e){Object(ur.b)(e)}}var Qb=n(308),Jb=n(1225);function*eO(e){try{const{payload:t,promise:n}=e,{conversationId:a}=t;yield zi(Jb.b,a),n&&n.resolve()}catch(t){e.promise&&e.promise.reject(Object(as.a)(t)),Object(ur.b)(t)}}var tO=function*(){try{yield Xc(cr.t,eO)}catch(e){Object(ur.b)(e)}},nO=n(285),aO=n(338),oO=n(758),iO=n(674),cO=n(52),rO=n(501);function*sO(e){try{const{conversationId:t,chatMessage:n}=e.payload,a=Object($a.d)(yield Zi(M.h)),o=yield Zi(M.c),i=Object(en.i)(o.conversations,t);if(i){const e=he()(i.defaultMessages,"id"),o=sr.a.getId(n);if(e.includes(o))return void(yield Fi({type:cr.V,payload:{conversationId:t,lastReadMessageId:o}}));if(function(e,t){return!(sr.a.getSender(e)===t)&&!Object(dr.j)(e)}(n,a)){const{isConversationPath:e,conversationId:n}=yield Zi(aO.b),a=yield Zi(M.b),{isMinimized:o}=a,c=Object(Qb.b)(),r=!!e,s=!it()(i);(Object(G.E)()?s&&t===n:s)&&(yield Fi({type:cr.W,payload:{conversationId:t,count:1}}),o&&!r&&c.push(`/conversation/${t}`))}}}catch(t){Object(ur.b)(t)}}function*lO(){try{yield Xc(cr.K,sO)}catch(e){Object(ur.b)(e)}}function*dO(e){try{var t;const n=Object(fe.a)(),{url:a}=Object(iO.a)({url:Object(nO.e)(e.payload.url)},{location_url:Object(cO.b)()});n?n.open(a,e.payload.target):window.open(a),null===(t=e.promise)||void 0===t||t.resolve()}catch(a){var n;null===(n=e.promise)||void 0===n||n.reject(),Object(ur.b)(a)}}function*uO(){try{yield Xc(cr.Y,dO)}catch(e){Object(ur.b)(e)}}function*bO(e){try{var t;window.open(Object(nO.c)(e.payload.phoneNumber)),null===(t=e.promise)||void 0===t||t.resolve()}catch(a){var n;null===(n=e.promise)||void 0===n||n.reject(),Object(ur.b)(a)}}function*OO(){try{yield Xc(cr.u,bO)}catch(e){Object(ur.b)(e)}}function*fO(e){try{const{surveyUrl:t,shouldReplace:n,conversationId:a}=e.payload,o=Object(Qb.b)(),i=Object(G.F)()||Object(G.K)()?`${t}&showCancel=true`:t,c=`/survey/${encodeURIComponent(`${i}&hideThankYouPage=true`)}`,r=a?`/conversation/${a}${c}`:c;return n?o.replace(c):o.push(r)}catch(t){return void Object(ur.b)(t)}}function*pO(){try{yield Xc(cr.db,fO)}catch(e){Object(ur.b)(e)}}function*vO(e){try{const{deleted:n,closed:a,surveyUrl:o,conversationId:i}=e.payload;try{if(n||a){const e=Object(Qb.b)(),{matchedConversationId:t}=Object(oO.c)(e.location.pathname,e.location.hash),a=n&&!!i&&t===i&&!Object(G.F)();o?yield Fi(Object(fr.p)({surveyUrl:o,shouldReplace:a,conversationId:i})):a&&e.goBack()}}catch(t){Object(ur.b)(t)}}catch(t){Object(ur.b)(t)}}function*yO(){try{yield Xc(cr.n,vO)}catch(e){Object(ur.b)(e)}}function*jO(){try{const{payload:{shouldContinueSession:e,clientContext:t}}=yield $i(Gc.a),n=Object(Qb.b)(),a=n.location.pathname.includes("logout")?n.entries[n.entries.length-(e?2:1)]:n.location,o=Object(rO.b)(),{matchedConversationId:i,isConversationPath:c,isDefiniteConversation:r}=Object(oO.c)(a.pathname,a.hash);if(c&&r){const e=Object(G.f)(i);if(e){const n=Object(G.e)(e),a=yield zi(cO.a);yield Fi(Object(fr.a)({caseId:e,conversationId:n,appContext:a,isPhone:o,clientContext:t}))}else{const e=yield Zi(M.c);(i?Object(en.i)(Object(en.t)(e),i):void 0)||(yield Fi(Object(fr.b)({conversationId:i,isPhone:o})))}}e&&(yield Fi(Object(fr.i)()))}catch(e){Object(ur.b)(e)}}function*gO(e){try{const t=yield Zi(M.h),n=Object($a.d)(t),a=yield Zi(M.c),o=((e,t,n)=>{if(n)return[{conversationId:n,count:Object(os.j)(e[n],t)}];return Q()(e,((e,n)=>{const a=Object(os.j)(n,t);return e.push({conversationId:n.id,count:a}),e}),[])})(Object(en.t)(a).byId,n,e);it()(o)||(yield Fi({type:cr.U,payload:o}))}catch(t){console.warn(t)}}function*hO(){try{if(Object(G.E)()){if(Object(G.M)())for(;;){yield $i(cr.j);const{conversationId:e}=yield Zi(aO.b);yield zi(gO,e)}if(Object(G.J)()||Object(G.I)()){yield Hi([$i(cr.y),$i(cr.z),$i(cr.B),$i(cr.C)]);const{conversationId:e}=yield Zi(aO.b);return void(yield zi(gO,e))}return}if(Object(G.J)()||Object(G.I)())return yield Vi([Hi([$i(cr.y),$i(cr.B),$i(cr.z),$i(cr.C)]),$i(cr.j)]),void(yield zi(gO));if(Object(G.O)()||Object(G.L)()||Object(G.M)())for(;;)yield $i(cr.j),yield zi(gO)}catch(e){Object(ur.b)(e)}}function*mO(){try{yield Vi([qi(jO),qi(lO),qi(uO),qi(OO),qi(tO),qi(pO),qi(yO),qi(hO)])}catch(e){Object(ur.b)(e)}}function*IO(e){let{action:t}=e;try{const e=t.payload;if((n=e).type!==gs.i&&n.type!==gs.j)return;const a=yield Zi(en.h),o=Object(en.f)(Object(en.A)(a));e.type===gs.i&&(yield zi(Ba.o,e.payload.contextId||o,e.payload.abortedProcessContext,[])),e.type===gs.j&&(yield zi(Ba.k,e.payload.contextId||o))}catch(a){Object(ur.b)(a)}var n}function*CO(e){try{const{conversationId:t,chatMessage:n}=e.payload,a=yield zi(Ba.f,t);if(a){const e=lr.a.getAttachment(sr.a.getMessagePayload(n));if(Object(qr.e)(sr.a.getSender(n))&&e&&Object(Ms.d)(e)){const e=sr.a.getId(n),o=a.messageIds;yield zi(Ba.o,t,a.context,[...o,e])}}}catch(t){Object(ur.b)(t)}}function*TO(e){try{const{conversationId:t,chatMessage:n}=e.payload,a=yield zi(Ba.f,t);a&&(yield zi(Ba.o,t,a.context,[]))}catch(t){Object(ur.b)(t)}}function*EO(){try{yield Xc(cr.K,CO)}catch(e){Object(ur.b)(e)}}function*xO(){try{yield Xc(cr.N,TO)}catch(e){Object(ur.b)(e)}}function*SO(e){try{const t=yield zi(Ba.f,e);t&&(yield Vi(t.messageIds.map((e=>zi(Or.n,e)))),yield zi(Or.t,{context:t.context,conversationId:e}),yield zi(Ba.k,e))}catch(t){Object(ur.b)(t)}}function*_O(e){try{const{results:t}=e.payload.conversationResponse;yield Vi(t.map((e=>zi(SO,e.id))))}catch(t){Object(ur.b)(t)}}function*AO(){try{yield Xc(cr.j,_O)}catch(e){Object(ur.b)(e)}}function*PO(){try{yield Vi([qi(EO),qi(xO),qi(AO)])}catch(e){Object(ur.b)(e)}}var RO=n(355),wO=n.n(RO),NO=n(250),MO=n.n(NO),LO=n(286),kO=n.n(LO),DO=n(523),UO=n.n(DO),BO=n(675);const GO=e=>Object(is.d)(Object(is.c)(e));function*$O(){try{const e=Object($a.e)(yield Zi($a.i));return Object.assign(Object.assign({},Object(cO.a)()),{locale:e})}catch(e){return void Object(ur.b)(e)}}function*FO(e){let{initialMessages:t,conversationContext:n,createCase:a,additional:o,assignToUser:i,conversationId:c,applicationConfig:r}=e;try{const e=yield Zi($a.i),s=Object($a.d)(e);let l,d;const u=kO()(t,(e=>{const t=MO()(e)?e:e.message;return!it()(UO()(t))}));if(it()(u))if(it()(t)&&Ie()(t))d=!0,l=[];else{const e=yield Zi(en.h),t=Object(en.o)(e,Nt.g);l=Object(en.n)(t),d=Object(en.C)(t)}else{const e=(e=>e.map((e=>MO()(e)?{message:{text:e},isSentByUser:!1}:MO()(e.message)?Object.assign(Object.assign({},e),{message:{text:e.message}}):e)))(u),t=yield Ar();l=tr()(e.map(((e,n)=>{if(!e.isSentByUser)return e.message.text?Object(as.c)(e.message.text,c,`${n}`,e.message.disableManualResponse,e.message.readFromCreative):void 0;const{maskedText:a,maskedValues:o}=Object(BO.a)({text:e.message.text,maskingConfigs:r.maskingConfigs});return t.makeTextMessage({text:a||"",conversationId:c,sender:s,maskingDetails:o,disableManualResponse:e.message.disableManualResponse})}))),d=!0}const b=yield Zi(GO),O=Object(os.g)(b);yield Fi({type:cr.Q,payload:{conversationId:c,messages:l,conversationContext:Object.assign(Object.assign({},n),O),hasInitialItems:d,createCase:a,assignToUser:i,additional:o}})}catch(s){throw Object(ur.b)(s),s}}function*VO(e,t){try{yield zi(FO,e);const n=yield zi($O);yield Fi(Object(fr.l)({appContext:n,conversationId:e.conversationId,visiblePrompt:e.visiblePrompt})(t))}catch(n){throw Object(ur.b)(n),n}}var HO=n(744),WO=n(676),zO=n(389);const qO=e=>t=>t.type===cr.B&&tt()(t,"payload.conversationResponse.externalCaseId")===e,KO=e=>t=>t.type===cr.C&&tt()(t,"payload.externalCaseId")===e;function*XO(){try{const e=yield Zi(M.b),{isMinimized:t}=e;t&&(yield Fi({type:vo.d,payload:{}}))}catch(e){Object(ur.b)(e)}}function*ZO(e){const{payload:t,promise:n}=e;let a,o;try{let i=yield Zi(M.c),c=Object(en.t)(i);a=t.conversationId,o=t.externalCaseId;const r=Object(rO.b)();if(!a)if(Object(en.b)(c)||(yield $i(cr.j),i=yield Zi(M.c),c=Object(en.t)(i)),o){if(a=Object(en.d)(Object(en.A)(i),o),!a&&i.conversations.hasMore){yield Fi(Object(fr.b)({externalCaseId:o,isPhone:r}));const[e,t]=yield Hi([$i(qO(o)),$i(KO(o))]);if(t)throw t.payload.error;a=tt()(e,"payload.conversationResponse.id"),i=yield Zi(M.c),c=Object(en.t)(i)}}else{const t=Object(en.A)(i),n=e.payload.fallbackConversationIdFilter;a=n?Object(en.e)(t,n):Object(en.f)(t)}if(!a)return null===n||void 0===n||n.reject(Bs.a.NOT_FOUND),null;const s=Object(Qb.b)(),{isConversationPath:l,matchedConversationId:d}=Object(oO.c)(s.location.pathname,s.location.hash),u=!!l,b=`/conversation/${a}`;let O=a,f=[];if(d!==a){const e=Object(G.f)(a);if(e){const t=Object(G.e)(e),n=Object(en.l)(c,e);if(O=t,!ad()(c.ids,n)){const n=yield zi($O),a=Object(G.g)();yield Fi(Object(fr.a)({caseId:e,conversationId:t,appContext:n,isPhone:r,clientContext:a})),f=[cr.y,cr.z]}}else ad()(c.ids,a)||(yield Fi(Object(fr.b)({conversationId:a,isPhone:r})),f=[cr.B,cr.C]);for(;!it()(f);){const[e,t]=yield Hi([$i(f[0]),$i(f[1])]);if(O===(tt()(e,"payload.conversationResponse.id")||tt()(t,"payload.conversationId"))){if(t)throw t.payload.error;break}}}t.silent||(u?s.replace(b):s.push(b),yield zi(XO)),null===n||void 0===n||n.resolve({conversationId:a})}catch(i){n?n.reject(Object(as.a)(i)):Object(ur.b)(i)}finally{(yield Bi(Ui,{}))&&n&&n.reject(Bs.a.UNEXPECTED_ERROR)}return a}function*YO(e,t){const{payload:{silent:n},promise:a}=t,o=`${Nt.g}_${wO()()}`;if(n){const n=yield Zi(M.d);yield zi(VO,{...t.payload,conversationId:o,applicationConfig:e,visiblePrompt:Object(WO.a)(n)},a)}else{yield zi(FO,{...t.payload,conversationId:o,applicationConfig:e});const n=yield zi(Qb.b),{isConversationPath:a}=Object(oO.c)(n.location.pathname,n.location.hash),i=`/conversation/new/${o}`;a?n.replace(i):n.push(i),yield zi(XO)}return o}function*QO(e,t){const{payload:{silent:n,additional:a},promise:o}=t;try{var i;const c=null===(i=e.otherConfigs)||void 0===i?void 0:i.settings;let r=yield Zi(M.g),s=yield Zi(Ot.b);const l=(e,t)=>tt()(e,t),d=null===a||void 0===a?void 0:a.actionType;if(d===Nt.b.VIDEO_CALL||d===Nt.b.AUDIO_CALL){if(!Object(hu.c)(e))throw Bs.a.NOT_ACCEPTABLE;const t=Object(ft.c)(s);if(!it()(t))throw yield zi(ZO,Object(HO.a)({conversationId:t.conversationId,silent:n})),Bs.a.LIMIT_REACHED}let u;const{isLocked:b}=Object(aO.d)({chatState:Object(M.b)(r),chatConversationsState:Object(M.c)(r),customizationSettings:c,getLocaleMessage:l});if(b){if(!d)throw n||(u=yield zi(ZO,Object(HO.a)({}))),Bs.a.LIMIT_REACHED;{const e=Object(Iu.c)(d===Nt.b.AUDIO_CALL?Gu.a.AUDIO:Gu.a.VIDEO);if(u=yield zi(ZO,Object(HO.a)({conversationId:u,silent:n,fallbackConversationIdFilter:e})),!u)throw Bs.a.NOT_FOUND}}else u=yield zi(YO,e,t);if((d===Nt.b.VIDEO_CALL||d===Nt.b.AUDIO_CALL)&&u){const{creativeId:e,interceptId:t,interceptTargetId:n,sourceButtonId:i,sourceType:c}=a||{};for(yield Fi(Object(fr.f)({isPhone:Object(rO.b)(),conversationId:u,deflectionType:d===Nt.b.AUDIO_CALL?"AUDIO_CHAT":"VIDEO_CHAT",source:{type:c,creativeId:e,interceptId:t,interceptTargetId:n,sourceButtonId:i}}));;){const[e,t]=yield Hi([$i(Cu.x),$i(Cu.e)]);if(t){null===o||void 0===o||o.reject(Bs.a.UNEXPECTED_ERROR);break}if(s=yield Zi(Ot.b),s.outgoing.state===pt.g.WAITING&&(u=e.payload.conversationId,e.payload.hasInitiateSucceeded)){null===o||void 0===o||o.resolve({conversationId:u});break}}}}catch(c){o&&o.reject(Object(as.a)(c)),Object(ur.b)(c)}}function*JO(){try{const{payload:{applicationConfig:e}}=yield $i(Gc.a);yield Xc(zO.b,QO,e)}catch(e){Object(ur.b)(e)}}function*ef(){try{yield function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return qi.apply(void 0,[qc,e,t].concat(a))}(zO.a,ZO)}catch(e){Object(ur.b)(e)}}var tf=n(388),nf=n.n(tf),af=n(780);const of={[Tr.b.PROGRESS_BAR]:e=>e.status===af.a.ABORTED||e.status===af.a.ERROR},cf=e=>{var t;const n=null===(t=e.messagePayload)||void 0===t?void 0:t.attachment,a=n&&of[n.type];return a&&a(n)};class rf{constructor(){this.queueItems=[]}isEmpty(){return 0===this.queueItems.length}put(e){const t=nf()(this.queueItems,(t=>sr.a.getId(e.message)===sr.a.getId(t.message)));-1!==t&&this.queueItems.splice(t,1),this.queueItems.push(e)}take(){return this.queueItems.shift()}flush(){return this.queueItems}}const sf="EXTERNAL_MESSAGE_SEND";function*lf(e){try{const{message:t,externalMessageId:n}=e,a=yield zi(jr,t);a&&(yield Fi({type:sf,payload:{id:n,message:a}}))}catch(t){Object(ur.b)(t)}}function*df(e){try{for(;;){const t=yield $i(e);cf(t.message)||(yield zi(lf,t))}}catch(t){Object(ur.b)(t)}}let uf;function*bf(e,t){var n,a,o,i,c,r,s,l,d;try{uf||(uf=yield zi(yc,new rf),yield Ki(df,uf));const u=yield Zi($a.i),b=Object($a.d)(u),O=e.message.text,f=null!==(n=e.message.mediaAttachments)&&void 0!==n?n:[],p=e.isSentByUser?Object(BO.a)({text:O,maskingConfigs:null===t||void 0===t?void 0:t.maskingConfigs}):{text:O},v=yield Ar();let y=yield Zi(en.h),j=Object(en.f)(Object(en.A)(y));e.contextId||j||Object(en.t)(y).loaded||(yield Fi(Object(fr.i)()),yield $i(cr.j),y=yield Zi(en.h),j=Object(en.f)(Object(en.A)(y)));const g=v.makeDynamicMessage({externalMessageId:e.id,messageId:e.sprMsgId,messagePayload:Object.assign(Object.assign({},e.message),{text:null!==(a=p.maskedText)&&void 0!==a?a:p.text,mediaAttachments:f,maskingDetails:p.maskedValues}),conversationId:e.contextId||j,messageContext:e.messageContext,sender:e.isSentByUser?b:Nt.d});if(!g)return;let h=g,m=g,I=[],C=[];if(f.length){m=yield zi(xr,{chatMessage:g,attachments:f,conversationId:g.conversationId,maximumContentLength:null!==(o=null===t||void 0===t?void 0:t.maximumContentLength)&&void 0!==o?o:15728640});const e=null!==(c=null===(i=m.messagePayload)||void 0===i?void 0:i.mediaAttachments)&&void 0!==c?c:[];I=e.filter((e=>e.error)),C=e.filter((e=>!e.error)),h=Object.assign(Object.assign({},m),{messagePayload:Object.assign(Object.assign({},m.messagePayload),{mediaAttachments:C})})}const T={externalMessageId:e.id,message:h};!e.sprMsgId||cf(g)?yield qi(lf,T):yield Fi(uf,T);const E=yield $i(sf),{id:x,message:S}=E.payload,_=Object(br.c)({previousAttachments:null!==(s=null===(r=m.messagePayload)||void 0===r?void 0:r.mediaAttachments)&&void 0!==s?s:[],failedAttachments:I,nextAttachments:null!==(d=null===(l=S.messagePayload)||void 0===l?void 0:l.mediaAttachments)&&void 0!==d?d:[]});return{id:x,message:Object.assign(Object.assign({},S),{messagePayload:Object.assign(Object.assign({},S.messagePayload),{mediaAttachments:_})})}}catch(u){return void Object(ur.b)(u)}}var Of=n(424);function*ff(e){let{action:t,applicationConfig:n}=e;try{if(t.payload.type!==gs.e)return;const e=yield zi(bf,t.payload.payload,n);if(!e)return void t.promise.reject(Of.a.INCORRECT_PAYLOAD);const{id:a,message:o}=e;yield Fi(Object(fr.z)({id:a,conversationId:null===o||void 0===o?void 0:o.conversationId,messageId:null===o||void 0===o?void 0:o.id})),t.promise.resolve({messagePayload:e})}catch(a){t.promise.reject(Object(as.a)(a)),Object(ur.b)(a)}}function*pf(e){let{action:t}=e;try{if(t.payload.type!==gs.d)return;const{payload:e}=t.payload,n=(yield Ar()).makeDynamicMessage({externalMessageId:e.id,messagePayload:{events:zr()(e.event)},conversationId:e.contextId,sender:Nt.d});if(!n)return;yield zi(jr,n)}catch(n){Object(ur.b)(n)}}var vf=n(882),yf=n.n(vf),jf=n(896),gf=n.n(jf);const hf=/\$\{(\w+)\}/g,mf=(e,t)=>{const n=Object.keys(t);return gf()(e,hf,((e,a)=>n.includes(a)?t[a]:e))},If=(e,t)=>{const{totalUnits:n,completedUnits:a,action:o,status:i}=t,c=e[`progress.${o}.${i}.title`];return mf(c,{completedUnits:a,totalUnits:n})},Cf=(e,t)=>{const{totalUnits:n,completedUnits:a,action:o,status:i}=t,c=e[`progress.${o}.${i}.description`];return mf(c,{completedUnits:a,totalUnits:n})};class Tf{constructor(){this.queueItems=[]}isEmpty(){return 0===this.queueItems.length}put(e){const t=nf()(this.queueItems,(t=>e.action.payload.contextId===t.action.payload.contextId));-1!==t&&this.queueItems.splice(t,1),this.queueItems.push(e)}take(){return this.queueItems.shift()}flush(){return this.queueItems}}const Ef=(e,t)=>`${e}_${t}`,xf=yf()((()=>{const e={};return{get:t=>e[t],set:(t,n)=>{e[t]=n},remove:t=>{delete e[t]}}}));function*Sf(e){for(;;)try{const{action:n,localeData:a}=yield $i(e),{payload:{contextId:o,id:i,data:c,progressContext:r}}=n,s={type:Tr.b.PROGRESS_BAR,title:If(a,c),description:Cf(a,c),progress:c.progress,status:c.status,action:c.action,enableCancel:c.enableCancel,enableRetry:c.enableRetry},l={attachment:s,disableManualResponse:c.disableManualResponse},d=yield zi(bf,{contextId:o,id:i,sprMsgId:xf().get(Ef(o,s.action)),message:l,messageContext:r});if(!d)return void n.promise.reject(Of.a.INCORRECT_PAYLOAD);const{id:u,message:b}=d;yield Fi(Object(fr.A)({id:u,conversationId:null===b||void 0===b?void 0:b.conversationId,messageId:null===b||void 0===b?void 0:b.id})),n.promise.resolve({data:{id:i,conversationId:null===b||void 0===b?void 0:b.conversationId,messageId:null===b||void 0===b?void 0:b.id}}),(t=s).status!==af.a.COMPLETED&&(t.status!==af.a.ABORTED&&t.status!==af.a.ERROR||t.enableRetry)?xf().set(Ef(o,s.action),null===b||void 0===b?void 0:b.id):xf().remove(Ef(o,s.action))}catch(n){Object(ur.b)(n)}var t}let _f;function*Af(e){let{action:t,localeData:n}=e;try{if(t.payload.type!==gs.g)return;_f||(_f=yield zi(yc,new Tf),yield Ki(Sf,_f)),yield Fi(_f,{action:Object.assign(Object.assign({},t.payload),{promise:t.promise}),localeData:n})}catch(a){Object(ur.b)(a)}}function*Pf(e,t,n){try{yield Vi([zi(ff,{action:n,applicationConfig:t}),zi(pf,{action:n}),zi(Af,{action:n,localeData:e}),zi(IO,{action:n})])}catch(a){Object(ur.b)(a)}}function*Rf(e,t,n){try{e&&(yield Xc(e,Pf,t,n))}catch(a){Object(ur.b)(a)}}function*wf(){try{const{payload:{applicationConfig:t}}=yield $i(Gc.a),n=yield Yi(cr.E);let a;for(;;)try{const{payload:{data:e}}=yield $i(Zr.b);a&&(yield Xi(a)),a=yield qi(Rf,n,e,t)}catch(e){Object(ur.b)(e)}}catch(e){Object(ur.b)(e)}}var Nf=n(521);function*Mf(){try{yield zi(Nf.d.emit,{type:Nf.a})}catch(e){Object(ur.b)(e)}}function*Lf(){yield Xc(vo.f,Mf)}var kf=n(656);function*Df(e,t){try{if(!e.enableLiveChatSessionTokenAccess)return void t.promise.reject(Bs.a.NOT_SUPPORTED);const n=yield zi(kf.a);t.promise.resolve(n)}catch(n){t.promise.reject(Object(as.a)(n)),Object(ur.b)(n)}}function*Uf(){try{const{payload:{applicationConfig:e}}=yield $i(Gc.a);yield Xc(vo.k,Df,e)}catch(e){Object(ur.b)(e)}}var Bf=n(526),Gf=n(473);function*$f(e,t){let{payload:n,promise:a}=t;try{if(!it()(n))switch(n.landingScreen){case Ut.a.KNOWLEDGE_BASE_LIST:{var o,i,c;const t=null!==(o=null===(i=e.cardConfigs)||void 0===i||null===(c=i[0])||void 0===c?void 0:c.cards)&&void 0!==o?o:e.cards,n=Object(Qb.b)(),r=null===t||void 0===t?void 0:t.find((e=>e.type===Gf.a.KNOWLEDGE_BASE)),s=$t(n.location.pathname);if(!r)return void a.reject({error:Bs.a.NOT_FOUND});s!==Ut.a.KNOWLEDGE_BASE_LIST&&n.push(Bf.b);break}default:return void a.reject({error:Bs.a.NOT_FOUND})}Object(G.Q)()&&(yield Fi({type:vo.d,payload:{}})),a.resolve(void 0)}catch(r){Object(ur.b)(r),a.reject({error:Bs.a.UNEXPECTED_ERROR})}}function*Ff(){try{const{payload:{applicationConfig:e}}=yield $i(Gc.a);yield Xc(vo.o,$f,e)}catch(e){Object(ur.b)(e)}}const Vf="LOCK_CONVERSATIONS",Hf="UNLOCK_CONVERSATIONS";function Wf(e){return e.type===Vf||e.type===Hf}function*zf(e){try{yield Vi(e.filter(Wf).map((e=>Fi(e))))}catch(t){Object(ur.b)(t)}}function*qf(e){try{const{events:t}=e.payload;yield zi(zf,t)}catch(t){Object(ur.b)(t)}}function*Kf(){try{yield Xc(Ps.j,qf)}catch(e){Object(ur.b)(e)}}function*Xf(e){try{yield Qi(e),yield Fi(Object(vt.i)())}catch(t){Object(ur.b)(t)}}function*Zf(){let e;const t=yield Yi([Vf,Hf]);for(;;)try{const n=yield $i(t);e&&!e.isCancelled()&&(yield Xi(e)),n.type===Vf&&(e=yield qi(Xf,n.payload.waitTime),yield Fi(Object(vt.d)({waitTime:n.payload.waitTime,reason:n.payload.reason}))),n.type===Hf&&(yield Fi(Object(vt.i)()))}catch(n){Object(ur.b)(n)}}function*Yf(){try{yield Vi([qi(Zf)])}catch(e){Object(ur.b)(e)}}function*Qf(){try{yield Vi([qi(JO),qi(ef),qi(wf),qi(Lf),qi(Uf),qi(Ff),qi(Kf),qi(Yf)])}catch(e){Object(ur.b)(e)}}var Jf=n(344);const ep=e=>{const t=Object(en.t)(Object(M.c)(e));return{totalCount:Object(en.B)(t),byExternalCaseIds:Object(en.x)(t)}};function*tp(){try{let t=yield Zi(ep);for(;;)try{yield Hi({notificationReceived:$i(cr.W),notificationRead:$i(cr.V),notificationsReceived:$i(cr.U)});const e=yield Zi(ep);t.totalCount!==e.totalCount&&(Object(L.a)({topic:B.m,payload:{data:{count:e.totalCount,additional:{...it()(e.byExternalCaseIds)?{}:{byExternalCaseIds:e.byExternalCaseIds}}}}}),t=e)}catch(e){Object(ur.b)(e)}}catch(e){Object(ur.b)(e)}}function*np(e){try{Object(L.a)({topic:B.g,payload:{data:{type:e.payload.type,payload:{...e.payload.payload,userAuthToken:yield Object(Ba.a)(Jf.a.getAppId(Object(On.a)()))}}}})}catch(t){Object(ur.b)(t)}}function*ap(){try{yield Xc(cr.F,np)}catch(e){Object(ur.b)(e)}}function op(e){try{Object(L.a)({topic:B.f,payload:{data:e.payload.payload},callback:e.payload.callback})}catch(t){Object(ur.b)(t)}}function*ip(){try{yield Xc(cr.D,op)}catch(e){Object(ur.b)(e)}}function*cp(){try{yield Vi([qi(tp),qi(ap),qi(ip)])}catch(e){Object(ur.b)(e)}}let rp;const sp=18e5;function*lp(e){for(;;)try{let t;yield $i(Ps.b),rp=Object(po.a)(),yield $i(Ps.a),t=Object(po.a)();(e||rp&&t-rp>=sp)&&(rp=void 0,yield Fi({type:Ps.k,payload:{}}))}catch(t){Object(ur.b)(t)}}function*dp(e){for(;;)try{let t,n;yield $i(oO.b),n=Object(po.a)(),yield $i(oO.a),t=Object(po.a)();(e||n&&t-n>=sp)&&(yield Fi({type:Ps.k,payload:{}}))}catch(t){Object(ur.b)(t)}}function*up(){try{const e=Object(rO.a)();yield Vi([qi(lp,e),qi(dp,e)])}catch(e){Object(ur.b)(e)}}function*bp(){try{for(;;)try{yield $i(vo.g);Object(G.P)()?Object(L.a)({topic:B.d}):yield Fi(Object(vt.b)())}catch(e){Object(ur.b)(e)}}catch(e){Object(ur.b)(e)}}function*Op(){try{for(;;)try{const e=yield $i(vo.n),{isMediaOpen:t}=e.payload;t?Object(L.a)({topic:B.i}):Object(L.a)({topic:B.h})}catch(e){Object(ur.b)(e)}}catch(e){Object(ur.b)(e)}}function*fp(){try{yield Vi([qi(bp),qi(Op)])}catch(e){Object(ur.b)(e)}}var pp=n(35),vp=n(559);function*yp(e){let{chatUser:t,newUser:n,customUser:a,sanitizedUserContext:o,promise:i}=e;try{const e=null===t||void 0===t?void 0:t.userId;if(!(e&&(!ro()(a)&&Object(qr.c)(e)||ro()(a)&&Object(qr.b)(n)&&!Object(qr.c)(e)||Object(qr.c)(e)&&Object(qr.g)(n,t))))return!1;const c=Yc()(Object(On.a)(),{userContext:{$merge:o},user:{$set:Object.assign(Object.assign({},Object(On.a)().user||{}),n||{})},customUser:{$set:a}});Object(On.e)(c);const{data:r}=yield zi(Kr.c,Object.assign(Object.assign(Object.assign({},t),n),{customContext:o,customUser:a}));return i.resolve({user:r}),yield Fi(Object(So.c)({action:Ft.a.USER_PROFILE_UPDATED})),yield Fi({type:Zr.e,payload:{users:[r]}}),!0}catch(c){throw Object(ur.b)(c),i.reject(c),c}}function*jp(e){try{const{user:t,userContext:n,customUser:a}=e.payload||{},o=Object($a.c)(yield Zi(Ot.h)),i=null===o||void 0===o?void 0:o.userId,c=Object(pp.a)(n);if(yield zi(yp,{chatUser:o,newUser:t,customUser:a,sanitizedUserContext:c,promise:e.promise}))return;const r=Yc()(Object(On.a)(),{userContext:{$set:c},user:{$set:t},customUser:{$set:a}});return Object(On.e)(r),void Object(vp.e)({shouldReboot:!0,shouldContinueSession:(!ro()(a)||!Object(qr.b)(t))&&!Object(qr.c)(i)})}catch(t){Object(ur.b)(t)}}function*gp(){try{yield Xc(lb.b,jp)}catch(e){Object(ur.b)(e)}}function*hp(e,t){try{yield Fi(Object(vt.j)(e,t))}catch(n){Object(ur.b)(n)}}function*mp(e,t,n){try{var a;const e=yield Zi(M.b),t=Object(N.g)(e),n=null===(a=Object($a.c)(yield Zi(Ot.h)))||void 0===a?void 0:a.userId;let o={};Jc()(t,((e,t)=>{o={...o,[t]:e.enabled}})),n&&(yield Object(Ba.p)(n,o))}catch(o){yield zi(hp,e,n),Object(ur.b)(o)}}function*Ip(){try{for(;;){const e=yield $i(vo.x),{userPreferenceKey:t,newValue:n,oldValue:a}=e.payload;yield zi(hp,t,n),yield zi(mp,t,n,a)}}catch(e){Object(ur.b)(e)}}function*Cp(){try{yield Vi([qi(gp),qi(Ip)])}catch(e){Object(ur.b)(e)}}function*Tp(){try{return jc((e=>{const t=()=>{e(Object(So.f)(!0))},n=()=>{e(Object(So.f)(!1))};return window.addEventListener("online",t),window.addEventListener("offline",n),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}))}catch(e){Object(ur.b)(e)}}function*Ep(){let e;try{for(e=yield zi(Tp);;){const t=yield $i(e);yield Fi(t)}}catch(t){Object(ur.b)(t)}finally{e&&e.close()}}function xp(){return jc((e=>{const t=Object(fe.d)();if(!t)return we.a;const n=()=>{const t=Object(fe.f)();t||e({type:Ps.b}),t&&e({type:Ps.a})};return t.document.addEventListener("visibilitychange",n),()=>{t.document.removeEventListener("visibilitychange",n)}}))}function*Sp(){let e;try{for(e=yield zi(xp);;){const t=yield $i(e);yield Fi(t)}}catch(t){Object(ur.b)(t)}finally{e&&e.close()}}var _p=n(827);function*Ap(e){try{const{ssoId:t,conversationId:n,messageId:a,ssoTimeout:o,hiddenIframeBasedSSO:i}=e.payload;i?yield Object(_p.b)({ssoId:t,conversationId:n,messageId:a}):yield Object(_p.d)({ssoId:t,conversationId:n,messageId:a,ssoTimeout:o}),e.promise&&e.promise.resolve(),Object(vp.e)({shouldReboot:!0,shouldContinueSession:!0})}catch(t){e.promise&&e.promise.reject()}}function*Pp(){try{yield Xc(Ps.c,Ap)}catch(e){Object(ur.b)(e)}}function*Rp(){try{yield Vi([qi(Pp)])}catch(e){Object(ur.b)(e)}}let wp=!0;function*Np(){try{for(;;)try{yield $i(vo.b),yield Fi({type:vo.c,payload:{}})}catch(e){Object(ur.b)(e)}}catch(e){Object(ur.b)(e)}}function*Mp(){try{for(;;)try{yield $i(vo.d),yield Fi({type:vo.e,payload:{}})}catch(e){Object(ur.b)(e)}}catch(e){Object(ur.b)(e)}}function*Lp(e){try{let t,n;wp=!1;const a=new Promise(((e,a)=>{t=e,n=a})),{idpId:o,additional:{hiddenIframeBasedSSO:i,ssoTimeout:c}={}}=e;yield Fi(Object(So.a)({ssoId:o,ssoTimeout:c,hiddenIframeBasedSSO:i})({resolve:t,reject:n})),yield a}catch(t){Object(ur.b)(t)}finally{yield qi(Mp),yield Fi({type:vo.d,payload:{}})}}function*kp(){try{const{payload:{applicationConfig:e,handshakeDetails:t}}=yield $i(Gc.a);if(Object(G.P)()||!t)return;const{ssoParams:n,shouldTriggerSSOBasedOnAppConfig:a,shouldTriggerSSOBasedOnAppSettings:o}=Object(_p.a)(t,e);if(!wp||!a&&!o)return void(yield qi(Mp));yield $i(vo.d),yield zi(Lp,n)}catch(e){Object(ur.b)(e)}}function*Dp(){try{yield Vi([qi(kp),qi(Np)])}catch(e){Object(ur.b)(e)}}var Up=n(321),Bp=n.n(Up),Gp=n(863),$p=n(1220),Fp=n(781),Vp=n(782),Hp=n(739);function*Wp(e){try{var t;const{type:n,buttonId:a,promptId:o}=e.payload,i=yield Zi(M.d),c=null===(t=Bp()(i,(e=>{let{item:t,type:n}=e;return n===Hp.a.PROMPT&&t.id===o})))||void 0===t?void 0:t.item;if(!c)return;n!==Vp.a.TRIGGERED&&(yield Fi(Object(Gp.a)(o)));const r=Bp()(c.buttons,(e=>e.id===a));n===Vp.a.ENGAGED&&(null===r||void 0===r?void 0:r.type)===Vp.b.URL&&r.value?window.open(Object(nO.e)(r.value)):n===Vp.a.ENGAGED&&((null===r||void 0===r?void 0:r.type)===Vp.b.OPEN_LAST_CONVERSATION?yield Fi(Object(HO.a)({})):(null===r||void 0===r?void 0:r.type)!==Vp.b.CLOSE&&(yield Fi(Object($p.a)({initialMessages:tr()([...he()(c.messages,(e=>{let{text:t,disableManualResponse:n=!1}=e;return{message:{text:t,disableManualResponse:n,readFromCreative:!0}}})),r?{isSentByUser:!0,message:r.label}:void 0]),createCase:!!tt()(c.additional,"createCase"),silent:!(!r||!Nt.b[r.type]||r.type===Nt.b.NEW_CONVERSATION),additional:{...rd()(c.additional,["interceptId","creativeId"]),interceptTargetId:a,clickedOnPrompt:!0,actionType:r&&Nt.b[r.type],sourceType:Nt.c.PROACTIVE_PROMPT}})()))),Object(L.a)({topic:B.k,payload:{data:{type:n,id:o,button:r}}})}catch(n){Object(ur.b)(n)}}function*zp(){try{yield Xc(Fp.b,Wp)}catch(e){Object(ur.b)(e)}}function*qp(e){try{const{type:t,conversationId:n}=e.payload;yield Fi(Object(Gp.a)(n)),t===Vp.a.ENGAGED&&(yield Fi({type:zO.a,payload:{conversationId:n}}))}catch(t){Object(ur.b)(t)}}function*Kp(){try{yield Xc(Fp.a,qp)}catch(e){Object(ur.b)(e)}}var Xp=n(54),Zp=n.n(Xp),Yp=n(774);function*Qp(){try{const{appId:e}=Object(On.a)();yield zi(Yp.a.remove,e)}catch(e){Object(ur.b)(e)}}function*Jp(e){try{const{appId:t}=Object(On.a)(),n=yield zi(Yp.a.get,t);yield zi(Yp.a.set,t,Zp()(n,e.payload))}catch(t){Object(ur.b)(t)}}function*ev(){try{for(;;){const e=yield $i([wb.k,wb.o,wb.q,wb.p,wb.l,wb.m,wb.n]);Object(Ib.b)(null===e||void 0===e?void 0:e.payload)||(yield Fi({type:vo.r,payload:{}}));const t=yield $i([wb.j,wb.r,wb.i]);Object(Ib.b)(null===t||void 0===t?void 0:t.payload)||(yield Fi({type:vo.s,payload:{}}))}}catch(e){Object(ur.b)(e)}}function*tv(){try{yield Vi([qi(ev),Xc(wb.l,Jp),Xc([wb.i,wb.j],Qp)])}catch(e){Object(ur.b)(e)}}function*nv(){try{for(;;)yield $i([Cu.g,Cu.u,Cu.v]),yield Fi({type:vo.r,payload:{}}),yield $i([Cu.e,Cu.c,Cu.n,Cu.b]),yield Fi({type:vo.s,payload:{}})}catch(e){Object(ur.b)(e)}}function av(e){return e.type===sd.C}function ov(e){return e.type===sd.p}function*iv(e){try{const t=yield Zi(M.h),n=Object($a.c)(t);yield Vi(e.filter(av).map((e=>(n&&!Object(qr.f)(n)&&Nf.d.emit({type:Nf.a,payload:{shouldReboot:e.payload.shouldReboot}}),null))))}catch(t){Object(ur.b)(t)}}function*cv(e){try{yield Vi(e.filter(ov).map((e=>Fi({type:vo.j,payload:e.payload}))))}catch(t){Object(ur.b)(t)}}function*rv(e){try{const{events:t}=e.payload;yield Vi([zi(iv,t),zi(cv,t)])}catch(t){Object(ur.b)(t)}}function*sv(){try{yield Xc(Ps.j,rv)}catch(e){Object(ur.b)(e)}}const lv=e=>{let{notificationEvents:t,currentConversationId:n,isConversationPath:a}=e;return Object(G.E)()?t.filter((e=>((e,t,n)=>{const a=tt()(e.payload,"contextId")||tt()(e.payload,"conversationId");return!!t&&(!a||!n||n.startsWith(Nt.g)||a===n)})(e,a,n))):t},dv="@pusherEvents/RAW_NOTIFICATION_ACTION";function*uv(e){let{payload:t}=e;try{const{isConversationPath:e,conversationId:n}=yield Zi(aO.b),a=lv({notificationEvents:t,isConversationPath:e,currentConversationId:n});it()(a)||(yield Fi({type:Ps.j,payload:{events:a}}))}catch(n){Object(ur.b)(n)}}function*bv(){try{yield Xc(dv,uv)}catch(e){Object(ur.b)(e)}}var Ov=n(677);function fv(e){const t=()=>{Object(Ov.a)().disconnect().then((()=>{Object(k.a)("MQTT Client | Disconnected")})).catch((e=>{Object(Ls.h)(e)?console.warn(e):console.error(`MQTT Client | Disconnection Error ${e}`)}))};try{Object(Ov.a)().connect().catch((t=>{Object(Ls.h)(t)?console.warn(t):console.error(`MQTT Client | Connection Error ${t}`),e(null,{shouldInitPoller:!0})})),function(e){const t=Object(Ov.a)();t.on("error",(()=>{Object(k.a)("MQTT Client | Error"),e(null,{shouldInitPoller:!0})})),t.on("offline",(()=>{Object(k.a)("MQTT Client | Offline")})),t.on("reconnect",(()=>{Object(k.a)("MQTT Client | Reconnect")})),t.on("close",(()=>{Object(k.a)("MQTT Client | Closed")})),t.on("connect",(()=>{Object(k.a)("MQTT Client | Connect")}))}(e),Object(Ov.a)().subscribe().then((()=>{e(null,{pusherSubscribeSuccess:!0})})).catch((t=>{Object(Ls.h)(t)?console.warn(t):console.error(`MQTT client | Subscribe Error ${t}`),e(null,{shouldInitPoller:!0,pusherSubscribeSuccess:!1})})),Object(Ov.a)().on("message",((t,n)=>{try{const t=JSON.parse(n.toString());e(t)}catch(a){Object(ur.b)(a)}}))}catch(n){Object(ur.b)(n),t()}return t}var pv=n(1704),vv=n(1049);const yv=e=>`${Math.floor(e/1e3).toString(16)}0000000000000000`,jv=yf()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(po.a)(),t=`A_${yv(e)}`;return{set:e=>{t=e||t},get:()=>t}}));let gv=!0;const hv=e=>{let{getLastActiveTimeDifference:t,emitter:n}=e;const a=jv();return()=>function(e){return Object(rr.a)(this,void 0,void 0,(function*(){const{cursor:t,lastActiveDiff:n,active:a}=e||rs.a;return(yield Object(hr.c)(`${ks}/fetch-notifications${t?`?cursor=${t}`:""}`,{lastActiveDiff:n,active:a},{headers:{"x-chat-auto":!0},backoff:!0})).data}))}({cursor:a.get(),lastActiveDiff:t()}).then((e=>{const{results:t,afterCursor:o}=e;n(null,t,{isFirstCall:gv}),gv=!1,a.set(o)})).catch((()=>{pv.a.get(Object(nO.d)(`js/pingCDN.js?time=${Date.now()}`)).then((()=>{n(null,[],{})})).catch((e=>{n(Object(Ls.e)(e)?e:null,[],{})}))}))};function mv(e,t){let n;function a(){n&&n.stop()}try{n=function(e,t){const n=hv({getLastActiveTimeDifference:t.getLastActiveTimeDifference,emitter:e});return new vv.a(n,Object.assign(Object.assign({},t||{}),{pollInterval:15e3}))}(e,t),n.start()}catch(o){a()}return a}var Iv=n(1069);const Cv=(()=>{const e=new Set;return{add:t=>(e.size>500&&e.delete(e.values().next().value),e.add(t)),clear:()=>e.clear(),has:t=>e.has(t),delete:t=>e.delete(t)}})(),Tv={},Ev={[sd.v]:e=>({payload:{conversationId:Iv.a.getConversationId(e),userInitiated:Iv.a.getPayload(e).userInitiated,conversation:Iv.a.getPayload(e).conversation},type:sd.v}),[sd.w]:e=>{const t=Iv.a.getPayload(e).messageId,n={messageId:t,conversationId:Iv.a.getConversationId(e),chatMessage:Iv.a.getPayload(e).chatMessage};return Tv[t]?(delete Tv[t],{payload:n,type:sd.u}):{payload:n,type:sd.w}},[sd.r]:e=>{var t;const n=null===(t=Iv.a.getPayload(e).additional)||void 0===t?void 0:t.liveObserveAllowed;return{type:sd.r,payload:{conversationId:Iv.a.getConversationId(e),liveObserve:{allowed:!!n}}}},[sd.u]:e=>({payload:{conversationId:Iv.a.getConversationId(e),messageId:Iv.a.getPayload(e).messageId,chatMessage:Iv.a.getPayload(e).chatMessage},type:sd.u}),[sd.q]:e=>({payload:Object.assign(Object.assign({},Z()(e.payload.externalEvent,["type","action","conversationId","payload"])),{actionType:Iv.a.getPayload(e).externalEvent.action,externalParams:Iv.a.getPayload(e).externalEvent.payload,contextId:Iv.a.getConversationId(e)}),type:sd.q}),[sd.z]:e=>({type:Iv.a.getPayload(e).event.action,payload:Iv.a.getPayload(e).event.payload?JSON.parse(Iv.a.getPayload(e).event.payload):{}}),[sd.l]:e=>({payload:{conversationId:Iv.a.getConversationId(e),chatUserId:Iv.a.getPayload(e).chatUserId},type:sd.l}),[sd.j]:e=>({payload:{conversationId:Iv.a.getConversationId(e),sender:Iv.a.getSender(e),actionTime:Iv.a.getCreationTime(e),typingEvent:e.payload.typingEvent,senderChatUser:e.payload.senderChatUser},type:sd.j}),[sd.k]:e=>({payload:{conversationId:Iv.a.getConversationId(e),sender:Iv.a.getSender(e),actionTime:Iv.a.getCreationTime(e)},type:sd.k}),[sd.m]:e=>({payload:{conversationId:Iv.a.getConversationId(e),sender:Iv.a.getSender(e),closed:Iv.a.getPayload(e).closed,deleted:Iv.a.getPayload(e).deleted,caseNumber:Iv.a.getPayload(e).caseNumber,caseId:Iv.a.getPayload(e).caseId,expireAssetUntilLastMessageId:Iv.a.getPayload(e).lastMessageId,requestClientId:null===e||void 0===e?void 0:e.requestClientId,topics:Iv.a.getPayload(e).topics,startedByContext:Iv.a.getPayload(e).startedByContext},type:sd.m}),[sd.d]:e=>{const t=Iv.a.getPayload(e).audioOnly;return{payload:{videoConversationId:Iv.a.getPayload(e).videoConversationId,conversationId:Iv.a.getConversationId(e),participantInfos:Iv.a.getPayload(e).participantInfos,type:t?Gu.a.AUDIO:Gu.a.VIDEO},type:sd.d}},[sd.c]:e=>({payload:{conversationId:Iv.a.getConversationId(e),videoConversationId:Iv.a.getPayload(e).videoConversationId,videoParticipantId:Iv.a.getPayload(e).videoParticipantId},type:sd.c}),[sd.i]:e=>({payload:{conversationId:Iv.a.getConversationId(e),videoCallEnabled:Iv.a.getPayload(e).videoEnabled,audioCallEnabled:Iv.a.getPayload(e).audioEnabled},type:sd.i}),[sd.h]:e=>({payload:{conversationId:Iv.a.getConversationId(e),permissions:Iv.a.getPayload(e).permissions,videoConversationId:Iv.a.getPayload(e).videoConversationId},type:sd.h}),[sd.f]:e=>({payload:{conversationId:Iv.a.getConversationId(e),videoConversationId:Iv.a.getPayload(e).conversation.id,conversation:Iv.a.getPayload(e).conversation,participant:Iv.a.getPayload(e).participant},type:sd.f}),[sd.g]:e=>({payload:{conversationId:Iv.a.getConversationId(e),videoConversationId:Iv.a.getPayload(e).videoChatConversation.id,conversation:Iv.a.getPayload(e).videoChatConversation},type:sd.g}),[sd.b]:e=>({payload:{conversationId:Iv.a.getConversationId(e),videoConversationId:Iv.a.getPayload(e).videoConversationId},type:sd.b}),[sd.e]:e=>({payload:{conversationId:Iv.a.getConversationId(e),videoConversationId:Iv.a.getPayload(e).videoConversationId},type:sd.e}),[sd.o]:e=>({payload:{status:Iv.a.getPayload(e).status},type:sd.o}),[sd.n]:e=>({payload:{status:Iv.a.getPayload(e).payload.status},type:sd.n}),[sd.a]:e=>{const{action:t}=Iv.a.getPayload(e);return{payload:{additional:{conversationId:Iv.a.getConversationId(e),actionIdentifier:t.params.actionIdentifier},request:{url:t.params.httpUrl,method:t.params.httpMethod,payload:t.params.httpPayload,headers:t.params.httpHeaders},id:t.params.requestId,type:t.actionType},type:sd.a}},[sd.p]:e=>{const{request:t,id:n}=e.payload;return{payload:{request:t,id:n,type:t.type},type:sd.p}},[sd.C]:e=>{const{shouldReboot:t}=Iv.a.getPayload(e);return{payload:{shouldReboot:t},type:sd.C}},[sd.t]:e=>{const{chatMessage:t,index:n}=Iv.a.getPayload(e),a=Iv.a.getConversationId(e);if(Tv[t.id]&&Tv[t.id]>n)return;const o={chatMessage:Object.assign(Object.assign({},t),{messagePayload:Object.assign(Object.assign({},t.messagePayload),{isStreaming:!0})}),conversationId:a,messageId:t.id};return Tv[t.id]?(Tv[t.id]=n+1,{payload:o,type:sd.t}):(Tv[t.id]=n+1,{payload:o,type:sd.w})},[sd.A]:e=>({payload:Iv.a.getPayload(e),type:sd.A}),[sd.B]:e=>({payload:Iv.a.getPayload(e),type:sd.B}),[sd.x]:e=>({payload:Iv.a.getPayload(e),type:sd.x}),[sd.y]:e=>({payload:Iv.a.getPayload(e),type:sd.y})};function xv(e){try{const t=Iv.a.getMessageType(e),n=Ev[t];if(n)return n(e)}catch(t){Object(ur.b)(t)}}const Sv=e=>e.type===Ps.a||e.type===Ps.d&&tt()(e,"payload.status")===Us.a.CONNECTED;var _v=n(783);let Av=!1;const Pv=(()=>{let e=0,t=!0;return{getLastActiveTimeDifference:()=>t||Object(fe.f)()?0:Object(po.a)()-e,setAppActive:n=>{t=n,n||(e=Object(po.a)())}}})(),Rv=e=>e.type===sd.t,wv=e=>(t,n,a)=>{let{isFirstCall:o}=a;if(e(Object(So.f)(!t)),t)return;const i=n.filter((e=>!Cv.has(e.id))).map(xv).filter((e=>!!e)).filter((e=>o?!(e=>e.type===sd.f||e.type===sd.d)(e)&&!Rv(e):!Rv(e)));i.forEach((e=>_v.a.emit(e))),e(i)},Nv=(e,t)=>mv(wv(e),Object.assign(Object.assign({},t),{getLastActiveTimeDifference:Pv.getLastActiveTimeDifference}));function Mv(){return jc((e=>{const t=(e=>fv(((t,n)=>{if(ro()(null===n||void 0===n?void 0:n.pusherSubscribeSuccess)||e(Object(So.f)(!!(null===n||void 0===n?void 0:n.pusherSubscribeSuccess))),t&&!Cv.has(t.id)){const n=xv(t);n&&(_v.a.emit(n),Cv.add(t.id),e(n))}else(null===n||void 0===n?void 0:n.shouldInitPoller)&&e(Object(So.d)())})))(e);return()=>{t()}}))}function Lv(){return jc((e=>{const t=Nv(e);return()=>{t()}}))}function kv(){return jc((e=>{const t=(e=>{const t=wv(e),n=hv({getLastActiveTimeDifference:Pv.getLastActiveTimeDifference,emitter:function(){t(...arguments),e(pc)}});return n(),we.a})(e);return()=>{t()}}))}function Dv(){return jc((e=>{const t=Nv(e,{enableBackOff:!0});let n;return n=window.setTimeout((()=>{t()}),432e5),()=>{n&&window.clearTimeout(n),t()}}))}const Uv=e=>"type"in e&&e.type===Ps.d,Bv=e=>"type"in e&&e.type===Ps.h,Gv=e=>!Uv(e)&&!Bv(e);function*$v(e){try{yield Vi(e.filter(Uv).map((e=>Fi(e))))}catch(t){Object(ur.b)(t)}}function*Fv(e){try{const t=e.filter(Gv);it()(t)||(yield Fi((e=>({type:dv,payload:e}))(t)))}catch(t){Object(ur.b)(t)}}function*Vv(e){try{const t=Bp()(e,Bv);if(!t)return;(yield Zi($s))&&Object(fe.f)()&&(yield Fi(t))}catch(t){Object(ur.b)(t)}}function*Hv(e){try{const t=zr()(e);yield Vi([zi($v,t),zi(Fv,t),zi(Vv,t)])}catch(t){Object(ur.b)(t)}}function*Wv(){try{let t,n;try{Av=!0,t=yield zi(Dv),n=yield Xc(t,Hv),yield $i(Ps.a)}catch(e){}finally{Av=!1,t&&t.close(),n&&!n.isCancelled()&&(yield Xi(n))}}catch(t){Object(ur.b)(t)}}function*zv(){try{for(;;){yield $i(Ps.b);const[e,t]=yield Hi([$i(Ps.a),Qi(18e5)]);if(t)break}}catch(e){Object(ur.b)(e)}}function*qv(){try{let t,n;try{Av=!0,t=yield zi(Lv),n=yield Xc(t,Hv),yield zi(zv)}catch(e){}finally{Av=!1,t&&t.close(),n&&!n.isCancelled()&&(yield Xi(n))}}catch(t){Object(ur.b)(t)}}function*Kv(){try{for(;;){yield $i(Ps.b);const[e,t]=yield Hi([$i(Ps.a),Qi(108e5)]);if(t)break}}catch(e){Object(ur.b)(e)}}function*Xv(){try{let t,n;for(;;)try{yield Hi([$i(Ps.i),$i(Ps.a)]),t=yield zi(Mv),n=yield Xc(t,Hv),yield zi(Kv)}catch(e){}finally{t&&t.close(),n&&!n.isCancelled()&&(yield Xi(n))}}catch(t){Object(ur.b)(t)}}function*Zv(){try{for(yield $i(Ps.h);;)yield zi(qv),yield zi(Wv)}catch(e){Object(ur.b)(e)}}function*Yv(){try{const e=yield zi(kv);for(;;){const t=yield $i(e);yield qi(Hv,t)}}catch(e){Object(ur.b)(e)}}function*Qv(){try{for(;;)yield $i(Sv),Av||(yield zi(Yv))}catch(e){Object(ur.b)(e)}}function*Jv(){try{for(;;){const[e,t]=yield Hi([$i(Ps.a),$i(Ps.b)]);Pv.setAppActive(!!e)}}catch(e){Object(ur.b)(e)}}function*ey(){try{yield $i(Gc.c),Cv.clear()}catch(e){Object(ur.b)(e)}}function*ty(){try{yield Vi([qi(Qv),qi(Xv),qi(Zv),qi(Jv),qi(ey)])}catch(e){Object(ur.b)(e)}}function*ny(){try{yield qi(ty)}catch(e){Object(ur.b)(e)}}function*ay(){try{const{payload:{handshakeDetails:e}}=yield $i(Gc.a);jv(null===e||void 0===e?void 0:e.serverTimestamp),yield Vi([qi(ny),qi(bv)])}catch(e){Object(ur.b)(e)}}var oy=n(610);function iy(e){return e.type===sd.a}function*cy(e){try{yield Vi(e.filter(iy).map((e=>Fi({type:oy.a,payload:e.payload}))))}catch(t){Object(ur.b)(t)}}function*ry(e){try{const{events:t}=e.payload;yield Vi([zi(cy,t)])}catch(t){Object(ur.b)(t)}}function*sy(){try{yield Xc(Ps.j,ry)}catch(e){Object(ur.b)(e)}}const ly=new(n(729).a),dy=async e=>{const{method:t="GET",url:n="",payload:a=rs.a,headers:o=rs.a}=e;let i,c;try{const e="POST"===t||"PUT"===t?await ly[t.toLowerCase()](n,a,{withCredentials:!0,headers:o}):await ly[t.toLowerCase()](n,{withCredentials:!0,headers:o});i=e.request.status,c=e.request.responseText}catch(r){Object(ur.b)(r),Object(Ls.h)(r)?(i=r.request.status,c=r.request.responseText):(i=500,c="")}return{status:i,responseText:c}},uy=async e=>{const{status:t,responseText:n}=await dy(e.request);await Object(hr.c)("livechat/conversation/process-endpoint-response",{status:t,response:n,id:e.id})},by=async e=>{const{request:t,additional:n,id:a}=e,{status:o,responseText:i}=await dy(t);await Object(hr.c)(`/livechat/cart/on-add-to-cart/${n.conversationId}`,{status:o,responseText:i,actionIdentifier:n.actionIdentifier,requestId:a})},Oy=e=>Object(hr.c)("/livechat/cart/update-cart",e),fy=e=>Object(hr.c)("/livechat/cart/remove-from-cart",e);function*py(e){try{const{type:t,request:n,additional:a,id:o}=e.payload;"HTTP_REQUEST"===t&&(yield zi(by,{request:n,additional:a,id:o}))}catch(t){Object(ur.b)(t)}}function*vy(){try{yield Xc(oy.a,py)}catch(e){Object(ur.b)(e)}}var yy=n(558);const jy={presence:!0,format:{pattern:"^(?!\\s*$).+",message:"can only be non-empty string"}},gy={modifiedTime:{type:"number"},productItems:{array:{each:{sku:jy,productCategory:{type:"string"},quantity:{type:"number"},standardPrice:{type:"number"},standardCurrency:{type:"string"},title:{type:"string"},description:{type:"string"}}}}},hy={modifiedTime:{type:"number"},productItems:{array:{each:{sku:jy,quantity:{type:"number"}}}}};function*my(e){try{const n=(t=e.payload,Object(yy.a)(t,gy));if(n)return void Object(k.a)("Invalid payload passed to update cart, please check",n);yield zi(Oy,e.payload)}catch(n){Object(ur.b)(n)}var t}function*Iy(){try{yield Xc(oy.c,my)}catch(e){Object(ur.b)(e)}}function*Cy(e){try{const n=(t=e.payload,Object(yy.a)(t,hy));if(n)return void Object(k.a)("Invalid payload passed to remove from cart, please check",n);yield zi(fy,e.payload)}catch(n){Object(ur.b)(n)}var t}function*Ty(){try{yield Xc(oy.b,Cy)}catch(e){Object(ur.b)(e)}}function*Ey(){try{yield Vi([qi(sy),qi(vy),qi(Iy),qi(Ty)])}catch(e){Object(ur.b)(e)}}function*xy(e){try{const{type:t,request:n,id:a}=e.payload;"HTTP_REQUEST"===t&&(yield zi(uy,{request:n,id:a}))}catch(t){Object(ur.b)(t)}}function*Sy(){try{yield Xc(vo.j,xy)}catch(e){Object(ur.b)(e)}}const _y="CANCEL_ACTION_TYPE",Ay=e=>{let{sessionManagedByClient:t}=e,n=null;const a=e=>{let{sessionExpiryTimeInMinutes:t,sessionExpiryAlertTime:o}=e;try{Object(kf.b)(),n=setTimeout((()=>{a({sessionExpiryTimeInMinutes:t,sessionExpiryAlertTime:o})}),((e,t)=>{const n=60*e*1e3-t,a=60*e*1e3/3;return n<=a?Math.max(n-2e3,0):a})(t,o))}catch(i){Object(ur.b)(i)}};return{startHandler:t?function*(){try{for(;;){yield Fi(Object(So.c)({label:Ft.a.SESSION_ACTIVE.label,action:Ft.a.SESSION_ACTIVE}));const{cancel:e}=yield Hi({delay:Qi(15e3),cancel:$i(_y)});if(e)break}}catch(e){Object(ur.b)(e)}}:a,stopHandler:function*(){try{n&&clearTimeout(n),yield Fi({type:_y,payload:{}})}catch(e){Object(ur.b)(e)}}}};function*Py(){try{var e,t,n;const{payload:{applicationConfig:o}}=yield $i(Gc.a);let i=0;const c=o.autoExpireUserSessionTimeInMinutes,r=null===(e=o.otherConfigs.settings)||void 0===e||null===(t=e.autoExpiryConfig)||void 0===t?void 0:t.alertTime,s=null===(n=o.otherConfigs.settings)||void 0===n?void 0:n.sendSessionActiveEvent;if(!c&&!s)return;const{startHandler:l,stopHandler:d}=yield zi(Ay,{sessionManagedByClient:s});try{const e=yield Yi([vo.r,vo.s]);for(;;){(yield $i(e)).type===vo.r?(i||(yield qi(l,{sessionExpiryTimeInMinutes:c,sessionExpiryAlertTime:r})),i+=1):i-=1,i||(yield zi(d))}}catch(a){Object(ur.b)(a)}finally{yield zi(d)}}catch(a){Object(ur.b)(a)}}var Ry=n(19),wy=n.n(Ry),Ny=n(865),My=n(859),Ly=n(954),ky=n(1007),Dy=n(737),Uy=n(1211);var By=async e=>{let t,{applicationConfig:a,preloadedState:o,shouldContinueSession:i}=e;try{if(Dy.a.reset(),Object(My.e)(My.a.PENDING),t=await Object(Ly.c)(Object(On.a)()),Object(G.P)()){const{ssoParams:e,shouldTriggerSSOBasedOnAppConfig:n}=Object(_p.a)(t,a);if(n)return void await Object(_p.c)({ssoId:e.idpId})}await Object(Ly.e)({handshakeDetails:t}),Object(ky.b)(t.chatUser),a.hasPrompts&&n.e(67).then(n.bind(null,1703)).then((e=>{let{default:n}=e;n(a,t)})),Xy(null,{applicationConfig:a,handshakeDetails:t,chatSettings:Object(On.a)(),subscribeToEvent:Ny.c,preloadedState:o,shouldContinueSession:i})}catch(c){const e=Jf.a.getUserSettings(Object(On.a)());Object(Ls.g)(c)&&e&&Uy.a.getOneTimeToken(e)?Xy(c,{applicationConfig:a,handshakeDetails:t,chatSettings:Object(On.a)(),subscribeToEvent:Ny.c,preloadedState:o,shouldContinueSession:i}):await Object(Ny.b)(c)}};function*Gy(){try{const{payload:{applicationConfig:a}}=yield $i(Gc.a);for(;;)try{var e,t;const{payload:{shouldContinueSession:n}}=yield $i(Gc.b);let o;const i=null===(e=window.sprChatSettings)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.isSSOAuthorized;n&&!i&&(o=yield Zi(wy.a)),yield By({applicationConfig:a,preloadedState:o,shouldContinueSession:n})}catch(n){Object(ur.b)(n)}}catch(n){Object(ur.b)(n)}}function*$y(){try{yield Vi([qi(mO),qi(zp),qi(Kp),qi(Qf),qi(cp),qi(Ep),qi(Sp),qi(up),qi(Cp),qi(PO),qi(tv),qi(nv),qi(sv),qi(ay),qi(Ey),qi(Sy),qi(Py)])}catch(e){Object(ur.b)(e)}}function*Fy(){try{yield $i(Gc.c),Object(Ny.a)()}catch(e){Object(ur.b)(e)}}function*Vy(){try{yield Vi([qi(fp),qi(Gy),qi(Dp),qi(Rp),qi(Fy)])}catch(e){Object(ur.b)(e)}}function*Hy(){try{yield qi(Vy);const e=yield qi($y);yield $i(Gc.c),yield Qi(0),yield Xi(e)}catch(e){Object(ur.b)(e)}}function*Wy(){try{yield Vi([qi(Yb),qi(Hy)])}catch(e){console.log(e)}}const zy=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(new $c).setReducer(M.a).setSaga(Wy).setPreloadedState(a).setApplicationConfig(e).setHandshakeDetails(t).setChatSettings(n).build()};function qy(e){let{applicationConfig:t,store:n,history:a}=e;const o=Object(fe.d)().document,i=Object(G.P)()?G.b:G.c;c.a.render(Object(r.jsx)(wo,{applicationConfig:t,history:a,store:n}),i(o,pe.a))}function Ky(e,t){let{applicationConfig:n,handshakeDetails:a,chatSettings:o,subscribeToEvent:i}=t;const c=Object(Qb.b)({isUnauthorized:!!e}),r=zy(n,a,o);a&&Object(Ov.b)(a,n);i((t=>{e||r.dispatch(t)})),qy({applicationConfig:n,store:r,history:c})}function Xy(e,t){let{applicationConfig:n,handshakeDetails:a,chatSettings:o,subscribeToEvent:i,preloadedState:c,shouldContinueSession:r}=t;const s=Object(Qb.b)({isUnauthorized:!!e,reset:!r}),l=zy(n,a,o,c);Object(Ov.b)(a,n);i((t=>{e||l.dispatch(t)})),qy({applicationConfig:n,store:l,history:s}),r?s.goBack():s.go(s.entries.length-1)}},951:function(e,t,n){"use strict";n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return O})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return v}));var a=n(204),o=n(301),i=n(222),c=n(322);class r extends c.a{setHeight(e){return e?this.set("height",e):this}setWidth(e){return e?this.set("height",e):this}setUrl(e){return this.set("url",e)}setFileToken(e){return e?this.set("fileToken",e):this}setError(e){return e?this.set("error",e):this}setTitle(e){return e?this.set("title",e):this}}r.getUrl=e=>e.url;class s extends r{constructor(e){super(e),this.setType(a.b.IMAGE)}}class l extends r{constructor(e){super(e),this.setType(a.b.AUDIO)}setMimeType(e){return this.set("mimeType",e)}}class d extends r{constructor(e){super(e),this.setType(a.b.DOCUMENT)}setDocumentType(e){return this.set("documentType",e)}}class u extends r{constructor(e){super(e),this.setType(a.b.VIDEO)}setPreviewImageUrl(e){return this.set("previewImageUrl",e)}setPreviewImageToken(e){return e?this.set("previewFileToken",e):this}}function b(e){return(new s).setHeight(e.height).setWidth(e.width).setUrl(e.url).setTitle(e.title).build()}function O(e){return(new u).setUrl(e.url).setHeight(e.height).setWidth(e.width).setPreviewImageUrl(e.previewImageUrl).setTitle(e.title).build()}function f(e){return(new s).setHeight(e.height).setWidth(e.width).setUrl(e.previewImageUrl).build()}function p(e){return(new d).setUrl(e.url).setTitle(e.title).setDocumentType(e.documentType).build()}function v(e){return(new l).setUrl(e.url).setTitle(e.title).setMimeType(e.mimeType).build()}function y(e){let{chatMessage:t,results:n}=e;var c;const r=i.a.getMessagePayload(t),b=null===(c=o.a.getMediaAttachments(r))||void 0===c?void 0:c.map(((e,t)=>{var o,i;const c=n[t];let r;return e.type===a.b.IMAGE?r=new s(e):e.type===a.b.VIDEO?(r=new u(e),r.setPreviewImageToken(c.previewImageToken),r.setPreviewImageUrl(e.previewImageUrl)):r=e.type===a.b.AUDIO?new l(e):new d(e),r.setFileToken(c.token),r.setUrl(c.token?void 0:e.url),r.setError(c.error?null!==(i=null===(o=c.error.response)||void 0===o?void 0:o.status)&&void 0!==i?i:1:void 0),r.build()})),O=new o.a(r).setMediaAttachments(b).build();return new i.a(t).setMessagePayload(O).build()}u.getPreviewImageUrl=e=>e.previewImageUrl},954:function(e,t,n){"use strict";n.d(t,"e",(function(){return q})),n.d(t,"c",(function(){return Y})),n.d(t,"a",(function(){return Q})),n.d(t,"d",(function(){return J})),n.d(t,"b",(function(){return ee}));var a=n(245),o=n(31),i=n.n(o),c=n(221),r=n.n(c),s=n(11),l=n.n(s),d=n(1002),u=n.n(d),b=n(256),O=n(971),f=n(387),p=n(731),v=n(521);let y=!0;const j=(e,t)=>Object(a.a)(void 0,void 0,void 0,(function*(){let n,a;try{y&&(n=yield t())}catch(o){a=o}if(a)throw Object(f.g)(a)&&(Object(p.a)(e.url)?y=!1:v.d.emit({type:v.a,payload:{token:e.context.sessionToken}})),a;return n}));var g=n(499),h=n.n(g);var m=n(232);const I=(e,t)=>Object(a.a)(void 0,void 0,void 0,(function*(){var n;const a=Date.now(),o=yield t();let i;const c=(e=>{let{requestSentTime:t,requestCompletedTime:n}=e;return Math.floor((n+t)/2)})({requestSentTime:a,requestCompletedTime:Date.now()});if(Object(p.a)(e.url)?i=o.data.serverTimestamp:Object(p.b)(e.url)&&(i=null===(n=o.data.details)||void 0===n?void 0:n.SERVER_TIMESTAMP),h()(i)){const e=i-c;Object(m.c)(e)}return o}));var C=n(2),T=n(442),E=n(227),x=n(344);const S="x-chat-refresh-token",_="x-user-session-started";let A,P,R="",w=null,N=null,M=!1;const L=new Set,k=e=>{Object(T.l)(x.a.getAppId(Object(C.a)()),e),w&&clearTimeout(w),w=null},D=()=>{w&&clearTimeout(w),N&&clearTimeout(N),A=!1,v.d.emit({type:v.b}),R=""},U=e=>{let{response:t,error:n,context:o,request:i}=e;return Object(a.a)(void 0,void 0,void 0,(function*(){if(n)return;const{sessionExpiryAlertTime:e,sessionExpiryTime:a}=o,i=l()(t,["headers",S]);i&&(R=i,N||v.d.emit({type:v.b}),N&&(clearTimeout(N),N=null),N=void 0!==e&&void 0!==a?setTimeout((()=>{N=null,P||v.d.emit({type:v.c,payload:{targetDate:Object(m.a)()+e}})}),((e,t)=>Math.max(e-t-2e3,0))(a,e)):null,w||(k(R),w=void 0!==a?setTimeout((()=>k(R)),a/3):null))}))},B=function(){let{onClearUserSession:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return M||(M=!0,v.d.on((t=>{if(t.type===v.a){const n=!!t.payload&&L.has(t.payload.token);P||n||(R&&L.add(R),D(),null===e||void 0===e||e(t))}}))),(e,t)=>Object(a.a)(void 0,void 0,void 0,(function*(){const n=e.context;let a,o;P=Object(p.c)(e.url)&&A;try{a=yield t()}catch(i){o=i}if(Object(p.a)(e.url)&&!o&&Object(E.f)(l()(a,"data.chatUser")))D();else{l()(a,["headers",_])?(A=!0,l()(a,["headers",S])&&k(l()(a,["headers",S])),U({response:a,error:o,context:n,request:e})):Object(p.d)(e.url)?!o&&l()(a,["headers",S])&&k(l()(a,["headers",S])):n.sessionExpiryTime&&A&&(Object(p.c)(e.url)&&(P=!1,o||k(l()(a,["headers",S]))),U({response:a,error:o,context:n,request:e}))}if(o)throw o;return a}))};let G=!1;const $=e=>{let{wafScriptUrl:t}=e;return Object(a.a)(void 0,void 0,void 0,(function*(){if(t&&!G)return G=!0,(yield n.e(80).then(n.bind(null,1741))).default(t)}))};var F=n(443),V=n(818),H=n(52),W=n(3),z=n(32);const q=e=>Object(a.a)(void 0,void 0,void 0,(function*(){const{handshakeDetails:t,applicationConfig:n}=e,o=Object(a.c)(e,["handshakeDetails","applicationConfig"]);if(Object(b.d)(o),t&&(Object(b.d)({userId:t.chatUser.userId}),yield(e=>{let{wafScriptUrl:t}=e;return Object(a.a)(void 0,void 0,void 0,(function*(){const e=yield $({wafScriptUrl:t});e&&Object(b.e)([e])}))})({wafScriptUrl:t.wafScriptUrl})),n){const e=F.a.getAutoExpireUserSessionTimeInMinutes(n),t=l()(n,"otherConfigs.settings.autoExpiryConfig.alertTime");Object(b.d)({sessionExpiryTimeInMinutes:e,sessionExpiryAlertTime:t})}})),K=e=>Object(a.a)(void 0,void 0,void 0,(function*(){const t=e.appId,n=e.user,a=null===n||void 0===n?void 0:n.authToken;if(u()(n,"isSSOAuthorized")){const e=(e=>{if(e)try{return JSON.parse(atob(e.split(".")[1]))}catch(t){console.error("Unable to parse user token when isSSOAuthorized",e)}return z.a})(yield Object(T.a)(t));Object(E.c)(e.chatUserId)&&(yield Object(T.h)(t))}a&&(yield Object(T.h)(t),yield Object(T.l)(t,a))}));function X(e){return Object(a.a)(this,void 0,void 0,(function*(){const{appId:t,user:n,userContext:o,sessionOrigin:c,customUser:s,otp:d,locale:u,meetingId:b,deflectionToken:O}=e,f=r()(n,["authToken","isSSOAuthorized","oneTimeToken"]);let p,v;if(!!c){const{primaryToken:e,secondaryToken:n}=yield function(e){return Object(a.a)(this,void 0,void 0,(function*(){let t,n,a;try{t=yield Object(T.b)(e,V.d)}catch(c){console.warn(c)}try{n=yield Object(T.b)(e,V.a)}catch(c){console.warn(c)}try{a=yield Object(T.b)(e,V.b)}catch(c){console.warn(c)}const o=n||a||t;let i=a||t;return i=i===o?void 0:i,{primaryToken:o,secondaryToken:i}}))}(t);p=e,v=n}else p=yield Object(T.e)(t);const y={appId:t,oneTimeToken:l()(n,"oneTimeToken"),chatSessionToken:p,secondaryChatToken:v,page:Object(H.b)(),pageTitle:Object(H.d)(),referralPage:Object(H.e)(),timezone:Object(H.h)(),userAgent:Object(H.g)(),enforcedLocale:u,fallbackLocales:Object(W.b)(),meetingId:b,otp:d,customUser:s,deflectionToken:O};if(!i()(f)){const e=f,{id:t,hash:n,hashCreatedOn:o}=e,i=Object(a.c)(e,["id","hash","hashCreatedOn"]);Object.assign(y,{chatUser:Object.assign({userId:t},i),chatUserSignature:n,signatureCreationTimeInMillis:o})}return i()(o)||Object.assign(y,{customContext:o}),y}))}const Z=e=>Object(a.a)(void 0,void 0,void 0,(function*(){return Object(O.b)(e)})),Y=e=>Object(a.a)(void 0,void 0,void 0,(function*(){const t=yield Object(O.a)(yield X(e));var n;if(!!e.sessionOrigin&&(yield(n=e.appId,Object(a.a)(void 0,void 0,void 0,(function*(){try{yield Object(T.i)(n,V.d)}catch(e){console.warn(e)}try{yield Object(T.i)(n,V.b)}catch(e){console.warn(e)}})))),yield Object(T.l)(e.appId,t.chatSessionToken),!t.userPreferences){const e=yield Object(T.g)(t.chatUser.userId);return Object.assign(Object.assign({},t),{userPreferences:e})}return t})),Q=e=>Object(a.a)(void 0,void 0,void 0,(function*(){const[t,n]=yield Promise.allSettled([Z(e),Y(e)]);return{applicationConfigResolvedObject:t,handshakeResponseResolvedObject:n}})),J=e=>{window.sprDebugLog=function(){var t,n;(null===(n=null===(t=e.otherConfigs)||void 0===t?void 0:t.settings)||void 0===n?void 0:n.enableDebugMode)&&console.debug(...arguments)}},ee=e=>Object(a.a)(void 0,void 0,void 0,(function*(){const t=Object(C.a)();!function(){let{sessionExpiryParams:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(b.b)([B(e),j,I])}(e),yield K(t),yield q({getSessionToken:()=>Object(T.a)(t.appId),skin:"skin"in t?t.skin:void 0,appId:t.appId})}))},966:function(e,t,n){"use strict";var a=n(191),o=n.n(a),i=n(329),c=n.n(i),r=n(475),s=n(393),l=n(192);var d=e=>{const t=Object(r.a)(e.window,e.onResize),n=Object(a.useMemo)((()=>[...c()(e.resizeRefs||[]),t]),[t,e.resizeRefs]),i=Object(s.a)(...n);return Object(l.jsx)(o.a.Fragment,null,e.children(i))};t.a=d},967:function(e,t,n){"use strict";var a=n(197),o=n(191),i=n.n(o),c=n(216),r=n.n(c),s=n(198),l=n(291),d=n(194),u=n(192),b=n(203);const O=Object(d.a)("button",{target:"e1nedcse0"})("background-color:transparent;border-radius:4px;border:0;cursor:pointer;height:40px;position:relative;width:40px;:before{content:'';display:block;opacity:0;position:absolute;transition-duration:0.15s;transition-timing-function:cubic-bezier(0.4,0,0.2,1);bottom:0;left:0;right:0;top:0;background:none;border-radius:4px;box-sizing:border-box;transform:scale(0);transition-property:transform,opacity;}&:hover:before,&:focus:before{border:none;opacity:1;transform:scale(1);}",b.o,"{&:hover:before,&:focus:before{opacity:0;transform:scale(0);}&:active:before{border:none;opacity:1;transform:scale(1);}}"),f={name:"1qlyuxe",styles:"position:relative;height:12px;width:12px;flex:0 0 auto;"},p=i.a.forwardRef(((e,t)=>{const{iconName:n,imageUrl:i,iconCss:c,Icon:d,onLoad:b,...p}=e,v=Object(o.useMemo)((()=>c?[f,c]:[f]),[c]);return Object(u.jsx)(O,Object(a.a)({},p,{ref:t,className:r()("center-x-y",e.className)}),i?Object(u.jsx)(l.default,{src:i,css:v,"aria-hidden":!0,onLoad:b}):Object(u.jsx)(s.b,{alt:d,name:n,css:v,onLoad:b,"aria-hidden":!0,focusable:!1}),e.children)}));t.a=p}}]);