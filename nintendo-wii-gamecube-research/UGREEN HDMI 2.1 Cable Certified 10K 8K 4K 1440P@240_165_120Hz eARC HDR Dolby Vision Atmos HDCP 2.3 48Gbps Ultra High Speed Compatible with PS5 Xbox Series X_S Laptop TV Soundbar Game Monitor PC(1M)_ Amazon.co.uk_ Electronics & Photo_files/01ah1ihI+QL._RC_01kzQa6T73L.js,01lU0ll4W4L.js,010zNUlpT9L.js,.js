'use strict';(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("TurboCheckoutBaseAssets@accessibility_switch","TurboCheckout"):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("turbo-initiate-migration-switch").register("turbo-checkout-accessibility-switch",function(a){return{isEnabled:function(){return a.isEnabled()}}})});
/* ******** */
'use strict';(function(a){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,c=d?d("TurboCheckoutBaseAssets@buy_now_to_tango_switch","TurboCheckout"):b;c.guardFatal?c.guardFatal(a)(c,window):c.execute(function(){a(c,window)})})(function(a,b,d){a.when("turbo-configuration","buy-now-to-tango-switch-mobile","buy-now-to-tango-switch-desktop","buy-now-to-tango-switch-beta").register("buy-now-to-tango-switch",function(c,a,b,d){return{isEnabled:function(){return c.get(c.KEYS.IS_BUY_NOW_TO_TANGO_ENABLED)&&
(a.isGatingWeblabEnabled()||b.isGatingWeblabEnabled()||d.isGatingWeblabEnabled())}}});"use strict";a.when("turbo-checkout-page-ready").register("buy-now-to-tango-switch-mobile",function(){return{isGatingWeblabEnabled:function(){return!1}}});"use strict";a.when("buy-now-to-tango-switch-desktop-prime","buy-now-to-tango-switch-desktop-non-prime").register("buy-now-to-tango-switch-desktop",function(a,b){return{isGatingWeblabEnabled:function(){return a.isGatingWeblabEnabled()||b.isGatingWeblabEnabled()}}});
"use strict";a.when("turbo-checkout-page-ready").register("buy-now-to-tango-switch-desktop-prime",function(){return{isGatingWeblabEnabled:function(){return!1}}});"use strict";a.when("turbo-checkout-page-ready").register("buy-now-to-tango-switch-desktop-non-prime",function(){return{isGatingWeblabEnabled:function(){return!1}}});"use strict";a.when("turbo-checkout-page-ready").register("buy-now-to-tango-switch-beta",function(){return{isGatingWeblabEnabled:function(){return!1}}})});
/* ******** */
'use strict';(function(a){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,b=d?d("TurboCheckoutBaseAssets@chewbacca_migration_switch","TurboCheckout"):c;b.guardFatal?b.guardFatal(a)(b,window):b.execute(function(){a(b,window)})})(function(a,c,d){a.when("turbo-checkout-state-handler").register("turbo-chewbacca-migration-switch-non-prime-desktop",function(b){return{isGatingWeblabEnabled:function(){return!1},isShadowModeEnabled:function(){return!1}}});"use strict";a.when("turbo-checkout-state-handler").register("turbo-chewbacca-migration-switch-prime-desktop",
function(b){return{isGatingWeblabEnabled:function(){!1},isShadowModeEnabled:function(){return!1}}});"use strict";a.when("turbo-checkout-state-handler").register("turbo-chewbacca-migration-switch-non-prime-mobile",function(b){return{isGatingWeblabEnabled:function(){return!1},isShadowModeEnabled:function(){return!1}}});"use strict";a.when("turbo-checkout-state-handler").register("turbo-chewbacca-migration-switch-prime-mobile",function(b){return{isGatingWeblabEnabled:function(){return!1},isShadowModeEnabled:function(){return!1}}});
"use strict";a.when("turbo-checkout-state-handler","turbo-chewbacca-migration-switch-prime-mobile","turbo-chewbacca-migration-switch-non-prime-mobile","turbo-chewbacca-migration-switch-prime-desktop","turbo-chewbacca-migration-switch-non-prime-desktop").register("turbo-chewbacca-migration-switch",function(b,a,c,d,e){return{isGatingWeblabEnabled:function(){return a.isGatingWeblabEnabled()||c.isGatingWeblabEnabled()||d.isGatingWeblabEnabled()||e.isGatingWeblabEnabled()},isShadowModeEnabled:function(){return a.isShadowModeEnabled()},
isMobileGatingWeblabEnabled:function(){return a.isGatingWeblabEnabled()||c.isGatingWeblabEnabled()},isDesktopGatingWeblabEnabled:function(){return d.isGatingWeblabEnabled()||e.isGatingWeblabEnabled()}}})});
/* ******** */
'use strict';(function(c){var a=window.AmazonUIPageJS||window.P,d=a._namespace||a.attributeErrors,b=d?d("TurboCheckoutBaseAssets@chewbacca_migration_switch_beta","TurboCheckout"):a;b.guardFatal?b.guardFatal(c)(b,window):b.execute(function(){c(b,window)})})(function(c,a,d){c.when("turbo-checkout-state-handler","turbo-checkout-device-filter").register("turbo-chewbacca-migration-switch-beta",function(b,c){return{isGatingWeblabEnabled:function(){var a=b.getClientId();return!("primewardrobe"===a||"primestylist"===
a)&&c.isMashBeta()},isShadowModeEnabled:function(){return!1}}})});
/* ******** */
'use strict';(function(a){var g=window.AmazonUIPageJS||window.P,h=g._namespace||g.attributeErrors,b=h?h("TurboCheckoutBaseAssets@initiate_migration_switch","TurboCheckout"):g;b.guardFatal?b.guardFatal(a)(b,window):b.execute(function(){a(b,window)})})(function(a,g,h){a.when("turbo-initiate-migration-switch-mobile","turbo-initiate-migration-switch-desktop","turbo-chewbacca-migration-switch").register("turbo-initiate-migration-switch",function(b,a,f){return{isEnabled:function(){return b.isEnabled()||
a.isEnabled()},getWeblabInControlOnlyToTrigger:function(){return f.isMobileGatingWeblabEnabled()?b.getWeblabInControlOnlyToTrigger():f.isDesktopGatingWeblabEnabled()?a.getWeblabInControlOnlyToTrigger():[]}}});"use strict";a.when("turbo-chewbacca-migration-switch").register("turbo-initiate-migration-switch-mobile",function(b){return{isEnabled:function(){return!1},getWeblabInControlOnlyToTrigger:function(){return[]}}});"use strict";a.when("turbo-chewbacca-migration-switch","turbo-checkout-state-handler").register("turbo-initiate-migration-switch-desktop",
function(b,a){function f(){for(var e=a.getAdditionalWeblabAndTreatmentMap(),b={},d=0;d<c.length;d++)e.hasOwnProperty(c[d])&&(b[c[d]]=e[c[d]]);return b}var c=[];return{isEnabled:function(){var e;if(e=b.isGatingWeblabEnabled())a:{e=f();for(var a=0;a<c.length;a++)if(e.hasOwnProperty(c[a])&&("T1"===e[c[a]]||"T3"===e[c[a]])){e=!0;break a}e=!1}return e},getWeblabInControlOnlyToTrigger:function(){for(var a=f(),b={},d=0;d<c.length;d++)if(a.hasOwnProperty(c[d])&&"C"===a[c[d]]){b[c[d]]=a[c[d]];break}return b}}})});
/* ******** */
'use strict';(function(a){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,b=d?d("TurboCheckoutBaseAssets@shopping_portal_switch","TurboCheckout"):c;b.guardFatal?b.guardFatal(a)(b,window):b.execute(function(){a(b,window)})})(function(a,c,d){a.when("turbo-checkout-state-handler","turbo-checkout-page-ready").register("turbo-shopping-portal-switch",function(b){return{isShoppingPortalEnabled:function(){var a=b.getClientId();return!("primewardrobe"===a||"primestylist"===a)}}})});
/* ******** */
'use strict';(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("TurboCheckoutBaseAssets@tbyb_shopping_portal_switch","TurboCheckout"):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("turbo-checkout-page-ready").register("turbo-tbyb-shopping-portal-switch",function(){return{isTBYBShoppingPortalEnabled:function(){return!0}}})});
/* ******** */
'use strict';(function(h){var q=window.AmazonUIPageJS||window.P,y=q._namespace||q.attributeErrors,c=y?y("TurboCheckoutBaseAssets@confirm_initiate_removal","TurboCheckout"):q;c.guardFatal?c.guardFatal(h)(c,window):c.execute(function(){h(c,window)})})(function(h,q,y){h.when("A","turbo-view-adapter","turbo-checkout-view-state","turbo-checkout-eligible-state","turbo-checkout-content-loader","turbo-checkout-utils","turbo-checkout-weblab-allocation","turbo-checkout-weblab-trigger","turbo-checkout-csm",
"turbo-checkout-state-handler","turbo-checkout-device-filter","turbo-checkout-ajax-wrapper","turbo-checkout-page-visibility-manager","turbo-checkout-counter","turbo-checkout-prefetcher","turbo-checkout-prefetch-timer","turbo-checkout-buy-now-button","turbo-checkout-signin-controller","buy-now-to-tango-weblab-trigger","turbo-checkout-auto-open","turbo-checkout-urls","turbo-checkout-ref-tagger","turbo-configuration","turbo-checkout-event-verification","turbo-checkout-eligibility-aggregator","confirm-removal-weblab",
"turbo-checkout-page-ready").register("turbo-checkout-controller",function(c,d,h,t,m,C,k,D,e,g,E,F,q,G,H,y,r,u,w,z,J,K,A,Z,L,M){function N(){r.bindTurboClickEvent();c.off("turbo:checkout:dimmer:clicked");c.on("turbo:checkout:dimmer:clicked",function(a){a()})}function n(a,l){C.logDebug("turbo-checkout-controller",a,l)}function T(a,l){O();a||(l===K.TAGS.ROTATION&&e.logCount("turboCheckoutDeviceRotated"),d.close({reason:l}))}function B(){n("Handling signin success");b()}function a(){n("Handling buy now button click");
b();return!0}function b(){U=setTimeout(f,2E4);v=e.createScope();v.markClick();x="loading";Q=!1;y.checkTimeout();G.incrementSheetOpenedCounter();d.show()}function f(){e.logCount("turboCheckoutContenLoadTimeout")}function ba(){O();d.removeContent()}function V(){O();Z.logBuyNowButtonClickHandlerMetrics()}function O(){t.canShow()&&!k.isDisableTurboWeblabInTreatment()?(n("Registering with buy now button"),c.trigger("turbo:checkout:buyNowEnabled"),r.registerOnClickCallback(a)):(n("Unregistering from buy now button"),
c.trigger("turbo:checkout:buyNowDisabled"),r.deregisterOnClickCallback(a))}function ca(a,l){e.logCount("turboCheckoutPrefetchSuccess");a&&(k.isControl()||k.isBuyNowOnly())&&(n("Received content in control: "+a.substring(0,255)),e.logCount("turboCheckoutControlContentReceived"));R=l;m.isTurboOptimisticFlushingEnabled()?d.finalizeIFrameContent():d.setContent(a);O();m.shadowCallChewbaccaInitiate()}function da(){O();h.isOpeningOrOpen()&&(e.logCount("turboCheckoutYieldNewPurchase"),d.closeImmediatelyThenExecute(X))}
function ea(){clearTimeout(U);x="unknown";M.isConfirmRemovalWeblabInTreatment()||(W(),I())}function W(){!p||p.isResolved()||p.isRejected()||(n("Initiate confirm called for "+R.currentPurchaseId+" with existing confirm still executing. Aborting"),e.logCount("turboCheckoutConfirmPending"),p._supersedByNewPurchase=!0,p.abort())}function P(){var a=g.getLineItems().filter(function(a){return a&&a.isDiscoveredAsin}).map(function(a,b){return a.asin});e.logCount("turboCheckoutDiscoveredAsins",a.length);return a}
function I(){e.logCount("turboCheckoutConfirm");var a=R.currentPurchaseId,b=J.buildConfirmPathWith(g.getRefTag(),k.getExperimentName(),g.getClientId(),g.getRequestId(),g.getSessionId(),P());p=F.loadWithJQXHR(b,{type:"POST",data:{pid:a},headers:fa(),success:function(a,b,l){e.logCount("turboCheckoutConfirmSuccess")},error:function(b,l,aa){"abort"===l?e.logCount("turboCheckoutConfirmAborted"):("timeout"===l&&e.logCount("turboCheckoutConfirmTimeOut"),e.logCount("turboCheckoutConfirmFailed"));b._supersedByNewPurchase||
(C.logError("Issue confirming turbo initiate prefetch for pid "+a+": "+aa+", "+l),e.logCount("turboCheckoutYieldNewPurchase"),d.closeImmediatelyThenExecute(X))}})}function fa(){var a={},b=g.getCSRFToken();b&&0<b.length&&(a["x-amz-checkout-csrf-token"]=b);return a}function ha(){v.markFirstByte()}function ia(){clearTimeout(U);x="unknown"}function ja(){M.isConfirmRemovalWeblabInTreatment()||(W(),I())}function ka(){v.markFirstByte()}function S(){return A.get(A.KEYS.HOST_PAGE_TYPE_IDENTIFIER)}function X(){r.executeOriginalBuyNowAction(g.getActiveId())}
function la(a){c.trigger("turbo:checkout:embedded:page:showSpinner");p.done(a)}function ma(a,b,c){x=c;Q=!1}function na(){Q=!0}function oa(a){c.off("turbo:checkout:dimmer:clicked");c.on("turbo:checkout:dimmer:clicked",function(a){a()});a&&a.doNotLog||(a&&!a.doNotLog?Y(x,a.reason):Y(x,!1));x="closed"}function Y(a,b){var l=J.buildLogPageHitPathWith(Q?a+"2":a,b,g.getClientId());n("Logging page hit from "+a+" to "+S()+" reason "+b);F.load(l,{method:"POST",params:{pageType:S(),referrer:a,purchaseId:R.currentPurchaseId},
timeout:4E3})}function pa(){h.isOpeningOrOpen()&&e.logCount("turboCheckoutProductChangedWhileOpening")}var v,x,R,Q,qa=A.get(A.KEYS.AJAX_PAGE_UPDATE_EVENT),U,p;c.on(qa,N);N();return{pageLoaded:function(){var a=k.getExperimentName();if(a){var b=k.getAllocation();e.addCounterExtraSuffix("wl:"+b);e.addCounterExtraSuffix(a+":"+b)}if(E.isDeviceTurboEligible()||L.shouldAttemptTangoPrefetch())t.setup(),t.registerStateChangeCallback(T),q.setup(),m.registerCallback({onStart:ba,onTurboEligible:V,onFinish:ca,
onError:da}),D.setup(),u.setup(),u.registerCallback(B),w.registerBuyNowToTangoTriggerOnButton(),v=e.createScope(),d.registerCallbacks({beforeFramePopulated:ea,afterFramePopulated:ha,beforeOptimisticFlushing:ia,afterOptimisticFlushing:ja,csmMarkFirstByte:ka}),g.registerCallback(pa),c.on("turbo:checkout:sheet:beforeClose",oa),c.on("turbo:checkout:embedded:page:beforeReload",ma),c.on("turbo:checkout:embedded:page:animation:start",na),z.setup(r.executeTurboBuyNowAction,V),H.setup(),c.trigger("turbo:checkout:controller:onPageLoaded")},
loadFullscreen:function(a,b){function c(){a=C.createFQDN(a);"thankyou"===b?(e.logCount("turboCheckoutYieldTYP"),"primewardrobe"===g.getClientId()&&e.logCount("turboCheckoutYieldTYP:pw"),d.closeAndNavigate(a)):"thirdPartyPaymentInterstitial"===b?d.closeAndNavigate(a):"verifyMfaPage"===b?("primewardrobe"===g.getClientId()&&e.logCount("turboCheckoutYieldTYP:pw"),d.closeAndNavigate(a)):(e.logCount("turboCheckoutYield"),d.closeToFullscreen(a))}!p||p.isResolved()||p.isRejected()?c():(e.logCount("turboCheckoutWaitYield"),
la(c))},frameContentReady:function(a,b,f){c.trigger("turbo:checkout:embedded:page:ready",a,b);(function(){var a=function(){v.markCriticalFeature();f.confirmHit(S(),g.getRefTag());v.whenDataSet(f.recordClientSideMetrics);b.off("checkout:afterReload",a)};b.on("checkout:afterReload",a)})();(function(){b.on("checkout:beforeReload",function(f){c.trigger("turbo:checkout:embedded:page:beforeReload",a,b,f)});b.on("checkout:reload",function(f){c.trigger("turbo:checkout:embedded:page:reload",a,b,f)});b.on("checkout:afterReload",
function(f){c.trigger("turbo:checkout:embedded:page:afterReload",a,b,f)});b.on("turbo:checkout:animation:start",function(){c.trigger("turbo:checkout:embedded:page:animation:start")});b.state("turbo-secondary-panels-weblab-state",k.getHoldbackSecondaryPanelsWeblab());c.on("turbo:checkout:embedded:page:showSpinner",function(){f.showSpinner()});c.off("turbo:checkout:dimmer:clicked");c.on("turbo:checkout:dimmer:clicked",function(a){b.trigger("turbo:checkout:dimmer:clicked:iFrame",a)});b.on("turbo:checkout:update:dimmer",
function(a){c.trigger("turbo:checkout:update:dimmer:afterReload",a)});b.on("turbo:checkout:update:modal:header",function(a){c.trigger("turbo:checkout:update:modal:header:afterReload",a)});b.on("turbo:checkout:update:dimmer:block",function(){c.trigger("turbo:checkout:update:dimmer:block:iFrame")});b.on("turbo:checkout:update:dimmer:unblock",function(){c.trigger("turbo:checkout:update:dimmer:unblock:iFrame")});b.on("turbo:checkout:order:success",function(){c.trigger("turbo:checkout:order:success:iFrame")})})()},
frameHtmlRendered:function(){v.markAboveTheFold()},updateBounds:function(a,b){d.updateBounds(a,b)},getHeight:function(){return d.getHeight()},updateMinHeight:function(a){return d.updateMinHeight(a)},updateScrollHeight:function(a,b){return d.updateScrollHeight(a,b)},updateDimmer:function(a){c.trigger("turbo:checkout:update:dimmer:typReload",a)},getHostPageType:S,closeBottomSheet:function(a){c.trigger("turbo:checkout:sheet:doClose",a)}}});"use strict";h.register("turbo-discovered-asins-filter",function(){return{apply:function(c){return c.filter(function(c){return c&&
c.isDiscoveredAsin}).map(function(c,h){return c.asin})}}});"use strict";h.when("A","turbo-configuration","turbo-checkout-csm","turbo-checkout-ref-tagger","turbo-checkout-utils","turbo-initiate-migration-switch","turbo-shopping-portal-switch","turbo-tbyb-shopping-portal-switch","turbo-checkout-state-handler","buy-now-to-tango-switch","turbo-checkout-eligibility-aggregator","migrated-log-page-hit","migrated-trigger-weblab","turbo-checkout-page-ready").register("turbo-checkout-urls",function(c,d,h,t,
m,q,k,D,e,g,E,F,P){function G(a,b){if(a&&q.isEnabled()||b){try{var f=c.$("#debug-purchase-id")[0].textContent;var d=f===y?"":"/"+f}catch(V){d=""}a="/checkout/entry/buynow"+d}else a=D.isTBYBShoppingPortalEnabled()&&H()?"/checkout/trybeforeyoubuy/turbo-initiate":k.isShoppingPortalEnabled()?"/checkout/turbo/initiate":"/checkout/turbo-initiate";return a}function H(){return"primewardrobe"===e.getClientId()}function I(a,b){return["\x26",a,"\x3d",b].join("")}function r(){return"\x26pipelineType\x3dturbo"}
function u(a,b,c){a=r()+("\x26clientId\x3d"+a);var f=d.get(d.KEYS.DEVICE_OVERRIDE);return a+(f?"\x26devicestring-override\x3d"+f:"")+L(b,c)}function w(a){var b=d.get(d.KEYS.HOST_PAGE_TYPE_IDENTIFIER);return"ref_\x3d"+a+"\x26referrer\x3d"+b}function z(a){return m.isNonEmptyString(a)?"\x26weblab\x3d"+a:""}function J(a){if("boolean"===typeof a)return"\x26primeStatus\x3d"+a;h.logCount("turboCheckoutPrimeStatusEmpty");return""}function K(){return d.get(d.KEYS.IS_ADD_TO_CART_ENABLED)?"\x26temporaryAddToCart\x3d1":
""}function A(a){return a&&a.length?(a=a.find(function(a){return a.orderType&&a.rcxOrdFreq}))?"\x26snsOrderType.1\x3d"+a.orderType+"\x26rcxOrdFreq.1\x3d"+a.rcxOrdFreq:"":""}function C(a){if(!a||!a.length)return"";d.get(d.KEYS.IS_ADD_TO_CART_ENABLED)||m.logError('Discovered asins present but add to cart is disabled? This will generate a "clickstream_ignore" hit on the server side and cause the hit to be ignored by clickstream and the attribution lost!',"turbo-checkout-urls");var b="";a.forEach(function(a,
c){b+="\x26discoveredAsins."+c+"\x3d"+a});return b}function L(a,b){var c="";m.isNonEmptyString(a)&&(c+="\x26pageRequestId\x3d"+a);m.isNonEmptyString(b)&&(c+="\x26pageSessionId\x3d"+b);return c}function M(){return q.isEnabled()?"":"\x26isLegacyCheetah\x3d1"}function N(){return D.isTBYBShoppingPortalEnabled()&&H()?"/checkout/trybeforeyoubuy/triggerWeblab":k.isShoppingPortalEnabled()?P&&P.isEnabled()?"/checkout/entry/turboTriggerWeblab":"/checkout/turbo/triggerWeblab":"/checkout/triggerWeblab"}function n(){return B("auiDebug",
"auiDebug")+B("ds_user","ds_user")+B("ds_turbo_workspace","ds_workspace")+B("stringDebug","stringDebug")}function T(a){a=a?a:[];var b="";a.forEach(function(a,c){b+="\x26asin."+(c+1)+"\x3d"+a.asin});return b}function B(a,b){var c="";a=m.getUrlQueryParam(a);m.isNonEmptyString(a)&&(c="\x26"+b+"\x3d"+a);return c}return{buildInitiatePathWith:function(a,b,c,d,e,g,h,k){var f=G(!0,k);a=f+"?"+w(a)+u(c,d,e)+z(b)+J(h)+K()+n()+T(g)+A(g);b="";m.isNonEmptyString(f)&&-1!==f.indexOf("/checkout/entry/buynow")&&(b=
"\x26turboCheckoutMigrationFlag\x3d1");k&&(b+="\x26isShadowMode\x3d1");return a+b},buildEligibilityPathWith:function(a,b,c,d,e,h,k){a=G()+"?"+w(a)+u(c,d,e)+z(b)+J(k)+"\x26checkEligibilityOnly\x3dtrue"+K()+n();b=[];c=E.shouldAttemptTurboPrefetch()&&E.isTurboEligible();b.push(I("runTurboEligibility",c));g.isEnabled()&&b.push(I("runTangoEligibility",E.shouldAttemptTangoPrefetch()));b=b.join("");return a+b},buildConfirmPathWith:function(a,b,c,d,e,g){return G()+"/confirm?"+w(a)+u(c,d,e)+z(b)+K()+C(g)},
buildLogPageHitPathWith:function(a,b,c){return(D.isTBYBShoppingPortalEnabled()&&H()?"/checkout/trybeforeyoubuy/log-page-hit":k.isShoppingPortalEnabled()?F&&F.isEnabled()?"/checkout/entry/turbo-log-page-hit":"/checkout/turbo/log-page-hit":"/checkout/log-page-hit")+"?"+t.generateRefTag(a,t.ACTIONS.CLOSE,b)+u(c)+M()},buildTriggerWeblabPathWith:function(a,b,c,d,e){return N()+"?"+w(a)+z(b)+"\x26weblabAllocation\x3d"+c+r()+L(d,e)},buildTriggerWeblabPathWithoutWeblab:function(a,b,c){return N()+"?"+w(a)+
r()+L(b,c)},buildLogPageHitPathForShadowTesting:function(a,b,c){return"/checkout/turbo/log-page-hit?"+t.generateRefTag(a,t.ACTIONS.CLOSE,b)+u(c)+M()}}});"use strict";h.when().register("confirm-removal-weblab",function(){return{isConfirmRemovalWeblabInTreatment:function(){return!1}}})});
/* ******** */
'use strict';(function(c){var a=window.AmazonUIPageJS||window.P,e=a._namespace||a.attributeErrors,b=e?e("TurboCheckoutBaseAssets@navigation_window","TurboCheckout"):a;b.guardFatal?b.guardFatal(c)(b,window):b.execute(function(){c(b,window)})})(function(c,a,e){c.when("turbo-checkout-page-ready").register("turbo-checkout-navigation-window",function(){function b(){var b=!1;try{try{var d=a.self!==a.parent}catch(f){c.log("Encountered exception while executing inIframe: "+f,"ERROR","turbo-checkout-navigation-window"),
d=!0}d&&a.parent!==e&&"object"===typeof a.parent.P&&a.parent.P.now("icdp").execute(function(a){b=!!a})}catch(f){c.log("Encountered exception while verifying parent Window: "+f,"WARN","turbo-checkout-navigation-window")}return b}function d(){return b()?a.parent:a.self}return{getWindow:d,replace:function(a){d().location.replace(a)},assign:function(a){d().location.assign(a)}}})});
/* ******** */
'use strict';(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("TurboCheckoutBaseAssets@chewbacca_migration_optimistic_flushing","TurboCheckout"):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when().register("turbo-chewbacca-migration-optimistic-flushing",function(){return{isEnabled:function(){return!0}}})});
/* ******** */
'use strict';(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("TurboCheckoutBaseAssets@chewbacca_migration_get_request","TurboCheckout"):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when().register("turbo-chewbacca-migration-get-request",function(){return{isEnabled:function(){return!0}}})});
/* ******** */
'use strict';(function(a){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,b=d?d("TurboCheckoutBaseAssets@turbo_urls_endpoint_switch","TurboCheckout"):c;b.guardFatal?b.guardFatal(a)(b,window):b.execute(function(){a(b,window)})})(function(a,c,d){a.when().register("migrated-log-page-hit",function(){return{isEnabled:function(){return!0}}});"use strict";a.when().register("migrated-trigger-weblab",function(){return{isEnabled:function(){return!0}}})});
/* ******** */
'use strict';(function(a){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,b=d?d("TurboCheckoutBaseAssets@turbo_check_eligibility_switch","TurboCheckout"):c;b.guardFatal?b.guardFatal(a)(b,window):b.execute(function(){a(b,window)})})(function(a,c,d){a.when().register("migrated-turbo-check-eligibility-dpx-call",function(){return{isEnabled:function(){return!1},getTreatment:function(){return"C"}}});"use strict";a.when().register("migrated-turbo-check-eligibility-babyregistry-call",
function(){return{isEnabled:function(){return!1},getTreatment:function(){return"C"}}});"use strict";a.when().register("migrated-turbo-check-eligibility-buyagain-call",function(){return{isEnabled:function(){return!0},getTreatment:function(){return"T2"}}});"use strict";a.when().register("check-eligibility-response-mismatch",function(){return{isEnabled:function(){return!0}}});"use strict";a.when().register("migrated-turbo-check-eligibility-unknown-call",function(){return{isEnabled:function(){return!0},
getTreatment:function(){return"T2"}}})});
/* ******** */
'use strict';(function(l){var r=window.AmazonUIPageJS||window.P,x=r._namespace||r.attributeErrors,b=x?x("TurboCheckoutBaseAssets@base","TurboCheckout"):r;b.guardFatal?b.guardFatal(l)(b,window):b.execute(function(){l(b,window)})})(function(l,r,x){"use strict";l.register("turbo-function-adapter",function(){return{adapt:function(b){return function(){if("function"!==typeof b)throw Error("Parameter 'property' is invalid. Expected a function but got "+typeof b);return b.apply(b,arguments)}}}});"use strict";
l.when("turbo-configuration","turbo-function-adapter").execute("turbo-signin-adapter-factory",function(b,a){l.when(b.get(b.KEYS.SHOW_SIGN_IN_INTERFACE)).register("turbo-signin-adapter",function(c){return{show:a.adapt(c.show)}})});"use strict";l.when("turbo-configuration","turbo-function-adapter").execute("turbo-view-adapter-factory",function(b,a){l.when(b.get(b.KEYS.VIEW_ADAPTER)).register("turbo-view-adapter",function(c){return{registerCallbacks:a.adapt(c.registerCallbacks),close:a.adapt(c.close),
show:a.adapt(c.show),removeContent:a.adapt(c.removeContent),setContent:a.adapt(c.setContent),closeImmediatelyThenExecute:a.adapt(c.closeImmediatelyThenExecute),closeAndNavigate:a.adapt(c.closeAndNavigate),closeToFullscreen:a.adapt(c.closeToFullscreen),updateBounds:a.adapt(c.updateBounds),getHeight:a.adapt(c.getHeight),updateMinHeight:a.adapt(c.updateMinHeight),updateScrollHeight:a.adapt(c.updateScrollHeight),updateBottomSheetAttributes:a.adapt(c.updateBottomSheetAttributes),initiateIFrameContent:a.adapt(c.initiateIFrameContent),
appendToIFrameContent:a.adapt(c.appendToIFrameContent),finalizeIFrameContent:a.adapt(c.finalizeIFrameContent)}})});"use strict";l.when("A","turbo-checkout-utils","turbo-checkout-csm","turbo-callback-list","turbo-checkout-form","turbo-configuration","turbo-checkout-weblab-allocation","turbo-checkout-load-events","buy-now-to-tango-parameter-list-retriever","turbo-checkout-page-ready").register("buy-now-to-tango-parameter-eligibility-listener",function(b,a,c,e,g,d,h,k,n){function m(a){var f=E,d=g.getForms(z(l));
d===x||0===d.length?c.logCount("buyNowToTangoCheckoutInvalidBuyNowForm"):(a(d),f!==E&&(v("Buy Now to Tango parameter eligibility state has changed"),!0===E?v("Form corresponding to the Buy Now button is Buy Now to Tango parameter eligible",d):v("Form corresponding to the Buy Now button is NOT Buy Now to Tango parameter eligible",d),F.callAll("buyNowToTangoFormParameterEligibility")))}function f(f){v("Observing child node mutation events on:",f);try{var d=f[0];(new MutationObserver(function(){m(u)})).observe(d,
{childList:!0,subtree:!0})}catch(L){c.logCount("buyNowToTangoCheckoutObserveBuyNowFormException"),a.logWarning("buy-now-to-tango-parameter-eligibility-listener","Exception while attempting to observe the Buy Now Button Form \x3d "+L+". Buy Now Button Form: ",f)}}function u(a){J=G=0;a=!0;for(var f=p(),d=n.getBuyNowToTangoParameterExclusionList(),g=h.getBuyNowToTangoWeblabs(),b=0;b<f.length;b++){var m=f[b];A(m,d,g)||(G++,a=!1,c.logCountSimple("buyNowToTangoCheckoutParameterExcluded:onDetailPageStateChange:"+
m))}E=0<f.length?a:!1}function p(){var a=g.getForms(z(l));if(a===x||0===a.length)c.logCountSimple("buyNowToTangoCheckoutInvalidBuyNowForm");else{a=a.find("input[type\x3dhidden]");for(var f=[],d=0;d<a.length;d++)f.push(a[d].getAttribute("name"));return f}}function A(a,f,d){if(!a)return!0;if(q.test(a)){f=t(a);if(f)if(B.hasOwnProperty(f)){var g=B[f];d=g?"T1"!==d[g]?!0:!1:!1}else d=!0;else d=!1;d?(c.logCountSimple("buyNowToTangoCheckoutParameterIneligibleValue:"+a),v("Buy Now To Tango Ineligible Parameter value observed: "+
a+"\x3d"+f),a=!1):a=!0;return a}if(!f.hasOwnProperty(a))return!0;f=f[a];if(!f)return!1;if("T1"!==d[f])return J++,!1;a:{if(w.hasOwnProperty(a)&&(d=t(a),d!==x&&!(new RegExp(w[a])).test(d?d:""))){c.logCountSimple("buyNowToTangoCheckoutParameterIneligibleValue:"+a);v("Buy Now To Tango Ineligible Parameter value observed: "+a+"\x3d"+d);a=!0;break a}a=!1}return a?!1:!0}function t(a){var f=g.getForms(z(l));if(f!==x&&0!==f.length)if(f=f.find('input[type\x3dhidden][name\x3d"'+a+'"]'),1!==f.length)c.logCountSimple("buyNowToTangoCheckoutParameterMultiInputs:"+
a);else if(a=f[0])return a.getAttribute("value")}function D(a,f){return a.every(function(a){return 0<=f.indexOf(a)})}function v(f,d){a.logDebug("buy-now-to-tango-parameter-eligibility-listener",f,d)}var l=d.get(d.KEYS.BUY_NOW_BUTTON_SELECTOR),q=new RegExp(/^custom-name\.\d+\.\d+$/),w={},B={itemAssoc:"PAX_CHECKOUT_VAS_ENABLE_BUY_NOW_TANGO_1165794","UNIQ-itemAssoc":"PAX_CHECKOUT_VAS_ENABLE_BUY_NOW_TANGO_1165794",itemAssocType:"PAX_CHECKOUT_VAS_ENABLE_BUY_NOW_TANGO_1165794",itemAssociationGroup:"PAX_CHECKOUT_VAS_ENABLE_BUY_NOW_TANGO_1165794",
itemAssocRenderType:"PAX_CHECKOUT_VAS_ENABLE_BUY_NOW_TANGO_1165794",incentivizedCart:"",isDevicePreRegistered:"PAX_CHECKOUT_ALC_BUY_NOW_TANGO_1185935"},z=b.$,F=e.create(),E=!1,G=0,J=0;k.bind(function(){d.get(d.KEYS.IS_BUY_NOW_TO_TANGO_ENABLED)&&m(function(a){u(a);f(a)})});return{onStateChange:function(a){F.push(a)},isBuyNowToTangoParameterEligible:function(){return E},logBuyNowFormParameterExclusionsAndFeatures:function(){for(var a=p(),f=d.get(d.KEYS.BUY_NOW_TO_TANGO_PARAMETER_TO_FEATURE_MAPPING),
g={},b=0;b<a.length;b++){var m=a[b],e=m;n.getBuyNowToTangoParameterExclusionList().hasOwnProperty(e)&&(c.logCountSimple("buyNowToTangoCheckoutParameterExcluded:onBuyNowButtonClick:"+m),f.hasOwnProperty(m)||(c.logCountSimple("buyNowToTangoCheckoutParameterExcluded:onBuyNowButtonClick:Unknown"),v("Buy Now To Tango Unknown Parameter Observed: "+m)),e="Unknown",f.hasOwnProperty(m)&&""!==f[m]&&(e=f[m]),g[e]=!0)}for(var h in g)g.hasOwnProperty(h)&&c.logCountSimple("buyNowToTangoCheckoutParameterExcluded:Feature:"+
h);f=d.get(d.KEYS.BUY_NOW_TO_TANGO_FEATURE_PARAMETER_GROUP_MAPPING);g=!1;for(var u in f)f.hasOwnProperty(u)&&D(f[u],a)&&(c.logCountSimple("buyNowToTangoCheckoutParameterExcluded:FeatureByGrouping:"+u),g=!0);g||c.logCountSimple("buyNowToTangoCheckoutParameterExcluded:FeatureByGrouping:Unknown")},isBuyNowToTangoParameterIneligibleOnlyDueToNonT1WeblabAllocation:function(){return 0!==G&&G===J}}});"use strict";l.when("A","turbo-checkout-form","turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-content-loader",
"turbo-checkout-weblab-allocation","turbo-configuration","turbo-checkout-load-events","turbo-checkout-eligible-state","turbo-checkout-buy-now-button","buy-now-to-tango-parameter-eligibility-listener","buy-now-to-tango-switch","turbo-checkout-weblab-allocation","turbo-checkout-csm","turbo-checkout-page-ready").register("buy-now-to-tango-url-handler",function(b,a,c,e,g,d,h,k,n,m,f,u,p,A){function t(){!e.isProductTangoEligible()||n.canShow()&&!d.isDisableTurboWeblabInTreatment()?(E("Remove customer eligibility check for BuyNow is in T1: Turbo eligible or Tango InEligible. Calling Tango Ineligible callbacks "),
v()):(E("Remove customer eligibility check for BuyNow is in T1: Turbo Ineligible and Tango Eligible. Flipping the BuyNow URL to Tango "),D())}function D(){I=!0;f.isBuyNowToTangoParameterEligible()&&w()}function v(){I=!1;q()}function l(){I&&(f.isBuyNowToTangoParameterEligible()&&!x?(x=!0,w()):(x=!1,E("Handle tango ineligible and update form action url to the fallback url"),y=!1,m.deregisterOnClickCallback(B),Q=!1))}function q(){!y||n.canShow()&&!d.isDisableTurboWeblabInTreatment()?(m.deregisterOnClickCallback(B),
Q=!1):(m.registerOnClickCallback(B),Q=!0)}function w(){y=!0;n.canShow()&&!d.isDisableTurboWeblabInTreatment()?E("Tango eligible but Turbo being eligible takes precedence when handling URL"):(m.registerOnClickCallback(B),Q=!0)}function B(){var f=a.getForms(G(J));if("T1"===p.getBuyNowToTangoWeblabs().PAX_CHECKOUT_BUY_NOW_TO_TANGO_REMOVE_LEGACY_PIPELINE_PARAMETER_1125072)if(f){var d=f.find('input[name\x3d"pipelineType"]');if(d&&0<d.length){d.remove();d=d.val();E("the original pipelineType is: "+d);var c=
a.getRefTag(G(J));A.logCountSimple("buynowToTangoRemoveLegacyPipelineParameterForDesktop:"+d+":"+c);A.logCount("buynowToTangoTotalRemoveLegacyPipelineParameterTotalForDesktop")}}else E("No buyNowButton form found");f.append(z(a.getRefTag(G(J))));f.attr("action","/checkout/entry/buynow");f.submit();return!1}function z(a){var f=document.createDocumentFragment();f.appendChild(F("pipelineType","Chewbacca"));f.appendChild(F("referrer",r));f.appendChild(F("isBuyNow","1"));f.appendChild(F("ref_",(a||"unknown_buy_now")+
"_chw"));return f}function F(a,f){var d=document.createElement("input");d.type="hidden";d.className="buy-now-to-tango-migration-request-param";d.name=a;d.value=f;return d}function E(a,f){c.logDebug("buy-now-to-tango-url-handler",a,f)}var G=b.$,J=h.get(h.KEYS.BUY_NOW_BUTTON_SELECTOR),r=h.get(h.KEYS.HOST_PAGE_TYPE_IDENTIFIER),I=!1,x=!1,y=!1,Q=!1;k.bind(function(){u.isEnabled()&&(t(),g.registerCallback({onTangoEligible:D,onTangoIneligible:v}),f.onStateChange(l),n.registerStateChangeCallback(q))});return{_forTestOnly:{_setTangoAsinCustomerEligibleAndCheckBuyNowToTangoParameterEligibility:D,
_onBuyNowToTangoParameterEligibilityChange:l,_onTurboEligibilityChange:q,_overrideBuyNowButtonFormAttributesAndSubmit:B,_validateAndSetTangoEligibilityState:t},isBuyNowToTangoEligible:function(){return y},isTangoCustomerAndAsinEligible:function(){return I},isBuyNowClickPointingToTango:function(){return Q}}});"use strict";l.when("A","turbo-checkout-utils","turbo-configuration","turbo-checkout-form","buy-now-to-tango-switch","buy-now-to-tango-switch-beta","turbo-checkout-buy-now-button","turbo-checkout-eligible-state",
"turbo-checkout-weblab-allocation","turbo-checkout-state-handler","buy-now-to-tango-url-handler","turbo-checkout-urls","turbo-checkout-weblab-trigger","buy-now-to-tango-parameter-eligibility-listener","turbo-checkout-csm","buy-now-to-tango-parameter-list-retriever","turbo-checkout-page-ready").register("buy-now-to-tango-weblab-trigger",function(b,a,c,e,g,d,h,k,n,m,f,u,p,A,t,D){function v(){!k.canShow()&&f.isBuyNowClickPointingToTango()?t.logCountSimple("BUY_NOW_TO_TANGO_HIT"):k.canShow()||!g.isEnabled()||
d.isGatingWeblabEnabled()||(t.logCountSimple("BUY_NOW_TO_TANGO_EXCLUDED"),A.isBuyNowToTangoParameterEligible()||(t.logCountSimple("BUY_NOW_TO_TANGO_EXCLUSION_REASON:Parameter"),A.logBuyNowFormParameterExclusionsAndFeatures()),m.isProductTangoEligible()||t.logCountSimple("BUY_NOW_TO_TANGO_EXCLUSION_REASON:ASIN"),m.isProductTangoEligible()&&!f.isTangoCustomerAndAsinEligible()&&t.logCountSimple("BUY_NOW_TO_TANGO_EXCLUSION_REASON:Customer"));var a=l(q);a=e.getForms(a);if(a===x||0===a.length)return!1;
var c=!k.canShow(),b=f.isTangoCustomerAndAsinEligible();if(c&&b&&g.isEnabled()&&!d.isGatingWeblabEnabled()){a:{a=a.find("input[type\x3dhidden]");b:{c=D.getBuyNowToTangoParameterExclusionList();b=[];for(var h=0;h<a.length;h++){var v=a[h].getAttribute("name");if(v&&c.hasOwnProperty(v)){v=c[v];if(!v){a=[];break b}0>b.indexOf(v)&&b.push(v)}}a=b}if(0===a.length)t.logCountSimple("NO_BUY_NOW_TO_TANGO_PARAMETER_WEBLABS"),a=[];else{c=n.getBuyNowToTangoWeblabs();b=0;h="";for(v=0;v<a.length;v++){var G=a[v];
if(!c.hasOwnProperty(G)||""===c[G]||null===c[G]){t.logCountSimple("BUY_NOW_TO_TANGO_WEBLAB_TRIGGER:"+G+c.hasOwnProperty(G)?"HAS_NO_ALLOCATION":"DOES_NOT_EXIST");a=[];break a}"C"===c[G]&&(b++,h=G)}v=[];if(0===b){for(b=0;b<a.length;b++)h=a[b],v.push({weblabName:h,weblabAllocation:c[h]}),t.logCountSimple("BUY_NOW_TO_TANGO_WEBLAB_TRIGGER:"+h+":T1");f.isBuyNowClickPointingToTango()||t.logCountSimple("BUY_NOW_TO_TANGO_WEBLAB_TRIGGERED_T1_BUT_URL_DID_NOT_FLIP")}else 1===b&&(v.push({weblabName:h,weblabAllocation:"C"}),
t.logCountSimple("BUY_NOW_TO_TANGO_WEBLAB_TRIGGER:"+h+":C"),f.isBuyNowClickPointingToTango()&&t.logCountSimple("BUY_NOW_TO_TANGO_TRIGGERED_C_BUT_URL_FLIPPED"));a=v}}0<a.length&&(c=u.buildTriggerWeblabPathWithoutWeblab(m.getRefTag(),m.getRequestId(),m.getSessionId()),p.sendTurboWeblabRequest(c,a))}return!1}var l=b.$,q=c.get(c.KEYS.BUY_NOW_BUTTON_SELECTOR);return{registerBuyNowToTangoTriggerOnButton:function(){h.registerOnClickCallback(v)},_forTestOnly:{_triggerBuyNowToTangoExperimentWeblabs:v}}});
"use strict";l.when("turbo-checkout-page-ready").execute(function(){l.declare("turbo-eligibility-override",!1)});"use strict";l.when("turbo-checkout-page-state","turbo-configuration","turbo-checkout-utils","turbo-checkout-csm","turbo-checkout-page-ready").register("buy-now-to-tango-parameter-list-retriever",function(b,a,c,e){return{getBuyNowToTangoParameterExclusionList:function(){if(!1===a.get(a.KEYS.IS_BUY_NOW_TO_TANGO_PRIME_SPLIT))return a.get(a.KEYS.BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST);
var c=b.get().isPrimeCustomer;if(!0===c)return a.get(a.KEYS.BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST_PRIME);if(!1===c)return a.get(a.KEYS.BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST_NON_PRIME);e.logCountSimple("buyNowToTangoCheckoutTurboStateIsPrimeCustomerUndefined:getBuyNowToTangoParameterExclusionList");throw Error("getBuyNowToTangoParameterExclusionList(): Unable to determine if prime customer or not as Turbo page state's isPrimeCustomer attribute is not true or false, but: "+c);}}});"use strict";
l.when("A","turbo-checkout-csm","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-address-id",function(b,a,c){function e(d){for(var c=0;c<d.length;c++){var b=g(d[c]);if(0<b.length)return a.logCount("turboCheckoutAddressSelectorIndex"+c),b}a.logCount("turboCheckoutAddressSelectorMissing");return g()}var g=b.$;return{getAddressId:function(){return e(c.get(c.KEYS.ADDRESS_INPUT_SELECTORS)).val()||""},set:function(a){e(c.get(c.KEYS.ADDRESS_INPUT_SELECTORS)).val()!==a&&e(c.get(c.KEYS.ADDRESS_INPUT_SELECTORS)).val(a).trigger("change",
[a])}}});"use strict";l.when("A","turbo-checkout-utils","turbo-callback-list","turbo-configuration","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkbox-exclusion-listener",function(b,a,c,e,g){function d(a){var d=p;p=!1;for(var c=0;c<m.length;c++){var g=f(m[c]).find("input[type\x3dcheckbox]");a(g)}d!==p&&(k("Exclusion checkbox state changed"),u.callAll("exclusionCheckbox"))}function h(a){var c;if(!(c=p)){c=!1;for(var d=0;d<a.length&&!c;d++){var g=f(a[d]);(c=g.prop("checked"))&&
k("Exclusion checkbox is checked",g)}}p=c}function k(f,c){a.logDebug("turbo-checkbox-exclusion-listener",f,c)}function n(){d(h)}var m=e.get(e.KEYS.CHECKBOX_EXCLUSION_ROOT_NODES),f=b.$,u=c.create(),p=!1;g.bind(function(){d(function(a){k("Listening for change events on:",a);a.unbind("change",n).bind("change",n);h(a)})});return{onStateChange:function(a){u.push(a)},isAnyCheckboxChecked:function(){return p}}});"use strict";l.when("A","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-custom-price-input",
function(b,a,c){function e(){var a=g();k!==a&&(k=a,h.callAll())}function g(){return d("#gcPriceOverride").val()||""}var d=b.$,h=a.create(),k;c.bind(function(){k=g();d("#gcPriceOverride").unbind("change",e).bind("change",e)});return{getCustomPrice:g,onChange:function(a){h.push(a)}}});"use strict";l.when("A","turbo-configuration","turbo-checkout-utils","turbo-checkout-csm","turbo-callback-list","turbo-checkout-load-events").register("turbo-checkout-subscribe-and-save-frequency-input",function(b,a,c,
e,g,d){function h(){var a=n(m),c=n(f);return 0<a.length?a.val():0<c.length?c.val():null}function k(){var a=h();a!==t&&(t=a,A.callAll())}var n=b.$,m=a.get(a.KEYS.SUBSCRIBE_AND_SAVE_DELAYED_SIGNUP_FREQUENCY_VALUE_SELECTOR),f=a.get(a.KEYS.SUBSCRIBE_AND_SAVE_ONML_FREQUENCY_VALUE_SELECTOR),u=a.get(a.KEYS.SUBSCRIBE_AND_SAVE_DELAYED_SIGNUP_FREQUENCY_CHANGE_EVENT),p=a.get(a.KEYS.SUBSCRIBE_AND_SAVE_ONML_FREQUENCY_CHANGE_EVENT),A=g.create(),t=null;d.bind(function(){t=h();b.on(u,function(a){k()});b.on(p,function(a){k()})});
return{getFrequency:h,getLineItem:function(){var a=h();return a?{rcxOrdFreq:a.split("|")[0]}:null},select:function(a){if(a){var c=n(m),d=n(f);c=0<c.length?c:d;0<c.length&&c.val()!==a&&(c.val(a).trigger("change"),a=c.is(m)?u:p,b.trigger(a))}},onChange:function(a){A.push(a)}}});"use strict";l.when("A","turbo-configuration","turbo-checkout-utils","turbo-checkout-csm","turbo-callback-list","turbo-checkout-load-events").register("turbo-checkout-subscribe-and-save-order-type-input",function(b,a,c,e,g,d){function h(){var a=
k(m),c=k(f);return 0<a.length&&a.is(":checked")?"DELAYED_SIGN_UP":0<c.length&&c.is(":checked")?"ONE_NOW_MORE_LATER":null}var k=b.$,n=a.get(a.KEYS.SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_SELECTOR),m=a.get(a.KEYS.SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_DELAYED_SIGNUP_SELECTOR),f=a.get(a.KEYS.SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_ONML_SELECTOR),u=g.create(),p=null;d.bind(function(){p=h();k(n).bind("click change",function(){var a=h();a!==p&&(p=a,u.callAll())})});return{getOrderType:h,getLineItem:function(){var a=
h();return a?{orderType:a}:null},select:function(a){if(a){var c=k(m),d=k(f);"DELAYED_SIGN_UP"===a&&0<c.length?(c.prop("checked",!0).trigger("change"),b.trigger(n)):"ONE_NOW_MORE_LATER"===a&&0<d.length&&(d.prop("checked",!0).trigger("change"),b.trigger(n))}},onChange:function(a){u.push(a)}}});"use strict";l.when("A","turbo-configuration","turbo-callback-list","turbo-checkout-load-events").register("turbo-checkout-subscribe-and-save-quantity-input",function(b,a,c,e){function g(){var a=d(h);if(0===a.length)return null;
a=a.val();a=parseInt(a,10);a=isNaN(a)?1:a;return 1>a?1:a}var d=b.$,h=a.get(a.KEYS.SUBSCRIBE_AND_SAVE_QUANTITY_SELECTOR),k=c.create(),n=null;e.bind(function(){n=g();d(h).bind("change",function(){var a=g();a!==n&&(n=a,k.callAll())})});return{getSnSQuantity:g,getLineItem:function(){var a=g();return null===a||a===x?null:{quantity:a}},select:function(a){if(a){var f=d(h);0<f.length&&f.val(a).trigger("change")}},onChange:function(a){k.push(a)}}});"use strict";l.when("A","turbo-checkout-csm","turbo-checkout-utils",
"turbo-configuration","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-quantity-input",function(b,a,c,e,g,d){function h(a){var f=a?a.value?parseInt(a.value,10):a.target&&a.target.value?parseInt(a.target.value,10):void 0:void 0;p===f?c.logDebug("turbo-checkout-quantity-input","Quantity change event does NOT have new quantity. Suppressing callbacks",void 0):(p=f,c.logDebug("turbo-checkout-quantity-input","Quantity change event",a),m.callAll())}
function k(f){f=f.val();(f=parseInt(f,10))||a.logCount("turboCheckoutNoQuantityFromPage");return f}var n=b.$,m=g.create(),f=e.get(e.KEYS.QUANTITY_SELECT_SELECTOR),u="Multiple quantity nodes present on the page. This may lead to an incorrect quantity being used in Turbo! Selector \x3d "+f,p;d.bind(function(){var d=n(f);p=k(d);d.unbind("change",h).bind("change",h);1<d.length&&(c.logError(u,"turbo-checkout-quantity-input"),c.logDebug("turbo-checkout-quantity-input",u,d));a.logCount("turboCheckoutQuantityNodes",
d.length)});return{getQuantity:function(){return k(n(f))},setQuantity:function(a){var c=n(f),d=k(c);a=parseInt(a,10);d!==a&&c.val(a).change()},onChange:function(a){m.push(a)}}});"use strict";l.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-callback-list","turbo-configuration","turbo-checkout-quantity-input","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-warranty-input",function(b,a,c,e,g,d,h){var k=b.$,n=e.create(),m=g.get(g.KEYS.WARRANTY_CHECKBOX_INPUT_SELECTOR),
f=g.get(g.KEYS.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR),u=g.get(g.KEYS.WARRANTY_ASIN_INPUT_NAME),p=g.get(g.KEYS.WARRANTY_OFFER_INPUT_SELECTOR);h.bind(function(){k(m).unbind("click",n.callAll).bind("click",n.callAll)});return{select:function(a){a&&k(f+" input[name^\x3d"+u+"][value\x3d"+a+"]").parents(f).find(m).click()},onChange:function(a){n.push(a)},getLineItem:function(g){if(k(m+":checked").length){var b=k(m+":checked").first().parents(f).find("input[name^\x3d"+u+"]").val()||"",h=k(p).val()||
"";g=parseInt(g,10)||d.getQuantity()||1;if(b&&h)return{asin:b,offerListingId:h,quantity:g,isDiscoveredAsin:!0};a.logCount("turboCheckoutIncompleteWarrantyInputs");c.logError("Incomplete input data for the selected warranty checkbox - asin:"+b+", offerId:"+h+", quantity:"+g)}else c.logDebug("turbo-checkout-warranty-input","No warranty checkbox is selected",void 0)}}});"use strict";l.when("A","turbo-checkout-csm","turbo-callback-list","turbo-configuration","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-vas-input",
function(b,a,c,e,g){function d(){return m(k).prop("checked")||!1}function h(){var a=u;u=d();a!==u&&f.callAll(u)}var k=e.get(e.KEYS.VAS_CHECKBOX_SELCTOR),n=e.get(e.KEYS.VAS_CHANGE_EVENTS),m=b.$,f=c.create(),u;g.bind(function(){u=d();n.forEach(function(a){b.off(a,h);b.on(a,h)})});return{isSelected:d,onChange:function(a){f.push(a)}}});"use strict";l.when("A","turbo-checkout-utils","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-csm","turbo-checkout-aui-page-state-parser","turbo-configuration",
"turbo-checkout-page-ready").register("turbo-checkout-accessories-input",function(b,a,c,e,g,d,h){function k(){var a=v;v=A();v!==a&&D.callAll()}function n(){if(l===x&&t(q).length){var a=d.parse("simpleBundleParameterMap",".simpleBundleFeatureContainer");0===a.length?(g.logCount("Turbo:Accessories:No:State"),l={}):m(a)}}function m(a){l={};a[0].items.forEach(function(a){l[a.asin]={asin:a.asin,offerListingId:a.offerListingId,isDiscoveredAsin:!0}})}function f(){return t(q).find("input[type\x3dcheckbox]")}
function u(){f().unbind("change",k).bind("change",k)}function p(){return t(q).length?1>=v:0===v}function A(){var c=0;f().each(function(){t(this).prop("checked")&&c++});a.logDebug("turbo-checkout-accessories-input","Accessories selected "+c);return c}var t=b.$,D=c.create(),v=0,l,q=h.get(h.KEYS.ENABLED_ACCESSORIES_SELECTOR);n();u();e.bind(function(){n();u();A()});return{isEligible:p,registerCallback:function(a){D.push(a)},getLineItem:function(){if(p()){var a=f().filter(":checked").val();a=l?l[a]:void 0;
return a||x}return x},select:function(a){a&&t(q+" input[type\x3dcheckbox][value\x3d"+a+"]").click()}}});"use strict";l.when("A","turbo-checkout-utils","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-devices-accessories-input",function(b,a,c,e){function g(){var c=d("#accessory-upsell-container").find("input[type\x3dcheckbox]");for(var g=!1,f=0;f<c.length&&!g;f++){var b=d(c[f]);(g=b.prop("checked"))&&a.logDebug("turbo-checkbox-exclusion-listener",
"Devices accessory checkbox is checked",b)}c=g;k!==c&&(k=c,h.callAll())}var d=b.$,h=c.create(),k=!1;e.bind(function(){k=!1;g();d("#accessory-upsell-container").unbind("change",g).bind("change",g)});return{isEligible:function(){return!k},registerCallback:function(a){h.push(a)}}});"use strict";l.when("A","turbo-checkout-utils","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-devices-account-linking-input",function(b,a,c,e){function g(){return h("#account-linking")}
function d(){var c;if(c=g().prop("checked")){var f=g();a.logDebug("turbo-checkbox-exclusion-listener","Devices account linking checkbox is checked",f)}n!==c&&(n=c,k.callAll())}var h=b.$,k=c.create(),n=!0;e.bind(function(){n=!0;d();g().unbind("change",d).bind("change",d)});return{isEligible:function(){var a=h("#accountLinkingType");return 0<a.length&&"PRE_CONSENT"===a.val()?!1:0<g().length?n:!0},registerCallback:function(a){k.push(a)}}});"use strict";l.when("A","turbo-checkout-csm","turbo-configuration",
"turbo-checkout-page-ready").register("turbo-checkout-session-id-input",function(b,a,c){var e=b.$;return{getSessionId:function(){var g=e(c.get(c.KEYS.SESSION_ID_SELECTOR));g&&0<g.length||(a.logCount("turboCheckoutSessionIdSelectorMissing"),g=e());return g.val()||""}}});"use strict";l.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-aui-page-state-parser","turbo-checkout-page-ready").register("java-checkout-url-page-state",function(b,a,c,e,g){function d(a,
c){this.javaCheckoutUrl=a;this.javaCheckoutQueryParams=c}function h(a,d){c.logDebug("java-checkout-url-page-state",a,d)}var k=e.get(e.KEYS.JAVA_CHECKOUT_URL_PAGE_STATE_KEY),n=e.get(e.KEYS.JAVA_CHECKOUT_URL_PAGE_STATE_PARSING_ROOT_NODE_SELECTOR),m=new d("",{});return{get:function(c,b){c=c||k;b=b||n;b=g.parse(c,b);a.logCount("javaCheckoutUrlPageStates",b.length);0===b.length?(h("Java checkout url page state ["+c+"] is NOT present"),c=void 0):c=b[0];c?c=new d(c.javaCheckoutUrl,c.javaCheckoutQueryParams):
(a.logCount("javaCheckoutUrlPageStateNotDefined"),c=m);h("Java Checkout Url PageState",c);return c}}});"use strict";l.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-form","turbo-checkout-ref-tagger","turbo-checkout-page-state","turbo-checkout-product-state","turbo-checkout-sns-utils","turbo-checkout-page-ready").register("turbo-checkout-joined-state",function(b,a,c,e,g,d,h,k){function n(a,c,d){c&&(d&&(c.quantity=d),a.push(c))}function m(c,d){function h(){var d=c.turboWeblab;
d||a.logCount("turboCheckoutWeblabNameNotDefinedInState");return d}function n(){return c.turboWeblabTreatment}this.pageState=c;this.productStates=d;this.getLineItems=function(){return m.lineItemInputs};this.getActiveId=function(){return m.id};this.getHeaderText=function(){return m?m.turboHeaderText||c.turboHeaderText:c.turboHeaderText};this.getLoadingText=function(){return c.turboLoadingText};this.getCloseText=function(){return c.turboCloseText};this.getAddressId=function(){return c.addressId};this.getRequestId=
function(){return c.requestId};this.getSessionId=function(){return c.sessionId};this.getAdditionalWeblabs=function(){return c.additionalWeblabs};this.getInitiateSelector=function(){return c.initiateSelector};this.getWeblab=h;this.getWeblabTreatment=n;this.isTurboLaunched=function(){return!h()&&"C"!==n()};this.isProductStateEligible=function(){return d.isTurboEligible};this.getRefTag=function(){if(!m)throw Error("Turbo checkout product state is NOT resolved. Cannot generate ref tag");var a=b.$("#"+
m.id);a=e.getRefTag(a);return g.generateJoinedValue(a)};this.getCSRFToken=function(){return c.csrfToken};this.getAapiCsrfToken=function(){return c.aapiCsrfToken};this.getClientId=function(){return m&&m.checkoutClientId?m.checkoutClientId:"retailwebsite"};this.resolve=function(a){if(a){m=d.states[a];if(!m)throw a="Resolved turbo checkout product state is undefined. Id \x3d "+a,f(a,d),Error(a);f("Resolved new product state",m);b.trigger("turbo:checkout:state:product:resolved")}};this.getHoldbackSecondaryPanelsWeblab=
function(){return c.holdbackSecondaryPanelsWeblab};this.isPrimeCustomer=function(){return c.isPrimeCustomer};var m=1!==d.states.length?x:d.states[0]}function f(a,d){c.logDebug("turbo-checkout-joined-state",a,d)}return{createTurboState:function(c,f,g,b,e,l,K,q,w){if(b&&g)throw Error("Custom item price is NOT supported with warranty");var p=d.get();f&&(p.addressId=f);f=h.get();if(c||b||g||l||K||q||w)c=parseInt(c,10),f.states.forEach(function(d){d.lineItemInputs.forEach(function(d){c&&(d.quantity=c);
b?(d.customItemPrice=b,a.logCount("turboCheckoutItemPriceOverrided")):d.customItemPrice&&a.logCount("turboCheckoutItemPriceSelectorFallBackToTurboState")});n(d.lineItemInputs,l,c);n(d.lineItemInputs,g,c);K&&K.rcxOrdFreq&&k.updateLineItemFrequency(d.lineItemInputs,K);q&&q.orderType&&k.updateLineItemOrderType(d.lineItemInputs,q);w&&w.quantity&&K&&K.rcxOrdFreq&&k.updateLineItemQuantity(d.lineItemInputs,w)});p=new m(p,f);p.resolve(e);return p}}});"use strict";l.when("A","turbo-checkout-csm","turbo-checkout-utils",
"turbo-configuration","turbo-checkout-aui-page-state-parser","turbo-constants","turbo-checkout-page-ready").register("turbo-checkout-page-state",function(b,a,c,e,g,d){function h(a,c,f,g,b,h,e,m,n,k,u,l,G,J,r,I,x){this.version=a;this.turboWeblab=c;this.turboWeblabTreatment=f;this.initiateSelector=g;this.turboLoadingText=b;this.turboHeaderText=h;this.turboCloseText=e;this.addressId=m;this.requestId=n;this.sessionId=k;this.csrfToken=u;this.turboAssetsMode=l;this.isJavaPipelineEligible="0"!==this.version&&
this.turboAssetsMode!==d.ASSET_MODE_TURBO_ONLY;this.additionalWeblabs=G;this.holdbackSecondaryPanelsWeblab=J;this.isTangoCheckoutEligible=r;this.isPrimeCustomer=I;this.aapiCsrfToken=x}function k(a,d){c.logDebug("turbo-checkout-page-state",a,d)}var n=e.get(e.KEYS.TURBO_PAGE_STATE_KEY),m=e.get(e.KEYS.PAGE_STATE_PARSING_ROOT_NODE_SELECTOR),f=e.get(e.KEYS.LEGACY_SESSION_ID_IDENTIFIER),u=new h("0","","C","#buy-now-button","","","","","","","",d.ASSET_MODE_TURBO_ONLY,"","",!1,!1,"");return{get:function(b,
e){b:{b=b||n;e=e||m;e=g.parse(b,e);a.logCount("turboCheckoutPageStates",e.length);if(1<e.length)c.logError("Multiple turbo checkout page states found! Turbo will NOT show","turbo-checkout-page-state",void 0),k("PageStates",e);else if(0===e.length)k("Turbo checkout page state ["+b+"] is NOT present");else{b=e[0];break b}b=void 0}if(b)if(b.version)b=new h(b.version,b.turboWeblab||"",b.turboWeblabTreatment||"C",b.initiateSelector||".buy-now-button",b.turboLoadingText||"",b.turboHeaderText||"",b.turboCloseText||
"",b.addressId||"",b.requestId||"",b.sessionId||"",b.csrfToken||"",b.turboAssetsMode||d.ASSET_MODE_TURBO_ONLY,b.additionalWeblabs||"{}",b.holdbackSecondaryPanelsWeblab||"{}",b.isTangoCheckoutEligible||!1,b.isPrimeCustomer||!1,b.aapiCsrfToken||"");else{e=b.inputs||{};var t=b.strings||{};b=new h("1",b.turboWeblab||"",b.turboWeblabTreatment||"C",(b.configurations||{}).initiateSelector||"#buy-now-button",t.TURBO_LOADING_TEXT||"",t.TURBO_CHECKOUT_HEADER||"",t.TURBO_CLOSE_TEXT||"",e.addressId||"",e.requestId||
"",e.sessionId||e[f]||"",b.csrfToken||"",b.turboAssetsMode||d.ASSET_MODE_TURBO_ONLY,b.additionalWeblabs||"{}",b.holdbackSecondaryPanelsWeblab||"{}",b.isTangoCheckoutEligible||!1,b.isPrimeCustomer||!1,b.aapiCsrfToken||"")}else a.logCount("turboCheckoutStateNotDefined"),b=u;k("Turbo Checkout PageState",b);return b}}});"use strict";l.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-aui-page-state-parser","turbo-checkout-page-ready").register("turbo-checkout-product-state",
function(b,a,c,e,g){function d(a,c){this.isTurboEligible=a;this.states=c}function h(a,c,d,f,b){this.id=a;this.isTurboEligible=c;this.lineItemInputs=d;this.turboHeaderText=f||"";this.checkoutClientId=b}function k(a,c,d,f,b,g,e,h,m,n,k,u,p){this.asin=c||"";this.offerListingId=d||"";this.quantity=parseInt(f,10)||1;this.isTurboEligible=!!this.asin&&!!this.offerListingId&&a;this.productTitle=b||"";this.incentivizedCart=g||"";this.customItemPrice=e||"";this.addToCartTimeAsUnixEpochMilliseconds=h||"";this.addToCartSessionId=
m||"";this.isDiscoveredAsin=!!n;this.concealmentEligibilityType=k||"";this.orderType=u||"";this.rcxOrdFreq=p||""}function n(a,d){c.logDebug("turbo-checkout-product-state",a,d)}function m(a){if(!a.lineItemInputs||!a.lineItemInputs.length||!a.id)return n('Versioned product state is invalid. Expected non empty "id" and "lineItemInputs". Turbo may NOT show',a),p;var c=!0,d=b.map(a.lineItemInputs,function(a){a=new k(a.isTurboEligible,a.asin,a.offerListingId,a.quantity,a.productTitle,a.incentivizedCart,
a.customItemPrice,a.addToCartTimeAsUnixEpochMilliseconds,a.addToCartSessionId,a.isDiscoveredAsin,a.concealmentEligibilityType,a.orderType,a.rcxOrdFreq);c=c&&a.isTurboEligible;return a});return new h(a.id,c,d,a.turboHeaderText,a.checkoutClientId)}var f=e.get(e.KEYS.TURBO_PRODUCT_STATE_KEY),u=e.get(e.KEYS.PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR),p=new h("buy-now-button",!1,[],"","retailwebsite"),l=new d(!1,[p]);return{get:function(b,e){b=b||f;e=e||u;e=g.parse(b,e);a.logCount("turboCheckoutProductStates",
e.length);1<e.length&&"turbo-checkout-page-state"===b?(c.logError("turbo-checkout-page-state only supports the single item use case! Turbo will NOT show","turbo-checkout-product-state",void 0),b=[]):b=e;if((e=b)&&e.length){var t=!1;b=[];for(var A=0;A<e.length;A++){var q=e[A];if(q)if(q.version)var w=m(q);else q.inputs&&q.eligibility?(w=q.strings||{},q=new k(q.eligibility.isEligible,q.inputs.a,q.inputs.oid,q.inputs.quantity,w.TURBO_CHECKOUT_HEADER,q.inputs.incentivizedCart,q.inputs.customItemPrice,
q.inputs.concealmentEligibilityType),w=new h("buy-now-button",q.isTurboEligible,[q],w.TURBO_CHECKOUT_HEADER,"retailwebsite")):(n('Legacy product state is missing "inputs" or "eligibility". Turbo will NOT show',q),w=p);else n("Product state parsed DOM object is invalid. Turbo may NOT show",q),w=p;t=t||w.isTurboEligible||!1;q=w.id;if(b[q])throw e="Duplicate product state found. id \x3d "+q,n(e,b),Error(e);b.push(w);b[w.id]=w}b=new d(t,b)}else n("Parsed states are invalid. Turbo will NOT show",e),b=
l;n("Turbo Checkout Product State(s)",b);return b}}});"use strict";l.when("A","turbo-configuration","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-auto-open","turbo-checkout-address-id","turbo-checkout-quantity-input","turbo-checkout-subscribe-and-save-quantity-input","turbo-checkout-subscribe-and-save-frequency-input","turbo-checkout-subscribe-and-save-order-type-input","turbo-checkout-warranty-input","turbo-checkout-custom-price-input","turbo-callback-list","turbo-checkout-joined-state",
"turbo-checkout-accessories-input","turbo-checkout-session-id-input","turbo-checkout-page-state","buy-now-to-tango-switch","turbo-checkout-page-ready").register("turbo-checkout-state-handler",function(b,a,c,e,g,d,h,k,n,m,f,u,p,l,t,D,v,r){function q(a,c,b,g,e,p,q,F,A){a=a||h.getQuantity();c=c||d.getAddressId();b=b||f.getLineItem(a);g=g||u.getCustomPrice();p=p||t.getLineItem();q=q||n.getLineItem();F=F||m.getLineItem();A=A||k.getLineItem();return l.createTurboState(a,c,b,g,e,p,q,F,A)}function A(a,c){e.logDebug("turbo-checkout-state-handler",
a,c)}function B(a,c){e.logWarning("turbo-checkout-state-handler",a,c)}function z(a,c,d,b,f,g,e,h){y=q(a,c,d,x,b,f,g,e,h)}function F(){b.trigger("turbo:checkout:product:onChange");I.callAll()}function E(){var a=q();e.isDeepEquals(y,a)||(y=a,A("New Turbo State",y),F())}function G(){var a=y.getSessionId();return a&&0<a.length?a:D.getSessionId()}var J=b.$,K=a.get(a.KEYS.AJAX_PAGE_UPDATE_EVENT),I=p.create(),L=!1;var y=q();return{isProductTurboEligible:function(){return!L&&y.isProductStateEligible()||a.get(a.KEYS.OVERRIDE_ELIGIBILITY)},
isProductTangoEligible:function(){return r.isEnabled()&&v.get().isTangoCheckoutEligible},getLineItems:function(){return y.getLineItems()},getAddressId:function(){return y.getAddressId()},getWeblabAllocation:function(){return y.getWeblabTreatment()},registerCallback:function(a){I.push(a)},startMonitoringPage:function(){g.updateInputsAndThen(z);h.onChange(E);k.onChange(E);n.onChange(E);m.onChange(E);f.onChange(E);u.onChange(E);t.registerCallback(E);b.off(K,E);b.on(K,E);F()},getRequestId:function(){return y.getRequestId()},
getSessionId:function(){return y.getSessionId()},getExperimentName:function(){return y.getWeblab()},getPrimeStatus:function(){return y.isPrimeCustomer()},getAdditionalWeblabAndTreatmentMap:function(){try{var a=y.getAdditionalWeblabs();""===a&&c.logCount("turboStateAdditionalWeblabsEmptyString");var d=JSON.parse(a);return d===x?(c.logCount("turboCheckoutParseAdditionalWeblabsUndefined"),B("JSON::parsed additionalWeblabs as undefined for weblabs: ["+a+"]"),{}):d}catch(aa){return c.logCount("turboCheckoutParseAdditionalWeblabsException"),
B("JSON::parse exception on additionalWeblabs: ["+y.getAdditionalWeblabs()+"]. Exception \x3d "+aa),{}}},getStrings:function(){return{TURBO_LOADING_TEXT:y.getLoadingText(),TURBO_CHECKOUT_HEADER:y.getHeaderText(),TURBO_CLOSE_TEXT:y.getCloseText()}},getInitiateSelector:function(){return y.getInitiateSelector()},isTurboLaunched:function(){return y.isTurboLaunched()},isPhysicalGiftCardExperimentEligible:function(){var a=0!==J("#giftcardcustomtwister_feature_div").length;a&&(A("Physical Gift Card use case"),
c.logCount("turboCheckoutGiftCardUseCase"));return a},setTurboStateNotEligible:function(){L=!0},resolveProductState:function(a){y.resolve(a)},getActiveId:function(){return y.getActiveId()},getRefTag:function(){return y.getRefTag()},getCSRFToken:function(){var a=y.getCSRFToken()||G()||"";if(!a||0>=a.length)B("CSRF Token is empty. This will result in denied requests."),c.logCount("turboCheckoutNoValidCSRFToken");return a},getClientId:function(){return y.getClientId()},getHoldbackSecondaryPanelsWeblab:function(){try{return JSON.parse(y.getHoldbackSecondaryPanelsWeblab())}catch(Q){c.logCount("turboCheckoutParseHoldbackSecondaryPanelsWeblabException"),
B("JSON::parse exception. Exception \x3d "+Q)}},getAmazonApiCSRFToken:function(){var a=y.getAapiCsrfToken()||G()||"";(!a||0>=a)&&B("AAPI CSRF Token is empty. This will result in denied requests.");return a}}});"use strict";l.when("A","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-aui-page-state-parser",function(b,a){var c=b.$;return{parse:function(b,g){b="script[data-a-state*\x3d'"+b+"'], #"+b;g=g?c(g).find(b):c(b);b=[];for(var d=0;d<g.length;d++){a:{try{var e=c(g[d]).text();
var k=JSON.parse(e);break a}catch(n){a.logError("JSON::parse exception. Exception \x3d "+n,"turbo-checkout-aui-page-state-parser",void 0)}k=void 0}k&&b.push(k)}return b}}});"use strict";l.when("A","turbo-checkout-page-state","turbo-checkout-csm","turbo-checkout-state-handler","tango-checkout-urls","turbo-checkout-page-ready").register("tango-checkout-eligibility",function(b,a,c,e,g){function d(a){l.when("ready").execute(function(){b.state("checkout-url-migration-page-state",{checkoutUrl:a})})}function h(a){b.state("checkout-url-migration-page-state",
{ajaxEligibilityInProgress:a})}var k,n,m;return{setEligibleCallback:function(a){n=a},setIneligibleCallback:function(a){m=a},isEligibleFromPageState:function(){return a.get().isJavaPipelineEligible},checkEligibility:function(){k=(new Date).getTime();var a=(new Date).getTime()-k;c.logCount("tangoCheckoutCustomerEligibilityTime",a);h(!1);(a={isTangoEligible:!0},a.isTangoEligible)?(c.logCount("tangoCheckoutCustomerEligible"),n&&n()):(d(""),c.logCount("tangoCheckoutCustomerNotEligible"),m&&m())},setTangoPageStateUrl:d,
setEligibilityAJAXInProgress:h}});"use strict";l.when("A","turbo-configuration","turbo-shopping-portal-switch","java-checkout-url-page-state","turbo-checkout-page-ready").register("tango-checkout-urls",function(b,a,c,e){function g(a){return 0===a.length?"":"?"+a.join("\x26")}function d(a,c){var d=[],b;for(b in a)if(a.hasOwnProperty(b)){var f=a[b];if(c){var g=b;var e=document.createElement("input");e.type="hidden";e.className="checkout-url-migration-request-param";e.name=g;e.value=f;g=e}else g=b+"\x3d"+
f;d.push(g)}return d}function h(a){var c=b.$("#sc-buy-box form, #sw-atc-buy-box form, #sc-luxury-buy-box form, #sc-bazaar-buy-box form");if(0!==c.length){var d=document.createDocumentFragment();a.forEach(function(a){d.appendChild(a)});c.append(d)}}function k(a){l.when("ready").execute(function(){b.state("checkout-url-migration-page-state",{queryParamString:a})})}var n="unknown";return{buildEligibilityPathWithParams:function(){var b={isAsync:"1",pipelineType:"Chewbacca"};b.referrer=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);
b.ref_="chk_"+n+"_eligibility";b=d(b,!1);return(c.isShoppingPortalEnabled()?"/checkout/turbo/tango-eligibility":"/checkout/tango-eligibility")+g(b)},buildProceedToCheckoutPathWithParams:function(){var c=e.get(),b={pipelineType:"Chewbacca"};b.referrer=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);b.ref_=c.javaCheckoutQueryParams.ref_||"ox_"+n+"_proceed";var u=d(b,!0);h(u);b=d(b,!1);b=g(b);k(b);return c.javaCheckoutUrl||"/checkout/entry/cart"},buildBuyNowToTangoCheckoutPathWithParams:function(c){var b={pipelineType:"Chewbacca"};
b.referrer=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);b.isBuyNow="1";b.ref_=(c||"unknown_buy_now")+"_chw";c=d(b,!1);return"/checkout/entry/buynow"+g(c)},setRefMarkerPageContext:function(a){n=a}}});"use strict";l.when("jQuery","turbo-checkout-auto-open","turbo-checkout-page-ready").register("turbo-checkout-page-load-spinner",function(b,a){function c(){0!==b("#turbo-checkout-auto-load-spinner-container").length&&(b("#turbo-checkout-auto-load-spinner-container").remove(),g.unbind("touchmove touchstart touchend touchcancel click scroll",
e))}function e(a){a.preventDefault();a.stopPropagation()}var g=b("body");a.isAutoOpenEligible()&&(g.bind("touchmove touchstart touchend touchcancel click scroll",e),g.append("\x3cdiv id\x3d'turbo-checkout-auto-load-spinner-container' class\x3d'turbo-checkout-auto-load-spinner-container'\x3e\x3cdiv id\x3d'turbo-checkout-auto-load-circle-container' class\x3d'turbo-checkout-auto-load-circle-container'\x3e\x3cdiv id\x3d'turbo-checkout-auto-load-spinner' class\x3d'a-spinner a-spinner-medium turbo-checkout-auto-load-spinner'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"),
setTimeout(c,5E3));return{removePageLoadSpinner:c}});"use strict";l.when("turbo-checkout-page-ready").register("turbo-callback-list",function(){function b(){var a=[];this.callAll=function(){for(var c=0;c<a.length;c++){var b=a[c];b.apply(b,arguments)}};this.push=function(c){if("function"!==typeof c)throw Error("Invalid callback. Expected typeof 'callback' to be 'function'. typeof \x3d "+typeof c);-1===a.indexOf(c)&&a.push(c)};this.remove=function(c){c=a.indexOf(c);-1!==c&&a.splice(c,1)}}return{create:function(){return new b}}});
"use strict";l.when("turbo-callback-list","turbo-checkout-page-ready").register("turbo-filtered-callback-list",function(b){function a(a){var c=b.create();this.callAll=c.callAll;this.remove=c.remove;this.push=function(b){(b=b[a])&&"function"===typeof b&&c.push(b)}}return{create:function(c){if(!c||"string"!==typeof c)throw Error("Invalid filter parameter. Expected 'filter' to be a non empty string. typeof \x3d "+typeof c+" value \x3d "+c);return new a(c)}}});"use strict";l.when("A","turbo-configuration",
"turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-form",function(b,a,c){function e(c){var b=a.get(a.KEYS.FORM_SELECTOR_OVERRIDE);if(b&&0<g(b).length)return g(b);b=a.get(a.KEYS.FORM_TYPE);if("link"===b)return c.find("a");if("form"===b)return c.closest("form");throw Error("Unsupported FORM_TYPE is configured. value \x3d "+b);}var g=b.$,d=/[\/?&]ref_?=([^?&]+)/;return{getForms:e,getRefTag:function(a){if(1!==a.length)return c.logError("Expected getRefTag input to have a single element. Cannot resolve refTag as this is a data quality risk",
"turbo-checkout-form"),c.logDebug("turbo-checkout-form","Expected getRefTag input to have a single element. Cannot resolve refTag as this is a data quality risk",a),"";a=e(a);a=((a.attr("action")||a.attr("href")||"")+"\x26"+a.serialize()).match(d)||{};return 2===a.length?a[1]:""}}});"use strict";l.when("A","turbo-checkout-page-ready").register("turbo-checkout-ajax-wrapper",function(b){return{load:function(a,c){c.hasOwnProperty("timeout")||(c.timeout=2E4);return b.ajax(a,c)},loadWithJQXHR:function(a,
c){c.hasOwnProperty("timeout")||(c.timeout=2E4);return b.$.ajax(a,c)},createXHRRequest:function(){var a=new XMLHttpRequest;a.timeout=2E4;return a}}});"use strict";l.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-session-storage","turbo-checkout-quantity-input","turbo-checkout-address-id","turbo-checkout-warranty-input","turbo-checkout-accessories-input","turbo-checkout-subscribe-and-save-frequency-input","turbo-checkout-subscribe-and-save-order-type-input","turbo-checkout-subscribe-and-save-quantity-input",
"turbo-checkout-sns-utils","turbo-checkout-navigation-window","turbo-checkout-page-ready").register("turbo-checkout-auto-open",function(b,a,c,e,g,d,h,k,n,m,f,u,p){function l(a,b){c.logDebug("turbo-checkout-auto-open",a,b)}function t(){return D()&&0!==w}function D(){var b;if(b="1"===z.trb_open||"1"===c.getUrlQueryParam("trb_open"))(b=e.isPresent("hasTurboAutoOpened"))&&a.logCount("turboCheckoutAutoOpenLoopPrevented"),b=!b;return b}function v(){return 1===w&&D()}function r(){v()&&(t()&&(w=2,e.set("hasTurboAutoOpened",
"1")),F(z.trb_bid),b.trigger("turbo:checkout:auto:open"))}var q=b.$,w=0,B="trb_open trb_addr trb_qty trb_warrAsin trb_auth trb_sid trb_bid trb_accessoryAsin trb_accessoryOffer trb_freq trb_orderType".split(" "),z={},F=function(){};return{setup:function(a,d){if(D()){w=1;var f=p.getWindow().location.href;q.each(B,function(a,b){a=c.getUrlQueryParam(b);z[b]=a;f=c.removeQueryParam(b,a,f)});l("Parameters:",z);c.replaceHistory(f);"function"===typeof a?F=a:c.logError("Initiate action must be supplied, and it must be a function.");
b.on("turbo:checkout:prefetcher:state:dataStale",r);d()}else w=0,l("Disabled")},reset:function(){e.remove("hasTurboAutoOpened")},isAutoOpenEligible:D,isAutoOpenEnabled:t,isAutoOpenReadyToBeOpened:v,updateInputsAndThen:function(a){var c=z.trb_qty,b=z.trb_addr,e=z.trb_warrAsin,p=z.trb_bid,q=z.trb_accessoryAsin,F=z.trb_accessoryOffer,t=z.trb_freq,l=z.trb_orderType,A=z.trb_sns_qty;if(c||b||e||p||q||F){c&&g.setQuantity(c);b&&d.set(b);if(e){h.select(e);var v=h.getLineItem(c)}if(q&&F){k.select(q);var w=
k.getLineItem()}e=u.getFrequencyLineItemForAutoOpen(n,t);q=u.getOrderTypeLineItemForAutoOpen(m,l);t=u.getQuantityLineItemForAutoOpen(f,t,l,A);a(c,b,v,p,w,e,q,t)}}}});"use strict";l.when("turbo-checkout-navigation-window","turbo-checkout-page-ready").register("turbo-checkout-utils",function(b){function a(){return navigator.userAgent}function c(a,b){if(a===b||"function"===typeof a&&"function"===typeof b)return!0;if(typeof a!==typeof b)return!1;if("object"!==typeof a||null===a||null===b)return a===b||
a!==a&&b!==b;var d=Object.getOwnPropertyNames(a);if(d.length!==Object.getOwnPropertyNames(b).length)return!1;for(var g=0;g<d.length;g++){var e=d[g];if(!a.hasOwnProperty(e)||!b.hasOwnProperty(e)||!c(a[e],b[e]))return!1}return!0}var e={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#039;"};return{logError:function(a,c){l.log(a,"ERROR",c||"turbo-checkout-utils")},logWarning:function(a,c){l.log(a,"WARN",c||"turbo-checkout-utils")},logDebug:function(){},getUserAgent:a,isAndroid:function(){return!!a().match(/[a|A]ndroid/)},
isIPhone:function(){return!!a().match(/iPhone/)},isIPad:function(){return!!a().match(/iPad/)},isInternetExplorer:function(){return!!a().match(/MSIE/)},createFQDN:function(a){/^http/.test(a)||(a=b.getWindow().location.origin?b.getWindow().location.origin+a:b.getWindow().location.protocol+"//"+b.getWindow().location.hostname+":"+b.getWindow().location.port+a);return a},getUrlQueryParam:function(a,c){c||(c=b.getWindow().location.href);a=a.replace(/[\[\]]/g,"\\$\x26");return(a=(new RegExp("[?\x26]"+a+
"(\x3d([^\x26#]*)|\x26|#|$)")).exec(c))?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":x},removeQueryParam:function(a,c,b){var d=b;a&&c&&b&&(a=a+"\x3d"+c,d=b.replace(new RegExp("\\?"+a+"[\x26]?","g"),"?"),d=d.replace(new RegExp("[\x26]?"+a,"g"),""));return d},replaceHistory:function(a){b.getWindow().history.pushState&&(b.getWindow().history.replaceState(null,b.getWindow().title,a),b.getWindow())},isNonEmptyString:function(a){return"string"===typeof a&&0<a.length},isDeepEquals:c,escapeHtml:function(a){return a.replace(/[&<>"']/g,
function(a){return e[a]})}}});"use strict";l.when("turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-csm",function(b){function a(a,c,b,d){return"function"===typeof r.uet?r.uet.apply(r.uet,arguments):d||e()}function c(a,c,b){return"function"===typeof r.ues?r.ues.apply(r.ues,arguments):b}function e(){return+new Date}function g(b){function d(){n&&f&&h&&g&&!k&&"function"===typeof l&&(l(n,f,h,g),k=!0)}var f,g,h,n,k=!1,l;this.getId=function(){return b};this.markClick=function(){n=
a("tc",b)};this.markFirstByte=function(){f=c("t0",b,e())};this.markAboveTheFold=function(){h=a("af",b);d()};this.markCriticalFeature=function(){g=a("cf",b);d()};this.whenDataSet=function(a){l=a;d()}}function d(a){"undefined"!==typeof r.ue_t0&&r.ue.count(a,Date.now()-r.ue_t0)}var h=0,k=[];return{createScope:function(){return new g("chk_turbo_"+ ++h)},logCount:function(a,c){c=c||1;b.logDebug("Logging counter "+a+" with value "+c);if(r.ue&&r.ue.count){var f=a+"_time";r.ue.count(a,c);d(f);for(var e=0;e<
k.length;++e)r.ue.count(a+"."+k[e],c),d(f+"."+k[e])}},logCountSimple:function(a,c){c=c||1;b.logDebug("Logging counter "+a+" with value "+c);r.ue&&r.ue.count&&r.ue.count(a,c)},addCounterExtraSuffix:function(a){k.push(a)},timestamp:e}});"use strict";l.when("A","turbo-checkout-csm","turbo-checkout-page-ready").register("turbo-checkout-counter",function(b,a){var c=0,e=0,g=0,d=0,h=0,k=0,n="u";b.on("turbo:checkout:sheet:beforeOpen",function(){a.logCount("turboCheckoutSheetOpen",c);"u"!==n?(++h,a.logCount("turboCheckoutPrefetchUsed",
h),"p"===n?a.logCount("turboCheckoutPrefetchUsedInProgress",h):a.logCount("turboCheckoutPrefetchUsedFull",h)):(++k,a.logCount("turboCheckoutPrefetchMissing",k))});b.on("turbo:checkout:sheet:beforeClose",function(){++e;a.logCount("turboCheckoutSheetClose",e)});b.on("turbo:checkout:prefetcher:state:dataPrefetching",function(){a.logCount("turboCheckoutPrefetchRequested",g);n="p"});b.on("turbo:checkout:prefetcher:state:dataFresh",function(){++d;a.logCount("turboCheckoutPrefetchAvailable",d);n="a"});b.on("turbo:checkout:prefetcher:state:dataStale",
function(){n="u"});return{incrementSheetOpenedCounter:function(){c++},incrementPrefetchCounter:function(){g++},getSheetOpenCount:function(){return c},getPrefetchCount:function(){return g}}});"use strict";l.when("turbo-checkout-page-ready").register("turbo-checkout-cacher",function(){return{createCache:function(b){var a=!1,c;return function(){a||(c=b(),a=!0);return c}}}});"use strict";l.when("A","turbo-configuration","turbo-checkout-utils","turbo-checkout-counter","turbo-checkout-page-ready").register("turbo-checkout-ref-tagger",
function(b,a,c,e){function g(a,c,b){a="chk_"+a+"_"+(c+"_"+e.getPrefetchCount()+"-"+e.getSheetOpenCount());return d(b?a+"_"+b:a)}function d(a){if(!("string"===typeof a&&0<a.length&&64>=a.length&&k.test(a))||n.test(a))throw Error("Invalid ref tag. This would be filtered and replaced in clickstream. Value \x3d "+a);return a}var h={ELIGIBILITY:"eligibility",BUY_NOW:"buyNow",CLOSE:"close"},k=/(^[A-z]$|^[A-z][A-z0-9_-]*[A-Za-z0-9]$)/,n=/[_-]{2,}/,m=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);return{generateRefTag:function(a,
c,b){return"ref_\x3d"+g(a,c,b)},generateValue:g,generateJoinedValue:function(a){if(!a)return g(m,h.BUY_NOW,"fallback");try{var b=a+"_"+(h.BUY_NOW+"_"+e.getPrefetchCount()+"-"+e.getSheetOpenCount());return d(b)}catch(p){return c.logError(p.message,"turbo-checkout-ref-tagger"),g(m,h.BUY_NOW,"fallback")}},generateEligibilityValue:function(){return g(m,h.ELIGIBILITY)},ACTIONS:h,TAGS:{TOUCH:"touch",TOUCH_X:"touchX",BACK:"back",ROTATION:"rotation",DONE:"done"}}});"use strict";l.when("A","turbo-checkout-page-ready").register("turbo-checkout-prefetch-timer",
function(b){function a(){d||(d=!0,b.trigger("turbo:checkout:timer:onTimeout"))}function c(){if(d)return!0;var a=(new Date).getTime();return g?6E5<=a-g:!1}var e,g,d=!1;return{startTimer:function(){e||(e=r.setTimeout(a,6E5));g||(g=(new Date).getTime())},isTimeout:c,resetTimer:function(){r.clearTimeout(e);d=!1;g=e=null},checkTimeout:function(){c()&&a()}}});"use strict";l.when("A","jQuery","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-form","turbo-checkout-buy-now-onclick-handler",
"turbo-configuration","turbo-checkout-content-loader","turbo-checkout-page-ready").register("turbo-checkout-buy-now-button",function(b,a,c,e,g,d,h,k,n){function m(a,c){e.logDebug("turbo-checkout-buy-now-button",a,c)}function f(c){return c?u(c):a(g.getInitiateSelector())}function u(b){var d=a("#"+b),f=k.get(k.KEYS.BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID);if(!f)return d;var g=a("[id\x3d"+b+"]");if(2>g.length)return d;c.logCount("turboCheckoutBuyNowDuplicateIdPresent");m("Duplicate nodes present for BuyNow button ID: #"+
b+". Resolving BuyNow button with CSS: "+f);g=g.filter(f);return 1!==g.length?(c.logCount("turboCheckoutBuyNowUnableToResolveButtonIdWithCss"),e.logError("Unable to resolve a unique BuyNow button with CSS: "+f+". Defaulting to first button with ID: #"+b,"turbo-checkout-buy-now-button",void 0),d):g}function p(b){m("Buy now button clicked");c.logCount("turboCheckoutBuyNowClicked");var f=n.getCheckEligiblityCallReferrer()||"UNKNOWN",e="C";n.getCheckEligibilityMigrationWeblab()&&(e=n.getCheckEligibilityMigrationWeblab().getTreatment());
c.logCount("buyNowClicked:Referrer:"+f+":WeblabTreatment:"+e+":EligibilityCallState:"+n.getEligibilityCallState());"landscape"===z?c.logCount("turboCheckoutLandscapeOrientation"):c.logCount("turboCheckoutPortraitOrientation");h.isConflictingOnClickListenerPresent(a(b.currentTarget))&&(B=!0);b&&b.currentTarget&&b.currentTarget.id||(m("Click event target is INVALID. Expected event target with an id. Turbo will NOT show",b),B=!0);if(B)B=!1,m("Buy now button callbacks supressed");else{g.resolveProductState(b.currentTarget.id);
m("Calling buy now button callbacks...");f=!1;for(e=0;e<w.length;e++)f=f||w[e]();f?(m("Suppressing default buy now button action"),b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),f=!0):f=void 0;if(f)return!1}d.getForms(a(b.currentTarget)).attr("data-action",l());m("Calling default BuyNow action. User will be sent to Checkout SPC. Turbo will NOT show.");c.logCount("turboCheckoutBuyNowDefault");h.callCachedOnClickListenerIfPresent(b.currentTarget,b);return!0}function l(){return f().attr("name")||
"submit.buy-now"}function t(a){for(var c=w.length-1;0<=c;--c)w[c]===a&&w.splice(c,1)}function D(a){if(!a&&1<f().length)throw Error("Button id parameter is NOT present. Cannot execute action without a button id on a page with multiple buy now buttons!");}function v(a){a=f(a);r(a);a.click()}function r(b){for(var d=k.get(k.KEYS.CONFLICTING_INITIATE_LISTENERS),f=0;f<d.length;f++){var e=d[f];m("Unbound configured event '"+e+"' from buy now button");c.logCount("turboCheckoutBuyNowButtonConflictingListeners");
b.unbind(e);a(document.body).undelegate(b.selector,e)}}var q=k.get(k.KEYS.BUY_NOW_CLICK_EVENT),w=[],B=!1,z="portrait";b.on("turbo:checkout:clickInitiate",v);b.on("turbo:checkout:orientation:onChange",function(a){z=a.orientation});c.logCount("turboCheckoutBuyNowButtonBound");return{registerOnClickCallback:function(a){t(a);w.push(a)},deregisterOnClickCallback:t,executeOriginalBuyNowAction:function(a){D(a);B=!0;var e=d.getForms(f(a)).attr("action");e&&-1!==e.indexOf("/checkout/entry/buynow")?c.logCount("turboCheckoutYieldToTango"):
c.logCount("turboCheckoutYieldToGurupa");b.trigger("turbo:checkout:buyNowDisabled");b.trigger("turbo:checkout:clickInitiate",a)},executeTurboBuyNowAction:function(a){D(a);B=!1;v(a)},getSubmitAction:l,bindTurboClickEvent:function(a){a=a||f();h.removeConflictingOnClickListenerIfPresentAndCacheIt(a);a.unbind(q).bind(q,p)},removeConflictingListeners:r,getBuyNowButtons:f}});"use strict";l.when("A","jQuery","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-buy-now-onclick-handler",
function(b,a,c,e){function g(c,b){c.each(function(c,d){a(d).removeProp(b)})}function d(c,b){var d=!1;c.each(function(){var c=a(this),f=c.find("[onclick]"),e=c.prop("onclick"),g=f.prop("onclick");return n(e)&&n(g)||1<f.length||!n(e||g)||k(c)!==b?(d=!0,!1):!0});return d}function h(a){return a.prop("onclick")||a.find("[onclick]").prop("onclick")}function k(a){return a.attr("onclick")||a.find("[onclick]").attr("onclick")}function n(a){return"function"===typeof a}function m(a,c){e.logDebug("turbo-checkout-buy-now-onclick-handler",
a,c)}var f;return{callCachedOnClickListenerIfPresent:function(a,b){n(f)&&(m("BuyNow button onclick listener function called."),c.logCount("turboCheckoutBuyNowButtonOnClickListenerCalled"),f.call(a,b.originalEvent))},removeConflictingOnClickListenerIfPresentAndCacheIt:function(a){var b=h(a),e=k(a);n(b)&&e&&(d(a,e)?(m("[DOM ERROR] Turbo will NOT show. BuyNow button node has INVALID 'onclick' DOM structure.",a),c.logCount("turboCheckoutBuyNowButtonInvalidOnClickDOM")):(m("BuyNow button node has 'onclick' attribute. Removing its listener and caching it.",
a),c.logCount("turboCheckoutBuyNowButtonOnClickListenerRemoveAndCache"),f=b,b=a.find("[onclick]"),g(a,"onclick"),g(b,"onclick")))},isConflictingOnClickListenerPresent:function(a){if(a=n(h(a)))m("Turbo will NOT show. BuyNow button node has conflicting 'onclick' listener."),c.logCount("turboCheckoutBuyNowButtonConflictingOnClickListener");return a}}});"use strict";l.when("A","turbo-checkout-utils","turbo-checkout-buy-now-button","turbo-checkout-page-ready").register("turbo-checkout-buy-now-integration",
function(b,a,c){function e(c,b){a.logDebug(c,"turbo-checkout-buy-now-integration",b)}var g=b.$,d=[];b.on("turbo:checkout:page:reappear",function(){e("Removing additional form inputs from form",d);for(var a;(a=d.shift())!==x;)a.remove()});return{isBuyNow:function(a){return a instanceof g&&a.attr("data-action")===c.getSubmitAction()},checkoutWith:function(c,b){if(Array.isArray(c)&&b instanceof g){var h=b;for(var m=1;0<h.find('input[name\x3d"asin.'+m+'"]').length||0<h.find('input[name\x3d"offeringID.'+
m+'"]').length;)m++;h=m;m=[];for(var f=0;f<c.length;f++){var k=c[f];if(k!==x&&k.asin&&k.offerListingId){var l=h;k=[g("\x3cinput /\x3e",{type:"hidden",name:"asin."+l,value:k.asin}),g("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+l,value:k.offerListingId}),g("\x3cinput /\x3e",{type:"hidden",name:"quantity."+l,value:k.quantity||1})];Array.prototype.push.apply(m,k);h++}else e('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!',k),
a.logError('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!')}f=b.find('input[name\x3d"itemCount"]');1===f.length?f.val(h):b.append(g("\x3cinput /\x3e",{type:"hidden",name:"itemCount",value:h}));e("Appended additional buy now inputs.",m);b.append.apply(b,m);d=m}else h="Inputs are invalid. Expected array and jQuery object. lineItems \x3d "+c+" $form \x3d "+b,e(h,arguments),a.logError(h)}}});"use strict";l.when("turbo-checkout-page-ready").register("turbo-configuration-keys",
function(b){var a={HOST_PAGE_TYPE_IDENTIFIER:"HOST_PAGE_TYPE_IDENTIFIER",IS_BUY_NOW_TO_TANGO_ENABLED:"IS_BUY_NOW_TO_TANGO_ENABLED",IS_BUY_NOW_TO_TANGO_PRIME_SPLIT:"IS_BUY_NOW_TO_TANGO_PRIME_SPLIT",BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST:"BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST",BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST_PRIME:"BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST_PRIME",BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST_NON_PRIME:"BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST_NON_PRIME",BUY_NOW_TO_TANGO_PARAMETER_TO_FEATURE_MAPPING:"BUY_NOW_TO_TANGO_PARAMETER_TO_FEATURE_MAPPING",
BUY_NOW_TO_TANGO_FEATURE_PARAMETER_GROUP_MAPPING:"BUY_NOW_TO_TANGO_FEATURE_PARAMETER_GROUP_MAPPING",FORM_TYPE:"FORM_TYPE",FORM_SELECTOR_OVERRIDE:"FORM_SELECTOR_OVERRIDE",BUY_NOW_BUTTON_SELECTOR:"BUY_NOW_BUTTON_SELECTOR",BUY_NOW_BUTTON_V2_SELECTOR:"BUY_NOW_BUTTON_V2_SELECTOR",BUY_NOW_CLICK_EVENT:"BUY_NOW_CLICK_EVENT",BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID:"BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID",QUANTITY_SELECT_SELECTOR:"QUANTITY_SELECT_SELECTOR",ADDRESS_INPUT_SELECTORS:"ADDRESS_INPUT_SELECTORS",
SESSION_ID_SELECTOR:"SESSION_ID_SELECTOR",LEGACY_SESSION_ID_IDENTIFIER:"LEGACY_SESSION_ID_IDENTIFIER",WARRANTY_CHECKBOX_INPUT_SELECTOR:"WARRANTY_CHECKBOX_INPUT_SELECTOR",WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR:"WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR",WARRANTY_ASIN_INPUT_NAME:"WARRANTY_ASIN_INPUT_NAME",WARRANTY_OFFER_INPUT_SELECTOR:"WARRANTY_OFFER_INPUT_SELECTOR",AJAX_PAGE_UPDATE_EVENT:"AJAX_PAGE_UPDATE_EVENT",PREFETCH_TREATMENT:"PREFETCH_TREATMENT",NO_PREFETCH_TREATMENT:"NO_PREFETCH_TREATMENT",
BUY_NOW_ONLY_TREATMENT:"BUY_NOW_ONLY_TREATMENT",IS_DEVICE_FILTER_REQUIRED:"IS_DEVICE_FILTER_REQUIRED",IS_SIGN_IN_SUPPORTED:"IS_SIGN_IN_SUPPORTED",USES_MASH_WILL_REAPPEAR:"USES_MASH_WILL_REAPPEAR",SHOW_SIGN_IN_INTERFACE:"SHOW_SIGN_IN_INTERFACE",IFRAME_ID:"IFRAME_ID",EXTEND_ELIGIBLE_STATE:"EXTEND_ELIGIBLE_STATE",VIEW_ADAPTER:"VIEW_ADAPTER",PAGE_STATE_PARSING_ROOT_NODE_SELECTOR:"PAGE_STATE_PARSING_ROOT_NODE_SELECTOR",PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR:"PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR",
JAVA_CHECKOUT_URL_PAGE_STATE_PARSING_ROOT_NODE_SELECTOR:"JAVA_CHECKOUT_URL_PAGE_STATE_PARSING_ROOT_NODE_SELECTOR",TURBO_PAGE_STATE_KEY:"TURBO_PAGE_STATE_KEY",TURBO_PRODUCT_STATE_KEY:"TURBO_PRODUCT_STATE_KEY",JAVA_CHECKOUT_URL_PAGE_STATE_KEY:"JAVA_CHECKOUT_URL_PAGE_STATE_KEY",DEVICE_OVERRIDE:"DEVICE_OVERRIDE",CONFLICTING_INITIATE_LISTENERS:"CONFLICTING_INITIATE_LISTENERS",VAS_CHANGE_EVENTS:"VAS_CHANGE_EVENTS",VAS_CHECKBOX_SELCTOR:"VAS_CHECKBOX_SELCTOR",CHECKBOX_EXCLUSION_ROOT_NODES:"CHECKBOX_EXCLUSION_ROOT_NODES",
MASH_ADAPTER:"MASH_ADAPTER",IS_ADD_TO_CART_ENABLED:"IS_ADD_TO_CART_ENABLED",IS_BUYNOW_ENABLED_FOR_SCREENREADER:"IS_BUYNOW_ENABLED_FOR_SCREENREADER",BACKGROUND_SCROLL_TARGET_SELECTOR:"BACKGROUND_SCROLL_TARGET_SELECTOR",NO_PREFETCH_EXPERIMENT_WEBLABS:"NO_PREFETCH_EXPERIMENT_WEBLABS",ENABLED_ACCESSORIES_SELECTOR:"ENABLED_ACCESSORIES_SELECTOR",SUBSCRIBE_AND_SAVE_DELAYED_SIGNUP_FREQUENCY_VALUE_SELECTOR:"SUBSCRIBE_AND_SAVE_DELAYED_SIGNUP_FREQUENCY_VALUE_SELECTOR",SUBSCRIBE_AND_SAVE_ONML_FREQUENCY_VALUE_SELECTOR:"SUBSCRIBE_AND_SAVE_ONML_FREQUENCY_VALUE_SELECTOR",
SUBSCRIBE_AND_SAVE_ONML_FREQUENCY_CHANGE_EVENT:"SUBSCRIBE_AND_SAVE_ONML_FREQUENCY_CHANGE_EVENT",SUBSCRIBE_AND_SAVE_DELAYED_SIGNUP_FREQUENCY_CHANGE_EVENT:"SUBSCRIBE_AND_SAVE_DELAYED_SIGNUP_FREQUENCY_CHANGE_EVENT",SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_DELAYED_SIGNUP_SELECTOR:"SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_DELAYED_SIGNUP_SELECTOR",SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_SELECTOR:"SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_SELECTOR",SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_ONML_SELECTOR:"SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_ONML_SELECTOR",
SUBSCRIBE_AND_SAVE_QUANTITY_SELECTOR:"SUBSCRIBE_AND_SAVE_QUANTITY_SELECTOR",OVERRIDE_ELIGIBILITY:"OVERRIDE_ELIGIBILITY",validate:function(c){if("string"!==typeof c||!a[c])throw Error("The key '"+c+"' is not defined within 'turbo-configuration-keys'.");}};return a});"use strict";l.when("A","turbo-configuration-keys","turbo-device-configuration","turbo-client-configuration","turbo-eligibility-override","turbo-checkout-page-ready").register("turbo-configuration",function(b,a,c,e,g){function d(a,c){var b=
h(a);m[a]=b===x?c:b}function h(a){var b=e[a];a=c[a];if(k(b))return b;if(k(a))return a}function k(a){return"boolean"===typeof a||a}function n(a){if(!k(e[a])&&!k(c[a]))throw Error("Required configuration override for key '"+a+"' is missing");m[a]=h(a)}var m,f={isGift:"GiftOptions","items[0.base][additionalParameters][giftOptions][includeGiftReceipt]":"GiftOptions","gift-wrap":"GiftOptions",offerListingID:"OfferService",snsMostCommonFrequency:"SNS",snsOnmlOfferId:"SNS",snsOptIn:"SNS",rcxOrdFreq:"SNS",
snsOfferListingID:"SNS",ref:"SNS",skipCart:"",isBuyBack:"",shippingAddressID:"",tag:"",b2brdOptIn:"",cartCustomerID:"",fromSignIn:"",siteState:"",mbboid:"",mbbq:"",mbba:"","openid.assoc_handle":"","openid.claimed_id":"","openid.identity":"","openid.mode":"","openid.ns":"","openid.ns.pape":"","openid.op_endpoint":"","openid.pape.auth_policies":"","openid.pape.auth_time":"","openid.response_nonce":"","openid.return_to":"","openid.sig":"","openid.signed":"","custom-name.1.incentivizedCart":"IncentivizedCart",
"custom-value.1.incentivizedCart":"IncentivizedCart",pickupAddressId:"BOPIS",pickupStoreChainId:"BOPIS",pickupStoreChainOwnerId:"BOPIS",inHouseInstallments:"UFO","installments-check":"UFO","installments-programId":"UFO",isInstallmentsChecked:"UFO",paymentOfferInfo:"UFO","items[0.base][additionalParameters][paymentOfferInfo]":"UFO","items[0.base][additionalParameters][installments][programId]":"UFO",serial:"",a:"",checkoutClientId:"","discoveredAsins.1":"",customId:"MerchOnDemand",customizationToken:"ConfigurableProduct",
fulfillmentType:"",claim_type:"",new_account:"",returnFromLogin:"",captcha_verified:"",pickupAsin:"","session-id":"",clientName:"",merchantID:"",useDefaultCart:"",distributableLicense:"","asin.1":"","offeringID.1":"","quantity.1":"",purchaseAsin:"",type:"",AssociateTag:"",dplnkId:"","submit.buy-now":"","custom-name.2.1":"","address-ui-widgets-enableEmailAddress":"",oid:"",sr:"",ASIN:"","custom-name.1.2":"","address-ui-widgets-enableAddressWizardInlineSuggestions":"","address-ui-widgets-enableAddressWizardForm":"",
"address-ui-widgets-enterAddressPostalCode":"","address-ui-widgets-locale":"",rebateId:"","custom-value.1.5":"","address-ui-widgets-avsSuppressSoftblock":"",offerListingId:"","custom-value.1.6":"",qid:"",cimarronIssuerId:"","custom-name.2.2":"",popoverContentStringId:"","custom-name.1.11":"","address-ui-widgets-csrfToken":"",registryItemID:"","address-ui-widgets-delivery-instructions-desktop-expander-context":"",paymentCadenceValue:"",numberOfPayments:"","address-ui-widgets-obfuscated-customerId":"",
"address-ui-widgets-enterAddressLine2":"","custom-name.1.13":"",addressID:"","custom-name.1.3":"","address-ui-widgets-amazonBusinessGroupId":"","custom-name.2.3":"",timestamp:"","ppw-widgetState":"",taxDistributionStrategy:"","address-ui-widgets-enableLatestAddressWizardForm":"","custom-value.2.3":"","custom-value.2.1":"","custom-value.2.2":"","custom-value.1.13":"","address-ui-widgets-enterAddressFullName":"","inHouseInstallments-programType":"","address-ui-widgets-enableAddressDetails":"",_from:"",
"address-ui-widgets-enterAddressPhoneNumber":"","custom-value.1.0":"","address-ui-widgets-locationData":"",turboPageRequestId:"","custom-name.2.4":"","address-ui-widgets-delivery-instructions-data":"","address-ui-widgets-enterAddressCity":"",quantity:"",paymentCadenceUnit:"","address-ui-widgets-returnLegacyAddressID":"",addressId:"","custom-value.1.7":"",purchaseInputs:"","custom-value.1.1":"","custom-name.1.1":"","preorder-button":"","address-ui-widgets-heading-string-id":"",ref_:"","address-ui-widgets-enterAddressStateOrRegion":"",
triggerTurboWeblab:"","custom-value.1.2":"","custom-name.1.4":"",sessionID:"","address-ui-widgets-enableDeliveryInstructions":"","address-ui-widgets-avsSuppressSuggestion":"","custom-name.1.6":"",ttclid:"","address-ui-widgets-countryCode":"","custom-name.1.5":"",turboPageSessionId:"","address-ui-widgets-ab-delivery-instructions-data":"","address-ui-widgets-form-load-start-time":"","custom-value.1.3":"",termsAndConditionUrl:"","custom-value.1.11":"",offeringID:"","custom-name.1.0":"","address-ui-widgets-addressFormHideHeading":"",
"address-ui-widgets-address-wizard-interaction-id":"","custom-name.1.7":"","address-ui-widgets-use-as-my-default":"","custom-name.1.12":"","custom-value.1.12":"","address-ui-widgets-addressFormButtonText":"",offerConfigurationType:"","address-ui-widgets-clientName":"",registryID:"","address-ui-widgets-enableAddressTips":"",buyNow:"","address-ui-widgets-previous-address-form-state-token":"",asin:"",fbclid:"","custom-value.1.4":"",triggerTurboWeblabName:"","custom-value.2.4":"","address-ui-widgets-addressFormHideSubmitButton":"",
"address-ui-widgets-enterAddressLine1":"","items[0.upsell][asin]":"AccessoryUpsell"},l={},p;for(p in f)if(f.hasOwnProperty(p)&&""!==f[p]){var A=f[p];l[A]||(l[A]=[]);l[A].push(p)}return{get:function(c){a.validate(c);m||(m={},n(a.HOST_PAGE_TYPE_IDENTIFIER),n(a.SHOW_SIGN_IN_INTERFACE),n(a.EXTEND_ELIGIBLE_STATE),n(a.VIEW_ADAPTER),d(a.IS_BUY_NOW_TO_TANGO_ENABLED,!1),d(a.IS_BUY_NOW_TO_TANGO_PRIME_SPLIT,!1),d(a.BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST,{}),d(a.BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST_PRIME,
{}),d(a.BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST_NON_PRIME,{}),d(a.FORM_TYPE,"form"),d(a.FORM_SELECTOR_OVERRIDE,""),d(a.BUY_NOW_BUTTON_SELECTOR,"#buy-now-button"),d(a.BUY_NOW_BUTTON_V2_SELECTOR,".checkout-buy-now"),d(a.BUY_NOW_CLICK_EVENT,"click.turboCheckout"),d(a.BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID,""),d(a.QUANTITY_SELECT_SELECTOR,'select[name\x3d"quantity"]'),d(a.SESSION_ID_SELECTOR,""),d(a.LEGACY_SESSION_ID_IDENTIFIER,""),d(a.ADDRESS_INPUT_SELECTORS,["#unifiedLocation1ClickAddress",
"#unifiedLocationAddress"]),d(a.WARRANTY_CHECKBOX_INPUT_SELECTOR,".mbb-checkbox input[name\x3dmbba]"),d(a.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR,".mbb-checkbox-column"),d(a.WARRANTY_ASIN_INPUT_NAME,"mbba"),d(a.WARRANTY_OFFER_INPUT_SELECTOR,"#mbb-offering-id"),d(a.AJAX_PAGE_UPDATE_EVENT,"a:pageUpdate"),d(a.PREFETCH_TREATMENT,"PREFETCH_DISABLED"),d(a.NO_PREFETCH_TREATMENT,"T1"),d(a.BUY_NOW_ONLY_TREATMENT,"BUY_NOW_LAUNCHED"),d(a.IS_DEVICE_FILTER_REQUIRED,!1),d(a.IS_SIGN_IN_SUPPORTED,!0),d(a.USES_MASH_WILL_REAPPEAR,
!1),d(a.IFRAME_ID,"turbo-checkout-iframe"),d(a.PAGE_STATE_PARSING_ROOT_NODE_SELECTOR,"#turboState"),d(a.PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR,"#turboState"),d(a.JAVA_CHECKOUT_URL_PAGE_STATE_PARSING_ROOT_NODE_SELECTOR,"#turboState"),d(a.TURBO_PAGE_STATE_KEY,"turbo-checkout-page-state"),d(a.TURBO_PRODUCT_STATE_KEY,"turbo-checkout-page-state"),d(a.JAVA_CHECKOUT_URL_PAGE_STATE_KEY,"java-checkout-url-page-state"),d(a.DEVICE_OVERRIDE,""),d(a.CONFLICTING_INITIATE_LISTENERS,[]),d(a.CHECKBOX_EXCLUSION_ROOT_NODES,
"#simpleBundle_feature_div #monthlyPayments_feature_div #bbg_feature_div #addons_feature_div #mobile-accessory-upsell #twister-plus-feature #payment-options-feature #detailPageGifting_feature_div #giftingODF_feature_div #giftWrapInfoFeature_feature_div #dynamicGiftWrapInfoFeature_feature_div".split(" ")),d(a.ENABLED_ACCESSORIES_SELECTOR,".simpleBundleCheckBoxArea"),d(a.SUBSCRIBE_AND_SAVE_DELAYED_SIGNUP_FREQUENCY_VALUE_SELECTOR,'input[name\x3d"rcxOrdFreqsnsV2"]'),d(a.SUBSCRIBE_AND_SAVE_ONML_FREQUENCY_VALUE_SELECTOR,
'input[name\x3d"rcxOrdFreqonmlV2"]'),d(a.SUBSCRIBE_AND_SAVE_ONML_FREQUENCY_CHANGE_EVENT,"a:accordion:replenishment-onml-frequency-accordion:select"),d(a.SUBSCRIBE_AND_SAVE_DELAYED_SIGNUP_FREQUENCY_CHANGE_EVENT,"a:accordion:replenishment-sns-frequency-accordion:select"),d(a.SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_SELECTOR,'[data-a-input-name\x3d"snsDeliveryOption"]'),d(a.SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_DELAYED_SIGNUP_SELECTOR,"#snsDeliveryOpt"),d(a.SUBSCRIBE_AND_SAVE_DELIVERY_OPTION_ONML_SELECTOR,"#onmlDeliveryOpt"),
d(a.SUBSCRIBE_AND_SAVE_QUANTITY_SELECTOR,"#rcxsubsQuan"),d(a.MASH_ADAPTER,""),d(a.IS_ADD_TO_CART_ENABLED,!0),d(a.IS_BUYNOW_ENABLED_FOR_SCREENREADER,!0),d(a.BACKGROUND_SCROLL_TARGET_SELECTOR,"#productTitleGroupAnchor"),d(a.VAS_CHANGE_EVENTS,["turbo:checkout:sheet:doClose"]),d(a.VAS_CHECKBOX_SELCTOR,"#vas-checkbox-input"),d(a.VAS_CHANGE_EVENTS,["turbo:checkout:sheet:doClose"]),d(a.VAS_CHECKBOX_SELCTOR,"#vas-checkbox-input"),d(a.NO_PREFETCH_EXPERIMENT_WEBLABS,["RCX_CHECKOUT_TURBO_PRIME_UPSELL_222066"]),
d(a.BUY_NOW_TO_TANGO_PARAMETER_TO_FEATURE_MAPPING,f),d(a.BUY_NOW_TO_TANGO_FEATURE_PARAMETER_GROUP_MAPPING,l),d(a.OVERRIDE_ELIGIBILITY,g));var b=m;return b[c]},KEYS:b.copy(a)}});"use strict";l.when("A","turbo-checkout-utils","turbo-checkout-weblab-allocation","turbo-checkout-eligibility-aggregator","turbo-checkout-state-handler","turbo-checkbox-exclusion-listener","turbo-checkout-content-loader","turbo-checkout-device-filter","turbo-callback-list","turbo-checkout-auto-open","turbo-checkout-vas-input",
"turbo-checkout-accessories-input","turbo-checkout-devices-accessories-input","turbo-checkout-devices-account-linking-input","turbo-checkout-page-ready").register("turbo-base-eligible-state",function(b,a,c,e,g,d,h,k,n,m,f,l,p,A){function t(){z=!0}function u(){z=!1}function v(){var a=new r;k.isDeviceTurboEligible()||a.invalidate("Device is NOT eligible");h.isError()&&!c.isNoPrefetch()&&a.invalidate("Prefetch failed");g.isProductTurboEligible()||a.invalidate("Product is NOT eligible");m.isAutoOpenEnabled()||
z||a.invalidate("Cheetah eligibility response is false");c.isControl()&&a.invalidate("Weblab is in CONTROL");c.isBuyNowOnly()&&a.invalidate("Weblab is in buy now only treatment");f.isSelected()&&a.invalidate("Value added service is selected and NOT supported");l.isEligible()||a.invalidate("Accessory selection was not eligible");d.isAnyCheckboxChecked()&&a.invalidate("Exclusion case checkbox is checked");A.isEligible()||a.invalidate("Devices Accessory selection was not eligible");p.isEligible()||a.invalidate("Devices Accessory selection was not eligible");
w.callAll(a);a.logInvalidState();return a.canShow()}function r(){var c=!0,b=[];this.invalidate=function(a){c=!1;b.push(a)};this.logInvalidState=function(){c||a.logDebug("turbo-base-eligible-state","Cannot show turbo because: "+b)};this.canShow=function(){return c}}function q(a){B.callAll(v(),a)}var w=n.create(),B=n.create(),z=!1;return{addStateCheck:function(a){w.push(a)},canShow:v,registerStateChangeCallback:function(a){B.push(a)},onStateChange:q,isTangoAsinEligibleAndTurboIneligible:function(){return g.isProductTangoEligible()&&
(!z||!e.isTurboEligible())},setup:function(){h.registerCallback({onTurboEligible:t,onFinish:t,onTurboIneligible:u});g.registerCallback(q);d.onStateChange(q);f.onChange(q);l.registerCallback(q);p.registerCallback(q);A.registerCallback(q)}}});"use strict";l.when("A","turbo-callback-list","turbo-checkout-page-ready").register("turbo-checkout-base-view",function(b,a){function c(c){if("string"!==typeof c)throw Error("Parameter 'iFrameContainerSelector' is not a string.");this.onBoundsAdjustedCallbacks=
a.create();this.IFRAME_CONTAINER_SELECTOR=c}var e=b.$;c.prototype.updateBounds=function(a,c){if("number"!==typeof a)throw Error("Parameter 'iFrameContainerHeightInPixels' is not a number. Cannot validate bounds.");var b=this.$getIFrameContainer().height(),d=a-b,e=b+d;0!==d&&(this.$getIFrameContainer().height(e),this.updateScrollHeight(a,c),a=parseInt(this.$getIFrameContainer().css("min-height"),10),e=e>a?e:a,b!==e&&this.onBoundsAdjustedCallbacks.callAll(e))};c.prototype.updateScrollHeight=function(a,
c){c&&a!==c?(this.$getIFrame().height(c),this.$getIFrameContainer().css("overflow-y","scroll"),this.$getIFrameContainer().css("-webkit-overflow-scrolling","touch")):(this.$getIFrame().height("100%"),this.$getIFrameContainer().css("overflow-y",""),this.$getIFrameContainer().css("-webkit-overflow-scrolling",""))};c.prototype.getHeight=function(){return this.$getIFrameContainer().height()};c.prototype.$getIFrameContainer=function(){return e(this.IFRAME_CONTAINER_SELECTOR)};c.prototype.$getIFrame=function(){return e(this.IFRAME_CONTAINER_SELECTOR+
" iframe")};c.prototype.pushBoundsAdjustedCallback=function(a){this.onBoundsAdjustedCallbacks.push(a)};return{extend:function(){function a(){c.apply(this,arguments)}a.prototype=Object.create(c.prototype);return a.prototype.constructor=a}}});"use strict";l.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-eligible-state-check",function(b){b.get(b.KEYS.EXTEND_ELIGIBLE_STATE)||l.when("turbo-base-eligible-state").register("turbo-checkout-eligible-state",function(a){return{canShow:a.canShow,
registerStateChangeCallback:a.registerStateChangeCallback,setup:a.setup}})});"use strict";l.when("A","turbo-checkout-state-handler","turbo-configuration","turbo-initiate-migration-switch","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-weblab-allocation",function(b,a,c,e){function g(){return a.getWeblabAllocation()}function d(){return a.getExperimentName()}function h(){var c=a.getAdditionalWeblabAndTreatmentMap(),b={},d;for(d in c)c.hasOwnProperty(d)&&-1===m.indexOf(d)&&
(b[d]=c[d]);return b}function k(){return"C"===g()}function n(){var a=c.get(c.KEYS.NO_PREFETCH_EXPERIMENT_WEBLABS);return Array.isArray(a)&&-1!==a.indexOf(d())&&!k()}var m="PAX_CHECKOUT_BUY_NOW_TO_TANGO_MOBILE_EXPERIMENT_969578 PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581 PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_NON_PRIME_1088576 UPMT_CHECKOUT_BUY_NOW_GIFT_TANGO_MOBILE_1044567 UPMT_CHECKOUT_BUY_NOW_GIFT_TANGO_DESKTOP_1044576 PAX_CHECKOUT_BUY_NOW_UFO_TANGO_MOBILE_1116443 PAX_CHECKOUT_BUY_NOW_UFO_TANGO_DESKTOP_1118473 PAX_CHECKOUT_BUY_NOW_AMP_TANGO_MOBILE_1118485 PAX_CHECKOUT_BUY_NOW_AMP_TANGO_DESKTOP_1118500 PAX_CHECKOUT_BUY_NOW_GC_TANGO_1121297 PAX_CHECKOUT_BUY_NOW_TO_TANGO_REMOVE_LEGACY_PIPELINE_PARAMETER_1125072 PAX_CHECKOUT_VAS_ENABLE_BUY_NOW_TANGO_1165794 PAX_CHECKOUT_ALC_BUY_NOW_TANGO_1185935 PAX_CHECKOUT_REGISTRY_PARAMS_TANGO_BUYNOW_1190070".split(" ");
return{getAllocation:g,getExperimentName:d,getAdditionalWeblabAndTreatmentMap:h,getBuyNowToTangoWeblabs:function(){for(var c=m,b=a.getAdditionalWeblabAndTreatmentMap(),d={},e=0;e<c.length;e++)b.hasOwnProperty(c[e])&&(d[c[e]]=b[c[e]]);return d},getHoldbackSecondaryPanelsWeblab:function(){return a.getHoldbackSecondaryPanelsWeblab()},isControl:k,isBuyNowOnly:function(){return g()===c.get(c.KEYS.BUY_NOW_ONLY_TREATMENT)&&!e.isEnabled()},isDisableTurboWeblabInTreatment:function(){for(var a=h(),c=["RCX_CHECKOUT_DISABLE_TURBO_FOR_NPA_EXPERIMENT_543201",
"RCX_CHECKOUT_DISABLE_TURBO_FOR_PRIME_MOBILE_EXPERIMENT_601969","RCX_CHECKOUT_DISABLE_TURBO_FOR_PRIME_DESKTOP_EXPERIMENT_601976","RCX_CHECKOUT_DISABLE_TURBO_FOR_NPA_MOBILE_EXPERIMENT_1173806","RCX_CHECKOUT_DISABLE_TURBO_FOR_NPA_DESKTOP_EXPERIMENT_1173801"],b=0;b<c.length;b++){var d=c[b];if(d in a&&"T1"===a[d])return!0}return!1},isPrefetch:function(){return e.isEnabled()?!1:!n()&&g()===c.get(c.KEYS.PREFETCH_TREATMENT)},isNoPrefetch:function(){if(e.isEnabled())return!0;var a=c.get(c.KEYS.NO_PREFETCH_TREATMENT);
return n()||!!g().match(a)}}});"use strict";l.when("A","jQuery","turbo-checkout-ajax-wrapper","turbo-checkout-utils","turbo-checkout-urls","turbo-checkout-csm","turbo-checkout-weblab-allocation","turbo-checkout-buy-now-button","turbo-checkout-form","turbo-configuration","turbo-checkout-state-handler","turbo-checkout-eligibility-response-weblabs","turbo-checkout-eligible-state","turbo-initiate-migration-switch","migrated-turbo-check-eligibility-babyregistry-call","migrated-turbo-check-eligibility-buyagain-call",
"turbo-checkout-page-ready").register("turbo-checkout-weblab-trigger",function(b,a,c,e,g,d,h,k,n,m,f,l,p,A,t,D){function u(){b.on("turbo:checkout:prefetch:onTurboEligible",function(){y=!0;B()})}function x(){b.on("turbo:checkout:prefetch:onTurboIneligible",function(){y=!1;B()})}function q(){b.on("a:pageUpdate",function(){B()})}function w(){b.on("turbo:checkout:auto:open",function(){E()})}function B(){0===z().length?d.logCount("turboCheckoutBuyNowButtonMissing"):0===n.getForms(z()).length&&d.logCount("turboCheckoutBuyNowFormMissing");
0<n.getForms(z()).length&&(y?(e.logDebug("turbo-checkout-weblab-trigger","Adding trigger to form: "+h.getAllocation()),J.val(h.getAllocation()),O.val(h.getExperimentName()),I.val(f.getRequestId()),L.val(f.getSessionId()),n.getForms(z()).append(J,O,I,L)):(e.logDebug("turbo-checkout-weblab-trigger","Removing trigger from form: "+h.getAllocation()),J.remove(),O.remove(),I.remove(),L.remove()))}function z(){var c=m.get(m.KEYS.BUY_NOW_BUTTON_SELECTOR),b=m.get(m.KEYS.BUY_NOW_BUTTON_V2_SELECTOR);return 0===
a(c).length?a(b):a(c)}function F(){if(l.get()&&0<l.get().length||y){e.logDebug("turbo-checkout-weblab-trigger","Calling cheetah to trigger: "+h.getAllocation());0<n.getForms(z()).find(J).length||d.logCount("turboCheckoutTriggerMissing");var a=y?g.buildTriggerWeblabPathWith(f.getRefTag(),h.getExperimentName(),h.getAllocation(),f.getRequestId(),f.getSessionId()):g.buildTriggerWeblabPathWithoutWeblab(f.getRefTag(),f.getRequestId(),f.getSessionId());var c=[];if(y){var b=h.getAdditionalWeblabAndTreatmentMap();
for(q in b)b.hasOwnProperty(q)&&c.push({weblabName:q,weblabAllocation:b[q]})}b=m.get(m.KEYS.HOST_PAGE_TYPE_IDENTIFIER);var k="C";if("babyregistry"===b){var q="PAX_CHECKOUT_TURBO_CHECK_ELIGIBILITY_BABYREGISTRY_MIGRATION_1310570";t&&t.isEnabled()&&(k=t.getTreatment());c.push({weblabName:q,weblabAllocation:k})}"buyagain"===b&&(q="PAX_CHECKOUT_TURBO_CHECK_ELIGIBILITY_BUYAGAIN_MIGRATION_1310571",D&&D.isEnabled()&&(k=D.getTreatment()),c.push({weblabName:q,weblabAllocation:k}));E(a,c)}}function E(c,b){b=
[].concat(b).concat(l.get());b={additionalWeblabsToTrigger:JSON.stringify(b)};var e="function"===typeof r.Blob;"function"===typeof r.navigator.sendBeacon&&e?(b=new Blob([a.param(b)],{type:"application/x-www-form-urlencoded"}),r.navigator.sendBeacon(c,b)||d.logCount("turboCheckoutTriggerRecordingFailed")):G(c,b)}function G(a,b){c.load(a,{method:"POST",params:b,error:function(a,c,b){a&&204===a.http.status||d.logCount("turboCheckoutTriggerRecordingFailed")},abort:function(a){d.logCount("turboCheckoutTriggerRecordingFailed")}})}
var J,O,I,L,y=!1;return{setup:function(){J=a("\x3cinput/\x3e",{type:"hidden",name:"triggerTurboWeblab",value:""});O=a("\x3cinput/\x3e",{type:"hidden",name:"triggerTurboWeblabName",value:""});I=a("\x3cinput/\x3e",{type:"hidden",name:"turboPageRequestId",value:""});L=a("\x3cinput/\x3e",{type:"hidden",name:"turboPageSessionId",value:""});q();u();x();k.registerOnClickCallback(F);w()},sendTurboWeblabRequest:E}});"use strict";l.when("A","turbo-checkout-form","turbo-checkout-utils","turbo-checkout-state-handler",
"turbo-checkout-page-ready").register("turbo-checkout-page-filter",function(b,a,c,e){function g(a,b){c.logDebug("turbo-checkout-page-filter",a,b)}return{isCurrentViewTurboEligible:function(){var c=b.$(e.getInitiateSelector()),h=a.getForms(c),k=0<c.length&&c.length===h.length;k||(g("Page is NOT turbo eligible. Parent forms / nested links do not match the number of initiate selectors",c),g("Forms",h));return k}}});"use strict";l.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-device-filter-check",
function(b){b.get(b.KEYS.IS_DEVICE_FILTER_REQUIRED)||l.when("turbo-checkout-cacher","turbo-checkout-page-ready").register("turbo-checkout-device-filter",function(a){var c=function(){return!0};return{isDeviceTurboEligible:a.createCache(c),isSignInSupported:a.createCache(c),isMashBeta:a.createCache(function(){return!1}),isBuyNowToTangoSupported:a.createCache(c)}})});"use strict";l.when("A","turbo-checkout-state-handler","turbo-checkout-device-filter","turbo-checkout-page-filter","turbo-checkout-weblab-allocation",
"turbo-chewbacca-migration-switch","turbo-checkout-page-ready").register("turbo-checkout-eligibility-aggregator",function(b,a,c,e,g,d){function h(){return e.isCurrentViewTurboEligible()&&a.isProductTurboEligible()&&(!g.isBuyNowOnly()||d.isGatingWeblabEnabled())}return{isTurboEligible:h,isTurboOrTangoPrefetchEligible:function(){return h()||!1},isSignInSupported:function(){return c.isSignInSupported()&&(!g.isBuyNowOnly()||d.isGatingWeblabEnabled())},shouldAttemptTangoPrefetch:function(){return!1},shouldAttemptTurboPrefetch:function(){return c.isDeviceTurboEligible()&&
(!g.isBuyNowOnly()||d.isGatingWeblabEnabled())}}});"use strict";l.when("A","turbo-configuration","a-util","turbo-view-adapter","turbo-checkout-ref-tagger","turbo-filtered-callback-list","turbo-checkout-state-handler","turbo-checkout-ajax-wrapper","turbo-checkout-utils","turbo-checkout-urls","turbo-checkout-csm","turbo-checkout-eligibility-aggregator","turbo-checkout-eligibility-response-weblabs","turbo-checkout-accessories-input","turbo-chewbacca-migration-switch","turbo-chewbacca-migration-shadow",
"turbo-initiate-migration-switch","buy-now-to-tango-switch","turbo-checkout-navigation-window","turbo-chewbacca-migration-optimistic-flushing","turbo-checkout-weblab-allocation","turbo-chewbacca-migration-get-request","turbo-checkout-aapi","migrated-turbo-check-eligibility-dpx-call","migrated-turbo-check-eligibility-babyregistry-call","migrated-turbo-check-eligibility-buyagain-call","migrated-turbo-check-eligibility-unknown-call","check-eligibility-response-mismatch","turbo-checkout-session-id-input",
"confirm-removal-weblab","turbo-checkout-page-ready").register("turbo-checkout-content-loader",function(b,a,c,e,g,d,h,k,n,m,f,l,p,A,t,r,v,K,q,w,B,z,F,E,G,J,O,I,L,y){function u(){C("Starting parallel checkEligibility calls.");var c,b,d,e,g=[],h;g.push(new Promise(function(a){c=Date.now();(h=V(!0))&&h.always?h.always(function(){d=Date.now()-c;f.logCount("legacyTurboCheckEligibilityLatency",d);a(h)}):a(null)}));var m;g.push(new Promise(function(a){b=Date.now();(m=ha())&&m.always?m.always(function(){e=
Date.now()-b;f.logCount("aapiTurboCheckEligibilityLatency",e);a(m)}):a(null)}));Promise.allSettled(g).then(function(c){C("Parallel checkEligibility calls completed.");c=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);var b="false";h&&h.getResponseHeader&&"true"===h.getResponseHeader("x-amz-turbo-checkout-eligible")&&(b="true");f.logCount("turboCheckoutLegacyEligibilityResponse",b);var d=JSON.parse(m.responseText),e="false";d&&d.entity&&d.entity.isTurboEligible&&!0===d.entity.isTurboEligible&&(e="true");f.logCount("turboCheckoutAAPIEligibilityResponse",
e);b===e?(C("Response of both checkEligibility calls (Legacy and AAPI) matches."),f.logCount("checkEligibility:LegacyAndAAPI:Matches:Response:"+b),f.logCount("checkEligibilityParallelCall:Referrer:"+c+":Matches:Response:"+b)):(ja("Response of checkEligibility calls (Legacy and AAPI) differs, for session-id: "+L.getSessionId()),I&&I.isEnabled()&&(f.logCount("checkElgibilityResponseMismatchDebugEnabled"),Promise.resolve().then(function(){D(b,e)})),f.logCount("checkEligibility:LegacyAndAAPI:Differs:legacy:"+
b+":aapi:"+e),f.logCount("checkEligibilityParallelCall:Referrer:"+c+":Difffers:legacy:"+b+":aapi:"+e))})}function D(c,b){var d=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER),e=m.buildLogPageHitPathForShadowTesting(d,"aapicallmismatch","retailwebsite");k.load(e,{method:"POST",params:{pageType:"spc",referrer:d,isAapiShadowModeCall:"true",aapiResponse:b,legacyResponse:c},timeout:4E3})}function aa(){C("Starting parallel calls for non-standard clients - both legacy and non-standard calls");f.logCount("turboCheckoutShadowMode");
var c,b,d,e,g=[],h;g.push(new Promise(function(a){c=Date.now();(h=V(!0))&&h.always?h.always(function(){d=Date.now()-c;f.logCount("shadowModeLegacyLatency",d);a(h)}):a(null)}));var m;g.push(new Promise(function(a){b=Date.now();(m=ia("T1"))&&m.always?m.always(function(){e=Date.now()-b;f.logCount("shadowModeNonStandardLatency",e);a(m)}):a(null)}));Promise.allSettled(g).then(function(c){C("Parallel eligibility calls for non-standard clients completed.");c=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);var b=
"false";h&&h.getResponseHeader&&"true"===h.getResponseHeader("x-amz-turbo-checkout-eligible")&&(b="true");f.logCount("turboCheckoutNonStandardClientLegacyEligibilityResponse"+b);var d="false";if(m&&m.responseText)try{var e=JSON.parse(m.responseText);e&&e.entity&&!0===e.entity.isTurboEligible&&(d="true")}catch(Ba){C("Error parsing non-standard response",Ba)}f.logCount("turboCheckoutNonStandardClientEligibilityResponse",d);b===d?(C("Response of both checkEligibility calls (Legacy and Non-Standard) matches."),
f.logCount("checkEligibility:LegacyAndNonStandard:Matches:Response:"+b),f.logCount("checkEligibilityNonStandardParallelCall:Referrer:"+c+":Matches:Response:"+b)):(ja("Response of checkEligibility calls (Legacy and Non-Standard) differs, for session-id: "+L.getSessionId()),I&&I.isEnabled()&&(f.logCount("checkElgibilityResponseMismatchDebugEnabled"),Promise.resolve().then(function(){D(b,d)})),f.logCount("checkEligibility:LegacyAndNonStandard:Differs:legacy:"+b+":nonStandard:"+d),f.logCount("checkEligibilityNonStandardParallelCall:Referrer:"+
c+":Differs:legacy:"+b+":nonStandard:"+d))});return h}function ha(){f.logCount("turboCheckoutAAPIEligibilityCallStarted");R=Date.now();N=!0;var a=H.getTreatment();"T2"===a&&(W(),ba());v.isEnabled()&&e.updateBottomSheetAttributes();var b=`${F.getAapiRootDomainForMarketplace()}/checkout/turbo/eligibility`,c=F.getAapiSlateToken(),d=F.getAapiCsrfToken();a=X.ajax({url:b,type:"POST",headers:{"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"checkout.turbo.eligibility.request/v1"; experiments\x3d"turbo_eligibility_aeio124$2026-08-15"',
Accept:'application/vnd.com.amazon.api+json; type\x3d"checkout.turbo.eligibility.response/v1"; experiments\x3d"turbo_eligibility_aeio124$2026-08-15"',"Accept-Language":"en-US","x-api-csrf-token":d,"x-amzn-encrypted-slate-token":c},xhrFields:{withCredentials:!0},xhr:ka,data:JSON.stringify(xa()),success:"T2"===a?wa:ya,error:"T2"===a?ca:za});C("Standard AAPI call completed");return a}function ia(b){f.logCount("turboCheckoutNonStandardClientEligibilityCallStarted");var d={};h.getAddressId()&&(d.addressID=
h.getAddressId());d.referrer=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);d.primeStatus=String(h.getPrimeStatus());d.currencyOfPreference=c.cookies.get("i18n-prefs");var e=F.getAapiSlateToken();b=X.ajax({url:"/checkout/entry/turbo-check-eligibility?pipelineType\x3dturbo",type:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset\x3dUTF-8",Accept:"application/json","Accept-Language":"en-US","x-amzn-encrypted-slate-token":e},xhrFields:{withCredentials:!0},xhr:ka,data:d,success:"T2"===
b?Ca:Da,error:"T2"===b?ca:Ea});C("Non-standard client eligibility call completed");return b}function wa(a,b,c){f.logCount("aapiCallSuccesfull");a=Date.now()-R;f.logCount("turboCheckoutEligibilityAAPICallSuccessLatency",a);P=null;U();f.logCount("turboCheckoutTurboPrefetchSuccess");S="completed:SUCCESS"}function xa(){var b={};h.getAddressId()&&(b.addressID=h.getAddressId());b.referrer=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);b.primeStatus=String(h.getPrimeStatus());b.currencyOfPreference=c.cookies.get("i18n-prefs");
h.isPhysicalGiftCardExperimentEligible()&&(b.isPhysicalGiftCard=!0);return b}function ya(b,c,d){f.logCount("turboCheckoutAAPIEligibilityCallSuccess");b=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);f.logCount("turboCheckoutEligibility:Referrer:"+b+":AAPISuccess")}function za(b,c,d){f.logCount("turboCheckoutAAPIEligibilityCallError");C("AAPI shadow call error",d);b=Date.now()-R;f.logCount("turboCheckoutEligibilityAAPICallErrorLatency",b);b=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);f.logCount("turboCheckoutEligibility:Referrer:"+
b+":AAPICallError")}function Ca(a,b,c){f.logCount("nonStandardClientCallSuccessful");a=Date.now()-R;f.logCount("turboCheckoutEligibilityNonStandardCallSuccessLatency",a);P=null;U();f.logCount("turboCheckoutTurboPrefetchSuccess");S="completed:SUCCESS"}function Da(b,c,d){f.logCount("turboCheckoutNonStandardClientEligibilityCallSuccess");b=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);f.logCount("turboCheckoutEligibility:Referrer:"+b+":NonStandardSuccess")}function Ea(b,c,d){f.logCount("turboCheckoutNonStandardClientEligibilityCallError");
C("Non-standard client eligibility call error",d);b=Date.now()-R;f.logCount("turboCheckoutEligibilityNonStandardCallErrorLatency",b);b=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);f.logCount("turboCheckoutEligibility:Referrer:"+b+":NonStandardCallError")}function V(a){f.logCount("turboCheckoutInitiate");W();Y=!1;N=a;da=Date.now();ba();a&&(K.isEnabled()&&h.isProductTangoEligible()&&f.logCount("tangoCheckCustomerEligibilityPrefetchStarted"),l.shouldAttemptTurboPrefetch&&l.isTurboEligible()&&f.logCount("turboCheckCustomerEligibilityPrefetchStarted"));
f.logCount("turboCheckoutPrefetchStart");var b=a?[]:h.getLineItems(),c=a?g.generateEligibilityValue():h.getRefTag();b=(a?m.buildEligibilityPathWith:m.buildInitiatePathWith)(c,h.getExperimentName(),h.getClientId(),h.getRequestId(),h.getSessionId(),b,h.getPrimeStatus());v.isEnabled()&&e.updateBottomSheetAttributes();return P=k.loadWithJQXHR(b,{type:v.isEnabled()&&!N&&z.isEnabled()?"GET":"POST",data:Fa(a),headers:Ga(),xhr:Ha,success:Ia,error:ca})}function Fa(a){var b={isAsync:a?1:y.isConfirmRemovalWeblabInTreatment()?
0:1};h.getAddressId()&&(b.addressID=h.getAddressId());h.isPhysicalGiftCardExperimentEligible()&&(b.isPhysicalGiftCard=!0);if(a&&A.isEligible()&&A.getLineItem()){f.logCount("turboCheckoutAccessoriesEligibilityCheck");var c=A.getLineItem();b["offerListing.1"]=c.offerListingId;b["requiresEligibilityCheck.1"]="true"}a||h.getLineItems().forEach(function(a,c){c+=1;b["offerListing."+c]=a.offerListingId;b["quantity."+c]=a.quantity;a.incentivizedCart&&(b["incentivizedCart."+c]=a.incentivizedCart,b.incentivizedCart=
a.incentivizedCart);a.customItemPrice&&(b["customItemPrice."+c]=a.customItemPrice,b.customItemPrice=a.customItemPrice);var d=a.addToCartTimeAsUnixEpochMilliseconds;d&&(b["addToCartTimeAsUnixEpochMilliseconds."+c]=d);(d=a.addToCartSessionId)&&(b["addToCartSessionId."+c]=d);a.concealmentEligibilityType&&(b["concealmentEligibilityType."+c]=a.concealmentEligibilityType)});return b}function Ga(){var a={"x-amz-support-custom-signin":1};a["x-amz-turbo-checkout-dp-url"]=q.getWindow().location.href;a["x-amz-checkout-entry-referer-url"]=
q.getWindow().location.href;var b=h.getCSRFToken();b&&0<b.length&&(a["x-amz-checkout-csrf-token"]=b);return a}function Ha(){var a=k.createXHRRequest();a.receivedDataLength=0;a.addEventListener("readystatechange",function(){if(la()&&Y&&(3===a.readyState||4===a.readyState)){var c=a.responseText.substring(a.receivedDataLength);0===a.receivedDataLength?e.initiateIFrameContent(c):e.appendToIFrameContent(c);a.receivedDataLength=a.responseText.length}else if(Y||!a.readyState||2>a.readyState)C("Ignoring ready state changed event because headers already received or missing xhr");
else if(Y=!0,f.logCount("turboCheckoutPrefetchHeadersReceived"),f.logCount("turboCheckoutPrefetchHeadersReceivedDuration",Date.now()-da),a&&a.getResponseHeader("x-amz-turbo-checkout-eligible")){f.logCount("turboCheckoutLegacyCallTurboEligibilityResponse:True");C("Headers received: Turbo eligible");f.logCount("turboCheckoutTurboEligibleAfterCheetahChecks");c=a&&a.getResponseHeader("x-amzn-checkout-login-required");var d=l.isSignInSupported();c&&(C("Headers received: Signin required"),f.logCount("turboCheckoutSigninRequired"),
d||(C("Sign-in required but it is disabled or not supported."),f.logCount("turboCheckoutSigninNotSupported")));!d&&c||ma();na(a)&&oa.callAll(a.getResponseHeader("x-amzn-checkout-login-provider"));B.isDisableTurboWeblabInTreatment()?(C("Turbo Headers received, But Holdback experiment is in T1,Checking Tango Eligibility"),pa(a)):(C("Turbo Headers received, No Holdback experiment and calling TangoIneligible callbacks"),Z.callAll())}else f.logCount("turboCheckoutLegacyCallTurboEligibilityResponse:False"),
C("Only Tango Headers received, No turbo headers received"),ea.callAll(),b.trigger("turbo:checkout:prefetch:onTurboIneligible"),pa(a)});return a}function C(a,b){n.logDebug("turbo-checkout-content-loader",a,b)}function ja(a,b){n.logWarning("turbo-checkout-content-loader",a,b)}function ka(){var a=k.createXHRRequest();a.receivedDataLength=0;a.addEventListener("readystatechange",function(){if(!a.readyState||4>a.readyState)C("Ignoring ready state changed event because Response Payload not yet received");
else if(!(N&&H&&H.isEnabled()&&"T1"===H.getTreatment())){if(N&&H&&H.isEnabled()&&"T2"===H.getTreatment()){try{var c=JSON.parse(a.responseText);var d=c.entity&&c.entity.isTurboEligible}catch(Aa){C("Error parsing AAPI response",Aa),d=!1}d?f.logCount("turboCheckoutAAPICallTurboEligibilityResponse:True"):f.logCount("turboCheckoutAAPICallTurboEligibilityResponse:False")}d?(ma(),B.isDisableTurboWeblabInTreatment()?(C("Turbo Headers received, But Holdback experiment is in T1,Checking Tango Eligibility"),
qa()):(C("Turbo Headers received, No Holdback experiment and calling TangoIneligible callbacks"),Z.callAll())):(ea.callAll(),b.trigger("turbo:checkout:prefetch:onTurboIneligible"),qa())}});return a}function qa(){C("Tango Eligible callback method invoked ");f.logCount("tangoCheckoutEligibleAfterCheetahChecks");fa.callAll()}function pa(a){h.isProductTangoEligible()?(C("Tango Eligible callback method invoked "),f.logCount("tangoCheckoutEligibleAfterCheetahChecks"),fa.callAll()):(C("Tango InEligible callback method invoked "),
Z.callAll())}function na(a){return l.isSignInSupported()&&a&&a.getResponseHeader("x-amzn-checkout-login-required")}function Ia(a,c,d){f.logCount("turboCheckoutPrefetchEnd",Date.now()-da);P=null;if(N&&H&&H.isEnabled()&&"T2"===H.getTreatment())try{var e=JSON.parse(d.responseText);var g=e.entity&&e.entity.isTurboEligible}catch(T){C("Error parsing AAPI response",T),g=!1}else g=d&&d.getResponseHeader("x-amz-turbo-checkout-eligible");if((c=a&&a.match(Ja))&&0<c.length)try{var h=X(c[0]);var m=X.parseJSON(h.text())}catch(T){n.logError("Could not extract page state from cheetah page: "+
T)}else C("Could not extract page state from response data");h=m&&"turbo"===m.pipelineType;c=m&&m.currentPurchaseId&&0<String(m.currentPurchaseId).trim().length;e=d.getResponseHeader("x-amzn-experiment-weblabs-to-trigger");if(e!==x){var k=[];try{k=JSON.parse(e)}catch(T){console.error("Error parsing additional weblabs from xhr response header: ",T)}p.set(k)}h&&!c&&n.logError("No purchaseid provided, cannot show turbo");g&&h&&c?("started"!==M&&n.logError("turbo-checkout-content-loader","Error processing turbo available callbacks. Expected state to be started but was "+
M),C("Notifying turbo available callbacks"),M="success",ra.callAll(a,m),b.trigger("turbo:checkout:prefetch:onSuccess"),f.logCount("turboCheckoutTurboPrefetchSuccess")):g&&na(d)?C("Body received: Eligible and sign-in is supported and required."):d.getResponseHeader("x-amz-checkout-redirect")?q.replace(d.getResponseHeader("x-amz-checkout-redirect")):(C("Body received: No turbo page or not eligible: isTurboEligible: "+g+" isTurboPage: "+h+" hasPurchaseId: "+c),U(),f.logCount("turboCheckoutTurboPrefetchFail"));
S="completed:SUCCESS"}function ca(a,b,c){N&&H&&H.isEnabled()&&"T2"===H.getTreatment()&&(a=Date.now()-R,f.logCount("turboCheckoutEligibilityAAPICallErrorLatency",a));f.logCount("turboCheckoutPrefetchEnd");P=null;C("Error while initiate",c);f.logCount("turboCheckoutTurboPrefetchError");"timeout"===b&&f.logCount("turboCheckoutInitiateTimeOut");U();S="completed:FAILED"}function ba(){C("Notifying loading callbacks");M="started";sa.callAll();b.trigger("turbo:checkout:prefetch:onStart")}function ma(){C("Notifying turbo eligible callbacks");
ta.callAll();b.trigger("turbo:checkout:prefetch:onTurboEligible")}function U(){"started"!==M&&n.logError("turbo-checkout-content-loader","Error processing turbo not available callbacks. Expected state to be started but was "+M);C("Notifying error callbacks");M="error";ua.callAll();b.trigger("turbo:checkout:prefetch:onError")}function W(){P&&P.abort&&(C("Aborting running request..."),P.abort())}function la(){return v.isEnabled()&&!N&&w.isEnabled()}var Ja=/<script.*data-a-state.*checkout:conductor:page.*>.*<\/script>/,
X=b.$,P,M="stopped",da,R,Y=!1,N=!1,S="notStarted",va,Ka={detail:E,babyregistry:G,buyagain:J},H,sa=d.create("onStart"),ra=d.create("onFinish"),ua=d.create("onError"),ta=d.create("onTurboEligible"),ea=d.create("onTurboIneligible"),fa=d.create("onTangoEligible"),Z=d.create("onTangoIneligible"),oa=d.create("onSigninRequired");b.on("turbo:checkout:signInController:onDoSignIn",U);return{registerCallback:function(a){sa.push(a);ra.push(a);ua.push(a);ta.push(a);oa.push(a);ea.push(a);fa.push(a);Z.push(a)},
callInitiate:function(){C("Calling turbo initiate");V(!1)},checkEligibility:function(){S="inProgress";var b=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);if(va=b)if(H=Ka[b],H||(f.logCount("turboCheckoutCheckEligibility:Referrer:UNKNOWN:ReceivedReferrer:"+b),O&&O.isEnabled()&&(H=O)),f.logCount("turboCheckoutCheckEligibilityCallsCount:Referrer:"+b),H&&H.isEnabled()){var c=H.getTreatment();f.logCount("turboCheckoutCheckEligibility:Referrer:"+b+":WeblabTreatment:"+c);b=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);
"detail"===b||"babyregistry"===b?"T2"===c?ha():u():"T1"===c?aa():(f.logCount("turboCheckoutNonStandardOnly"),R=Date.now(),N=!0,c=H.getTreatment(),"T2"===c&&(W(),ba()),v.isEnabled()&&e.updateBottomSheetAttributes(),ia(c))}else V(!0);else f.logCount("turboCheckoutCheckEligibility:Referrer:NULL")},abortCall:W,isSuccess:function(){return"success"===M},isError:function(){return"error"===M},isStarted:function(){return"started"===M},shadowCallChewbaccaInitiate:function(){t.isShadowModeEnabled()&&r.shadowCallChewbaccaInitiate()},
isTurboOptimisticFlushingEnabled:la,getEligibilityCallState:function(){return S},getCheckEligibilityMigrationWeblab:function(){return H},getCheckEligiblityCallReferrer:function(){return va}}});"use strict";l.when("turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-buy-now-suppression",function(b,a){a.logDebug("turbo-checkout-buy-now-suppression","Buy Now suppression in control, no action taken",void 0);b.logCount("turboCheckoutBuyNowSuppressionDisabled");
return{showBuyNowButtonsWhenEligible:function(){a.logDebug("turbo-checkout-buy-now-suppression","Control treatment - no action",void 0)}}});"use strict";l.when("A","jQuery","turbo-checkout-ref-tagger","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-history-manager",function(b,a,c,e){function g(){if(r.history.state&&r.history.state.turboAction)return r.history.state.turboAction}function d(){g();g()||(e.logDebug("turbo-checkout-history-manager","Adding turbo history state"),
r.history.pushState({turboAction:"popover"},document.title+" Turbo open"))}var h=!1;a(r).bind("popstate.turbo",function(a){g();h?(e.logDebug("turbo-checkout-history-manager","Trigger Subpanel Back Clicked"),b.trigger("turbo:checkout:dimmer:clicked"),h=!1,d()):g()?(e.logDebug("turbo-checkout-history-manager","Trigger sheet open"),b.trigger("turbo:checkout:sheet:doOpen")):(e.logDebug("turbo-checkout-history-manager","Trigger sheet close"),b.trigger("turbo:checkout:sheet:doClose",{immediate:!1,reason:c.TAGS.BACK}))});
return{sheetOpened:d,sheetClosed:function(){g();g()&&(e.logDebug("turbo-checkout-history-manager","Removing turbo history state"),r.history.back())},subPanelOpened:function(){h=!0},subPanelClosed:function(){h=!1}}});"use strict";l.when("A","turbo-checkout-page-ready").register("turbo-base-visibility-manager",function(b){function a(){b.trigger("turbo:checkout:page:gone")}return{setup:function(){b.on("turbo:checkout:sheet:onNavigateAway",a)}}});l.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-mash-will-reappear-check",
function(b){b.get(b.KEYS.USES_MASH_WILL_REAPPEAR)||l.when("turbo-base-visibility-manager").register("turbo-checkout-page-visibility-manager",function(a){return a})});"use strict";l.when("A","jQuery","turbo-checkout-view-state","turbo-checkout-weblab-allocation","turbo-checkout-state-handler","turbo-checkout-content-loader","turbo-checkout-prefetch-timer","turbo-checkout-page-visibility-manager","turbo-checkout-counter","turbo-checkout-utils","turbo-checkout-eligibility-aggregator","turbo-checkout-auto-open",
"turbo-checkout-page-ready").register("turbo-checkout-prefetcher",function(b,a,c,e,g,d,h,k,n,m,f,l){function p(a){var c=t;t=a;m.logDebug("turbo-checkout-prefetcher","Transitioning from "+c.name+" to "+a.name);if(c.onExit)c.onExit(a.name);if(a.onEnter)a.onEnter(c.name);b.trigger("turbo:checkout:prefetcher:state:"+a.name);b.trigger("turbo:checkout:prefetcher:state",a.name)}var u,t,r=function(){var a=d.isError(),b=!f.isTurboOrTangoPrefetchEligible(),c=h.isTimeout(),e=0===u;m.logDebug("turbo-checkout-prefetcher",
"Test is data stale: isStaleWhenCheetahReturnsError: "+a+" isStaleWhenProductNotEligiblie: "+b+" isStaleWhenTimeoutOccurs: "+c+" isStaleWhenNoMorePrefetchesAvailable: "+e);return a||b||c||e},v=function(){var a=f.isTurboOrTangoPrefetchEligible()&&!h.isTimeout()&&0<u;m.logDebug("turbo-checkout-prefetcher","Test should prefetch: eligibilityAggregator.isTurboOrTangoPrefetchEligible(): "+f.isTurboOrTangoPrefetchEligible()+" !timer.isTimeout(): "+!h.isTimeout()+" _prefetchesAvailable: "+u);return a},x=
{name:"start",onEvent:function(a){f.shouldAttemptTurboPrefetch()||f.shouldAttemptTangoPrefetch()?"controller:onPageLoaded"===a&&p(q):(m.logDebug("turbo-checkout-prefetcher","Turbo experience is disabled eligibilityAggregator.shouldAttemptTurboPrefetch() is"+f.shouldAttemptTurboPrefetch()+" and product is not Tango eligible since eligibilityAggregator.shouldAttemptTangoPrefetch() is also"+f.shouldAttemptTangoPrefetch()+" Hence customer eligibility prefetch call is not fired"),p(z))},onExit:function(){g.startMonitoringPage()}},
q={name:"dataStale",onEvent:function(a){"page:gone"!==a&&"prefetch:onError"!==a&&"sheet:afterClose"!==a&&v()&&p(w)}},w={name:"dataPrefetching",onEnter:function(){n.incrementPrefetchCounter();e.isPrefetch()||c.isOpeningOrOpen()||l.isAutoOpenReadyToBeOpened()?d.callInitiate():d.checkEligibility();--u},onEvent:function(a){if("page:gone"===a)p(q);else{var b=d.isSuccess()&&e.isPrefetch(),c=d.isSuccess()&&e.isNoPrefetch();m.logDebug("turbo-checkout-prefetcher","Test is data fresh: isFreshWhenPrefetchResultOKInT1: "+
b+" isFreshWhenPrefetchResultOKInT4: "+c);b||c?p(B):r()?p(q):"product:onChange"===a&&v()&&p(w)}},onExit:function(a){"dataFresh"!==a&&d.abortCall()}},B={name:"dataFresh",onEnter:function(){h.startTimer()},onEvent:function(a){"page:gone"===a?p(q):r()?p(q):(c.isClosed()||"product:onChange"===a)&&v()&&p(w)},onExit:function(){h.resetTimer()}},z={name:"end"},F="controller:onPageLoaded sheet:beforeOpen sheet:afterClose product:onChange prefetch:onSuccess prefetch:onError timer:onTimeout page:gone page:reappear".split(" "),
E={"sheet:beforeOpen":function(){u=10}};return{setup:function(){u=10;t=x;a.each(F,function(a,c){var d=E[c];b.on("turbo:checkout:"+c,function(a){m.logDebug("turbo-checkout-prefetcher","Processing "+c);d&&d();if(t.onEvent)t.onEvent(c)})})},getState:function(){return t.name}}});"use strict";l.when("A","turbo-signin-adapter","turbo-checkout-content-loader","turbo-checkout-buy-now-button","turbo-checkout-csm","turbo-checkout-weblab-allocation","turbo-checkout-utils","turbo-callback-list","turbo-checkout-state-handler",
"turbo-checkout-eligible-state","turbo-checkout-page-ready").register("turbo-checkout-signin-controller",function(b,a,c,e,g,d,h,k,n,m){function f(){v=!1}function l(a){v=!0;x=a;g.logCount("turboCheckoutSigninRequired")}function p(){var c=v&&m.canShow();c&&(h.logDebug("turbo-checkout-signin-controller","Showing sign in dialog"),g.logCount("turboCheckoutSigninPopup"),a.show(x,r,t),b.trigger("turbo:checkout:signInController:onDoSignIn"));return c}function r(){h.logDebug("turbo-checkout-signin-controller",
"Signin success");g.logCount("turboCheckoutSigninSuccess");D.callAll()}function t(){h.logDebug("turbo-checkout-signin-controller","Signin failed");g.logCount("turboCheckoutSigninFailed")}var D=k.create(),v=!1,x;return{setup:function(){c.registerCallback({onStart:f,onSigninRequired:l});e.registerOnClickCallback(p)},registerCallback:D.push}});"use strict";l.when("A","turbo-configuration","turbo-callback-list","turbo-filtered-callback-list","turbo-initiate-migration-switch","turbo-checkout-page-ready").register("turbo-checkout-iframe",
function(b,a,c,e,g){function d(a){if("string"!==typeof a)throw Error("Attempted to write non-string value to iFrame. typeof \x3d "+typeof a);}function h(){return b.$("#"+l)}function k(){if(!(0<h().length))throw Error("Attempted to read / write the iFrame without it being in the DOM. This would result in an undefined iFrame document.");var a=h()[0];return a.contentDocument||a.contentWindow.document}function n(){if(0<h().length)throw Error("Attempted to insert multiple Turbo Checkout iFrames");}function m(){var a=
b.$("\x3ciframe/\x3e",{id:l,src:"about:blank",scrolling:"no","class":"turbo-checkout-blank"});g.isEnabled()&&a.css({borderRadius:"24px 24px 0px 0px"});return a}function f(a){t.push(a)}var l=a.get(a.KEYS.IFRAME_ID),p=e.create("beforeFramePopulated"),r=e.create("afterFramePopulated"),t=c.create(),D=e.create("beforeOptimisticFlushing"),v=e.create("afterOptimisticFlushing"),x=e.create("csmMarkFirstByte");f(function(a){a.addClass("turbo-checkout-shown")});b.on("turbo:checkout:iframe:document:loaded",function(){t.callAll(h())});
return{write:function(a){p.callAll();a+='\x3cscript\x3e"use strict";window.parent.P.now("turbo-checkout-controller").execute("callbackPageController", function callbackPageController(controller) {controller.frameHtmlRendered();});P.when("load").execute("onTurboDocumentLoaded", function onTurboDocumentLoaded() {window.parent.P.when("A").execute("triggerTurboDocumentLoaded", function triggerTurboDocumentLoaded(A) {A.trigger("turbo:checkout:iframe:document:loaded");});});\x3c/script\x3e';d(a);var b=
k();b.open();b.write(a);b.close();r.callAll(h()[0])},remove:function(){h().remove()},appendTo:function(a){n();a.append(m())},insertInto:function(a){n();a.html(m())},hasContent:function(){var a=0<h().length&&k();return a&&(a.body.hasChildNodes()||a.head.hasChildNodes())},registerCallbacks:function(a){p.push(a);r.push(a);D.push(a);v.push(a);x.push(a)},onContentLoaded:f,appendToIFrameDocument:function(a,b){d(b);var c=k();a?(D.callAll(),c.open(),c.write(b),x.callAll()):c.write(b)},finalizeAndAppendCallback:function(){var a=
k();a.write('\x3cscript\x3e"use strict";window.parent.P.now("turbo-checkout-controller").execute("callbackPageController", function callbackPageController(controller) {controller.frameHtmlRendered();});P.when("load").execute("onTurboDocumentLoaded", function onTurboDocumentLoaded() {window.parent.P.when("A").execute("triggerTurboDocumentLoaded", function triggerTurboDocumentLoaded(A) {A.trigger("turbo:checkout:iframe:document:loaded");});});\x3c/script\x3e');a.close();v.callAll()}}});"use strict";
l.when("A","turbo-checkout-page-ready").register("turbo-checkout-view-state",function(b){function a(a,b){return function(){return g===a||g===b}}function c(a){return function(){g=a;e.apply(e,arguments)}}function e(a,c){a&&"string"===typeof a&&b.trigger(a,c)}var g=0;return{isClosed:a(0),isClosing:a(1),isOpen:a(2),isOpening:a(3),isClosingOrClosed:a(1,0),isOpeningOrOpen:a(3,2),setToOpen:c(2),setToOpening:c(3),setToClosed:c(0),setToClosing:c(1)}});"use strict";l.when("turbo-checkout-page-load-spinner",
"turbo-checkout-controller","turbo-checkout-csm","turbo-checkout-page-state","turbo-constants","turbo-checkout-page-ready").register("turbo-checkout-startup",function(b,a,c,e,g){e.get().turboAssetsMode!==g.ASSET_MODE_CLT_CX_ONLY&&(b.removePageLoadSpinner(),c.logCount("turboCheckoutControllerPageLoaded"),a.pageLoaded())});"use strict";l.when("turbo-checkout-assets-load-trigger").register("turbo-checkout-page-ready",function(){r.ue&&r.ue.count&&"undefined"!==typeof r.ue_t0&&r.ue.count("turboCheckoutPageReady",
Date.now()-r.ue_t0)});"use strict";l.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-quantity-input","turbo-checkout-warranty-input","turbo-checkout-accessories-input","turbo-checkout-subscribe-and-save-frequency-input","turbo-checkout-subscribe-and-save-order-type-input","turbo-checkout-subscribe-and-save-quantity-input","turbo-checkout-navigation-window","turbo-checkout-sns-utils","turbo-checkout-page-ready").register("turbo-checkout-authportal-return-query",
function(b,a,c,e,g,d,h,k,n,m,f,l){function p(a){c.logDebug("turbo-checkout-authportal-return-query",a)}function u(a){var b=k.getLineItem(),c=n.getLineItem();b=b&&c?l.getQuantity(k,n,m,g):g.getQuantity();a=a+"\x26trb_auth\x3d1\x26trb_open\x3d1"+(1<b?"\x26trb_qty\x3d"+b:"");b=d.getLineItem();a+=b&&b.asin?"\x26trb_warrAsin\x3d"+b.asin:"";b=e.getSessionId();a+=0<b.length?"\x26trb_sid\x3d"+b:"";b=e.getActiveId();a+=b?"\x26trb_bid\x3d"+b:"";b=(b=h.getLineItem())&&b.asin&&b.offerListingId?"\x26trb_accessoryAsin\x3d"+
b.asin+"\x26trb_accessoryOffer\x3d"+b.offerListingId:"";return a+b+l.getFrequencyQuery(k)+l.getOrderTypeQuery(n)}function t(a){return!!a.match("trb_auth\x3d1")}function r(b){if(t(b)){b=((b||"").match(q)||[])[1]||"";var d=e.getSessionId();c.isNonEmptyString(b)||a.logCount("turboCheckoutPostAuthEmptySessionParameter");c.isNonEmptyString(d)||a.logCount("turboCheckoutPostAuthEmptySessionPageState");c.isNonEmptyString(b)&&c.isNonEmptyString(d)&&b!==d&&(c.logWarning("Turbo Session Flip Detected. Post authentication sessionId \x3d "+
d+", Expected \x3d "+b,"turbo-checkout-authportal-return-query"),a.logCount("turboCheckoutPostAuthSessionFlip"))}}var v=/&?(openid|aToken|serial)[^&]*/g,x=/&?trb_(open|auth|qty|warrAsin|sid|accessory(Asin|Offer)|freq|orderType)=[^&]*/g,q=/&?trb_sid=([^&]*)/,w=/\?[?&]*/,B=/[?&]{2,}/g;r(f.getWindow().location.search);return{buildFrom:function(a){p("Initial Query \x3d "+a);a=(a||"?").replace(v,"");a=a.replace(x,"");a=u(a);a=a.replace(w,"?").replace(B,"\x26");p("Final Query \x3d "+a);return a},isReturningFromAuthPortal:t,
validateSession:r,addTurboAuthReturnParameters:u}});"use strict";l.when("turbo-checkout-utils","turbo-checkout-csm","turbo-checkout-authportal-return-query","turbo-checkout-navigation-window","turbo-checkout-page-ready").register("turbo-checkout-signin-utils",function(b,a,c,e){function g(a){return null!==a.match(h)}function d(){var a=c.buildFrom(e.getWindow().location.search);return encodeURIComponent("https://"+e.getWindow().location.hostname+e.getWindow().location.pathname.replace(k,"/ref\x3dtrb_chk_auth")+
a)}var h=/openid\.return_to=([^&$]+)/,k=/(\/ref=[^/]*\/?$|\/?$)/;return{encodeSignInUrl:function(c){if(g(c)){a.logCount("turboCheckoutForceMobileClaimCollection");var e=c.match(h)[1],f=decodeURIComponent(e);e===f&&b.logError("The pre-defined returnTo seems to be un-encoded");f=encodeURIComponent(f+(-1===f.indexOf("?")?"?":"\x26")+"openid.return_to\x3d"+d());return c.replace(e,f)}return c+(-1===c.indexOf("?")?"?":"\x26")+"openid.return_to\x3d"+d()},isEnforceMobileClaimUrl:function(a){var b=null!==
a.match("openid.pape.preferred_auth_policies%3DEnforcePossessionOnMobileClaim")||null!==a.match(decodeURIComponent("openid.pape.preferred_auth_policies%3DEnforcePossessionOnMobileClaim"));a=null!==a.match("intercept%3Dfalse")||null!==a.match(decodeURIComponent("intercept%3Dfalse"));return b&&a},_isReturnToParameterPredefined:g}});"use strict";l.when("turbo-checkout-page-ready").register("turbo-checkout-sns-utils",function(){return{updateLineItemFrequency:function(b,a){a&&a.rcxOrdFreq&&b.forEach(function(b){b.rcxOrdFreq&&
""!==b.rcxOrdFreq&&(b.rcxOrdFreq=a.rcxOrdFreq)})},updateLineItemOrderType:function(b,a){a&&a.orderType&&b.forEach(function(b){b.orderType&&""!==b.orderType&&(b.orderType=a.orderType)})},getFrequencyQuery:function(b){return(b=b.getLineItem())&&b.rcxOrdFreq?"\x26trb_freq\x3d"+b.rcxOrdFreq:""},getOrderTypeQuery:function(b){return(b=b.getLineItem())&&b.orderType?"\x26trb_orderType\x3d"+b.orderType:""},getFrequencyLineItemForAutoOpen:function(b,a){if(a)return b.select(a),b.getLineItem()},getOrderTypeLineItemForAutoOpen:function(b,
a){if(a)return b.select(a),b.getLineItem()},updateLineItemQuantity:function(b,a){a&&a.quantity&&b.forEach(function(b){b.rcxOrdFreq&&""!==b.rcxOrdFreq&&(b.quantity=a.quantity)})},getQuantity:function(b,a,c,e){b=b.getLineItem();a.getLineItem();return b.rcxOrdFreq&&""!==b.rcxOrdFreq?c.getSnSQuantity():e.getQuantity()},getQuantityLineItemForAutoOpen:function(b,a,c,e){if(a&&e)return b.select(e),b.getLineItem()}}});"use strict";l.when("turbo-checkout-utils","turbo-checkout-csm","turbo-checkout-auto-open",
"turbo-checkout-authportal-return-query","turbo-checkout-signin-utils","turbo-checkout-navigation-window","turbo-checkout-page-ready").register("turbo-checkout-browser-signin",function(b,a,c,e,g,d){function h(){var b=d.getWindow().location.search.match(k)?"turboCheckoutSigninSuccess":"turboCheckoutSigninFailed";a.logCount(b)}var k=/openid\.mode=id_res/;e.isReturningFromAuthPortal(d.getWindow().location.search)&&(a.logCount("turboCheckoutAuthPortalReturn"),h());return{show:function(b){b=g.encodeSignInUrl(b);
a.logCount("turboCheckoutSignInUrlSize",b.length);c.reset();d.assign(b)}}});"use strict";l.when("turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-page-ready").register("turbo-checkout-strings",function(b,a){function c(c){return function(){var e=a.getStrings()[c];if(e)return b.escapeHtml(e);b.logDebug("turbo-checkout-strings",'String for key "'+c+'" is undefined! Returning empty string.');return""}}return{getHeaderText:c("TURBO_CHECKOUT_HEADER"),getLoadingText:c("TURBO_LOADING_TEXT"),
getCloseText:c("TURBO_CLOSE_TEXT")}});"use strict";l.when("jQuery","A","turbo-checkout-ref-tagger","turbo-checkout-strings","turbo-initiate-migration-switch","turbo-checkout-page-ready").register("turbo-checkout-loading-spinner",function(b,a,c,e,g){function d(){return b("#turbo-loading-container")}function h(a){var c=b("\x3cdiv\x3e",{id:"turbo-loading-content"}).append(b("\x3cdiv\x3e",{id:"turbo-loading-spinner","class":"a-spinner a-spinner-medium"}));if(g.isEnabled()){var d=b("\x3cspan/\x3e",{id:"turbo-checkout-loading-sheet-dimmer-close",
tabindex:0,role:"button","aria-label":e.getCloseText()});c.append(d);d.bind("click",k);d.bind("keypress",n)}"string"===typeof a&&a&&c.append(b("\x3cdiv\x3e",{id:"turbo-loading-text",text:a}));return c}function k(){a.trigger("turbo:checkout:sheet:doClose",{reason:c.TAGS.TOUCH_X})}function n(b){13===(b.which||b.keyCode||0)&&(b.preventDefault(),a.trigger("turbo:checkout:sheet:doClose",{reason:c.TAGS.TOUCH_X}))}return{create:function(a){return b("\x3cdiv\x3e",{id:"turbo-loading-container"}).append(h(a))},
get:d,show:function(){d().addClass("turbo-checkout-shown")}}});"use strict";l.when("A","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-eligibility-response-weblabs",function(b,a){var c=[];return{set:function(a){b.$.isArray(a)&&(c=a)},get:function(){return c}}});"use strict";l.when("turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-session-storage",function(b,a){function c(b,c){a.logDebug("turbo-checkout-session-storage",b,
c)}return{isPresent:function(a){a:{try{var e=r.sessionStorage.getItem(a);break a}catch(d){b.logCount("turboCheckoutSessionStorageExceptionGet"),c("turboCheckoutSessionStorage get() exception",d)}e=null}return null!==e&&e!==x},set:function(a,g){try{r.sessionStorage.setItem(a,g)}catch(d){b.logCount("turboCheckoutSessionStorageExceptionSet"),c("turboCheckoutSessionStorage set() exception",d)}},remove:function(a){try{return r.sessionStorage.removeItem(a)}catch(g){b.logCount("turboCheckoutSessionStorageExceptionRemove"),
c("turboCheckoutSessionStorage remove() exception",g)}}}});"use strict";l.when("A","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-load-events",function(b,a){var c=a.get(a.KEYS.AJAX_PAGE_UPDATE_EVENT);return{bind:function(a){b.off(c,a);b.off("turbo:checkout:controller:onPageLoaded",a);b.on(c,a);b.on("turbo:checkout:controller:onPageLoaded",a)}}});"use strict";l.when("A","jQuery","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-buy-now-button","turbo-configuration",
"turbo-checkout-page-ready").register("turbo-checkout-event-verification",function(b,a,c,e,g,d){function h(){var a=d.get(d.KEYS.BUY_NOW_CLICK_EVENT).split(".");return 1<a.length?a[1]:"turboCheckout"}function k(a){var b=a.map(function(a){return a.namespace}).filter(function(a,b,c){return c.indexOf(a)===b});a.length!==b.length&&c.logCount("turboCheckoutBuyNowButtonDuplicateClickHandler")}function n(a){if((a=a.filter(function(a){return a!==x&&"click"===a.type&&0<=l.indexOf(a.namespace)}))&&0<a.length){var b=
0;a.forEach(function(a){a.namespace!==h()&&(c.logCount("turboCheckoutBuyNowButtonClickHandlerWhitelisted:"+a.namespace),b++)});0<b&&c.logCount("turboCheckoutBuyNowButtonClickHandlerWhitelistedQuantity:"+b)}}function m(a){if((a=a.filter(function(a){return a!==x&&"click"===a.type&&0>l.indexOf(a.namespace)}))&&0<a.length){var b=0;a.forEach(function(){c.logCount("turboCheckoutBuyNowButtonClickHandlerNotWhitelisted");b++});c.logCount("turboCheckoutBuyNowButtonClickHandlerNotWhitelistedQuantity:"+b)}}var f=
!1,l=[h(),"accessoryUpsellInterstitial","makoPreRegistration","moq","siatc","hctpDFL","bbg","vasBuyNow","ppdBundles","makoGiftingMetrics","financialOptionsCheckout"];return{logBuyNowButtonClickHandlerMetrics:function(){var b=g.getBuyNowButtons();if(!f&&b&&0<b.length){for(var d=0;d<b.length;d++){var h=a._data(b[d],"events");if(!h||!h.click){c.logCount("turboCheckoutBuyNowButtonNoBoundHandlers");return}var l=(h=h.click)?h.length:0;1<l&&(e.logDebug("turbo-checkout-event-verification","Multiple handlers bound to 'click' in Buy Now button. Number of handlers: "+
l,void 0),c.logCount("turboCheckoutBuyNowButtonMultipleClickEventsBound"),c.logCount("turboCheckoutBuyNowButtonMultipleClickEventsBoundQuantity:"+l));k(h);m(h);n(h)}f=!0}}}});"use strict";l.when("turbo-checkout-page-ready").register("turbo-constants",function(){return{ASSET_MODE_TURBO_ONLY:"TURBO_ONLY",ASSET_MODE_CLT_CX_ONLY:"CLT_CX_ONLY",ASSET_MODE_TURBO_AND_CLT_CX:"TURBO_AND_CLT_CX"}});"use strict";l.when("A","turbo-checkout-state-handler","turbo-checkout-ajax-wrapper","turbo-checkout-utils","turbo-checkout-urls",
"turbo-checkout-csm","turbo-checkout-navigation-window","turbo-checkout-page-ready").register("turbo-chewbacca-migration-shadow",function(b,a,c,e,g,d,h){function k(a,b){e.logDebug("turbo-chewbacca-migration-shadow",a,b)}function l(){var a=c.createXHRRequest();a.addEventListener("readystatechange",function(){t||!a.readyState||2>a.readyState?k("Chewbacca Request Ignoring ready state changed event because headers already received or missing xhr"):(t=!0,d.logCount("turboCheckoutChewbaccaHeadersReceived"),
d.logCount("turboCheckoutChewbaccaHeadersReceivedDuration",Date.now()-r),a&&a.getResponseHeader("x-amz-turbo-checkout-eligible")?(k("Chewbacca Request Headers received: Turbo eligible"),d.logCount("turboCheckoutChewbaccaEligible")):(k("Chewbacca Request Headers received: Not turbo eligible"),d.logCount("turboCheckoutChewbaccaNotEligible")))});return a}function m(a,b,c){d.logCount("turboCheckoutChewbaccaCallEnd",Date.now()-r);x=null;b=c&&c.getResponseHeader("x-amz-turbo-checkout-eligible");if((a=a&&
a.match(v))&&0<a.length)try{var f=K(a[0]);var g=K.parseJSON(f.text())}catch(E){e.logError("Chewbacca Request Could not extract page state from chewbacca page: "+E)}else k("Chewbacca Request Could not extract page state from response data");g=(f=g)&&"turbo"===f.pipelineType;f=f&&f.currentPurchaseId&&0<String(f.currentPurchaseId).trim().length;g&&!f&&e.logError("Chewbacca Request No purchaseid provided, cannot show turbo");b&&g&&f?(k("Notifying Chewbacca Request success"),d.logCount("turboCheckoutChewbaccaCallSuccess")):
(k("Notifying Chewbacca Request Fail"),d.logCount("turboCheckoutChewbaccaCallFail"))}function f(a,b,c){d.logCount("turboCheckoutChewbaccaCallEnd");x=null;k("Chewbacca Request Error while initiate",c);d.logCount("turboCheckoutChewbaccaCallError");"timeout"===b&&d.logCount("turboCheckoutChewbaccaInitiateTimeOut")}function u(){var b={isAsync:1};a.getAddressId()&&(b.addressID=a.getAddressId());a.isPhysicalGiftCardExperimentEligible()&&(b.isPhysicalGiftCard=!0);a.getLineItems().forEach(function(a,c){c+=
1;b["offerListing."+c]=a.offerListingId;b["quantity."+c]=a.quantity;a.incentivizedCart&&(b["incentivizedCart."+c]=a.incentivizedCart,b.incentivizedCart=a.incentivizedCart);a.customItemPrice&&(b["customItemPrice."+c]=a.customItemPrice,b.customItemPrice=a.customItemPrice)});return b}function p(){var b={"x-amz-support-custom-signin":1};b["x-amz-turbo-checkout-dp-url"]=h.getWindow().location.href;b["x-amz-checkout-entry-referer-url"]=h.getWindow().location.href;var c=a.getCSRFToken();c&&0<c.length&&(b["x-amz-checkout-csrf-token"]=
c);return b}var r,t=!1,x,v=/<script.*data-a-state.*checkout:conductor:page.*>.*<\/script>/,K=b.$;return{shadowCallChewbaccaInitiate:function(){d.logCount("turboCheckoutChewbaccaInitiate");x&&x.abort&&(k("Aborting running Chewbacca request..."),x.abort());t=!1;r=Date.now();d.logCount("turboCheckoutChewbaccaCallStart");var b=g.buildInitiatePathWith(a.getRefTag(),a.getExperimentName(),a.getClientId(),a.getRequestId(),a.getSessionId(),a.getLineItems(),a.getPrimeStatus(),!0);x=c.loadWithJQXHR(b,{type:"POST",
data:u(),headers:p(),xhr:l,success:m,error:f})}}});"use strict";l.when("A","turbo-checkout-utils","turbo-checkout-page-ready").execute("turbo-checkout-buy-again-workaround",function(b,a){b.on("ride:show",function(){a.logDebug("turbo-checkout-buy-again-workaround","Firing page:gone event to reset prefetches");b.trigger("turbo:checkout:page:gone")})});"use strict";l.when("A","turbo-checkout-marketplace","turbo-checkout-state-handler").register("turbo-checkout-aapi",function(b,a,c){return{getAapiRootDomainForMarketplace:function(){var b=
a.getDomainSuffix();b="com"===b?"us":b.replace("com.","").replace("co.","");if(r.location.host.includes("development.amazon"))b=`data-${b}.integ.amazon.com`;else if(r.location.host.includes("pre-prod")){var c=a.getDomainSuffix();c="cn"===c?"pek":["co.jp","com.au","sg","ru"].includes(c)?"pdx":"com ca cl com.co com.mx com.br".split(" ").includes(c)?"iad":"dub";b=`data-${b}-pre-prod.${c}.corp.amazon.com`}else b=`data.amazon.${a.getDomainSuffix()}`;c=a.getMarketplaceId();return`https://${b}/api/marketplaces/${c}`},
getAapiCsrfToken:function(){var a=c.getAmazonApiCSRFToken();a||console.error("Could not find AAPI Csrf token in TurboState");return a},getAapiSlateToken:function(){var a=r.parent.document.querySelector('meta[name\x3d"encrypted-slate-token"]');(a=a?a.content:"")||console.error("Could not find slateToken token");return a}}});"use strict";l.when("A").register("turbo-checkout-marketplace",function(b){function a(){if(!k())return"com";var a=r.location.host;if(a.includes("-pre-prod")){var b=a.split("-pre-prod")[0];
return"uk"===b?"co.uk":"jp"===b?"co.jp":"au"===b?"com.au":"mx"===b?"com.mx":"br"===b?"com.br":"be"===b?"com.be":"tr"===b?"com.tr":"za"===b?"co.za":b}if(a.includes("pre-prod.amazon."))return a.split("pre-prod.amazon.")[1]||"com";if(a.includes("-pre-prod.corp.amazon.com")){b=a.split("-pre-prod.corp.amazon.com")[0];if("se"===b)return"se";if("pl"===b)return"pl";if("be"===b)return"com.be";if("za"===b)return"co.za";if("ie"===b)return"ie"}return a.includes("sg-gamma.aka.amazon.com")?"sg":a.includes("-pre-prod.aka.amazon.com")&&
(b=a.split("-pre-prod.aka.amazon.com")[0],"eg"===b)?"eg":a.split(".amazon.")[1]||"com"}function c(){return g[a()]||g.com}function e(){if(!k())return null;if(r.widgetContext)return r.widgetContext;for(var a=document.querySelectorAll("iframe"),b=0;b<a.length;b++){var c=a[b];try{var d=c.contentWindow&&c.contentWindow.widgetContext}catch(p){d=!1}if(d&&(c=a[b].contentWindow.widgetContext,c!==x))return c}return null}var g=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)c.hasOwnProperty(d)&&
(a[d]=c[d])}return a}({},{ca:{marketplaceId:"A2EUQ1WTGCTBG2",defaultLanguage:"en-CA",marketplaceCountryCode:"CA"},"com.mx":{marketplaceId:"A1AM78C64UM0Y8",defaultLanguage:"es-MX",marketplaceCountryCode:"MX"},com:{marketplaceId:"ATVPDKIKX0DER",defaultLanguage:"en-US",marketplaceCountryCode:"US"}},{"com.au":{marketplaceId:"A39IBJ37TRP1C6",defaultLanguage:"en-AU",marketplaceCountryCode:"AU"},"co.jp":{marketplaceId:"A1VC38T7YXB528",defaultLanguage:"ja-JP",marketplaceCountryCode:"JP"},"in":{marketplaceId:"A21TJRUUN4KGV",
defaultLanguage:"en-IN",marketplaceCountryCode:"IN"},sg:{marketplaceId:"A19VAU5U5O7RUS",defaultLanguage:"en-SG",marketplaceCountryCode:"SG"}},{ae:{marketplaceId:"A2VIGQ35RCS4UG",defaultLanguage:"en-AE",marketplaceCountryCode:"AE"},de:{marketplaceId:"A1PA6795UKMFR9",defaultLanguage:"de-DE",marketplaceCountryCode:"DE"},es:{marketplaceId:"A1RKKUPIHCS9HS",defaultLanguage:"es-ES",marketplaceCountryCode:"ES"},fr:{marketplaceId:"A13V1IB3VIYZZH",defaultLanguage:"fr-FR",marketplaceCountryCode:"FR"},it:{marketplaceId:"APJ6JRA9NG5V4",
defaultLanguage:"it-IT",marketplaceCountryCode:"IT"},nl:{marketplaceId:"A1805IZSGTT6HS",defaultLanguage:"nl-NL",marketplaceCountryCode:"NL"},"co.uk":{marketplaceId:"A1F83G8C2ARO7P",defaultLanguage:"en-GB",marketplaceCountryCode:"GB"},se:{marketplaceId:"A2NODRKZP88ZB9",defaultLanguage:"sv-SE",marketplaceCountryCode:"SE"},pl:{marketplaceId:"A1C3SOZRARQ6R3",defaultLanguage:"pl-PL",marketplaceCountryCode:"PL"},"com.be":{marketplaceId:"AMEN7PMS3EDWL",defaultLanguage:"fr-BE",marketplaceCountryCode:"BE"},
eg:{marketplaceId:"ARBP9OOSHTCHU",defaultLanguage:"ar-AE",marketplaceCountryCode:"EG"},"com.tr":{marketplaceId:"A33AVAJ2PDY3EV",defaultLanguage:"tr-TR",marketplaceCountryCode:"TR"},sa:{marketplaceId:"A17E79C6D8DWNP",defaultLanguage:"ar-AE",marketplaceCountryCode:"SA"},"co.za":{marketplaceId:"AE08WJ6YKNBMC",defaultLanguage:"en-ZA",marketplaceCountryCode:"ZA"},ie:{marketplaceId:"A28R8C7NBKEWEA",defaultLanguage:"en-IE",marketplaceCountryCode:"IE"}},{"com.br":{marketplaceId:"A2Q3Y263D00KWC",defaultLanguage:"pt-BR",
marketplaceCountryCode:"BR"}},{cn:{marketplaceId:"AAHKV2X7AFYLW",defaultLanguage:"zh-CN",marketplaceCountryCode:"CN"}}),d="ae de es fr it nl co.uk se pl com.be eg com.tr sa co.za ie".split(" "),h=["ca","com.mx","com"],k=function(){return"undefined"!==typeof r&&"undefined"!==typeof document};return{getDomainSuffix:a,getMarketplaceId:function(){return c().marketplaceId},getDefaultLanguage:function(){return c().defaultLanguage},getLanguageOfPreference:function(){if(!k())return c().defaultLanguage;var a=
e(),b=r.top&&r.top.document&&r.top.document.documentElement&&r.top.document.documentElement.lang;return a&&a.requestContext&&a.requestContext.language||b||c().defaultLanguage},getMarketplaceCountryCode:function(){return c().marketplaceCountryCode},isEUMarketplace:function(){return-1!==d.indexOf(a())},isNAMarketplace:function(){return-1!==h.indexOf(a())},isPageLanguageDefaultLanguage:function(){return this.getLanguageOfPreference().toLowerCase()===this.getDefaultLanguage().toLowerCase()}}})});
/* ******** */
'use strict';(function(d){var m=window.AmazonUIPageJS||window.P,r=m._namespace||m.attributeErrors,a=r?r("TurboCheckoutDesktopAssets","TurboCheckout"):m;a.guardFatal?a.guardFatal(d)(a,window):a.execute(function(){d(a,window)})})(function(d,m,r){d.when("turbo-configuration-keys","turbo-checkout-page-ready").register("turbo-device-configuration",function(a){if(!b){var b={};b[a.SHOW_SIGN_IN_INTERFACE]="turbo-checkout-browser-signin";b[a.EXTEND_ELIGIBLE_STATE]=!1;b[a.IS_DEVICE_FILTER_REQUIRED]=!0;b[a.VIEW_ADAPTER]=
"turbo-checkout-modal";b[a.WARRANTY_CHECKBOX_INPUT_SELECTOR]="input[id^\x3dmbb-offeringID-]";b[a.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR]=".abbListItem";b[a.WARRANTY_OFFER_INPUT_SELECTOR]="input[id^\x3dmbb-offeringID-]:checked";b[a.WARRANTY_ASIN_INPUT_NAME]="asin"}return b});"use strict";d.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-device-variant","turbo-checkout-is-touch-and-orientation-enabled","turbo-checkout-page-ready").register("turbo-checkout-device-filter",
function(a,b,g,d,f,r){function h(a){var c=!1;this.countOnce=function(){c||(b.logCount(a),c=!0)}}function e(a){g.logDebug("turbo-checkout-device-filter",a)}var m="turboCheckoutDisabledDesktopAuiVariant"+f,k,v,c,y,t,n,p;return{isDeviceTurboEligible:function(){k=k||new h("Desktop"===f?"turboCheckoutDesktopAuiVariantEligible":m);var b;(b=v)||(b=g.isInternetExplorer()?"turboCheckoutDisabledDesktopIE":g.isIPad()?"turboCheckoutDisabledDesktopIPad":g.isIPhone()?"turboCheckoutDisabledDesktopIPhone":g.isAndroid()?
"turboCheckoutDisabledDesktopAndroid":"turboCheckoutDesktopUserAgentEligible",b=new h(b));v=b;c=c||new h("turboCheckoutDisabledDesktopTouch");y=y||new h("turboCheckoutDisabledDesktopOrientation");t=t||new h("turboCheckoutDisabledDesktopTouchAndOrientation");n=n||new h("turboCheckoutDisabledTurboDesktopOnDevice");p=p||new h("turboCheckoutEnabledTurboDesktopOnDevice");k.countOnce();"Desktop"===f||e("Aui device variant is NOT Desktop. Turbo will NOT show. Variant is "+f);(b="Desktop"!==f)||(v.countOnce(),
b=!!(g.isInternetExplorer()||g.isIPad()||g.isAndroid()||g.isIPhone()));if(b)return n.countOnce(),!1;if(b=a.capabilities.touch)c.countOnce(),e("Touch enabled device. Turbo will NOT show");var d=a.capabilities.orientation;d&&(y.countOnce(),e("Orientation enabled device. Turbo will NOT show"));b&&d&&t.countOnce();if((b||d)&&!r)return n.countOnce(),!1;p.countOnce();return!0},isSignInSupported:function(){return d.get(d.KEYS.IS_SIGN_IN_SUPPORTED)},isMashBeta:function(){return!1},isBuyNowToTangoSupported:function(){return!0}}});
"use strict";d.when("turbo-checkout-page-ready").execute(function(){d.declare("turbo-checkout-device-variant","Desktop")});"use strict";d.when("A","a-modal","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-iframe","turbo-checkout-base-view","turbo-checkout-loading-spinner","turbo-checkout-view-state","turbo-checkout-ref-tagger","turbo-checkout-strings","turbo-checkout-navigation-window","turbo-checkout-page-ready").register("turbo-checkout-modal",function(a,b,d,m,f,G,h,e,A,k,v){function c(a){m.logDebug("turbo-checkout-modal",
a)}function g(){!B()||e.isOpeningOrOpen()?c("show() suppressed. View is null or undefined or view state is opening or open"):(e.setToOpening(),p().show())}function t(a){u&&e.isOpeningOrOpen()&&(f.appendTo(w()),a?f.appendToIFrameDocument(!0,u):f.write(u))}function n(){f.remove();if(0<w().length)c("Modal frame is in DOM. Inserting Spinner"),w().height("").html(h.create(k.getLoadingText())).append(z()),q("#turbo-checkout-modal-header").text(k.getHeaderText());else{c("Modal frame is NOT in DOM. Resetting Modal");
var a={inlineContent:q("\x3cdiv\x3e",{id:"turbo-checkout-frame"}).html(h.create(k.getLoadingText())).append(z()).prop("outerHTML"),padding:"none",dataStrategy:"inline",header:'\x3cdiv id\x3d"turbo-checkout-modal-header"\x3e'+k.getHeaderText()+"\x3c/div\x3e"};p().update(a)}}function p(){return C=C||b.get(q("#turbo-checkout-modal"))}function z(){return q("\x3cscript/\x3e",{type:"text/javascript",html:'P.when("A").execute(function turboFrameReady(A) { A.trigger("turbo:checkout:frame:ready"); });'})}
function w(){return q("#turbo-checkout-frame")}function x(a){!B()||e.isClosingOrClosed()?c("close() suppressed. View is undefined or null or view state is closing or closed"):(l=a||l,l.notify=!0===l.notify||l.notify===r,e.setToClosing(),p().hide())}function B(){var a=p();a||c("Modal is undefined or null. Modal \x3d "+a);return a?!0:!1}function D(b){q(document.body).unbind("click");b();a.trigger("turbo:checkout:sheet:onNavigateAway");x({notify:!1,immediate:!0,doNotLog:!0})}function E(a){c("onDismiss");
l={notify:!0,reason:a}}var q=a.$,l={},u,C,F=new (G.extend())("#turbo-checkout-frame");f.onContentLoaded(function(a){h.get().remove()});a.on("a:popover:dismiss:turbo",function(){c("onClick_X");E(A.TAGS.TOUCH_X)});a.declarative("a-popover-floating-close","click",function(){c("onDimmerClicked");E(A.TAGS.TOUCH)});a.on("a:popover:beforeShow:turbo",function(){c("onBeforeOpen");e.setToOpening("turbo:checkout:sheet:beforeOpen");n()});a.on("a:popover:show:turbo",function(){c("onOpen");e.setToOpen();u||h.show()});
a.on("a:popover:beforeHide:turbo",function(){c("onBeforeClose");e.setToClosing.apply(e,!0===l.notify?["turbo:checkout:sheet:beforeClose",l]:r);w().removeClass("turbo-checkout-shown")});a.on("a:popover:hide:turbo",function(){c("onClose");e.setToClosed("turbo:checkout:sheet:afterClose");l={}});a.on("a:popover:afterHide:turbo",n);a.on("turbo:checkout:sheet:doOpen",g);a.on("turbo:checkout:sheet:doClose",x);a.on("turbo:checkout:frame:ready",t);a.on(a.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,function(){d.logCount("turboCheckoutDesktopOrientationChange");
e.isOpen()&&d.logCount("turboCheckoutDesktopOrientationChangeWhenModalOpen")});a.on("turbo:checkout:state:product:resolved",function(){q("#turbo-checkout-modal-header").text(k.getHeaderText())});a.on("turbo:checkout:update:modal:header:afterReload",function(a){null!==a&&q("#turbo-checkout-modal-header").text(a)});return{show:g,setContent:function(a){u=a;c("iFrame content saved");e.isOpeningOrOpen()?t():(c("setFrameContent NOT called"),c("viewState is not opening? isOpeningOrOpen \x3d "+e.isOpeningOrOpen()),
c("iFrame already has content? iFrame.hasContent \x3d "+f.hasContent()))},removeContent:function(){u="";n()},close:x,closeToFullscreen:function(a){D(function(){v.assign(a)})},closeImmediatelyThenExecute:D,closeAndNavigate:function(b){v.assign(b);a.trigger("turbo:checkout:sheet:onNavigateAway");x({notify:!1,doNotLog:!0})},registerCallbacks:f.registerCallbacks,updateBounds:function(a){F.updateBounds(a)},getHeight:function(){return F.getHeight()},updateBottomSheetAttributes:function(){},initiateIFrameContent:function(a){u=
a;e.isOpeningOrOpen()&&!f.hasContent()&&t(!0)},appendToIFrameContent:function(a){f.appendToIFrameDocument(!1,a)},finalizeIFrameContent:function(){f.finalizeAndAppendCallback()}}});"use strict";d.declare("turbo-checkout-is-touch-and-orientation-enabled",!1)});
/* ******** */
'use strict';(function(e){var f=window.AmazonUIPageJS||window.P,g=f._namespace||f.attributeErrors,a=g?g("DetailPageTurboCheckoutDesktopAssets",""):f;a.guardFatal?a.guardFatal(e)(a,window):a.execute(function(){e(a,window)})})(function(e,f,g){e.when("turbo-configuration-keys","turbo-product-state-key","turbo-state-parsing-root-node-selector","turbo-checkout-page-ready").register("turbo-client-configuration",function(a,e,f){var g="asin sessionID timestamp qid sr offeringID buyNow addressID registryID registryItemID quantity rebateId triggerTurboWeblab triggerTurboWeblabName turboPageRequestId turboPageSessionId pipelineType referrer ref_ isBuyNow anti-csrftoken-a2z items[0.base][customerVisiblePrice][amount] items[0.base][customerVisiblePrice][currencyCode] items[0.base][customerVisiblePrice][displayString] items[0.base][asin] clientName items[0.base][offerListingId] pageLoadTimestampUTC offerListingID session-id ASIN isMerchantExclusive merchantID isAddon nodeID sellingCustomerID storeID tagActionCode viewID ctaDeviceType ctaPageType usePrimeHandler smokeTestEnabled rsid sourceCustomerOrgListID sourceCustomerOrgListItemID wlPopCommand items[0.base][quantity] submit.buy-now dropdown-selection dropdown-selection-ubb skipCart custom-name.1.incentivizedCart custom-value.1.incentivizedCart items[0.base][additionalParameters][incentivizedCart] ue_back".split(" "),
h="items[0.freebies][additionalParameters][itemAssociation][associatedItemId] items[0.freebies][additionalParameters][itemAssociation][deleteConstraint][mutuallyInclusive] items[0.freebies][additionalParameters][itemAssociation][programType] items[0.freebies][additionalParameters][itemAssociation][properties][accessoryType] items[0.freebies][additionalParameters][itemAssociation][renderType] items[0.freebies][asin] items[0.freebies][offerListingId] items[0.freebies][quantity]".split(" "),k="items[0.base][additionalParameters][itemAssociation][associatedItemId] items[0.base][additionalParameters][itemAssociation][deleteConstraint][mutuallyInclusive] items[0.base][additionalParameters][itemAssociation][programType] items[0.base][additionalParameters][itemAssociation][renderType] items[0.vasItem][additionalParameters][itemAssociation][associatedItemId] items[0.vasItem][additionalParameters][itemAssociation][deleteConstraint][mutuallyInclusive] items[0.vasItem][additionalParameters][itemAssociation][programType] items[0.vasItem][additionalParameters][itemAssociation][renderType] items[0.vasItem][asin] items[0.vasItem][offerListingId] items[0.vasItem][quantity]".split(" "),
c={};g.forEach(function(a){c[a]="PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581"});k.forEach(function(a){c[a]="PAX_CHECKOUT_VAS_ENABLE_BUY_NOW_TANGO_1165794"});c["items[0.base][additionalParameters][giftOptions][includeGiftReceipt]"]="UPMT_CHECKOUT_BUY_NOW_GIFT_TANGO_DESKTOP_1044576";c["gift-wrap"]="UPMT_CHECKOUT_BUY_NOW_GIFT_TANGO_DESKTOP_1044576";c.paymentOfferInfo="PAX_CHECKOUT_BUY_NOW_UFO_TANGO_DESKTOP_1118473";c["items[0.base][additionalParameters][paymentOfferInfo]"]="PAX_CHECKOUT_BUY_NOW_UFO_TANGO_DESKTOP_1118473";
c.inHouseInstallments="PAX_CHECKOUT_BUY_NOW_AMP_TANGO_DESKTOP_1118500";c["installments-check"]="PAX_CHECKOUT_BUY_NOW_AMP_TANGO_DESKTOP_1118500";c.isInstallmentsChecked="PAX_CHECKOUT_BUY_NOW_AMP_TANGO_DESKTOP_1118500";c["items[0.base][additionalParameters][installments][programId]"]="PAX_CHECKOUT_BUY_NOW_AMP_TANGO_DESKTOP_1118500";c["installments-programId"]="PAX_CHECKOUT_BUY_NOW_AMP_TANGO_DESKTOP_1118500";c["items[0.base][additionalParameters][giftCardMetadata][amount][amount]"]="PAX_CHECKOUT_BUY_NOW_GC_TANGO_1121297";
c["items[0.base][additionalParameters][giftCardMetadata][amount][currencyCode]"]="PAX_CHECKOUT_BUY_NOW_GC_TANGO_1121297";c["items[0.base][additionalParameters][giftCardMetadata][amount][displayString]"]="PAX_CHECKOUT_BUY_NOW_GC_TANGO_1121297";c["items[0.base][additionalParameters][giftCardMetadata][type]"]="PAX_CHECKOUT_BUY_NOW_GC_TANGO_1121297";h.forEach(function(a){c[a]=""});var d={};g.forEach(function(a){d[a]="PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_NON_PRIME_1088576"});k.forEach(function(a){d[a]=
"PAX_CHECKOUT_VAS_ENABLE_BUY_NOW_TANGO_1165794"});d["items[0.base][additionalParameters][giftOptions][includeGiftReceipt]"]="UPMT_CHECKOUT_BUY_NOW_GIFT_TANGO_DESKTOP_1044576";d["gift-wrap"]="UPMT_CHECKOUT_BUY_NOW_GIFT_TANGO_DESKTOP_1044576";d.paymentOfferInfo="PAX_CHECKOUT_BUY_NOW_UFO_TANGO_DESKTOP_1118473";d["items[0.base][additionalParameters][paymentOfferInfo]"]="PAX_CHECKOUT_BUY_NOW_UFO_TANGO_DESKTOP_1118473";d.inHouseInstallments="PAX_CHECKOUT_BUY_NOW_AMP_TANGO_DESKTOP_1118500";d["installments-check"]=
"PAX_CHECKOUT_BUY_NOW_AMP_TANGO_DESKTOP_1118500";d.isInstallmentsChecked="PAX_CHECKOUT_BUY_NOW_AMP_TANGO_DESKTOP_1118500";d["items[0.base][additionalParameters][installments][programId]"]="PAX_CHECKOUT_BUY_NOW_AMP_TANGO_DESKTOP_1118500";d["installments-programId"]="PAX_CHECKOUT_BUY_NOW_AMP_TANGO_DESKTOP_1118500";d["items[0.base][additionalParameters][giftCardMetadata][amount][amount]"]="PAX_CHECKOUT_BUY_NOW_GC_TANGO_1121297";d["items[0.base][additionalParameters][giftCardMetadata][amount][currencyCode]"]=
"PAX_CHECKOUT_BUY_NOW_GC_TANGO_1121297";d["items[0.base][additionalParameters][giftCardMetadata][amount][displayString]"]="PAX_CHECKOUT_BUY_NOW_GC_TANGO_1121297";d["items[0.base][additionalParameters][giftCardMetadata][type]"]="PAX_CHECKOUT_BUY_NOW_GC_TANGO_1121297";h.forEach(function(a){d[a]=""});if(!b){var b={};b[a.HOST_PAGE_TYPE_IDENTIFIER]="detail";b[a.IS_BUY_NOW_TO_TANGO_ENABLED]=!0;b[a.IS_BUY_NOW_TO_TANGO_PRIME_SPLIT]=!0;b[a.BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST_PRIME]=c;b[a.BUY_NOW_TO_TANGO_PARAMETER_EXCLUSION_LIST_NON_PRIME]=
d;b[a.BUY_NOW_ONLY_TREATMENT]="T1";b[a.NO_PREFETCH_TREATMENT]=/T[2-9]/;b[a.ADDRESS_INPUT_SELECTORS]=["#unifiedLocation1ClickAddress","#addToCart input[name\x3d'dropdown-selection']","#unifiedLocationAddress","input[name\x3d'dropdown-selection']"];b[a.QUANTITY_SELECT_SELECTOR]="#quantity";b[a.CONFLICTING_INITIATE_LISTENERS]=["click.siatc"];b[a.VAS_CHANGE_EVENTS]=["vas:remove-service-asin-buybox-event","vas:add-service-asin-buybox-event"];b[a.VAS_CHECKBOX_SELCTOR]="#ppdb-add-service-checkbox";b[a.SESSION_ID_SELECTOR]=
'input[name\x3d"session-id"]';b[a.TURBO_PRODUCT_STATE_KEY]=e;b[a.PAGE_STATE_PARSING_ROOT_NODE_SELECTOR]=f;b[a.PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR]=f}return b});"use strict";e.when("turbo-checkout-page-ready").execute(function(){e.declare("turbo-product-state-key","turbo-checkout-product-state")});"use strict";e.when("turbo-checkout-page-ready").execute(function(){e.declare("turbo-state-parsing-root-node-selector",".turbo-checkout-state-root")})});
/* ******** */
